!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light-app",[],e):"object"==typeof exports?exports["cui-light-app"]=e():t["cui-light-app"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"CUI_LIGHT_VERSION",(function(){return Mv})),i.d(e,"CuiInstance",(function(){return ys}));class s extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class n extends s{constructor(t){super("ItemNotFoundError",t)}}class r extends s{constructor(t){super("ArgumentError",t)}}class o extends s{constructor(t){super("CuiInstanceInitError",t)}}class h extends s{constructor(t){super("RegisterElementError",t)}}class a extends s{constructor(t){super("AnimatorError",t)}}class l extends s{constructor(t){super("CSSVariableError",t)}}class c extends s{constructor(t){super("CuiColorError",t)}}class u extends s{constructor(t){super("CuiPositionError",t)}}const d="dark",p="animation-progress",g="print",v="swiping-on",f={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},m="--cui-color-light-app-background",w="--cui-color-dark-app-background",k="--cui-color-light-background",y="--cui-color-dark-background ",b="--cui-color-light-border",C="--cui-color-dark-border",M={light:{base:"--cui-color-light-base",muted:"--cui-color-light-muted",active:"--cui-color-light-active"},dark:{base:"--cui-color-dark-base",muted:"--cui-color-dark-muted",active:"--cui-color-dark-active"},accent:{base:"--cui-color-primary",muted:"--cui-color-primary-muted",active:"--cui-color-primary-active"},secondary:{base:"--cui-color-secondary",muted:"--cui-color-secondary-muted",active:"--cui-color-secondary-active"},success:{base:"--cui-color-success",muted:"--cui-color-success-muted",active:"--cui-color-success-active"},warning:{base:"--cui-color-warning",muted:"--cui-color-warning-muted",active:"--cui-color-warning-active"},error:{base:"--cui-color-error",muted:"--cui-color-error-muted",active:"--cui-color-error-active"}},A={fontSize:"--{prefix}-font-size",lineHeight:"--{prefix}-line-height",animationTime:"--{prefix}-animation-time",animationTimeLong:"--{prefix}-animation-time-long",animationTimeShort:"--{prefix}-animation-time-short",colorLightAppBackground:"--{prefix}-color-light-app-background",colorLightBackground:"--{prefix}-color-light-background",colorLightBorder:"--{prefix}-color-light-border",colorLightBase:"--{prefix}-color-light-base",colorLightActive:"--{prefix}-color-light-active",colorLightMuted:"--{prefix}-color-light-muted",colorDarkAppBackground:"--{prefix}-color-dark-app-background",colorDarkBackground:"--{prefix}-color-dark-background",colorDarkBorder:"--{prefix}-color-dark-border",colorDarkBase:"--{prefix}-color-dark-base",colorDarkActive:"--{prefix}-color-dark-active",colorDarkMuted:"--{prefix}-color-dark-muted",colorAccent:"--{prefix}-color-primary",colorAccentActive:"--{prefix}-color-primary-active",colorAccentMuted:"--{prefix}-color-primary-muted",colorAccentShade:"--{prefix}-color-primary-shade",colorAccentShadeDark:"--{prefix}-color-primary-shade-dark",colorSecondary:"--{prefix}-color-secondary",colorSecondaryActive:"--{prefix}-color-secondary-active",colorSecondaryMuted:"--{prefix}-color-secondary-muted",colorSecondaryShade:"--{prefix}-color-secondary-shade",colorSecondaryShadeDark:"--{prefix}-color-secondary-shade-dark",colorWarning:"--{prefix}-color-warning",colorWarningActive:"--{prefix}-color-warning-active",colorWarningMuted:"--{prefix}-color-warning-muted",colorWarningShade:"--{prefix}-color-warning-shade",colorWarningShadeDark:"--{prefix}-color-warning-shade-dark",colorSuccess:"--{prefix}-color-success",colorSuccessActive:"--{prefix}-color-success-active",colorSuccessMuted:"--{prefix}-color-success-muted",colorSuccessShade:"--{prefix}-color-success-shade",colorSuccessShadeDark:"--{prefix}-color-success-shade-dark",colorError:"--{prefix}-color-error",colorErrorActive:"--{prefix}-color-error-active",colorErrorMuted:"--{prefix}-color-error-muted",colorErrorShade:"--{prefix}-color-error-shade",colorErrorShadeDark:"--{prefix}-color-error-shade-dark",inputBackground:"--{prefix}-input-background-color",colorShade:"--{prefix}-color-shade",colorShadeDarker:"--{prefix}-color-shade-darker",colorShadeLight:"--{prefix}-color-shade-light",colorShadeLighter:"--{prefix}-color-shade-light-lighter",outline:"--{prefix}-outline",borderRadius:"--{prefix}-border-radius",padding:"--{prefix}-padding",margin:"--{prefix}-margin",scrollbarWidth:"--{prefix}-scrollbar-width",componentSpace:"--{prefix}-component-space",accordionIcon:"--{prefix}-accordion-icon"};class E{}E.logLevel="none",E.prefix="cui";const W="instance-initialized",T="instance-finished",x="resize",S="open",L="opened",I="close",P="closed",D="toggle",O="toggled",N="switch",B="switched",_="scroll",$="targetchange",H="intersection",R="keydown",F="windowclick",q="offset",U="progresschange",z="progresschanged",V="globalmove",j="movelock",Y="pause",K="paused",X="sorted",G="sortstart",Z="toast",J="toastshow",Q="toasthidden",tt="alert",et="gesture-down",it="gesture-up",st="gesture-left",nt="gesture-right",rt="notify",ot="notified",ht=function*(){let t=0;for(;;){((yield t++)||t>2e5)&&(t=0)}}();function at(t,e=!0){return null!=t&&(!e||!function(t){if("string"==typeof t)return 0===t.length;if("boolean"==typeof t)return t;if(Array.isArray(t))return 0===t.length;return!1}(t))}function lt(t,e){if(!at(t)||!at(e))throw new r("Missing argument value");return`${t}-${e}`}function ct(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function ut(t,e,i){return t<e?e:t>i?i:t}function dt(t,e,i,s){return null==t||isNaN(t)?s:ut(t,e,i)}function pt(t){return at(t)?`[${t.join("],[")}]`:""}function gt(...t){if(!at(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!at(t[i]))return!1;return!0}function vt(t){let e="none";return t>=640&&(e="small"),t>=960&&(e="medium"),t>=1200&&(e="large"),t>=1600&&(e="xlarge"),e}function ft(t){let e={};return at(t)?(e=function(t){let e=null;if(at(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error((i="An exception occured",s="Functions",n="parseJsonString",`[${(new Date).toLocaleString()}][${null!=s?s:"-"}][${null!=n?n:"-"}][${i}]`),t)}return e}var i,s,n;return null}(t.trim()),at(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=It(t),s=void 0,n="";i.length<2||(s=i[0].trim(),n=i[1].trim(),s&&(e[s]=n.replace("U+0003B",";")))})):e=t),e):e}function mt(t,e){let i=parseInt(t);return isNaN(i)?e:i}function wt(t,e){return at(t)&&at(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function kt(t,e,i){return at(t)&&t>=e&&t<=i}function yt(t,e){return gt(t,e)?ft(t.getAttribute(e)):null}function bt(t){return!!at(t)&&["y","t","true","yes"].includes(t.toLowerCase())}function Ct(t,e){return at(t)?bt(t):e}function Mt(t,e){return at(t)?t.toLowerCase():e}function At(t){return"string"==typeof t}function Et(t,e){return at(t)?t.replace("{prefix}",null!=e?e:""):t}function Wt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function Tt(t){if(!at(t))return;let e=t.parentElement;return at(e)&&at(e.$cuid)?e:Tt(e)}function xt(t){let e=0;return t?(Array.from(t.children).forEach(t=>{e+=t.getBoundingClientRect().height}),e>0?e+4:e):-1}function St(t,e){if(gt(t,e))for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}function Lt(t,e,i){let s=-1;switch(t){case"prev":s=e<=0?i-1:e-1;break;case"next":s=e<i-1?e+1:0;break;case"first":s=0;break;case"last":s=i-1;default:s=mt(t,-1)}return s}function It(t){let e=[];if(!at(t))return e;let i=t.split(":");return 1===i.length?i:[i.shift(),i.join(":")]}class Pt{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.prefix="cui",this.plugins={},this.root=document.body}fromInit(t){var e;return this.prefix=null!==(e=t.prefix)&&void 0!==e?e:"cui",this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this.root=t.root,this}}class Dt{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.root=document.body,this.busSetup=void 0,this.development=void 0}}class Ot{constructor(t,e){this.level=e,this.component=t,this.id="-"}setLevel(t){this.level=t}setId(t){this.id=t}debug(t,e){"debug"===this.level&&console.log(this.prepString(t,"debug",e))}error(t,e){"error"!==this.level&&"debug"!==this.level&&"warning"!==this.level||console.error(this.prepString(t,"error",e))}warning(t,e){"warning"!==this.level&&"debug"!==this.level||console.warn(this.prepString(t,"warning",e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,"exception",e)),"debug"===this.level&&console.error(t.stack)}performance(t,e){if("debug"!==this.level)return;let i=Date.now();t(),console.log(this.prepString(`Performance measure: ${Date.now()-i}ms`,"performance",e))}prepString(t,e,i){return`[${(new Date).toLocaleString()}][${e}][${this.component}][${null!=i?i:"-"}][${this.id}][${t}]`}}class Nt{static get(t,e){return new Ot(t,null!=e?e:E.logLevel)}}var Bt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function _t(t,e){return e.filter(e=>t.hasAttribute&&t.hasAttribute(e.attribute))}function $t(t,e,i){return Bt(this,void 0,void 0,(function*(){if(!gt(t,e,i))return!1;let s=t;s.$cuid||(s.$cuid=t.hasAttribute("cuid")?t.getAttribute("cuid"):function(t){return`${at(t)?t:"cui-element"}-${ht.next().value}`}(t.tagName),t.setAttribute("cuid",s.$cuid));for(let t of e)yield Rt(s,t,i,yt(s,t.attribute));return!0}))}function Ht(t){return Bt(this,void 0,void 0,(function*(){const e=t;if(!e.$handlers)return!1;for(let t in e.$handlers)yield Ft(e,t);return!0}))}function Rt(t,e,i,s){return Bt(this,void 0,void 0,(function*(){t.$handlers||(t.$handlers={});try{let n=e.get(t,i);t.$handlers[e.attribute]=n,t.$handlers[e.attribute].handle(s)}catch(t){throw new h(`An error occured during [${e.attribute}] initialization: ${t.message}`)}return!0}))}function Ft(t,e){return Bt(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let i=t.$handlers[e];if(!i)return!1;try{i.destroy()}catch(t){throw new h(`An error occured during [${e}] destroy: ${t.message}`)}return!0}))}var qt,Ut,zt,Vt,jt,Yt,Kt,Xt,Gt,Zt,Jt,Qt,te=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ee=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ie=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class se{constructor(t,e){qt.set(this,void 0),Ut.set(this,void 0),zt.set(this,void 0),Vt.set(this,void 0),jt.set(this,void 0),Yt.set(this,void 0),Kt.set(this,void 0),ee(this,qt,void 0),this.plugins=void 0,ee(this,Ut,void 0),ee(this,zt,t),this._log=Nt.get("CuiMutationObserver"),ee(this,Vt,[]),ee(this,jt,[]),ee(this,Yt,e),ee(this,Kt,"")}setPlugins(t){return this.plugins=t,this}setComponents(t){return ee(this,Vt,t),this}setAttributes(t){return ee(this,Ut,{attributes:!0,subtree:!0,childList:!0,attributeFilter:t}),ee(this,jt,t),ee(this,Kt,pt(t)),this}start(){return this._log.debug("Starting"),ie(this,Ut)?(ee(this,qt,new MutationObserver(this.mutationCallback.bind(this))),ie(this,qt).observe(ie(this,zt),ie(this,Ut)),this._log.debug("Started"),this):(this._log.error("Cannot start - options are not defined"),this)}stop(){return this._log.debug("Stopping"),ie(this,qt)?(ie(this,qt).disconnect(),ee(this,qt,void 0),this._log.debug("Stopped"),this):(this._log.debug("Observer not available"),this)}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;if(!gt(t.attributeName,e)){this._log.error("Mutation attribute doesn't not exisist");break}this.handeComponentUpdate(t.attributeName,e);break;case"childList":this.handleChildListMutation(t)}at(this.plugins)&&this.plugins.onMutation(t).then(()=>{})})}handeComponentUpdate(t,e){let i=yt(e,t);(function(t,e,i){return Bt(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let s=t.$handlers[e];if(!s)return!1;try{s.refresh(i)}catch(t){throw new h(`An error occured during [${e}] update: ${t.message}`)}return!0}))})(e,t,i).then(e=>{this._log.debug("Component: "+t+" updated with: "+e,"handeComponentUpdate")}).catch(t=>{this._log.exception(t)})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(this._log.debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes).then(t=>{this._log.debug("Added nodes: "+e+" with status: "+t)}).catch(t=>{this._log.exception(t)})):i>0&&(this._log.debug("Removing nodes: "+i),this.handleRemovedNodes(t.removedNodes).then(t=>{this._log.debug("Removed nodes: "+i+" with status: "+t)}).catch(t=>{this._log.exception(t)}))}handleAddedNodes(t){return te(this,void 0,void 0,(function*(){for(let e of t){yield this.handleAddedNode(e);let t=e,i=t.hasChildNodes()?t.querySelectorAll(ie(this,Kt)):null;at(i)&&(this._log.debug("Additional nodes to add: "+i.length),yield this.handleAddedChildren(i))}return!0}))}handleAddedChildren(t){return te(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield this.handleAddedNode(i));return e}))}handleAddedNode(t){return te(this,void 0,void 0,(function*(){let e=[];return e=_t(t,ie(this,Vt)),$t(t,e,ie(this,Yt))}))}handleRemovedNodes(t){return te(this,void 0,void 0,(function*(){for(let e of t){yield Ht(e);let t=e,i=e.hasChildNodes()?t.querySelectorAll(ie(this,Kt)):null;at(i)&&(this._log.debug("Additional nodes to remove: "+i.length),yield this.handleDestroyChildren(i))}return!0}))}handleDestroyChildren(t){return te(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield Ht(i));return e}))}}qt=new WeakMap,Ut=new WeakMap,zt=new WeakMap,Vt=new WeakMap,jt=new WeakMap,Yt=new WeakMap,Kt=new WeakMap;class ne{constructor(t){Xt.set(this,void 0),Gt.set(this,void 0),Zt.set(this,void 0),Jt.set(this,void 0),Qt.set(this,{childList:!0,subtree:!0}),ee(this,Gt,void 0),ee(this,Jt,!1),ee(this,Xt,!1),ee(this,Zt,t)}observe(){ie(this,Xt)||ie(this,Jt)||!ie(this,Gt)||(ie(this,Gt).observe(ie(this,Zt),ie(this,Qt)),ee(this,Xt,!0))}unobserve(){ie(this,Xt)&&ie(this,Gt)&&(ie(this,Gt).disconnect(),ee(this,Xt,!1))}isObserving(){return ie(this,Xt)}disable(t){ee(this,Jt,t),ie(this,Jt)&&this.unobserve()}onMutation(t){ie(this,Xt)&&this.unobserve(),ee(this,Gt,new MutationObserver(t))}}Xt=new WeakMap,Gt=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap;var re,oe,he,ae,le,ce,ue=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},de=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pe{constructor(){re.set(this,void 0),oe.set(this,void 0),he.set(this,void 0),ae.set(this,!1),le.set(this,void 0),ce.set(this,void 0),ue(this,he,window.requestAnimationFrame.bind(window)),ue(this,re,[]),ue(this,oe,[]),ue(this,le,5),ue(this,ce,void 0)}onError(t){ue(this,ce,t)}mutate(t,e,...i){de(this,oe).push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){de(this,re).push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!de(this,ae)){if(ue(this,ae,!0),t&&t>=de(this,le))throw new Error("Fast Dom limit reached");de(this,he).call(this,this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=de(this,re),n=de(this,oe);try{this.run(n),this.run(s)}catch(t){de(this,ce)?de(this,ce).call(this,t):console.error("An error has been captured in interactions: "+t.message),i=t}ue(this,ae,!1),(i||de(this,re).length||de(this,oe).length)&&this.schedule(e+1)}}re=new WeakMap,oe=new WeakMap,he=new WeakMap,ae=new WeakMap,le=new WeakMap,ce=new WeakMap;class ge{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var ve,fe,me=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},we=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ke{constructor(t){ve.set(this,void 0),fe.set(this,void 0),me(this,ve,[]),me(this,fe,[]),t&&t.forEach(t=>{if(!at(t.key))throw me(this,ve,[]),me(this,fe,[]),new r("Key is empty");this.add(t.key,t.value)})}add(t,e){if(this.throwOnEmptyKey(t),this.containsKey(t))throw new Error("Key already exists");we(this,ve).push(t),we(this,fe).push(e)}remove(t){if(!at(t))return;let e=we(this,ve).indexOf(t);e>=0&&(we(this,ve).splice(e,1),we(this,fe).splice(e,1))}get(t){this.throwOnEmptyKey(t);let e=this.indexOf(t);if(!(e<0))return we(this,fe)[e]}containsKey(t){return at(t)&&this.indexOf(t)>=0}keys(){return we(this,ve)}values(){return we(this,fe)}indexOf(t){return at(t)?we(this,ve).indexOf(t):-1}update(t,e){this.throwOnEmptyKey(t);let i=this.indexOf(t);if(i<0)throw new n(`Item with key [${t}] not found`);we(this,fe)[i]=e}clear(){me(this,fe,[]),me(this,ve,[])}throwOnEmptyKey(t){if(!at(t))throw new r("Key is empty")}}ve=new WeakMap,fe=new WeakMap;var ye,be,Ce=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Me=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ae{constructor(t){ye.set(this,void 0),be.set(this,void 0),Ce(this,ye,new ke),Ce(this,be,null!=t?t:500)}put(t,e){at(t)&&(this.has(t)?Me(this,ye).update(t,e):(this.clean(),Me(this,ye).add(t,e)))}get(t){if(!this.has(t))return;let e=Me(this,ye).get(t);if(e&&e.refresh())return e;Me(this,ye).remove(t)}has(t){return!!at(t)&&Me(this,ye).containsKey(t)}remove(t){return!!at(t)&&(!!this.has(t)&&(Me(this,ye).remove(t),!0))}clear(){Me(this,ye).clear()}clean(){Me(this,ye).keys().length>=Me(this,be)&&Me(this,ye).remove(Me(this,ye).keys()[0])}}ye=new WeakMap,be=new WeakMap;var Ee,We,Te,xe=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Se=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Le=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ie{constructor(){this.queue=[],this.isBusy=!1}idMatches(t,e){return!at(t)||at(t)&&t==e}}class Pe extends Ie{constructor(t){super(),Ee.set(this,void 0),We.set(this,void 0),Se(this,We,t),Se(this,Ee,Nt.get("SimpleEventEmitHandler"))}handle(t,e,i){return xe(this,void 0,void 0,(function*(){return at(t)?(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||this.isBusy||(this.isBusy=!0,this.queue.length>0&&(yield this.perform()),this.isBusy=!1),!0):(Le(this,Ee).warning("No events provided"),!1)}))}perform(){return xe(this,void 0,void 0,(function*(){let t=this.queue.shift();if(t)for(let e in t.events){let i=t.events[e];try{this.idMatches(t.cuid,i.$cuid)&&(yield Le(this,We).execute(i.callback,t.args))}catch(t){Le(this,Ee).error(t)}}}))}}Ee=new WeakMap,We=new WeakMap;class De extends Ie{constructor(t){super(),Te.set(this,void 0),Se(this,Te,t)}handle(t,e,i){return xe(this,void 0,void 0,(function*(){return!!at(t)&&(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||(this.isBusy=!0,yield this.perform(),this.queue.length>0&&(yield this.perform()),this.isBusy=!1),!0)}))}perform(){return xe(this,void 0,void 0,(function*(){let t=this.queue.shift(),e=[];if(!t)return Promise.all(e);for(let i in t.events){let s=t.events[i];this.idMatches(t.cuid,s.$cuid)&&e.push(Le(this,Te).execute(s.callback,t.args))}return Promise.all(e)}))}}Te=new WeakMap;var Oe=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class Ne{execute(t,e){return Oe(this,void 0,void 0,(function*(){e=null!=e?e:[];try{return t(...e),!0}catch(t){}return!1}))}}var Be,_e,$e,He,Re,Fe,qe,Ue,ze=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ve=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},je=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ye{constructor(t,e){Be.set(this,void 0),_e.set(this,void 0),$e.set(this,void 0),He.set(this,void 0),Ve(this,Be,{}),Ve(this,$e,t),Ve(this,He,null!=e?e:"CuiEventBus"),Ve(this,_e,Nt.get(je(this,He)))}on(t,e,i){if(!gt(t,e))throw new r("Missing argument");let s=je(this,He)+"-"+function(){let t=Wt(1,1e3),e=Wt(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}();return je(this,Be)[t]||(je(this,Be)[t]={}),this.isAttached(je(this,Be)[t],s,i)?null:(je(this,_e).debug(`Attaching new event: [${t}] for: [${s}]`),je(this,Be)[t][s]={callback:e,$cuid:this.getCuid(i)},s)}detach(t,e){if(!gt(t,e))throw new r("Missing argument");let i=je(this,Be)[t];je(this,_e).debug(`Detaching item: [${e}] from [${t}]`),this.isAttached(i,e)&&delete i[e]}detachAll(t){at(t)&&je(this,Be)[t]?delete je(this,Be)[t]:je(this,_e).error("Event name is missing or incorrect","detachAll")}emit(t,e,...i){return ze(this,void 0,void 0,(function*(){if(!at(t))throw new r("Event name is incorrect");let s=je(this,Be)[t];return at(s)&&(je(this,_e).debug(`Emit: [${t}]`),yield je(this,$e).handle(s,e,i)),!0}))}isSubscribing(t,e,i){let s=je(this,Be)[t];return this.isAttached(s,e,i)}detachByCuid(t,e){if(!gt(t,e))return;let i=je(this,Be)[t];at(i)&&St(Object.assign({},i),(t,s)=>{s.$cuid===e&&delete i[t]})}isAttached(t,e,i){return at(i)?at(t)&&at(e)&&at(t[e])&&t[e].$cuid==i.$cuid:at(t)&&at(e)&&at(t[e])}getCuid(t){return at(t)?t.$cuid:null}}Be=new WeakMap,_e=new WeakMap,$e=new WeakMap,He=new WeakMap;class Ke{constructor(t){if(Re.set(this,void 0),Fe.set(this,void 0),qe.set(this,void 0),Ue.set(this,void 0),Ve(this,Fe,Nt.get("CuiEventBus")),Ve(this,qe,[]),Ve(this,Re,{}),Ve(this,Ue,0),at(t)){je(this,Fe).debug("Initiating buses"),(1===t.length?t:t.sort((t,e)=>t.priority-e.priority)).forEach((t,e)=>{je(this,qe).push(this.initBusInstance(t.name,t.handler)),Ve(this,Re,Object.assign(Object.assign({},je(this,Re)),this.mapEvents(t.eventsDef,e))),je(this,Fe).debug(`Bus ${t.name} has been initialized with number: ${e}`)}),je(this,qe).push(this.initBusInstance("DefaultEventBus","tasked")),Ve(this,Ue,je(this,qe).length-1),je(this,Fe).debug("Bus initialization finished")}}on(t,e,i){if(!gt(t,e))throw new r("Missing argument");return this.get(t).on(t,e,i)}detach(t,e,i){if(!gt(t,e))throw new r("Missing argument");this.get(t).detach(t,e,i)}detachAll(t){this.get(t).detachAll(t)}emit(t,e,...i){return ze(this,void 0,void 0,(function*(){if(!at(t))throw new r("Event name is incorrect");return this.get(t).emit(t,e,...i)}))}isSubscribing(t,e,i){return this.get(t).isSubscribing(t,e,i)}detachByCuid(t,e){gt(t,e)&&this.get(t).detachByCuid(t,e)}initBusInstance(t,e){if(!gt(t,e))throw new r("Bus name or handler name is incorrect");let i=new Ne,s=class{static get(t,e){switch(t){case"tasked":return new De(e);default:return new Pe(e)}}}.get(e,i);return new Ye(s,t)}mapEvents(t,e){return t.reduce((t,i)=>t[i]?t:Object.assign(Object.assign({},t),{[i]:e}),{})}get(t){let e=je(this,Re)[t];return je(this,qe)[null!=e?e:je(this,Ue)]}}Re=new WeakMap,Fe=new WeakMap,qe=new WeakMap,Ue=new WeakMap;new WeakMap,new WeakMap;class Xe{constructor(t){}append(t){if(at(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.appendChild(s),e.appendChild(i)}return!0}}var Ge,Ze,Je,Qe,ti=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ei=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ii{constructor(t){Ge.set(this,void 0),Ze.set(this,void 0),Je.set(this,15),Qe.set(this,15),ti(this,Ge,document.documentElement),ti(this,Ze,t)}setAppBackground(t,e){this.setPropertyIn(m,t.toCssString()),this.setPropertyIn(w,e.toCssString())}setComponentBackground(t,e){this.setPropertyIn(k,t.toCssString()),this.setPropertyIn(y,e.toCssString())}setBordersColors(t,e){this.setPropertyIn(b,t.toCssString()),this.setPropertyIn(C,e.toCssString())}setColor(t,e){var i,s;const n=M[t],r=e.base;if(!at(n)||!at(r))return;const o=null!==(i=e.muted)&&void 0!==i?i:r.clone().lighten(ei(this,Je)),h=null!==(s=e.active)&&void 0!==s?s:r.clone().darken(ei(this,Qe));ei(this,Ze).mutate(()=>{this.setProperty(n.base,r.toCssString()),this.setProperty(n.active,h.toCssString()),this.setProperty(n.muted,o.toCssString())},this)}setLightenFactor(t){ti(this,Je,ut(t,0,100))}setDarkenFactor(t){ti(this,Qe,ut(t,0,100))}setProperty(t,e){ei(this,Ge).style.setProperty(t,e)}setPropertyIn(t,e){gt(e,t)&&ei(this,Ze).mutate(this.setProperty,this,t,e)}}Ge=new WeakMap,Ze=new WeakMap,Je=new WeakMap,Qe=new WeakMap;var si,ni=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ri=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class oi{constructor(t){si.set(this,void 0),ni(this,si,t)}pushState(t,e,i,s,n){this.checkAndCall(()=>{ri(this,si).pushState(t,e,i,s,n)})}registerElement(t,e,i){this.checkAndCall(()=>{ri(this,si).registerElement(t,e,i)})}unregisterElement(t,e){this.checkAndCall(()=>{ri(this,si).unregisterElement(t,e)})}setProperty(t,e,i,s){this.checkAndCall(()=>{ri(this,si).setProperty(t,e,i,s)})}log(t,e,i){this.checkAndCall(()=>{ri(this,si).log(t,e,i)})}checkAndCall(t){at(ri(this,si))&&t()}}si=new WeakMap;var hi,ai=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},li=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ci{constructor(t,e){hi.set(this,void 0),this.setup=(new Pt).fromInit(t),this.interactions=class{static get(t,e){switch(t){case"async":const t=new pe;return e&&t.onError(e),t;default:return new ge}}}.get(t.interaction,this.onInteractionError.bind(this)),this.cache=new Ae(this.setup.cacheSize),this.bus=class{static get(t){return at(t)?new Ke(t):new Ye(new De(new Ne))}}.get(t.busSetup),this.colors=new ii(this.interactions),this.development=new oi(t.development),this.styleAppender=new Xe(this.interactions),ai(this,hi,null!=e?e:[])}setLightMode(t){const e=lt(this.setup.prefix,d),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=lt(this.setup.prefix,d);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=lt(this.setup.prefix,g),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=lt(this.setup.prefix,g);return document.body.classList.contains(t)}setProperty(t,e){if(!gt(t,e))throw new l("Property or value was not provided");let i=Et(t,this.setup.prefix);document.documentElement.style.setProperty(i,e)}isPlugin(t){return at(t)&&li(this,hi).find(e=>e===t)}onInteractionError(t){console.error("An error has been captured from interactions"),console.error(t)}}hi=new WeakMap;var ui,di=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},pi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},gi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class vi{constructor(t){ui.set(this,void 0),pi(this,ui,t)}performAction(t,e,i,s){return di(this,void 0,void 0,(function*(){return new Promise(n=>{gi(this,ui).mutate(()=>{e.add(t),t.classList.add(p),setTimeout(()=>{gi(this,ui).mutate(()=>{e.remove(t),t.classList.remove(p),s&&s(),n(!0)},null)},i)},null)})}))}performActions(t,e,i,s){return di(this,void 0,void 0,(function*(){return new Promise(n=>{gi(this,ui).mutate(()=>{e.forEach(e=>e.add(t)),t.classList.add(p),setTimeout(()=>{gi(this,ui).mutate(()=>{e.forEach(e=>e.remove(t)),t.classList.remove(p),s&&s(),n(!0)},null)},i)},null)})}))}performSwitchAction(t,e,i,s,n,r){return di(this,void 0,void 0,(function*(){return new Promise(o=>{gi(this,ui).mutate(()=>{i.forEach(e=>e.add(t)),t.classList.add(p),at(e)&&(s.forEach(t=>t.add(e)),e.classList.add(p)),setTimeout(()=>{gi(this,ui).mutate(()=>{i.forEach(e=>e.remove(t)),t.classList.remove(p),at(e)&&(s.forEach(t=>t.remove(e)),e.classList.remove(p)),n(),o(!0)},null)},r)},null)})}))}}ui=new WeakMap;var fi,mi,wi,ki,yi,bi,Ci=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Mi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ai{constructor(t){fi.set(this,void 0),Ci(this,fi,t)}add(t,e){gt(t,Mi(this,fi))&&!t.classList.contains(Mi(this,fi))&&t.classList.add(Mi(this,fi))}remove(t,e){gt(t,Mi(this,fi))&&t.classList.contains(Mi(this,fi))&&t.classList.remove(Mi(this,fi))}toggle(t,e){gt(t,Mi(this,fi))&&(t.classList.contains(Mi(this,fi))?t.classList.remove(Mi(this,fi)):t.classList.add(Mi(this,fi)))}}fi=new WeakMap;class Ei{constructor(t){mi.set(this,void 0),Ci(this,mi,t)}add(t,e){if(e)switch(Mi(this,mi)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){if(e)switch(Mi(this,mi)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){if(e)switch(Mi(this,mi)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}mi=new WeakMap;class Wi{constructor(t){var e,i;wi.set(this,void 0),ki.set(this,void 0),e=this,i=this,[{set value(t){Ci(e,wi,t)}}.value,{set value(t){Ci(i,ki,t)}}.value]=It(t)}add(t,e){gt(t,Mi(this,wi),Mi(this,ki))&&t.setAttribute(Mi(this,wi),Mi(this,ki))}remove(t,e){gt(t,Mi(this,wi),Mi(this,ki))&&t.hasAttribute(Mi(this,wi))&&t.removeAttribute(Mi(this,wi))}toggle(t,e){gt(t,Mi(this,wi),Mi(this,ki))&&(t.hasAttribute(Mi(this,wi))?t.removeAttribute(Mi(this,wi)):t.setAttribute(Mi(this,wi),Mi(this,ki)))}}wi=new WeakMap,ki=new WeakMap;class Ti{constructor(t){var e,i;yi.set(this,void 0),bi.set(this,void 0),e=this,i=this,[{set value(t){Ci(e,yi,t)}}.value,{set value(t){Ci(i,bi,t)}}.value]=It(t)}add(t,e){if(!gt(t,Mi(this,yi),Mi(this,bi)))return;let i=t;i.style&&!i.style[Mi(this,yi)]&&(i.style[Mi(this,yi)]=Mi(this,bi))}remove(t,e){if(!gt(t,Mi(this,yi),Mi(this,bi)))return;let i=t;i.style&&i.style[Mi(this,yi)]&&(i.style[Mi(this,yi)]="")}toggle(t,e){if(!gt(t,Mi(this,yi),Mi(this,bi)))return;let i=t;i.style&&(i.style[Mi(this,yi)]?delete i.style[Mi(this,yi)]:i.style[Mi(this,yi)]=Mi(this,bi))}}yi=new WeakMap,bi=new WeakMap;class xi{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class Si{static get(t){if(!at(t))return new xi;switch(t[0]){case".":return new Ai(t.substring(1));case"~":return new Ei(t.substring(1));case"&":return new Wi(t.substring(1));case"^":return new Ti(t.substring(1));default:return new Ai(t)}}}class Li{static get(t){if(!at(t))return[];return t.split(",").map(t=>Si.get(t.trim()))}}var Ii,Pi,Di,Oi,Ni,Bi,_i=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},$i=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ri{constructor(t,e){Ii.set(this,void 0),Pi.set(this,void 0),Di.set(this,void 0),Oi.set(this,void 0),Ni.set(this,void 0),Bi.set(this,void 0),$i(this,Ii,t),$i(this,Pi,!1),$i(this,Di,Nt.get("ElementManager")),$i(this,Ni,e),$i(this,Oi,Date.now()),$i(this,Bi,new vi(e.interactions))}toggleClass(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{let i=e.classList;Hi(this,Ni).interactions.fetch(()=>{i.contains(t)?Hi(this,Ni).interactions.mutate(i.remove,i,t):Hi(this,Ni).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{let i=e.classList;Hi(this,Ni).interactions.fetch(()=>{i.contains(t)||Hi(this,Ni).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{let i=e.classList;Hi(this,Ni).interactions.fetch(()=>{i.contains(t)&&Hi(this,Ni).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return at(t)?Hi(this,Ii).reduce((e,i)=>{let s=i.getAttribute(t);return null!=s&&e.push(s),e},[]):[]}setAttribute(t,e){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(i=>{Hi(this,Ni).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{Hi(this,Ni).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(i=>{Hi(this,Ni).interactions.fetch(()=>{i.hasAttribute(t)?Hi(this,Ni).interactions.mutate(i.removeAttribute,i,t):Hi(this,Ni).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return _i(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return _i(this,void 0,void 0,(function*(){return!(!at(t)||!at(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return _i(this,void 0,void 0,(function*(){return Hi(this,Pi)&&Hi(this,Di).error("Element is locked",e),this.lock(),Hi(this,Ii).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}animate(t,e){return _i(this,void 0,void 0,(function*(){if(!at(t))return!1;const i=null!=e?e:Hi(this,Ni).setup.animationTime;return this.call(e=>{this.change(()=>{e.classList.add(t),e.classList.add(p),setTimeout(()=>{this.change(()=>{e.classList.remove(t),e.classList.remove(p)})},i)})})}))}open(t,e,i){return _i(this,void 0,void 0,(function*(){if(!gt(t,e))return!1;const s=null!=i?i:Hi(this,Ni).setup.animationTime,n=new Ai(e);return this.call(e=>{Hi(this,Bi).performAction(e,n,null!=s?s:0).then(()=>{e.classList.add(t)})})}))}close(t,e,i){return _i(this,void 0,void 0,(function*(){if(!gt(t,e))return!1;const s=null!=i?i:Hi(this,Ni).setup.animationTime,n=new Ai(e);return this.call(e=>{Hi(this,Bi).performAction(e,n,null!=s?s:0).then(()=>{e.classList.remove(t)})})}))}emit(t,...e){at(t)?this.call(i=>{let s=i.$cuid;at(s)&&(Hi(this,Di).debug(`Emitting event ${t} to ${s}`),Hi(this,Ni).bus.emit(t,s,...e))},"emit"):Hi(this,Di).warning("Not enough data to emit event","emit")}on(t,e){let i=[];return gt(t,e)?(this.call(s=>{let n=s;if(at(n)){let s=Hi(this,Ni).bus.on(t,e,n);null!=s&&i.push(s)}},"on"),i):(Hi(this,Di).error("Incorrect arguments","on"),i)}detach(t,e){gt(t,e)||Hi(this,Di).error("Incorrect arguments","detach"),this.call(i=>{let s=i;at(s)&&Hi(this,Ni).bus.detach(t,e,s)},"detach")}read(t,...e){Hi(this,Ni).interactions.fetch(t,this,...e)}change(t,...e){Hi(this,Ni).interactions.mutate(t,this,...e)}elements(){return Hi(this,Ii)}count(){return Hi(this,Ii).length}lock(){$i(this,Pi,!0)}unlock(){$i(this,Pi,!1)}isLocked(){return Hi(this,Pi)}refresh(){return Date.now()-Hi(this,Oi)<36e4}}Ii=new WeakMap,Pi=new WeakMap,Di=new WeakMap,Oi=new WeakMap,Ni=new WeakMap,Bi=new WeakMap;var Fi,qi,Ui,zi,Vi,ji=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Yi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ki=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xi{constructor(t){Fi.set(this,void 0),qi.set(this,void 0),Ui.set(this,void 0),zi.set(this,void 0),Vi.set(this,void 0),Yi(this,Vi,t),Yi(this,qi,Nt.get("CollectionManager")),Yi(this,Fi,[]),Yi(this,Ui,!1),Yi(this,zi,"")}setElements(t){Yi(this,Fi,t)}setToggle(t){Yi(this,zi,t)}addAnimationClass(t,e,i,s){e.classList.add(p),t.classList.add(s),e.classList.add(i)}setFinalClasses(t,e,i,s){e.classList.remove(p),t.classList.remove(s),e.classList.remove(i),t.classList.remove(Ki(this,zi)),e.classList.add(Ki(this,zi))}verifyIndex(t,e,i){return t>=0&&t!==e&&t<i}setCurrent(t,e){return ji(this,void 0,void 0,(function*(){return this.lock(),Ki(this,qi).debug(`Switching index from: ${e} to ${t}`),e>-1&&Ki(this,Fi)[e].classList.remove(Ki(this,zi)),Ki(this,Fi)[t].classList.add(Ki(this,zi)),this.unlock(),!0}))}setCurrentWithAnimation(t,e,i,s,n){return ji(this,void 0,void 0,(function*(){this.lock(),Ki(this,qi).debug(`Switching index from: ${n} to ${t}`);const r=Ki(this,Fi)[n],o=Ki(this,Fi)[t];return Ki(this,Vi).mutate(this.addAnimationClass,this,r,o,e,i),setTimeout(()=>{Ki(this,Vi).mutate(this.setFinalClasses,this,r,o,e,i),this.unlock()},s),!0}))}getCurrentIndex(){if(!at(Ki(this,zi)))return-1;let t=this.count();for(let e=0;e<t;e++)if(Ki(this,Fi)[e].classList.contains(Ki(this,zi)))return e;return-1}elements(){return Ki(this,Fi)}check(){return Ki(this,Ui)?(Ki(this,qi).warning("Object locked. Operation in progress","Check"),!1):at(Ki(this,zi))?!(this.count()<=0)||(Ki(this,qi).warning("Elements list is empty","Check"),!1):(Ki(this,qi).warning("Toggle is not set. Call setToggleClass","Check"),!1)}count(){return Ki(this,Fi)?Ki(this,Fi).length:-1}lock(){Yi(this,Ui,!0)}unlock(){Yi(this,Ui,!1)}}Fi=new WeakMap,qi=new WeakMap,Ui=new WeakMap,zi=new WeakMap,Vi=new WeakMap;var Gi,Zi,Ji,Qi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ts=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},es=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class is{constructor(t,e){Gi.set(this,void 0),Zi.set(this,void 0),Ji.set(this,void 0),ts(this,Gi,Nt.get("CollectionManager")),ts(this,Ji,new Xi(e)),es(this,Ji).setElements(t),ts(this,Zi,Date.now())}setToggle(t){es(this,Ji).setToggle(t)}setElements(t){es(this,Ji).setElements(t)}click(t){es(this,Ji).elements().forEach((e,i)=>{e.addEventListener("click",()=>{this.set(i).then(()=>{t&&t(e,i)})})})}next(){return Qi(this,void 0,void 0,(function*(){if(!es(this,Ji).check())return!1;let t=es(this,Ji).getCurrentIndex()+1;return this.set(t>=this.length()?0:t)}))}previous(){return Qi(this,void 0,void 0,(function*(){if(!es(this,Ji).check())return!1;let t=es(this,Ji).getCurrentIndex()-1;return this.set(t<0?this.length()-1:t)}))}set(t){return Qi(this,void 0,void 0,(function*(){let e=es(this,Ji).getCurrentIndex();return!(!es(this,Ji).check()||!es(this,Ji).verifyIndex(t,e,this.length()))&&es(this,Ji).setCurrent(t,e)}))}setWithAnimation(t,e,i,s){return Qi(this,void 0,void 0,(function*(){let n=es(this,Ji).getCurrentIndex();return!(!es(this,Ji).check()||!es(this,Ji).verifyIndex(t,n,this.length()))&&es(this,Ji).setCurrentWithAnimation(t,e,i,s,n)}))}getCurrentIndex(){return es(this,Ji).getCurrentIndex()}length(){return es(this,Ji).count()}refresh(){return this.length()>0&&Date.now()-es(this,Zi)>36e4}}Gi=new WeakMap,Zi=new WeakMap,Ji=new WeakMap;var ss,ns,rs,os=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},hs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},as=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ls{constructor(t){ss.set(this,void 0),ns.set(this,void 0),rs.set(this,void 0),hs(this,ss,null!=t?t:[]),hs(this,rs,Nt.get("CuiPluginManager")),hs(this,ns,[])}init(t){as(this,rs).debug("Plugins initialization started: "+as(this,ss).length),hs(this,ns,as(this,ss).filter(t=>at(t.mutation))),as(this,ss).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),as(this,rs).debug("Plugins have been initialized")}get(t){if(at(t))return as(this,ss).find(e=>e.name===t)}has(t){return at(this.get(t))}onMutation(t){return os(this,void 0,void 0,(function*(){let e=[];return as(this,ns).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}ss=new WeakMap,ns=new WeakMap,rs=new WeakMap;var cs,us,ds,ps,gs,vs,fs,ms=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ws=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ks=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ys{constructor(t,e,i){cs.set(this,void 0),us.set(this,void 0),ds.set(this,void 0),ps.set(this,void 0),gs.set(this,void 0),vs.set(this,void 0),fs.set(this,void 0),E.prefix=t.prefix,E.logLevel=t.logLevel,ws(this,cs,Nt.get("CuiInstance")),ws(this,ps,new ls(e)),ws(this,gs,null!=i?i:[]),ws(this,ds,new ci(t,e.map(t=>t.name))),ws(this,vs,t.root),ws(this,us,void 0),ws(this,fs,[])}init(){return ms(this,void 0,void 0,(function*(){if(ks(this,cs).debug("Instance started","init"),!at(window.MutationObserver))throw new o("Mutation observer does not exists");ws(this,fs,ks(this,gs).map(t=>t.attribute));const t=at(ks(this,fs))?ks(this,vs).querySelectorAll(pt(ks(this,fs))):null;if(at(t)){ks(this,cs).debug(`Initiating ${t.length} elements`);let e=[];for(let i of t)try{let t=_t(i,ks(this,gs));e.push($t(i,t,ks(this,ds)))}catch(t){ks(this,cs).exception(t)}yield Promise.all(e)}return ks(this,cs).debug("Init plugins","init"),ks(this,ps).init(ks(this,ds)),gt(ks(this,gs),ks(this,fs))&&(ks(this,cs).debug("Init mutation observer","init"),ws(this,us,new se(ks(this,vs),ks(this,ds))),ks(this,us).setComponents(ks(this,gs)).setAttributes(ks(this,fs)),ks(this,us).setPlugins(ks(this,ps)),ks(this,us).start()),ks(this,cs).debug("Setting CSS globals","init"),ks(this,ds).interactions.mutate(()=>{ks(this,ds).setProperty(A.animationTimeLong,ks(this,ds).setup.animationTimeLong+"ms"),ks(this,ds).setProperty(A.animationTime,ks(this,ds).setup.animationTime+"ms"),ks(this,ds).setProperty(A.animationTimeShort,ks(this,ds).setup.animationTimeShort+"ms")},null),ks(this,ds).bus.emit(W,null),this}))}finish(){ks(this,us)&&ks(this,us).stop(),ks(this,ds).bus.emit(T,null)}get(t){const e=this.all(t);if(!e)return;return new Ri(e,ks(this,ds))}collection(t){const e=this.all(t);if(!at(e))return;return new is(e,ks(this,ds).interactions)}select(t){return document.querySelector(t)}all(t){const e=document.querySelectorAll(t);if(at(e))return[...e]}getUtils(){return ks(this,ds)}on(t,e,i){gt(t,e)||ks(this,cs).error("Incorrect arguments","on"),ks(this,ds).bus.on(t,e,i)}detach(t,e){gt(t,e)||ks(this,cs).error("Incorrect arguments","detach"),ks(this,ds).bus.detach(t,e)}detachAll(t){at(t)||ks(this,cs).error("Incorrect arguments","detachAll"),ks(this,ds).bus.detachAll(t)}emit(t,e,...i){if(!gt(t,e))return void ks(this,cs).warning("Not enough data to emit event","emit");let s=null;if("string"==typeof e&&e.startsWith("~"))s=e.substring(1);else{s=("string"==typeof e?document.querySelector(e):e).$cuid}at(s)?ks(this,ds).bus.emit(t,s,...i):ks(this,cs).warning("Element is not a cUI element","emit")}getPlugin(t){return ks(this,ps).get(t)}createCuiElement(t,e,i){return ms(this,void 0,void 0,(function*(){if(!at(e)||!ks(this,fs).includes(e))return ks(this,cs).error("Element cannot be created: Unknown attribute"),!1;let s=ks(this,gs).find(t=>t.attribute===e);return!!s&&(!!function(t,e,i){if(!gt(e,i,t))return!1;if(t.hasAttribute(e))return!1;let s=[];return St(i,(t,e)=>{s.push(`${t}: ${e}`)}),t.setAttribute(e,s.join("; ")),!0}(t,e,i)&&$t(t,[s],ks(this,ds)))}))}}cs=new WeakMap,us=new WeakMap,ds=new WeakMap,ps=new WeakMap,gs=new WeakMap,vs=new WeakMap,fs=new WeakMap;const bs={slide:{current:{left:{transform:{translateX:{from:0,to:-100,unit:"%"}}},right:{transform:{translateX:{from:0,to:100,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}},fade:{current:{left:{opacity:{from:1,to:0}},right:{opacity:{from:1,to:0}}},previous:{left:{opacity:{from:0,to:1}},right:{opacity:{from:0,to:1}}}},push:{current:{left:{transform:{translateX:{from:0,to:-10,unit:"%"}}},right:{transform:{translateX:{from:0,to:10,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}}};var Cs,Ms=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},As=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Es=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ws{constructor(){Cs.set(this,void 0),As(this,Cs,window)}init(t){var e,i;return Ms(this,void 0,void 0,(function*(){let s=Object.assign(Object.assign({},new Dt),t.setup);const n=s.app,r={result:!1};if(at(Es(this,Cs)[n]))return r.message="Instance is already initialized",r;if(at(t.icons))for(let e in t.icons)f[e]=t.icons[e];if(at(t.swipeAnimations))for(let e in t.swipeAnimations)bs[e]=t.swipeAnimations[e];try{Es(this,Cs)[n]=new ys(s,null!==(e=t.plugins)&&void 0!==e?e:[],null!==(i=t.components)&&void 0!==i?i:[]),yield Es(this,Cs)[n].init()}catch(t){return console.error(t),r.message="An error occured during initialization",r}return r.result=!0,r}))}}Cs=new WeakMap;class Ts{static setLabel(t,e){t.hasAttribute("aria-label")||t.setAttribute("aria-label",e)}static setAria(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}static removeAria(t,e){t.hasAttribute(e)&&t.removeAttribute(e)}}var xs,Ss,Ls,Is,Ps,Ds,Os,Ns,Bs,_s=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},$s=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Rs{constructor(t){xs.set(this,void 0),$s(this,xs,t)}hasClass(t,e){return!(!t||!e.classList.contains(t))}setClass(t,e){this.setClasses([t],e)}setClasses(t,e){e&&e.classList.add(...t)}setClassesAs(t,...e){Hs(this,xs).mutate(this.setClasses,this,e,t)}removeClass(t,e){this.removeClasses([t],e)}removeClasses(t,e){e&&e.classList.remove(...t)}removeClassesAs(t,...e){Hs(this,xs).mutate(this.removeClasses,this,e,t)}removeAttribute(t,e){e&&e.hasAttribute(t)&&e.removeAttribute(t)}setStyle(t,e,i){t&&t.style&&at(i)&&(t.style[e]=i)}}xs=new WeakMap;Ss=new WeakMap;class Fs extends class{constructor(t,e,i){var s;Ss.set(this,void 0),this._log=Nt.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid,this.isLocked=!1,this._log.setId(this.cuid),this.activeClassName=(null!=(s=i.setup.prefix)?s:"")+"-active",this.helper=new Rs(i.interactions),$s(this,Ss,[]),this.componentName=t}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,...e){Hs(this,Ss).includes(t)||Hs(this,Ss).push(t),this.utils.bus.emit(t,this.cuid,...e)}onEvent(t,e){return this.utils.bus.on(t,e,this.element)}detachEvent(t,e){null!=e&&(this.utils.bus.detach(t,e),e="")}getId(){return this.cuid}checkLockAndWarn(t){return!!this.isLocked&&(this._log.warning("Component is locked",t),!0)}isActive(){return this.element.classList.contains(this.activeClassName)}detachEmiitedEvents(){Hs(this,Ss).forEach(t=>{this.utils.bus.detachByCuid(t,this.cuid),this._log.debug("Detaching event: "+t+" on component delete")})}registerInDebug(){this.utils.development.registerElement(this.element,this.cuid,this.componentName)}removeFromDebug(){this.utils.development.unregisterElement(this.cuid,this.componentName)}setDebugProperty(t,e){this.utils.development.setProperty(this.cuid,this.componentName,t,e)}logInfo(t,e){this._log.debug(t,e),this.utils.development.pushState(this.cuid,this.componentName,"info",t,e)}logWarning(t,e){this._log.warning(t,e),this.utils.development.pushState(this.cuid,this.componentName,"warning",t,e)}pushDebugState(t,e,i){this.utils.development.pushState(this.cuid,this.componentName,t,e,i)}logError(t,e,i){this._log.error(t,e),i&&this._log.exception(i,e),this.utils.development.pushState(this.cuid,this.componentName,"error",t,e)}}{constructor(t,e,i,s,n){super(t,e,n),Ls.set(this,void 0),this.args=s,this.actionsHelper=new vi(n.interactions),this.prevArgs=void 0,this.isInitialized=!1,$s(this,Ls,i)}handle(t){this.logInfo("Init","handle"),this.isInitialized?this.logWarning("Trying to initialize component again","handle"):(this.args.parse(t),this.element.classList.contains(Hs(this,Ls))||this.element.classList.add(Hs(this,Ls)),this.registerInDebug(),this.onHandle(),this.isInitialized=!0)}refresh(t){var e;(this.logInfo("Update","refresh"),this.isInitialized)?(this.prevArgs=at(e=this.args)?Object.assign({},e):null,this.args.parse(t),this.pushDebugState("info","Component update","refresh"),this.onRefresh()):this.logError("Cannot update not initialized component","refresh")}destroy(){this.logInfo("Destroy","destroy"),this.onRemove(),this.detachEmiitedEvents(),this.removeFromDebug(),this.isInitialized=!1}}Ls=new WeakMap;class qs extends Fs{constructor(t,e,i,s,n){super(t,e,i,s,n)}onHandle(){this.onInit()}onRefresh(){this.onUpdate()}onRemove(){this.onDestroy()}performAction(t,e,i,s){return _s(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}}class Us extends Fs{constructor(t,e,i,s,n){super(t,e,i,s,n),Is.set(this,void 0),Ps.set(this,void 0),Ds.set(this,void 0),Os.set(this,void 0),Ns.set(this,void 0),$s(this,Is,null),$s(this,Ps,null),$s(this,Ds,null),$s(this,Ns,[]),$s(this,Os,[])}onHandle(){$s(this,Is,this.onEvent(S,this.openFromEvent.bind(this))),$s(this,Ps,this.onEvent(I,this.closeFromEvent.bind(this))),$s(this,Os,Li.get(this.args.openAct)),$s(this,Ns,Li.get(this.args.closeAct)),this.onInit()}onRefresh(){this.prevArgs&&this.args.openAct===this.prevArgs.openAct||$s(this,Os,Li.get(this.args.openAct)),this.prevArgs&&this.args.closeAct===this.prevArgs.closeAct||$s(this,Ns,Li.get(this.args.closeAct)),this.onUpdate()}onRemove(){this.detachEvent(I,Hs(this,Ps)),this.detachEvent(S,Hs(this,Is)),this.onDestroy()}open(t){return _s(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?(this.logWarning("Component is already opened"),!1):((this.args.escClose||at(this.args.keyClose))&&$s(this,Ds,this.onEvent(R,this.onKeyClose.bind(this))),!!this.onBeforeOpen()&&(this.isLocked=!0,this.performAction(Hs(this,Os),this.args.timeout,this.onActionFinish.bind(this,this.onAfterOpen.bind(this),L,t),()=>{this.helper.setClass(this.activeClassName,this.element),Ts.setAria(this.element,"aria-expanded","true")}))))}))}close(t){return _s(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("close")&&(this.isActive()?(this.detachEvent(R,Hs(this,Ds)),!!this.onBeforeClose()&&(this.isLocked=!0,this.performAction(Hs(this,Ns),this.args.timeout,this.onActionFinish.bind(this,this.onAfterClose.bind(this),P,t),()=>{this.helper.removeClass(this.activeClassName,this.element),Ts.setAria(this.element,"aria-expanded","false")}))):(this.logWarning("Component is already closed"),!1))}))}performAction(t,e,i,s){return _s(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}openFromEvent(t){this.open(t)}closeFromEvent(t){this.close(t)}onActionFinish(t,e,i){t(),this.emitEvent(e,{timestamp:Date.now(),state:i}),this.isLocked=!1}onKeyClose(t){return _s(this,void 0,void 0,(function*(){(this.args.escClose&&"Escape"===t.event.key||at(this.args.keyClose)&&t.event.key===this.args.keyClose)&&(yield this.close("Closed by key"))}))}}Is=new WeakMap,Ps=new WeakMap,Ds=new WeakMap,Os=new WeakMap,Ns=new WeakMap;class zs extends Fs{constructor(t,e,i,s,n){super(t,e,i,s,n),Bs.set(this,void 0),$s(this,Bs,new ne(e)),Hs(this,Bs).onMutation(this.mutation.bind(this))}onHandle(){this.onInit(),Hs(this,Bs).observe()}onRefresh(){Hs(this,Bs).unobserve(),this.onUpdate(),Hs(this,Bs).observe()}onRemove(){Hs(this,Bs).unobserve(),this.onDestroy()}mutation(t){this._log.debug("Element mutation","mutation"),this.onMutation(t.reduce((t,e)=>("childList"!==e.type||(e.addedNodes.length>0&&t.added.push(...e.addedNodes),e.removedNodes.length>0&&t.removed.push(...e.removedNodes)),t),{added:[],removed:[]}))}}Bs=new WeakMap;var Vs,js,Ys,Ks,Xs,Gs,Zs,Js=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Qs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},tn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class en{constructor(t,e){Vs.set(this,void 0),js.set(this,void 0),Ys.set(this,void 0),Qs(this,Vs,Et("> * > .{prefix}-accordion-title",t)),Qs(this,js,Et("> *",t)),this.animation=!1,Qs(this,Ys,null!=e?e:300),this.single=!1,this.selector=":scope "+tn(this,Vs),this.items=":scope "+tn(this,js),this.timeout=tn(this,Ys)}parse(t){if(at(t))return this.single=bt(t.single),this.selector=":scope "+Mt(t.selector,tn(this,Vs)),this.items=":scope "+Mt(t.content,tn(this,js)),this.timeout=mt(t.timeout,tn(this,Ys)),void(this.animation=bt(t.animation))}isValid(){return!0}}Vs=new WeakMap,js=new WeakMap,Ys=new WeakMap;class sn{constructor(t){Ks.set(this,void 0),Qs(this,Ks,null!=t?t:"cui"),this.attribute=tn(this,Ks)+"-accordion"}getStyle(){return null}get(t,e){return new nn(t,e,this.attribute,tn(this,Ks))}}Ks=new WeakMap;class nn extends zs{constructor(t,e,i,s){super("CuiAccordionHandler",t,i,new en(s,e.setup.animationTime),e),Xs.set(this,void 0),Gs.set(this,void 0),Zs.set(this,void 0),Qs(this,Zs,null),Qs(this,Xs,[]),Qs(this,Gs,[]),Qs(this,Zs,null)}onInit(){if(this.args.isValid()){try{this.initTargets(),Qs(this,Zs,this.onEvent(N,this.onSwitch.bind(this)))}catch(t){this._log.exception(t,"handle")}this._log.debug("Initialized","handle")}}onUpdate(){try{this.initTargets()}catch(t){this._log.exception(t,"handle")}}onDestroy(){this.detachEvent(N,tn(this,Zs))}onMutation(t){(t.added.length>0||t.removed.length>0)&&this.initTargets()}switch(t){return Js(this,void 0,void 0,(function*(){if(this._log.debug("Switch to: "+t),t<0||this.isLocked||!this.isInitialized)return!1;if(Qs(this,Xs,this.queryItems()),tn(this,Xs).length<=t)return!1;this.isLocked=!0;const e=tn(this,Xs)[t];return this.helper.hasClass(this.activeClassName,e)?this.helper.removeClassesAs(e,this.activeClassName):(this.args.single&&this.closeAllExcept(t),this.helper.setClassesAs(e,this.activeClassName)),this.emitEvent(B,{index:t,currentTarget:e,timestamp:Date.now()}),this.isLocked=!1,!0}))}onSwitch(t){this.switch(mt(t,-1)).then(()=>{this._log.debug("Switch from event to "+t)})}initTargets(){Qs(this,Xs,this.queryItems());const t=this.element.querySelectorAll(this.args.selector);Qs(this,Gs,[]),t.forEach((t,e)=>{let i={element:t};this.setListener(i,e),tn(this,Gs).push(i)})}closeAllExcept(t){this.mutate(()=>{tn(this,Xs).forEach((e,i)=>{t!==i&&this.helper.hasClass(this.activeClassName,e)&&e.classList.remove(this.activeClassName)})})}setListener(t,e){t.listener=()=>{this.switch(e)},t.element.addEventListener("click",t.listener)}removeListener(t){t.listener&&t.element.removeEventListener("click",t.listener)}queryItems(){return[...this.element.querySelectorAll(this.args.items)]}}Xs=new WeakMap,Gs=new WeakMap,Zs=new WeakMap;var rn,on=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},hn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class an{constructor(){this.length=this.to=this.from=-1,this.rtl=!1}setProperty(t){if(!t||!at(t.from)||!at(t.to))throw new a("[OpacityAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to}perform(t,e,i){if(this.to<0)return;let s=this.length*e;t.style&&(t.style.opacity=this.rtl?Math.max(this.from-s,0):Math.min(this.from+s,1))}}class ln{constructor(t){if(rn.set(this,void 0),!at(t))throw new a("[PropertyAnimator] Valid property is required");this.property=t,this.length=this.to=this.from=-1,this.rtl=!1,on(this,rn,"")}setProperty(t){if(!t||!at(t.from)||!at(t.to))throw new a("[PropertyAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to,on(this,rn,t.unit)}perform(t,e,i){if(!this.property)return;let s=this.length*e;t.style&&(t.style[this.property]=this.createValue(this.rtl?this.from-s:this.from+s,hn(this,rn)))}createValue(t,e){return`${t}${null!=e?e:""}`}}rn=new WeakMap;class cn{constructor(){this.prop=void 0}setProperty(t){if(!t)throw new a("[TransformAnimator] Property has incorrect format");this.prop=t}build(t){let e=[];for(let i in this.prop){let s=this.prop[i],n=Math.abs(s.to-s.from),r=s.from>s.to?s.from-n*t:s.from+n*t;e.push(this.buildSingle(i,r,s.unit))}return e.join(" ")}buildSingle(t,e,i){return`${t}(${e}${i})`}perform(t,e){this.prop&&t.style&&(t.style.transform=this.build(e))}}var un,dn,pn,gn,vn,fn,mn,wn,kn,yn,bn,Cn,Mn,An,En=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap,new WeakMap,new WeakMap;class Tn{get(t){if(at(t))switch(t){case"opacity":return new an;case"transform":return new cn;default:return new ln(t)}}}class xn{constructor(t){un.set(this,void 0),dn.set(this,void 0),pn.set(this,void 0),gn.set(this,void 0),vn.set(this,void 0),fn.set(this,void 0),mn.set(this,void 0),wn.set(this,void 0),kn.set(this,void 0),En(this,dn,[]),En(this,vn,void 0),En(this,gn,void 0),En(this,fn,null!=t&&t),En(this,wn,new Tn),En(this,pn,!1),En(this,un,void 0),En(this,mn,!1),En(this,kn,void 0)}onFinish(t){En(this,un,t)}setAnimators(t){En(this,dn,t)}setProps(t){if(at(t)){En(this,dn,[]);try{for(let e in t){let i=Wn(this,wn).get(e);if(!i)return;i.setProperty(t[e]),Wn(this,dn).push(i)}}catch(t){this.reportError(t)}}}setElement(t){En(this,vn,t)}setOnError(t){En(this,kn,t)}animate(t,e,i){if(Wn(this,pn))return;if(!Wn(this,vn)||0===Wn(this,dn).length)return void this.reportError(new Error("Animation cannot be performed: element or animators are not set"));let s=null!=e?e:0,n=i||!1;En(this,pn,!0),requestAnimationFrame(this.animateAsync.bind(this,t,s,n))}isLocked(){return Wn(this,pn)}animateAsync(t,e,i,s){Wn(this,gn)||En(this,gn,s);let n=s-Wn(this,gn),r=n/t,o=0;o=0===e?r:i?e-r*e:e+r*e,this.callUpdate(i?Math.max(o,0):Math.min(o,1),1),n<t&&!Wn(this,mn)?requestAnimationFrame(this.animateAsync.bind(this,t,e,i)):this.endAnimation(i)}endAnimation(t){Wn(this,fn)&&Wn(this,vn)&&Wn(this,vn).removeAttribute("style"),Wn(this,un)&&Wn(this,un).call(this,Wn(this,vn),t,Wn(this,mn)),En(this,mn,!1),En(this,gn,void 0),En(this,pn,!1)}callUpdate(t,e){try{Wn(this,dn).forEach(i=>i.perform(Wn(this,vn),t,e))}catch(t){this.reportError(t),En(this,mn,!0)}}reportError(t){Wn(this,kn)?Wn(this,kn).call(this,t):(console.error("An error occured in CuiAnimtionEngine"),console.error(t))}}un=new WeakMap,dn=new WeakMap,pn=new WeakMap,gn=new WeakMap,vn=new WeakMap,fn=new WeakMap,mn=new WeakMap,wn=new WeakMap,kn=new WeakMap;class Sn{constructor(t){yn.set(this,void 0),bn.set(this,void 0),Cn.set(this,void 0),Mn.set(this,void 0),An.set(this,void 0),En(this,yn,void 0),En(this,bn,[]),En(this,Cn,new xn(t)),En(this,Mn,new Tn),En(this,An,void 0)}setElement(t){En(this,yn,t)}setOnFinish(t){Wn(this,Cn).onFinish(t)}setOnError(t){En(this,An,t),Wn(this,Cn).setOnError(t)}setProps(t){if(at(t)){En(this,bn,[]);try{for(let e in t){let i=Wn(this,Mn).get(e);if(!i)return;i.setProperty(t[e]),Wn(this,bn).push(i)}}catch(t){this.reportError(t)}}}update(t){Wn(this,yn)&&0!==Wn(this,bn).length&&Wn(this,bn).forEach(e=>e.perform(Wn(this,yn),Math.min(t,1),1))}updateAsync(t){requestAnimationFrame(this.update.bind(this,t))}finish(t,e,i){Wn(this,yn)&&Wn(this,Cn).setElement(Wn(this,yn)),Wn(this,Cn).setAnimators(Wn(this,bn)),Wn(this,Cn).animate(e,t,i)}reportError(t){Wn(this,An)?Wn(this,An).call(this,t):console.log(t)}}yn=new WeakMap,bn=new WeakMap,Cn=new WeakMap,Mn=new WeakMap,An=new WeakMap;var Ln,In,Pn,Dn,On,Nn,Bn,_n,$n,Hn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fn{constructor(t,e){Ln.set(this,void 0),In.set(this,void 0),Hn(this,Ln,null!=e?e:300),Hn(this,In,t),this.escClose=!1,this.keyClose="",this.timeout=Rn(this,Ln),this.swipe=!1,this.openAct="",this.closeAct=""}parse(t){this.swipe=Ct(t.swipe,!1),this.escClose=!1,this.keyClose="",this.timeout=mt(t.timeout,Rn(this,Ln)),this.openAct=Mt(t.openAct,Et(".{prefix}-animation-fade-in",Rn(this,In))),this.closeAct=Mt(t.closeAct,Et(".{prefix}-animation-fade-out",Rn(this,In)))}}Ln=new WeakMap,In=new WeakMap;class qn{constructor(t){Pn.set(this,void 0),Hn(this,Pn,null!=t?t:"cui"),this.attribute=Rn(this,Pn)+"-banner"}getStyle(){return null}get(t,e){return new Un(t,e,this.attribute,Rn(this,Pn))}}Pn=new WeakMap;class Un extends Us{constructor(t,e,i,s){super("CuiBannerHandler",t,i,new Fn(s,e.setup.animationTime),e),Dn.set(this,void 0),On.set(this,void 0),Nn.set(this,void 0),Bn.set(this,void 0),_n.set(this,void 0),$n.set(this,void 0),Hn(this,Dn,new Sn(!0)),Rn(this,Dn).setOnFinish(this.onSwipeFinish.bind(this)),Rn(this,Dn).setElement(this.element),Hn(this,Nn,-1),Hn(this,Bn,0),Hn(this,_n,bs.fade),Hn(this,$n,null),Hn(this,On,!1)}onInit(){this.isActive()||this.open()}onUpdate(){}onDestroy(){this.detachEvent(V,Rn(this,$n))}onBeforeOpen(){return!0}onAfterOpen(){this.args.swipe&&Hn(this,$n,this.onEvent(V,this.onMove.bind(this)))}onAfterClose(){this.detachEvent(V,Rn(this,$n))}onBeforeClose(){return!0}onMove(t){if(this.isLocked)return;let e=this.element;switch(t.type){case"down":if(Rn(this,On)||!e.contains(t.target))return;Hn(this,On,!0),Hn(this,Nn,t.x),this.helper.setClassesAs(document.body,v),t.event.preventDefault();break;case"up":if(!Rn(this,On)&&0==Rn(this,Bn))break;let i=Math.abs(Rn(this,Bn)),s=i*this.args.timeout,n=i<=.4;this.isLocked=!0,Rn(this,Dn).finish(i,s,n),this.helper.removeClassesAs(document.body,v),Hn(this,On,!1);break;case"move":if(Rn(this,On)){let i=(t.x-Rn(this,Nn))/e.offsetWidth;(Rn(this,Bn)>=0&&i<=0||Rn(this,Bn)<=0&&i>0)&&Rn(this,Dn).setProps(i>0?Rn(this,_n).current.right:Rn(this,_n).current.left),Hn(this,Bn,i),this.mutate(()=>{Rn(this,Dn).update(Math.abs(Rn(this,Bn)))}),t.event.preventDefault()}}}onSwipeFinish(t,e,i){this.isLocked=!1,e||(this.helper.removeClass(this.activeClassName,this.element),Ts.setAria(this.element,"aria-expanded","false")),Hn(this,Bn,0),Hn(this,Nn,0)}}Dn=new WeakMap,On=new WeakMap,Nn=new WeakMap,Bn=new WeakMap,_n=new WeakMap,$n=new WeakMap;var zn,Vn,jn,Yn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Kn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xn{constructor(t){zn.set(this,void 0),Vn.set(this,void 0),jn.set(this,void 0),Yn(this,zn,t),Yn(this,Vn,1),Yn(this,jn,new Gn)}setScale(t){return Yn(this,Vn,t),this}build(){let t=function(t){if(!at(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}(Kn(this,zn));return at(t)&&Kn(this,Vn)&&Kn(this,jn).append(t,Kn(this,Vn)),t}}zn=new WeakMap,Vn=new WeakMap,jn=new WeakMap;class Gn{append(t,e){let i=mt(t.getAttribute("width"),20),s=mt(t.getAttribute("height"),20);t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var Zn,Jn,Qn,tr,er,ir=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class nr{constructor(){this.progress=0}parse(t){at(t)?At(t)?this.progress=mt(t,0):this.progress=mt(t.progress,0):this.progress=0}}class rr{constructor(t){this.attribute=(null!=t?t:"cui")+"-circle-progress",f.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new or(t,e,this.attribute)}}class or extends qs{constructor(t,e,i){super("CuiCircleHandler",t,i,new nr,e),Zn.set(this,void 0),Jn.set(this,void 0),Qn.set(this,void 0),tr.set(this,void 0),er.set(this,void 0),ir(this,Zn,ir(this,Jn,0)),ir(this,Qn,null),ir(this,tr,i),ir(this,er,null)}onInit(){const t=new Xn(f.special_circle_progress).build();if(!at(t))return void this.logError("SVG circle was not created","onInit");const e=this.element.querySelector("svg");at(e)&&e.remove(),this.element.appendChild(t),ir(this,Qn,this.element.querySelector(".circle-progress-path")),ir(this,Jn,sr(this,Qn).getTotalLength()),ir(this,Zn,sr(this,Jn)/100),this.fetch(this.readStyle),ir(this,er,this.onEvent(U,this.onSetProgress.bind(this)))}onUpdate(){this.fetch(this.readStyle),this.emitEvent(z,{timestamp:Date.now(),progress:this.args.progress})}onDestroy(){this.detachEvent(U,sr(this,er))}onSetProgress(t){at(t)&&this.element.setAttribute(sr(this,tr),t)}updateStyle(t){sr(this,Qn).style.strokeDashoffset=t}readStyle(){if(this.prevArgs&&this.args.progress===this.prevArgs.progress)return;const t=ut(this.args.progress,0,100);this.mutate(this.updateStyle,sr(this,Jn)-sr(this,Zn)*t)}}Zn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,tr=new WeakMap,er=new WeakMap;var hr,ar,lr,cr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ur=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pr{constructor(t){hr.set(this,void 0),this.target="",this.action="",this.prevent=!1,this.state="",ur(this,hr,null!=t?t:300),this.timeout=dr(this,hr)}parse(t){if(at(t)&&At(t))return this.target=t,this.action="",this.timeout=dr(this,hr),this.prevent=!1,void(this.state="");this.target=Mt(t.target,""),this.action=t.action,this.timeout=mt(t.timeout,dr(this,hr)),this.prevent=t.prevent&&bt(t.prevent),this.state=t.state}}hr=new WeakMap;class gr{constructor(t){ar.set(this,void 0),ur(this,ar,null!=t?t:"cui"),this.attribute=dr(this,ar)+"-close"}getStyle(){return null}get(t,e){return new vr(t,e,this.attribute,dr(this,ar))}}ar=new WeakMap;class vr extends qs{constructor(t,e,i,s){super("CuiCloseHandler",t,i,new pr(e.setup.animationTime),e),lr.set(this,void 0),ur(this,lr,null),this.onClick=this.onClick.bind(this)}onInit(){this.element.addEventListener("click",this.onClick),ur(this,lr,this.onEvent(I,this.onClose.bind(this)))}onUpdate(){}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(I,dr(this,lr))}onClick(t){this.onClose(t),this.args.prevent&&t.preventDefault()}onClose(t){if(this.isLocked)return;const e=this.getTarget();at(e)?(this.isLocked=!0,this.run(e).then(e=>{this.onActionFinish(t,e)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return cr(this,void 0,void 0,(function*(){let e=t.$cuid;if(at(e))return yield this.utils.bus.emit(I,e,this.args.state),!1;if(gt(this.args.action,this.args.timeout)){let e=Li.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.removeActiveClass(t)})}return this.removeActiveClassAsync(t),!0}))}removeActiveClass(t){at(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClass(this.activeClassName,t)}removeActiveClassAsync(t){this.fetch(()=>{at(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClassesAs(t,this.activeClassName)})}onActionFinish(t,e){e&&this.emitClose(t)}getTarget(){var t;return at(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:Tt(this.element)}emitClose(t){this.emitEvent(P,{timestamp:Date.now(),state:this.args.state,event:t})}}lr=new WeakMap;var fr,mr,wr,kr,yr,br=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Cr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Mr{constructor(t,e){fr.set(this,void 0),mr.set(this,void 0),br(this,fr,null!=e?e:300),br(this,mr,t),this.escClose=!1,this.timeout=Cr(this,fr),this.openAct="",this.closeAct="",this.keyClose=""}parse(t){this.escClose=bt(t.escClose),this.keyClose=t.keyClose,this.timeout=mt(t.timeout,Cr(this,fr)),this.openAct=Mt(t.openAct,Et(".{prefix}-dialog-default-in",Cr(this,mr))),this.closeAct=Mt(t.closeAct,Et(".{prefix}-dialog-default-out",Cr(this,mr)))}}fr=new WeakMap,mr=new WeakMap;class Ar{constructor(t){wr.set(this,void 0),br(this,wr,null!=t?t:"cui"),this.attribute=Cr(this,wr)+"-cover"}getStyle(){return null}get(t,e){return new Er(t,e,this.attribute,Cr(this,wr))}}wr=new WeakMap;class Er extends Us{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new Mr(s,e.setup.animationTimeLong),e),kr.set(this,void 0),yr.set(this,void 0),br(this,kr,Et("{prefix}-cover-open",s)),br(this,yr,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){Ts.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(br(this,yr,window.pageYOffset),!0)}onAfterOpen(){this.helper.setClass(Cr(this,kr),document.body),document.body.style.top=`-${Cr(this,yr)}px`,Ts.setAria(this.element,"aria-hidden","false")}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(Cr(this,yr)||0)),br(this,yr,0),this.helper.removeClass(Cr(this,kr),document.body),Ts.setAria(this.element,"aria-hidden","true")}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(Cr(this,kr),document.body)}}kr=new WeakMap,yr=new WeakMap;var Wr,Tr,xr,Sr,Lr,Ir,Pr,Dr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Or=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Nr{constructor(t,e){Wr.set(this,void 0),Tr.set(this,void 0),Dr(this,Wr,null!=e?e:300),Dr(this,Tr,t),this.escClose=!1,this.outClose=!1,this.timeout=Or(this,Wr),this.openAct="",this.closeAct="",this.keyClose=""}parse(t){this.escClose=bt(t.escClose),this.outClose=bt(t.outClose),this.keyClose=t.keyClose,this.timeout=mt(t.timeout,Or(this,Wr)),this.openAct=Mt(t.openAct,Et(".{prefix}-dialog-default-in",Or(this,Tr))),this.closeAct=Mt(t.closeAct,Et(".{prefix}-dialog-default-out",Or(this,Tr)))}}Wr=new WeakMap,Tr=new WeakMap;class Br{constructor(t){xr.set(this,void 0),Dr(this,xr,null!=t?t:"cui"),this.attribute=Or(this,xr)+"-dialog"}getStyle(){return null}get(t,e){return new _r(t,e,this.attribute,Or(this,xr))}}xr=new WeakMap;class _r extends Us{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new Nr(s,e.setup.animationTimeLong),e),Sr.set(this,void 0),Lr.set(this,void 0),Ir.set(this,void 0),Pr.set(this,void 0),Dr(this,Lr,Et("{prefix}-dialog-open",s)),Dr(this,Sr,s),Dr(this,Ir,0),Dr(this,Pr,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){Ts.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Dr(this,Ir,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&Dr(this,Pr,this.onEvent(F,this.onWindowClick.bind(this))),this.helper.setClass(Or(this,Lr),document.body),document.body.style.top=`-${Or(this,Ir)}px`}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(Or(this,Ir)||0)),Dr(this,Ir,0),this.helper.removeClass(Or(this,Lr),document.body),this.detachEvent(F,Or(this,Pr))}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(Or(this,Lr),document.body)}onWindowClick(t){let e=this.element.querySelector(Et(".{prefix}-dialog-container",Or(this,Sr)));e&&!e.contains(t.target)&&this.close("out").then(()=>{this._log.debug("Closed by click outside")})}}Sr=new WeakMap,Lr=new WeakMap,Ir=new WeakMap,Pr=new WeakMap;var $r,Hr,Rr,Fr,qr,Ur,zr,Vr,jr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Yr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kr{constructor(t){$r.set(this,void 0),Hr.set(this,void 0),Rr.set(this,void 0),Fr.set(this,void 0),qr.set(this,void 0),Ur.set(this,void 0),zr.set(this,void 0),Vr.set(this,void 0),jr(this,$r,t),jr(this,Rr,!1),jr(this,Fr,!1),jr(this,qr,!1),jr(this,Hr,void 0),jr(this,zr,this.onMouseMove.bind(this)),jr(this,Vr,this.onMouseOut.bind(this)),jr(this,Ur,this.onMouseOver.bind(this))}setCallback(t){jr(this,Hr,t)}isInProgress(){return Yr(this,Rr)}attach(){Yr(this,$r).addEventListener("mouseover",Yr(this,Ur)),Yr(this,$r).addEventListener("mousemove",Yr(this,zr)),Yr(this,$r).addEventListener("mouseout",Yr(this,Vr)),jr(this,qr,!0)}detach(){Yr(this,$r).removeEventListener("mouseover",Yr(this,Ur)),Yr(this,$r).removeEventListener("mousemove",Yr(this,zr)),Yr(this,$r).removeEventListener("mouseout",Yr(this,Vr)),jr(this,qr,!1)}emit(t,e){gt(Yr(this,Hr))&&(!e&&Yr(this,Rr)||(jr(this,Rr,!0),window.requestAnimationFrame(this.invoke.bind(this,{isHovering:Yr(this,Fr),event:t,timestamp:Date.now()}))))}isAttached(){return Yr(this,qr)}invoke(t){Yr(this,Hr)&&Yr(this,Hr).call(this,t),jr(this,Rr,!1)}onMouseOver(t){jr(this,Fr,!0),this.emit(t,!0)}onMouseOut(t){jr(this,Fr,!1),this.emit(t,!0)}onMouseMove(t){this.emit(t,!1)}}$r=new WeakMap,Hr=new WeakMap,Rr=new WeakMap,Fr=new WeakMap,qr=new WeakMap,Ur=new WeakMap,zr=new WeakMap,Vr=new WeakMap;var Xr,Gr,Zr,Jr,Qr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},to=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class eo{constructor(){Xr.set(this,void 0),Gr.set(this,void 0),Zr.set(this,void 0),Jr.set(this,void 0),Qr(this,Zr,-1),Qr(this,Gr,-1),Qr(this,Xr,void 0),Qr(this,Jr,0)}setElementBox(t){Qr(this,Xr,t)}setTarget(t){Qr(this,Gr,t.width),Qr(this,Zr,t.height)}setMargin(t){Qr(this,Jr,t)}getVerticalPosition(t){switch(t){case"top":return this.getTopPosition();case"bottom":return this.getBottomPosition();case"middle":return this.getMiddlePosition();default:return-1}}getHorizontalPosition(t){switch(t){case"left":return this.getLeftPosition();case"right":return this.getRightPosition();case"center":return this.getCenterPosition();default:return-1}}getAutoVerticalPosition(t){let e=window.innerHeight,i=this.getVerticalPosition(t);return("top"===t||"middle"===t)&&i<0?[this.getVerticalPosition("bottom"),"bottom"]:("bottom"===t||"middle"===t)&&i+to(this,Zr)>e?[this.getVerticalPosition("top"),"top"]:[i,t]}getAutoHorizontalPosition(t){let e=window.innerWidth,i=this.getHorizontalPosition(t);return("right"===t||"center"===t)&&i<0?[this.getHorizontalPosition("left"),"left"]:("left"===t||"center"===t)&&i+to(this,Gr)>e?[this.getHorizontalPosition("right"),"right"]:[i,t]}getTopPosition(){return this.throwIfNotValid("getTopPosition"),to(this,Xr).top-to(this,Jr)-to(this,Zr)}getBottomPosition(){return this.throwIfNotValid("getBottomPosition"),to(this,Xr).top+to(this,Xr).height+to(this,Jr)}getMiddlePosition(){return this.throwIfNotValid("getMiddlePosition"),to(this,Xr).top+to(this,Xr).height/2-to(this,Zr)/2}getLeftPosition(){return this.throwIfNotValid("getLeftPosition"),to(this,Xr).left}getRightPosition(){return this.throwIfNotValid("getRightPosition"),to(this,Xr).left+to(this,Xr).width-to(this,Gr)}getCenterPosition(){return this.throwIfNotValid("getCenterPosition"),to(this,Xr).left+to(this,Xr).width/2-to(this,Gr)/2}validate(){return at(to(this,Xr))&&to(this,Zr)>0&&to(this,Gr)>0}throwIfNotValid(t){if(!this.validate())throw new u(`[${t}] Position cannot be calculated: missing data [width: ${to(this,Gr)}][height: ${to(this,Zr)}]`)}}Xr=new WeakMap,Gr=new WeakMap,Zr=new WeakMap,Jr=new WeakMap;var io,so,no,ro,oo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ho=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ao{constructor(t){io.set(this,void 0),so.set(this,void 0),no.set(this,void 0),ro.set(this,void 0),oo(this,so,"top-center"),oo(this,io,""),oo(this,no,null!=t?t:new eo),oo(this,ro,Nt.get("CuiBasePositionCalculator"))}setMargin(t){ho(this,no).setMargin(t)}setPreferred(t){oo(this,so,t)}setStatic(t){oo(this,io,t)}calculate(t,e){if(ho(this,no).setElementBox(t),ho(this,no).setTarget(e),at(ho(this,io))){ho(this,ro).debug("Evaluating static position");const[t,e]=this.parse(ho(this,io));return[ho(this,no).getHorizontalPosition(e),ho(this,no).getVerticalPosition(t),ho(this,io)]}let[i,s]=["",""];at(ho(this,so))&&(ho(this,ro).debug("Evaluating auto position"),[i,s]=this.parse(ho(this,so))),i=null!=i?i:"top",s=null!=s?s:"center",ho(this,ro).debug("Calculating position: "+i+"-"+s);const[n,r]=ho(this,no).getAutoVerticalPosition(i),[o,h]=ho(this,no).getAutoHorizontalPosition(s);return ho(this,ro).debug("Calculated position: "+r+"-"+h),[o,n,r+"-"+h]}parse(t){return t.split("-")}}io=new WeakMap,so=new WeakMap,no=new WeakMap,ro=new WeakMap;var lo,co,uo,po,go=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},vo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class fo{constructor(t,e,i){lo.set(this,void 0),co.set(this,void 0),uo.set(this,void 0),po.set(this,void 0),go(this,co,e),go(this,uo,t),go(this,po,i)}start(){this.canRun()&&(this.stop(),go(this,lo,setTimeout(()=>{vo(this,po).call(this),go(this,lo,null),vo(this,co)&&this.start()},vo(this,uo))))}stop(){vo(this,lo)&&(clearTimeout(vo(this,lo)),go(this,lo,null))}getId(){return vo(this,lo)}canRun(){return at(vo(this,po))&&vo(this,uo)>0}setCallback(t){go(this,po,t)}setTimeout(t){go(this,uo,t)}}lo=new WeakMap,co=new WeakMap,uo=new WeakMap,po=new WeakMap;var mo,wo,ko,yo,bo,Co,Mo,Ao,Eo,Wo,To,xo,So,Lo,Io,Po=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Do=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Oo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class No{constructor(t){mo.set(this,void 0),Do(this,mo,Et("{prefix}-drop-animation-in",t)),this.mode="click",this.trigger="> a, button",this.autoClose=!1,this.outClose=!1,this.prevent=!1,this.pos="",this.action=Oo(this,mo),this.timeout=3e3,this.margin=8}parse(t){this.mode=Mt(t.mode,"click").toLowerCase(),this.trigger=":scope "+Mt(t.trigger,"> a, button"),this.prevent=bt(t.prevent),this.autoClose=bt(t.autoClose),this.outClose=!t.outClose||bt(t.outClose),this.pos=Mt(t.pos,""),this.action=Mt(t.action,Oo(this,mo)),this.timeout=mt(t.timeout,3e3),this.margin=mt(t.margin,8)}}mo=new WeakMap;class Bo{constructor(t){wo.set(this,void 0),Do(this,wo,null!=t?t:"cui"),this.attribute=Oo(this,wo)+"-drop"}getStyle(){return null}get(t,e){return new _o(t,e,this.attribute,Oo(this,wo))}}wo=new WeakMap;class _o extends qs{constructor(t,e,i,s){super("CuidropHandler",t,i,new No(s),e),ko.set(this,void 0),yo.set(this,void 0),bo.set(this,void 0),Co.set(this,void 0),Mo.set(this,void 0),Ao.set(this,void 0),Eo.set(this,void 0),Wo.set(this,void 0),To.set(this,void 0),xo.set(this,void 0),So.set(this,void 0),Lo.set(this,void 0),Io.set(this,void 0),Do(this,bo,i),Do(this,ko,s),Do(this,yo,Et("{prefix}-drop-open",s)),Do(this,Mo,new Kr(this.element)),Oo(this,Mo).setCallback(this.onElementHover.bind(this)),Do(this,Eo,null),Do(this,Wo,null),Do(this,To,null),this.onTriggerClick=this.onTriggerClick.bind(this),Do(this,xo,new ao),Oo(this,xo).setMargin(8),Oo(this,xo).setPreferred("bottom-left"),Do(this,So,""),Do(this,Co,void 0),Do(this,Ao,this.element),Do(this,Io,[]),Do(this,Lo,new fo(this.args.timeout,!1,this.close.bind(this))),e.isPlugin("click-plugin")||this.logWarning("Window click plugin is not available: outClose will not work")}onInit(){Do(this,Ao,this.acquireTrigger()),Do(this,Co,new Kr(Oo(this,Ao))),this.setTriggerEvent(),Do(this,Wo,this.onEvent(S,this.open.bind(this))),Do(this,To,this.onEvent(I,this.close.bind(this))),Oo(this,xo).setStatic(this.args.pos),Oo(this,xo).setMargin(this.args.margin),Do(this,Lo,new fo(this.args.timeout,!1,this.close.bind(this))),Do(this,Io,Li.get(this.args.action)),this.mutate(()=>{Ts.setAria(this.element,"aria-dropdown","")}),this._log.debug("Initialized","handle")}onUpdate(){Oo(this,Co)&&Oo(this,Co).isAttached()?Oo(this,Co).detach():this.prevArgs&&"click"===this.prevArgs.mode&&Oo(this,Ao).removeEventListener("click",this.onTriggerClick),Do(this,Ao,this.acquireTrigger()),Do(this,Co,new Kr(Oo(this,Ao))),this.setTriggerEvent(),Oo(this,xo).setStatic(this.args.pos),Oo(this,xo).setMargin(this.args.margin),Do(this,Io,Li.get(this.args.action)),Oo(this,Lo).setTimeout(this.args.timeout)}onDestroy(){this.detachEvent(S,Oo(this,Wo)),this.detachEvent(I,Oo(this,To))}open(){return Po(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?this.close():(this.isAnyActive()&&(yield this.findAndCloseOpenedDrop()),this.isLocked=!0,this._log.debug("Drop "+this.cuid,"open"),this.onOpen(),this.isLocked=!1,!0))}))}close(){return Po(this,void 0,void 0,(function*(){return!(this.checkLockAndWarn("close")||!this.isActive())&&(this.isLocked=!0,this.logInfo("Drop "+this.cuid,"close"),this.onClose(),this.detachEvent(F,Oo(this,Eo)),this.emitEvent(P,{timestamp:Date.now()}),Oo(this,Mo).detach(),this.isLocked=!1,!0)}))}onClose(){this.mutate(()=>{this.helper.removeClass(this.activeClassName,this.element),this.helper.removeClass(Oo(this,yo),document.body),this.toggleActions(),this.helper.removeClass(Oo(this,So),this.element),Ts.setAria(this.element,"aria-expanded","false")})}onOpen(){this.helper.setClass(this.activeClassName,this.element),this.mutate(()=>{const t=Oo(this,Ao).getBoundingClientRect();try{const[e,i,s]=Oo(this,xo).calculate(t,this.element.getBoundingClientRect());this.element.style.top=i-t.top+"px",this.element.style.left=e-t.left+"px",Do(this,So,Et("{prefix}-drop-position-"+s,Oo(this,ko))),this.toggleActions(),this.helper.setClass(Oo(this,So),this.element),this.helper.setClass(Oo(this,yo),document.body),this.emitEvent(L,{timestamp:Date.now()}),Oo(this,Mo).attach(),this.runAutoCloseTask(),this.args.outClose&&Do(this,Eo,this.onEvent(F,this.onWindowClick.bind(this))),Ts.setAria(this.element,"aria-expanded","true")}catch(t){this._log.exception(t)}})}onWindowClick(t){this.element.contains(t.target)||this.close()}isAnyActive(){return this.helper.hasClass(Oo(this,yo),document.body)}findAndCloseOpenedDrop(){return Po(this,void 0,void 0,(function*(){const t=document.querySelector(`[${Oo(this,bo)}].${this.activeClassName}`);if(!at(t))return this._log.warning("Opened drop was not found"),!1;const e=t.$handlers[Oo(this,bo)];return at(e)?e.close():(this._log.warning("Drop handler was not found in the element"),!1)}))}onTriggerClick(t){this.isActive()?this.close():this.open(),this.args.prevent&&t.preventDefault()}onHoverEvent(t){t.isHovering&&!this.isActive()&&this.open(),this.args.prevent&&t.event.preventDefault()}onElementHover(t){t.isHovering?Oo(this,Lo).stop():!t.isHovering&&this.args.autoClose&&this.runAutoCloseTask()}setTriggerEvent(){"hover"===this.args.mode&&Oo(this,Co)?(Oo(this,Co).setCallback(this.onHoverEvent.bind(this)),Oo(this,Co).attach()):Oo(this,Ao).addEventListener("click",this.onTriggerClick)}runAutoCloseTask(){this.args.autoClose&&Oo(this,Lo).start()}toggleActions(){Oo(this,Io).forEach(t=>{t.toggle(this.element)})}acquireTrigger(){let t=null;return t=this.element.parentElement?this.element.parentElement.querySelector(this.args.trigger):document.querySelector(this.args.trigger),null!=t?t:this.element}}ko=new WeakMap,yo=new WeakMap,bo=new WeakMap,Co=new WeakMap,Mo=new WeakMap,Ao=new WeakMap,Eo=new WeakMap,Wo=new WeakMap,To=new WeakMap,xo=new WeakMap,So=new WeakMap,Lo=new WeakMap,Io=new WeakMap;var $o,Ho,Ro,Fo,qo,Uo,zo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Vo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class jo{constructor(t){$o.set(this,void 0),Ho.set(this,void 0),Ro.set(this,void 0),Fo.set(this,void 0),qo.set(this,void 0),Uo.set(this,void 0),zo(this,Ro,!1),zo(this,$o,null!=t?t:document.body),zo(this,Fo,!1),zo(this,qo,!1),zo(this,Ho,void 0),zo(this,Uo,void 0),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this)}setCallback(t){zo(this,Ho,t)}setTarget(t){zo(this,Uo,t)}isInProgress(){return Vo(this,Ro)}preventDefault(t){zo(this,qo,t)}attach(){Vo(this,Fo)||(Vo(this,$o).addEventListener("mousedown",this.onMouseDown,{passive:!1}),Vo(this,$o).addEventListener("mouseup",this.onMouseUp,{passive:!1}),Vo(this,$o).addEventListener("mousemove",this.onMouseMove,{passive:!1}),Vo(this,$o).addEventListener("touchstart",this.onTouchStart,{passive:!1}),Vo(this,$o).addEventListener("touchend",this.onTouchEnd,{passive:!1}),Vo(this,$o).addEventListener("touchmove",this.onTouchMove,{passive:!1}),zo(this,Fo,!0))}detach(){Vo(this,Fo)&&(Vo(this,$o).removeEventListener("mousedown",this.onMouseDown,{passive:!1}),Vo(this,$o).removeEventListener("mouseup",this.onMouseUp,{passive:!1}),Vo(this,$o).removeEventListener("mousemove",this.onMouseMove,{passive:!1}),Vo(this,$o).removeEventListener("touchstart",this.onTouchStart,{passive:!1}),Vo(this,$o).removeEventListener("touchend",this.onTouchEnd,{passive:!1}),Vo(this,$o).removeEventListener("touchmove",this.onTouchMove,{passive:!1}),zo(this,Fo,!1))}isAttached(){return Vo(this,Fo)}onMouseDown(t){Vo(this,Ro)||Vo(this,Uo)&&!Vo(this,Uo).contains(t.target)||(zo(this,Ro,!0),this.publishMouseEvent("down",t))}onMouseUp(t){Vo(this,Ro)&&(zo(this,Ro,!1),this.publishMouseEvent("up",t))}onMouseMove(t){Vo(this,Ro)&&this.publishMouseEvent("move",t)}onTouchStart(t){Vo(this,Ro)||Vo(this,Uo)&&!Vo(this,Uo).contains(t.target)||(zo(this,Ro,!0),this.publishTouchEvent("down",t))}onTouchEnd(t){Vo(this,Ro)&&(zo(this,Ro,!1),this.publishTouchEvent("up",t))}onTouchMove(t){Vo(this,Ro)&&this.publishTouchEvent("move",t)}publishMouseEvent(t,e){Vo(this,qo)&&e.cancelable&&e.preventDefault(),at(Vo(this,Ho))&&Vo(this,Ho).call(this,{type:t,x:e.clientX,y:e.clientY,moveX:e.movementX,moveY:e.movementY,target:e.target,event:e})}publishTouchEvent(t,e){if(Vo(this,qo)&&e.cancelable&&e.preventDefault(),!at(Vo(this,Ho)))return;let i=null;e.touches.length>0?i=e.touches[0]:e.changedTouches.length>0&&(i=e.changedTouches[0]),Vo(this,Ho).call(this,{event:e,type:t,target:e.target,x:at(i)?i.clientX:-1,y:at(i)?i.clientY:-1,moveX:-1,moveY:-1})}}$o=new WeakMap,Ho=new WeakMap,Ro=new WeakMap,Fo=new WeakMap,qo=new WeakMap,Uo=new WeakMap;var Yo,Ko=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Go{calculate(t,e,i,s){return[t,e]}}new WeakMap;class Zo{constructor(t){Yo.set(this,void 0),Ko(this,Yo,t)}calculate(t,e,i,s){return[t-Xo(this,Yo).offsetLeft,e-Xo(this,Yo).offsetTop]}}Yo=new WeakMap;new WeakMap;var Jo,Qo,th,eh,ih,sh,nh,rh,oh,hh,ah,lh,ch,uh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ph{constructor(t,e){Jo.set(this,void 0),Qo.set(this,void 0),uh(this,Jo,null!=e?e:300),uh(this,Qo,t),this.escClose=!1,this.keyClose="",this.openAct="",this.closeAct="",this.timeout=dh(this,Jo)}parse(t){this.escClose=bt(t.escClose),this.keyClose=t.keyClose,this.timeout=mt(t.timeout,dh(this,Jo)),this.openAct=Mt(t.openAct,Et(".{prefix}-float-default-in",dh(this,Qo))),this.closeAct=Mt(t.closeAct,Et(".{prefix}-float-default-out",dh(this,Qo)))}}Jo=new WeakMap,Qo=new WeakMap;class gh{constructor(t){th.set(this,void 0),uh(this,th,null!=t?t:"cui"),this.attribute=dh(this,th)+"-float"}getStyle(){return null}get(t,e){return new vh(t,e,this.attribute,dh(this,th))}}th=new WeakMap;class vh extends Us{constructor(t,e,i,s){super("CuiFloatHandler",t,i,new ph(s,e.setup.animationTime),e),eh.set(this,void 0),ih.set(this,void 0),sh.set(this,void 0),nh.set(this,void 0),rh.set(this,void 0),oh.set(this,void 0),hh.set(this,void 0),ah.set(this,void 0),lh.set(this,void 0),ch.set(this,void 0),uh(this,eh,!1),uh(this,ih,!1),uh(this,sh,0),uh(this,nh,0),uh(this,oh,new jo),dh(this,oh).preventDefault(!1),uh(this,hh,new Go),uh(this,ah,new Zo(t)),uh(this,rh,s),this.move=this.move.bind(this),this.resize=this.resize.bind(this),uh(this,ch,null),uh(this,lh,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){Ts.setAria(this.element,"aria-modal",""),uh(this,ch,this.element.querySelector(Et(".{prefix}-float-move",dh(this,rh)))),uh(this,lh,this.element.querySelector(Et(".{prefix}-float-resize",dh(this,rh)))),dh(this,oh).setCallback(this.onMove.bind(this))}onUpdate(){}onDestroy(){}onBeforeOpen(){return!0}onAfterOpen(){dh(this,oh).attach()}onAfterClose(){dh(this,oh).detach()}onBeforeClose(){return!0}onMove(t){switch(t.type){case"down":this.onMouseDown(t);break;case"up":this.onMouseUp(t);break;case"move":this.onMouseMove(t)}}onMouseDown(t){t.target===dh(this,ch)?(uh(this,eh,!0),t.event.preventDefault()):t.target===dh(this,lh)&&(uh(this,ih,!0),t.event.preventDefault()),uh(this,sh,t.x),uh(this,nh,t.y),this.helper.setClassesAs(document.body,v),this.utils.bus.emit(j,null,!0)}onMouseMove(t){dh(this,eh)?this.peform(t,this.move):dh(this,ih)&&this.peform(t,this.resize)}onMouseUp(t){uh(this,eh,!1),uh(this,ih,!1),this.helper.removeClassesAs(document.body,v),this.utils.bus.emit(j,null,!1)}peform(t,e){this.mutate(()=>{at(e)&&e(this.element,t.x,t.y,t.x-dh(this,sh),t.y-dh(this,nh)),uh(this,sh,t.x),uh(this,nh,t.y)}),t.event.preventDefault()}resize(t,e,i,s,n){let[r,o]=dh(this,ah).calculate(e,i,s,n);this.fitsWindow(t.offsetTop,t.offsetLeft,r,o)&&this.mutate(()=>{t.style.width=r+"px",t.style.height=o+"px"})}move(t,e,i,s,n){let[r,o]=dh(this,hh).calculate(e,i,s,n);this.fitsWindow(o,r,t.offsetWidth,t.offsetHeight)&&this.mutate(()=>{t.style.left=r+"px",t.style.top=o+"px"})}fitsWindow(t,e,i,s){return t+s<window.innerHeight-10&&t>10&&e>10&&e+i<window.innerWidth-10}}eh=new WeakMap,ih=new WeakMap,sh=new WeakMap,nh=new WeakMap,rh=new WeakMap,oh=new WeakMap,hh=new WeakMap,ah=new WeakMap,lh=new WeakMap,ch=new WeakMap;var fh,mh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class kh{constructor(){this.icon="",this.scale=1}parse(t){At(t)?this.icon=Mt(t,""):(this.icon=Mt(t.icon,""),this.scale=mt(t.scale,1))}}class yh{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new bh(t,e,this.attribute)}}class bh extends qs{constructor(t,e,i){super("CuiIconHandler",t,i,new kh,e),fh.set(this,void 0),mh(this,fh,null)}onInit(){this.isLocked||(null===wh(this,fh)?(this.isLocked=!0,mh(this,fh,this.args.icon),this.addIcon(this.args.icon)):this._log.debug("Icon already initialized"))}onUpdate(){this.isLocked||this.args.icon!==wh(this,fh)&&(mh(this,fh,this.args.icon),this.addIcon(this.args.icon))}onDestroy(){const t=this.element.querySelector("svg");at(t)&&t.remove(),mh(this,fh,null)}addIcon(t){const e=t?f[t]:null;if(!e)return void(this.isLocked=!1);const i=new Xn(e).setScale(this.args.scale).build(),s=this.element.querySelector("svg");at(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}insertBefore(t){this.element.insertBefore(t,this.element.firstChild),this.isLocked=!1}appendChild(t){this.element.appendChild(t),this.isLocked=!1}}fh=new WeakMap;var Ch,Mh,Ah,Eh,Wh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Th=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xh{constructor(t,e){Ch.set(this,void 0),Mh.set(this,void 0),Ah.set(this,void 0),Eh.set(this,void 0),Wh(this,Mh,t),Wh(this,Ah,null!=e?e:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]),Wh(this,Eh,void 0),Wh(this,Ch,void 0)}setCallback(t){Wh(this,Eh,t)}connect(){Th(this,Eh)&&Wh(this,Ch,new IntersectionObserver(Th(this,Eh),{root:Th(this,Mh),rootMargin:"0px",threshold:Th(this,Ah)}))}observe(t){Th(this,Ch)&&Th(this,Ch).observe(t)}unobserve(t){Th(this,Ch)&&Th(this,Ch).unobserve(t)}disconnect(){Th(this,Ch)&&Th(this,Ch).disconnect()}}Ch=new WeakMap,Mh=new WeakMap,Ah=new WeakMap,Eh=new WeakMap;var Sh,Lh,Ih,Ph=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Dh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Oh{constructor(){this.target="div",this.action="",this.offset=0,this.isRoot=!1}parse(t){this.target=at(t.target)?":scope "+t.target:":scope > *",this.action=Mt(t.action,""),this.offset=dt(parseFloat(t.offset),0,1,0),this.isRoot=bt(t.isRoot)}}class Nh{constructor(t){this.attribute=(null!=t?t:"cui")+"-intersection"}getStyle(){return null}get(t,e){return new Bh(t,e,this.attribute)}}class Bh extends qs{constructor(t,e,i){super("CuiIntersectionHandler",t,i,new Oh,e),Sh.set(this,void 0),Lh.set(this,void 0),Ih.set(this,void 0),Ph(this,Sh,new xh(this.element)),Ph(this,Lh,[]),Ph(this,Ih,[])}onInit(){this.parseArguments(),Dh(this,Sh).setCallback(this.onIntersection.bind(this)),Dh(this,Sh).connect(),Dh(this,Lh).forEach(t=>{Dh(this,Sh).observe(t)})}onUpdate(){this.parseArguments()}onDestroy(){Dh(this,Sh).disconnect()}parseArguments(){if(!at(this.prevArgs)||this.prevArgs.target!==this.args.target){let t=this.args.isRoot?document.body:this.element;Ph(this,Lh,[...t.querySelectorAll(this.args.target)])}Ph(this,Ih,Li.get(this.args.action))}onIntersection(t,e){at(Dh(this,Lh))&&t.forEach(t=>{t.isIntersecting&&t.intersectionRatio>=this.args.offset?this.addActions(t.target):this.removeActions(t.target),this.emitIntersection(t)})}emitIntersection(t){this.emitEvent(H,{entry:t,offset:this.args.offset,timestamp:Date.now()})}addActions(t){Dh(this,Ih).forEach(e=>e.add(t))}removeActions(t){Dh(this,Ih).forEach(e=>e.remove(t))}}Sh=new WeakMap,Lh=new WeakMap,Ih=new WeakMap;var _h,$h,Hh,Rh,Fh,qh,Uh,zh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Vh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class jh{constructor(t,e){_h.set(this,void 0),$h.set(this,void 0),zh(this,$h,null!=e?e:300),zh(this,_h,t),this.escClose=!1,this.position="right",this.openAct=this.getDefaultOpenClass(),this.closeAct=this.getDefaultCloseClass(),this.timeout=Vh(this,$h),this.outClose=!1,this.keyClose=""}parse(t){at(t)&&(this.escClose=bt(t.escClose),this.outClose=bt(t.outClose),this.position=Mt(t.position,"right"),this.openAct=Mt(t.openAct,this.getDefaultOpenClass()),this.closeAct=Mt(t.closeAct,this.getDefaultCloseClass()),this.timeout=mt(t.timeout,Vh(this,$h)),this.keyClose=t.keyClose)}getDefaultOpenClass(){return Et("right"===this.position?".{prefix}-offcanvas-default-right-in":".{prefix}-offcanvas-default-left-in",Vh(this,_h))}getDefaultCloseClass(){return Et("right"===this.position?".{prefix}-offcanvas-default-right-out":".{prefix}-offcanvas-default-left-out",Vh(this,_h))}}_h=new WeakMap,$h=new WeakMap;class Yh{constructor(t){Hh.set(this,void 0),zh(this,Hh,null!=t?t:"cui"),this.attribute=Vh(this,Hh)+"-off-canvas"}getStyle(){return null}get(t,e){return new Kh(t,e,this.attribute,Vh(this,Hh))}}Hh=new WeakMap;class Kh extends Us{constructor(t,e,i,s){super("CuiOffCanvasHandler",t,i,new jh(s,e.setup.animationTime),e),Rh.set(this,void 0),Fh.set(this,void 0),qh.set(this,void 0),Uh.set(this,void 0),zh(this,Rh,s),zh(this,Fh,Et("{prefix}-off-canvas-open",s)),zh(this,Uh,null),zh(this,qh,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){this.mutate(()=>{this.setPositionLeft(),Ts.setAria(this.element,"aria-modal","")})}onUpdate(){this.setPositionLeft()}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(zh(this,qh,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&zh(this,Uh,this.onEvent(F,this.onWindowClick.bind(this))),this.helper.setClass(Vh(this,Fh),document.body),document.body.style.top=`-${scrollY}px`}onAfterClose(){this.detachEvent(F,Vh(this,Uh)),this.helper.removeClass(Vh(this,Fh),document.body),document.body.style.top="",window.scrollTo(0,-1*Vh(this,qh))}onBeforeClose(){return!0}onWindowClick(t){const e=this.element.querySelector(Et(".{prefix}-off-canvas-container",Vh(this,Rh)));e&&!e.contains(t.target)&&this.close()}isAnyActive(){return this.helper.hasClass(Vh(this,Fh),document.body)}setPositionLeft(){let t=lt(Vh(this,Rh),"left");"left"!==this.args.position||this.helper.hasClass(t,this.element)?"right"==this.args.position&&this.helper.hasClass(t,this.element)&&this.helper.removeClass(t,this.element):this.helper.setClass(t,this.element)}}Rh=new WeakMap,Fh=new WeakMap,qh=new WeakMap,Uh=new WeakMap;var Xh,Gh,Zh,Jh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ta{static get(t){return t instanceof Window?new sa:t instanceof HTMLElement?new ia(t):new ea(t)}}class ea{constructor(t){Xh.set(this,void 0),Gh.set(this,void 0),Jh(this,Gh,t),Jh(this,Xh,t.getBoundingClientRect())}getHeight(){return Qh(this,Xh).height}getWidth(){return Qh(this,Xh).width}getTop(){return Qh(this,Xh).top}getLeft(){return Qh(this,Xh).left}getScrollHeight(){return Qh(this,Gh).scrollHeight}getScrollWidth(){return Qh(this,Gh).scrollWidth}getScrollTop(){return Qh(this,Gh).scrollTop}getScrollLeft(){return Qh(this,Gh).scrollLeft}queryAll(t){return[...Qh(this,Gh).querySelectorAll(t)]}}Xh=new WeakMap,Gh=new WeakMap;class ia{constructor(t){Zh.set(this,void 0),Jh(this,Zh,t)}getHeight(){return Qh(this,Zh).offsetHeight}getWidth(){return Qh(this,Zh).offsetWidth}getTop(){return Qh(this,Zh).offsetTop}getLeft(){return Qh(this,Zh).offsetLeft}getScrollHeight(){return Qh(this,Zh).scrollHeight}getScrollWidth(){return Qh(this,Zh).scrollWidth}getScrollTop(){return Qh(this,Zh).scrollTop}getScrollLeft(){return Qh(this,Zh).scrollLeft}queryAll(t){return[...Qh(this,Zh).querySelectorAll(t)]}}Zh=new WeakMap;class sa{getHeight(){return window.innerHeight}getWidth(){return window.innerWidth}getTop(){return 0}getLeft(){return 0}getScrollHeight(){return window.innerHeight}getScrollWidth(){return window.innerWidth}getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}queryAll(t){return[...document.querySelectorAll(t)]}}var na,ra,oa,ha,aa,la,ca,ua,da,pa,ga=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},va=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class fa{constructor(t,e){na.set(this,void 0),ra.set(this,void 0),oa.set(this,void 0),ha.set(this,void 0),aa.set(this,void 0),la.set(this,void 0),ca.set(this,void 0),ua.set(this,void 0),da.set(this,void 0),pa.set(this,void 0),ga(this,na,t),ga(this,ua,ta.get(t)),ga(this,ra,!1),ga(this,oa,dt(e,0,100,0)),ga(this,ha,ga(this,aa,0)),ga(this,ca,!1),ga(this,la,void 0),ga(this,da,new fo(50,!1,this.onScrollFinish.bind(this))),ga(this,pa,this.listener.bind(this))}setCallback(t){ga(this,la,t)}attach(){va(this,na).addEventListener("scroll",va(this,pa)),ga(this,ca,!0),this.listener(void 0,!0,"init")}detach(){va(this,na).removeEventListener("scroll",va(this,pa)),va(this,da).stop(),ga(this,ca,!1)}setTarget(t){t!==va(this,na)&&(this.detach(),ga(this,na,t),this.attach())}setThreshold(t){ga(this,oa,dt(t,0,100,0))}isInProgress(){return va(this,ra)}isAttached(){return va(this,ca)}listener(t,e,i){if(!at(va(this,la)))return;let s=va(this,ua).getScrollLeft(),n=va(this,ua).getScrollTop();ga(this,ha,va(this,ha)+s),ga(this,aa,va(this,aa)+n),va(this,ra)||!this.passedThreshold()&&at(t)||(ga(this,ra,!0),va(this,la).call(this,{base:t,top:n,left:s,initial:null!=e&&e,scrolling:at(t),source:null!=i?i:"event"}),at(t)&&va(this,da).start(),ga(this,ra,!1),ga(this,ha,0),ga(this,aa,0))}passedThreshold(){return va(this,oa)<=0||va(this,ha)>=va(this,oa)||va(this,aa)>=va(this,oa)}onScrollFinish(){this.listener(void 0,!1,"task")}}na=new WeakMap,ra=new WeakMap,oa=new WeakMap,ha=new WeakMap,aa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap,pa=new WeakMap;var ma,wa,ka,ya,ba,Ca,Ma,Aa=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ea=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wa{matches(t,e,i,s){return i>0&&e>=i||s>0&&t>=s}}class Ta{constructor(){ma.set(this,void 0),wa.set(this,void 0),ka.set(this,void 0),ya.set(this,void 0),ba.set(this,void 0),Ca.set(this,void 0),Ma.set(this,void 0),Aa(this,ma,0),Aa(this,wa,0),Aa(this,ya,0),Aa(this,ka,0),Aa(this,Ma,100),Aa(this,ba,!1),Aa(this,Ca,!1)}matches(t,e,i,s){return this.fitsOffsetY(t,s)||this.fitsOffsetX(e,i)}fitsOffsetX(t,e){if(e<=0)return!1;let i=t-Ea(this,ma);return t>=e&&i>Ea(this,Ma)?Aa(this,ba,!0):Ea(this,ba)&&i<-Ea(this,Ma)&&Aa(this,ba,!1),(i<0&&Ea(this,ya)<i||i>=0&&Ea(this,ya)>i)&&Aa(this,ma,t),Aa(this,ya,i),Ea(this,ba)}fitsOffsetY(t,e){if(e<=0)return!1;let i=t-Ea(this,wa);return t>=e&&i>Ea(this,Ma)?Aa(this,Ca,!0):Ea(this,Ca)&&i<-Ea(this,Ma)&&Aa(this,Ca,!1),(i<0&&Ea(this,ka)<i||i>=0&&Ea(this,ka)>i)&&Aa(this,wa,t),Aa(this,ka,i),Ea(this,Ca)}}ma=new WeakMap,wa=new WeakMap,ka=new WeakMap,ya=new WeakMap,ba=new WeakMap,Ca=new WeakMap,Ma=new WeakMap;var xa,Sa,La,Ia,Pa,Da,Oa,Na,Ba,_a,$a=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ha=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ra{constructor(){this.offsetX=0,this.offsetY=0,this.target="",this.root=!1,this.action="",this.mode="static"}parse(t){this.target=t.target,this.action=t.action,this.offsetX=mt(t.offsetX,-1),this.offsetY=mt(t.offsetY,-1),this.root=bt(t.root),this.mode=Mt(t.mode,"static")}}class Fa{constructor(t){this.attribute=(null!=t?t:"cui")+"-offset"}getStyle(){return null}get(t,e){return new qa(t,e,this.attribute)}}class qa extends qs{constructor(t,e,i){super("CuiOffsetHandler",t,i,new Ra,e),xa.set(this,void 0),Sa.set(this,void 0),La.set(this,void 0),Ia.set(this,void 0),Pa.set(this,void 0),Da.set(this,void 0),Oa.set(this,void 0),Na.set(this,void 0),Ba.set(this,void 0),_a.set(this,void 0),this.element=t,$a(this,Sa,this.element),$a(this,La,e),$a(this,Ia,!1),$a(this,Pa,[]),$a(this,Da,0),$a(this,Oa,0),$a(this,Na,20),$a(this,Ba,this.element),$a(this,_a,null),$a(this,xa,void 0)}onInit(){this.parseAttribute(),$a(this,xa,new fa(this.args.root?window:this.element,this.utils.setup.scrollThreshold)),Ha(this,xa).setCallback(this.onScroll.bind(this)),Ha(this,xa).attach()}onUpdate(){this.parseAttribute()}onDestroy(){Ha(this,xa)&&Ha(this,xa).detach()}onScroll(t){this.checkAndPerformActions(t)}parseAttribute(){$a(this,Ba,this.getRoot()),$a(this,Sa,this.getTarget()),$a(this,Pa,Li.get(this.args.action)),$a(this,_a,class{static get(t){return"dynamic"===t?new Ta:new Wa}}.get(this.args.mode))}checkAndPerformActions(t){at(Ha(this,_a))||this.logError("Cannot perform - mode handler not initialized","checkAndPerformActions");let e=Ha(this,_a).matches(t.top,t.left,this.args.offsetX,this.args.offsetY);if(e!==Ha(this,Ia))return this.act(e),$a(this,Ia,e),void this.callEvent(Ha(this,Ia),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top));this.exceededThreshold(t.left,t.top)&&(this.callEvent(Ha(this,Ia),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top)),$a(this,Da,t.left),$a(this,Oa,t.top))}act(t){gt(Ha(this,Pa),Ha(this,Sa))&&(this.isLocked=!0,Ha(this,Pa).forEach(e=>{t?e.add(Ha(this,Sa),Ha(this,La)):e.remove(Ha(this,Sa),Ha(this,La))}),this.isLocked=!1)}callEvent(t,e,i,s,n,r,o){this.emitEvent(q,{matches:Ha(this,Ia),offsetX:e,offsetY:i,ratioX:r,ratioY:o,scrolling:s,source:n,timestamp:Date.now()})}getRoot(){return this.args.root?document.body:this.element}exceededThreshold(t,e){return Math.abs(t-Ha(this,Da))>Ha(this,Na)||Math.abs(e-Ha(this,Oa))>Ha(this,Na)}calcaRatio(t,e){let i=parseFloat(((Ha(this,Ba).clientHeight+e)/Ha(this,Ba).scrollHeight).toFixed(2));return[ut(parseFloat(((Ha(this,Ba).clientWidth+t)/Ha(this,Ba).scrollWidth).toFixed(2)),0,1),ut(i,0,1)]}getTarget(){let t=this.args.target?Ha(this,Ba).querySelector(this.args.target):null;return null!=t?t:this.element}}xa=new WeakMap,Sa=new WeakMap,La=new WeakMap,Ia=new WeakMap,Pa=new WeakMap,Da=new WeakMap,Oa=new WeakMap,Na=new WeakMap,Ba=new WeakMap,_a=new WeakMap;var Ua,za,Va,ja=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ya=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ka=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xa{constructor(t){Ua.set(this,void 0),Ya(this,Ua,null!=t?t:300),this.target="",this.action="",this.timeout=0,this.prevent=!1,this.state=""}parse(t){if(at(t)&&At(t))return this.target=t,this.action="",this.timeout=Ka(this,Ua),this.prevent=!1,void(this.state="");this.target=Mt(t.target,""),this.action=t.action,this.timeout=mt(t.timeout,Ka(this,Ua)),this.prevent=bt(t.prevent),this.state=t.state}}Ua=new WeakMap;class Ga{constructor(t){za.set(this,void 0),Ya(this,za,null!=t?t:"cui"),this.attribute=Ka(this,za)+"-open"}getStyle(){return null}get(t,e){return new Za(t,e,this.attribute,Ka(this,za))}}za=new WeakMap;class Za extends qs{constructor(t,e,i,s){super("CuiOpenHandler",t,i,new Xa(e.setup.animationTime),e),Va.set(this,void 0),Ya(this,Va,null),this.onClick=this.onClick.bind(this)}onInit(){this.element.addEventListener("click",this.onClick),Ya(this,Va,this.onEvent(S,this.onOpen.bind(this)))}onUpdate(){}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(S,Ka(this,Va))}onClick(t){this.onOpen(t),this.args.prevent&&t.preventDefault()}onOpen(t){if(this.isLocked)return;const e=this.getTarget(this.args.target);at(e)?(this.isLocked=!0,this.run(e).then(i=>{this.activateTarget(t,e,i)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return ja(this,void 0,void 0,(function*(){let e=t.$cuid;if(at(e))return this._log.debug("Open cUI component"),yield this.utils.bus.emit(S,e,this.args.state),!1;if(this._log.debug("Open html component"),gt(this.args.timeout,this.args.action)){this._log.debug("Perfrom an action");let e=Li.get(this.args.action);return yield this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.setActiveClass(t)}),!0}return this.setActiveClassAsync(t),!0}))}setActiveClass(t){at(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClass(this.activeClassName,t)}setActiveClassAsync(t){this.fetch(()=>{at(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClassesAs(t,this.activeClassName)})}activateTarget(t,e,i){at(e)&&!this.helper.hasClass(this.activeClassName,e)&&this.helper.setClassesAs(e,this.activeClassName),i&&this.emitOpen(t)}emitOpen(t){this.emitEvent(L,{event:t,state:this.args.state,timestamp:Date.now()})}getTarget(t){if(at(t))return document.querySelector(t);let e=this.element.parentElement,i=at(e)?e.querySelectorAll("[cuid]"):void 0;return!i||i.length<2?void 0:function(t,e){let i=t.length;if(t&&0!==i)for(let s=0;s<i;s++)if(e(t[s],s))return t[s]}([...i],t=>t!==this.element)}}Va=new WeakMap;var Ja,Qa,tl,el,il,sl,nl,rl,ol,hl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},al=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ll{constructor(){this.mode="simple",this.default="",this.small=this.medium=this.large=this.xlarge=void 0,this.delay=0}parse(t){var e,i,s,n;this.default=Mt(t.default,""),this.small=null!==(e=t.small)&&void 0!==e?e:t.s,this.medium=null!==(i=t.medium)&&void 0!==i?i:t.m,this.large=null!==(s=t.large)&&void 0!==s?s:t.l,this.xlarge=null!==(n=t.xlarge)&&void 0!==n?n:t.xl,this.mode="smart"===t.mode?"smart":"simple",this.delay=mt(t.delay,0)}}class cl{constructor(t){Ja.set(this,void 0),hl(this,Ja,null!=t?t:"cui"),this.attribute=al(this,Ja)+"-resize"}getStyle(){return null}get(t,e){return new ul(t,e,this.attribute)}}Ja=new WeakMap;class ul extends qs{constructor(t,e,i){super("CuiResizeHandler",t,i,new ll,e),Qa.set(this,void 0),tl.set(this,void 0),el.set(this,void 0),il.set(this,void 0),sl.set(this,void 0),nl.set(this,void 0),rl.set(this,void 0),ol.set(this,void 0),hl(this,Qa,null),hl(this,tl,new xh(document.documentElement,[0,.1])),al(this,tl).setCallback(this.onIntersection.bind(this)),hl(this,sl,""),hl(this,il,""),hl(this,el,"none"),hl(this,rl,!1),hl(this,ol,void 0),hl(this,nl,void 0)}onInit(){hl(this,Qa,this.utils.bus.on(x,this.resize.bind(this))),al(this,tl).connect(),al(this,tl).observe(this.element),hl(this,el,vt(window.innerWidth)),hl(this,rl,this.isInViewport(this.element)),this.setNewValue(),this.updateElement()}onUpdate(){this.setNewValue(),this.updateElement()}onDestroy(){null!==al(this,Qa)&&(this.utils.bus.detach(x,al(this,Qa)),hl(this,Qa,null)),al(this,tl).unobserve(this.element),al(this,tl).disconnect()}resize(t){hl(this,el,t.current),this.setNewValue(),this.updateElement()}onIntersection(t){t.length>0&&hl(this,rl,t[0].isIntersecting),this.updateElement()}setNewValue(){let t=this.isSmartMode()?this.getSmartValue(al(this,el)):this.getValue(al(this,el),!0);t&&t!==al(this,il)&&hl(this,il,t)}getValue(t,e){let i=void 0;switch(t){case"xlarge":i=this.args.xlarge;break;case"large":i=this.args.large;break;case"medium":i=this.args.medium;break;case"small":i=this.args.small;break;default:i=this.args.default}return e&&!i?this.args.default:i}getSmartValue(t){var e,i,s,n;let r=this.args.default;return"none"===t?r:(r=null!==(e=this.args.small)&&void 0!==e?e:r,"small"===t?r:(r=null!==(i=this.args.medium)&&void 0!==i?i:r,"medium"===t?r:(r=null!==(s=this.args.large)&&void 0!==s?s:r,"large"===t?r:null!==(n=this.args.xlarge)&&void 0!==n?n:r)))}updateElement(){al(this,rl)||!this.isSmartMode()?at(al(this,il))?al(this,sl)!==al(this,il)&&this.run(()=>{let t=Si.get(al(this,il));this.mutate(()=>{al(this,nl)&&al(this,nl).remove(this.element),t.add(this.element),hl(this,sl,al(this,il)),hl(this,nl,t)})}):this.logWarning("Not eligible to set value: "+al(this,il)):this.logInfo("Not intersecting")}isSmartMode(){return"smart"===this.args.mode}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}run(t){al(this,ol)&&(clearTimeout(al(this,ol)),hl(this,ol,void 0)),hl(this,ol,setTimeout(()=>{t(),hl(this,ol,void 0)},this.args.delay))}}Qa=new WeakMap,tl=new WeakMap,el=new WeakMap,il=new WeakMap,sl=new WeakMap,nl=new WeakMap,rl=new WeakMap,ol=new WeakMap;var dl,pl,gl,vl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ml{constructor(t){this.attribute=at(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new kl(t,e,this.attribute)}}class wl{constructor(){this.target="",this.parent="",this.behavior="auto"}parse(t){this.target=Mt(t.target,""),this.parent=Mt(t.parent,""),this.behavior=at(t.behavior)&&"smooth"===t.behavior.toLowerCase()?"smooth":"auto"}}class kl extends qs{constructor(t,e,i){super("CuiScrollHandler",t,i,new wl,e),dl.set(this,void 0),pl.set(this,void 0),gl.set(this,void 0),this.element=t,vl(this,dl,null),vl(this,pl,null),vl(this,gl,this.onClick.bind(this))}onInit(){this.element.addEventListener("click",fl(this,gl)),this.setTargets()}onUpdate(){this.setTargets()}onDestroy(){this.element.removeEventListener("click",fl(this,gl))}onClick(t){if(!gt(fl(this,pl),fl(this,dl)))return;let e=function(t){if(!at(t))return-1;let e=t.offsetTop-parseInt(wt(t,"margin-top"))-parseInt(wt(t,"padding-top"))-parseInt(wt(t,"border-top-width"));return e<0?t.offsetTop:e}(fl(this,pl))-fl(this,dl).offsetTop,i=e-fl(this,dl).scrollTop;fl(this,dl).scrollBy({top:i,behavior:this.args.behavior}),this.emitEvent(_,{to:e,by:i,target:fl(this,pl),parent:fl(this,dl),timestamp:Date.now()}),t.preventDefault()}setTargets(){vl(this,pl,at(this.args.target)?document.querySelector(this.args.target):null),at(fl(this,pl))&&vl(this,dl,at(this.args.parent)?document.querySelector(this.args.parent):fl(this,pl).parentElement)}}dl=new WeakMap,pl=new WeakMap,gl=new WeakMap;var yl,bl,Cl,Ml,Al=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},El=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wl{constructor(t,e){var i;yl.set(this,void 0),bl.set(this,void 0),Cl.set(this,void 0),Ml.set(this,void 0),Al(this,Ml,ta.get(t)),Al(this,yl,new fa(t,null!==(i=null==e?void 0:e.threshold)&&void 0!==i?i:0)),El(this,yl).setCallback(this.onScroll.bind(this)),Al(this,Cl,[]),Al(this,bl,void 0)}setChildren(t){Al(this,Cl,t)}setThreshold(t){El(this,yl).setThreshold(t)}setCallback(t){Al(this,bl,t)}setParent(t){Al(this,Ml,ta.get(t)),El(this,yl).setTarget(t)}isInProgress(){return El(this,yl).isInProgress()}attach(){this.isAttached()||El(this,yl).attach()}detach(){this.isAttached()&&El(this,yl).detach()}isAttached(){return El(this,yl)&&El(this,yl).isAttached()}onScroll(t){gt(El(this,Cl),El(this,bl))&&El(this,bl)&&El(this,bl).call(this,this.prepareCallbackResult(t))}calcChildVerticalRatio(t,e,i){let s=t.offsetTop+t.offsetHeight;return ut(((i<s?i:s)-(e>t.offsetTop?e:t.offsetTop))/t.offsetHeight,0,1)}calcChildHorizontalRatio(t,e,i){let s=t.offsetLeft+t.offsetWidth;return ut(((i<s?i:s)-(e>t.offsetLeft?e:t.offsetLeft))/t.offsetWidth,0,1)}prepareCallbackResult(t){var e,i;let s=t.top+El(this,Ml).getHeight(),n=t.left+El(this,Ml).getWidth();return{ev:t.base,top:t.top,left:t.left,scrolling:null!==(e=t.scrolling)&&void 0!==e&&e,initial:null!==(i=t.initial)&&void 0!==i&&i,source:t.source,items:El(this,Cl).map((e,i)=>({verticalRatio:this.calcChildVerticalRatio(e,t.top,s),horizontalRatio:this.calcChildHorizontalRatio(e,t.left,n),element:e}))}}}yl=new WeakMap,bl=new WeakMap,Cl=new WeakMap,Ml=new WeakMap;class Tl{static get(t){return"multi"===t?new Ll:new Sl}}class xl{constructor(t){this.previous=t}getMatching(t,e){return e.reduce((e,i,s)=>(i.verticalRatio>t&&e.push(s),e),[])}addActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.add(e)})}removeActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.remove(e)})}forEachAction(t,e,i){gt(t,e,i)&&t.forEach(t=>{e.forEach(e=>{at(e)&&i(t,e)})})}}class Sl extends xl{constructor(){super(-1)}update(t,e,i,s,n){let r=this.getMatching(e,t),o=r.length,h=o>0?r[o-1]:-1,a={changed:!1};if(!this.matches(h)){if(this.previous>-1&&this.removeActions(i,t[this.previous].element),h>-1){let e=t[h].element;a.intersecting=[e],this.addActions(i,e)}return gt(s,n)&&(this.previous>-1&&this.removeActions(n,s[this.previous]),h>-1&&this.addActions(n,s[h])),this.previous=h,a.changed=!0,a.intersecting=[],a}return a}matches(t){return t===this.previous}}class Ll extends xl{constructor(){super([])}update(t,e,i,s,n){let r=this.getMatching(e,t),o={changed:!1};if(!this.matches(r)){let e=r.map(e=>t[e].element);return this.removeActions(i,...this.previous.map(e=>t[e].element)),this.addActions(i,...e),o.intersecting=e,gt(s,n)&&(this.removeActions(n,...this.previous.map(t=>s[t])),this.addActions(n,...r.map(t=>s[t]))),this.previous=r,o.changed=!0,o}return o}matches(t){let e=t.length;if(e!==this.previous.length)return!1;let i=0;for(i=0;i<e;i++)if(!this.previous.includes(t[i]))return!1;return!0}}var Il,Pl,Dl,Ol,Nl,Bl,_l,$l=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Rl{constructor(){this.ratio=0,this.mode="single",this.threshold=-1,this.selector="",this.action="",this.isRoot=!1,this.link="",this.linkAction=""}parse(t){var e;this.selector=":scope "+(null!==(e=t.selector)&&void 0!==e?e:"> *"),this.action=Mt(t.action,""),this.link=Mt(t.link,""),this.linkAction=Mt(t.linkAction,""),this.ratio=dt(parseFloat(t.ratio),0,1,0),this.isRoot=bt(t.isRoot),this.mode="multi"===(null==t?void 0:t.mode)?"multi":"single",this.threshold=mt(t.threshold,-1)}}class Fl{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new ql(t,e,this.attribute)}}class ql extends qs{constructor(t,e,i){super("CuiScrollspyHandler",t,i,new Rl,e),Il.set(this,void 0),Pl.set(this,void 0),Dl.set(this,void 0),Ol.set(this,void 0),Nl.set(this,void 0),Bl.set(this,void 0),_l.set(this,void 0),this.element=t,$l(this,Il,new Wl(this.element,{threshold:this.utils.setup.scrollThreshold})),$l(this,Pl,[]),$l(this,Dl,[]),$l(this,Ol,[]),$l(this,Nl,void 0),$l(this,Bl,void 0),$l(this,_l,void 0)}onInit(){this.parseAttribute(),Hl(this,Il).setCallback(this.onIntersection.bind(this)),Hl(this,Il).attach()}onUpdate(){this.updateAttributes()}onDestroy(){Hl(this,Il).detach()}onIntersection(t){if(!Hl(this,_l))return void this.logError("Cannot perform - mode handler not initialized","OnIntersection");let e=Date.now();this.mutate(()=>{let i=Hl(this,_l).update(t.items,this.args.ratio,Hl(this,Dl),Hl(this,Pl),Hl(this,Ol));i.changed&&this.emitEvent($,{intersecting:i.intersecting,timestamp:e})}),this.emitEvent(_,{top:t.top,left:t.left,scrolling:t.scrolling,initial:t.initial,source:t.source,timestamp:e})}parseAttribute(){$l(this,Nl,this.args.isRoot?window:this.element),$l(this,Bl,ta.get(Hl(this,Nl)));let t=this.args.selector?Hl(this,Bl).queryAll(this.args.selector):[];Hl(this,Il).setChildren(t),Hl(this,Il).setThreshold(this.args.threshold),$l(this,Pl,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),$l(this,Dl,Li.get(this.args.action)),$l(this,Ol,Li.get(this.args.linkAction)),$l(this,_l,Tl.get(this.args.mode))}updateAttributes(){if(this.prevArgs&&this.args.isRoot!==this.prevArgs.isRoot&&($l(this,Nl,this.args.isRoot?window:this.element),$l(this,Bl,ta.get(Hl(this,Nl))),Hl(this,Il).setParent(Hl(this,Nl))),this.prevArgs&&Hl(this,Bl)&&this.args.selector!==this.prevArgs.selector){let t=this.args.selector?Hl(this,Bl).queryAll(this.args.selector):[];Hl(this,Il).setChildren(t)}Hl(this,Il).setThreshold(this.args.threshold),$l(this,Pl,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),$l(this,Dl,Li.get(this.args.action)),$l(this,Ol,Li.get(this.args.linkAction)),$l(this,_l,Tl.get(this.args.mode))}}Il=new WeakMap,Pl=new WeakMap,Dl=new WeakMap,Ol=new WeakMap,Nl=new WeakMap,Bl=new WeakMap,_l=new WeakMap;var Ul,zl,Vl,jl,Yl,Kl,Xl,Gl,Zl,Jl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ql=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class tc{constructor(t){Ul.set(this,void 0),zl.set(this,void 0),Vl.set(this,void 0),jl.set(this,void 0),Yl.set(this,void 0),Kl.set(this,void 0),Xl.set(this,void 0),Gl.set(this,void 0),Zl.set(this,void 0),Jl(this,jl,t),Jl(this,zl,[]),Jl(this,Vl,void 0),Jl(this,Ul,void 0),Jl(this,Yl,void 0),Jl(this,Kl,[]),Jl(this,Xl,[]),Jl(this,Zl,void 0),Jl(this,Gl,void 0)}setId(t){return Jl(this,Ul,t),this}setClasses(...t){return Jl(this,zl,t),this}setAttributes(t){return Jl(this,Vl,t),this}setTextContent(t){return Jl(this,Yl,t),this}setChildren(...t){return Jl(this,Kl,[...t]),this}setRawChildren(...t){return Jl(this,Xl,[...t]),this}onEvent(t,e){return Jl(this,Zl,t),Jl(this,Gl,e),this}build(t){let e=document.createElement(Ql(this,jl));return at(Ql(this,Ul))&&(e.id=Ql(this,Ul)),at(Ql(this,zl))&&e.classList.add(...Ql(this,zl)),at(Ql(this,Vl))&&St(Ql(this,Vl),(t,i)=>{e.setAttribute(t,i)}),at(t)?e.innerHTML=t:at(Ql(this,Yl))&&(e.textContent=Ql(this,Yl)),Ql(this,Xl).forEach(t=>{e.appendChild(t.build())}),Ql(this,Kl).forEach(t=>e.appendChild(t)),gt(Ql(this,Zl),Ql(this,Gl))&&e.addEventListener(Ql(this,Zl),t=>{Ql(this,Gl).call(this,t)}),e}}Ul=new WeakMap,zl=new WeakMap,Vl=new WeakMap,jl=new WeakMap,Yl=new WeakMap,Kl=new WeakMap,Xl=new WeakMap,Gl=new WeakMap,Zl=new WeakMap;var ec,ic,sc,nc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class oc{constructor(){ec.set(this,void 0),ic.set(this,void 0),sc.set(this,void 0),nc(this,ec,[]),nc(this,ic,0),nc(this,sc,5)}setElements(t){nc(this,ec,t),nc(this,ic,rc(this,ec).length)}setThreshold(t){nc(this,sc,t)}detect(t,e){if(!at(rc(this,ec)))return[-1,void 0];let i=-1,s=void 0;for(let n=0;n<rc(this,ic);n++)if(this.isInBounds(rc(this,ec)[n],t,e)){0===n?(i=n,s=rc(this,ec)[n]):n<rc(this,ic)-1&&(i=n+1,s=rc(this,ec)[n+1]);break}return[i,s]}isInBounds(t,e,i){const s=t.getBoundingClientRect();return e>s.left-rc(this,sc)&&e<s.left+s.width+rc(this,sc)&&i>s.top-rc(this,sc)&&i<s.top+s.height+rc(this,sc)}}ec=new WeakMap,ic=new WeakMap,sc=new WeakMap;var hc,ac,lc,cc,uc,dc,pc,gc,vc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class mc{constructor(t){hc.set(this,void 0),ac.set(this,void 0),lc.set(this,void 0),cc.set(this,void 0),uc.set(this,void 0),dc.set(this,void 0),pc.set(this,void 0),gc.set(this,void 0),vc(this,hc,t),vc(this,ac,new jo),vc(this,dc,150),vc(this,pc,!1),vc(this,gc,void 0),fc(this,ac).setTarget(fc(this,hc)),fc(this,ac).preventDefault(!1),fc(this,ac).setCallback(this.onMove.bind(this)),vc(this,lc,void 0),vc(this,cc,void 0),vc(this,uc,void 0)}setLongPressTimeout(t){vc(this,dc,t)}onDragStart(t){vc(this,lc,t)}onDragOver(t){vc(this,cc,t)}onDragEnd(t){vc(this,uc,t)}attach(){fc(this,ac).attach()}detach(){fc(this,ac).detach()}onMove(t){switch(t.type){case"down":if(fc(this,pc))return;vc(this,gc,setTimeout(()=>{fc(this,lc)&&fc(this,lc).call(this,t)&&vc(this,pc,!0)},fc(this,dc)));break;case"move":if(this.cancelTimeout(),!fc(this,pc))return;fc(this,cc)&&fc(this,cc).call(this,t);break;case"up":if(this.cancelTimeout(),!fc(this,pc))return;fc(this,uc)&&fc(this,uc).call(this,t),vc(this,pc,!1)}}cancelTimeout(){fc(this,gc)&&(clearTimeout(fc(this,gc)),vc(this,gc,void 0))}}hc=new WeakMap,ac=new WeakMap,lc=new WeakMap,cc=new WeakMap,uc=new WeakMap,dc=new WeakMap,pc=new WeakMap,gc=new WeakMap;var wc,kc,yc,bc,Cc,Mc,Ac,Ec,Wc,Tc,xc,Sc,Lc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ic=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pc{constructor(){this.target=":scope  > *",this.trigger=":scope  > *",this.timeout=150,this.threshold=5}parse(t){this.target=t.target?":scope  "+t.target:":scope  > *",this.trigger=t.trigger?":scope  "+t.trigger:":scope  > *",this.timeout=mt(t.timeout,150),this.threshold=mt(t.threshold,5)}}class Dc{constructor(t){wc.set(this,void 0),Lc(this,wc,null!=t?t:"cui"),this.attribute=Ic(this,wc)+"-sortable"}getStyle(){return null}get(t,e){return new Oc(t,this.attribute,e,Ic(this,wc))}}wc=new WeakMap;class Oc extends qs{constructor(t,e,i,s){super("CuiSortableHandler",t,e,new Pc,i),kc.set(this,void 0),yc.set(this,void 0),bc.set(this,void 0),Cc.set(this,void 0),Mc.set(this,void 0),Ac.set(this,void 0),Ec.set(this,void 0),Wc.set(this,void 0),Tc.set(this,void 0),xc.set(this,void 0),Sc.set(this,void 0),Lc(this,bc,[]),Lc(this,yc,[]),Lc(this,Mc,-1),Lc(this,Cc,null),Lc(this,Tc,null),Lc(this,Ac,null),Lc(this,kc,new mc(t)),Ic(this,kc).onDragStart(this.onDragStart.bind(this)),Ic(this,kc).onDragOver(this.onDragOver.bind(this)),Ic(this,kc).onDragEnd(this.onDragEnd.bind(this)),Lc(this,Ec,Et("{prefix}-moving",s)),Lc(this,Sc,Et("{prefix}-sortable-preview",s)),Lc(this,Wc,new oc),Lc(this,xc,new Sn),Ic(this,xc).setOnFinish(()=>{let t=Ic(this,Cc),e=Ic(this,Mc);this.stopMovementPrep(),this.utils.bus.emit(j,null,!1),this.emitEvent(X,{item:t,index:e,timestamp:new Date})})}onInit(){Ic(this,kc).attach(),this.getTargetsAndTrggers(),Ic(this,Wc).setThreshold(this.args.threshold)}onUpdate(){!this.prevArgs||this.args.target===this.prevArgs.target&&this.args.trigger===this.prevArgs.trigger||this.getTargetsAndTrggers(),Ic(this,kc).setLongPressTimeout(this.args.timeout)}onDestroy(){Ic(this,kc).detach()}getTargetsAndTrggers(){try{if(Lc(this,bc,[...this.element.querySelectorAll(this.args.target)]),Lc(this,yc,[...this.element.querySelectorAll(this.args.trigger)]),Ic(this,yc).length!==Ic(this,bc).length)throw new Error(`Triggers (count ${Ic(this,yc).length}) and targets (count ${Ic(this,bc).length}) selector are not correct`);Ic(this,Wc).setElements(Ic(this,bc))}catch(t){this._log.error("Incorrect trigger or target selector"),this._log.exception(t,"getTargetsAndTrggers"),Lc(this,bc,[]),Lc(this,yc,[])}}onDragStart(t){return Lc(this,Mc,this.getPressedElementIdx(t.target)),Lc(this,Cc,Ic(this,Mc)>-1?Ic(this,bc)[Ic(this,Mc)]:null),!!at(Ic(this,Cc))&&(this.utils.bus.emit(j,null,!0),this.startMovementPrep(t),this.emitEvent(G,{item:Ic(this,Cc),index:Ic(this,Mc),timestamp:new Date}),!0)}onDragOver(t){this.move(t),t.event.preventDefault()}onDragEnd(t){at(Ic(this,Ac))&&(Ic(this,xc).setElement(Ic(this,Ac)),Ic(this,xc).setProps(this.getFinishAnimation()),Ic(this,xc).finish(0,100,!1))}getPressedElementIdx(t){return Ic(this,yc).findIndex(e=>e.contains(t))}startMovementPrep(t){this.mutate(()=>{this.createPreview(),at(Ic(this,Cc))&&this.helper.setClass(Ic(this,Ec),Ic(this,Cc)),this.helper.setClass("cui-locked",this.element),this.helper.setClass(v,document.body),this.setPreviewPosition(t),this.setCurrentPosition(t)})}stopMovementPrep(){this.mutate(()=>{at(Ic(this,Cc))&&this.helper.removeClass(Ic(this,Ec),Ic(this,Cc)),this.helper.removeClass(v,document.body),this.helper.removeClass("cui-locked",this.element),this.removePreview(),Lc(this,Cc,null),Lc(this,Tc,null),this.getTargetsAndTrggers()})}move(t){this.mutate(()=>{this.setPreviewPosition(t),this.setCurrentPosition(t)})}createPreview(){at(Ic(this,Cc))?(Lc(this,Ac,new tc("div").setClasses(Ic(this,Sc)).build()),Ic(this,Ac).style.width=Ic(this,Cc).offsetWidth+"px",Ic(this,Ac).style.height=Ic(this,Cc).offsetHeight+"px",document.body.appendChild(Ic(this,Ac))):this.logError("Cannot create preview - current target does not exist","createPreview")}removePreview(){at(Ic(this,Ac))&&(Ic(this,Ac).remove(),Lc(this,Ac,null))}setPreviewPosition(t){at(Ic(this,Ac))&&(Ic(this,Ac).style.top=t.y+"px",Ic(this,Ac).style.left=t.x+"px")}setCurrentPosition(t){if(!Ic(this,Cc))return;let[e,i]=Ic(this,Wc).detect(t.x,t.y);if(e!==Ic(this,Mc)&&i&&Ic(this,Tc)!==i){let t=i;this.insertElement(Ic(this,Cc),t),Lc(this,Tc,t),this.getTargetsAndTrggers(),Lc(this,Mc,e)}}insertElement(t,e){at(e)?this.element.insertBefore(t,e):this.element.appendChild(t)}getFinishAnimation(){if(!gt(Ic(this,Cc),Ic(this,Ac)))return{opacity:{from:1,to:0}};const t=Ic(this,Cc).getBoundingClientRect();return{opacity:{from:1,to:0},top:{from:Ic(this,Ac).offsetTop,to:t.top>0?t.top:Ic(this,Ac).offsetTop,unit:"px"},left:{from:Ic(this,Ac).offsetLeft,to:t.left>0?t.left:Ic(this,Ac).offsetLeft,unit:"px"}}}}kc=new WeakMap,yc=new WeakMap,bc=new WeakMap,Cc=new WeakMap,Mc=new WeakMap,Ac=new WeakMap,Ec=new WeakMap,Wc=new WeakMap,Tc=new WeakMap,xc=new WeakMap,Sc=new WeakMap;var Nc,Bc,_c,$c=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Rc{constructor(){this.spinner="circle",this.scale=1}parse(t){At(t)?this.spinner=Mt(t,"circle"):(this.spinner=Mt(t.spinner,"circle"),this.scale=mt(t.scale,1))}}class Fc{constructor(t){Nc.set(this,void 0),$c(this,Nc,null!=t?t:"cui"),this.attribute=Hc(this,Nc)+"-spinner",f.spinner_circle='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z"></path></svg>',f.spinner_circle_double='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z"></path><path d="M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z"></path></svg>'}getStyle(){return null}get(t,e){return new qc(t,e,this.attribute,Hc(this,Nc))}}Nc=new WeakMap;class qc extends qs{constructor(t,e,i,s){super("CuiSpinnerHandler",t,i,new Rc,e),Bc.set(this,void 0),_c.set(this,void 0),$c(this,Bc,null),$c(this,_c,Et("{prefix}-animation-pause",s))}onInit(){$c(this,Bc,this.onEvent(Y,this.onPause.bind(this))),this.add()}onUpdate(){this.prevArgs&&this.args.spinner!==this.prevArgs.spinner&&this.add()}onDestroy(){this.removeIfAnyExisists(),this.detachEvent(Y,Hc(this,Bc))}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}add(){const t=at(this.args.spinner)?f["spinner_"+this.args.spinner]:null;if(!at(t))return void this._log.warning("Incorrect spinner name: "+this.args.spinner);this.removeIfAnyExisists();const e=new Xn(t).setScale(this.args.scale).build();this.mutate(this.addSpinner,e,this.args.spinner)}removeIfAnyExisists(){let t=this.element.querySelector("svg");t&&t.remove()}onPause(t){this.fetch(()=>{t&&!this.helper.hasClass(Hc(this,_c),this.element)?this.helper.setClassesAs(this.element,Hc(this,_c)):this.helper.removeClassesAs(this.element,Hc(this,_c))}),this.emitEvent(K,t)}}Bc=new WeakMap,_c=new WeakMap;var Uc,zc,Vc,jc,Yc,Kc,Xc,Gc,Zc,Jc,Qc,tu,eu,iu,su,nu,ru,ou,hu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},au=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},lu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class cu{constructor(t,e){Uc.set(this,void 0),zc.set(this,void 0),au(this,Uc,t),au(this,zc,null!=e?e:300),this.targets="> li",this.timeout=lu(this,zc),this.links="",this.autoTimeout=-1,this.height="",this.animation="",this.loop=!1}parse(t){this.targets=":scope "+Mt(t.targets,"> li"),this.timeout=mt(t.timeout,lu(this,zc)),this.links=t.links,this.autoTimeout=mt(t.autoTimeout,-1),this.height=Mt(t.height,"auto"),this.animation=Mt(t.animation,"slide"),this.loop=Ct(t.loop,!1)}}Uc=new WeakMap,zc=new WeakMap;class uu{constructor(t){this.attribute=(null!=t?t:"cui")+"-slider"}getStyle(){return null}get(t,e){return new du(t,e,this.attribute)}}class du extends zs{constructor(t,e,i){super("CuiSliderHandler",t,i,new cu(e.setup.prefix,e.setup.animationTime),e),Vc.set(this,void 0),jc.set(this,void 0),Yc.set(this,void 0),Kc.set(this,void 0),Xc.set(this,void 0),Gc.set(this,void 0),Zc.set(this,void 0),Jc.set(this,void 0),Qc.set(this,void 0),tu.set(this,void 0),eu.set(this,void 0),iu.set(this,void 0),su.set(this,void 0),nu.set(this,void 0),ru.set(this,void 0),ou.set(this,void 0),au(this,Vc,[]),au(this,jc,-1),au(this,Qc,-1),au(this,Yc,[]),au(this,Xc,null),au(this,ou,null),au(this,Gc,!1),au(this,Zc,-1),au(this,Jc,0),au(this,tu,null),au(this,eu,.4),au(this,iu,new Sn),au(this,su,new Sn),lu(this,iu).setOnFinish(this.onAnimationFinish.bind(this)),au(this,ru,0),au(this,Kc,new fo(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),au(this,nu,bs[this.args.animation])}onInit(){au(this,Xc,this.onEvent(N,this.onPushSwitch.bind(this))),au(this,ou,this.onEvent(V,this.onMove.bind(this))),this.getTargets(),this.getLinks(),this.getActiveIndex(),this.setLinkActive(-1,lu(this,jc)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(lu(this,Vc)[lu(this,jc)]))}),au(this,Kc,new fo(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),au(this,nu,bs[this.args.animation]),this.startTask()}onUpdate(){this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(lu(this,Vc)[lu(this,jc)]))}),au(this,nu,bs[this.args.animation]),this.startTask()}onDestroy(){lu(this,Kc).stop(),this.detachEvent(N,lu(this,Xc)),this.detachEvent(V,lu(this,ou))}onMutation(t){}onMove(t){if(this.isLocked||!lu(this,nu))return;let e=lu(this,Vc)[lu(this,jc)];switch(t.type){case"down":if(lu(this,Gc)||!e.contains(t.target))return;au(this,Gc,!0),au(this,Zc,t.x),lu(this,iu).setElement(e),this.helper.setClassesAs(document.body,v),t.event.cancelable&&t.event.preventDefault();break;case"up":if(!lu(this,Gc))break;this.isLocked=!0;let i=Math.abs(lu(this,Jc)),s=i*this.args.timeout,n=i<=lu(this,eu);lu(this,iu).finish(i,s,n),lu(this,su).finish(i,s,n),this.helper.removeClassesAs(document.body,v),au(this,Gc,!1);break;case"move":if(!lu(this,Gc))break;let r=(t.x-lu(this,Zc))/e.offsetWidth;if(Math.abs(r-lu(this,Jc))<.02)break;let o=Lt(lu(this,Jc)>0?"next":"prev",lu(this,jc),lu(this,ru));au(this,Jc,this.adjustMoveRatio(r)),o!==lu(this,Qc)&&(lu(this,tu)&&this.helper.removeClass(p,lu(this,tu)),au(this,tu,lu(this,Vc)[o]),au(this,Qc,o),lu(this,su).setElement(lu(this,tu)),lu(this,su).setProps(lu(this,Jc)>0?lu(this,nu).previous.right:lu(this,nu).previous.left),lu(this,iu).setProps(lu(this,Jc)>0?lu(this,nu).current.right:lu(this,nu).current.left),this.mutate(()=>{lu(this,tu)&&this.helper.setClass(p,lu(this,tu))})),this.mutate(()=>{lu(this,iu).update(Math.abs(lu(this,Jc))),lu(this,su).update(Math.abs(lu(this,Jc)))}),t.event.cancelable&&t.event.preventDefault()}}adjustMoveRatio(t){return this.args.loop?t:lu(this,jc)===lu(this,ru)-1&&t>0||0===lu(this,jc)&&t<0?0:t}switch(t){return hu(this,void 0,void 0,(function*(){return!this.isLocked&&(this.onPushSwitch(t),!0)}))}onAnimationFinish(t,e,i){this.isLocked=!1;let s=lu(this,Vc)[lu(this,Qc)],n=lu(this,Vc)[lu(this,jc)];e?(at(lu(this,tu))&&(this.helper.removeClass(p,lu(this,tu)),this.helper.removeAttribute("style",lu(this,tu))),this.helper.removeAttribute("style",n),au(this,Qc,-1),au(this,tu,null),au(this,Zc,-1),au(this,Jc,0)):lu(this,Qc)>-1&&this.mutate(()=>{this.helper.removeClass(p,s),this.helper.setClass(this.activeClassName,s),this.helper.removeClass(this.activeClassName,n),this.helper.removeAttribute("style",n),this.helper.removeAttribute("style",s),this.setLinkActive(lu(this,jc),lu(this,Qc)),this.emitEvent(B,{timestamp:Date.now(),index:lu(this,Qc)}),au(this,jc,lu(this,Qc)),au(this,Qc,-1),au(this,tu,null),au(this,Zc,-1),au(this,Jc,0)}),this.startTask()}onPushSwitch(t){if(!at(t)||this.isLocked||!lu(this,nu)||!this.args.loop&&0===lu(this,jc)&&"prev"===t||!this.args.loop&&lu(this,jc)===lu(this,ru)-1&&"next"===t)return;this.isLocked=!0;let e=Lt(t,lu(this,jc),lu(this,ru));if(e==lu(this,jc)||e<0||e>=lu(this,Vc).length)return this._log.warning(`Index ${t} is not within the suitable range`),!1;au(this,Qc,e);let i=lu(this,Vc)[lu(this,jc)],s=lu(this,Vc)[lu(this,Qc)];lu(this,iu).setElement(i),lu(this,su).setElement(s),lu(this,iu).setProps("prev"===t?lu(this,nu).current.left:lu(this,nu).current.right),lu(this,su).setProps("prev"===t?lu(this,nu).previous.left:lu(this,nu).previous.right),this.mutate(()=>{lu(this,iu).finish(0,this.args.timeout,!1),lu(this,su).finish(0,this.args.timeout,!1),this.helper.setClass(p,s)})}getActiveIndex(){au(this,jc,at(lu(this,Vc))?lu(this,Vc).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return at(this.args.height)&&"auto"!==this.args.height?this.args.height:xt(t)+"px"}getTargets(){let t=this.element.querySelectorAll(this.args.targets);au(this,Vc,t.length>0?[...t]:[]),au(this,ru,lu(this,Vc).length)}getLinks(){au(this,Yc,at(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}setLinkActive(t,e){at(lu(this,Yc))&&this.mutate(()=>{kt(t,0,lu(this,Yc).length-1)&&this.helper.removeClass(this.activeClassName,lu(this,Yc)[t]),kt(e,0,lu(this,Yc).length-1)&&this.helper.setClass(this.activeClassName,lu(this,Yc)[e])})}startTask(){lu(this,Kc).stop(),this.args.autoTimeout&&lu(this,Kc).start()}}Vc=new WeakMap,jc=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,Xc=new WeakMap,Gc=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,Qc=new WeakMap,tu=new WeakMap,eu=new WeakMap,iu=new WeakMap,su=new WeakMap,nu=new WeakMap,ru=new WeakMap,ou=new WeakMap;var pu,gu,vu,fu,mu,wu,ku,yu,bu,Cu,Mu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Au=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Eu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wu{constructor(t,e){pu.set(this,void 0),gu.set(this,void 0),Au(this,pu,t),Au(this,gu,null!=e?e:300),this.targets="",this.in="",this.out="",this.timeout=Eu(this,gu),this.links="",this.switch="",this.autoTimeout=-1,this.height="",this.loop=!1}parse(t){this.targets=at(t.targets)?":scope "+t.targets:":scope  > *",this.in=Mt(t.in,Et(".{prefix}-switch-animation-default-in",Eu(this,pu))),this.out=Mt(t.out,Et(".{prefix}-switch-animation-default-out",Eu(this,pu))),this.timeout=mt(t.timeout,Eu(this,gu)),this.links=Mt(t.links,""),this.switch=Mt(t.switch,""),this.autoTimeout=mt(t.autoTimeout,-1),this.height=Mt(t.height,"auto"),this.loop=bt(t.loop)}}pu=new WeakMap,gu=new WeakMap;class Tu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switch"}getStyle(){return null}get(t,e){return new xu(t,e,this.attribute)}}class xu extends zs{constructor(t,e,i){super("CuiSwitchHandler",t,i,new Wu(e.setup.prefix,e.setup.animationTime),e),vu.set(this,void 0),fu.set(this,void 0),mu.set(this,void 0),wu.set(this,void 0),ku.set(this,void 0),yu.set(this,void 0),bu.set(this,void 0),Cu.set(this,void 0),Au(this,vu,[]),Au(this,fu,-1),Au(this,mu,[]),Au(this,wu,[]),Au(this,yu,null),Au(this,bu,Au(this,Cu,[])),Au(this,ku,new fo(this.args.autoTimeout,!0,this.switch.bind(this,"next")))}onInit(){Au(this,yu,this.onEvent(N,this.onPushSwitch.bind(this))),this.parseArguments(),this.getTargets(),this.getActiveIndex(),this.getSwitches(),this.setSwitchesActive(Eu(this,fu)),this.setLinkActive(-1,Eu(this,fu)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(Eu(this,vu)[Eu(this,fu)]))}),Au(this,ku,new fo(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),this.startTask()}onUpdate(){this.parseArguments(),this.getTargets(),this.getSwitches(),this.setSwitchesActive(Eu(this,fu)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(Eu(this,vu)[Eu(this,fu)]))}),this.startTask()}onDestroy(){Eu(this,ku).stop(),this.detachEvent(N,Eu(this,yu))}onMutation(t){this.getTargets(),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(Eu(this,vu)[Eu(this,fu)]))})}switch(t){return Mu(this,void 0,void 0,(function*(){if(this.isLocked)return!1;this.getSwitches(),this.getActiveIndex();let e=Lt(t,Eu(this,fu),Eu(this,vu).length);if(!this.args.loop&&("next"===t&&0===e||"prev"===t&&0===Eu(this,fu)))return this.logInfo("Switch blocked by loop settings","switch"),!1;if(e==Eu(this,fu)||e<0||e>=Eu(this,vu).length)return this.logWarning(`Index ${t} is not within the suitable range`,"switch"),!1;this.isLocked=!0,this.setSwitchesActive(e);let i=Eu(this,vu)[e];return yield this.actionsHelper.performSwitchAction(i,Eu(this,fu)>-1?Eu(this,vu)[Eu(this,fu)]:null,Eu(this,bu),Eu(this,Cu),()=>{i.classList.add(this.activeClassName),Eu(this,fu)>-1&&Eu(this,vu)[Eu(this,fu)].classList.remove(this.activeClassName),this.setLinkActive(Eu(this,fu),e),this.helper.setStyle(this.element,"height",this.getElementHeight(i)),this.startTask(),this.isLocked=!1},this.args.timeout),this.emitEvent(B,{timestamp:Date.now(),index:e}),!0}))}onPushSwitch(t){this.switch(t)}getActiveIndex(){Au(this,fu,at(Eu(this,vu))?Eu(this,vu).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return at(this.args.height)&&"auto"!==this.args.height?this.args.height:xt(t)+"px"}parseArguments(){Au(this,bu,Li.get(this.args.in)),Au(this,Cu,Li.get(this.args.out)),Au(this,mu,at(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}getTargets(){let t=this.element.querySelectorAll(this.args.targets);Au(this,vu,t.length>0?[...t]:[])}getSwitches(){let t=at(this.args.switch)?document.querySelectorAll(this.args.switch):null;Au(this,wu,[]),t&&t.forEach(t=>{Eu(this,wu).push(t)})}setLinkActive(t,e){at(Eu(this,mu))&&(kt(t,0,Eu(this,mu).length-1)&&this.helper.removeClass(this.activeClassName,Eu(this,mu)[t]),kt(e,0,Eu(this,mu).length-1)&&this.helper.setClass(this.activeClassName,Eu(this,mu)[e]))}setSwitchesActive(t){Eu(this,wu).forEach(e=>{this.emitLinkSwitch(e.$cuid,t)})}emitLinkSwitch(t,e){at(t)&&this.utils.bus.emit(N,t,e)}startTask(){Eu(this,ku).stop(),this.args.autoTimeout&&Eu(this,ku).start()}}vu=new WeakMap,fu=new WeakMap,mu=new WeakMap,wu=new WeakMap,ku=new WeakMap,yu=new WeakMap,bu=new WeakMap,Cu=new WeakMap;var Su,Lu,Iu,Pu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Du=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ou{constructor(){this.index="",this.target=""}parse(t){at(t)&&(this.target=t.target,this.index=t.index)}}class Nu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switcher"}getStyle(){return null}get(t,e){return new Bu(t,e,this.attribute)}}class Bu extends qs{constructor(t,e,i){super("CuiSwitcherHandler",t,i,new Ou,e),Su.set(this,void 0),Lu.set(this,void 0),Iu.set(this,void 0),Pu(this,Su,null),Pu(this,Lu,"UL"===t.tagName),this.onClickEvent=this.onClickEvent.bind(this),Pu(this,Iu,[])}onInit(){this.setEvents(),this.getTarget()}onUpdate(){this.getTarget()}onDestroy(){this.removeEvents()}getTarget(){at(this.args.target)||Pu(this,Su,null);let t=document.querySelector(this.args.target);at(t)&&Pu(this,Su,t.$cuid)}setEvents(){if(Du(this,Lu)){this.element.querySelectorAll("li > a").forEach((t,e)=>{let i=this.onListItemClick.bind(this,e);Du(this,Iu).push(i),t.addEventListener("click",i)})}else this.element.addEventListener("click",this.onClickEvent)}removeEvents(){if(Du(this,Lu)){this.element.querySelectorAll("li > a").forEach((t,e)=>{Du(this,Iu).length>e&&t.removeEventListener("click",Du(this,Iu)[e])}),Pu(this,Iu,[])}else this.element.removeEventListener("click",this.onClickEvent)}onClickEvent(t){this.getTarget(),at(this.args.index)&&this.onClick(this.args.index.trim())}onListItemClick(t,e){this.getTarget(),this.onClick(t)}onClick(t){at(Du(this,Su))&&this.utils.bus.emit(N,Du(this,Su),t)}}Su=new WeakMap,Lu=new WeakMap,Iu=new WeakMap;var _u,$u,Hu,Ru,Fu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Uu{constructor(){this.action="",this.target=""}parse(t){at(t)&&At(t)?this.action=t:(this.target=Mt(t.target,""),this.action=t.action)}}class zu{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new Vu(t,e,this.attribute)}}class Vu extends qs{constructor(t,e,i){super("CuiToggleHandler",t,i,new Uu,e),_u.set(this,void 0),$u.set(this,void 0),Hu.set(this,void 0),Ru.set(this,void 0),Fu(this,_u,this.element),Fu(this,$u,e),Fu(this,Hu,null),Fu(this,Ru,[]),this.onClick=this.onClick.bind(this)}onInit(){Fu(this,_u,this.getTarget()),Fu(this,Ru,Li.get(this.args.action)),this.element.addEventListener("click",this.onClick),Fu(this,Hu,this.onEvent(D,this.toggle.bind(this)))}onUpdate(){Fu(this,_u,this.getTarget()),Fu(this,Ru,Li.get(this.args.action))}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(D,qu(this,Hu))}toggle(){qu(this,_u)?(qu(this,Ru).forEach(t=>t.toggle(qu(this,_u),qu(this,$u))),this.emitEvent(O,{action:this.args.action,target:qu(this,_u),timestamp:Date.now()})):this.logError("Target in not provided","toggle")}onClick(t){this.toggle(),t.preventDefault()}getTarget(){var t;return this.args.target&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:this.element}}_u=new WeakMap,$u=new WeakMap,Hu=new WeakMap,Ru=new WeakMap;var ju,Yu,Ku,Xu,Gu,Zu,Ju,Qu,td,ed=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},id=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class sd{constructor(t){ju.set(this,void 0),ed(this,ju,Et(".{prefix}-animation-tooltip-in",t)),this.content="",this.width=150,this.margin=8,this.timeout=2e3,this.pos="",this.action=id(this,ju)}parse(t){At(t)?this.content=Mt(t,""):(this.content=Mt(t.content,""),this.width=mt(t.width,150),this.margin=mt(t.margin,8),this.pos=Mt(t.pos,""),this.action=Mt(t.action,id(this,ju)),this.timeout=mt(t.timeout,2e3))}}ju=new WeakMap;class nd{constructor(t){Yu.set(this,void 0),ed(this,Yu,null!=t?t:"cui"),this.attribute=id(this,Yu)+"-tooltip"}getStyle(){return null}get(t,e){return new rd(t,this.attribute,e,id(this,Yu))}}Yu=new WeakMap;class rd extends qs{constructor(t,e,i,s){super("CuiTooltipHandler",t,e,new sd(s),i),Ku.set(this,void 0),Xu.set(this,void 0),Gu.set(this,void 0),Zu.set(this,void 0),Ju.set(this,void 0),Qu.set(this,void 0),td.set(this,void 0),ed(this,Xu,void 0),ed(this,Qu,[]),ed(this,td,void 0),ed(this,Ju,Et("{prefix}-tooltip-data",s)),ed(this,Ku,new Kr(t)),id(this,Ku).setCallback(this.onHover.bind(this)),ed(this,Gu,8),ed(this,Zu,new ao),id(this,Zu).setPreferred("top-center")}onInit(){id(this,Ku).attach(),this.getDataFromArgs(),ed(this,td,new fo(this.args.timeout,!1,this.removeTooltip.bind(this)))}onUpdate(){this.getDataFromArgs(),id(this,td)&&id(this,td).setTimeout(this.args.timeout)}onDestroy(){this.removeTooltip(),id(this,Ku).detach()}onHover(t){t.isHovering?this.createTooltip():this.removeTooltip()}createTooltip(){if(at(id(this,Xu))||!at(this.args.content))return;const t=this.element.getBoundingClientRect();ed(this,Xu,new tc("div").setClasses(id(this,Ju)).build()),id(this,Xu).textContent=this.args.content,id(this,Xu).style.maxWidth=this.args.width+"px",document.body.appendChild(id(this,Xu)),this.mutate(()=>{if(!id(this,Xu))return;const e=id(this,Xu).getBoundingClientRect();id(this,Zu).setMargin(id(this,Gu));try{let[i,s]=id(this,Zu).calculate(t,e);id(this,Xu).style.top=s+"px",id(this,Xu).style.left=i+"px",this.toggleActions(),id(this,td)&&id(this,td).start()}catch(t){this.logError(t.message,"createTooltip",t)}})}removeTooltip(){id(this,td)&&id(this,td).stop(),this.mutate(()=>{at(id(this,Xu))&&(id(this,Xu).remove(),ed(this,Xu,void 0))})}getDataFromArgs(){id(this,Zu).setMargin(this.args.margin),id(this,Zu).setStatic(this.args.pos),ed(this,Qu,Li.get(this.args.action))}toggleActions(){id(this,Xu)&&id(this,Qu).forEach(t=>{t.toggle(id(this,Xu))})}}Ku=new WeakMap,Xu=new WeakMap,Gu=new WeakMap,Zu=new WeakMap,Ju=new WeakMap,Qu=new WeakMap,td=new WeakMap;var od,hd,ad,ld,cd,ud,dd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class gd{constructor(t,e,i){od.set(this,void 0),hd.set(this,void 0),ad.set(this,void 0),ld.set(this,void 0),cd.set(this,void 0),ud.set(this,void 0),dd(this,ld,t),dd(this,od,dd(this,ad,dd(this,hd,void 0))),dd(this,cd,null!=i?i:""),dd(this,ud,e)}createHeader(t,e,i){at(e)||(e=[]),at(i)||(i=[]);let s=new tc("div");s.setClasses(pd(this,ld)+"-dialog-header",...e),dd(this,od,s.build());let n=new tc("span").setClasses(this.getPrefixedString("-dialog-title")).build(t);pd(this,od).appendChild(n),this.appendChildrens(pd(this,od),...i)}createFooter(t,e){at(t)||(t=[]),at(e)||(e=[]),dd(this,ad,new tc("div").setClasses(this.getPrefixedString("-dialog-footer"),...t).build()),this.appendChildrens(pd(this,ad),...e)}createBody(t,e){at(t)||(t=[]),at(e)||(e=[]),dd(this,hd,new tc("div").setClasses(this.getPrefixedString("-dialog-body"),...t).build()),this.appendChildrens(pd(this,hd),...e)}build(t){let e=[this.getPrefixedString("-dialog")];pd(this,ud)&&e.push(this.getPrefixedString("-reverse-auto"));let i=new tc("div").setId(t).setClasses(...e).setAttributes({[this.getPrefixedString("-dialog")]:pd(this,cd)}).build(),s=new tc("div").setClasses(this.getPrefixedString("-dialog-container")).build();return pd(this,od)&&s.appendChild(pd(this,od)),pd(this,hd)&&s.appendChild(pd(this,hd)),pd(this,ad)&&s.appendChild(pd(this,ad)),i.appendChild(s),i}appendChildrens(t,...e){at(e)&&e.forEach(e=>t.appendChild(e))}getPrefixedString(t){return pd(this,ld)+t}}od=new WeakMap,hd=new WeakMap,ad=new WeakMap,ld=new WeakMap,cd=new WeakMap,ud=new WeakMap;var vd,fd,md,wd,kd,yd,bd,Cd,Md=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ad=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ed{constructor(t,e,i){vd.set(this,void 0),fd.set(this,void 0),md.set(this,void 0),wd.set(this,void 0),kd.set(this,void 0),Md(this,vd,{yes:i.onYes,no:i.onNo,cancel:i.onCancel,ok:i.onOk}),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,Md(this,fd,t),Md(this,md,e),this.reverse=!1,Md(this,kd,null),this.closeStr=Ad(this,fd).setup.prefix+"-close",this.iconStr=Ad(this,fd).setup.prefix+"-icon",Md(this,wd,void 0)}getId(){return Ad(this,md)}show(t){if(!Ad(this,fd))return;let e=document.getElementById(Ad(this,md));at(e)?this.updateElement(e):(e=this.createElement(),Ad(this,fd).interactions.mutate(()=>{t.appendChild(e)},null)),setTimeout(()=>{Md(this,wd,new Ri([e],Ad(this,fd)));let t=Ad(this,wd).on("closed",this.onClose.bind(this));Md(this,kd,t.length>0?t[0]:null),Ad(this,wd).emit("open")},50)}updateElement(t){Ad(this,fd).interactions.fetch(()=>{let e=t.querySelector(`.${this.prefix}-dialog-title`),i=t.querySelector(`.${this.prefix}-dialog-body>p`);Ad(this,fd).interactions.mutate(()=>{e&&(e.innerHTML=this.title),i&&(i.innerHTML=this.content)},null)},null)}onClose(t){try{if(at(t)&&t.state&&Ad(this,vd)&&at(Ad(this,vd)[t.state])){let e=Ad(this,vd)[t.state];e&&e()}}finally{null!=Ad(this,kd)&&(Ad(this,wd)&&Ad(this,wd).detach("closed",Ad(this,kd)),Md(this,kd,null)),Md(this,wd,void 0)}}}vd=new WeakMap,fd=new WeakMap,md=new WeakMap,wd=new WeakMap,kd=new WeakMap;class Wd extends Ed{constructor(t,e,i){var s;super(t,e,i),yd.set(this,void 0),Md(this,yd,e),this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new gd(this.prefix,this.reverse);return t.createHeader(this.title,[],[new tc("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new tc("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new tc("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new tc("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(Ad(this,yd))}}yd=new WeakMap;class Td extends Ed{constructor(t,e,i){var s;super(t,e,i),bd.set(this,void 0),Md(this,bd,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new gd(this.prefix,this.reverse);return t.createHeader(this.title,[]),t.createBody([],[new tc("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new tc("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(Ad(this,bd))}}bd=new WeakMap;class xd extends Ed{constructor(t,e,i){var s;super(t,e,i),Cd.set(this,void 0),Md(this,Cd,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new gd(this.prefix,this.reverse);return t.createHeader(this.title,[],[new tc("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new tc("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new tc("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new tc("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),t.build(Ad(this,Cd))}}Cd=new WeakMap;var Sd,Ld,Id,Pd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Dd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Od{constructor(){Sd.set(this,void 0),Ld.set(this,void 0),Id.set(this,void 0),this.name="alert-plugin",this.description="CuiAlertsPlugin",Pd(this,Sd,null),Pd(this,Ld,void 0),Pd(this,Id,Nt.get("CuiAlertsPlugin"))}init(t){Pd(this,Ld,t),this.detach(),Pd(this,Sd,Dd(this,Ld).bus.on(tt,this.onAlert.bind(this),{$cuid:this.name}))}destroy(){this.detach()}detach(){Dd(this,Sd)&&Dd(this,Ld)&&(Dd(this,Ld).bus.detach(tt,Dd(this,Sd)),Pd(this,Sd,null))}onAlert(t){if(!Dd(this,Ld))return void Dd(this,Id).error("Utils are not set");if(!this.validateEvent(t))return void Dd(this,Id).error("Event validation failed");let e=class{static get(t,e,i,s){return"Info"===e?new Td(s,t,i):"YesNoCancel"===e?new xd(s,t,i):"OkCancel"===e?new Wd(s,t,i):void 0}}.get(t.id,t.type,t.options,Dd(this,Ld));e?e.show(Dd(this,Ld).setup.root):Dd(this,Id).error("Possibly incorrect alert type")}validateEvent(t){return!!(t&&t.id&&t.type&&t.options)}}Sd=new WeakMap,Ld=new WeakMap,Id=new WeakMap;var Nd,Bd,_d=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$d=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Hd{constructor(){this.name="click-plugin",Nd.set(this,void 0),Bd.set(this,void 0),this.description="CuiWindowClickPlugin",_d(this,Nd,void 0),_d(this,Bd,this.onWindowClick.bind(this))}init(t){_d(this,Nd,t.bus),window.addEventListener("click",$d(this,Bd))}destroy(){window.removeEventListener("click",$d(this,Bd))}onWindowClick(t){$d(this,Nd)&&$d(this,Nd).emit(F,null,t)}}Nd=new WeakMap,Bd=new WeakMap;var Rd,Fd,qd,Ud,zd,Vd,jd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Yd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kd{constructor(t){Rd.set(this,void 0),Fd.set(this,void 0),qd.set(this,void 0),Ud.set(this,void 0),zd.set(this,void 0),Vd.set(this,void 0),this.setup=Object.assign({keybordClass:"focus-visible",mouseClass:"focus-precise",touchClass:"focus-precise"},t),this.description="CuiLightFocusPlugin",this.name="focus-plugin",jd(this,Rd,void 0),jd(this,zd,this.onKeyDownEvent.bind(this)),jd(this,qd,this.onMouseEvent.bind(this)),jd(this,Ud,this.onTouchEvent.bind(this)),jd(this,Fd,"none"),jd(this,Vd,void 0)}init(t){jd(this,Rd,t.interactions),document.body.addEventListener("touchstart",Yd(this,Ud)),document.body.addEventListener("mousedown",Yd(this,qd)),window.addEventListener("keydown",Yd(this,zd))}onMouseEvent(t){"mouse"!==Yd(this,Fd)&&this.update("mouse")}onKeyDownEvent(t){"keyboard"!==Yd(this,Fd)&&this.update("keyboard")}onTouchEvent(t){"touch"!==Yd(this,Fd)&&this.update("touch")}update(t){let e=this.getClass(t);this.setClasses(e,Yd(this,Vd),()=>{jd(this,Vd,e),jd(this,Fd,t)})}getClass(t){switch(t){case"keyboard":return this.setup.keybordClass;case"mouse":return this.setup.mouseClass;case"touch":return this.setup.touchClass;default:return}}setClasses(t,e,i){Yd(this,Rd)&&t!==e&&Yd(this,Rd).fetch(()=>{let s=t&&document.body.classList.contains(t),n=e&&document.body.classList.contains(e);Yd(this,Rd).mutate(()=>{s||document.body.classList.add(t),n&&document.body.classList.remove(e),i()},null)},null)}destroy(){document.body.removeEventListener("touchstart",Yd(this,Ud)),document.body.removeEventListener("mousedown",Yd(this,qd)),window.removeEventListener("keydown",Yd(this,zd))}}Rd=new WeakMap,Fd=new WeakMap,qd=new WeakMap,Ud=new WeakMap,zd=new WeakMap,Vd=new WeakMap;var Xd,Gd,Zd,Jd,Qd,tp,ep,ip=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class np{constructor(t,e){Xd.set(this,void 0),Gd.set(this,void 0),Zd.set(this,void 0),Jd.set(this,void 0),Qd.set(this,void 0),tp.set(this,void 0),ep.set(this,void 0),ip(this,Zd,!1),ip(this,Jd,!0),ip(this,Qd,!1),ip(this,Xd,void 0),ip(this,Gd,null!=e?e:[]),ip(this,tp,this.onKeyDown.bind(this)),ip(this,ep,this.onKeyUp.bind(this))}setCallback(t){ip(this,Xd,t)}isInProgress(){return sp(this,Zd)}attach(){document.addEventListener("keydown",sp(this,tp)),sp(this,Jd)&&document.addEventListener("keyup",sp(this,ep)),ip(this,Qd,!0)}detach(){document.removeEventListener("keydown",sp(this,tp)),sp(this,Jd)&&document.addEventListener("keyup",sp(this,ep)),ip(this,Qd,!1)}isAttached(){return sp(this,Qd)}onKeyDown(t){if(!sp(this,Zd)){ip(this,Zd,!0);try{at(sp(this,Gd))&&!sp(this,Gd).includes(t.code)||!sp(this,Xd)||sp(this,Xd).call(this,t)}catch(t){console.error(t)}finally{sp(this,Jd)||ip(this,Zd,!1)}}}onKeyUp(t){ip(this,Zd,!1)}}Xd=new WeakMap,Gd=new WeakMap,Zd=new WeakMap,Jd=new WeakMap,Qd=new WeakMap,tp=new WeakMap,ep=new WeakMap;var rp,op,hp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ap=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class lp{constructor(t){rp.set(this,void 0),op.set(this,void 0),hp(this,op,t),hp(this,rp,new np(!0)),ap(this,rp).setCallback(this.onKeyDown.bind(this))}connect(){ap(this,rp).attach()}disconnect(){ap(this,rp).detach()}onKeyDown(t){ap(this,op).emit(R,null,{timestamp:Date.now(),event:t})}}rp=new WeakMap,op=new WeakMap;var cp,up=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pp{constructor(t){this.name="keys-plugin",cp.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t,up(this,cp,void 0)}init(t){up(this,cp,new lp(t.bus)),dp(this,cp).connect()}destroy(){dp(this,cp)&&dp(this,cp).disconnect()}}cp=new WeakMap;var gp,vp,fp,mp,wp,kp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},yp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class bp{constructor(t){gp.set(this,void 0),vp.set(this,void 0),fp.set(this,void 0),mp.set(this,void 0),wp.set(this,void 0),kp(this,gp,t),kp(this,fp,!1),kp(this,vp,void 0),kp(this,mp,!1),kp(this,wp,this.event.bind(this))}setCallback(t){kp(this,vp,t)}isInProgress(){return yp(this,mp)}attach(){window.matchMedia&&!yp(this,fp)&&yp(this,gp)&&(window.matchMedia(yp(this,gp)).addEventListener("change",yp(this,wp)),kp(this,fp,!0))}detach(){yp(this,fp)&&(window.matchMedia(yp(this,gp)).removeEventListener("change",yp(this,wp)),kp(this,fp,!1))}isAttached(){return yp(this,fp)}event(t){if(!yp(this,mp)&&yp(this,vp)){kp(this,mp,!0);try{yp(this,vp).call(this,t)}catch(t){console.error(t)}finally{kp(this,mp,!1)}}}}gp=new WeakMap,vp=new WeakMap,fp=new WeakMap,mp=new WeakMap,wp=new WeakMap;var Cp,Mp,Ap=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ep=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wp{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",Cp.set(this,void 0),Mp.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t,Ap(this,Mp,void 0),Ap(this,Cp,void 0)}init(t){Ap(this,Mp,t),this.setup.autoLight&&"dark"==(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")&&Ep(this,Mp).setLightMode("dark"),Ap(this,Cp,new bp("(prefers-color-scheme: dark)")),Ep(this,Cp).setCallback(this.onChange.bind(this)),Ep(this,Cp).attach()}destroy(){Ep(this,Cp)&&Ep(this,Cp).detach()}onChange(t){var e;if(!Ep(this,Mp))return;let i=Ep(this,Mp).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?Ep(this,Mp).setLightMode("dark"):Ep(this,Mp).setLightMode("light"))}}Cp=new WeakMap,Mp=new WeakMap;var Tp,xp,Sp,Lp,Ip,Pp,Dp,Op=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Np=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Bp{constructor(t,e){Tp.set(this,void 0),xp.set(this,void 0),Sp.set(this,void 0),Lp.set(this,void 0),Ip.set(this,void 0),Pp.set(this,void 0),Dp.set(this,void 0),Op(this,Tp,t),Op(this,xp,new jo),Np(this,xp).setCallback(this.onMove.bind(this)),Op(this,Ip,void 0),Op(this,Sp,!1),Op(this,Lp,null),Op(this,Pp,!1),Op(this,Dp,e)}attach(){Np(this,xp).isAttached()||(Np(this,xp).attach(),Op(this,Lp,Np(this,Tp).on(j,this.onMoveLock.bind(this))))}detach(){Np(this,xp).isAttached()&&(Np(this,xp).detach(),null!=Np(this,Lp)&&Np(this,Tp).detach(j,Np(this,Lp)))}isAttached(){return Np(this,xp).isAttached()}onMove(t){if(!Np(this,Sp))switch(t.type){case"down":Op(this,Ip,t),Op(this,Pp,!1);break;case"move":Np(this,Ip)&&!Np(this,Pp)&&(Np(this,Tp).emit(V,null,Np(this,Ip)),Op(this,Pp,!0)),Np(this,Tp).emit(V,null,t);break;case"up":if(Np(this,Tp).emit(V,null,t),Np(this,Ip)){if(Np(this,Dp)){const{diffX:e,diffY:i}=this.getGestureDiff(Np(this,Ip),t),s=this.calculateGesture(e,i);this.pushGestureEvent(s,e,i)}Op(this,Ip,void 0)}}}onMoveLock(t){Op(this,Sp,t)}getGestureDiff(t,e){return{diffX:e.x-t.x,diffY:e.y-t.y}}calculateGesture(t,e){const i=.3*window.innerWidth,s=Math.abs(t),n=Math.abs(e);if(s>n&&s>i)return t>0?"right":"left";return n>.3*window.innerHeight?e>0?"down":"up":"none"}pushGestureEvent(t,e,i){const s=this.getGestureEventName(t);s&&Np(this,Tp).emit(s,null,{timespstamp:Date.now(),changeX:e,changeY:i})}getGestureEventName(t){switch(t){case"up":return it;case"down":return et;case"left":return st;case"right":return nt;default:return null}}}Tp=new WeakMap,xp=new WeakMap,Sp=new WeakMap,Lp=new WeakMap,Ip=new WeakMap,Pp=new WeakMap,Dp=new WeakMap;var _p,$p,Hp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fp{constructor(t){this.name="move-observer-plugin",_p.set(this,void 0),$p.set(this,void 0),this.description="CuiMoveObserverPlugin",Hp(this,_p,void 0),Hp(this,$p,!1!==t)}init(t){Hp(this,_p,new Bp(t.bus,Rp(this,$p))),Rp(this,_p).attach()}destroy(){Rp(this,_p)&&Rp(this,_p).isAttached()&&Rp(this,_p).detach()}}_p=new WeakMap,$p=new WeakMap;var qp=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function Up(t,e,i,s){return qp(this,void 0,void 0,(function*(){let n=e.setup.prefix;if(!gt(t.title,t.id))return;const r=[zp(t.title,i,s)];return at(t.message)&&r.push(function(t,e){return new tc("div").setClasses(e.NOTIFICATION_BODY_CLS).setRawChildren(new tc("div").setTextContent(t))}(t.message,i)),at(t.actions)&&r.push(function(t,e,i){return new tc("div").setClasses(e.NOTIFICATION_FOOTER_CLS).setRawChildren(function(t,e){return new tc("ul").setRawChildren(...t.map(t=>new tc("li").setRawChildren(new tc("a").onEvent("click",()=>{try{t.callback()}catch(t){Nt.get("Notifications").exception(t,"OnActionClick")}finally{e()}}).setTextContent(t.name))))}(t,i))}(t.actions,i,s)),new tc("div").setClasses(i.NOTIFICATION_CLS,i.MARGIN_SMALL_VERTICAL,function(t,e){return`${t}-${null!=e?e:"default"}`}(n,t.type)).setId(t.id).setRawChildren(...r).build()}))}function zp(t,e,i){const s=new tc("span").setClasses(e.NOTIFICATION_TITLE_CLS).setTextContent(t),n=new Xn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 3,3 17,17"></path><path d="M 17,3 3,17"></path></svg>').build(),r=new tc("a").setClasses(e.ICON_CLS,e.NOTIFICATION_CLOSE_CLS).onEvent("click",i);n&&r.setChildren(n);return new tc("div").setClasses(e.NOTIFICATION_HEADER_CLS).setRawChildren(s,r)}var Vp,jp,Yp,Kp,Xp,Gp,Zp,Jp=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Qp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},tg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class eg{constructor(t){var e;this.name="notification-plugin",Vp.set(this,void 0),jp.set(this,void 0),Yp.set(this,void 0),Kp.set(this,void 0),Xp.set(this,void 0),Gp.set(this,void 0),Zp.set(this,void 0),this.description="CuiNotificationPlugin",Qp(this,jp,null),Qp(this,Vp,void 0),Qp(this,Yp,null),Qp(this,Kp,{}),Qp(this,Xp,{}),Qp(this,Gp,void 0),Qp(this,Zp,null!==(e=t.timeout)&&void 0!==e?e:5e3)}init(t){this.createCache(t.setup.prefix),this.getOrCreateContainer(t,document.body),Qp(this,Gp,new vi(t.interactions)),Qp(this,Vp,t),Qp(this,Yp,tg(this,Vp).bus.on(rt,this.onEvent.bind(this),{$cuid:this.name}))}destroy(){tg(this,jp)&&tg(this,jp).remove(),tg(this,Yp)&&tg(this,Vp)&&tg(this,Vp).bus.detach(rt,tg(this,Yp))}onEvent(t){(function(t){return at(t)&&gt(t.id,t.title)})(t)&&tg(this,Vp)&&tg(this,Gp)&&tg(this,jp)&&(tg(this,Xp)[t.id]||Up(t,tg(this,Vp),tg(this,Kp),()=>{this.onNotificationClose(t,!1,!0)}).then(e=>{if(!e)return;this.addNotificationToTree(e);let i=null;!1!==t.auto&&(i=this.setAutoClose(t)),tg(this,Xp)[t.id]={element:e,timeoutId:i},this.act(e,tg(this,Kp).NOTIFICATION_ANIMATION_IN).then(()=>{e.classList.add(tg(this,Kp).NOTIFICATION_ACTIVE_CLS)})}))}setAutoClose(t){return setTimeout(()=>{this.onNotificationClose(t,!0,!1)},tg(this,Zp))}addNotificationToTree(t){tg(this,Vp).interactions.mutate(()=>{0===tg(this,jp).children.length?tg(this,jp).appendChild(t):tg(this,jp).insertBefore(t,tg(this,jp).firstChild)},null)}onNotificationClose(t,e,i){if(!t||!tg(this,Gp)||!tg(this,Vp))return;const s=tg(this,Xp)[t.id];s&&(e||clearTimeout(s.timeoutId),this.act(s.element,tg(this,Kp).NOTIFICATION_ANIMATION_OUT).then(()=>{tg(this,Vp).bus.emit(ot,null,Object.assign(Object.assign({},t),{dissmissed:i})),s.element.remove(),delete tg(this,Xp)[t.id]}))}getOrCreateContainer(t,e){Qp(this,jp,document.getElementById("notifications-container")),tg(this,jp)||(Qp(this,jp,new tc("div").setClasses(Et("{prefix}-notification-container",t.setup.prefix)).build()),e.appendChild(tg(this,jp)))}createCache(t){Qp(this,Kp,{NOTIFICATION_CLS:Et("{prefix}-notification",t),NOTIFICATION_HEADER_CLS:Et("{prefix}-notification-header",t),NOTIFICATION_TITLE_CLS:Et("{prefix}-notification-title",t),NOTIFICATION_BODY_CLS:Et("{prefix}-notification-body",t),NOTIFICATION_FOOTER_CLS:Et("{prefix}-notification-footer",t),NOTIFICATION_ACTIVE_CLS:Et("{prefix}-active",t),NOTIFICATION_ANIMATION_IN:Et("{prefix}-notification-animation-in",t),NOTIFICATION_ANIMATION_OUT:Et("{prefix}-notification-animation-out",t),NOTIFICATION_ICON_CLS:Et("{prefix}-notification-icon",t),NOTIFICATION_CLOSE_CLS:Et("{prefix}-notification-close",t),ICON_CLS:Et("{prefix}-icon",t),MARGIN_SMALL_VERTICAL:Et("{prefix}-margin-small-vertical",t)})}act(t,e,i){return Jp(this,void 0,void 0,(function*(){const s=null!=i?i:tg(this,Vp).setup.animationTime,n=new Ai(e);return tg(this,Gp).performAction(t,n,null!=s?s:0)}))}}Vp=new WeakMap,jp=new WeakMap,Yp=new WeakMap,Kp=new WeakMap,Xp=new WeakMap,Gp=new WeakMap,Zp=new WeakMap;var ig,sg,ng=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class og{constructor(t){this.description="Auto print mode",this.name="auto-print",ig.set(this,void 0),sg.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t,ng(this,ig,void 0),ng(this,sg,void 0)}init(t){ng(this,sg,t),this.setup.autoPrint&&window.matchMedia&&window.matchMedia("print").matches&&rg(this,sg).setPrintMode(!0),ng(this,ig,new bp("print")),rg(this,ig).setCallback(this.onChange.bind(this)),rg(this,ig).attach()}destroy(){rg(this,ig)&&rg(this,ig).detach()}onChange(t){var e,i;if(!rg(this,sg))return;this.setup=rg(this,sg).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(t.matches?rg(this,sg).setPrintMode(!0):rg(this,sg).setPrintMode(!1))}}ig=new WeakMap,sg=new WeakMap;var hg,ag,lg,cg,ug,dg,pg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},gg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class vg{constructor(t,e,i,s){hg.set(this,void 0),ag.set(this,void 0),lg.set(this,void 0),cg.set(this,void 0),pg(this,hg,0),pg(this,lg,0),pg(this,ag,0),pg(this,cg,0),this.set(t,e,i,s)}static create(t){if(!at(t))throw new c("Given color value is not in a valid format");let e;if(t.startsWith("#"))e=new fg(t);else{if(!t.startsWith("rgb"))throw new c("Unknown color string format");e=new mg(t)}let i=e.parse();if(!i)throw new c("Color was not parsed");return i}set(t,e,i,s){pg(this,cg,ut(null!=s?s:1,0,1)),pg(this,lg,ut(i,0,255)),pg(this,hg,ut(t,0,255)),pg(this,ag,ut(e,0,255))}setRed(t){pg(this,hg,ut(t,0,255))}setGreen(t){pg(this,ag,ut(t,0,255))}setBlue(t){pg(this,lg,ut(t,0,255))}opacity(t){return pg(this,cg,ut(t,0,1)),this}lighten(t){return this.shade(t),this}darken(t){return this.shade(-t),this}invert(){return pg(this,lg,255-gg(this,lg)),pg(this,hg,255-gg(this,hg)),pg(this,ag,255-gg(this,ag)),this}getColorValue(t){t&&t.toLowerCase();switch(t){case"red":return gg(this,hg);case"green":return gg(this,ag);case"blue":return gg(this,lg);case"alpha":return gg(this,cg)}return-1}toCssString(){return`rgba(${gg(this,hg)}, ${gg(this,ag)}, ${gg(this,lg)}, ${gg(this,cg)})`}shade(t,e=!0){pg(this,hg,this.shadeSingle(gg(this,hg),t,e)),pg(this,ag,this.shadeSingle(gg(this,ag),t,e)),pg(this,lg,this.shadeSingle(gg(this,lg),t,e))}shadeSingle(t,e,i=!0){let s=(i?t:255)*e/100;return ut(t+Math.round(s),0,255)}clone(){return new vg(gg(this,hg),gg(this,ag),gg(this,lg),gg(this,cg))}}hg=new WeakMap,ag=new WeakMap,lg=new WeakMap,cg=new WeakMap;class fg{constructor(t){ug.set(this,void 0),pg(this,ug,t)}trim(){pg(this,ug,gg(this,ug)?gg(this,ug).trim():"")}isValid(){return at(gg(this,ug))&&gg(this,ug).startsWith("#")}parse(){let t=0,e=0,i=0,s=1,n=gg(this,ug).length;if(4===gg(this,ug).length)t=parseInt(gg(this,ug)[1]+gg(this,ug)[1],16),i=parseInt(gg(this,ug)[2]+gg(this,ug)[2],16),e=parseInt(gg(this,ug)[3]+gg(this,ug)[3],16);else if(t=parseInt(gg(this,ug)[1]+gg(this,ug)[2],16),i=parseInt(gg(this,ug)[3]+gg(this,ug)[4],16),e=parseInt(gg(this,ug)[5]+gg(this,ug)[6],16),n>7){let t=parseInt(gg(this,ug)[7]+gg(this,ug)[8],16);s=parseFloat((t/255).toFixed(2))}return new vg(t,i,e,s)}}ug=new WeakMap;class mg{constructor(t){dg.set(this,void 0),pg(this,dg,t)}trim(){pg(this,dg,at(gg(this,dg))?gg(this,dg).trim():"")}isValid(){return at(gg(this,dg))&&gg(this,dg).startsWith("rgb")}parse(){let t=gg(this,dg).length,e=(gg(this,dg).startsWith("rgba")?gg(this,dg).substring(5,t-1):gg(this,dg).substring(4,t-1)).split(",");if(!kt(e.length,3,4))return;let i=parseInt(e[0]),s=parseInt(e[1]),n=parseInt(e[2]),r=4===e.length?parseFloat(e[3]):1;return new vg(i,s,n,r)}}dg=new WeakMap;var wg,kg,yg,bg,Cg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Mg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};const Ag={light:{background:A.colorLightBackground,base:A.colorLightBase,active:A.colorLightActive,muted:A.colorLightMuted},dark:{background:A.colorDarkBackground,base:A.colorDarkBase,active:A.colorDarkActive,muted:A.colorDarkMuted}},Eg={accent:{base:A.colorAccent,muted:A.colorAccentMuted,active:A.colorAccentActive,shade:A.colorAccentShade,shadeDark:A.colorAccentShadeDark},secondary:{base:A.colorSecondary,muted:A.colorSecondaryMuted,active:A.colorSecondaryActive,shade:A.colorSecondaryShade,shadeDark:A.colorSecondaryShadeDark},error:{base:A.colorError,muted:A.colorErrorMuted,active:A.colorErrorActive,shade:A.colorErrorShade,shadeDark:A.colorErrorShadeDark},warning:{base:A.colorWarning,muted:A.colorWarningMuted,active:A.colorWarningActive,shade:A.colorWarningShade,shadeDark:A.colorWarningShadeDark},success:{base:A.colorSuccess,muted:A.colorSuccessMuted,active:A.colorSuccessActive,shade:A.colorSuccessShade,shadeDark:A.colorSuccessShadeDark}};class Wg{constructor(t,e){wg.set(this,void 0),kg.set(this,void 0),Cg(this,wg,Ag[t]),Cg(this,kg,e)}setBackgroundColor(t){this.setColor(Mg(this,wg).background,t)}setBaseColor(t){this.setColor(Mg(this,wg).base,t)}setActiveColor(t){this.setColor(Mg(this,wg).active,t)}setMutedColor(t){this.setColor(Mg(this,wg).muted,t)}setBaseColors(t){if(!Mg(this,wg))return;let e={};e[Mg(this,wg).background]=t.background?t.background.toCssString():"",e[Mg(this,wg).active]=t.active?t.active.toCssString():"",e[Mg(this,wg).muted]=t.muted?t.muted.toCssString():"",e[Mg(this,wg).base]=t.base?t.base.toCssString():"",Mg(this,kg).setProperties(e)}setColor(t,e){Mg(this,kg).setProperty(t,e.toCssString())}}wg=new WeakMap,kg=new WeakMap;class Tg{constructor(t,e){yg.set(this,void 0),bg.set(this,void 0),Cg(this,yg,e),Cg(this,bg,Eg[t])}setBaseColor(t){this.setColor(Mg(this,bg).base,t)}setMutedColor(t){this.setColor(Mg(this,bg).muted,t)}setActiveColor(t){this.setColor(Mg(this,bg).active,t)}setShadeColor(t){this.setColor(Mg(this,bg).shade,t)}setShadeDarkColor(t){this.setColor(Mg(this,bg).shadeDark,t)}setColors(t){if(!Mg(this,bg))return;let e={};e[Mg(this,bg).shade]=t.shade?t.shade.toCssString():"",e[Mg(this,bg).shadeDark]=t.shadeDark?t.shadeDark.toCssString():"",e[Mg(this,bg).active]=t.active?t.active.toCssString():"",e[Mg(this,bg).muted]=t.muted?t.muted.toCssString():"",e[Mg(this,bg).base]=t.base?t.base.toCssString():"",Mg(this,yg).setProperties(e)}setAutoColors(t){let e={};e[Mg(this,bg).base]=t.toCssString(),e[Mg(this,bg).shade]=t.lighten(30).toCssString(),e[Mg(this,bg).shadeDark]=t.darken(30).toCssString(),e[Mg(this,bg).active]=t.darken(10).toCssString(),e[Mg(this,bg).muted]=t.lighten(10).toCssString(),Mg(this,yg).setProperties(e)}setColor(t,e){Mg(this,yg).setProperty(t,e.toCssString())}}yg=new WeakMap,bg=new WeakMap;var xg,Sg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Lg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ig{constructor(t){xg.set(this,void 0),Sg(this,xg,t)}setProperty(t,e){gt(t,e)&&Lg(this,xg).interactions.mutate(()=>{Lg(this,xg).setProperty(t,e)},null)}setProperties(t){at(t)&&Lg(this,xg).interactions.mutate(()=>{for(let e in t)at(t[e])&&Lg(this,xg).setProperty(e,t[e])},null)}}xg=new WeakMap;var Pg,Dg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Og=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ng{constructor(t){Pg.set(this,void 0),Dg(this,Pg,new Ig(t))}setBaseFontSize(t,e){this.setBaseUnitValue(A.fontSize,t,e)}setAnimationTime(t,e){this.setBaseUnitValue(A.animationTime,t,null!=e?e:"ms")}setAnimationTimeLong(t,e){this.setBaseUnitValue(A.setAnimationTimeLong,t,null!=e?e:"ms")}setAnimationTimeShort(t,e){this.setBaseUnitValue(A.setAnimationTimeShort,t,null!=e?e:"ms")}setBaseLineHeight(t,e){this.setBaseUnitValue(A.lineHeight,t,e)}setBaseMargin(t,e){this.setBaseUnitValue(A.margin,t,e)}setBasePadding(t,e){this.setBaseUnitValue(A.padding,t,e)}setBaseBorderRadius(t,e){this.setBaseUnitValue(A.borderRadius,t,e)}setComponentSpace(t,e){this.setBaseUnitValue(A.componentSpace,t,e)}setAccordionIcon(t){at(t)&&this.setCSSVariable(A.accordionIcon,t)}setScrollbarWidth(t,e){this.setBaseUnitValue(A.scrollbarWidth,t,e)}setAppBackgroundColor(t){at(t)&&this.setCSSVariable(A.colorLightAppBackground,t.toCssString())}setDarkAppBackgroundColor(t){at(t)&&this.setCSSVariable(A.colorDarkAppBackground,t.toCssString())}getBaseColorsSetter(){return new Wg("light",Og(this,Pg))}getDarkBaseColorsSetter(){return new Wg("dark",Og(this,Pg))}getAccentThemeColorsSetter(){return new Tg("accent",Og(this,Pg))}getSecondaryThemeColorsSetter(){return new Tg("secondary",Og(this,Pg))}getErrorThemeColorsSetter(){return new Tg("error",Og(this,Pg))}getWarningThemeColorsSetter(){return new Tg("warning",Og(this,Pg))}getSuccessThemeColorsSetter(){return new Tg("success",Og(this,Pg))}setCSSVariable(t,e){Og(this,Pg).setProperty(t,e)}setBaseUnitValue(t,e,i){if(!at(e))return;let s=`${e}${null!=i?i:"px"}`;this.setCSSVariable(t,s)}}Pg=new WeakMap;var Bg,_g=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$g=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Hg{constructor(t){this.name="css-variables-plugin",Bg.set(this,void 0),this.description="CuiCSSVariablesPlugin",this.setup=t,_g(this,Bg,Nt.get("CuiCSSVariablesPlugin")),this.handler=void 0}init(t){this.handler=new Ng(t),t.bus.on("csschange",this.onCssChange.bind(this))}destroy(){}onCssChange(t){if(!this.handler)return;let e=null,i=null;switch(t.method){case"baseFontSize":if(!this.isArgNumber(t.arg))return;this.handler.setBaseFontSize(t.arg.value,t.arg.unit);break;case"baseLineHeight":if(!this.isArgNumber(t.arg))return;this.handler.setBaseLineHeight(t.arg.value,t.arg.unit);break;case"animationTime":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTime(t.arg.value,t.arg.unit);break;case"animationTimeLong":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTimeLong(t.arg.value,t.arg.unit);break;case"animationTimeShort":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTimeShort(t.arg.value,t.arg.unit);break;case"margin":if(!this.isArgNumber(t.arg))return;this.handler.setBaseMargin(t.arg.value,t.arg.unit);break;case"padding":if(!this.isArgNumber(t.arg))return;this.handler.setBasePadding(t.arg.value,t.arg.unit);break;case"borderRadius":if(!this.isArgNumber(t.arg))return;this.handler.setBaseBorderRadius(t.arg.value,t.arg.unit);break;case"componentSpace":if(!this.isArgNumber(t.arg))return;this.handler.setComponentSpace(t.arg.value,t.arg.unit);break;case"scrollbarWidth":if(!this.isArgNumber(t.arg))return;this.handler.setScrollbarWidth(t.arg.value,t.arg.unit);break;case"accordionIcon":if(!at(t.arg))return;this.handler.setAccordionIcon(t.arg);break;case"appLightBackground":if(!at(t.arg))return;this.handler.setAppBackgroundColor(vg.create(t.arg));break;case"appDarkBackground":case"appDarkBackground":if(!at(t.arg))return;this.handler.setDarkAppBackgroundColor(vg.create(t.arg));break;case"mainColorBackground":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setBackgroundColor(vg.create(t.arg.color));break;case"mainColor":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setBaseColor(vg.create(t.arg.color));break;case"mainColorMuted":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setMutedColor(vg.create(t.arg.color));break;case"mainColorActive":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setActiveColor(vg.create(t.arg.color));break;case"themeAutoColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setAutoColors(vg.create(t.arg.color));case"themeBaseColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setAutoColors(vg.create(t.arg.color));case"themeMutedColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setMutedColor(vg.create(t.arg.color));case"themeActiveColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setActiveColor(vg.create(t.arg.color));case"themeShadeColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setShadeColor(vg.create(t.arg.color));case"themeShadeDarkColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setShadeDarkColor(vg.create(t.arg.color));default:$g(this,Bg).warning("Unknown event method","onCssChange")}}isArgNumber(t){return at(t)&&at(t.value)}isArgColor(t){return at(t)&&at(t.palette)&&at(t.color)}getBaseColorSetter(t){if(!this.handler)return;switch(t.trim().toLowerCase()){case"light":return this.handler.getBaseColorsSetter();case"dark":return this.handler.getDarkBaseColorsSetter()}}getAccentColorSetter(t){if(!this.handler)return;switch(t.trim().toLowerCase()){case"accent":return this.handler.getAccentThemeColorsSetter();case"secondary":return this.handler.getSecondaryThemeColorsSetter();case"error":return this.handler.getErrorThemeColorsSetter();case"warning":return this.handler.getWarningThemeColorsSetter();case"success":return this.handler.getSuccessThemeColorsSetter();default:return}}}Bg=new WeakMap;var Rg,Fg,qg,Ug,zg,Vg,jg,Yg,Kg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gg{constructor(t,e){var i;Rg.set(this,void 0),Fg.set(this,void 0),qg.set(this,void 0),Ug.set(this,void 0),zg.set(this,void 0),Vg.set(this,void 0),jg.set(this,void 0),Yg.set(this,void 0),Kg(this,Rg,[]),Kg(this,Fg,[]),Kg(this,qg,window.innerWidth),Kg(this,Ug,!1),Kg(this,zg,(i=window.innerWidth)<=640?"small":i>640&&i<=960?"medium":i>960&&i<=1200?"large":"xlarge"),Kg(this,Vg,null!=e?e:0),Kg(this,jg,t),Kg(this,Yg,this.listener.bind(this))}observe(t){Xg(this,Rg).findIndex(e=>e===t)<0&&Xg(this,Rg).push(t)}unobserve(t){let e=Xg(this,Rg).findIndex(e=>e===t);e>=0&&Xg(this,Rg).splice(e,1)}connect(){window.addEventListener("resize",Xg(this,Yg))}disconnect(){window.removeEventListener("resize",Xg(this,Yg))}pushUpdateToItems(t){Xg(this,Rg).length<1||(Kg(this,Fg,[]),Xg(this,Rg).forEach(e=>{Xg(this,Fg).push(e.resize(t))}),Promise.all(Xg(this,Fg)),Kg(this,Fg,[]))}listener(t){if(Xg(this,Ug))return;Kg(this,Ug,!0);const e=window.innerWidth-Xg(this,qg);if(Math.abs(e)>=Xg(this,Vg)){const t=vt(window.innerWidth);if(t!==Xg(this,zg)){const e={current:t,previous:Xg(this,zg),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now()};Xg(this,jg).emit(x,"",e),this.pushUpdateToItems(e),Kg(this,zg,t)}}Kg(this,Ug,!1)}}Rg=new WeakMap,Fg=new WeakMap,qg=new WeakMap,Ug=new WeakMap,zg=new WeakMap,Vg=new WeakMap,jg=new WeakMap,Yg=new WeakMap;var Zg,Jg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class tv{constructor(t){this.name="resize-observer-plugin",Zg.set(this,void 0),this.description="CuiResizeObserverPlugin",Jg(this,Zg,void 0),this.setup=t}init(t){var e;Jg(this,Zg,new Gg(t.bus,null!==(e=this.setup.resizeThreshold)&&void 0!==e?e:20)),Qg(this,Zg).connect()}destroy(){Qg(this,Zg)&&Qg(this,Zg).disconnect()}}Zg=new WeakMap;var ev,iv,sv,nv,rv,ov,hv,av,lv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},cv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},uv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dv{constructor(t,e,i){ev.set(this,void 0),iv.set(this,void 0),sv.set(this,void 0),nv.set(this,void 0),rv.set(this,void 0),ov.set(this,void 0),hv.set(this,void 0),av.set(this,void 0),cv(this,ev,t),cv(this,iv,`.${e}-toast`),cv(this,sv,e+"-toast"),cv(this,nv,e+"-active"),cv(this,rv,i),cv(this,ov,!1),cv(this,hv,e+"-toast-animation-in"),cv(this,av,e+"-toast-animation-out")}show(t){return lv(this,void 0,void 0,(function*(){if(uv(this,ov))return!1;cv(this,ov,!0);let e=document.querySelector(uv(this,iv));return at(e)||(e=document.createElement("div"),e.classList.add(uv(this,sv)),document.body.appendChild(e),yield ct(10)),uv(this,ev).mutate(()=>{e.textContent=t,e.classList.add(p),e.classList.add(uv(this,hv))},this),yield ct(uv(this,rv)),uv(this,ev).mutate(()=>{e.classList.remove(p),e.classList.remove(uv(this,hv)),e.classList.add(uv(this,nv))},this),yield ct(3e3),uv(this,ev).mutate(()=>{e.classList.add(p),e.classList.add(uv(this,av))},this),setTimeout(()=>{uv(this,ev).mutate(()=>{e.classList.remove(p),e.classList.remove(uv(this,av)),e.classList.remove(uv(this,nv))},this),cv(this,ov,!1)},uv(this,rv)),!0}))}}ev=new WeakMap,iv=new WeakMap,sv=new WeakMap,nv=new WeakMap,rv=new WeakMap,ov=new WeakMap,hv=new WeakMap,av=new WeakMap;var pv,gv,vv,fv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wv{constructor(t){this.name="toast-plugin",pv.set(this,void 0),gv.set(this,void 0),vv.set(this,void 0),this.description="CuiToastPlugin",this.setup=t,fv(this,pv,void 0),fv(this,gv,null),fv(this,vv,void 0)}init(t){var e;fv(this,vv,t),mv(this,pv)||fv(this,pv,new dv(t.interactions,t.setup.prefix,null!==(e=t.setup.animationTime)&&void 0!==e?e:300)),fv(this,gv,t.bus.on(Z,this.onToastShow.bind(this),{$cuid:this.name}))}destroy(){mv(this,vv)&&mv(this,gv)&&(mv(this,vv).bus.detach(Z,mv(this,gv)),fv(this,gv,null))}onToastShow(t){mv(this,pv)&&mv(this,vv)&&(mv(this,vv).bus.emit(J,null,[]),mv(this,pv).show(t).then(()=>{mv(this,vv)&&mv(this,vv).bus.emit(Q,null,[])}))}}pv=new WeakMap,gv=new WeakMap,vv=new WeakMap;var kv,yv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},bv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Cv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};kv=new WeakMap;const Mv="0.3.8";window.cuiInit=new class{constructor(){kv.set(this,void 0),bv(this,kv,!1)}init(t){var e,i;return yv(this,void 0,void 0,(function*(){if(Cv(this,kv))return console.log("Module is already initialized"),!1;const s=new Ws,n=function(t){var e;let i=!t||t.autoLight,s=!t||t.autoPrint;return[new Wp({autoLight:i}),new og({autoPrint:s}),new pp({}),new Hd,new Hg({}),new Fp,new tv({}),new wv({}),new Od,new eg({timeout:t.notifcationTimeout}),new Kd(null!==(e=t.focusSetup)&&void 0!==e?e:{})]}({autoLight:!0,autoPrint:!0}),r=function(t){let e=null==t?void 0:t.prefix;return[new yh(e),new nd(e),new rr(e),new Fc(e),new ml(e),new Fl(e),new Nh(e),new Ga(e),new gr(e),new zu(e),new Br(e),new Yh(e),new sn(e),new Bo(e),new Fa(e),new Tu(e),new Nu(e),new gh(e),new uu(e),new qn(e),new Ar(e),new Dc(e),new cl(e)]}({prefix:null===(e=t.setup)||void 0===e?void 0:e.prefix});let o=n;t.plugins&&(o=Object.assign(Object.assign({},n),t.plugins));let h=yield s.init(Object.assign(Object.assign({},t),{plugins:o,components:at(t.components)?[...r,...t.components]:r}));return h.result?(bv(this,kv,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(i=h.message)&&void 0!==i?i:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}}])}));
//# sourceMappingURL=index.min.js.map