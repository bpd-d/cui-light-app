!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light-app",[],e):"object"==typeof exports?exports["cui-light-app"]=e():t["cui-light-app"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"CUI_LIGHT_VERSION",(function(){return Cv})),i.d(e,"CuiInstance",(function(){return Ji}));class s extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class n extends s{constructor(t){super("ArgumentError",t)}}class r extends s{constructor(t){super("CuiInstanceInitError",t)}}class o extends s{constructor(t){super("RegisterElementError",t)}}class h extends s{constructor(t){super("AnimatorError",t)}}class a extends s{constructor(t){super("CSSVariableError",t)}}class l extends s{constructor(t){super("CuiPositionError",t)}}const c="dark",u="animation-progress",d="print",p="swiping-on",v={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},f="--{prefix}-animation-time",g="--{prefix}-animation-time-long",m="--{prefix}-animation-time-short";class w{}w.logLevel="none",w.prefix="cui";const k="instance-initialized",y="instance-finished",b="resize",M="open",C="opened",E="close",W="closed",A="toggle",T="toggled",x="switch",L="switched",S="scroll",I="targetchange",P="intersection",O="keydown",N="windowclick",D="offset",H="progresschange",_="progresschanged",R="globalmove",$="movelock",F="pause",B="paused",q="sorted",z="sortstart",V="toast",U="toastshow",j="toasthidden",Y="alert",X="gesture-down",K="gesture-up",G="gesture-left",Z="gesture-right",J="notify",Q="notified",tt=function*(){let t=0;for(;;){((yield t++)||t>2e5)&&(t=0)}}();function et(t,e=!0){return null!=t&&(!e||!function(t){if("string"==typeof t)return 0===t.length;if("boolean"==typeof t)return t;if(Array.isArray(t))return 0===t.length;return!1}(t))}function it(t,e){if(!et(t)||!et(e))throw new n("Missing argument value");return`${t}-${e}`}function st(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function nt(t,e,i){return t<e?e:t>i?i:t}function rt(t,e,i,s){return null==t||isNaN(t)?s:nt(t,e,i)}function ot(t){return et(t)?`[${t.join("],[")}]`:""}function ht(...t){if(!et(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!et(t[i]))return!1;return!0}function at(t){let e="none";return t>=640&&(e="small"),t>=960&&(e="medium"),t>=1200&&(e="large"),t>=1600&&(e="xlarge"),e}function lt(t){let e={};return et(t)?(e=function(t){let e=null;if(et(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error((i="An exception occured",s="Functions",n="parseJsonString",`[${(new Date).toLocaleString()}][${null!=s?s:"-"}][${null!=n?n:"-"}][${i}]`),t)}return e}var i,s,n;return null}(t.trim()),et(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=bt(t),s=void 0,n="";i.length<2||(s=i[0].trim(),n=i[1].trim(),s&&(e[s]=n.replace("U+0003B",";")))})):e=t),e):e}function ct(t,e){let i=parseInt(t);return isNaN(i)?e:i}function ut(t,e){return et(t)&&et(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function dt(t,e,i){return et(t)&&t>=e&&t<=i}function pt(t,e){return ht(t,e)?lt(t.getAttribute(e)):null}function vt(t){return!!et(t)&&["y","t","true","yes"].includes(t.toLowerCase())}function ft(t,e){return et(t)?t.replace("{prefix}",null!=e?e:""):t}function gt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function mt(t){if(!et(t))return;let e=t.parentElement;return et(e)&&et(e.$cuid)?e:mt(e)}function wt(t){let e=0;return t?(Array.from(t.children).forEach(t=>{e+=t.getBoundingClientRect().height}),e>0?e+4:e):-1}function kt(t,e){if(ht(t,e))for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}function yt(t,e,i){let s=-1;switch(t){case"prev":s=e<=0?i-1:e-1;break;case"next":s=e<i-1?e+1:0;break;case"first":s=0;break;case"last":s=i-1;default:s=ct(t,-1)}return s}function bt(t){let e=[];if(!et(t))return e;let i=t.split(":");return 1===i.length?i:[i.shift(),i.join(":")]}function Mt(t,e,...i){return i.includes(t)?t:e}function Ct(t){return":scope "+t}class Et{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.prefix="cui",this.plugins={},this.root=document.body}fromInit(t){var e;return this.prefix=null!==(e=t.prefix)&&void 0!==e?e:"cui",this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this.root=t.root,this}}class Wt{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.root=document.body,this.busSetup=void 0,this.development=void 0}}var At,Tt,xt,Lt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},St=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class It{constructor(t,e){At.set(this,void 0),Tt.set(this,void 0),xt.set(this,void 0),Lt(this,Tt,t),Lt(this,At,"-"),Lt(this,xt,null!=e?e:w.logLevel)}registerElement(t,e,i){Lt(this,At,e),console.log(this.prepString("Register element: "+e,"debug",i))}unregisterElement(t,e){Lt(this,At,"-"),console.log(this.prepString("Unregister element: "+t,"debug",e))}setProperty(t,e,i,s){}pushState(t,e,i,s,n){this.logByType(i,s,n)}log(t,e,i){this.logByType(t,e,i)}debug(t,e){"debug"===St(this,xt)&&console.log(this.prepString(t,"debug",e))}warning(t,e){"warning"!==St(this,xt)&&"debug"!==St(this,xt)||console.warn(this.prepString(t,"warning",e))}error(t,e){"error"!==St(this,xt)&&"debug"!==St(this,xt)&&"warning"!==St(this,xt)||console.error(this.prepString(t,"error",e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,"exception",e)),"debug"===St(this,xt)&&console.error(t.stack)}setId(t){t&&Lt(this,At,t)}prepString(t,e,i){return`[${(new Date).toLocaleString()}][${e}][${St(this,Tt)}][${null!=i?i:"-"}][${St(this,At)}][${t}]`}logByType(t,e,i){switch(t){case"debug":this.debug(e,i);break;case"warning":this.warning(e,i);break;case"error":this.error(e,i)}}}At=new WeakMap,Tt=new WeakMap,xt=new WeakMap;class Pt{get(t){return new It(t)}}class Ot{static get(t){return w.devTool||(w.devTool=new Pt),w.devTool.get(t)}}var Nt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function Dt(t,e){return e.filter(e=>t.hasAttribute&&t.hasAttribute(e.attribute))}function Ht(t,e,i){return Nt(this,void 0,void 0,(function*(){if(!ht(t,e,i))return!1;let s=t;s.$cuid||(s.$cuid=t.hasAttribute("cuid")?t.getAttribute("cuid"):function(t){return`${et(t)?t:"cui-element"}-${tt.next().value}`}(t.tagName),t.setAttribute("cuid",s.$cuid));for(let t of e)yield Rt(s,t,i,pt(s,t.attribute));return!0}))}function _t(t){return Nt(this,void 0,void 0,(function*(){const e=t;if(!e.$handlers)return!1;for(let t in e.$handlers)yield Ft(e,t);return!0}))}function Rt(t,e,i,s){return Nt(this,void 0,void 0,(function*(){if(t.$handlers||(t.$handlers={}),t.$handlers[e.attribute])return!1;try{let n=e.get(t,i);t.$handlers[e.attribute]=n,yield t.$handlers[e.attribute].handle(s)}catch(t){throw new o(`An error occured during [${e.attribute}] initialization: ${t.message}`)}return!0}))}function $t(t,e,i){return Nt(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let s=t.$handlers[e];if(!s)return!1;try{s.refresh&&(yield s.refresh(i))}catch(t){throw new o(`An error occured during [${e}] update: ${t.message}`)}return!0}))}function Ft(t,e){return Nt(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let i=t.$handlers[e];if(!i)return!1;try{yield i.destroy()}catch(t){throw new o(`An error occured during [${e}] destroy: ${t.message}`)}return!0}))}var Bt,qt,zt,Vt,Ut,jt,Yt,Xt,Kt,Gt,Zt,Jt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Qt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},te=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ee{constructor(t,e){Bt.set(this,void 0),qt.set(this,void 0),zt.set(this,void 0),Vt.set(this,void 0),Ut.set(this,void 0),jt.set(this,void 0),Qt(this,Bt,void 0),this.plugins=void 0,Qt(this,qt,void 0),Qt(this,zt,t),this._log=Ot.get("CuiMutationObserver"),Qt(this,Vt,[]),Qt(this,Ut,e),Qt(this,jt,"")}setPlugins(t){return this.plugins=t,this}setComponents(t){return Qt(this,Vt,t),this}setAttributes(t){return Qt(this,qt,{attributes:!0,subtree:!0,childList:!0,attributeFilter:t}),Qt(this,jt,ot(t)),this}start(){return this._log.debug("Starting"),te(this,qt)?(Qt(this,Bt,new MutationObserver(this.mutationCallback.bind(this))),te(this,Bt).observe(te(this,zt),te(this,qt)),this._log.debug("Started"),this):(this._log.error("Cannot start - options are not defined"),this)}stop(){return this._log.debug("Stopping"),te(this,Bt)?(te(this,Bt).disconnect(),Qt(this,Bt,void 0),this._log.debug("Stopped"),this):(this._log.debug("Observer not available"),this)}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;if(!ht(t.attributeName,e)){this._log.error("Mutation attribute doesn't not exisist");break}this.handeComponentUpdate(t.attributeName,e);break;case"childList":this.handleChildListMutation(t)}et(this.plugins)&&this.plugins.onMutation(t).then(()=>{})})}handeComponentUpdate(t,e){let i=pt(e,t);$t(e,t,i).then(e=>{this._log.debug("Component: "+t+" updated with: "+e,"handeComponentUpdate")}).catch(t=>{this._log.exception(t)})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(this._log.debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes).then(t=>{this._log.debug("Added nodes: "+e+" with status: "+t)}).catch(t=>{this._log.exception(t)})):i>0&&(this._log.debug("Removing nodes: "+i),this.handleRemovedNodes(t.removedNodes).then(t=>{this._log.debug("Removed nodes: "+i+" with status: "+t)}).catch(t=>{this._log.exception(t)}))}handleAddedNodes(t){return Jt(this,void 0,void 0,(function*(){for(let e of t){yield this.handleAddedNode(e);let t=e,i=t.hasChildNodes()?t.querySelectorAll(te(this,jt)):null;et(i)&&(this._log.debug("Additional nodes to add: "+i.length),yield this.handleAddedChildren(i))}return!0}))}handleAddedChildren(t){return Jt(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield this.handleAddedNode(i));return e}))}handleAddedNode(t){return Jt(this,void 0,void 0,(function*(){let e=Dt(t,te(this,Vt));return Ht(t,e,te(this,Ut))}))}handleRemovedNodes(t){return Jt(this,void 0,void 0,(function*(){for(let e of t){yield _t(e);let t=e,i=e.hasChildNodes()?t.querySelectorAll(te(this,jt)):null;et(i)&&(this._log.debug("Additional nodes to remove: "+i.length),yield this.handleDestroyChildren(i))}return!0}))}handleDestroyChildren(t){return Jt(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield _t(i));return e}))}}Bt=new WeakMap,qt=new WeakMap,zt=new WeakMap,Vt=new WeakMap,Ut=new WeakMap,jt=new WeakMap;class ie{constructor(t){Yt.set(this,void 0),Xt.set(this,void 0),Kt.set(this,void 0),Gt.set(this,void 0),Zt.set(this,{childList:!0,subtree:!0}),Qt(this,Xt,void 0),Qt(this,Gt,!1),Qt(this,Yt,!1),Qt(this,Kt,t)}observe(){te(this,Yt)||te(this,Gt)||!te(this,Xt)||(te(this,Xt).observe(te(this,Kt),te(this,Zt)),Qt(this,Yt,!0))}unobserve(){te(this,Yt)&&te(this,Xt)&&(te(this,Xt).disconnect(),Qt(this,Yt,!1))}isObserving(){return te(this,Yt)}disable(t){Qt(this,Gt,t),te(this,Gt)&&this.unobserve()}onMutation(t){te(this,Yt)&&this.unobserve(),Qt(this,Xt,new MutationObserver(t))}}Yt=new WeakMap,Xt=new WeakMap,Kt=new WeakMap,Gt=new WeakMap,Zt=new WeakMap;var se,ne,re,oe,he,ae,le=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ce=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ue{constructor(){se.set(this,void 0),ne.set(this,void 0),re.set(this,void 0),oe.set(this,!1),he.set(this,void 0),ae.set(this,void 0),le(this,re,window.requestAnimationFrame.bind(window)),le(this,se,[]),le(this,ne,[]),le(this,he,5),le(this,ae,void 0)}onError(t){le(this,ae,t)}mutate(t,e,...i){ce(this,ne).push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){ce(this,se).push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!ce(this,oe)){if(le(this,oe,!0),t&&t>=ce(this,he))throw new Error("Fast Dom limit reached");ce(this,re).call(this,this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=ce(this,se),n=ce(this,ne);try{this.run(n),this.run(s)}catch(t){ce(this,ae)?ce(this,ae).call(this,t):console.error("An error has been captured in interactions: "+t.message),i=t}le(this,oe,!1),(i||ce(this,se).length||ce(this,ne).length)&&this.schedule(e+1)}}se=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap,he=new WeakMap,ae=new WeakMap;class de{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var pe,ve,fe,ge,me,we=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ke=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ye=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class be{constructor(t){pe.set(this,void 0),ve.set(this,void 0),fe.set(this,void 0),ge.set(this,void 0),me.set(this,void 0),ke(this,ve,!1),ke(this,pe,[]),ke(this,fe,t),ke(this,me,void 0),ke(this,ge,void 0)}add(t){ye(this,pe).push(t),ye(this,ve)||(ke(this,ve,!0),this.flush().then(()=>{ke(this,ve,!1)}))}delete(t){const e=ye(this,pe).findIndex(e=>this.compare(e,t));if(!(e<0))return ye(this,pe).splice(e,1)[0]}isLocked(){return ye(this,ve)}setCompareCallback(t){ke(this,me,t)}onError(t){ke(this,ge,t)}compare(t,e){return ye(this,me)?ye(this,me).call(this,t,e):Object.is(t,e)}flush(){return we(this,void 0,void 0,(function*(){const t=this.getItemsForFlush();if(0===t.length)return!0;try{yield ye(this,fe).onFlush(t)}catch(e){this.callError(e,t)}return this.flush()}))}getItemsForFlush(){if("batch"===ye(this,fe).type){let t=[...ye(this,pe)];return ke(this,pe,[]),t}const t=ye(this,pe).shift();return t?[t]:[]}callError(t,e){ye(this,ge)&&ye(this,ge).call(this,t,e)}}pe=new WeakMap,ve=new WeakMap,fe=new WeakMap,ge=new WeakMap,me=new WeakMap;var Me,Ce,Ee=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},We=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ae=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Te{constructor(t,e){this.log=Ot.get(t),this.queue=new be(e),this.queue.onError(t=>{this.log.error(t,"Flush")})}handle(t,e,i){return Ee(this,void 0,void 0,(function*(){return et(t)?(this.queue.add({events:t,cuid:e,args:i}),!0):(this.log.warning("No events provided"),!1)}))}}class xe{constructor(t){Me.set(this,void 0),this.type="single",We(this,Me,t)}onFlush(t){return Ee(this,void 0,void 0,(function*(){for(const e of t)for(let t in e.events){let i=e.events[t];Ie(e.cuid,i.$cuid)&&(yield Ae(this,Me).execute(i.callback,e.args))}return!0}))}}Me=new WeakMap;class Le{constructor(t){Ce.set(this,void 0),this.type="single",We(this,Ce,t)}onFlush(t){return Ee(this,void 0,void 0,(function*(){for(const e of t){let t=[];for(let i in e.events){let s=e.events[i];Ie(e.cuid,s.$cuid)&&t.push(Ae(this,Ce).execute(s.callback,e.args))}yield Promise.all(t)}return!0}))}}Ce=new WeakMap;class Se{static get(t,e){switch(t){case"tasked":return new Te("TaskedEventEmitHandler",new Le(e));default:return new Te("SimpleEventEmitHandler",new xe(e))}}}function Ie(t,e){return!et(t)||et(t)&&t==e}var Pe=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class Oe{execute(t,e){return Pe(this,void 0,void 0,(function*(){try{return t(e),!0}catch(t){}return!1}))}}var Ne,De,He,_e,Re,$e,Fe,Be,qe=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ze=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ve=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ue{constructor(t,e){Ne.set(this,void 0),De.set(this,void 0),He.set(this,void 0),_e.set(this,void 0),ze(this,Ne,{}),ze(this,He,t),ze(this,_e,null!=e?e:"CuiEventBus"),ze(this,De,Ot.get(Ve(this,_e)))}on(t,e,i){if(!ht(t,e))throw new n("Missing argument");let s=Ve(this,_e)+"-"+function(){let t=gt(1,1e3),e=gt(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}();return Ve(this,Ne)[t]||(Ve(this,Ne)[t]={}),this.isAttached(Ve(this,Ne)[t],s,i)?null:(Ve(this,De).debug(`Attaching new event: [${t}] for: [${s}]`),Ve(this,Ne)[t][s]={callback:e,$cuid:this.getCuid(i)},s)}detach(t,e){if(!ht(t,e))throw new n("Missing argument");let i=Ve(this,Ne)[t];Ve(this,De).debug(`Detaching item: [${e}] from [${t}]`),this.isAttached(i,e)&&delete i[e]}detachAll(t){et(t)&&Ve(this,Ne)[t]?delete Ve(this,Ne)[t]:Ve(this,De).error("Event name is missing or incorrect","detachAll")}emit(t,e,i){return qe(this,void 0,void 0,(function*(){if(!et(t))throw new n("Event name is incorrect");let s=Ve(this,Ne)[t];return et(s)&&(Ve(this,De).debug(`Emit: [${t}]`),yield Ve(this,He).handle(s,e,i)),!0}))}isSubscribing(t,e,i){let s=Ve(this,Ne)[t];return this.isAttached(s,e,i)}detachByCuid(t,e){if(!ht(t,e))return;let i=Ve(this,Ne)[t];et(i)&&kt(Object.assign({},i),(t,s)=>{s.$cuid===e&&delete i[t]})}isAttached(t,e,i){return et(i)?et(t)&&et(e)&&et(t[e])&&t[e].$cuid==i.$cuid:et(t)&&et(e)&&et(t[e])}getCuid(t){return et(t)?t.$cuid:null}}Ne=new WeakMap,De=new WeakMap,He=new WeakMap,_e=new WeakMap;class je{constructor(t){if(Re.set(this,void 0),$e.set(this,void 0),Fe.set(this,void 0),Be.set(this,void 0),ze(this,$e,Ot.get("CuiEventBus")),ze(this,Fe,[]),ze(this,Re,{}),ze(this,Be,0),et(t)){Ve(this,$e).debug("Initiating buses"),(1===t.length?t:t.sort((t,e)=>t.priority-e.priority)).forEach((t,e)=>{Ve(this,Fe).push(this.initBusInstance(t.name,t.handler)),ze(this,Re,Object.assign(Object.assign({},Ve(this,Re)),this.mapEvents(t.eventsDef,e))),Ve(this,$e).debug(`Bus ${t.name} has been initialized with number: ${e}`)}),Ve(this,Fe).push(this.initBusInstance("DefaultEventBus","tasked")),ze(this,Be,Ve(this,Fe).length-1),Ve(this,$e).debug("Bus initialization finished")}}on(t,e,i){if(!ht(t,e))throw new n("Missing argument");return this.get(t).on(t,e,i)}detach(t,e,i){if(!ht(t,e))throw new n("Missing argument");this.get(t).detach(t,e,i)}detachAll(t){this.get(t).detachAll(t)}emit(t,e,i){return qe(this,void 0,void 0,(function*(){if(!et(t))throw new n("Event name is incorrect");return this.get(t).emit(t,e,i)}))}isSubscribing(t,e,i){return this.get(t).isSubscribing(t,e,i)}detachByCuid(t,e){ht(t,e)&&this.get(t).detachByCuid(t,e)}initBusInstance(t,e){if(!ht(t,e))throw new n("Bus name or handler name is incorrect");let i=new Oe,s=Se.get(e,i);return new Ue(s,t)}mapEvents(t,e){return t.reduce((t,i)=>t[i]?t:Object.assign(Object.assign({},t),{[i]:e}),{})}get(t){let e=Ve(this,Re)[t];return Ve(this,Fe)[null!=e?e:Ve(this,Be)]}}Re=new WeakMap,$e=new WeakMap,Fe=new WeakMap,Be=new WeakMap;new WeakMap,new WeakMap;class Ye{constructor(t){}append(t){if(et(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.appendChild(s),e.appendChild(i)}return!0}}var Xe,Ke=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ge=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ze{constructor(t,e){Xe.set(this,void 0),this.setup=(new Et).fromInit(t),this.interactions=class{static get(t,e){switch(t){case"async":const t=new ue;return e&&t.onError(e),t;default:return new de}}}.get(t.interaction,this.onInteractionError.bind(this)),this.bus=class{static get(t){return et(t)?new je(t):new Ue(Se.get("tasked",new Oe))}}.get(t.busSetup),this.styleAppender=new Ye(this.interactions),Ke(this,Xe,null!=e?e:[])}setLightMode(t){const e=it(this.setup.prefix,c),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=it(this.setup.prefix,c);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=it(this.setup.prefix,d),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=it(this.setup.prefix,d);return document.body.classList.contains(t)}setProperty(t,e){if(!ht(t,e))throw new a("Property or value was not provided");let i=ft(t,this.setup.prefix);this.interactions.mutate(()=>{document.documentElement.style.setProperty(i,e)},null)}isPlugin(t){return et(t)&&Ge(this,Xe).find(e=>e===t)}onInteractionError(t){console.error("An error has been captured from interactions"),console.error(t)}}Xe=new WeakMap;var Je,Qe=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ti=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ei=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ii{constructor(t){Je.set(this,void 0),ti(this,Je,t)}performAction(t,e,i,s){return Qe(this,void 0,void 0,(function*(){return new Promise(n=>{ei(this,Je).mutate(()=>{e.add(t),t.classList.add(u),setTimeout(()=>{ei(this,Je).mutate(()=>{e.remove(t),t.classList.remove(u),s&&s(),n(!0)},null)},i)},null)})}))}performActions(t,e,i,s){return Qe(this,void 0,void 0,(function*(){return new Promise(n=>{ei(this,Je).mutate(()=>{e.forEach(e=>e.add(t)),t.classList.add(u),setTimeout(()=>{ei(this,Je).mutate(()=>{e.forEach(e=>e.remove(t)),t.classList.remove(u),s&&s(),n(!0)},null)},i)},null)})}))}performSwitchAction(t,e,i,s,n,r){return Qe(this,void 0,void 0,(function*(){return new Promise(o=>{ei(this,Je).mutate(()=>{i.forEach(e=>e.add(t)),t.classList.add(u),et(e)&&(s.forEach(t=>t.add(e)),e.classList.add(u)),setTimeout(()=>{ei(this,Je).mutate(()=>{i.forEach(e=>e.remove(t)),t.classList.remove(u),et(e)&&(s.forEach(t=>t.remove(e)),e.classList.remove(u)),n(),o(!0)},null)},r)},null)})}))}}Je=new WeakMap;var si,ni,ri,oi,hi,ai,li=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ci=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ui{constructor(t){si.set(this,void 0),li(this,si,t)}add(t,e){ht(t,ci(this,si))&&!t.classList.contains(ci(this,si))&&t.classList.add(ci(this,si))}remove(t,e){ht(t,ci(this,si))&&t.classList.contains(ci(this,si))&&t.classList.remove(ci(this,si))}toggle(t,e){ht(t,ci(this,si))&&(t.classList.contains(ci(this,si))?t.classList.remove(ci(this,si)):t.classList.add(ci(this,si)))}}si=new WeakMap;class di{constructor(t){ni.set(this,void 0),li(this,ni,t)}add(t,e){if(e)switch(ci(this,ni)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){if(e)switch(ci(this,ni)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){if(e)switch(ci(this,ni)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}ni=new WeakMap;class pi{constructor(t){var e,i;ri.set(this,void 0),oi.set(this,void 0),e=this,i=this,[{set value(t){li(e,ri,t)}}.value,{set value(t){li(i,oi,t)}}.value]=bt(t)}add(t,e){ht(t,ci(this,ri),ci(this,oi))&&t.setAttribute(ci(this,ri),ci(this,oi))}remove(t,e){ht(t,ci(this,ri),ci(this,oi))&&t.hasAttribute(ci(this,ri))&&t.removeAttribute(ci(this,ri))}toggle(t,e){ht(t,ci(this,ri),ci(this,oi))&&(t.hasAttribute(ci(this,ri))?t.removeAttribute(ci(this,ri)):t.setAttribute(ci(this,ri),ci(this,oi)))}}ri=new WeakMap,oi=new WeakMap;class vi{constructor(t){var e,i;hi.set(this,void 0),ai.set(this,void 0),e=this,i=this,[{set value(t){li(e,hi,t)}}.value,{set value(t){li(i,ai,t)}}.value]=bt(t)}add(t,e){if(!ht(t,ci(this,hi),ci(this,ai)))return;let i=t;i.style&&!i.style[ci(this,hi)]&&(i.style[ci(this,hi)]=ci(this,ai))}remove(t,e){if(!ht(t,ci(this,hi),ci(this,ai)))return;let i=t;i.style&&i.style[ci(this,hi)]&&(i.style[ci(this,hi)]="")}toggle(t,e){if(!ht(t,ci(this,hi),ci(this,ai)))return;let i=t;i.style&&(i.style[ci(this,hi)]?delete i.style[ci(this,hi)]:i.style[ci(this,hi)]=ci(this,ai))}}hi=new WeakMap,ai=new WeakMap;class fi{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class gi{static get(t){if(!et(t))return new fi;switch(t[0]){case".":return new ui(t.substring(1));case"~":return new di(t.substring(1));case"&":return new pi(t.substring(1));case"^":return new vi(t.substring(1));default:return new ui(t)}}}class mi{static get(t){if(!et(t))return[];return t.split(",").map(t=>gi.get(t.trim()))}}var wi,ki,yi,bi,Mi,Ci,Ei=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Wi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ai=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ti{constructor(t,e){wi.set(this,void 0),ki.set(this,void 0),yi.set(this,void 0),bi.set(this,void 0),Mi.set(this,void 0),Ci.set(this,void 0),Wi(this,wi,t),Wi(this,ki,!1),Wi(this,yi,Ot.get("ElementManager")),Wi(this,Mi,e),Wi(this,bi,Date.now()),Wi(this,Ci,new ii(e.interactions))}toggleClass(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{let i=e.classList;Ai(this,Mi).interactions.fetch(()=>{i.contains(t)?Ai(this,Mi).interactions.mutate(i.remove,i,t):Ai(this,Mi).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{let i=e.classList;Ai(this,Mi).interactions.fetch(()=>{i.contains(t)||Ai(this,Mi).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{let i=e.classList;Ai(this,Mi).interactions.fetch(()=>{i.contains(t)&&Ai(this,Mi).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return et(t)?Ai(this,wi).reduce((e,i)=>{let s=i.getAttribute(t);return null!=s&&e.push(s),e},[]):[]}setAttribute(t,e){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(i=>{Ai(this,Mi).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{Ai(this,Mi).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(i=>{Ai(this,Mi).interactions.fetch(()=>{i.hasAttribute(t)?Ai(this,Mi).interactions.mutate(i.removeAttribute,i,t):Ai(this,Mi).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return Ei(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return Ei(this,void 0,void 0,(function*(){return!(!et(t)||!et(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return Ei(this,void 0,void 0,(function*(){return Ai(this,ki)&&Ai(this,yi).error("Element is locked",e),this.lock(),Ai(this,wi).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}setAction(t,e,i){return Ei(this,void 0,void 0,(function*(){if(!et(t))return!1;let s=gi.get(t);return this.animate(e,i,t=>{s.add(t)})}))}removeAction(t,e,i){return Ei(this,void 0,void 0,(function*(){if(!et(t))return!1;let s=gi.get(t);return this.animate(e,i,t=>{s.remove(t)})}))}animate(t,e,i){var s;return Ei(this,void 0,void 0,(function*(){if(!et(t))return!1;const n=null!==(s=null!=e?e:Ai(this,Mi).setup.animationTime)&&void 0!==s?s:0,r=new ui(t);return this.call(t=>Ai(this,Ci).performAction(t,r,n,()=>{i&&i(t)}))}))}emit(t,...e){et(t)?this.call(i=>{let s=i.$cuid;et(s)&&(Ai(this,yi).debug(`Emitting event ${t} to ${s}`),Ai(this,Mi).bus.emit(t,s,...e))},"emit"):Ai(this,yi).warning("Not enough data to emit event","emit")}on(t,e){let i=[];return ht(t,e)?(this.call(s=>{let n=s;if(et(n)){let s=Ai(this,Mi).bus.on(t,e,n);null!=s&&i.push(s)}},"on"),i):(Ai(this,yi).error("Incorrect arguments","on"),i)}detach(t,e){ht(t,e)||Ai(this,yi).error("Incorrect arguments","detach"),this.call(i=>{let s=i;et(s)&&Ai(this,Mi).bus.detach(t,e,s)},"detach")}read(t,...e){Ai(this,Mi).interactions.fetch(t,this,...e)}change(t,...e){Ai(this,Mi).interactions.mutate(t,this,...e)}elements(){return Ai(this,wi)}count(){return Ai(this,wi).length}lock(){Wi(this,ki,!0)}unlock(){Wi(this,ki,!1)}isLocked(){return Ai(this,ki)}refresh(){return Date.now()-Ai(this,bi)<36e4}}wi=new WeakMap,ki=new WeakMap,yi=new WeakMap,bi=new WeakMap,Mi=new WeakMap,Ci=new WeakMap;var xi,Li,Si,Ii=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Pi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Oi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ni{constructor(t){xi.set(this,void 0),Li.set(this,void 0),Si.set(this,void 0),Pi(this,xi,null!=t?t:[]),Pi(this,Si,Ot.get("CuiPluginManager")),Pi(this,Li,[])}init(t){Oi(this,Si).debug("Plugins initialization started: "+Oi(this,xi).length),Pi(this,Li,Oi(this,xi).filter(t=>et(t.mutation))),Oi(this,xi).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),Oi(this,Si).debug("Plugins have been initialized")}get(t){if(et(t))return Oi(this,xi).find(e=>e.name===t)}has(t){return et(this.get(t))}onMutation(t){return Ii(this,void 0,void 0,(function*(){let e=[];return Oi(this,Li).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}xi=new WeakMap,Li=new WeakMap,Si=new WeakMap;var Di,Hi,_i=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ri=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$i=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fi{constructor(t,e){Di.set(this,void 0),Hi.set(this,void 0),Ri(this,Di,t),Ri(this,Hi,e)}registerComponent(t){return _i(this,void 0,void 0,(function*(){let e=Dt(t,$i(this,Di));return!(!e||0===e.length)&&Ht(t,e,$i(this,Hi))}))}updateComponent(t,e,i){return _i(this,void 0,void 0,(function*(){return!!t.hasAttribute(e)&&$t(t,e,i)}))}destroyComponent(t){return _i(this,void 0,void 0,(function*(){return _t(t)}))}}Di=new WeakMap,Hi=new WeakMap;var Bi,qi,zi,Vi,Ui,ji,Yi,Xi,Ki=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Gi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ji{constructor(t,e,i){Bi.set(this,void 0),qi.set(this,void 0),zi.set(this,void 0),Vi.set(this,void 0),Ui.set(this,void 0),ji.set(this,void 0),Yi.set(this,void 0),Xi.set(this,void 0),w.prefix=t.prefix,w.logLevel=t.logLevel,t.development&&(w.devTool=t.development),Gi(this,Vi,new Ni(e)),Gi(this,Ui,null!=i?i:[]),Gi(this,zi,new Ze(t,e.map(t=>t.name))),Gi(this,Bi,Ot.get("CuiInstance")),Gi(this,ji,t.root),Gi(this,qi,void 0),Gi(this,Yi,[]),Gi(this,Xi,new Fi(Zi(this,Ui),Zi(this,zi)))}init(){return Ki(this,void 0,void 0,(function*(){if(Zi(this,Bi).debug("Instance started","init"),!et(window.MutationObserver))throw new r("Mutation observer does not exists");Gi(this,Yi,Zi(this,Ui).map(t=>t.attribute));const t=et(Zi(this,Yi))?Zi(this,ji).querySelectorAll(ot(Zi(this,Yi))):null;if(et(t)){Zi(this,Bi).debug(`Initiating ${t.length} elements`);let e=[];for(let i of t)try{let t=Dt(i,Zi(this,Ui));e.push(Ht(i,t,Zi(this,zi)))}catch(t){Zi(this,Bi).exception(t)}yield Promise.all(e)}return Zi(this,Bi).debug("Init plugins","init"),Zi(this,Vi).init(Zi(this,zi)),ht(Zi(this,Ui),Zi(this,Yi))&&(Zi(this,Bi).debug("Init mutation observer","init"),Gi(this,qi,new ee(Zi(this,ji),Zi(this,zi))),Zi(this,qi).setComponents(Zi(this,Ui)).setAttributes(Zi(this,Yi)),Zi(this,qi).setPlugins(Zi(this,Vi)),Zi(this,qi).start()),Zi(this,Bi).debug("Setting CSS globals","init"),Zi(this,zi).interactions.mutate(()=>{Zi(this,zi).setProperty(g,Zi(this,zi).setup.animationTimeLong+"ms"),Zi(this,zi).setProperty(f,Zi(this,zi).setup.animationTime+"ms"),Zi(this,zi).setProperty(m,Zi(this,zi).setup.animationTimeShort+"ms")},null),Zi(this,zi).bus.emit(k,null),this}))}finish(){Zi(this,qi)&&Zi(this,qi).stop(),Zi(this,zi).bus.emit(y,null)}get(t){const e=this.all(t);if(!e)return;return new Ti(e,Zi(this,zi))}all(t){const e=document.querySelectorAll(t);if(et(e))return[...e]}getUtils(){return Zi(this,zi)}on(t,e,i){return ht(t,e)?Zi(this,zi).bus.on(t,e,i):(Zi(this,Bi).error("Incorrect arguments","on"),null)}detach(t,e){ht(t,e)||Zi(this,Bi).error("Incorrect arguments","detach"),Zi(this,zi).bus.detach(t,e)}detachAll(t){et(t)||Zi(this,Bi).error("Incorrect arguments","detachAll"),Zi(this,zi).bus.detachAll(t)}emit(t,e,...i){if(!ht(t,e))return void Zi(this,Bi).warning("Not enough data to emit event","emit");let s=null;if("string"==typeof e&&e.startsWith("~"))s=e.substring(1);else{s=("string"==typeof e?document.querySelector(e):e).$cuid}et(s)?Zi(this,zi).bus.emit(t,s,...i):Zi(this,Bi).warning("Element is not a cUI element","emit")}getPlugin(t){return Zi(this,Vi).get(t)}api(){return Zi(this,Xi)}createCuiElement(t,e,i){return Ki(this,void 0,void 0,(function*(){if(!et(e)||!Zi(this,Yi).includes(e))return Zi(this,Bi).error("Element cannot be created: Unknown attribute"),!1;let s=Zi(this,Ui).find(t=>t.attribute===e);return!!s&&(!!function(t,e,i){if(!ht(e,i,t))return!1;if(t.hasAttribute(e))return!1;let s=[];return kt(i,(t,e)=>{s.push(`${t}: ${e}`)}),t.setAttribute(e,s.join("; ")),!0}(t,e,i)&&Ht(t,[s],Zi(this,zi)))}))}}Bi=new WeakMap,qi=new WeakMap,zi=new WeakMap,Vi=new WeakMap,Ui=new WeakMap,ji=new WeakMap,Yi=new WeakMap,Xi=new WeakMap;const Qi={slide:{current:{left:{transform:{translateX:{from:0,to:-100,unit:"%"}}},right:{transform:{translateX:{from:0,to:100,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}},fade:{current:{left:{opacity:{from:1,to:0}},right:{opacity:{from:1,to:0}}},previous:{left:{opacity:{from:0,to:1}},right:{opacity:{from:0,to:1}}}},push:{current:{left:{transform:{translateX:{from:0,to:-10,unit:"%"}}},right:{transform:{translateX:{from:0,to:10,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}}};var ts,es=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},is=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ss=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ns{constructor(){ts.set(this,void 0),is(this,ts,window)}init(t){var e,i;return es(this,void 0,void 0,(function*(){let s=Object.assign(Object.assign({},new Wt),t.setup);const n=s.app,r={result:!1};if(et(ss(this,ts)[n]))return r.message="Instance is already initialized",r;if(et(t.icons))for(let e in t.icons)v[e]=t.icons[e];if(et(t.swipeAnimations))for(let e in t.swipeAnimations)Qi[e]=t.swipeAnimations[e];try{ss(this,ts)[n]=new Ji(s,null!==(e=t.plugins)&&void 0!==e?e:[],null!==(i=t.components)&&void 0!==i?i:[]),yield ss(this,ts)[n].init()}catch(t){return console.error(t),r.message="An error occured during initialization",r}return r.result=!0,r}))}}ts=new WeakMap;class rs{static setLabel(t,e){t.hasAttribute("aria-label")||t.setAttribute("aria-label",e)}static setAria(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}static removeAria(t,e){t.hasAttribute(e)&&t.removeAttribute(e)}}var os,hs,as,ls,cs,us,ds,ps,vs,fs=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},gs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ms=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ws{constructor(t){os.set(this,void 0),gs(this,os,t)}hasClass(t,e){return!(!t||!e.classList.contains(t))}setClass(t,e){this.setClasses([t],e)}setClasses(t,e){e&&e.classList.add(...t)}setClassesAs(t,...e){ms(this,os).mutate(this.setClasses,this,e,t)}removeClass(t,e){this.removeClasses([t],e)}removeClasses(t,e){e&&e.classList.remove(...t)}removeClassesAs(t,...e){ms(this,os).mutate(this.removeClasses,this,e,t)}removeAttribute(t,e){e&&e.hasAttribute(t)&&e.removeAttribute(t)}setStyle(t,e,i){t&&t.style&&et(i)&&(t.style[e]=i)}}os=new WeakMap;hs=new WeakMap;class ks extends class{constructor(t,e,i){var s;hs.set(this,void 0),this._log=Ot.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid,this.isLocked=!1,this.activeClassName=(null!=(s=i.setup.prefix)?s:"")+"-active",this.helper=new ws(i.interactions),gs(this,hs,[]),this.componentName=t}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,e){ms(this,hs).includes(t)||ms(this,hs).push(t),this.utils.bus.emit(t,this.cuid,e)}onEvent(t,e){return this.utils.bus.on(t,e,this.element)}detachEvent(t,e){null!=e&&(this.utils.bus.detach(t,e),e="")}getId(){return this.cuid}checkLockAndWarn(t){return!!this.isLocked&&(this._log.warning("Component is locked",t),!0)}isActive(){return this.element.classList.contains(this.activeClassName)}detachEmiitedEvents(){ms(this,hs).forEach(t=>{this.utils.bus.detachByCuid(t,this.cuid),this._log.debug("Detaching event: "+t+" on component delete")})}registerInDebug(){this._log.registerElement(this.element,this.cuid,this.componentName)}removeFromDebug(){this._log.unregisterElement(this.cuid,this.componentName)}setDebugProperty(t,e){}logInfo(t,e){this._log.debug(t,e)}logWarning(t,e){this._log.warning(t,e)}logError(t,e,i){this._log.error(t,e),i&&this._log.exception(i,e)}}{constructor(t,e,i,s,n){super(t,e,n),as.set(this,void 0),this.args=s,this.actionsHelper=new ii(n.interactions),this.prevArgs=void 0,this.isInitialized=!1,gs(this,as,i)}handle(t){return fs(this,void 0,void 0,(function*(){return this.isInitialized?(this.logWarning("Trying to initialize handler again","handle"),!1):this.isLocked?(this.logWarning("Handler is locked","handle"),!1):(this.isLocked=!0,this.registerInDebug(),this.args.parse(t),this.element.classList.contains(ms(this,as))||this.helper.setClassesAs(this.element,ms(this,as)),this.logInfo("Init","handle"),this.performLifecycleOp("onHandle",this.onHandle(),()=>{this.isLocked=!1,this.isInitialized=!0}))}))}refresh(t){return fs(this,void 0,void 0,(function*(){return this.logInfo("Update","refresh"),this.isInitialized?!!this.checkLock()&&(this.isLocked=!0,this.prevArgs=et(e=this.args)?Object.assign({},e):null,this.args.parse(t),this._log.debug("Component update","refresh"),this.performLifecycleOp("onRefresh",this.onRefresh(),()=>{this.isLocked=!1})):(this.logError("Cannot update not initialized component","refresh"),!1);var e}))}destroy(){return fs(this,void 0,void 0,(function*(){return this.logInfo("Destroy","destroy"),this.isInitialized?!!this.checkLock()&&(this.isLocked=!0,this.performLifecycleOp("onRemove",this.onRemove(),()=>{this.detachEmiitedEvents(),this.removeFromDebug(),this.isInitialized=!1,this.isLocked=!1})):(this.logError("Cannot update not initialized component","destroy"),!1)}))}performAction(t,e,i,s){return fs(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}checkLock(){return!this.isLocked||(this.logWarning("Handler is locked","handle"),!1)}performLifecycleOp(t,e,i){return fs(this,void 0,void 0,(function*(){let s=!1;try{s=yield e}catch(e){this.logError("An exception occured in"+t,t,e)}finally{i()}return s}))}}as=new WeakMap;class ys extends ks{constructor(t,e,i,s,n){super(t,e,i,s,n),ls.set(this,void 0),cs.set(this,void 0),us.set(this,void 0),ds.set(this,void 0),ps.set(this,void 0),gs(this,ls,null),gs(this,cs,null),gs(this,us,null),gs(this,ps,[]),gs(this,ds,[])}onHandle(){return fs(this,void 0,void 0,(function*(){return gs(this,ls,this.onEvent(M,this.openFromEvent.bind(this))),gs(this,cs,this.onEvent(E,this.closeFromEvent.bind(this))),gs(this,ds,mi.get(this.args.openAct)),gs(this,ps,mi.get(this.args.closeAct)),this.onInit(),!0}))}onRefresh(){return fs(this,void 0,void 0,(function*(){return this.prevArgs&&this.args.openAct===this.prevArgs.openAct||gs(this,ds,mi.get(this.args.openAct)),this.prevArgs&&this.args.closeAct===this.prevArgs.closeAct||gs(this,ps,mi.get(this.args.closeAct)),this.onUpdate(),!0}))}onRemove(){return fs(this,void 0,void 0,(function*(){return this.detachEvent(E,ms(this,cs)),this.detachEvent(M,ms(this,ls)),this.onDestroy(),!0}))}open(t){return fs(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?(this.logWarning("Component is already opened"),!1):((this.args.escClose||et(this.args.keyClose))&&gs(this,us,this.onEvent(O,this.onKeyClose.bind(this))),!!this.onBeforeOpen()&&(this.isLocked=!0,this.performAction(ms(this,ds),this.args.timeout,this.onActionFinish.bind(this,this.onAfterOpen.bind(this),C,t),()=>{this.helper.setClass(this.activeClassName,this.element),rs.setAria(this.element,"aria-expanded","true")}))))}))}close(t){return fs(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("close")&&(this.isActive()?(this.detachEvent(O,ms(this,us)),!!this.onBeforeClose()&&(this.isLocked=!0,this.performAction(ms(this,ps),this.args.timeout,this.onActionFinish.bind(this,this.onAfterClose.bind(this),W,t),()=>{this.helper.removeClass(this.activeClassName,this.element),rs.setAria(this.element,"aria-expanded","false")}))):(this.logWarning("Component is already closed"),!1))}))}performAction(t,e,i,s){return fs(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}openFromEvent(t){this.open(t)}closeFromEvent(t){this.close(t)}onActionFinish(t,e,i){t(),this.emitEvent(e,{timestamp:Date.now(),state:i}),this.isLocked=!1}onKeyClose(t){return fs(this,void 0,void 0,(function*(){(this.args.escClose&&"Escape"===t.event.key||et(this.args.keyClose)&&t.event.key===this.args.keyClose)&&(yield this.close("Closed by key"))}))}}ls=new WeakMap,cs=new WeakMap,us=new WeakMap,ds=new WeakMap,ps=new WeakMap;class bs extends ks{constructor(t,e,i,s,n){super(t,e,i,s,n),vs.set(this,void 0),gs(this,vs,new ie(e)),ms(this,vs).onMutation(this.mutation.bind(this))}onHandle(){return fs(this,void 0,void 0,(function*(){return this.onInit(),ms(this,vs).observe(),!0}))}onRefresh(){return fs(this,void 0,void 0,(function*(){return ms(this,vs).unobserve(),this.onUpdate(),ms(this,vs).observe(),!0}))}onRemove(){return fs(this,void 0,void 0,(function*(){return ms(this,vs).unobserve(),this.onDestroy(),!0}))}mutation(t){this._log.debug("Element mutation","mutation"),this.onMutation(this.prepareRecords(t))}prepareRecords(t){return t.reduce((t,e)=>("childList"!==e.type||(e.addedNodes.length>0&&t.added.push(...e.addedNodes),e.removedNodes.length>0&&t.removed.push(...e.removedNodes)),t),{added:[],removed:[]})}}vs=new WeakMap;var Ms,Cs,Es,Ws,As,Ts=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},xs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};const Ls={string:t=>t.trim().toLowerCase(),boolean:vt,number:t=>{const e=t.includes(".")?parseFloat(t):parseInt(t);return isNaN(e)?void 0:e}};class Ss{constructor(t){Ms.set(this,void 0),Cs.set(this,void 0),Es.set(this,void 0),Ws.set(this,void 0),Ts(this,Ws,null!=t?t:{}),Ts(this,Ms,new Is(xs(this,Ws).props)),Ts(this,Cs,{}),Ts(this,Es,0)}parse(t){if(this.fillDefaultValues(),t)if("string"==typeof t&&xs(this,Ws).main){const e=typeof this[xs(this,Ws).main];this[xs(this,Ws).main]=xs(this,Ms).parseValue(xs(this,Ws).main,t,e)}else kt(this,(e,i)=>{const s=typeof i;if(!t[e])return void(this[e]=xs(this,Cs)[e]);const n=xs(this,Ms).parseValue(e,t[e],s);n&&(this[e]=n)})}fillDefaultValues(){0===xs(this,Es)&&(kt(this,(t,e)=>{xs(this,Cs)[t]=e}),Ts(this,Es,Object.keys(xs(this,Cs)).length))}}Ms=new WeakMap,Cs=new WeakMap,Es=new WeakMap,Ws=new WeakMap;class Is{constructor(t){As.set(this,void 0),Ts(this,As,null!=t?t:{})}parseValue(t,e,i){var s,n,r;let o=xs(this,As)[t],h=Ls[null!==(s=null==o?void 0:o.type)&&void 0!==s?s:i],a=null==h?void 0:h(e);return a?null!==(r=null===(n=null==o?void 0:o.corrector)||void 0===n?void 0:n.call(o,a))&&void 0!==r?r:a:null==o?void 0:o.default}}As=new WeakMap;var Ps,Os,Ns,Ds,Hs=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},_s=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class $s extends Ss{constructor(t,e){super({props:{selector:{corrector:Ct},items:{corrector:Ct}}}),this.animation=!1,this.single=!1,this.selector=Ct(ft("> * > .{prefix}-accordion-title",t)),this.items=Ct(ft("> *",t)),this.timeout=null!=e?e:300}}class Fs{constructor(t){Ps.set(this,void 0),_s(this,Ps,null!=t?t:"cui"),this.attribute=Rs(this,Ps)+"-accordion"}getStyle(){return null}get(t,e){return new Bs(t,e,this.attribute,Rs(this,Ps))}}Ps=new WeakMap;class Bs extends bs{constructor(t,e,i,s){super("CuiAccordionHandler",t,i,new $s(s,e.setup.animationTime),e),Os.set(this,void 0),Ns.set(this,void 0),Ds.set(this,void 0),_s(this,Ds,null),_s(this,Os,[]),_s(this,Ns,[]),_s(this,Ds,null)}onInit(){try{this.initTargets(),_s(this,Ds,this.onEvent(x,this.onSwitch.bind(this)))}catch(t){this._log.exception(t,"handle")}}onUpdate(){try{this.initTargets()}catch(t){this._log.exception(t,"handle")}}onDestroy(){this.detachEvent(x,Rs(this,Ds))}onMutation(t){(t.added.length>0||t.removed.length>0)&&this.initTargets()}switch(t){return Hs(this,void 0,void 0,(function*(){if(this._log.debug("Switch to: "+t),t<0||this.isLocked||!this.isInitialized)return!1;if(_s(this,Os,this.queryItems()),Rs(this,Os).length<=t)return!1;this.isLocked=!0;const e=Rs(this,Os)[t];return this.helper.hasClass(this.activeClassName,e)?this.helper.removeClassesAs(e,this.activeClassName):this.mutate(()=>{this.args.single&&this.closeAllExcept(t),this.helper.setClass(this.activeClassName,e)}),this.emitEvent(L,{index:t,currentTarget:e,timestamp:Date.now()}),this.isLocked=!1,!0}))}onSwitch(t){this.switch(ct(t,-1)).then(()=>{this._log.debug("Switch from event to "+t)})}initTargets(){_s(this,Os,this.queryItems());const t=this.element.querySelectorAll(this.args.selector);_s(this,Ns,[]),t.forEach((t,e)=>{let i={element:t};this.setListener(i,e),Rs(this,Ns).push(i)})}closeAllExcept(t){Rs(this,Os).forEach((e,i)=>{t!==i&&this.helper.hasClass(this.activeClassName,e)&&e.classList.remove(this.activeClassName)})}setListener(t,e){t.listener=()=>{this.switch(e)},t.element.addEventListener("click",t.listener)}removeListener(t){t.listener&&t.element.removeEventListener("click",t.listener)}queryItems(){return[...this.element.querySelectorAll(this.args.items)]}}Os=new WeakMap,Ns=new WeakMap,Ds=new WeakMap;var qs,zs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Vs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Us{constructor(){this.length=this.to=this.from=-1,this.rtl=!1}setProperty(t){if(!t||!et(t.from)||!et(t.to))throw new h("[OpacityAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to}perform(t,e,i){if(this.to<0)return;let s=this.length*e;t.style&&(t.style.opacity=this.rtl?Math.max(this.from-s,0):Math.min(this.from+s,1))}}class js{constructor(t){if(qs.set(this,void 0),!et(t))throw new h("[PropertyAnimator] Valid property is required");this.property=t,this.length=this.to=this.from=-1,this.rtl=!1,zs(this,qs,"")}setProperty(t){if(!t||!et(t.from)||!et(t.to))throw new h("[PropertyAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to,zs(this,qs,t.unit)}perform(t,e,i){if(!this.property)return;let s=this.length*e;t.style&&(t.style[this.property]=this.createValue(this.rtl?this.from-s:this.from+s,Vs(this,qs)))}createValue(t,e){return`${t}${null!=e?e:""}`}}qs=new WeakMap;class Ys{constructor(){this.prop=void 0}setProperty(t){if(!t)throw new h("[TransformAnimator] Property has incorrect format");this.prop=t}build(t){let e=[];for(let i in this.prop){let s=this.prop[i],n=Math.abs(s.to-s.from),r=s.from>s.to?s.from-n*t:s.from+n*t;e.push(this.buildSingle(i,r,s.unit))}return e.join(" ")}buildSingle(t,e,i){return`${t}(${e}${i})`}perform(t,e){this.prop&&t.style&&(t.style.transform=this.build(e))}}var Xs,Ks,Gs,Zs,Js,Qs,tn,en,sn,nn,rn,on,hn,an,ln=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},cn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap,new WeakMap,new WeakMap;class un{get(t){if(et(t))switch(t){case"opacity":return new Us;case"transform":return new Ys;default:return new js(t)}}}class dn{constructor(t){Xs.set(this,void 0),Ks.set(this,void 0),Gs.set(this,void 0),Zs.set(this,void 0),Js.set(this,void 0),Qs.set(this,void 0),tn.set(this,void 0),en.set(this,void 0),sn.set(this,void 0),ln(this,Ks,[]),ln(this,Js,void 0),ln(this,Zs,void 0),ln(this,Qs,null!=t&&t),ln(this,en,new un),ln(this,Gs,!1),ln(this,Xs,void 0),ln(this,tn,!1),ln(this,sn,void 0)}onFinish(t){ln(this,Xs,t)}setAnimators(t){ln(this,Ks,t)}setProps(t){if(et(t)){ln(this,Ks,[]);try{for(let e in t){let i=cn(this,en).get(e);if(!i)return;i.setProperty(t[e]),cn(this,Ks).push(i)}}catch(t){this.reportError(t)}}}setElement(t){ln(this,Js,t)}setOnError(t){ln(this,sn,t)}animate(t,e,i){if(cn(this,Gs))return;if(!cn(this,Js)||0===cn(this,Ks).length)return void this.reportError(new Error("Animation cannot be performed: element or animators are not set"));let s=null!=e?e:0,n=i||!1;ln(this,Gs,!0),requestAnimationFrame(this.animateAsync.bind(this,t,s,n))}isLocked(){return cn(this,Gs)}animateAsync(t,e,i,s){cn(this,Zs)||ln(this,Zs,s);let n=s-cn(this,Zs),r=n/t,o=0;o=0===e?r:i?e-r*e:e+r*e,this.callUpdate(i?Math.max(o,0):Math.min(o,1),1),n<t&&!cn(this,tn)?requestAnimationFrame(this.animateAsync.bind(this,t,e,i)):this.endAnimation(i)}endAnimation(t){cn(this,Qs)&&cn(this,Js)&&cn(this,Js).removeAttribute("style"),cn(this,Xs)&&cn(this,Xs).call(this,cn(this,Js),t,cn(this,tn)),ln(this,tn,!1),ln(this,Zs,void 0),ln(this,Gs,!1)}callUpdate(t,e){try{cn(this,Ks).forEach(i=>i.perform(cn(this,Js),t,e))}catch(t){this.reportError(t),ln(this,tn,!0)}}reportError(t){cn(this,sn)?cn(this,sn).call(this,t):(console.error("An error occured in CuiAnimtionEngine"),console.error(t))}}Xs=new WeakMap,Ks=new WeakMap,Gs=new WeakMap,Zs=new WeakMap,Js=new WeakMap,Qs=new WeakMap,tn=new WeakMap,en=new WeakMap,sn=new WeakMap;class pn{constructor(t){nn.set(this,void 0),rn.set(this,void 0),on.set(this,void 0),hn.set(this,void 0),an.set(this,void 0),ln(this,nn,void 0),ln(this,rn,[]),ln(this,on,new dn(t)),ln(this,hn,new un),ln(this,an,void 0)}setElement(t){ln(this,nn,t)}setOnFinish(t){cn(this,on).onFinish(t)}setOnError(t){ln(this,an,t),cn(this,on).setOnError(t)}setProps(t){if(et(t)){ln(this,rn,[]);try{for(let e in t){let i=cn(this,hn).get(e);if(!i)return;i.setProperty(t[e]),cn(this,rn).push(i)}}catch(t){this.reportError(t)}}}update(t){cn(this,nn)&&0!==cn(this,rn).length&&cn(this,rn).forEach(e=>e.perform(cn(this,nn),Math.min(t,1),1))}updateAsync(t){requestAnimationFrame(this.update.bind(this,t))}finish(t,e,i){cn(this,nn)&&cn(this,on).setElement(cn(this,nn)),cn(this,on).setAnimators(cn(this,rn)),cn(this,on).animate(e,t,i)}reportError(t){cn(this,an)?cn(this,an).call(this,t):console.log(t)}}nn=new WeakMap,rn=new WeakMap,on=new WeakMap,hn=new WeakMap,an=new WeakMap;var vn,fn,gn,mn,wn,kn,yn,bn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Mn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Cn extends Ss{constructor(t,e){super(),this.escClose=!1,this.keyClose="",this.timeout=null!=e?e:300,this.swipe=!1,this.openAct=ft(".{prefix}-animation-fade-in",t),this.closeAct=ft(".{prefix}-animation-fade-out",t)}}class En{constructor(t){vn.set(this,void 0),bn(this,vn,null!=t?t:"cui"),this.attribute=Mn(this,vn)+"-banner"}getStyle(){return null}get(t,e){return new Wn(t,e,this.attribute,Mn(this,vn))}}vn=new WeakMap;class Wn extends ys{constructor(t,e,i,s){super("CuiBannerHandler",t,i,new Cn(s,e.setup.animationTime),e),fn.set(this,void 0),gn.set(this,void 0),mn.set(this,void 0),wn.set(this,void 0),kn.set(this,void 0),yn.set(this,void 0),bn(this,fn,new pn(!0)),Mn(this,fn).setOnFinish(this.onSwipeFinish.bind(this)),Mn(this,fn).setElement(this.element),bn(this,mn,-1),bn(this,wn,0),bn(this,kn,Qi.fade),bn(this,yn,null),bn(this,gn,!1)}onInit(){this.isActive()||this.helper.setClass(this.activeClassName,this.element)}onUpdate(){}onDestroy(){this.detachEvent(R,Mn(this,yn))}onBeforeOpen(){return!0}onAfterOpen(){this.args.swipe&&bn(this,yn,this.onEvent(R,this.onMove.bind(this)))}onAfterClose(){this.detachEvent(R,Mn(this,yn))}onBeforeClose(){return!0}onMove(t){if(this.isLocked)return;let e=this.element;switch(t.type){case"down":if(Mn(this,gn)||!e.contains(t.target))return;bn(this,gn,!0),bn(this,mn,t.x),this.helper.setClassesAs(document.body,p),t.event.preventDefault();break;case"up":if(!Mn(this,gn)&&0==Mn(this,wn))break;let i=Math.abs(Mn(this,wn)),s=i*this.args.timeout,n=i<=.4;this.isLocked=!0,Mn(this,fn).finish(i,s,n),this.helper.removeClassesAs(document.body,p),bn(this,gn,!1);break;case"move":if(Mn(this,gn)){let i=(t.x-Mn(this,mn))/e.offsetWidth;(Mn(this,wn)>=0&&i<=0||Mn(this,wn)<=0&&i>0)&&Mn(this,fn).setProps(i>0?Mn(this,kn).current.right:Mn(this,kn).current.left),bn(this,wn,i),this.mutate(()=>{Mn(this,fn).update(Math.abs(Mn(this,wn)))}),t.event.preventDefault()}}}onSwipeFinish(t,e,i){this.isLocked=!1,e||(this.helper.removeClass(this.activeClassName,this.element),rs.setAria(this.element,"aria-expanded","false")),bn(this,wn,0),bn(this,mn,0)}}fn=new WeakMap,gn=new WeakMap,mn=new WeakMap,wn=new WeakMap,kn=new WeakMap,yn=new WeakMap;var An,Tn,xn,Ln=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Sn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class In{constructor(t){An.set(this,void 0),Tn.set(this,void 0),xn.set(this,void 0),Ln(this,An,t),Ln(this,Tn,1),Ln(this,xn,new Pn)}setScale(t){return Ln(this,Tn,t),this}build(){let t=function(t){if(!et(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}(Sn(this,An));return et(t)&&Sn(this,Tn)&&Sn(this,xn).append(t,Sn(this,Tn)),t}}An=new WeakMap,Tn=new WeakMap,xn=new WeakMap;class Pn{append(t,e){let i=ct(t.getAttribute("width"),20),s=ct(t.getAttribute("height"),20);t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var On,Nn,Dn,Hn,_n,Rn=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},$n=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Bn extends Ss{constructor(){super(),this.progress=0}}class qn{constructor(t){this.attribute=(null!=t?t:"cui")+"-circle-progress",v.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new zn(t,e,this.attribute)}}class zn extends ks{constructor(t,e,i){super("CuiCircleHandler",t,i,new Bn,e),On.set(this,void 0),Nn.set(this,void 0),Dn.set(this,void 0),Hn.set(this,void 0),_n.set(this,void 0),$n(this,On,$n(this,Nn,0)),$n(this,Dn,null),$n(this,Hn,i),$n(this,_n,null)}onHandle(){return Rn(this,void 0,void 0,(function*(){const t=new In(v.special_circle_progress).build();if(!et(t))return this.logError("SVG circle was not created","onInit"),!1;const e=this.element.querySelector("svg");return et(e)&&e.remove(),this.element.appendChild(t),$n(this,Dn,this.element.querySelector(".circle-progress-path")),$n(this,Nn,Fn(this,Dn).getTotalLength()),$n(this,On,Fn(this,Nn)/100),this.fetch(this.readStyle),$n(this,_n,this.onEvent(H,this.onSetProgress.bind(this))),!0}))}onRefresh(){return Rn(this,void 0,void 0,(function*(){return this.fetch(this.readStyle),this.emitEvent(_,{timestamp:Date.now(),progress:this.args.progress}),!0}))}onRemove(){return Rn(this,void 0,void 0,(function*(){return this.detachEvent(H,Fn(this,_n)),!0}))}onSetProgress(t){et(t)&&this.element.setAttribute(Fn(this,Hn),t)}updateStyle(t){Fn(this,Dn).style.strokeDashoffset=t}readStyle(){if(this.prevArgs&&this.args.progress===this.prevArgs.progress)return;const t=nt(this.args.progress,0,100);this.mutate(this.updateStyle,Fn(this,Nn)-Fn(this,On)*t)}}On=new WeakMap,Nn=new WeakMap,Dn=new WeakMap,Hn=new WeakMap,_n=new WeakMap;var Vn,Un,jn=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Yn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kn extends Ss{constructor(t){super({main:"target"}),this.target="",this.action="",this.prevent=!1,this.state="",this.timeout=null!=t?t:300}}class Gn{constructor(t){Vn.set(this,void 0),Yn(this,Vn,null!=t?t:"cui"),this.attribute=Xn(this,Vn)+"-close"}getStyle(){return null}get(t,e){return new Zn(t,e,this.attribute,Xn(this,Vn))}}Vn=new WeakMap;class Zn extends ks{constructor(t,e,i,s){super("CuiCloseHandler",t,i,new Kn(e.setup.animationTime),e),Un.set(this,void 0),Yn(this,Un,null),this.onClick=this.onClick.bind(this)}onHandle(){return jn(this,void 0,void 0,(function*(){return this.element.addEventListener("click",this.onClick),Yn(this,Un,this.onEvent(E,this.onClose.bind(this))),!0}))}onRefresh(){return jn(this,void 0,void 0,(function*(){return!0}))}onRemove(){return jn(this,void 0,void 0,(function*(){return this.element.removeEventListener("click",this.onClick),this.detachEvent(E,Xn(this,Un)),!0}))}onClick(t){this.onClose(t),this.args.prevent&&t.preventDefault()}onClose(t){if(this.isLocked)return;const e=this.getTarget();et(e)?(this.isLocked=!0,this.run(e).then(e=>{this.onActionFinish(t,e)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return jn(this,void 0,void 0,(function*(){let e=t.$cuid;if(et(e))return yield this.utils.bus.emit(E,e,this.args.state),!1;if(ht(this.args.action,this.args.timeout)){let e=mi.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.removeActiveClass(t)})}return this.removeActiveClassAsync(t),!0}))}removeActiveClass(t){et(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClass(this.activeClassName,t)}removeActiveClassAsync(t){this.fetch(()=>{et(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClassesAs(t,this.activeClassName)})}onActionFinish(t,e){e&&this.emitClose(t)}getTarget(){var t;return et(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:mt(this.element)}emitClose(t){this.emitEvent(W,{timestamp:Date.now(),state:this.args.state,event:t})}}Un=new WeakMap;var Jn,Qn,tr,er=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ir=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class sr extends Ss{constructor(t,e){super(),this.escClose=!1,this.timeout=null!=e?e:300,this.openAct=ft(".{prefix}-dialog-default-in",t),this.closeAct=ft(".{prefix}-dialog-default-out",t),this.keyClose=""}}class nr{constructor(t){Jn.set(this,void 0),er(this,Jn,null!=t?t:"cui"),this.attribute=ir(this,Jn)+"-cover"}getStyle(){return null}get(t,e){return new rr(t,e,this.attribute,ir(this,Jn))}}Jn=new WeakMap;class rr extends ys{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new sr(s,e.setup.animationTimeLong),e),Qn.set(this,void 0),tr.set(this,void 0),er(this,Qn,ft("{prefix}-cover-open",s)),er(this,tr,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){rs.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(er(this,tr,window.pageYOffset),!0)}onAfterOpen(){this.helper.setClass(ir(this,Qn),document.body),document.body.style.top=`-${ir(this,tr)}px`,rs.setAria(this.element,"aria-hidden","false")}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(ir(this,tr)||0)),er(this,tr,0),this.helper.removeClass(ir(this,Qn),document.body),rs.setAria(this.element,"aria-hidden","true")}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(ir(this,Qn),document.body)}}Qn=new WeakMap,tr=new WeakMap;var or,hr,ar,lr,cr,ur=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pr extends Ss{constructor(t,e){super(),this.escClose=!1,this.outClose=!1,this.timeout=null!=e?e:300,this.openAct=ft(".{prefix}-dialog-default-in",t),this.closeAct=ft(".{prefix}-dialog-default-out",t),this.keyClose=""}}class vr{constructor(t){or.set(this,void 0),ur(this,or,null!=t?t:"cui"),this.attribute=dr(this,or)+"-dialog"}getStyle(){return null}get(t,e){return new fr(t,e,this.attribute,dr(this,or))}}or=new WeakMap;class fr extends ys{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new pr(s,e.setup.animationTimeLong),e),hr.set(this,void 0),ar.set(this,void 0),lr.set(this,void 0),cr.set(this,void 0),ur(this,ar,ft("{prefix}-dialog-open",s)),ur(this,hr,s),ur(this,lr,0),ur(this,cr,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){rs.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(ur(this,lr,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&ur(this,cr,this.onEvent(N,this.onWindowClick.bind(this))),this.helper.setClass(dr(this,ar),document.body),document.body.style.top=`-${dr(this,lr)}px`}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(dr(this,lr)||0)),ur(this,lr,0),this.helper.removeClass(dr(this,ar),document.body),this.detachEvent(N,dr(this,cr))}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(dr(this,ar),document.body)}onWindowClick(t){let e=this.element.querySelector(ft(".{prefix}-dialog-container",dr(this,hr)));e&&!e.contains(t.ev.target)&&this.close("out").then(()=>{this._log.debug("Closed by click outside")})}}hr=new WeakMap,ar=new WeakMap,lr=new WeakMap,cr=new WeakMap;var gr,mr,wr,kr,yr,br,Mr,Cr,Er=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ar{constructor(t){gr.set(this,void 0),mr.set(this,void 0),wr.set(this,void 0),kr.set(this,void 0),yr.set(this,void 0),br.set(this,void 0),Mr.set(this,void 0),Cr.set(this,void 0),Er(this,gr,t),Er(this,wr,!1),Er(this,kr,!1),Er(this,yr,!1),Er(this,mr,void 0),Er(this,Mr,this.onMouseMove.bind(this)),Er(this,Cr,this.onMouseOut.bind(this)),Er(this,br,this.onMouseOver.bind(this))}setCallback(t){Er(this,mr,t)}isInProgress(){return Wr(this,wr)}attach(){Wr(this,gr).addEventListener("mouseover",Wr(this,br)),Wr(this,gr).addEventListener("mousemove",Wr(this,Mr)),Wr(this,gr).addEventListener("mouseout",Wr(this,Cr)),Er(this,yr,!0)}detach(){Wr(this,gr).removeEventListener("mouseover",Wr(this,br)),Wr(this,gr).removeEventListener("mousemove",Wr(this,Mr)),Wr(this,gr).removeEventListener("mouseout",Wr(this,Cr)),Er(this,yr,!1)}emit(t,e){ht(Wr(this,mr))&&(!e&&Wr(this,wr)||(Er(this,wr,!0),window.requestAnimationFrame(this.invoke.bind(this,{isHovering:Wr(this,kr),event:t,timestamp:Date.now()}))))}isAttached(){return Wr(this,yr)}invoke(t){Wr(this,mr)&&Wr(this,mr).call(this,t),Er(this,wr,!1)}onMouseOver(t){Er(this,kr,!0),this.emit(t,!0)}onMouseOut(t){Er(this,kr,!1),this.emit(t,!0)}onMouseMove(t){this.emit(t,!1)}}gr=new WeakMap,mr=new WeakMap,wr=new WeakMap,kr=new WeakMap,yr=new WeakMap,br=new WeakMap,Mr=new WeakMap,Cr=new WeakMap;var Tr,xr,Lr,Sr,Ir=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Or{constructor(){Tr.set(this,void 0),xr.set(this,void 0),Lr.set(this,void 0),Sr.set(this,void 0),Ir(this,Lr,-1),Ir(this,xr,-1),Ir(this,Tr,void 0),Ir(this,Sr,0)}setElementBox(t){Ir(this,Tr,t)}setTarget(t){Ir(this,xr,t.width),Ir(this,Lr,t.height)}setMargin(t){Ir(this,Sr,t)}getVerticalPosition(t){switch(t){case"top":return this.getTopPosition();case"bottom":return this.getBottomPosition();case"middle":return this.getMiddlePosition();default:return-1}}getHorizontalPosition(t){switch(t){case"left":return this.getLeftPosition();case"right":return this.getRightPosition();case"center":return this.getCenterPosition();default:return-1}}getAutoVerticalPosition(t){let e=window.innerHeight,i=this.getVerticalPosition(t);return("top"===t||"middle"===t)&&i<0?[this.getVerticalPosition("bottom"),"bottom"]:("bottom"===t||"middle"===t)&&i+Pr(this,Lr)>e?[this.getVerticalPosition("top"),"top"]:[i,t]}getAutoHorizontalPosition(t){let e=window.innerWidth,i=this.getHorizontalPosition(t);return("right"===t||"center"===t)&&i<0?[this.getHorizontalPosition("left"),"left"]:("left"===t||"center"===t)&&i+Pr(this,xr)>e?[this.getHorizontalPosition("right"),"right"]:[i,t]}getTopPosition(){return this.throwIfNotValid("getTopPosition"),Pr(this,Tr).top-Pr(this,Sr)-Pr(this,Lr)}getBottomPosition(){return this.throwIfNotValid("getBottomPosition"),Pr(this,Tr).top+Pr(this,Tr).height+Pr(this,Sr)}getMiddlePosition(){return this.throwIfNotValid("getMiddlePosition"),Pr(this,Tr).top+Pr(this,Tr).height/2-Pr(this,Lr)/2}getLeftPosition(){return this.throwIfNotValid("getLeftPosition"),Pr(this,Tr).left}getRightPosition(){return this.throwIfNotValid("getRightPosition"),Pr(this,Tr).left+Pr(this,Tr).width-Pr(this,xr)}getCenterPosition(){return this.throwIfNotValid("getCenterPosition"),Pr(this,Tr).left+Pr(this,Tr).width/2-Pr(this,xr)/2}validate(){return et(Pr(this,Tr))&&Pr(this,Lr)>0&&Pr(this,xr)>0}throwIfNotValid(t){if(!this.validate())throw new l(`[${t}] Position cannot be calculated: missing data [width: ${Pr(this,xr)}][height: ${Pr(this,Lr)}]`)}}Tr=new WeakMap,xr=new WeakMap,Lr=new WeakMap,Sr=new WeakMap;var Nr,Dr,Hr,_r,Rr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$r=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fr{constructor(t){Nr.set(this,void 0),Dr.set(this,void 0),Hr.set(this,void 0),_r.set(this,void 0),Rr(this,Dr,"top-center"),Rr(this,Nr,""),Rr(this,Hr,null!=t?t:new Or),Rr(this,_r,Ot.get("CuiBasePositionCalculator"))}setMargin(t){$r(this,Hr).setMargin(t)}setPreferred(t){Rr(this,Dr,t)}setStatic(t){Rr(this,Nr,t)}calculate(t,e){if($r(this,Hr).setElementBox(t),$r(this,Hr).setTarget(e),et($r(this,Nr))){$r(this,_r).debug("Evaluating static position");const[t,e]=this.parse($r(this,Nr));return[$r(this,Hr).getHorizontalPosition(e),$r(this,Hr).getVerticalPosition(t),$r(this,Nr)]}let[i,s]=["",""];et($r(this,Dr))&&($r(this,_r).debug("Evaluating auto position"),[i,s]=this.parse($r(this,Dr))),i=null!=i?i:"top",s=null!=s?s:"center",$r(this,_r).debug("Calculating position: "+i+"-"+s);const[n,r]=$r(this,Hr).getAutoVerticalPosition(i),[o,h]=$r(this,Hr).getAutoHorizontalPosition(s);return $r(this,_r).debug("Calculated position: "+r+"-"+h),[o,n,r+"-"+h]}parse(t){return t.split("-")}}Nr=new WeakMap,Dr=new WeakMap,Hr=new WeakMap,_r=new WeakMap;var Br,qr,zr,Vr,Ur=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Yr{constructor(t,e,i){Br.set(this,void 0),qr.set(this,void 0),zr.set(this,void 0),Vr.set(this,void 0),Ur(this,qr,e),Ur(this,zr,t),Ur(this,Vr,i)}start(){this.canRun()&&(this.stop(),Ur(this,Br,setTimeout(()=>{jr(this,Vr).call(this),Ur(this,Br,null),jr(this,qr)&&this.start()},jr(this,zr))))}stop(){jr(this,Br)&&(clearTimeout(jr(this,Br)),Ur(this,Br,null))}getId(){return jr(this,Br)}canRun(){return et(jr(this,Vr))&&jr(this,zr)>0}setCallback(t){Ur(this,Vr,t)}setTimeout(t){Ur(this,zr,t)}}Br=new WeakMap,qr=new WeakMap,zr=new WeakMap,Vr=new WeakMap;var Xr,Kr,Gr,Zr,Jr,Qr,to,eo,io,so,no,ro,oo,ho,ao=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},lo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},co=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class uo extends Ss{constructor(t){super({props:{trigger:{corrector:Ct}}}),this.mode="click",this.trigger=Ct("> a, button"),this.autoClose=!1,this.outClose=!1,this.prevent=!1,this.pos="",this.action=ft("{prefix}-drop-animation-in",t),this.timeout=3e3,this.margin=8}}class po{constructor(t){Xr.set(this,void 0),lo(this,Xr,null!=t?t:"cui"),this.attribute=co(this,Xr)+"-drop"}getStyle(){return null}get(t,e){return new vo(t,e,this.attribute,co(this,Xr))}}Xr=new WeakMap;class vo extends ks{constructor(t,e,i,s){super("CuidropHandler",t,i,new uo(s),e),Kr.set(this,void 0),Gr.set(this,void 0),Zr.set(this,void 0),Jr.set(this,void 0),Qr.set(this,void 0),to.set(this,void 0),eo.set(this,void 0),io.set(this,void 0),so.set(this,void 0),no.set(this,void 0),ro.set(this,void 0),oo.set(this,void 0),ho.set(this,void 0),lo(this,Zr,i),lo(this,Kr,s),lo(this,Gr,ft("{prefix}-drop-open",s)),lo(this,Qr,new Ar(this.element)),co(this,Qr).setCallback(this.onElementHover.bind(this)),lo(this,eo,null),lo(this,io,null),lo(this,so,null),this.onTriggerClick=this.onTriggerClick.bind(this),lo(this,no,new Fr),co(this,no).setMargin(8),co(this,no).setPreferred("bottom-left"),lo(this,ro,""),lo(this,Jr,void 0),lo(this,to,this.element),lo(this,ho,[]),lo(this,oo,new Yr(this.args.timeout,!1,this.close.bind(this))),e.isPlugin("click-plugin")||this.logWarning("Window click plugin is not available: outClose will not work")}onHandle(){return ao(this,void 0,void 0,(function*(){return lo(this,to,this.acquireTrigger()),lo(this,Jr,new Ar(co(this,to))),this.setTriggerEvent(),lo(this,io,this.onEvent(M,this.open.bind(this))),lo(this,so,this.onEvent(E,this.close.bind(this))),co(this,no).setStatic(this.args.pos),co(this,no).setMargin(this.args.margin),lo(this,oo,new Yr(this.args.timeout,!1,this.close.bind(this))),lo(this,ho,mi.get(this.args.action)),this.mutate(()=>{rs.setAria(this.element,"aria-dropdown","")}),!0}))}onRefresh(){return ao(this,void 0,void 0,(function*(){return co(this,Jr)&&co(this,Jr).isAttached()?co(this,Jr).detach():this.prevArgs&&"click"===this.prevArgs.mode&&co(this,to).removeEventListener("click",this.onTriggerClick),lo(this,to,this.acquireTrigger()),lo(this,Jr,new Ar(co(this,to))),this.setTriggerEvent(),co(this,no).setStatic(this.args.pos),co(this,no).setMargin(this.args.margin),lo(this,ho,mi.get(this.args.action)),co(this,oo).setTimeout(this.args.timeout),!0}))}onRemove(){return ao(this,void 0,void 0,(function*(){return this.detachEvent(M,co(this,io)),this.detachEvent(E,co(this,so)),!0}))}open(){return ao(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?this.close():(this.isAnyActive()&&(yield this.findAndCloseOpenedDrop()),this.isLocked=!0,this._log.debug("Drop "+this.cuid,"open"),this.onOpen(),this.isLocked=!1,!0))}))}close(){return ao(this,void 0,void 0,(function*(){return!(this.checkLockAndWarn("close")||!this.isActive())&&(this.isLocked=!0,this.logInfo("Drop "+this.cuid,"close"),this.onClose(),this.detachEvent(N,co(this,eo)),this.emitEvent(W,{timestamp:Date.now()}),co(this,Qr).detach(),this.isLocked=!1,!0)}))}onClose(){this.mutate(()=>{this.helper.removeClass(this.activeClassName,this.element),this.helper.removeClass(co(this,Gr),document.body),this.toggleActions(),this.helper.removeClass(co(this,ro),this.element),rs.setAria(this.element,"aria-expanded","false")})}onOpen(){this.helper.setClass(this.activeClassName,this.element),this.mutate(()=>{const t=co(this,to).getBoundingClientRect();try{const[e,i,s]=co(this,no).calculate(t,this.element.getBoundingClientRect());this.element.style.top=i-t.top+"px",this.element.style.left=e-t.left+"px",lo(this,ro,ft("{prefix}-drop-position-"+s,co(this,Kr))),this.toggleActions(),this.helper.setClass(co(this,ro),this.element),this.helper.setClass(co(this,Gr),document.body),this.emitEvent(C,{timestamp:Date.now()}),co(this,Qr).attach(),this.runAutoCloseTask(),this.args.outClose&&lo(this,eo,this.onEvent(N,this.onWindowClick.bind(this))),rs.setAria(this.element,"aria-expanded","true")}catch(t){this._log.exception(t)}})}onWindowClick(t){this.element.contains(t.ev.target)||this.close()}isAnyActive(){return this.helper.hasClass(co(this,Gr),document.body)}findAndCloseOpenedDrop(){return ao(this,void 0,void 0,(function*(){const t=document.querySelector(`[${co(this,Zr)}].${this.activeClassName}`);if(!et(t))return this._log.warning("Opened drop was not found"),!1;const e=t.$handlers[co(this,Zr)];return et(e)?e.close():(this._log.warning("Drop handler was not found in the element"),!1)}))}onTriggerClick(t){this.isActive()?this.close():this.open(),this.args.prevent&&t.preventDefault()}onHoverEvent(t){t.isHovering&&!this.isActive()&&this.open(),this.args.prevent&&t.event.preventDefault()}onElementHover(t){t.isHovering?co(this,oo).stop():!t.isHovering&&this.args.autoClose&&this.runAutoCloseTask()}setTriggerEvent(){"hover"===this.args.mode&&co(this,Jr)?(co(this,Jr).setCallback(this.onHoverEvent.bind(this)),co(this,Jr).attach()):co(this,to).addEventListener("click",this.onTriggerClick)}runAutoCloseTask(){this.args.autoClose&&co(this,oo).start()}toggleActions(){co(this,ho).forEach(t=>{t.toggle(this.element)})}acquireTrigger(){let t=null;return t=this.element.parentElement?this.element.parentElement.querySelector(this.args.trigger):document.querySelector(this.args.trigger),null!=t?t:this.element}}Kr=new WeakMap,Gr=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,Qr=new WeakMap,to=new WeakMap,eo=new WeakMap,io=new WeakMap,so=new WeakMap,no=new WeakMap,ro=new WeakMap,oo=new WeakMap,ho=new WeakMap;var fo,go,mo,wo,ko,yo,bo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Mo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Co{constructor(t){fo.set(this,void 0),go.set(this,void 0),mo.set(this,void 0),wo.set(this,void 0),ko.set(this,void 0),yo.set(this,void 0),bo(this,mo,!1),bo(this,fo,null!=t?t:document.body),bo(this,wo,!1),bo(this,ko,!1),bo(this,go,void 0),bo(this,yo,void 0),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this)}setCallback(t){bo(this,go,t)}setTarget(t){bo(this,yo,t)}isInProgress(){return Mo(this,mo)}preventDefault(t){bo(this,ko,t)}attach(){Mo(this,wo)||(Mo(this,fo).addEventListener("mousedown",this.onMouseDown,{passive:!1}),Mo(this,fo).addEventListener("mouseup",this.onMouseUp,{passive:!1}),Mo(this,fo).addEventListener("mousemove",this.onMouseMove,{passive:!1}),Mo(this,fo).addEventListener("touchstart",this.onTouchStart,{passive:!1}),Mo(this,fo).addEventListener("touchend",this.onTouchEnd,{passive:!1}),Mo(this,fo).addEventListener("touchmove",this.onTouchMove,{passive:!1}),bo(this,wo,!0))}detach(){Mo(this,wo)&&(Mo(this,fo).removeEventListener("mousedown",this.onMouseDown,{passive:!1}),Mo(this,fo).removeEventListener("mouseup",this.onMouseUp,{passive:!1}),Mo(this,fo).removeEventListener("mousemove",this.onMouseMove,{passive:!1}),Mo(this,fo).removeEventListener("touchstart",this.onTouchStart,{passive:!1}),Mo(this,fo).removeEventListener("touchend",this.onTouchEnd,{passive:!1}),Mo(this,fo).removeEventListener("touchmove",this.onTouchMove,{passive:!1}),bo(this,wo,!1))}isAttached(){return Mo(this,wo)}onMouseDown(t){Mo(this,mo)||Mo(this,yo)&&!Mo(this,yo).contains(t.target)||(bo(this,mo,!0),this.publishMouseEvent("down",t))}onMouseUp(t){Mo(this,mo)&&(bo(this,mo,!1),this.publishMouseEvent("up",t))}onMouseMove(t){Mo(this,mo)&&this.publishMouseEvent("move",t)}onTouchStart(t){Mo(this,mo)||Mo(this,yo)&&!Mo(this,yo).contains(t.target)||(bo(this,mo,!0),this.publishTouchEvent("down",t))}onTouchEnd(t){Mo(this,mo)&&(bo(this,mo,!1),this.publishTouchEvent("up",t))}onTouchMove(t){Mo(this,mo)&&this.publishTouchEvent("move",t)}publishMouseEvent(t,e){Mo(this,ko)&&e.cancelable&&e.preventDefault(),et(Mo(this,go))&&Mo(this,go).call(this,{type:t,x:e.clientX,y:e.clientY,moveX:e.movementX,moveY:e.movementY,target:e.target,event:e})}publishTouchEvent(t,e){if(Mo(this,ko)&&e.cancelable&&e.preventDefault(),!et(Mo(this,go)))return;let i=null;e.touches.length>0?i=e.touches[0]:e.changedTouches.length>0&&(i=e.changedTouches[0]),Mo(this,go).call(this,{event:e,type:t,target:e.target,x:et(i)?i.clientX:-1,y:et(i)?i.clientY:-1,moveX:-1,moveY:-1})}}fo=new WeakMap,go=new WeakMap,mo=new WeakMap,wo=new WeakMap,ko=new WeakMap,yo=new WeakMap;var Eo,Wo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ao=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class To{calculate(t,e,i,s){return[t,e]}}new WeakMap;class xo{constructor(t){Eo.set(this,void 0),Wo(this,Eo,t)}calculate(t,e,i,s){return[t-Ao(this,Eo).offsetLeft,e-Ao(this,Eo).offsetTop]}}Eo=new WeakMap;new WeakMap;var Lo,So,Io,Po,Oo,No,Do,Ho,_o,Ro,$o,Fo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qo extends Ss{constructor(t,e){super(),this.escClose=!1,this.keyClose="",this.openAct=ft(".{prefix}-float-default-in",t),this.closeAct=ft(".{prefix}-float-default-out",t),this.timeout=null!=e?e:300}}class zo{constructor(t){Lo.set(this,void 0),Fo(this,Lo,null!=t?t:"cui"),this.attribute=Bo(this,Lo)+"-float"}getStyle(){return null}get(t,e){return new Vo(t,e,this.attribute,Bo(this,Lo))}}Lo=new WeakMap;class Vo extends ys{constructor(t,e,i,s){super("CuiFloatHandler",t,i,new qo(s,e.setup.animationTime),e),So.set(this,void 0),Io.set(this,void 0),Po.set(this,void 0),Oo.set(this,void 0),No.set(this,void 0),Do.set(this,void 0),Ho.set(this,void 0),_o.set(this,void 0),Ro.set(this,void 0),$o.set(this,void 0),Fo(this,So,!1),Fo(this,Io,!1),Fo(this,Po,0),Fo(this,Oo,0),Fo(this,Do,new Co),Bo(this,Do).preventDefault(!1),Fo(this,Ho,new To),Fo(this,_o,new xo(t)),Fo(this,No,s),this.move=this.move.bind(this),this.resize=this.resize.bind(this),Fo(this,$o,null),Fo(this,Ro,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){rs.setAria(this.element,"aria-modal",""),Fo(this,$o,this.element.querySelector(ft(".{prefix}-float-move",Bo(this,No)))),Fo(this,Ro,this.element.querySelector(ft(".{prefix}-float-resize",Bo(this,No)))),Bo(this,Do).setCallback(this.onMove.bind(this))}onUpdate(){}onDestroy(){}onBeforeOpen(){return!0}onAfterOpen(){Bo(this,Do).attach()}onAfterClose(){Bo(this,Do).detach()}onBeforeClose(){return!0}onMove(t){switch(t.type){case"down":this.onMouseDown(t);break;case"up":this.onMouseUp(t);break;case"move":this.onMouseMove(t)}}onMouseDown(t){t.target===Bo(this,$o)?(Fo(this,So,!0),t.event.preventDefault()):t.target===Bo(this,Ro)&&(Fo(this,Io,!0),t.event.preventDefault()),Fo(this,Po,t.x),Fo(this,Oo,t.y),this.helper.setClassesAs(document.body,p),this.utils.bus.emit($,null,!0)}onMouseMove(t){Bo(this,So)?this.peform(t,this.move):Bo(this,Io)&&this.peform(t,this.resize)}onMouseUp(t){Fo(this,So,!1),Fo(this,Io,!1),this.helper.removeClassesAs(document.body,p),this.utils.bus.emit($,null,!1)}peform(t,e){this.mutate(()=>{et(e)&&e(this.element,t.x,t.y,t.x-Bo(this,Po),t.y-Bo(this,Oo)),Fo(this,Po,t.x),Fo(this,Oo,t.y)}),t.event.preventDefault()}resize(t,e,i,s,n){let[r,o]=Bo(this,_o).calculate(e,i,s,n);this.fitsWindow(t.offsetTop,t.offsetLeft,r,o)&&this.mutate(()=>{t.style.width=r+"px",t.style.height=o+"px"})}move(t,e,i,s,n){let[r,o]=Bo(this,Ho).calculate(e,i,s,n);this.fitsWindow(o,r,t.offsetWidth,t.offsetHeight)&&this.mutate(()=>{t.style.left=r+"px",t.style.top=o+"px"})}fitsWindow(t,e,i,s){return t+s<window.innerHeight-10&&t>10&&e>10&&e+i<window.innerWidth-10}}So=new WeakMap,Io=new WeakMap,Po=new WeakMap,Oo=new WeakMap,No=new WeakMap,Do=new WeakMap,Ho=new WeakMap,_o=new WeakMap,Ro=new WeakMap,$o=new WeakMap;var Uo,jo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Yo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ko extends Ss{constructor(){super({main:"icon"}),this.icon="",this.scale=1}}class Go{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new Zo(t,e,this.attribute)}}class Zo extends ks{constructor(t,e,i){super("CuiIconHandler",t,i,new Ko,e),Uo.set(this,void 0),Yo(this,Uo,null)}onHandle(){return jo(this,void 0,void 0,(function*(){return null!==Xo(this,Uo)?(this._log.debug("Icon already initialized"),!1):(Yo(this,Uo,this.args.icon),this.addIcon(this.args.icon),!0)}))}onRefresh(){return jo(this,void 0,void 0,(function*(){return this.args.icon!==Xo(this,Uo)&&(Yo(this,Uo,this.args.icon),this.addIcon(this.args.icon),!0)}))}onRemove(){return jo(this,void 0,void 0,(function*(){const t=this.element.querySelector("svg");return et(t)&&t.remove(),Yo(this,Uo,null),!0}))}addIcon(t){const e=t?v[t]:null;if(!e)return;const i=new In(e).setScale(this.args.scale).build(),s=this.element.querySelector("svg");et(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}insertBefore(t){this.element.insertBefore(t,this.element.firstChild)}appendChild(t){this.element.appendChild(t)}}Uo=new WeakMap;var Jo,Qo,th,eh,ih=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class nh{constructor(t,e){Jo.set(this,void 0),Qo.set(this,void 0),th.set(this,void 0),eh.set(this,void 0),ih(this,Qo,t),ih(this,th,null!=e?e:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]),ih(this,eh,void 0),ih(this,Jo,void 0)}setCallback(t){ih(this,eh,t)}connect(){sh(this,eh)&&ih(this,Jo,new IntersectionObserver(sh(this,eh),{root:sh(this,Qo),rootMargin:"0px",threshold:sh(this,th)}))}observe(t){sh(this,Jo)&&sh(this,Jo).observe(t)}unobserve(t){sh(this,Jo)&&sh(this,Jo).unobserve(t)}disconnect(){sh(this,Jo)&&sh(this,Jo).disconnect()}}Jo=new WeakMap,Qo=new WeakMap,th=new WeakMap,eh=new WeakMap;var rh,oh,hh,ah=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},lh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ch=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class uh extends Ss{constructor(){super({props:{offset:{corrector:t=>rt(t,0,1,0)},target:{corrector:Ct}}}),this.target=Ct("> *"),this.action="",this.offset=0,this.isRoot=!1}}class dh{constructor(t){this.attribute=(null!=t?t:"cui")+"-intersection"}getStyle(){return null}get(t,e){return new ph(t,e,this.attribute)}}class ph extends ks{constructor(t,e,i){super("CuiIntersectionHandler",t,i,new uh,e),rh.set(this,void 0),oh.set(this,void 0),hh.set(this,void 0),lh(this,rh,new nh(this.element)),lh(this,oh,[]),lh(this,hh,[])}onHandle(){return ah(this,void 0,void 0,(function*(){return this.parseArguments(),ch(this,rh).setCallback(this.onIntersection.bind(this)),ch(this,rh).connect(),ch(this,oh).forEach(t=>{ch(this,rh).observe(t)}),!0}))}onRefresh(){return ah(this,void 0,void 0,(function*(){return this.parseArguments(),!0}))}onRemove(){return ah(this,void 0,void 0,(function*(){return ch(this,rh).disconnect(),!0}))}parseArguments(){if(!et(this.prevArgs)||this.prevArgs.target!==this.args.target){let t=this.args.isRoot?document.body:this.element;lh(this,oh,[...t.querySelectorAll(this.args.target)])}lh(this,hh,mi.get(this.args.action))}onIntersection(t,e){et(ch(this,oh))&&t.forEach(t=>{t.isIntersecting&&t.intersectionRatio>=this.args.offset?this.addActions(t.target):this.removeActions(t.target),this.emitIntersection(t)})}emitIntersection(t){this.emitEvent(P,{entry:t,offset:this.args.offset,timestamp:Date.now()})}addActions(t){ch(this,hh).forEach(e=>e.add(t))}removeActions(t){ch(this,hh).forEach(e=>e.remove(t))}}rh=new WeakMap,oh=new WeakMap,hh=new WeakMap;var vh,fh,gh,mh,wh,kh,yh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},bh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Mh extends Ss{constructor(t,e){super(),vh.set(this,void 0),yh(this,vh,t),this.escClose=!1,this.position="right",this.openAct=this.getDefaultOpenClass(),this.closeAct=this.getDefaultCloseClass(),this.timeout=null!=e?e:300,this.outClose=!1,this.keyClose=""}getDefaultOpenClass(){return ft("right"===this.position?".{prefix}-offcanvas-default-right-in":".{prefix}-offcanvas-default-left-in",bh(this,vh))}getDefaultCloseClass(){return ft("right"===this.position?".{prefix}-offcanvas-default-right-out":".{prefix}-offcanvas-default-left-out",bh(this,vh))}}vh=new WeakMap;class Ch{constructor(t){fh.set(this,void 0),yh(this,fh,null!=t?t:"cui"),this.attribute=bh(this,fh)+"-off-canvas"}getStyle(){return null}get(t,e){return new Eh(t,e,this.attribute,bh(this,fh))}}fh=new WeakMap;class Eh extends ys{constructor(t,e,i,s){super("CuiOffCanvasHandler",t,i,new Mh(s,e.setup.animationTime),e),gh.set(this,void 0),mh.set(this,void 0),wh.set(this,void 0),kh.set(this,void 0),yh(this,gh,s),yh(this,mh,ft("{prefix}-off-canvas-open",s)),yh(this,kh,null),yh(this,wh,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){this.mutate(()=>{this.setPositionLeft(),rs.setAria(this.element,"aria-modal","")})}onUpdate(){this.setPositionLeft()}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(yh(this,wh,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&yh(this,kh,this.onEvent(N,this.onWindowClick.bind(this))),this.helper.setClass(bh(this,mh),document.body),document.body.style.top=`-${scrollY}px`}onAfterClose(){this.detachEvent(N,bh(this,kh)),this.helper.removeClass(bh(this,mh),document.body),document.body.style.top="",window.scrollTo(0,-1*bh(this,wh))}onBeforeClose(){return!0}onWindowClick(t){const e=this.element.querySelector(ft(".{prefix}-off-canvas-container",bh(this,gh)));e&&!e.contains(t.ev.target)&&this.close()}isAnyActive(){return this.helper.hasClass(bh(this,mh),document.body)}setPositionLeft(){let t=it(bh(this,gh),"left");"left"!==this.args.position||this.helper.hasClass(t,this.element)?"right"==this.args.position&&this.helper.hasClass(t,this.element)&&this.helper.removeClass(t,this.element):this.helper.setClass(t,this.element)}}gh=new WeakMap,mh=new WeakMap,wh=new WeakMap,kh=new WeakMap;var Wh,Ah,Th,xh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Lh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Sh{static get(t){return t instanceof Window?new Oh:t instanceof HTMLElement?new Ph(t):new Ih(t)}}class Ih{constructor(t){Wh.set(this,void 0),Ah.set(this,void 0),xh(this,Ah,t),xh(this,Wh,t.getBoundingClientRect())}getHeight(){return Lh(this,Wh).height}getWidth(){return Lh(this,Wh).width}getTop(){return Lh(this,Wh).top}getLeft(){return Lh(this,Wh).left}getScrollHeight(){return Lh(this,Ah).scrollHeight}getScrollWidth(){return Lh(this,Ah).scrollWidth}getScrollTop(){return Lh(this,Ah).scrollTop}getScrollLeft(){return Lh(this,Ah).scrollLeft}queryAll(t){return[...Lh(this,Ah).querySelectorAll(t)]}}Wh=new WeakMap,Ah=new WeakMap;class Ph{constructor(t){Th.set(this,void 0),xh(this,Th,t)}getHeight(){return Lh(this,Th).offsetHeight}getWidth(){return Lh(this,Th).offsetWidth}getTop(){return Lh(this,Th).offsetTop}getLeft(){return Lh(this,Th).offsetLeft}getScrollHeight(){return Lh(this,Th).scrollHeight}getScrollWidth(){return Lh(this,Th).scrollWidth}getScrollTop(){return Lh(this,Th).scrollTop}getScrollLeft(){return Lh(this,Th).scrollLeft}queryAll(t){return[...Lh(this,Th).querySelectorAll(t)]}}Th=new WeakMap;class Oh{getHeight(){return window.innerHeight}getWidth(){return window.innerWidth}getTop(){return 0}getLeft(){return 0}getScrollHeight(){return window.innerHeight}getScrollWidth(){return window.innerWidth}getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}queryAll(t){return[...document.querySelectorAll(t)]}}var Nh,Dh,Hh,_h,Rh,$h,Fh,Bh,qh,zh,Vh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Uh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class jh{constructor(t,e){Nh.set(this,void 0),Dh.set(this,void 0),Hh.set(this,void 0),_h.set(this,void 0),Rh.set(this,void 0),$h.set(this,void 0),Fh.set(this,void 0),Bh.set(this,void 0),qh.set(this,void 0),zh.set(this,void 0),Vh(this,Nh,t),Vh(this,Bh,Sh.get(t)),Vh(this,Dh,!1),Vh(this,Hh,rt(e,0,100,0)),Vh(this,_h,Vh(this,Rh,0)),Vh(this,Fh,!1),Vh(this,$h,void 0),Vh(this,qh,new Yr(50,!1,this.onScrollFinish.bind(this))),Vh(this,zh,this.listener.bind(this))}setCallback(t){Vh(this,$h,t)}attach(){Uh(this,Nh).addEventListener("scroll",Uh(this,zh)),Vh(this,Fh,!0),this.listener(void 0,!0,"init")}detach(){Uh(this,Nh).removeEventListener("scroll",Uh(this,zh)),Uh(this,qh).stop(),Vh(this,Fh,!1)}setTarget(t){t!==Uh(this,Nh)&&(this.detach(),Vh(this,Nh,t),this.attach())}setThreshold(t){Vh(this,Hh,rt(t,0,100,0))}isInProgress(){return Uh(this,Dh)}isAttached(){return Uh(this,Fh)}listener(t,e,i){if(!et(Uh(this,$h)))return;let s=Uh(this,Bh).getScrollLeft(),n=Uh(this,Bh).getScrollTop();Vh(this,_h,Uh(this,_h)+s),Vh(this,Rh,Uh(this,Rh)+n),Uh(this,Dh)||!this.passedThreshold()&&et(t)||(Vh(this,Dh,!0),Uh(this,$h).call(this,{base:t,top:n,left:s,initial:null!=e&&e,scrolling:et(t),source:null!=i?i:"event"}),et(t)&&Uh(this,qh).start(),Vh(this,Dh,!1),Vh(this,_h,0),Vh(this,Rh,0))}passedThreshold(){return Uh(this,Hh)<=0||Uh(this,_h)>=Uh(this,Hh)||Uh(this,Rh)>=Uh(this,Hh)}onScrollFinish(){this.listener(void 0,!1,"task")}}Nh=new WeakMap,Dh=new WeakMap,Hh=new WeakMap,_h=new WeakMap,Rh=new WeakMap,$h=new WeakMap,Fh=new WeakMap,Bh=new WeakMap,qh=new WeakMap,zh=new WeakMap;var Yh,Xh,Kh,Gh,Zh,Jh,Qh,ta=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ea=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ia{matches(t,e,i,s){return i>0&&e>=i||s>0&&t>=s}}class sa{constructor(){Yh.set(this,void 0),Xh.set(this,void 0),Kh.set(this,void 0),Gh.set(this,void 0),Zh.set(this,void 0),Jh.set(this,void 0),Qh.set(this,void 0),ta(this,Yh,0),ta(this,Xh,0),ta(this,Gh,0),ta(this,Kh,0),ta(this,Qh,100),ta(this,Zh,!1),ta(this,Jh,!1)}matches(t,e,i,s){return this.fitsOffsetY(t,s)||this.fitsOffsetX(e,i)}fitsOffsetX(t,e){if(e<=0)return!1;let i=t-ea(this,Yh);return t>=e&&i>ea(this,Qh)?ta(this,Zh,!0):ea(this,Zh)&&i<-ea(this,Qh)&&ta(this,Zh,!1),(i<0&&ea(this,Gh)<i||i>=0&&ea(this,Gh)>i)&&ta(this,Yh,t),ta(this,Gh,i),ea(this,Zh)}fitsOffsetY(t,e){if(e<=0)return!1;let i=t-ea(this,Xh);return t>=e&&i>ea(this,Qh)?ta(this,Jh,!0):ea(this,Jh)&&i<-ea(this,Qh)&&ta(this,Jh,!1),(i<0&&ea(this,Kh)<i||i>=0&&ea(this,Kh)>i)&&ta(this,Xh,t),ta(this,Kh,i),ea(this,Jh)}}Yh=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,Gh=new WeakMap,Zh=new WeakMap,Jh=new WeakMap,Qh=new WeakMap;var na,ra,oa,ha,aa,la,ca,ua,da,pa,va=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},fa=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ga=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ma extends Ss{constructor(){super(),this.offsetX=-1,this.offsetY=-1,this.target="",this.root=!1,this.action="",this.mode="static"}}class wa{constructor(t){this.attribute=(null!=t?t:"cui")+"-offset"}getStyle(){return null}get(t,e){return new ka(t,e,this.attribute)}}class ka extends ks{constructor(t,e,i){super("CuiOffsetHandler",t,i,new ma,e),na.set(this,void 0),ra.set(this,void 0),oa.set(this,void 0),ha.set(this,void 0),aa.set(this,void 0),la.set(this,void 0),ca.set(this,void 0),ua.set(this,void 0),da.set(this,void 0),pa.set(this,void 0),this.element=t,fa(this,ra,this.element),fa(this,oa,e),fa(this,ha,!1),fa(this,aa,[]),fa(this,la,0),fa(this,ca,0),fa(this,ua,20),fa(this,da,this.element),fa(this,pa,null),fa(this,na,void 0)}onHandle(){return va(this,void 0,void 0,(function*(){return this.parseAttribute(),fa(this,na,new jh(this.args.root?window:this.element,this.utils.setup.scrollThreshold)),ga(this,na).setCallback(this.onScroll.bind(this)),ga(this,na).attach(),!0}))}onRefresh(){return va(this,void 0,void 0,(function*(){return this.parseAttribute(),!0}))}onRemove(){return va(this,void 0,void 0,(function*(){return ga(this,na)&&ga(this,na).detach(),!0}))}onScroll(t){this.checkAndPerformActions(t)}parseAttribute(){fa(this,da,this.getRoot()),fa(this,ra,this.getTarget()),fa(this,aa,mi.get(this.args.action)),fa(this,pa,class{static get(t){return"dynamic"===t?new sa:new ia}}.get(this.args.mode))}checkAndPerformActions(t){et(ga(this,pa))||this.logError("Cannot perform - mode handler not initialized","checkAndPerformActions");let e=ga(this,pa).matches(t.top,t.left,this.args.offsetX,this.args.offsetY);if(e!==ga(this,ha))return this.act(e),fa(this,ha,e),void this.callEvent(ga(this,ha),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top));this.exceededThreshold(t.left,t.top)&&(this.callEvent(ga(this,ha),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top)),fa(this,la,t.left),fa(this,ca,t.top))}act(t){ht(ga(this,aa),ga(this,ra))&&(this.isLocked=!0,ga(this,aa).forEach(e=>{t?e.add(ga(this,ra),ga(this,oa)):e.remove(ga(this,ra),ga(this,oa))}),this.isLocked=!1)}callEvent(t,e,i,s,n,r,o){this.emitEvent(D,{matches:ga(this,ha),offsetX:e,offsetY:i,ratioX:r,ratioY:o,scrolling:s,source:n,timestamp:Date.now()})}getRoot(){return this.args.root?document.body:this.element}exceededThreshold(t,e){return Math.abs(t-ga(this,la))>ga(this,ua)||Math.abs(e-ga(this,ca))>ga(this,ua)}calcaRatio(t,e){let i=parseFloat(((ga(this,da).clientHeight+e)/ga(this,da).scrollHeight).toFixed(2));return[nt(parseFloat(((ga(this,da).clientWidth+t)/ga(this,da).scrollWidth).toFixed(2)),0,1),nt(i,0,1)]}getTarget(){let t=this.args.target?ga(this,da).querySelector(this.args.target):null;return null!=t?t:this.element}}na=new WeakMap,ra=new WeakMap,oa=new WeakMap,ha=new WeakMap,aa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap,pa=new WeakMap;var ya,ba,Ma=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ca=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ea=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wa extends Ss{constructor(t){super({main:"target"}),this.target="",this.action="",this.timeout=null!=t?t:300,this.prevent=!1,this.state=""}}class Aa{constructor(t){ya.set(this,void 0),Ca(this,ya,null!=t?t:"cui"),this.attribute=Ea(this,ya)+"-open"}getStyle(){return null}get(t,e){return new Ta(t,e,this.attribute,Ea(this,ya))}}ya=new WeakMap;class Ta extends ks{constructor(t,e,i,s){super("CuiOpenHandler",t,i,new Wa(e.setup.animationTime),e),ba.set(this,void 0),Ca(this,ba,null),this.onClick=this.onClick.bind(this)}onHandle(){return Ma(this,void 0,void 0,(function*(){return this.element.addEventListener("click",this.onClick),Ca(this,ba,this.onEvent(M,this.onOpen.bind(this))),!0}))}onRefresh(){return Ma(this,void 0,void 0,(function*(){return!0}))}onRemove(){return Ma(this,void 0,void 0,(function*(){return this.element.removeEventListener("click",this.onClick),this.detachEvent(M,Ea(this,ba)),!0}))}onClick(t){this.onOpen(t),this.args.prevent&&t.preventDefault()}onOpen(t){if(this.isLocked)return;const e=this.getTarget(this.args.target);et(e)?(this.isLocked=!0,this.run(e).then(i=>{this.activateTarget(t,e,i)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return Ma(this,void 0,void 0,(function*(){let e=t.$cuid;if(et(e))return this._log.debug("Open cUI component"),yield this.utils.bus.emit(M,e,this.args.state),!1;if(this._log.debug("Open html component"),ht(this.args.timeout,this.args.action)){this._log.debug("Perfrom an action");let e=mi.get(this.args.action);return yield this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.setActiveClass(t)}),!0}return this.setActiveClassAsync(t),!0}))}setActiveClass(t){et(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClass(this.activeClassName,t)}setActiveClassAsync(t){this.fetch(()=>{et(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClassesAs(t,this.activeClassName)})}activateTarget(t,e,i){et(e)&&!this.helper.hasClass(this.activeClassName,e)&&this.helper.setClassesAs(e,this.activeClassName),i&&this.emitOpen(t)}emitOpen(t){this.emitEvent(C,{event:t,state:this.args.state,timestamp:Date.now()})}getTarget(t){if(et(t))return document.querySelector(t);let e=this.element.parentElement,i=et(e)?e.querySelectorAll("[cuid]"):void 0;return!i||i.length<2?void 0:function(t,e){let i=t.length;if(t&&0!==i)for(let s=0;s<i;s++)if(e(t[s],s))return t[s]}([...i],t=>t!==this.element)}}ba=new WeakMap;var xa,La,Sa,Ia,Pa,Oa,Na,Da,Ha,_a=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ra=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$a=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fa extends Ss{constructor(){super(),this.mode="simple",this.default="",this.small=this.medium=this.large=this.xlarge="",this.delay=0}}class Ba{constructor(t){xa.set(this,void 0),Ra(this,xa,null!=t?t:"cui"),this.attribute=$a(this,xa)+"-resize"}getStyle(){return null}get(t,e){return new qa(t,e,this.attribute)}}xa=new WeakMap;class qa extends ks{constructor(t,e,i){super("CuiResizeHandler",t,i,new Fa,e),La.set(this,void 0),Sa.set(this,void 0),Ia.set(this,void 0),Pa.set(this,void 0),Oa.set(this,void 0),Na.set(this,void 0),Da.set(this,void 0),Ha.set(this,void 0),Ra(this,La,null),Ra(this,Sa,new nh(document.documentElement,[0,.1])),$a(this,Sa).setCallback(this.onIntersection.bind(this)),Ra(this,Oa,""),Ra(this,Pa,""),Ra(this,Ia,"none"),Ra(this,Da,!1),Ra(this,Ha,void 0),Ra(this,Na,void 0)}onHandle(){return _a(this,void 0,void 0,(function*(){return Ra(this,La,this.utils.bus.on(b,this.resize.bind(this))),$a(this,Sa).connect(),$a(this,Sa).observe(this.element),Ra(this,Ia,at(window.innerWidth)),Ra(this,Da,this.isInViewport(this.element)),this.setNewValue(),this.updateElement(),!0}))}onRefresh(){return _a(this,void 0,void 0,(function*(){return this.setNewValue(),this.updateElement(),!0}))}onRemove(){return _a(this,void 0,void 0,(function*(){return null!==$a(this,La)&&(this.utils.bus.detach(b,$a(this,La)),Ra(this,La,null)),$a(this,Sa).unobserve(this.element),$a(this,Sa).disconnect(),!0}))}resize(t){Ra(this,Ia,t.current),this.setNewValue(),this.updateElement()}onIntersection(t){t.length>0&&Ra(this,Da,t[0].isIntersecting),this.updateElement()}setNewValue(){let t=this.isSmartMode()?this.getSmartValue($a(this,Ia)):this.getValue($a(this,Ia),!0);t&&t!==$a(this,Pa)&&Ra(this,Pa,t)}getValue(t,e){let i=void 0;switch(t){case"xlarge":i=this.args.xlarge;break;case"large":i=this.args.large;break;case"medium":i=this.args.medium;break;case"small":i=this.args.small;break;default:i=this.args.default}return e&&!i?this.args.default:i}getSmartValue(t){var e,i,s,n;let r=this.args.default;return"none"===t?r:(r=null!==(e=this.args.small)&&void 0!==e?e:r,"small"===t?r:(r=null!==(i=this.args.medium)&&void 0!==i?i:r,"medium"===t?r:(r=null!==(s=this.args.large)&&void 0!==s?s:r,"large"===t?r:null!==(n=this.args.xlarge)&&void 0!==n?n:r)))}updateElement(){$a(this,Da)||!this.isSmartMode()?et($a(this,Pa))?$a(this,Oa)!==$a(this,Pa)&&this.run(()=>{let t=gi.get($a(this,Pa));this.mutate(()=>{$a(this,Na)&&$a(this,Na).remove(this.element),t.add(this.element),Ra(this,Oa,$a(this,Pa)),Ra(this,Na,t)})}):this.logWarning("Not eligible to set value: "+$a(this,Pa)):this.logInfo("Not intersecting")}isSmartMode(){return"smart"===this.args.mode}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}run(t){$a(this,Ha)&&(clearTimeout($a(this,Ha)),Ra(this,Ha,void 0)),Ra(this,Ha,setTimeout(()=>{t(),Ra(this,Ha,void 0)},this.args.delay))}}La=new WeakMap,Sa=new WeakMap,Ia=new WeakMap,Pa=new WeakMap,Oa=new WeakMap,Na=new WeakMap,Da=new WeakMap,Ha=new WeakMap;var za,Va,Ua,ja=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ya=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ka extends Ss{constructor(){super({props:{behavior:{corrector:t=>Mt(t,"auto","smooth")}}}),this.target="",this.parent="",this.behavior="auto"}}class Ga{constructor(t){this.attribute=et(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new Za(t,e,this.attribute)}}class Za extends ks{constructor(t,e,i){super("CuiScrollHandler",t,i,new Ka,e),za.set(this,void 0),Va.set(this,void 0),Ua.set(this,void 0),this.element=t,Ya(this,za,null),Ya(this,Va,null),Ya(this,Ua,this.onClick.bind(this))}onHandle(){return ja(this,void 0,void 0,(function*(){return this.element.addEventListener("click",Xa(this,Ua)),this.setTargets(),!0}))}onRefresh(){return ja(this,void 0,void 0,(function*(){return this.setTargets(),!0}))}onRemove(){return ja(this,void 0,void 0,(function*(){return this.element.removeEventListener("click",Xa(this,Ua)),!0}))}onClick(t){if(!ht(Xa(this,Va),Xa(this,za)))return;let e=function(t){if(!et(t))return-1;let e=t.offsetTop-parseInt(ut(t,"margin-top"))-parseInt(ut(t,"padding-top"))-parseInt(ut(t,"border-top-width"));return e<0?t.offsetTop:e}(Xa(this,Va))-Xa(this,za).offsetTop,i=e-Xa(this,za).scrollTop;Xa(this,za).scrollBy({top:i,behavior:this.args.behavior}),this.emitEvent(S,{to:e,by:i,target:Xa(this,Va),parent:Xa(this,za),timestamp:Date.now()}),t.preventDefault()}setTargets(){Ya(this,Va,et(this.args.target)?document.querySelector(this.args.target):null),et(Xa(this,Va))&&Ya(this,za,et(this.args.parent)?document.querySelector(this.args.parent):Xa(this,Va).parentElement)}}za=new WeakMap,Va=new WeakMap,Ua=new WeakMap;var Ja,Qa,tl,el,il=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class nl{constructor(t,e){var i;Ja.set(this,void 0),Qa.set(this,void 0),tl.set(this,void 0),el.set(this,void 0),il(this,el,Sh.get(t)),il(this,Ja,new jh(t,null!==(i=null==e?void 0:e.threshold)&&void 0!==i?i:0)),sl(this,Ja).setCallback(this.onScroll.bind(this)),il(this,tl,[]),il(this,Qa,void 0)}setChildren(t){il(this,tl,t)}setThreshold(t){sl(this,Ja).setThreshold(t)}setCallback(t){il(this,Qa,t)}setParent(t){il(this,el,Sh.get(t)),sl(this,Ja).setTarget(t)}isInProgress(){return sl(this,Ja).isInProgress()}attach(){this.isAttached()||sl(this,Ja).attach()}detach(){this.isAttached()&&sl(this,Ja).detach()}isAttached(){return sl(this,Ja)&&sl(this,Ja).isAttached()}onScroll(t){ht(sl(this,tl),sl(this,Qa))&&sl(this,Qa)&&sl(this,Qa).call(this,this.prepareCallbackResult(t))}calcChildVerticalRatio(t,e,i){let s=t.offsetTop+t.offsetHeight;return nt(((i<s?i:s)-(e>t.offsetTop?e:t.offsetTop))/t.offsetHeight,0,1)}calcChildHorizontalRatio(t,e,i){let s=t.offsetLeft+t.offsetWidth;return nt(((i<s?i:s)-(e>t.offsetLeft?e:t.offsetLeft))/t.offsetWidth,0,1)}prepareCallbackResult(t){var e,i;let s=t.top+sl(this,el).getHeight(),n=t.left+sl(this,el).getWidth();return{ev:t.base,top:t.top,left:t.left,scrolling:null!==(e=t.scrolling)&&void 0!==e&&e,initial:null!==(i=t.initial)&&void 0!==i&&i,source:t.source,items:sl(this,tl).map((e,i)=>({verticalRatio:this.calcChildVerticalRatio(e,t.top,s),horizontalRatio:this.calcChildHorizontalRatio(e,t.left,n),element:e}))}}}Ja=new WeakMap,Qa=new WeakMap,tl=new WeakMap,el=new WeakMap;class rl{static get(t){return"multi"===t?new al:new hl}}class ol{constructor(t){this.previous=t}getMatching(t,e){return e.reduce((e,i,s)=>(i.verticalRatio>t&&e.push(s),e),[])}addActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.add(e)})}removeActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.remove(e)})}forEachAction(t,e,i){ht(t,e,i)&&t.forEach(t=>{e.forEach(e=>{et(e)&&i(t,e)})})}}class hl extends ol{constructor(){super(-1)}update(t,e,i,s,n){let r=this.getMatching(e,t),o=r.length,h=o>0?r[o-1]:-1,a={changed:!1};if(!this.matches(h)){if(this.previous>-1&&this.removeActions(i,t[this.previous].element),h>-1){let e=t[h].element;a.intersecting=[e],this.addActions(i,e)}return ht(s,n)&&(this.previous>-1&&this.removeActions(n,s[this.previous]),h>-1&&this.addActions(n,s[h])),this.previous=h,a.changed=!0,a.intersecting=[],a}return a}matches(t){return t===this.previous}}class al extends ol{constructor(){super([])}update(t,e,i,s,n){let r=this.getMatching(e,t),o={changed:!1};if(!this.matches(r)){let e=r.map(e=>t[e].element);return this.removeActions(i,...this.previous.map(e=>t[e].element)),this.addActions(i,...e),o.intersecting=e,ht(s,n)&&(this.removeActions(n,...this.previous.map(t=>s[t])),this.addActions(n,...r.map(t=>s[t]))),this.previous=r,o.changed=!0,o}return o}matches(t){let e=t.length;if(e!==this.previous.length)return!1;let i=0;for(i=0;i<e;i++)if(!this.previous.includes(t[i]))return!1;return!0}}var ll,cl,ul,dl,pl,vl,fl,gl=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ml=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class kl extends Ss{constructor(){super({props:{selector:{corrector:Ct},ratio:{corrector:t=>rt(t,0,1,0)},mode:{corrector:t=>Mt(t,"single","multi")}}}),this.ratio=0,this.mode="single",this.threshold=-1,this.selector=Ct("> *"),this.action="",this.isRoot=!1,this.link="",this.linkAction=""}}class yl{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new bl(t,e,this.attribute)}}class bl extends ks{constructor(t,e,i){super("CuiScrollspyHandler",t,i,new kl,e),ll.set(this,void 0),cl.set(this,void 0),ul.set(this,void 0),dl.set(this,void 0),pl.set(this,void 0),vl.set(this,void 0),fl.set(this,void 0),this.element=t,ml(this,ll,new nl(this.element,{threshold:this.utils.setup.scrollThreshold})),ml(this,cl,[]),ml(this,ul,[]),ml(this,dl,[]),ml(this,pl,void 0),ml(this,vl,void 0),ml(this,fl,void 0)}onHandle(){return gl(this,void 0,void 0,(function*(){return this.init(),wl(this,ll).setCallback(this.onIntersection.bind(this)),wl(this,ll).attach(),!0}))}onRefresh(){return gl(this,void 0,void 0,(function*(){return this.update(),!0}))}onRemove(){return gl(this,void 0,void 0,(function*(){return wl(this,ll).detach(),!0}))}onIntersection(t){if(!wl(this,fl))return void this.logError("Cannot perform - mode handler not initialized","OnIntersection");let e=Date.now();this.mutate(()=>{let i=wl(this,fl).update(t.items,this.args.ratio,wl(this,ul),wl(this,cl),wl(this,dl));i.changed&&this.emitEvent(I,{intersecting:i.intersecting,timestamp:e})}),this.emitEvent(S,{top:t.top,left:t.left,scrolling:t.scrolling,initial:t.initial,source:t.source,timestamp:e,name:S})}init(){ml(this,pl,this.args.isRoot?window:this.element),ml(this,vl,Sh.get(wl(this,pl)));let t=this.args.selector?wl(this,vl).queryAll(this.args.selector):[];wl(this,ll).setChildren(t),wl(this,ll).setThreshold(this.args.threshold),ml(this,cl,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),ml(this,ul,mi.get(this.args.action)),ml(this,dl,mi.get(this.args.linkAction)),ml(this,fl,rl.get(this.args.mode))}update(){if(this.prevArgs&&this.args.isRoot!==this.prevArgs.isRoot&&(ml(this,pl,this.args.isRoot?window:this.element),ml(this,vl,Sh.get(wl(this,pl))),wl(this,ll).setParent(wl(this,pl))),this.prevArgs&&wl(this,vl)&&this.args.selector!==this.prevArgs.selector){let t=this.args.selector?wl(this,vl).queryAll(this.args.selector):[];wl(this,ll).setChildren(t)}wl(this,ll).setThreshold(this.args.threshold),ml(this,cl,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),ml(this,ul,mi.get(this.args.action)),ml(this,dl,mi.get(this.args.linkAction)),ml(this,fl,rl.get(this.args.mode))}}ll=new WeakMap,cl=new WeakMap,ul=new WeakMap,dl=new WeakMap,pl=new WeakMap,vl=new WeakMap,fl=new WeakMap;var Ml,Cl,El,Wl,Al,Tl,xl,Ll,Sl,Il=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ol{constructor(t){Ml.set(this,void 0),Cl.set(this,void 0),El.set(this,void 0),Wl.set(this,void 0),Al.set(this,void 0),Tl.set(this,void 0),xl.set(this,void 0),Ll.set(this,void 0),Sl.set(this,void 0),Il(this,Wl,t),Il(this,Cl,[]),Il(this,El,void 0),Il(this,Ml,void 0),Il(this,Al,void 0),Il(this,Tl,[]),Il(this,xl,[]),Il(this,Sl,void 0),Il(this,Ll,void 0)}setId(t){return Il(this,Ml,t),this}setClasses(...t){return Il(this,Cl,t),this}setAttributes(t){return Il(this,El,t),this}setTextContent(t){return Il(this,Al,t),this}setChildren(...t){return Il(this,Tl,[...t]),this}setRawChildren(...t){return Il(this,xl,[...t]),this}onEvent(t,e){return Il(this,Sl,t),Il(this,Ll,e),this}build(t){let e=document.createElement(Pl(this,Wl));return et(Pl(this,Ml))&&(e.id=Pl(this,Ml)),et(Pl(this,Cl))&&e.classList.add(...Pl(this,Cl)),et(Pl(this,El))&&kt(Pl(this,El),(t,i)=>{e.setAttribute(t,i)}),et(t)?e.innerHTML=t:et(Pl(this,Al))&&(e.textContent=Pl(this,Al)),Pl(this,xl).forEach(t=>{e.appendChild(t.build())}),Pl(this,Tl).forEach(t=>e.appendChild(t)),ht(Pl(this,Sl),Pl(this,Ll))&&e.addEventListener(Pl(this,Sl),t=>{Pl(this,Ll).call(this,t)}),e}}Ml=new WeakMap,Cl=new WeakMap,El=new WeakMap,Wl=new WeakMap,Al=new WeakMap,Tl=new WeakMap,xl=new WeakMap,Ll=new WeakMap,Sl=new WeakMap;var Nl,Dl,Hl,_l=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class $l{constructor(){Nl.set(this,void 0),Dl.set(this,void 0),Hl.set(this,void 0),_l(this,Nl,[]),_l(this,Dl,0),_l(this,Hl,5)}setElements(t){_l(this,Nl,t),_l(this,Dl,Rl(this,Nl).length)}setThreshold(t){_l(this,Hl,t)}detect(t,e){if(!et(Rl(this,Nl)))return[-1,void 0];let i=-1,s=void 0;for(let n=0;n<Rl(this,Dl);n++)if(this.isInBounds(Rl(this,Nl)[n],t,e)){0===n?(i=n,s=Rl(this,Nl)[n]):n<Rl(this,Dl)-1&&(i=n+1,s=Rl(this,Nl)[n+1]);break}return[i,s]}isInBounds(t,e,i){const s=t.getBoundingClientRect();return e>s.left-Rl(this,Hl)&&e<s.left+s.width+Rl(this,Hl)&&i>s.top-Rl(this,Hl)&&i<s.top+s.height+Rl(this,Hl)}}Nl=new WeakMap,Dl=new WeakMap,Hl=new WeakMap;var Fl,Bl,ql,zl,Vl,Ul,jl,Yl,Xl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Kl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gl{constructor(t){Fl.set(this,void 0),Bl.set(this,void 0),ql.set(this,void 0),zl.set(this,void 0),Vl.set(this,void 0),Ul.set(this,void 0),jl.set(this,void 0),Yl.set(this,void 0),Xl(this,Fl,t),Xl(this,Bl,new Co),Xl(this,Ul,150),Xl(this,jl,!1),Xl(this,Yl,void 0),Kl(this,Bl).setTarget(Kl(this,Fl)),Kl(this,Bl).preventDefault(!1),Kl(this,Bl).setCallback(this.onMove.bind(this)),Xl(this,ql,void 0),Xl(this,zl,void 0),Xl(this,Vl,void 0)}setLongPressTimeout(t){Xl(this,Ul,t)}onDragStart(t){Xl(this,ql,t)}onDragOver(t){Xl(this,zl,t)}onDragEnd(t){Xl(this,Vl,t)}attach(){Kl(this,Bl).attach()}detach(){Kl(this,Bl).detach()}onMove(t){switch(t.type){case"down":if(Kl(this,jl))return;Xl(this,Yl,setTimeout(()=>{Kl(this,ql)&&Kl(this,ql).call(this,t)&&Xl(this,jl,!0)},Kl(this,Ul)));break;case"move":if(this.cancelTimeout(),!Kl(this,jl))return;Kl(this,zl)&&Kl(this,zl).call(this,t);break;case"up":if(this.cancelTimeout(),!Kl(this,jl))return;Kl(this,Vl)&&Kl(this,Vl).call(this,t),Xl(this,jl,!1)}}cancelTimeout(){Kl(this,Yl)&&(clearTimeout(Kl(this,Yl)),Xl(this,Yl,void 0))}}Fl=new WeakMap,Bl=new WeakMap,ql=new WeakMap,zl=new WeakMap,Vl=new WeakMap,Ul=new WeakMap,jl=new WeakMap,Yl=new WeakMap;var Zl,Jl,Ql,tc,ec,ic,sc,nc,rc,oc,hc,ac,lc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},cc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},uc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dc extends Ss{constructor(){super({props:{target:{corrector:Ct},trigger:{corrector:Ct}}}),this.target=Ct(" > *"),this.trigger=Ct(" > *"),this.timeout=150,this.threshold=5}}class pc{constructor(t){Zl.set(this,void 0),cc(this,Zl,null!=t?t:"cui"),this.attribute=uc(this,Zl)+"-sortable"}getStyle(){return null}get(t,e){return new vc(t,this.attribute,e,uc(this,Zl))}}Zl=new WeakMap;class vc extends ks{constructor(t,e,i,s){super("CuiSortableHandler",t,e,new dc,i),Jl.set(this,void 0),Ql.set(this,void 0),tc.set(this,void 0),ec.set(this,void 0),ic.set(this,void 0),sc.set(this,void 0),nc.set(this,void 0),rc.set(this,void 0),oc.set(this,void 0),hc.set(this,void 0),ac.set(this,void 0),cc(this,tc,[]),cc(this,Ql,[]),cc(this,ic,-1),cc(this,ec,null),cc(this,oc,null),cc(this,sc,null),cc(this,Jl,new Gl(t)),uc(this,Jl).onDragStart(this.onDragStart.bind(this)),uc(this,Jl).onDragOver(this.onDragOver.bind(this)),uc(this,Jl).onDragEnd(this.onDragEnd.bind(this)),cc(this,nc,ft("{prefix}-moving",s)),cc(this,ac,ft("{prefix}-sortable-preview",s)),cc(this,rc,new $l),cc(this,hc,new pn),uc(this,hc).setOnFinish(()=>{let t=uc(this,ec),e=uc(this,ic);this.stopMovementPrep(),this.utils.bus.emit($,null,!1),this.emitEvent(q,{item:t,index:e,timestamp:new Date})})}onHandle(){return lc(this,void 0,void 0,(function*(){return uc(this,Jl).attach(),this.getTargetsAndTrggers(),uc(this,rc).setThreshold(this.args.threshold),!0}))}onRefresh(){return lc(this,void 0,void 0,(function*(){return!this.prevArgs||this.args.target===this.prevArgs.target&&this.args.trigger===this.prevArgs.trigger||this.getTargetsAndTrggers(),uc(this,Jl).setLongPressTimeout(this.args.timeout),!0}))}onRemove(){return lc(this,void 0,void 0,(function*(){return uc(this,Jl).detach(),!0}))}getTargetsAndTrggers(){try{if(cc(this,tc,[...this.element.querySelectorAll(this.args.target)]),cc(this,Ql,[...this.element.querySelectorAll(this.args.trigger)]),uc(this,Ql).length!==uc(this,tc).length)throw new Error(`Triggers (count ${uc(this,Ql).length}) and targets (count ${uc(this,tc).length}) selector are not correct`);uc(this,rc).setElements(uc(this,tc))}catch(t){this._log.error("Incorrect trigger or target selector"),this._log.exception(t,"getTargetsAndTrggers"),cc(this,tc,[]),cc(this,Ql,[])}}onDragStart(t){return cc(this,ic,this.getPressedElementIdx(t.target)),cc(this,ec,uc(this,ic)>-1?uc(this,tc)[uc(this,ic)]:null),!!et(uc(this,ec))&&(this.utils.bus.emit($,null,!0),this.startMovementPrep(t),this.emitEvent(z,{item:uc(this,ec),index:uc(this,ic),timestamp:new Date}),!0)}onDragOver(t){this.move(t),t.event.preventDefault()}onDragEnd(t){et(uc(this,sc))&&(uc(this,hc).setElement(uc(this,sc)),uc(this,hc).setProps(this.getFinishAnimation()),uc(this,hc).finish(0,100,!1))}getPressedElementIdx(t){return uc(this,Ql).findIndex(e=>e.contains(t))}startMovementPrep(t){this.mutate(()=>{this.createPreview(),et(uc(this,ec))&&this.helper.setClass(uc(this,nc),uc(this,ec)),this.helper.setClass("cui-locked",this.element),this.helper.setClass(p,document.body),this.setPreviewPosition(t),this.setCurrentPosition(t)})}stopMovementPrep(){this.mutate(()=>{et(uc(this,ec))&&this.helper.removeClass(uc(this,nc),uc(this,ec)),this.helper.removeClass(p,document.body),this.helper.removeClass("cui-locked",this.element),this.removePreview(),cc(this,ec,null),cc(this,oc,null),this.getTargetsAndTrggers()})}move(t){this.mutate(()=>{this.setPreviewPosition(t),this.setCurrentPosition(t)})}createPreview(){et(uc(this,ec))?(cc(this,sc,new Ol("div").setClasses(uc(this,ac)).build()),uc(this,sc).style.width=uc(this,ec).offsetWidth+"px",uc(this,sc).style.height=uc(this,ec).offsetHeight+"px",document.body.appendChild(uc(this,sc))):this.logError("Cannot create preview - current target does not exist","createPreview")}removePreview(){et(uc(this,sc))&&(uc(this,sc).remove(),cc(this,sc,null))}setPreviewPosition(t){et(uc(this,sc))&&(uc(this,sc).style.top=t.y+"px",uc(this,sc).style.left=t.x+"px")}setCurrentPosition(t){if(!uc(this,ec))return;let[e,i]=uc(this,rc).detect(t.x,t.y);if(e!==uc(this,ic)&&i&&uc(this,oc)!==i){let t=i;this.insertElement(uc(this,ec),t),cc(this,oc,t),this.getTargetsAndTrggers(),cc(this,ic,e)}}insertElement(t,e){et(e)?this.element.insertBefore(t,e):this.element.appendChild(t)}getFinishAnimation(){if(!ht(uc(this,ec),uc(this,sc)))return{opacity:{from:1,to:0}};const t=uc(this,ec).getBoundingClientRect();return{opacity:{from:1,to:0},top:{from:uc(this,sc).offsetTop,to:t.top>0?t.top:uc(this,sc).offsetTop,unit:"px"},left:{from:uc(this,sc).offsetLeft,to:t.left>0?t.left:uc(this,sc).offsetLeft,unit:"px"}}}}Jl=new WeakMap,Ql=new WeakMap,tc=new WeakMap,ec=new WeakMap,ic=new WeakMap,sc=new WeakMap,nc=new WeakMap,rc=new WeakMap,oc=new WeakMap,hc=new WeakMap,ac=new WeakMap;var fc,gc,mc,wc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},kc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},yc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class bc extends Ss{constructor(){super({main:"spinner"}),this.spinner="circle",this.scale=1}}class Mc{constructor(t){fc.set(this,void 0),kc(this,fc,null!=t?t:"cui"),this.attribute=yc(this,fc)+"-spinner",v.spinner_circle='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z"></path></svg>',v.spinner_circle_double='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z"></path><path d="M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z"></path></svg>'}getStyle(){return null}get(t,e){return new Cc(t,e,this.attribute,yc(this,fc))}}fc=new WeakMap;class Cc extends ks{constructor(t,e,i,s){super("CuiSpinnerHandler",t,i,new bc,e),gc.set(this,void 0),mc.set(this,void 0),kc(this,gc,null),kc(this,mc,ft("{prefix}-animation-pause",s))}onHandle(){return wc(this,void 0,void 0,(function*(){return kc(this,gc,this.onEvent(F,this.onPause.bind(this))),this.add(),!0}))}onRefresh(){return wc(this,void 0,void 0,(function*(){return this.prevArgs&&this.args.spinner!==this.prevArgs.spinner&&this.add(),!0}))}onRemove(){return wc(this,void 0,void 0,(function*(){return this.removeIfAnyExisists(),this.detachEvent(F,yc(this,gc)),!0}))}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}add(){const t=et(this.args.spinner)?v["spinner_"+this.args.spinner]:null;if(!et(t))return void this._log.warning("Incorrect spinner name: "+this.args.spinner);this.removeIfAnyExisists();const e=new In(t).setScale(this.args.scale).build();this.mutate(this.addSpinner,e,this.args.spinner)}removeIfAnyExisists(){let t=this.element.querySelector("svg");t&&t.remove()}onPause(t){this.fetch(()=>{t&&!this.helper.hasClass(yc(this,mc),this.element)?this.helper.setClassesAs(this.element,yc(this,mc)):this.helper.removeClassesAs(this.element,yc(this,mc))}),this.emitEvent(B,t)}}gc=new WeakMap,mc=new WeakMap;var Ec,Wc,Ac,Tc,xc,Lc,Sc,Ic,Pc,Oc,Nc,Dc,Hc,_c,Rc,$c,Fc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Bc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class zc extends Ss{constructor(t,e){super({props:{targets:{corrector:Ct}}}),this.targets=Ct(" > li"),this.links="",this.autoTimeout=-1,this.height="",this.animation="slide",this.loop=!1,this.timeout=null!=e?e:300}}class Vc{constructor(t){this.attribute=(null!=t?t:"cui")+"-slider"}getStyle(){return null}get(t,e){return new Uc(t,e,this.attribute)}}class Uc extends bs{constructor(t,e,i){super("CuiSliderHandler",t,i,new zc(e.setup.prefix,e.setup.animationTime),e),Ec.set(this,void 0),Wc.set(this,void 0),Ac.set(this,void 0),Tc.set(this,void 0),xc.set(this,void 0),Lc.set(this,void 0),Sc.set(this,void 0),Ic.set(this,void 0),Pc.set(this,void 0),Oc.set(this,void 0),Nc.set(this,void 0),Dc.set(this,void 0),Hc.set(this,void 0),_c.set(this,void 0),Rc.set(this,void 0),$c.set(this,void 0),Bc(this,Ec,[]),Bc(this,Wc,-1),Bc(this,Pc,-1),Bc(this,Ac,[]),Bc(this,xc,null),Bc(this,$c,null),Bc(this,Lc,!1),Bc(this,Sc,-1),Bc(this,Ic,0),Bc(this,Oc,null),Bc(this,Nc,.4),Bc(this,Dc,new pn),Bc(this,Hc,new pn),qc(this,Dc).setOnFinish(this.onAnimationFinish.bind(this)),Bc(this,Rc,0),Bc(this,Tc,new Yr(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),Bc(this,_c,Qi[this.args.animation])}onInit(){Bc(this,xc,this.onEvent(x,this.onPushSwitch.bind(this))),Bc(this,$c,this.onEvent(R,this.onMove.bind(this))),this.getTargets(),this.getLinks(),this.getActiveIndex(),this.setLinkActive(-1,qc(this,Wc)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(qc(this,Ec)[qc(this,Wc)]))}),Bc(this,Tc,new Yr(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),Bc(this,_c,Qi[this.args.animation]),this.startTask()}onUpdate(){this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(qc(this,Ec)[qc(this,Wc)]))}),Bc(this,_c,Qi[this.args.animation]),this.startTask()}onDestroy(){qc(this,Tc).stop(),this.detachEvent(x,qc(this,xc)),this.detachEvent(R,qc(this,$c))}onMutation(t){}onMove(t){if(this.isLocked||!qc(this,_c))return;let e=qc(this,Ec)[qc(this,Wc)];switch(t.type){case"down":if(qc(this,Lc)||!e.contains(t.target))return;Bc(this,Lc,!0),Bc(this,Sc,t.x),qc(this,Dc).setElement(e),this.helper.setClassesAs(document.body,p),t.event.cancelable&&t.event.preventDefault();break;case"up":if(!qc(this,Lc))break;this.isLocked=!0;let i=Math.abs(qc(this,Ic)),s=i*this.args.timeout,n=i<=qc(this,Nc);qc(this,Dc).finish(i,s,n),qc(this,Hc).finish(i,s,n),this.helper.removeClassesAs(document.body,p),Bc(this,Lc,!1);break;case"move":if(!qc(this,Lc))break;let r=(t.x-qc(this,Sc))/e.offsetWidth;if(Math.abs(r-qc(this,Ic))<.02)break;let o=yt(qc(this,Ic)>0?"next":"prev",qc(this,Wc),qc(this,Rc));Bc(this,Ic,this.adjustMoveRatio(r)),o!==qc(this,Pc)&&(qc(this,Oc)&&this.helper.removeClass(u,qc(this,Oc)),Bc(this,Oc,qc(this,Ec)[o]),Bc(this,Pc,o),qc(this,Hc).setElement(qc(this,Oc)),qc(this,Hc).setProps(qc(this,Ic)>0?qc(this,_c).previous.right:qc(this,_c).previous.left),qc(this,Dc).setProps(qc(this,Ic)>0?qc(this,_c).current.right:qc(this,_c).current.left),this.mutate(()=>{qc(this,Oc)&&this.helper.setClass(u,qc(this,Oc))})),this.mutate(()=>{qc(this,Dc).update(Math.abs(qc(this,Ic))),qc(this,Hc).update(Math.abs(qc(this,Ic)))}),t.event.cancelable&&t.event.preventDefault()}}adjustMoveRatio(t){return this.args.loop?t:qc(this,Wc)===qc(this,Rc)-1&&t>0||0===qc(this,Wc)&&t<0?0:t}switch(t){return Fc(this,void 0,void 0,(function*(){return this.isLocked?(console.log("Locked"),!1):(this.onPushSwitch(t),!0)}))}onAnimationFinish(t,e,i){this.isLocked=!1;let s=qc(this,Ec)[qc(this,Pc)],n=qc(this,Ec)[qc(this,Wc)];e?(et(qc(this,Oc))&&(this.helper.removeClass(u,qc(this,Oc)),this.helper.removeAttribute("style",qc(this,Oc))),this.helper.removeAttribute("style",n),Bc(this,Pc,-1),Bc(this,Oc,null),Bc(this,Sc,-1),Bc(this,Ic,0)):qc(this,Pc)>-1&&this.mutate(()=>{this.helper.removeClass(u,s),this.helper.setClass(this.activeClassName,s),this.helper.removeClass(this.activeClassName,n),this.helper.removeAttribute("style",n),this.helper.removeAttribute("style",s),this.setLinkActive(qc(this,Wc),qc(this,Pc)),this.emitEvent(L,{timestamp:Date.now(),index:qc(this,Pc)}),Bc(this,Wc,qc(this,Pc)),Bc(this,Pc,-1),Bc(this,Oc,null),Bc(this,Sc,-1),Bc(this,Ic,0)}),this.startTask()}onPushSwitch(t){if(!et(t)||this.isLocked||!qc(this,_c)||!this.args.loop&&0===qc(this,Wc)&&"prev"===t||!this.args.loop&&qc(this,Wc)===qc(this,Rc)-1&&"next"===t)return;this.isLocked=!0;let e=yt(t,qc(this,Wc),qc(this,Rc));if(e==qc(this,Wc)||e<0||e>=qc(this,Ec).length)return this._log.warning(`Index ${t} is not within the suitable range`),!1;Bc(this,Pc,e);let i=qc(this,Ec)[qc(this,Wc)],s=qc(this,Ec)[qc(this,Pc)];qc(this,Dc).setElement(i),qc(this,Hc).setElement(s),qc(this,Dc).setProps("prev"===t?qc(this,_c).current.left:qc(this,_c).current.right),qc(this,Hc).setProps("prev"===t?qc(this,_c).previous.left:qc(this,_c).previous.right),this.mutate(()=>{qc(this,Dc).finish(0,this.args.timeout,!1),qc(this,Hc).finish(0,this.args.timeout,!1),this.helper.setClass(u,s)})}getActiveIndex(){Bc(this,Wc,et(qc(this,Ec))?qc(this,Ec).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return et(this.args.height)&&"auto"!==this.args.height?this.args.height:wt(t)+"px"}getTargets(){let t=this.element.querySelectorAll(this.args.targets);Bc(this,Ec,t.length>0?[...t]:[]),Bc(this,Rc,qc(this,Ec).length)}getLinks(){Bc(this,Ac,et(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}setLinkActive(t,e){et(qc(this,Ac))&&this.mutate(()=>{dt(t,0,qc(this,Ac).length-1)&&this.helper.removeClass(this.activeClassName,qc(this,Ac)[t]),dt(e,0,qc(this,Ac).length-1)&&this.helper.setClass(this.activeClassName,qc(this,Ac)[e])})}startTask(){qc(this,Tc).stop(),this.args.autoTimeout&&qc(this,Tc).start()}}Ec=new WeakMap,Wc=new WeakMap,Ac=new WeakMap,Tc=new WeakMap,xc=new WeakMap,Lc=new WeakMap,Sc=new WeakMap,Ic=new WeakMap,Pc=new WeakMap,Oc=new WeakMap,Nc=new WeakMap,Dc=new WeakMap,Hc=new WeakMap,_c=new WeakMap,Rc=new WeakMap,$c=new WeakMap;var jc,Yc,Xc,Kc,Gc,Zc,Jc,Qc,tu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},eu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},iu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class su extends Ss{constructor(t,e){super({props:{targets:{corrector:Ct}}}),this.targets=Ct(" > *"),this.in=ft(".{prefix}-switch-animation-default-in",t),this.out=ft(".{prefix}-switch-animation-default-out",t),this.timeout=null!=e?e:300,this.links="",this.switch="",this.autoTimeout=-1,this.height="auto",this.loop=!1}}class nu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switch"}getStyle(){return null}get(t,e){return new ru(t,e,this.attribute)}}class ru extends bs{constructor(t,e,i){super("CuiSwitchHandler",t,i,new su(e.setup.prefix,e.setup.animationTime),e),jc.set(this,void 0),Yc.set(this,void 0),Xc.set(this,void 0),Kc.set(this,void 0),Gc.set(this,void 0),Zc.set(this,void 0),Jc.set(this,void 0),Qc.set(this,void 0),eu(this,jc,[]),eu(this,Yc,-1),eu(this,Xc,[]),eu(this,Kc,[]),eu(this,Zc,null),eu(this,Jc,eu(this,Qc,[])),eu(this,Gc,new Yr(this.args.autoTimeout,!0,this.switch.bind(this,"next")))}onInit(){eu(this,Zc,this.onEvent(x,this.onPushSwitch.bind(this))),this.parseArguments(),this.getTargets(),this.getActiveIndex(),this.getSwitches(),this.setSwitchesActive(iu(this,Yc)),this.setLinkActive(-1,iu(this,Yc)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(iu(this,jc)[iu(this,Yc)]))}),eu(this,Gc,new Yr(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),this.startTask()}onUpdate(){this.parseArguments(),this.getTargets(),this.getSwitches(),this.setSwitchesActive(iu(this,Yc)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(iu(this,jc)[iu(this,Yc)]))}),this.startTask()}onDestroy(){iu(this,Gc).stop(),this.detachEvent(x,iu(this,Zc))}onMutation(t){this.getTargets(),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(iu(this,jc)[iu(this,Yc)]))})}switch(t){return tu(this,void 0,void 0,(function*(){if(this.isLocked)return!1;this.getSwitches(),this.getActiveIndex();let e=yt(t,iu(this,Yc),iu(this,jc).length);if(!this.args.loop&&("next"===t&&0===e||"prev"===t&&0===iu(this,Yc)))return this.logInfo("Switch blocked by loop settings","switch"),!1;if(e==iu(this,Yc)||e<0||e>=iu(this,jc).length)return this.logWarning(`Index ${t} is not within the suitable range`,"switch"),!1;this.isLocked=!0,this.setSwitchesActive(e);let i=iu(this,jc)[e];return yield this.actionsHelper.performSwitchAction(i,iu(this,Yc)>-1?iu(this,jc)[iu(this,Yc)]:null,iu(this,Jc),iu(this,Qc),()=>{i.classList.add(this.activeClassName),iu(this,Yc)>-1&&iu(this,jc)[iu(this,Yc)].classList.remove(this.activeClassName),this.setLinkActive(iu(this,Yc),e),this.helper.setStyle(this.element,"height",this.getElementHeight(i)),this.startTask(),this.isLocked=!1},this.args.timeout),this.emitEvent(L,{timestamp:Date.now(),index:e}),!0}))}onPushSwitch(t){this.switch(t)}getActiveIndex(){eu(this,Yc,et(iu(this,jc))?iu(this,jc).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return et(this.args.height)&&"auto"!==this.args.height?this.args.height:wt(t)+"px"}parseArguments(){eu(this,Jc,mi.get(this.args.in)),eu(this,Qc,mi.get(this.args.out)),eu(this,Xc,et(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}getTargets(){let t=this.element.querySelectorAll(this.args.targets);eu(this,jc,t.length>0?[...t]:[])}getSwitches(){let t=et(this.args.switch)?document.querySelectorAll(this.args.switch):null;eu(this,Kc,[]),t&&t.forEach(t=>{iu(this,Kc).push(t)})}setLinkActive(t,e){et(iu(this,Xc))&&(dt(t,0,iu(this,Xc).length-1)&&this.helper.removeClass(this.activeClassName,iu(this,Xc)[t]),dt(e,0,iu(this,Xc).length-1)&&this.helper.setClass(this.activeClassName,iu(this,Xc)[e]))}setSwitchesActive(t){iu(this,Kc).forEach(e=>{this.emitLinkSwitch(e.$cuid,t)})}emitLinkSwitch(t,e){et(t)&&this.utils.bus.emit(x,t,e)}startTask(){iu(this,Gc).stop(),this.args.autoTimeout&&iu(this,Gc).start()}}jc=new WeakMap,Yc=new WeakMap,Xc=new WeakMap,Kc=new WeakMap,Gc=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,Qc=new WeakMap;var ou,hu,au,lu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},cu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},uu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class du extends Ss{constructor(){super(),this.index="",this.target=""}}class pu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switcher"}getStyle(){return null}get(t,e){return new vu(t,e,this.attribute)}}class vu extends ks{constructor(t,e,i){super("CuiSwitcherHandler",t,i,new du,e),ou.set(this,void 0),hu.set(this,void 0),au.set(this,void 0),cu(this,ou,null),cu(this,hu,"UL"===t.tagName),this.onClickEvent=this.onClickEvent.bind(this),cu(this,au,[])}onHandle(){return lu(this,void 0,void 0,(function*(){return this.setEvents(),this.getTarget(),!0}))}onRefresh(){return lu(this,void 0,void 0,(function*(){return this.getTarget(),!0}))}onRemove(){return lu(this,void 0,void 0,(function*(){return this.removeEvents(),!0}))}getTarget(){et(this.args.target)||cu(this,ou,null);let t=document.querySelector(this.args.target);et(t)&&cu(this,ou,t.$cuid)}setEvents(){if(uu(this,hu)){this.element.querySelectorAll("li > a").forEach((t,e)=>{let i=this.onListItemClick.bind(this,e);uu(this,au).push(i),t.addEventListener("click",i)})}else this.element.addEventListener("click",this.onClickEvent)}removeEvents(){if(uu(this,hu)){this.element.querySelectorAll("li > a").forEach((t,e)=>{uu(this,au).length>e&&t.removeEventListener("click",uu(this,au)[e])}),cu(this,au,[])}else this.element.removeEventListener("click",this.onClickEvent)}onClickEvent(t){this.getTarget(),et(this.args.index)&&this.onClick(this.args.index.trim())}onListItemClick(t,e){this.getTarget(),this.onClick(t)}onClick(t){et(uu(this,ou))&&this.utils.bus.emit(x,uu(this,ou),t)}}ou=new WeakMap,hu=new WeakMap,au=new WeakMap;var fu,gu,mu,wu,ku=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},yu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},bu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Mu extends Ss{constructor(){super({main:"action"}),this.action="",this.target=""}}class Cu{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new Eu(t,e,this.attribute)}}class Eu extends ks{constructor(t,e,i){super("CuiToggleHandler",t,i,new Mu,e),fu.set(this,void 0),gu.set(this,void 0),mu.set(this,void 0),wu.set(this,void 0),yu(this,fu,this.element),yu(this,gu,e),yu(this,mu,null),yu(this,wu,[]),this.onClick=this.onClick.bind(this)}onHandle(){return ku(this,void 0,void 0,(function*(){return yu(this,fu,this.getTarget()),yu(this,wu,mi.get(this.args.action)),this.element.addEventListener("click",this.onClick),yu(this,mu,this.onEvent(A,this.toggle.bind(this))),!0}))}onRefresh(){return ku(this,void 0,void 0,(function*(){return yu(this,fu,this.getTarget()),yu(this,wu,mi.get(this.args.action)),!0}))}onRemove(){return ku(this,void 0,void 0,(function*(){return this.element.removeEventListener("click",this.onClick),this.detachEvent(A,bu(this,mu)),!0}))}toggle(){bu(this,fu)?(bu(this,wu).forEach(t=>t.toggle(bu(this,fu),bu(this,gu))),this.emitEvent(T,{action:this.args.action,target:bu(this,fu),timestamp:Date.now()})):this.logError("Target in not provided","toggle")}onClick(t){this.toggle(),t.preventDefault()}getTarget(){var t;return this.args.target&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:this.element}}fu=new WeakMap,gu=new WeakMap,mu=new WeakMap,wu=new WeakMap;var Wu,Au,Tu,xu,Lu,Su,Iu,Pu,Ou=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Nu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Du=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Hu extends Ss{constructor(t){super({main:"content"}),this.content="",this.width=150,this.margin=8,this.timeout=2e3,this.pos="",this.action=ft(".{prefix}-animation-tooltip-in",t)}}class _u{constructor(t){Wu.set(this,void 0),Nu(this,Wu,null!=t?t:"cui"),this.attribute=Du(this,Wu)+"-tooltip"}getStyle(){return null}get(t,e){return new Ru(t,this.attribute,e,Du(this,Wu))}}Wu=new WeakMap;class Ru extends ks{constructor(t,e,i,s){super("CuiTooltipHandler",t,e,new Hu(s),i),Au.set(this,void 0),Tu.set(this,void 0),xu.set(this,void 0),Lu.set(this,void 0),Su.set(this,void 0),Iu.set(this,void 0),Pu.set(this,void 0),Nu(this,Tu,void 0),Nu(this,Iu,[]),Nu(this,Pu,void 0),Nu(this,Su,ft("{prefix}-tooltip-data",s)),Nu(this,Au,new Ar(t)),Du(this,Au).setCallback(this.onHover.bind(this)),Nu(this,xu,8),Nu(this,Lu,new Fr),Du(this,Lu).setPreferred("top-center")}onHandle(){return Ou(this,void 0,void 0,(function*(){return Du(this,Au).attach(),this.getDataFromArgs(),Nu(this,Pu,new Yr(this.args.timeout,!1,this.removeTooltip.bind(this))),!0}))}onRefresh(){return Ou(this,void 0,void 0,(function*(){return this.getDataFromArgs(),Du(this,Pu)&&Du(this,Pu).setTimeout(this.args.timeout),!0}))}onRemove(){return Ou(this,void 0,void 0,(function*(){return this.removeTooltip(),Du(this,Au).detach(),!0}))}onHover(t){t.isHovering?this.createTooltip():this.removeTooltip()}createTooltip(){if(et(Du(this,Tu))||!et(this.args.content))return;const t=this.element.getBoundingClientRect();Nu(this,Tu,new Ol("div").setClasses(Du(this,Su)).build()),Du(this,Tu).textContent=this.args.content,Du(this,Tu).style.maxWidth=this.args.width+"px",document.body.appendChild(Du(this,Tu)),this.mutate(()=>{if(!Du(this,Tu))return;const e=Du(this,Tu).getBoundingClientRect();Du(this,Lu).setMargin(Du(this,xu));try{let[i,s]=Du(this,Lu).calculate(t,e);Du(this,Tu).style.top=s+"px",Du(this,Tu).style.left=i+"px",this.toggleActions(),Du(this,Pu)&&Du(this,Pu).start()}catch(t){this.logError(t.message,"createTooltip",t)}})}removeTooltip(){Du(this,Pu)&&Du(this,Pu).stop(),this.mutate(()=>{et(Du(this,Tu))&&(Du(this,Tu).remove(),Nu(this,Tu,void 0))})}getDataFromArgs(){Du(this,Lu).setMargin(this.args.margin),Du(this,Lu).setStatic(this.args.pos),Nu(this,Iu,mi.get(this.args.action))}toggleActions(){Du(this,Tu)&&Du(this,Iu).forEach(t=>{t.toggle(Du(this,Tu))})}}Au=new WeakMap,Tu=new WeakMap,xu=new WeakMap,Lu=new WeakMap,Su=new WeakMap,Iu=new WeakMap,Pu=new WeakMap;var $u,Fu,Bu,qu,zu,Vu,Uu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ju=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Yu{constructor(t,e,i){$u.set(this,void 0),Fu.set(this,void 0),Bu.set(this,void 0),qu.set(this,void 0),zu.set(this,void 0),Vu.set(this,void 0),Uu(this,qu,t),Uu(this,$u,Uu(this,Bu,Uu(this,Fu,void 0))),Uu(this,zu,null!=i?i:""),Uu(this,Vu,e)}createHeader(t,e,i){et(e)||(e=[]),et(i)||(i=[]);let s=new Ol("div");s.setClasses(ju(this,qu)+"-dialog-header",...e),Uu(this,$u,s.build());let n=new Ol("span").setClasses(this.getPrefixedString("-dialog-title")).build(t);ju(this,$u).appendChild(n),this.appendChildrens(ju(this,$u),...i)}createFooter(t,e){et(t)||(t=[]),et(e)||(e=[]),Uu(this,Bu,new Ol("div").setClasses(this.getPrefixedString("-dialog-footer"),...t).build()),this.appendChildrens(ju(this,Bu),...e)}createBody(t,e){et(t)||(t=[]),et(e)||(e=[]),Uu(this,Fu,new Ol("div").setClasses(this.getPrefixedString("-dialog-body"),...t).build()),this.appendChildrens(ju(this,Fu),...e)}build(t){let e=[this.getPrefixedString("-dialog")];ju(this,Vu)&&e.push(this.getPrefixedString("-reverse-auto"));let i=new Ol("div").setId(t).setClasses(...e).setAttributes({[this.getPrefixedString("-dialog")]:ju(this,zu)}).build(),s=new Ol("div").setClasses(this.getPrefixedString("-dialog-container")).build();return ju(this,$u)&&s.appendChild(ju(this,$u)),ju(this,Fu)&&s.appendChild(ju(this,Fu)),ju(this,Bu)&&s.appendChild(ju(this,Bu)),i.appendChild(s),i}appendChildrens(t,...e){et(e)&&e.forEach(e=>t.appendChild(e))}getPrefixedString(t){return ju(this,qu)+t}}$u=new WeakMap,Fu=new WeakMap,Bu=new WeakMap,qu=new WeakMap,zu=new WeakMap,Vu=new WeakMap;var Xu,Ku,Gu,Zu,Ju,Qu,td,ed,id=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class nd{constructor(t,e,i){Xu.set(this,void 0),Ku.set(this,void 0),Gu.set(this,void 0),Zu.set(this,void 0),Ju.set(this,void 0),id(this,Xu,{yes:i.onYes,no:i.onNo,cancel:i.onCancel,ok:i.onOk}),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,id(this,Ku,t),id(this,Gu,e),this.reverse=!1,id(this,Ju,null),this.closeStr=sd(this,Ku).setup.prefix+"-close",this.iconStr=sd(this,Ku).setup.prefix+"-icon",id(this,Zu,void 0)}getId(){return sd(this,Gu)}show(t){if(!sd(this,Ku))return;let e=document.getElementById(sd(this,Gu));et(e)?this.updateElement(e):(e=this.createElement(),sd(this,Ku).interactions.mutate(()=>{t.appendChild(e)},null)),setTimeout(()=>{id(this,Zu,new Ti([e],sd(this,Ku)));let t=sd(this,Zu).on("closed",this.onClose.bind(this));id(this,Ju,t.length>0?t[0]:null),sd(this,Zu).emit("open")},50)}updateElement(t){sd(this,Ku).interactions.fetch(()=>{let e=t.querySelector(`.${this.prefix}-dialog-title`),i=t.querySelector(`.${this.prefix}-dialog-body>p`);sd(this,Ku).interactions.mutate(()=>{e&&(e.innerHTML=this.title),i&&(i.innerHTML=this.content)},null)},null)}onClose(t){try{if(et(t)&&t.state&&sd(this,Xu)&&et(sd(this,Xu)[t.state])){let e=sd(this,Xu)[t.state];e&&e()}}finally{null!=sd(this,Ju)&&(sd(this,Zu)&&sd(this,Zu).detach("closed",sd(this,Ju)),id(this,Ju,null)),id(this,Zu,void 0)}}}Xu=new WeakMap,Ku=new WeakMap,Gu=new WeakMap,Zu=new WeakMap,Ju=new WeakMap;class rd extends nd{constructor(t,e,i){var s;super(t,e,i),Qu.set(this,void 0),id(this,Qu,e),this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new Yu(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Ol("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Ol("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Ol("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new Ol("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(sd(this,Qu))}}Qu=new WeakMap;class od extends nd{constructor(t,e,i){var s;super(t,e,i),td.set(this,void 0),id(this,td,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new Yu(this.prefix,this.reverse);return t.createHeader(this.title,[]),t.createBody([],[new Ol("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Ol("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(sd(this,td))}}td=new WeakMap;class hd extends nd{constructor(t,e,i){var s;super(t,e,i),ed.set(this,void 0),id(this,ed,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new Yu(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Ol("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Ol("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Ol("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new Ol("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),t.build(sd(this,ed))}}ed=new WeakMap;var ad,ld,cd,ud=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pd{constructor(){ad.set(this,void 0),ld.set(this,void 0),cd.set(this,void 0),this.name="alert-plugin",this.description="CuiAlertsPlugin",ud(this,ad,null),ud(this,ld,void 0),ud(this,cd,null)}init(t){ud(this,cd,Ot.get("CuiAlertsPlugin")),ud(this,ld,t),this.detach(),ud(this,ad,dd(this,ld).bus.on(Y,this.onAlert.bind(this),{$cuid:this.name}))}destroy(){this.detach()}detach(){dd(this,ad)&&dd(this,ld)&&(dd(this,ld).bus.detach(Y,dd(this,ad)),ud(this,ad,null))}onAlert(t){if(!dd(this,ld))return void dd(this,cd).error("Utils are not set");if(!this.validateEvent(t))return void dd(this,cd).error("Event validation failed");let e=class{static get(t,e,i,s){return"Info"===e?new od(s,t,i):"YesNoCancel"===e?new hd(s,t,i):"OkCancel"===e?new rd(s,t,i):void 0}}.get(t.id,t.type,t.options,dd(this,ld));e?e.show(dd(this,ld).setup.root):dd(this,cd).error("Possibly incorrect alert type")}validateEvent(t){return!!(t&&t.id&&t.type&&t.options)}}ad=new WeakMap,ld=new WeakMap,cd=new WeakMap;var vd,fd,gd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},md=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wd{constructor(){this.name="click-plugin",vd.set(this,void 0),fd.set(this,void 0),this.description="CuiWindowClickPlugin",gd(this,vd,void 0),gd(this,fd,this.onWindowClick.bind(this))}init(t){gd(this,vd,t.bus),window.addEventListener("click",md(this,fd))}destroy(){window.removeEventListener("click",md(this,fd))}onWindowClick(t){md(this,vd)&&md(this,vd).emit(N,null,{ev:t,source:"CuiWindowClickPlugin",timestamp:Date.now(),name:N})}}vd=new WeakMap,fd=new WeakMap;var kd,yd,bd,Md,Cd,Ed,Wd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ad=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Td{constructor(t){kd.set(this,void 0),yd.set(this,void 0),bd.set(this,void 0),Md.set(this,void 0),Cd.set(this,void 0),Ed.set(this,void 0),this.setup=Object.assign({keybordClass:"focus-visible",mouseClass:"focus-precise",touchClass:"focus-precise"},t),this.description="CuiLightFocusPlugin",this.name="focus-plugin",Wd(this,kd,void 0),Wd(this,Cd,this.onKeyDownEvent.bind(this)),Wd(this,bd,this.onMouseEvent.bind(this)),Wd(this,Md,this.onTouchEvent.bind(this)),Wd(this,yd,"none"),Wd(this,Ed,void 0)}init(t){Wd(this,kd,t.interactions),document.body.addEventListener("touchstart",Ad(this,Md)),document.body.addEventListener("mousedown",Ad(this,bd)),window.addEventListener("keydown",Ad(this,Cd))}onMouseEvent(t){"mouse"!==Ad(this,yd)&&this.update("mouse")}onKeyDownEvent(t){"keyboard"!==Ad(this,yd)&&this.update("keyboard")}onTouchEvent(t){"touch"!==Ad(this,yd)&&this.update("touch")}update(t){let e=this.getClass(t);this.setClasses(e,Ad(this,Ed),()=>{Wd(this,Ed,e),Wd(this,yd,t)})}getClass(t){switch(t){case"keyboard":return this.setup.keybordClass;case"mouse":return this.setup.mouseClass;case"touch":return this.setup.touchClass;default:return}}setClasses(t,e,i){Ad(this,kd)&&t!==e&&Ad(this,kd).fetch(()=>{let s=t&&document.body.classList.contains(t),n=e&&document.body.classList.contains(e);Ad(this,kd).mutate(()=>{s||document.body.classList.add(t),n&&document.body.classList.remove(e),i()},null)},null)}destroy(){document.body.removeEventListener("touchstart",Ad(this,Md)),document.body.removeEventListener("mousedown",Ad(this,bd)),window.removeEventListener("keydown",Ad(this,Cd))}}kd=new WeakMap,yd=new WeakMap,bd=new WeakMap,Md=new WeakMap,Cd=new WeakMap,Ed=new WeakMap;var xd,Ld,Sd,Id,Pd,Od,Nd,Dd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _d{constructor(t,e){xd.set(this,void 0),Ld.set(this,void 0),Sd.set(this,void 0),Id.set(this,void 0),Pd.set(this,void 0),Od.set(this,void 0),Nd.set(this,void 0),Dd(this,Sd,!1),Dd(this,Id,!0),Dd(this,Pd,!1),Dd(this,xd,void 0),Dd(this,Ld,null!=e?e:[]),Dd(this,Od,this.onKeyDown.bind(this)),Dd(this,Nd,this.onKeyUp.bind(this))}setCallback(t){Dd(this,xd,t)}isInProgress(){return Hd(this,Sd)}attach(){document.addEventListener("keydown",Hd(this,Od)),Hd(this,Id)&&document.addEventListener("keyup",Hd(this,Nd)),Dd(this,Pd,!0)}detach(){document.removeEventListener("keydown",Hd(this,Od)),Hd(this,Id)&&document.addEventListener("keyup",Hd(this,Nd)),Dd(this,Pd,!1)}isAttached(){return Hd(this,Pd)}onKeyDown(t){if(!Hd(this,Sd)){Dd(this,Sd,!0);try{et(Hd(this,Ld))&&!Hd(this,Ld).includes(t.code)||!Hd(this,xd)||Hd(this,xd).call(this,t)}catch(t){console.error(t)}finally{Hd(this,Id)||Dd(this,Sd,!1)}}}onKeyUp(t){Dd(this,Sd,!1)}}xd=new WeakMap,Ld=new WeakMap,Sd=new WeakMap,Id=new WeakMap,Pd=new WeakMap,Od=new WeakMap,Nd=new WeakMap;var Rd,$d,Fd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qd{constructor(t){Rd.set(this,void 0),$d.set(this,void 0),Fd(this,$d,t),Fd(this,Rd,new _d(!0)),Bd(this,Rd).setCallback(this.onKeyDown.bind(this))}connect(){Bd(this,Rd).attach()}disconnect(){Bd(this,Rd).detach()}onKeyDown(t){Bd(this,$d).emit(O,null,{timestamp:Date.now(),name:O,source:"CuiKeysObserver",event:t})}}Rd=new WeakMap,$d=new WeakMap;var zd,Vd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ud=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class jd{constructor(t){this.name="keys-plugin",zd.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t,Vd(this,zd,void 0)}init(t){Vd(this,zd,new qd(t.bus)),Ud(this,zd).connect()}destroy(){Ud(this,zd)&&Ud(this,zd).disconnect()}}zd=new WeakMap;var Yd,Xd,Kd,Gd,Zd,Jd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class tp{constructor(t){Yd.set(this,void 0),Xd.set(this,void 0),Kd.set(this,void 0),Gd.set(this,void 0),Zd.set(this,void 0),Jd(this,Yd,t),Jd(this,Kd,!1),Jd(this,Xd,void 0),Jd(this,Gd,!1),Jd(this,Zd,this.event.bind(this))}setCallback(t){Jd(this,Xd,t)}isInProgress(){return Qd(this,Gd)}attach(){window.matchMedia&&!Qd(this,Kd)&&Qd(this,Yd)&&(window.matchMedia(Qd(this,Yd)).addEventListener("change",Qd(this,Zd)),Jd(this,Kd,!0))}detach(){Qd(this,Kd)&&(window.matchMedia(Qd(this,Yd)).removeEventListener("change",Qd(this,Zd)),Jd(this,Kd,!1))}isAttached(){return Qd(this,Kd)}event(t){if(!Qd(this,Gd)&&Qd(this,Xd)){Jd(this,Gd,!0);try{Qd(this,Xd).call(this,t)}catch(t){console.error(t)}finally{Jd(this,Gd,!1)}}}}Yd=new WeakMap,Xd=new WeakMap,Kd=new WeakMap,Gd=new WeakMap,Zd=new WeakMap;var ep,ip,sp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},np=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rp{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",ep.set(this,void 0),ip.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t,sp(this,ip,void 0),sp(this,ep,void 0)}init(t){sp(this,ip,t),this.setup.autoLight&&"dark"==(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")&&np(this,ip).setLightMode("dark"),sp(this,ep,new tp("(prefers-color-scheme: dark)")),np(this,ep).setCallback(this.onChange.bind(this)),np(this,ep).attach()}destroy(){np(this,ep)&&np(this,ep).detach()}onChange(t){var e;if(!np(this,ip))return;let i=np(this,ip).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?np(this,ip).setLightMode("dark"):np(this,ip).setLightMode("light"))}}ep=new WeakMap,ip=new WeakMap;var op,hp,ap,lp,cp,up,dp,pp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},vp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class fp{constructor(t,e){op.set(this,void 0),hp.set(this,void 0),ap.set(this,void 0),lp.set(this,void 0),cp.set(this,void 0),up.set(this,void 0),dp.set(this,void 0),pp(this,op,t),pp(this,hp,new Co),vp(this,hp).setCallback(this.onMove.bind(this)),pp(this,cp,void 0),pp(this,ap,!1),pp(this,lp,null),pp(this,up,!1),pp(this,dp,e)}attach(){vp(this,hp).isAttached()||(vp(this,hp).attach(),pp(this,lp,vp(this,op).on($,this.onMoveLock.bind(this))))}detach(){vp(this,hp).isAttached()&&(vp(this,hp).detach(),null!=vp(this,lp)&&vp(this,op).detach($,vp(this,lp)))}isAttached(){return vp(this,hp).isAttached()}onMove(t){if(!vp(this,ap))switch(t.type){case"down":pp(this,cp,t),pp(this,up,!1);break;case"move":vp(this,cp)&&!vp(this,up)&&(this.pushMoveEvent(vp(this,cp)),pp(this,up,!0)),this.pushMoveEvent(t);break;case"up":if(this.pushMoveEvent(t),vp(this,cp)){if(vp(this,dp)){const{diffX:e,diffY:i}=this.getGestureDiff(vp(this,cp),t),s=this.calculateGesture(e,i);this.pushGestureEvent(s,e,i)}pp(this,cp,void 0)}}}pushMoveEvent(t){vp(this,op).emit(R,null,{data:t,source:"CuiMoveObserver",timestamp:Date.now(),name:R})}onMoveLock(t){pp(this,ap,t)}getGestureDiff(t,e){return{diffX:e.x-t.x,diffY:e.y-t.y}}calculateGesture(t,e){const i=.3*window.innerWidth,s=Math.abs(t),n=Math.abs(e);if(s>n&&s>i)return t>0?"right":"left";return n>.3*window.innerHeight?e>0?"down":"up":"none"}pushGestureEvent(t,e,i){const s=this.getGestureEventName(t);s&&vp(this,op).emit(s,null,{timespstamp:Date.now(),changeX:e,changeY:i,name:s,source:"CuiMoveObserver"})}getGestureEventName(t){switch(t){case"up":return K;case"down":return X;case"left":return G;case"right":return Z;default:return null}}}op=new WeakMap,hp=new WeakMap,ap=new WeakMap,lp=new WeakMap,cp=new WeakMap,up=new WeakMap,dp=new WeakMap;var gp,mp,wp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},kp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class yp{constructor(t){this.name="move-observer-plugin",gp.set(this,void 0),mp.set(this,void 0),this.description="CuiMoveObserverPlugin",wp(this,gp,void 0),wp(this,mp,!1!==t)}init(t){wp(this,gp,new fp(t.bus,kp(this,mp))),kp(this,gp).attach()}destroy(){kp(this,gp)&&kp(this,gp).isAttached()&&kp(this,gp).detach()}}gp=new WeakMap,mp=new WeakMap;var bp=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function Mp(t,e,i,s){return bp(this,void 0,void 0,(function*(){let n=e.setup.prefix;if(!ht(t.title,t.id))return;const r=[Cp(t.title,i,s)];return et(t.message)&&r.push(function(t,e){return new Ol("div").setClasses(e.NOTIFICATION_BODY_CLS).setRawChildren(new Ol("div").setTextContent(t))}(t.message,i)),et(t.actions)&&r.push(function(t,e,i){return new Ol("div").setClasses(e.NOTIFICATION_FOOTER_CLS).setRawChildren(function(t,e){return new Ol("ul").setRawChildren(...t.map(t=>new Ol("li").setRawChildren(new Ol("a").onEvent("click",()=>{try{t.callback()}catch(t){Ot.get("Notifications").exception(t,"OnActionClick")}finally{e()}}).setTextContent(t.name))))}(t,i))}(t.actions,i,s)),new Ol("div").setClasses(i.NOTIFICATION_CLS,i.MARGIN_SMALL_VERTICAL,function(t,e){return`${t}-${null!=e?e:"default"}`}(n,t.type)).setId(t.id).setRawChildren(...r).build()}))}function Cp(t,e,i){const s=new Ol("span").setClasses(e.NOTIFICATION_TITLE_CLS).setTextContent(t),n=new In('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 3,3 17,17"></path><path d="M 17,3 3,17"></path></svg>').build(),r=new Ol("a").setClasses(e.ICON_CLS,e.NOTIFICATION_CLOSE_CLS).onEvent("click",i);n&&r.setChildren(n);return new Ol("div").setClasses(e.NOTIFICATION_HEADER_CLS).setRawChildren(s,r)}var Ep,Wp,Ap,Tp,xp,Lp,Sp,Ip=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Pp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Op=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Np{constructor(t){var e;this.name="notification-plugin",Ep.set(this,void 0),Wp.set(this,void 0),Ap.set(this,void 0),Tp.set(this,void 0),xp.set(this,void 0),Lp.set(this,void 0),Sp.set(this,void 0),this.description="CuiNotificationPlugin",Pp(this,Wp,null),Pp(this,Ep,void 0),Pp(this,Ap,null),Pp(this,Tp,{}),Pp(this,xp,{}),Pp(this,Lp,void 0),Pp(this,Sp,null!==(e=t.timeout)&&void 0!==e?e:5e3)}init(t){this.createCache(t.setup.prefix),this.getOrCreateContainer(t,document.body),Pp(this,Lp,new ii(t.interactions)),Pp(this,Ep,t),Pp(this,Ap,Op(this,Ep).bus.on(J,this.onEvent.bind(this),{$cuid:this.name}))}destroy(){Op(this,Wp)&&Op(this,Wp).remove(),Op(this,Ap)&&Op(this,Ep)&&Op(this,Ep).bus.detach(J,Op(this,Ap))}onEvent(t){(function(t){return et(t)&&ht(t.id,t.title)})(t)&&Op(this,Ep)&&Op(this,Lp)&&Op(this,Wp)&&(Op(this,xp)[t.id]||Mp(t,Op(this,Ep),Op(this,Tp),()=>{this.onNotificationClose(t,!1,!0)}).then(e=>{if(!e)return;this.addNotificationToTree(e);let i=null;!1!==t.auto&&(i=this.setAutoClose(t)),Op(this,xp)[t.id]={element:e,timeoutId:i},this.act(e,Op(this,Tp).NOTIFICATION_ANIMATION_IN).then(()=>{e.classList.add(Op(this,Tp).NOTIFICATION_ACTIVE_CLS)})}))}setAutoClose(t){return setTimeout(()=>{this.onNotificationClose(t,!0,!1)},Op(this,Sp))}addNotificationToTree(t){Op(this,Ep).interactions.mutate(()=>{0===Op(this,Wp).children.length?Op(this,Wp).appendChild(t):Op(this,Wp).insertBefore(t,Op(this,Wp).firstChild)},null)}onNotificationClose(t,e,i){if(!t||!Op(this,Lp)||!Op(this,Ep))return;const s=Op(this,xp)[t.id];s&&(e||clearTimeout(s.timeoutId),this.act(s.element,Op(this,Tp).NOTIFICATION_ANIMATION_OUT).then(()=>{Op(this,Ep).bus.emit(Q,null,Object.assign(Object.assign({},t),{dissmissed:i})),s.element.remove(),delete Op(this,xp)[t.id]}))}getOrCreateContainer(t,e){Pp(this,Wp,document.getElementById("notifications-container")),Op(this,Wp)||(Pp(this,Wp,new Ol("div").setClasses(ft("{prefix}-notification-container",t.setup.prefix)).build()),e.appendChild(Op(this,Wp)))}createCache(t){Pp(this,Tp,{NOTIFICATION_CLS:ft("{prefix}-notification",t),NOTIFICATION_HEADER_CLS:ft("{prefix}-notification-header",t),NOTIFICATION_TITLE_CLS:ft("{prefix}-notification-title",t),NOTIFICATION_BODY_CLS:ft("{prefix}-notification-body",t),NOTIFICATION_FOOTER_CLS:ft("{prefix}-notification-footer",t),NOTIFICATION_ACTIVE_CLS:ft("{prefix}-active",t),NOTIFICATION_ANIMATION_IN:ft("{prefix}-notification-animation-in",t),NOTIFICATION_ANIMATION_OUT:ft("{prefix}-notification-animation-out",t),NOTIFICATION_ICON_CLS:ft("{prefix}-notification-icon",t),NOTIFICATION_CLOSE_CLS:ft("{prefix}-notification-close",t),ICON_CLS:ft("{prefix}-icon",t),MARGIN_SMALL_VERTICAL:ft("{prefix}-margin-small-vertical",t)})}act(t,e,i){return Ip(this,void 0,void 0,(function*(){const s=null!=i?i:Op(this,Ep).setup.animationTime,n=new ui(e);return Op(this,Lp).performAction(t,n,null!=s?s:0)}))}}Ep=new WeakMap,Wp=new WeakMap,Ap=new WeakMap,Tp=new WeakMap,xp=new WeakMap,Lp=new WeakMap,Sp=new WeakMap;var Dp,Hp,_p=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class $p{constructor(t){this.description="Auto print mode",this.name="auto-print",Dp.set(this,void 0),Hp.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t,_p(this,Dp,void 0),_p(this,Hp,void 0)}init(t){_p(this,Hp,t),this.setup.autoPrint&&window.matchMedia&&window.matchMedia("print").matches&&Rp(this,Hp).setPrintMode(!0),_p(this,Dp,new tp("print")),Rp(this,Dp).setCallback(this.onChange.bind(this)),Rp(this,Dp).attach()}destroy(){Rp(this,Dp)&&Rp(this,Dp).detach()}onChange(t){var e,i;if(!Rp(this,Hp))return;this.setup=Rp(this,Hp).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(t.matches?Rp(this,Hp).setPrintMode(!0):Rp(this,Hp).setPrintMode(!1))}}Dp=new WeakMap,Hp=new WeakMap;var Fp,Bp,qp,zp,Vp,Up,jp,Yp,Xp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Kp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gp{constructor(t,e){Fp.set(this,void 0),Bp.set(this,void 0),qp.set(this,void 0),zp.set(this,void 0),Vp.set(this,void 0),Up.set(this,void 0),jp.set(this,void 0),Yp.set(this,void 0),Xp(this,Fp,[]),Xp(this,Bp,[]),Xp(this,qp,window.innerWidth),Xp(this,zp,!1),Xp(this,Vp,at(window.innerWidth)),Xp(this,Up,null!=e?e:0),Xp(this,jp,t),Xp(this,Yp,this.listener.bind(this))}observe(t){Kp(this,Fp).findIndex(e=>e===t)<0&&Kp(this,Fp).push(t)}unobserve(t){let e=Kp(this,Fp).findIndex(e=>e===t);e>=0&&Kp(this,Fp).splice(e,1)}connect(){window.addEventListener("resize",Kp(this,Yp))}disconnect(){window.removeEventListener("resize",Kp(this,Yp))}pushUpdateToItems(t){Kp(this,Fp).length<1||(Xp(this,Bp,[]),Kp(this,Fp).forEach(e=>{Kp(this,Bp).push(e.resize(t))}),Promise.all(Kp(this,Bp)),Xp(this,Bp,[]))}listener(t){if(Kp(this,zp))return;Xp(this,zp,!0);const e=window.innerWidth-Kp(this,qp);if(Math.abs(e)>=Kp(this,Up)){const t=at(window.innerWidth);if(t!==Kp(this,Vp)){const e={current:t,previous:Kp(this,Vp),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now(),name:b,source:"CuiResizeObserver"};Kp(this,jp).emit(b,"",e),this.pushUpdateToItems(e),Xp(this,Vp,t)}}Xp(this,zp,!1)}}Fp=new WeakMap,Bp=new WeakMap,qp=new WeakMap,zp=new WeakMap,Vp=new WeakMap,Up=new WeakMap,jp=new WeakMap,Yp=new WeakMap;var Zp,Jp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class tv{constructor(t){this.name="resize-observer-plugin",Zp.set(this,void 0),this.description="CuiResizeObserverPlugin",Jp(this,Zp,void 0),this.setup=t}init(t){var e;Jp(this,Zp,new Gp(t.bus,null!==(e=this.setup.resizeThreshold)&&void 0!==e?e:20)),Qp(this,Zp).connect()}destroy(){Qp(this,Zp)&&Qp(this,Zp).disconnect()}}Zp=new WeakMap;var ev,iv,sv,nv,rv,ov,hv,av,lv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},cv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},uv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dv{constructor(t,e,i){ev.set(this,void 0),iv.set(this,void 0),sv.set(this,void 0),nv.set(this,void 0),rv.set(this,void 0),ov.set(this,void 0),hv.set(this,void 0),av.set(this,void 0),cv(this,ev,t),cv(this,iv,`.${e}-toast`),cv(this,sv,e+"-toast"),cv(this,nv,e+"-active"),cv(this,rv,i),cv(this,ov,!1),cv(this,hv,e+"-toast-animation-in"),cv(this,av,e+"-toast-animation-out")}show(t){return lv(this,void 0,void 0,(function*(){if(uv(this,ov))return!1;cv(this,ov,!0);let e=document.querySelector(uv(this,iv));return et(e)||(e=document.createElement("div"),e.classList.add(uv(this,sv)),document.body.appendChild(e),yield st(10)),uv(this,ev).mutate(()=>{e.textContent=t,e.classList.add(u),e.classList.add(uv(this,hv))},this),yield st(uv(this,rv)),uv(this,ev).mutate(()=>{e.classList.remove(u),e.classList.remove(uv(this,hv)),e.classList.add(uv(this,nv))},this),yield st(3e3),uv(this,ev).mutate(()=>{e.classList.add(u),e.classList.add(uv(this,av))},this),setTimeout(()=>{uv(this,ev).mutate(()=>{e.classList.remove(u),e.classList.remove(uv(this,av)),e.classList.remove(uv(this,nv))},this),cv(this,ov,!1)},uv(this,rv)),!0}))}}ev=new WeakMap,iv=new WeakMap,sv=new WeakMap,nv=new WeakMap,rv=new WeakMap,ov=new WeakMap,hv=new WeakMap,av=new WeakMap;var pv,vv,fv,gv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wv{constructor(t){this.name="toast-plugin",pv.set(this,void 0),vv.set(this,void 0),fv.set(this,void 0),this.description="CuiToastPlugin",this.setup=t,gv(this,pv,void 0),gv(this,vv,null),gv(this,fv,void 0)}init(t){var e;gv(this,fv,t),mv(this,pv)||gv(this,pv,new dv(t.interactions,t.setup.prefix,null!==(e=t.setup.animationTime)&&void 0!==e?e:300)),gv(this,vv,t.bus.on(V,this.onToastShow.bind(this),{$cuid:this.name}))}destroy(){mv(this,fv)&&mv(this,vv)&&(mv(this,fv).bus.detach(V,mv(this,vv)),gv(this,vv,null))}onToastShow(t){mv(this,pv)&&mv(this,fv)&&(mv(this,fv).bus.emit(U,null,[]),mv(this,pv).show(t).then(()=>{mv(this,fv)&&mv(this,fv).bus.emit(j,null,[])}))}}pv=new WeakMap,vv=new WeakMap,fv=new WeakMap;var kv,yv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},bv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Mv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};kv=new WeakMap;const Cv="0.4.1";window.cuiInit=new class{constructor(){kv.set(this,void 0),bv(this,kv,!1)}init(t){var e,i;return yv(this,void 0,void 0,(function*(){if(Mv(this,kv))return console.log("Module is already initialized"),!1;const s=new ns,n=function(t){var e;let i=!t||t.autoLight,s=!t||t.autoPrint;return[new rp({autoLight:i}),new $p({autoPrint:s}),new jd({}),new wd,new yp,new tv({}),new wv({}),new pd,new Np({timeout:t.notifcationTimeout}),new Td(null!==(e=t.focusSetup)&&void 0!==e?e:{})]}({autoLight:!0,autoPrint:!0}),r=function(t){let e=null==t?void 0:t.prefix;return[new Go(e),new _u(e),new qn(e),new Mc(e),new Ga(e),new yl(e),new dh(e),new Aa(e),new Gn(e),new Cu(e),new vr(e),new Ch(e),new Fs(e),new po(e),new wa(e),new nu(e),new pu(e),new zo(e),new Vc(e),new En(e),new nr(e),new pc(e),new Ba(e)]}({prefix:null===(e=t.setup)||void 0===e?void 0:e.prefix});let o=n;t.plugins&&(o=Object.assign(Object.assign({},n),t.plugins));let h=yield s.init(Object.assign(Object.assign({},t),{plugins:o,components:et(t.components)?[...r,...t.components]:r}));return h.result?(bv(this,kv,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(i=h.message)&&void 0!==i?i:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}}])}));
//# sourceMappingURL=index.min.js.map