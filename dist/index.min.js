!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light-app",[],e):"object"==typeof exports?exports["cui-light-app"]=e():t["cui-light-app"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"CUI_LIGHT_VERSION",(function(){return gv})),i.d(e,"CuiInstance",(function(){return us}));class s extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class n extends s{constructor(t){super("ArgumentError",t)}}class r extends s{constructor(t){super("CuiInstanceInitError",t)}}class o extends s{constructor(t){super("RegisterElementError",t)}}class h extends s{constructor(t){super("AnimatorError",t)}}class a extends s{constructor(t){super("CSSVariableError",t)}}class l extends s{constructor(t){super("CuiColorError",t)}}class c extends s{constructor(t){super("CuiPositionError",t)}}const u="dark",d="animation-progress",p="print",g="swiping-on",v={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},f="--cui-color-light-app-background",m="--cui-color-dark-app-background",w="--cui-color-light-background",k="--cui-color-dark-background ",y="--cui-color-light-border",b="--cui-color-dark-border",C={light:{base:"--cui-color-light-base",muted:"--cui-color-light-muted",active:"--cui-color-light-active"},dark:{base:"--cui-color-dark-base",muted:"--cui-color-dark-muted",active:"--cui-color-dark-active"},accent:{base:"--cui-color-primary",muted:"--cui-color-primary-muted",active:"--cui-color-primary-active"},secondary:{base:"--cui-color-secondary",muted:"--cui-color-secondary-muted",active:"--cui-color-secondary-active"},success:{base:"--cui-color-success",muted:"--cui-color-success-muted",active:"--cui-color-success-active"},warning:{base:"--cui-color-warning",muted:"--cui-color-warning-muted",active:"--cui-color-warning-active"},error:{base:"--cui-color-error",muted:"--cui-color-error-muted",active:"--cui-color-error-active"}},M={fontSize:"--{prefix}-font-size",lineHeight:"--{prefix}-line-height",animationTime:"--{prefix}-animation-time",animationTimeLong:"--{prefix}-animation-time-long",animationTimeShort:"--{prefix}-animation-time-short",colorLightAppBackground:"--{prefix}-color-light-app-background",colorLightBackground:"--{prefix}-color-light-background",colorLightBorder:"--{prefix}-color-light-border",colorLightBase:"--{prefix}-color-light-base",colorLightActive:"--{prefix}-color-light-active",colorLightMuted:"--{prefix}-color-light-muted",colorDarkAppBackground:"--{prefix}-color-dark-app-background",colorDarkBackground:"--{prefix}-color-dark-background",colorDarkBorder:"--{prefix}-color-dark-border",colorDarkBase:"--{prefix}-color-dark-base",colorDarkActive:"--{prefix}-color-dark-active",colorDarkMuted:"--{prefix}-color-dark-muted",colorAccent:"--{prefix}-color-primary",colorAccentActive:"--{prefix}-color-primary-active",colorAccentMuted:"--{prefix}-color-primary-muted",colorAccentShade:"--{prefix}-color-primary-shade",colorAccentShadeDark:"--{prefix}-color-primary-shade-dark",colorSecondary:"--{prefix}-color-secondary",colorSecondaryActive:"--{prefix}-color-secondary-active",colorSecondaryMuted:"--{prefix}-color-secondary-muted",colorSecondaryShade:"--{prefix}-color-secondary-shade",colorSecondaryShadeDark:"--{prefix}-color-secondary-shade-dark",colorWarning:"--{prefix}-color-warning",colorWarningActive:"--{prefix}-color-warning-active",colorWarningMuted:"--{prefix}-color-warning-muted",colorWarningShade:"--{prefix}-color-warning-shade",colorWarningShadeDark:"--{prefix}-color-warning-shade-dark",colorSuccess:"--{prefix}-color-success",colorSuccessActive:"--{prefix}-color-success-active",colorSuccessMuted:"--{prefix}-color-success-muted",colorSuccessShade:"--{prefix}-color-success-shade",colorSuccessShadeDark:"--{prefix}-color-success-shade-dark",colorError:"--{prefix}-color-error",colorErrorActive:"--{prefix}-color-error-active",colorErrorMuted:"--{prefix}-color-error-muted",colorErrorShade:"--{prefix}-color-error-shade",colorErrorShadeDark:"--{prefix}-color-error-shade-dark",inputBackground:"--{prefix}-input-background-color",colorShade:"--{prefix}-color-shade",colorShadeDarker:"--{prefix}-color-shade-darker",colorShadeLight:"--{prefix}-color-shade-light",colorShadeLighter:"--{prefix}-color-shade-light-lighter",outline:"--{prefix}-outline",borderRadius:"--{prefix}-border-radius",padding:"--{prefix}-padding",margin:"--{prefix}-margin",scrollbarWidth:"--{prefix}-scrollbar-width",componentSpace:"--{prefix}-component-space",accordionIcon:"--{prefix}-accordion-icon"};class A{}A.logLevel="none",A.prefix="cui";const W="instance-initialized",E="instance-finished",T="resize",x="open",S="opened",L="close",I="closed",P="toggle",D="toggled",O="switch",N="switched",B="scroll",_="targetchange",H="intersection",$="keydown",R="windowclick",F="offset",q="progresschange",U="progresschanged",z="globalmove",V="movelock",j="pause",Y="paused",X="sorted",K="sortstart",G="toast",Z="toastshow",J="toasthidden",Q="alert",tt="gesture-down",et="gesture-up",it="gesture-left",st="gesture-right",nt="notify",rt="notified",ot=function*(){let t=0;for(;;){((yield t++)||t>2e5)&&(t=0)}}();function ht(t,e=!0){return null!=t&&(!e||!function(t){if("string"==typeof t)return 0===t.length;if("boolean"==typeof t)return t;if(Array.isArray(t))return 0===t.length;return!1}(t))}function at(t,e){if(!ht(t)||!ht(e))throw new n("Missing argument value");return`${t}-${e}`}function lt(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function ct(t,e,i){return t<e?e:t>i?i:t}function ut(t,e,i,s){return null==t||isNaN(t)?s:ct(t,e,i)}function dt(t){return ht(t)?`[${t.join("],[")}]`:""}function pt(...t){if(!ht(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!ht(t[i]))return!1;return!0}function gt(t){let e="none";return t>=640&&(e="small"),t>=960&&(e="medium"),t>=1200&&(e="large"),t>=1600&&(e="xlarge"),e}function vt(t){let e={};return ht(t)?(e=function(t){let e=null;if(ht(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error((i="An exception occured",s="Functions",n="parseJsonString",`[${(new Date).toLocaleString()}][${null!=s?s:"-"}][${null!=n?n:"-"}][${i}]`),t)}return e}var i,s,n;return null}(t.trim()),ht(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=Lt(t),s=void 0,n="";i.length<2||(s=i[0].trim(),n=i[1].trim(),s&&(e[s]=n.replace("U+0003B",";")))})):e=t),e):e}function ft(t,e){let i=parseInt(t);return isNaN(i)?e:i}function mt(t,e){return ht(t)&&ht(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function wt(t,e,i){return ht(t)&&t>=e&&t<=i}function kt(t,e){return pt(t,e)?vt(t.getAttribute(e)):null}function yt(t){return!!ht(t)&&["y","t","true","yes"].includes(t.toLowerCase())}function bt(t,e){return ht(t)?yt(t):e}function Ct(t,e){return ht(t)?t.toLowerCase():e}function Mt(t){return"string"==typeof t}function At(t,e){return ht(t)?t.replace("{prefix}",null!=e?e:""):t}function Wt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function Et(t){if(!ht(t))return;let e=t.parentElement;return ht(e)&&ht(e.$cuid)?e:Et(e)}function Tt(t){let e=0;return t?(Array.from(t.children).forEach(t=>{e+=t.getBoundingClientRect().height}),e>0?e+4:e):-1}function xt(t,e){if(pt(t,e))for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}function St(t,e,i){let s=-1;switch(t){case"prev":s=e<=0?i-1:e-1;break;case"next":s=e<i-1?e+1:0;break;case"first":s=0;break;case"last":s=i-1;default:s=ft(t,-1)}return s}function Lt(t){let e=[];if(!ht(t))return e;let i=t.split(":");return 1===i.length?i:[i.shift(),i.join(":")]}class It{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.prefix="cui",this.plugins={},this.root=document.body}fromInit(t){var e;return this.prefix=null!==(e=t.prefix)&&void 0!==e?e:"cui",this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this.root=t.root,this}}class Pt{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.root=document.body,this.busSetup=void 0,this.development=void 0}}var Dt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function Ot(t,e){return e.filter(e=>t.hasAttribute&&t.hasAttribute(e.attribute))}function Nt(t,e,i){return Dt(this,void 0,void 0,(function*(){if(!pt(t,e,i))return!1;let s=t;s.$cuid||(s.$cuid=t.hasAttribute("cuid")?t.getAttribute("cuid"):function(t){return`${ht(t)?t:"cui-element"}-${ot.next().value}`}(t.tagName),t.setAttribute("cuid",s.$cuid));for(let t of e)yield _t(s,t,i,kt(s,t.attribute));return!0}))}function Bt(t){return Dt(this,void 0,void 0,(function*(){const e=t;if(!e.$handlers)return!1;for(let t in e.$handlers)yield Ht(e,t);return!0}))}function _t(t,e,i,s){return Dt(this,void 0,void 0,(function*(){t.$handlers||(t.$handlers={});try{let n=e.get(t,i);t.$handlers[e.attribute]=n,t.$handlers[e.attribute].handle(s)}catch(t){throw new o(`An error occured during [${e.attribute}] initialization: ${t.message}`)}return!0}))}function Ht(t,e){return Dt(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let i=t.$handlers[e];if(!i)return!1;try{i.destroy()}catch(t){throw new o(`An error occured during [${e}] destroy: ${t.message}`)}return!0}))}var $t,Rt,Ft,qt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ut=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class zt{constructor(t,e){$t.set(this,void 0),Rt.set(this,void 0),Ft.set(this,void 0),qt(this,Rt,t),qt(this,$t,"-"),qt(this,Ft,null!=e?e:A.logLevel)}registerElement(t,e,i){qt(this,$t,e),console.log(this.prepString("Register element: "+e,"debug",i))}unregisterElement(t,e){qt(this,$t,"-"),console.log(this.prepString("Unregister element: "+t,"debug",e))}setProperty(t,e,i,s){}pushState(t,e,i,s,n){this.logByType(i,s,n)}log(t,e,i){this.logByType(t,e,i)}debug(t,e){"debug"===Ut(this,Ft)&&console.log(this.prepString(t,"debug",e))}warning(t,e){"warning"!==Ut(this,Ft)&&"debug"!==Ut(this,Ft)||console.warn(this.prepString(t,"warning",e))}error(t,e){"error"!==Ut(this,Ft)&&"debug"!==Ut(this,Ft)&&"warning"!==Ut(this,Ft)||console.error(this.prepString(t,"error",e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,"exception",e)),"debug"===Ut(this,Ft)&&console.error(t.stack)}prepString(t,e,i){return`[${(new Date).toLocaleString()}][${e}][${Ut(this,Rt)}][${null!=i?i:"-"}][${Ut(this,$t)}][${t}]`}logByType(t,e,i){switch(t){case"debug":this.debug(e,i);break;case"warning":this.warning(e,i);break;case"error":this.error(e,i)}}}$t=new WeakMap,Rt=new WeakMap,Ft=new WeakMap;class Vt{get(t){return new zt(t)}}class jt{static get(t){return A.devTool||(A.devTool=new Vt),A.devTool.get(t)}}var Yt,Xt,Kt,Gt,Zt,Jt,Qt,te,ee,ie,se,ne,re=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},oe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},he=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ae{constructor(t,e){Yt.set(this,void 0),Xt.set(this,void 0),Kt.set(this,void 0),Gt.set(this,void 0),Zt.set(this,void 0),Jt.set(this,void 0),Qt.set(this,void 0),oe(this,Yt,void 0),this.plugins=void 0,oe(this,Xt,void 0),oe(this,Kt,t),this._log=jt.get("CuiMutationObserver"),oe(this,Gt,[]),oe(this,Zt,[]),oe(this,Jt,e),oe(this,Qt,"")}setPlugins(t){return this.plugins=t,this}setComponents(t){return oe(this,Gt,t),this}setAttributes(t){return oe(this,Xt,{attributes:!0,subtree:!0,childList:!0,attributeFilter:t}),oe(this,Zt,t),oe(this,Qt,dt(t)),this}start(){return this._log.debug("Starting"),he(this,Xt)?(oe(this,Yt,new MutationObserver(this.mutationCallback.bind(this))),he(this,Yt).observe(he(this,Kt),he(this,Xt)),this._log.debug("Started"),this):(this._log.error("Cannot start - options are not defined"),this)}stop(){return this._log.debug("Stopping"),he(this,Yt)?(he(this,Yt).disconnect(),oe(this,Yt,void 0),this._log.debug("Stopped"),this):(this._log.debug("Observer not available"),this)}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;if(!pt(t.attributeName,e)){this._log.error("Mutation attribute doesn't not exisist");break}this.handeComponentUpdate(t.attributeName,e);break;case"childList":this.handleChildListMutation(t)}ht(this.plugins)&&this.plugins.onMutation(t).then(()=>{})})}handeComponentUpdate(t,e){let i=kt(e,t);(function(t,e,i){return Dt(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let s=t.$handlers[e];if(!s)return!1;try{s.refresh(i)}catch(t){throw new o(`An error occured during [${e}] update: ${t.message}`)}return!0}))})(e,t,i).then(e=>{this._log.debug("Component: "+t+" updated with: "+e,"handeComponentUpdate")}).catch(t=>{this._log.exception(t)})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(this._log.debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes).then(t=>{this._log.debug("Added nodes: "+e+" with status: "+t)}).catch(t=>{this._log.exception(t)})):i>0&&(this._log.debug("Removing nodes: "+i),this.handleRemovedNodes(t.removedNodes).then(t=>{this._log.debug("Removed nodes: "+i+" with status: "+t)}).catch(t=>{this._log.exception(t)}))}handleAddedNodes(t){return re(this,void 0,void 0,(function*(){for(let e of t){yield this.handleAddedNode(e);let t=e,i=t.hasChildNodes()?t.querySelectorAll(he(this,Qt)):null;ht(i)&&(this._log.debug("Additional nodes to add: "+i.length),yield this.handleAddedChildren(i))}return!0}))}handleAddedChildren(t){return re(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield this.handleAddedNode(i));return e}))}handleAddedNode(t){return re(this,void 0,void 0,(function*(){let e=[];return e=Ot(t,he(this,Gt)),Nt(t,e,he(this,Jt))}))}handleRemovedNodes(t){return re(this,void 0,void 0,(function*(){for(let e of t){yield Bt(e);let t=e,i=e.hasChildNodes()?t.querySelectorAll(he(this,Qt)):null;ht(i)&&(this._log.debug("Additional nodes to remove: "+i.length),yield this.handleDestroyChildren(i))}return!0}))}handleDestroyChildren(t){return re(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield Bt(i));return e}))}}Yt=new WeakMap,Xt=new WeakMap,Kt=new WeakMap,Gt=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap;class le{constructor(t){te.set(this,void 0),ee.set(this,void 0),ie.set(this,void 0),se.set(this,void 0),ne.set(this,{childList:!0,subtree:!0}),oe(this,ee,void 0),oe(this,se,!1),oe(this,te,!1),oe(this,ie,t)}observe(){he(this,te)||he(this,se)||!he(this,ee)||(he(this,ee).observe(he(this,ie),he(this,ne)),oe(this,te,!0))}unobserve(){he(this,te)&&he(this,ee)&&(he(this,ee).disconnect(),oe(this,te,!1))}isObserving(){return he(this,te)}disable(t){oe(this,se,t),he(this,se)&&this.unobserve()}onMutation(t){he(this,te)&&this.unobserve(),oe(this,ee,new MutationObserver(t))}}te=new WeakMap,ee=new WeakMap,ie=new WeakMap,se=new WeakMap,ne=new WeakMap;var ce,ue,de,pe,ge,ve,fe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},me=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class we{constructor(){ce.set(this,void 0),ue.set(this,void 0),de.set(this,void 0),pe.set(this,!1),ge.set(this,void 0),ve.set(this,void 0),fe(this,de,window.requestAnimationFrame.bind(window)),fe(this,ce,[]),fe(this,ue,[]),fe(this,ge,5),fe(this,ve,void 0)}onError(t){fe(this,ve,t)}mutate(t,e,...i){me(this,ue).push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){me(this,ce).push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!me(this,pe)){if(fe(this,pe,!0),t&&t>=me(this,ge))throw new Error("Fast Dom limit reached");me(this,de).call(this,this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=me(this,ce),n=me(this,ue);try{this.run(n),this.run(s)}catch(t){me(this,ve)?me(this,ve).call(this,t):console.error("An error has been captured in interactions: "+t.message),i=t}fe(this,pe,!1),(i||me(this,ce).length||me(this,ue).length)&&this.schedule(e+1)}}ce=new WeakMap,ue=new WeakMap,de=new WeakMap,pe=new WeakMap,ge=new WeakMap,ve=new WeakMap;class ke{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var ye,be,Ce,Me=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ae=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},We=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ee{constructor(){this.queue=[],this.isBusy=!1}idMatches(t,e){return!ht(t)||ht(t)&&t==e}}class Te extends Ee{constructor(t){super(),ye.set(this,void 0),be.set(this,void 0),Ae(this,be,t),Ae(this,ye,jt.get("SimpleEventEmitHandler"))}handle(t,e,i){return Me(this,void 0,void 0,(function*(){return ht(t)?(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||this.isBusy||(this.isBusy=!0,this.queue.length>0&&(yield this.perform()),this.isBusy=!1),!0):(We(this,ye).warning("No events provided"),!1)}))}perform(){return Me(this,void 0,void 0,(function*(){let t=this.queue.shift();if(t)for(let e in t.events){let i=t.events[e];try{this.idMatches(t.cuid,i.$cuid)&&(yield We(this,be).execute(i.callback,t.args))}catch(t){We(this,ye).error(t)}}}))}}ye=new WeakMap,be=new WeakMap;class xe extends Ee{constructor(t){super(),Ce.set(this,void 0),Ae(this,Ce,t)}handle(t,e,i){return Me(this,void 0,void 0,(function*(){return!!ht(t)&&(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||(this.isBusy=!0,yield this.perform(),this.queue.length>0&&(yield this.perform()),this.isBusy=!1),!0)}))}perform(){return Me(this,void 0,void 0,(function*(){let t=this.queue.shift(),e=[];if(!t)return Promise.all(e);for(let i in t.events){let s=t.events[i];this.idMatches(t.cuid,s.$cuid)&&e.push(We(this,Ce).execute(s.callback,t.args))}return Promise.all(e)}))}}Ce=new WeakMap;var Se=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class Le{execute(t,e){return Se(this,void 0,void 0,(function*(){e=null!=e?e:[];try{return t(...e),!0}catch(t){}return!1}))}}var Ie,Pe,De,Oe,Ne,Be,_e,He,$e=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Re=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qe{constructor(t,e){Ie.set(this,void 0),Pe.set(this,void 0),De.set(this,void 0),Oe.set(this,void 0),Re(this,Ie,{}),Re(this,De,t),Re(this,Oe,null!=e?e:"CuiEventBus"),Re(this,Pe,jt.get(Fe(this,Oe)))}on(t,e,i){if(!pt(t,e))throw new n("Missing argument");let s=Fe(this,Oe)+"-"+function(){let t=Wt(1,1e3),e=Wt(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}();return Fe(this,Ie)[t]||(Fe(this,Ie)[t]={}),this.isAttached(Fe(this,Ie)[t],s,i)?null:(Fe(this,Pe).debug(`Attaching new event: [${t}] for: [${s}]`),Fe(this,Ie)[t][s]={callback:e,$cuid:this.getCuid(i)},s)}detach(t,e){if(!pt(t,e))throw new n("Missing argument");let i=Fe(this,Ie)[t];Fe(this,Pe).debug(`Detaching item: [${e}] from [${t}]`),this.isAttached(i,e)&&delete i[e]}detachAll(t){ht(t)&&Fe(this,Ie)[t]?delete Fe(this,Ie)[t]:Fe(this,Pe).error("Event name is missing or incorrect","detachAll")}emit(t,e,...i){return $e(this,void 0,void 0,(function*(){if(!ht(t))throw new n("Event name is incorrect");let s=Fe(this,Ie)[t];return ht(s)&&(Fe(this,Pe).debug(`Emit: [${t}]`),yield Fe(this,De).handle(s,e,i)),!0}))}isSubscribing(t,e,i){let s=Fe(this,Ie)[t];return this.isAttached(s,e,i)}detachByCuid(t,e){if(!pt(t,e))return;let i=Fe(this,Ie)[t];ht(i)&&xt(Object.assign({},i),(t,s)=>{s.$cuid===e&&delete i[t]})}isAttached(t,e,i){return ht(i)?ht(t)&&ht(e)&&ht(t[e])&&t[e].$cuid==i.$cuid:ht(t)&&ht(e)&&ht(t[e])}getCuid(t){return ht(t)?t.$cuid:null}}Ie=new WeakMap,Pe=new WeakMap,De=new WeakMap,Oe=new WeakMap;class Ue{constructor(t){if(Ne.set(this,void 0),Be.set(this,void 0),_e.set(this,void 0),He.set(this,void 0),Re(this,Be,jt.get("CuiEventBus")),Re(this,_e,[]),Re(this,Ne,{}),Re(this,He,0),ht(t)){Fe(this,Be).debug("Initiating buses"),(1===t.length?t:t.sort((t,e)=>t.priority-e.priority)).forEach((t,e)=>{Fe(this,_e).push(this.initBusInstance(t.name,t.handler)),Re(this,Ne,Object.assign(Object.assign({},Fe(this,Ne)),this.mapEvents(t.eventsDef,e))),Fe(this,Be).debug(`Bus ${t.name} has been initialized with number: ${e}`)}),Fe(this,_e).push(this.initBusInstance("DefaultEventBus","tasked")),Re(this,He,Fe(this,_e).length-1),Fe(this,Be).debug("Bus initialization finished")}}on(t,e,i){if(!pt(t,e))throw new n("Missing argument");return this.get(t).on(t,e,i)}detach(t,e,i){if(!pt(t,e))throw new n("Missing argument");this.get(t).detach(t,e,i)}detachAll(t){this.get(t).detachAll(t)}emit(t,e,...i){return $e(this,void 0,void 0,(function*(){if(!ht(t))throw new n("Event name is incorrect");return this.get(t).emit(t,e,...i)}))}isSubscribing(t,e,i){return this.get(t).isSubscribing(t,e,i)}detachByCuid(t,e){pt(t,e)&&this.get(t).detachByCuid(t,e)}initBusInstance(t,e){if(!pt(t,e))throw new n("Bus name or handler name is incorrect");let i=new Le,s=class{static get(t,e){switch(t){case"tasked":return new xe(e);default:return new Te(e)}}}.get(e,i);return new qe(s,t)}mapEvents(t,e){return t.reduce((t,i)=>t[i]?t:Object.assign(Object.assign({},t),{[i]:e}),{})}get(t){let e=Fe(this,Ne)[t];return Fe(this,_e)[null!=e?e:Fe(this,He)]}}Ne=new WeakMap,Be=new WeakMap,_e=new WeakMap,He=new WeakMap;new WeakMap,new WeakMap;class ze{constructor(t){}append(t){if(ht(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.appendChild(s),e.appendChild(i)}return!0}}var Ve,je,Ye,Xe,Ke=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ge=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ze{constructor(t){Ve.set(this,void 0),je.set(this,void 0),Ye.set(this,15),Xe.set(this,15),Ke(this,Ve,document.documentElement),Ke(this,je,t)}setAppBackground(t,e){this.setPropertyIn(f,t.toCssString()),this.setPropertyIn(m,e.toCssString())}setComponentBackground(t,e){this.setPropertyIn(w,t.toCssString()),this.setPropertyIn(k,e.toCssString())}setBordersColors(t,e){this.setPropertyIn(y,t.toCssString()),this.setPropertyIn(b,e.toCssString())}setColor(t,e){var i,s;const n=C[t],r=e.base;if(!ht(n)||!ht(r))return;const o=null!==(i=e.muted)&&void 0!==i?i:r.clone().lighten(Ge(this,Ye)),h=null!==(s=e.active)&&void 0!==s?s:r.clone().darken(Ge(this,Xe));Ge(this,je).mutate(()=>{this.setProperty(n.base,r.toCssString()),this.setProperty(n.active,h.toCssString()),this.setProperty(n.muted,o.toCssString())},this)}setLightenFactor(t){Ke(this,Ye,ct(t,0,100))}setDarkenFactor(t){Ke(this,Xe,ct(t,0,100))}setProperty(t,e){Ge(this,Ve).style.setProperty(t,e)}setPropertyIn(t,e){pt(e,t)&&Ge(this,je).mutate(this.setProperty,this,t,e)}}Ve=new WeakMap,je=new WeakMap,Ye=new WeakMap,Xe=new WeakMap;var Je,Qe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ti=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ei{constructor(t,e){Je.set(this,void 0),this.setup=(new It).fromInit(t),this.interactions=class{static get(t,e){switch(t){case"async":const t=new we;return e&&t.onError(e),t;default:return new ke}}}.get(t.interaction,this.onInteractionError.bind(this)),this.bus=class{static get(t){return ht(t)?new Ue(t):new qe(new xe(new Le))}}.get(t.busSetup),this.colors=new Ze(this.interactions),this.styleAppender=new ze(this.interactions),Qe(this,Je,null!=e?e:[])}setLightMode(t){const e=at(this.setup.prefix,u),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=at(this.setup.prefix,u);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=at(this.setup.prefix,p),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=at(this.setup.prefix,p);return document.body.classList.contains(t)}setProperty(t,e){if(!pt(t,e))throw new a("Property or value was not provided");let i=At(t,this.setup.prefix);document.documentElement.style.setProperty(i,e)}isPlugin(t){return ht(t)&&ti(this,Je).find(e=>e===t)}onInteractionError(t){console.error("An error has been captured from interactions"),console.error(t)}}Je=new WeakMap;var ii,si=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ni=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ri=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class oi{constructor(t){ii.set(this,void 0),ni(this,ii,t)}performAction(t,e,i,s){return si(this,void 0,void 0,(function*(){return new Promise(n=>{ri(this,ii).mutate(()=>{e.add(t),t.classList.add(d),setTimeout(()=>{ri(this,ii).mutate(()=>{e.remove(t),t.classList.remove(d),s&&s(),n(!0)},null)},i)},null)})}))}performActions(t,e,i,s){return si(this,void 0,void 0,(function*(){return new Promise(n=>{ri(this,ii).mutate(()=>{e.forEach(e=>e.add(t)),t.classList.add(d),setTimeout(()=>{ri(this,ii).mutate(()=>{e.forEach(e=>e.remove(t)),t.classList.remove(d),s&&s(),n(!0)},null)},i)},null)})}))}performSwitchAction(t,e,i,s,n,r){return si(this,void 0,void 0,(function*(){return new Promise(o=>{ri(this,ii).mutate(()=>{i.forEach(e=>e.add(t)),t.classList.add(d),ht(e)&&(s.forEach(t=>t.add(e)),e.classList.add(d)),setTimeout(()=>{ri(this,ii).mutate(()=>{i.forEach(e=>e.remove(t)),t.classList.remove(d),ht(e)&&(s.forEach(t=>t.remove(e)),e.classList.remove(d)),n(),o(!0)},null)},r)},null)})}))}}ii=new WeakMap;var hi,ai,li,ci,ui,di,pi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},gi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class vi{constructor(t){hi.set(this,void 0),pi(this,hi,t)}add(t,e){pt(t,gi(this,hi))&&!t.classList.contains(gi(this,hi))&&t.classList.add(gi(this,hi))}remove(t,e){pt(t,gi(this,hi))&&t.classList.contains(gi(this,hi))&&t.classList.remove(gi(this,hi))}toggle(t,e){pt(t,gi(this,hi))&&(t.classList.contains(gi(this,hi))?t.classList.remove(gi(this,hi)):t.classList.add(gi(this,hi)))}}hi=new WeakMap;class fi{constructor(t){ai.set(this,void 0),pi(this,ai,t)}add(t,e){if(e)switch(gi(this,ai)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){if(e)switch(gi(this,ai)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){if(e)switch(gi(this,ai)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}ai=new WeakMap;class mi{constructor(t){var e,i;li.set(this,void 0),ci.set(this,void 0),e=this,i=this,[{set value(t){pi(e,li,t)}}.value,{set value(t){pi(i,ci,t)}}.value]=Lt(t)}add(t,e){pt(t,gi(this,li),gi(this,ci))&&t.setAttribute(gi(this,li),gi(this,ci))}remove(t,e){pt(t,gi(this,li),gi(this,ci))&&t.hasAttribute(gi(this,li))&&t.removeAttribute(gi(this,li))}toggle(t,e){pt(t,gi(this,li),gi(this,ci))&&(t.hasAttribute(gi(this,li))?t.removeAttribute(gi(this,li)):t.setAttribute(gi(this,li),gi(this,ci)))}}li=new WeakMap,ci=new WeakMap;class wi{constructor(t){var e,i;ui.set(this,void 0),di.set(this,void 0),e=this,i=this,[{set value(t){pi(e,ui,t)}}.value,{set value(t){pi(i,di,t)}}.value]=Lt(t)}add(t,e){if(!pt(t,gi(this,ui),gi(this,di)))return;let i=t;i.style&&!i.style[gi(this,ui)]&&(i.style[gi(this,ui)]=gi(this,di))}remove(t,e){if(!pt(t,gi(this,ui),gi(this,di)))return;let i=t;i.style&&i.style[gi(this,ui)]&&(i.style[gi(this,ui)]="")}toggle(t,e){if(!pt(t,gi(this,ui),gi(this,di)))return;let i=t;i.style&&(i.style[gi(this,ui)]?delete i.style[gi(this,ui)]:i.style[gi(this,ui)]=gi(this,di))}}ui=new WeakMap,di=new WeakMap;class ki{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class yi{static get(t){if(!ht(t))return new ki;switch(t[0]){case".":return new vi(t.substring(1));case"~":return new fi(t.substring(1));case"&":return new mi(t.substring(1));case"^":return new wi(t.substring(1));default:return new vi(t)}}}class bi{static get(t){if(!ht(t))return[];return t.split(",").map(t=>yi.get(t.trim()))}}var Ci,Mi,Ai,Wi,Ei,Ti,xi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Si=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Li=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ii{constructor(t,e){Ci.set(this,void 0),Mi.set(this,void 0),Ai.set(this,void 0),Wi.set(this,void 0),Ei.set(this,void 0),Ti.set(this,void 0),Si(this,Ci,t),Si(this,Mi,!1),Si(this,Ai,jt.get("ElementManager")),Si(this,Ei,e),Si(this,Wi,Date.now()),Si(this,Ti,new oi(e.interactions))}toggleClass(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{let i=e.classList;Li(this,Ei).interactions.fetch(()=>{i.contains(t)?Li(this,Ei).interactions.mutate(i.remove,i,t):Li(this,Ei).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{let i=e.classList;Li(this,Ei).interactions.fetch(()=>{i.contains(t)||Li(this,Ei).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{let i=e.classList;Li(this,Ei).interactions.fetch(()=>{i.contains(t)&&Li(this,Ei).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return ht(t)?Li(this,Ci).reduce((e,i)=>{let s=i.getAttribute(t);return null!=s&&e.push(s),e},[]):[]}setAttribute(t,e){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(i=>{Li(this,Ei).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{Li(this,Ei).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(i=>{Li(this,Ei).interactions.fetch(()=>{i.hasAttribute(t)?Li(this,Ei).interactions.mutate(i.removeAttribute,i,t):Li(this,Ei).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return xi(this,void 0,void 0,(function*(){return!!ht(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return xi(this,void 0,void 0,(function*(){return!(!ht(t)||!ht(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return xi(this,void 0,void 0,(function*(){return Li(this,Mi)&&Li(this,Ai).error("Element is locked",e),this.lock(),Li(this,Ci).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}animate(t,e){return xi(this,void 0,void 0,(function*(){if(!ht(t))return!1;const i=null!=e?e:Li(this,Ei).setup.animationTime;return this.call(e=>{this.change(()=>{e.classList.add(t),e.classList.add(d),setTimeout(()=>{this.change(()=>{e.classList.remove(t),e.classList.remove(d)})},i)})})}))}open(t,e,i){return xi(this,void 0,void 0,(function*(){if(!pt(t,e))return!1;const s=null!=i?i:Li(this,Ei).setup.animationTime,n=new vi(e);return this.call(e=>{Li(this,Ti).performAction(e,n,null!=s?s:0).then(()=>{e.classList.add(t)})})}))}close(t,e,i){return xi(this,void 0,void 0,(function*(){if(!pt(t,e))return!1;const s=null!=i?i:Li(this,Ei).setup.animationTime,n=new vi(e);return this.call(e=>{Li(this,Ti).performAction(e,n,null!=s?s:0).then(()=>{e.classList.remove(t)})})}))}emit(t,...e){ht(t)?this.call(i=>{let s=i.$cuid;ht(s)&&(Li(this,Ai).debug(`Emitting event ${t} to ${s}`),Li(this,Ei).bus.emit(t,s,...e))},"emit"):Li(this,Ai).warning("Not enough data to emit event","emit")}on(t,e){let i=[];return pt(t,e)?(this.call(s=>{let n=s;if(ht(n)){let s=Li(this,Ei).bus.on(t,e,n);null!=s&&i.push(s)}},"on"),i):(Li(this,Ai).error("Incorrect arguments","on"),i)}detach(t,e){pt(t,e)||Li(this,Ai).error("Incorrect arguments","detach"),this.call(i=>{let s=i;ht(s)&&Li(this,Ei).bus.detach(t,e,s)},"detach")}read(t,...e){Li(this,Ei).interactions.fetch(t,this,...e)}change(t,...e){Li(this,Ei).interactions.mutate(t,this,...e)}elements(){return Li(this,Ci)}count(){return Li(this,Ci).length}lock(){Si(this,Mi,!0)}unlock(){Si(this,Mi,!1)}isLocked(){return Li(this,Mi)}refresh(){return Date.now()-Li(this,Wi)<36e4}}Ci=new WeakMap,Mi=new WeakMap,Ai=new WeakMap,Wi=new WeakMap,Ei=new WeakMap,Ti=new WeakMap;var Pi,Di,Oi,Ni,Bi,_i=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Hi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$i=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ri{constructor(t){Pi.set(this,void 0),Di.set(this,void 0),Oi.set(this,void 0),Ni.set(this,void 0),Bi.set(this,void 0),Hi(this,Bi,t),Hi(this,Di,jt.get("CollectionManager")),Hi(this,Pi,[]),Hi(this,Oi,!1),Hi(this,Ni,"")}setElements(t){Hi(this,Pi,t)}setToggle(t){Hi(this,Ni,t)}addAnimationClass(t,e,i,s){e.classList.add(d),t.classList.add(s),e.classList.add(i)}setFinalClasses(t,e,i,s){e.classList.remove(d),t.classList.remove(s),e.classList.remove(i),t.classList.remove($i(this,Ni)),e.classList.add($i(this,Ni))}verifyIndex(t,e,i){return t>=0&&t!==e&&t<i}setCurrent(t,e){return _i(this,void 0,void 0,(function*(){return this.lock(),$i(this,Di).debug(`Switching index from: ${e} to ${t}`),e>-1&&$i(this,Pi)[e].classList.remove($i(this,Ni)),$i(this,Pi)[t].classList.add($i(this,Ni)),this.unlock(),!0}))}setCurrentWithAnimation(t,e,i,s,n){return _i(this,void 0,void 0,(function*(){this.lock(),$i(this,Di).debug(`Switching index from: ${n} to ${t}`);const r=$i(this,Pi)[n],o=$i(this,Pi)[t];return $i(this,Bi).mutate(this.addAnimationClass,this,r,o,e,i),setTimeout(()=>{$i(this,Bi).mutate(this.setFinalClasses,this,r,o,e,i),this.unlock()},s),!0}))}getCurrentIndex(){if(!ht($i(this,Ni)))return-1;let t=this.count();for(let e=0;e<t;e++)if($i(this,Pi)[e].classList.contains($i(this,Ni)))return e;return-1}elements(){return $i(this,Pi)}check(){return $i(this,Oi)?($i(this,Di).warning("Object locked. Operation in progress","Check"),!1):ht($i(this,Ni))?!(this.count()<=0)||($i(this,Di).warning("Elements list is empty","Check"),!1):($i(this,Di).warning("Toggle is not set. Call setToggleClass","Check"),!1)}count(){return $i(this,Pi)?$i(this,Pi).length:-1}lock(){Hi(this,Oi,!0)}unlock(){Hi(this,Oi,!1)}}Pi=new WeakMap,Di=new WeakMap,Oi=new WeakMap,Ni=new WeakMap,Bi=new WeakMap;var Fi,qi,Ui,zi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Vi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ji=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Yi{constructor(t,e){Fi.set(this,void 0),qi.set(this,void 0),Ui.set(this,void 0),Vi(this,Fi,jt.get("CollectionManager")),Vi(this,Ui,new Ri(e)),ji(this,Ui).setElements(t),Vi(this,qi,Date.now())}setToggle(t){ji(this,Ui).setToggle(t)}setElements(t){ji(this,Ui).setElements(t)}click(t){ji(this,Ui).elements().forEach((e,i)=>{e.addEventListener("click",()=>{this.set(i).then(()=>{t&&t(e,i)})})})}next(){return zi(this,void 0,void 0,(function*(){if(!ji(this,Ui).check())return!1;let t=ji(this,Ui).getCurrentIndex()+1;return this.set(t>=this.length()?0:t)}))}previous(){return zi(this,void 0,void 0,(function*(){if(!ji(this,Ui).check())return!1;let t=ji(this,Ui).getCurrentIndex()-1;return this.set(t<0?this.length()-1:t)}))}set(t){return zi(this,void 0,void 0,(function*(){let e=ji(this,Ui).getCurrentIndex();return!(!ji(this,Ui).check()||!ji(this,Ui).verifyIndex(t,e,this.length()))&&ji(this,Ui).setCurrent(t,e)}))}setWithAnimation(t,e,i,s){return zi(this,void 0,void 0,(function*(){let n=ji(this,Ui).getCurrentIndex();return!(!ji(this,Ui).check()||!ji(this,Ui).verifyIndex(t,n,this.length()))&&ji(this,Ui).setCurrentWithAnimation(t,e,i,s,n)}))}getCurrentIndex(){return ji(this,Ui).getCurrentIndex()}length(){return ji(this,Ui).count()}refresh(){return this.length()>0&&Date.now()-ji(this,qi)>36e4}}Fi=new WeakMap,qi=new WeakMap,Ui=new WeakMap;var Xi,Ki,Gi,Zi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ji=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ts{constructor(t){Xi.set(this,void 0),Ki.set(this,void 0),Gi.set(this,void 0),Ji(this,Xi,null!=t?t:[]),Ji(this,Gi,jt.get("CuiPluginManager")),Ji(this,Ki,[])}init(t){Qi(this,Gi).debug("Plugins initialization started: "+Qi(this,Xi).length),Ji(this,Ki,Qi(this,Xi).filter(t=>ht(t.mutation))),Qi(this,Xi).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),Qi(this,Gi).debug("Plugins have been initialized")}get(t){if(ht(t))return Qi(this,Xi).find(e=>e.name===t)}has(t){return ht(this.get(t))}onMutation(t){return Zi(this,void 0,void 0,(function*(){let e=[];return Qi(this,Ki).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}Xi=new WeakMap,Ki=new WeakMap,Gi=new WeakMap;var es,is,ss,ns,rs,os,hs,as=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ls=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},cs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class us{constructor(t,e,i){es.set(this,void 0),is.set(this,void 0),ss.set(this,void 0),ns.set(this,void 0),rs.set(this,void 0),os.set(this,void 0),hs.set(this,void 0),A.prefix=t.prefix,A.logLevel=t.logLevel,t.development&&(A.devTool=t.development),ls(this,ns,new ts(e)),ls(this,rs,null!=i?i:[]),ls(this,ss,new ei(t,e.map(t=>t.name))),ls(this,es,jt.get("CuiInstance")),ls(this,os,t.root),ls(this,is,void 0),ls(this,hs,[])}init(){return as(this,void 0,void 0,(function*(){if(cs(this,es).debug("Instance started","init"),!ht(window.MutationObserver))throw new r("Mutation observer does not exists");ls(this,hs,cs(this,rs).map(t=>t.attribute));const t=ht(cs(this,hs))?cs(this,os).querySelectorAll(dt(cs(this,hs))):null;if(ht(t)){cs(this,es).debug(`Initiating ${t.length} elements`);let e=[];for(let i of t)try{let t=Ot(i,cs(this,rs));e.push(Nt(i,t,cs(this,ss)))}catch(t){cs(this,es).exception(t)}yield Promise.all(e)}return cs(this,es).debug("Init plugins","init"),cs(this,ns).init(cs(this,ss)),pt(cs(this,rs),cs(this,hs))&&(cs(this,es).debug("Init mutation observer","init"),ls(this,is,new ae(cs(this,os),cs(this,ss))),cs(this,is).setComponents(cs(this,rs)).setAttributes(cs(this,hs)),cs(this,is).setPlugins(cs(this,ns)),cs(this,is).start()),cs(this,es).debug("Setting CSS globals","init"),cs(this,ss).interactions.mutate(()=>{cs(this,ss).setProperty(M.animationTimeLong,cs(this,ss).setup.animationTimeLong+"ms"),cs(this,ss).setProperty(M.animationTime,cs(this,ss).setup.animationTime+"ms"),cs(this,ss).setProperty(M.animationTimeShort,cs(this,ss).setup.animationTimeShort+"ms")},null),cs(this,ss).bus.emit(W,null),this}))}finish(){cs(this,is)&&cs(this,is).stop(),cs(this,ss).bus.emit(E,null)}get(t){const e=this.all(t);if(!e)return;return new Ii(e,cs(this,ss))}collection(t){const e=this.all(t);if(!ht(e))return;return new Yi(e,cs(this,ss).interactions)}select(t){return document.querySelector(t)}all(t){const e=document.querySelectorAll(t);if(ht(e))return[...e]}getUtils(){return cs(this,ss)}on(t,e,i){return pt(t,e)?cs(this,ss).bus.on(t,e,i):(cs(this,es).error("Incorrect arguments","on"),null)}detach(t,e){pt(t,e)||cs(this,es).error("Incorrect arguments","detach"),cs(this,ss).bus.detach(t,e)}detachAll(t){ht(t)||cs(this,es).error("Incorrect arguments","detachAll"),cs(this,ss).bus.detachAll(t)}emit(t,e,...i){if(!pt(t,e))return void cs(this,es).warning("Not enough data to emit event","emit");let s=null;if("string"==typeof e&&e.startsWith("~"))s=e.substring(1);else{s=("string"==typeof e?document.querySelector(e):e).$cuid}ht(s)?cs(this,ss).bus.emit(t,s,...i):cs(this,es).warning("Element is not a cUI element","emit")}getPlugin(t){return cs(this,ns).get(t)}createCuiElement(t,e,i){return as(this,void 0,void 0,(function*(){if(!ht(e)||!cs(this,hs).includes(e))return cs(this,es).error("Element cannot be created: Unknown attribute"),!1;let s=cs(this,rs).find(t=>t.attribute===e);return!!s&&(!!function(t,e,i){if(!pt(e,i,t))return!1;if(t.hasAttribute(e))return!1;let s=[];return xt(i,(t,e)=>{s.push(`${t}: ${e}`)}),t.setAttribute(e,s.join("; ")),!0}(t,e,i)&&Nt(t,[s],cs(this,ss)))}))}}es=new WeakMap,is=new WeakMap,ss=new WeakMap,ns=new WeakMap,rs=new WeakMap,os=new WeakMap,hs=new WeakMap;const ds={slide:{current:{left:{transform:{translateX:{from:0,to:-100,unit:"%"}}},right:{transform:{translateX:{from:0,to:100,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}},fade:{current:{left:{opacity:{from:1,to:0}},right:{opacity:{from:1,to:0}}},previous:{left:{opacity:{from:0,to:1}},right:{opacity:{from:0,to:1}}}},push:{current:{left:{transform:{translateX:{from:0,to:-10,unit:"%"}}},right:{transform:{translateX:{from:0,to:10,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}}};var ps,gs=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},vs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ms{constructor(){ps.set(this,void 0),vs(this,ps,window)}init(t){var e,i;return gs(this,void 0,void 0,(function*(){let s=Object.assign(Object.assign({},new Pt),t.setup);const n=s.app,r={result:!1};if(ht(fs(this,ps)[n]))return r.message="Instance is already initialized",r;if(ht(t.icons))for(let e in t.icons)v[e]=t.icons[e];if(ht(t.swipeAnimations))for(let e in t.swipeAnimations)ds[e]=t.swipeAnimations[e];try{fs(this,ps)[n]=new us(s,null!==(e=t.plugins)&&void 0!==e?e:[],null!==(i=t.components)&&void 0!==i?i:[]),yield fs(this,ps)[n].init()}catch(t){return console.error(t),r.message="An error occured during initialization",r}return r.result=!0,r}))}}ps=new WeakMap;class ws{static setLabel(t,e){t.hasAttribute("aria-label")||t.setAttribute("aria-label",e)}static setAria(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}static removeAria(t,e){t.hasAttribute(e)&&t.removeAttribute(e)}}var ks,ys,bs,Cs,Ms,As,Ws,Es,Ts,xs=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ss=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ls=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Is{constructor(t){ks.set(this,void 0),Ss(this,ks,t)}hasClass(t,e){return!(!t||!e.classList.contains(t))}setClass(t,e){this.setClasses([t],e)}setClasses(t,e){e&&e.classList.add(...t)}setClassesAs(t,...e){Ls(this,ks).mutate(this.setClasses,this,e,t)}removeClass(t,e){this.removeClasses([t],e)}removeClasses(t,e){e&&e.classList.remove(...t)}removeClassesAs(t,...e){Ls(this,ks).mutate(this.removeClasses,this,e,t)}removeAttribute(t,e){e&&e.hasAttribute(t)&&e.removeAttribute(t)}setStyle(t,e,i){t&&t.style&&ht(i)&&(t.style[e]=i)}}ks=new WeakMap;ys=new WeakMap;class Ps extends class{constructor(t,e,i){var s;ys.set(this,void 0),this._log=jt.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid,this.isLocked=!1,this.activeClassName=(null!=(s=i.setup.prefix)?s:"")+"-active",this.helper=new Is(i.interactions),Ss(this,ys,[]),this.componentName=t}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,...e){Ls(this,ys).includes(t)||Ls(this,ys).push(t),this.utils.bus.emit(t,this.cuid,...e)}onEvent(t,e){return this.utils.bus.on(t,e,this.element)}detachEvent(t,e){null!=e&&(this.utils.bus.detach(t,e),e="")}getId(){return this.cuid}checkLockAndWarn(t){return!!this.isLocked&&(this._log.warning("Component is locked",t),!0)}isActive(){return this.element.classList.contains(this.activeClassName)}detachEmiitedEvents(){Ls(this,ys).forEach(t=>{this.utils.bus.detachByCuid(t,this.cuid),this._log.debug("Detaching event: "+t+" on component delete")})}registerInDebug(){this._log.registerElement(this.element,this.cuid,this.componentName)}removeFromDebug(){this._log.unregisterElement(this.cuid,this.componentName)}setDebugProperty(t,e){}logInfo(t,e){this._log.debug(t,e)}logWarning(t,e){this._log.warning(t,e)}logError(t,e,i){this._log.error(t,e),i&&this._log.exception(i,e)}}{constructor(t,e,i,s,n){super(t,e,n),bs.set(this,void 0),this.args=s,this.actionsHelper=new oi(n.interactions),this.prevArgs=void 0,this.isInitialized=!1,Ss(this,bs,i)}handle(t){this.registerInDebug(),this.isInitialized?this.logWarning("Trying to initialize component again","handle"):(this.args.parse(t),this.element.classList.contains(Ls(this,bs))||this.element.classList.add(Ls(this,bs)),this.logInfo("Init","handle"),this.onHandle(),this.isInitialized=!0)}refresh(t){var e;(this.logInfo("Update","refresh"),this.isInitialized)?(this.prevArgs=ht(e=this.args)?Object.assign({},e):null,this.args.parse(t),this._log.debug("Component update","refresh"),this.onRefresh()):this.logError("Cannot update not initialized component","refresh")}destroy(){this.logInfo("Destroy","destroy"),this.onRemove(),this.detachEmiitedEvents(),this.removeFromDebug(),this.isInitialized=!1}}bs=new WeakMap;class Ds extends Ps{constructor(t,e,i,s,n){super(t,e,i,s,n)}onHandle(){this.onInit()}onRefresh(){this.onUpdate()}onRemove(){this.onDestroy()}performAction(t,e,i,s){return xs(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}}class Os extends Ps{constructor(t,e,i,s,n){super(t,e,i,s,n),Cs.set(this,void 0),Ms.set(this,void 0),As.set(this,void 0),Ws.set(this,void 0),Es.set(this,void 0),Ss(this,Cs,null),Ss(this,Ms,null),Ss(this,As,null),Ss(this,Es,[]),Ss(this,Ws,[])}onHandle(){Ss(this,Cs,this.onEvent(x,this.openFromEvent.bind(this))),Ss(this,Ms,this.onEvent(L,this.closeFromEvent.bind(this))),Ss(this,Ws,bi.get(this.args.openAct)),Ss(this,Es,bi.get(this.args.closeAct)),this.onInit()}onRefresh(){this.prevArgs&&this.args.openAct===this.prevArgs.openAct||Ss(this,Ws,bi.get(this.args.openAct)),this.prevArgs&&this.args.closeAct===this.prevArgs.closeAct||Ss(this,Es,bi.get(this.args.closeAct)),this.onUpdate()}onRemove(){this.detachEvent(L,Ls(this,Ms)),this.detachEvent(x,Ls(this,Cs)),this.onDestroy()}open(t){return xs(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?(this.logWarning("Component is already opened"),!1):((this.args.escClose||ht(this.args.keyClose))&&Ss(this,As,this.onEvent($,this.onKeyClose.bind(this))),!!this.onBeforeOpen()&&(this.isLocked=!0,this.performAction(Ls(this,Ws),this.args.timeout,this.onActionFinish.bind(this,this.onAfterOpen.bind(this),S,t),()=>{this.helper.setClass(this.activeClassName,this.element),ws.setAria(this.element,"aria-expanded","true")}))))}))}close(t){return xs(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("close")&&(this.isActive()?(this.detachEvent($,Ls(this,As)),!!this.onBeforeClose()&&(this.isLocked=!0,this.performAction(Ls(this,Es),this.args.timeout,this.onActionFinish.bind(this,this.onAfterClose.bind(this),I,t),()=>{this.helper.removeClass(this.activeClassName,this.element),ws.setAria(this.element,"aria-expanded","false")}))):(this.logWarning("Component is already closed"),!1))}))}performAction(t,e,i,s){return xs(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}openFromEvent(t){this.open(t)}closeFromEvent(t){this.close(t)}onActionFinish(t,e,i){t(),this.emitEvent(e,{timestamp:Date.now(),state:i}),this.isLocked=!1}onKeyClose(t){return xs(this,void 0,void 0,(function*(){(this.args.escClose&&"Escape"===t.event.key||ht(this.args.keyClose)&&t.event.key===this.args.keyClose)&&(yield this.close("Closed by key"))}))}}Cs=new WeakMap,Ms=new WeakMap,As=new WeakMap,Ws=new WeakMap,Es=new WeakMap;class Ns extends Ps{constructor(t,e,i,s,n){super(t,e,i,s,n),Ts.set(this,void 0),Ss(this,Ts,new le(e)),Ls(this,Ts).onMutation(this.mutation.bind(this))}onHandle(){this.onInit(),Ls(this,Ts).observe()}onRefresh(){Ls(this,Ts).unobserve(),this.onUpdate(),Ls(this,Ts).observe()}onRemove(){Ls(this,Ts).unobserve(),this.onDestroy()}mutation(t){this._log.debug("Element mutation","mutation"),this.onMutation(t.reduce((t,e)=>("childList"!==e.type||(e.addedNodes.length>0&&t.added.push(...e.addedNodes),e.removedNodes.length>0&&t.removed.push(...e.removedNodes)),t),{added:[],removed:[]}))}}Ts=new WeakMap;var Bs,_s,Hs,$s,Rs,Fs,qs,Us=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},zs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Vs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class js{constructor(t,e){Bs.set(this,void 0),_s.set(this,void 0),Hs.set(this,void 0),zs(this,Bs,At("> * > .{prefix}-accordion-title",t)),zs(this,_s,At("> *",t)),this.animation=!1,zs(this,Hs,null!=e?e:300),this.single=!1,this.selector=":scope "+Vs(this,Bs),this.items=":scope "+Vs(this,_s),this.timeout=Vs(this,Hs)}parse(t){if(ht(t))return this.single=yt(t.single),this.selector=":scope "+Ct(t.selector,Vs(this,Bs)),this.items=":scope "+Ct(t.content,Vs(this,_s)),this.timeout=ft(t.timeout,Vs(this,Hs)),void(this.animation=yt(t.animation))}isValid(){return!0}}Bs=new WeakMap,_s=new WeakMap,Hs=new WeakMap;class Ys{constructor(t){$s.set(this,void 0),zs(this,$s,null!=t?t:"cui"),this.attribute=Vs(this,$s)+"-accordion"}getStyle(){return null}get(t,e){return new Xs(t,e,this.attribute,Vs(this,$s))}}$s=new WeakMap;class Xs extends Ns{constructor(t,e,i,s){super("CuiAccordionHandler",t,i,new js(s,e.setup.animationTime),e),Rs.set(this,void 0),Fs.set(this,void 0),qs.set(this,void 0),zs(this,qs,null),zs(this,Rs,[]),zs(this,Fs,[]),zs(this,qs,null)}onInit(){if(this.args.isValid()){try{this.initTargets(),zs(this,qs,this.onEvent(O,this.onSwitch.bind(this)))}catch(t){this._log.exception(t,"handle")}this._log.debug("Initialized","handle")}}onUpdate(){try{this.initTargets()}catch(t){this._log.exception(t,"handle")}}onDestroy(){this.detachEvent(O,Vs(this,qs))}onMutation(t){(t.added.length>0||t.removed.length>0)&&this.initTargets()}switch(t){return Us(this,void 0,void 0,(function*(){if(this._log.debug("Switch to: "+t),t<0||this.isLocked||!this.isInitialized)return!1;if(zs(this,Rs,this.queryItems()),Vs(this,Rs).length<=t)return!1;this.isLocked=!0;const e=Vs(this,Rs)[t];return this.helper.hasClass(this.activeClassName,e)?this.helper.removeClassesAs(e,this.activeClassName):(this.args.single&&this.closeAllExcept(t),this.helper.setClassesAs(e,this.activeClassName)),this.emitEvent(N,{index:t,currentTarget:e,timestamp:Date.now()}),this.isLocked=!1,!0}))}onSwitch(t){this.switch(ft(t,-1)).then(()=>{this._log.debug("Switch from event to "+t)})}initTargets(){zs(this,Rs,this.queryItems());const t=this.element.querySelectorAll(this.args.selector);zs(this,Fs,[]),t.forEach((t,e)=>{let i={element:t};this.setListener(i,e),Vs(this,Fs).push(i)})}closeAllExcept(t){this.mutate(()=>{Vs(this,Rs).forEach((e,i)=>{t!==i&&this.helper.hasClass(this.activeClassName,e)&&e.classList.remove(this.activeClassName)})})}setListener(t,e){t.listener=()=>{this.switch(e)},t.element.addEventListener("click",t.listener)}removeListener(t){t.listener&&t.element.removeEventListener("click",t.listener)}queryItems(){return[...this.element.querySelectorAll(this.args.items)]}}Rs=new WeakMap,Fs=new WeakMap,qs=new WeakMap;var Ks,Gs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Js{constructor(){this.length=this.to=this.from=-1,this.rtl=!1}setProperty(t){if(!t||!ht(t.from)||!ht(t.to))throw new h("[OpacityAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to}perform(t,e,i){if(this.to<0)return;let s=this.length*e;t.style&&(t.style.opacity=this.rtl?Math.max(this.from-s,0):Math.min(this.from+s,1))}}class Qs{constructor(t){if(Ks.set(this,void 0),!ht(t))throw new h("[PropertyAnimator] Valid property is required");this.property=t,this.length=this.to=this.from=-1,this.rtl=!1,Gs(this,Ks,"")}setProperty(t){if(!t||!ht(t.from)||!ht(t.to))throw new h("[PropertyAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to,Gs(this,Ks,t.unit)}perform(t,e,i){if(!this.property)return;let s=this.length*e;t.style&&(t.style[this.property]=this.createValue(this.rtl?this.from-s:this.from+s,Zs(this,Ks)))}createValue(t,e){return`${t}${null!=e?e:""}`}}Ks=new WeakMap;class tn{constructor(){this.prop=void 0}setProperty(t){if(!t)throw new h("[TransformAnimator] Property has incorrect format");this.prop=t}build(t){let e=[];for(let i in this.prop){let s=this.prop[i],n=Math.abs(s.to-s.from),r=s.from>s.to?s.from-n*t:s.from+n*t;e.push(this.buildSingle(i,r,s.unit))}return e.join(" ")}buildSingle(t,e,i){return`${t}(${e}${i})`}perform(t,e){this.prop&&t.style&&(t.style.transform=this.build(e))}}var en,sn,nn,rn,on,hn,an,ln,cn,un,dn,pn,gn,vn,fn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap,new WeakMap,new WeakMap;class wn{get(t){if(ht(t))switch(t){case"opacity":return new Js;case"transform":return new tn;default:return new Qs(t)}}}class kn{constructor(t){en.set(this,void 0),sn.set(this,void 0),nn.set(this,void 0),rn.set(this,void 0),on.set(this,void 0),hn.set(this,void 0),an.set(this,void 0),ln.set(this,void 0),cn.set(this,void 0),fn(this,sn,[]),fn(this,on,void 0),fn(this,rn,void 0),fn(this,hn,null!=t&&t),fn(this,ln,new wn),fn(this,nn,!1),fn(this,en,void 0),fn(this,an,!1),fn(this,cn,void 0)}onFinish(t){fn(this,en,t)}setAnimators(t){fn(this,sn,t)}setProps(t){if(ht(t)){fn(this,sn,[]);try{for(let e in t){let i=mn(this,ln).get(e);if(!i)return;i.setProperty(t[e]),mn(this,sn).push(i)}}catch(t){this.reportError(t)}}}setElement(t){fn(this,on,t)}setOnError(t){fn(this,cn,t)}animate(t,e,i){if(mn(this,nn))return;if(!mn(this,on)||0===mn(this,sn).length)return void this.reportError(new Error("Animation cannot be performed: element or animators are not set"));let s=null!=e?e:0,n=i||!1;fn(this,nn,!0),requestAnimationFrame(this.animateAsync.bind(this,t,s,n))}isLocked(){return mn(this,nn)}animateAsync(t,e,i,s){mn(this,rn)||fn(this,rn,s);let n=s-mn(this,rn),r=n/t,o=0;o=0===e?r:i?e-r*e:e+r*e,this.callUpdate(i?Math.max(o,0):Math.min(o,1),1),n<t&&!mn(this,an)?requestAnimationFrame(this.animateAsync.bind(this,t,e,i)):this.endAnimation(i)}endAnimation(t){mn(this,hn)&&mn(this,on)&&mn(this,on).removeAttribute("style"),mn(this,en)&&mn(this,en).call(this,mn(this,on),t,mn(this,an)),fn(this,an,!1),fn(this,rn,void 0),fn(this,nn,!1)}callUpdate(t,e){try{mn(this,sn).forEach(i=>i.perform(mn(this,on),t,e))}catch(t){this.reportError(t),fn(this,an,!0)}}reportError(t){mn(this,cn)?mn(this,cn).call(this,t):(console.error("An error occured in CuiAnimtionEngine"),console.error(t))}}en=new WeakMap,sn=new WeakMap,nn=new WeakMap,rn=new WeakMap,on=new WeakMap,hn=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap;class yn{constructor(t){un.set(this,void 0),dn.set(this,void 0),pn.set(this,void 0),gn.set(this,void 0),vn.set(this,void 0),fn(this,un,void 0),fn(this,dn,[]),fn(this,pn,new kn(t)),fn(this,gn,new wn),fn(this,vn,void 0)}setElement(t){fn(this,un,t)}setOnFinish(t){mn(this,pn).onFinish(t)}setOnError(t){fn(this,vn,t),mn(this,pn).setOnError(t)}setProps(t){if(ht(t)){fn(this,dn,[]);try{for(let e in t){let i=mn(this,gn).get(e);if(!i)return;i.setProperty(t[e]),mn(this,dn).push(i)}}catch(t){this.reportError(t)}}}update(t){mn(this,un)&&0!==mn(this,dn).length&&mn(this,dn).forEach(e=>e.perform(mn(this,un),Math.min(t,1),1))}updateAsync(t){requestAnimationFrame(this.update.bind(this,t))}finish(t,e,i){mn(this,un)&&mn(this,pn).setElement(mn(this,un)),mn(this,pn).setAnimators(mn(this,dn)),mn(this,pn).animate(e,t,i)}reportError(t){mn(this,vn)?mn(this,vn).call(this,t):console.log(t)}}un=new WeakMap,dn=new WeakMap,pn=new WeakMap,gn=new WeakMap,vn=new WeakMap;var bn,Cn,Mn,An,Wn,En,Tn,xn,Sn,Ln=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},In=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pn{constructor(t,e){bn.set(this,void 0),Cn.set(this,void 0),Ln(this,bn,null!=e?e:300),Ln(this,Cn,t),this.escClose=!1,this.keyClose="",this.timeout=In(this,bn),this.swipe=!1,this.openAct="",this.closeAct=""}parse(t){this.swipe=bt(t.swipe,!1),this.escClose=!1,this.keyClose="",this.timeout=ft(t.timeout,In(this,bn)),this.openAct=Ct(t.openAct,At(".{prefix}-animation-fade-in",In(this,Cn))),this.closeAct=Ct(t.closeAct,At(".{prefix}-animation-fade-out",In(this,Cn)))}}bn=new WeakMap,Cn=new WeakMap;class Dn{constructor(t){Mn.set(this,void 0),Ln(this,Mn,null!=t?t:"cui"),this.attribute=In(this,Mn)+"-banner"}getStyle(){return null}get(t,e){return new On(t,e,this.attribute,In(this,Mn))}}Mn=new WeakMap;class On extends Os{constructor(t,e,i,s){super("CuiBannerHandler",t,i,new Pn(s,e.setup.animationTime),e),An.set(this,void 0),Wn.set(this,void 0),En.set(this,void 0),Tn.set(this,void 0),xn.set(this,void 0),Sn.set(this,void 0),Ln(this,An,new yn(!0)),In(this,An).setOnFinish(this.onSwipeFinish.bind(this)),In(this,An).setElement(this.element),Ln(this,En,-1),Ln(this,Tn,0),Ln(this,xn,ds.fade),Ln(this,Sn,null),Ln(this,Wn,!1)}onInit(){this.isActive()||this.open()}onUpdate(){}onDestroy(){this.detachEvent(z,In(this,Sn))}onBeforeOpen(){return!0}onAfterOpen(){this.args.swipe&&Ln(this,Sn,this.onEvent(z,this.onMove.bind(this)))}onAfterClose(){this.detachEvent(z,In(this,Sn))}onBeforeClose(){return!0}onMove(t){if(this.isLocked)return;let e=this.element;switch(t.type){case"down":if(In(this,Wn)||!e.contains(t.target))return;Ln(this,Wn,!0),Ln(this,En,t.x),this.helper.setClassesAs(document.body,g),t.event.preventDefault();break;case"up":if(!In(this,Wn)&&0==In(this,Tn))break;let i=Math.abs(In(this,Tn)),s=i*this.args.timeout,n=i<=.4;this.isLocked=!0,In(this,An).finish(i,s,n),this.helper.removeClassesAs(document.body,g),Ln(this,Wn,!1);break;case"move":if(In(this,Wn)){let i=(t.x-In(this,En))/e.offsetWidth;(In(this,Tn)>=0&&i<=0||In(this,Tn)<=0&&i>0)&&In(this,An).setProps(i>0?In(this,xn).current.right:In(this,xn).current.left),Ln(this,Tn,i),this.mutate(()=>{In(this,An).update(Math.abs(In(this,Tn)))}),t.event.preventDefault()}}}onSwipeFinish(t,e,i){this.isLocked=!1,e||(this.helper.removeClass(this.activeClassName,this.element),ws.setAria(this.element,"aria-expanded","false")),Ln(this,Tn,0),Ln(this,En,0)}}An=new WeakMap,Wn=new WeakMap,En=new WeakMap,Tn=new WeakMap,xn=new WeakMap,Sn=new WeakMap;var Nn,Bn,_n,Hn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$n=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Rn{constructor(t){Nn.set(this,void 0),Bn.set(this,void 0),_n.set(this,void 0),Hn(this,Nn,t),Hn(this,Bn,1),Hn(this,_n,new Fn)}setScale(t){return Hn(this,Bn,t),this}build(){let t=function(t){if(!ht(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}($n(this,Nn));return ht(t)&&$n(this,Bn)&&$n(this,_n).append(t,$n(this,Bn)),t}}Nn=new WeakMap,Bn=new WeakMap,_n=new WeakMap;class Fn{append(t,e){let i=ft(t.getAttribute("width"),20),s=ft(t.getAttribute("height"),20);t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var qn,Un,zn,Vn,jn,Yn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kn{constructor(){this.progress=0}parse(t){ht(t)?Mt(t)?this.progress=ft(t,0):this.progress=ft(t.progress,0):this.progress=0}}class Gn{constructor(t){this.attribute=(null!=t?t:"cui")+"-circle-progress",v.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new Zn(t,e,this.attribute)}}class Zn extends Ds{constructor(t,e,i){super("CuiCircleHandler",t,i,new Kn,e),qn.set(this,void 0),Un.set(this,void 0),zn.set(this,void 0),Vn.set(this,void 0),jn.set(this,void 0),Yn(this,qn,Yn(this,Un,0)),Yn(this,zn,null),Yn(this,Vn,i),Yn(this,jn,null)}onInit(){const t=new Rn(v.special_circle_progress).build();if(!ht(t))return void this.logError("SVG circle was not created","onInit");const e=this.element.querySelector("svg");ht(e)&&e.remove(),this.element.appendChild(t),Yn(this,zn,this.element.querySelector(".circle-progress-path")),Yn(this,Un,Xn(this,zn).getTotalLength()),Yn(this,qn,Xn(this,Un)/100),this.fetch(this.readStyle),Yn(this,jn,this.onEvent(q,this.onSetProgress.bind(this)))}onUpdate(){this.fetch(this.readStyle),this.emitEvent(U,{timestamp:Date.now(),progress:this.args.progress})}onDestroy(){this.detachEvent(q,Xn(this,jn))}onSetProgress(t){ht(t)&&this.element.setAttribute(Xn(this,Vn),t)}updateStyle(t){Xn(this,zn).style.strokeDashoffset=t}readStyle(){if(this.prevArgs&&this.args.progress===this.prevArgs.progress)return;const t=ct(this.args.progress,0,100);this.mutate(this.updateStyle,Xn(this,Un)-Xn(this,qn)*t)}}qn=new WeakMap,Un=new WeakMap,zn=new WeakMap,Vn=new WeakMap,jn=new WeakMap;var Jn,Qn,tr,er=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ir=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class nr{constructor(t){Jn.set(this,void 0),this.target="",this.action="",this.prevent=!1,this.state="",ir(this,Jn,null!=t?t:300),this.timeout=sr(this,Jn)}parse(t){if(ht(t)&&Mt(t))return this.target=t,this.action="",this.timeout=sr(this,Jn),this.prevent=!1,void(this.state="");this.target=Ct(t.target,""),this.action=t.action,this.timeout=ft(t.timeout,sr(this,Jn)),this.prevent=t.prevent&&yt(t.prevent),this.state=t.state}}Jn=new WeakMap;class rr{constructor(t){Qn.set(this,void 0),ir(this,Qn,null!=t?t:"cui"),this.attribute=sr(this,Qn)+"-close"}getStyle(){return null}get(t,e){return new or(t,e,this.attribute,sr(this,Qn))}}Qn=new WeakMap;class or extends Ds{constructor(t,e,i,s){super("CuiCloseHandler",t,i,new nr(e.setup.animationTime),e),tr.set(this,void 0),ir(this,tr,null),this.onClick=this.onClick.bind(this)}onInit(){this.element.addEventListener("click",this.onClick),ir(this,tr,this.onEvent(L,this.onClose.bind(this)))}onUpdate(){}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(L,sr(this,tr))}onClick(t){this.onClose(t),this.args.prevent&&t.preventDefault()}onClose(t){if(this.isLocked)return;const e=this.getTarget();ht(e)?(this.isLocked=!0,this.run(e).then(e=>{this.onActionFinish(t,e)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return er(this,void 0,void 0,(function*(){let e=t.$cuid;if(ht(e))return yield this.utils.bus.emit(L,e,this.args.state),!1;if(pt(this.args.action,this.args.timeout)){let e=bi.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.removeActiveClass(t)})}return this.removeActiveClassAsync(t),!0}))}removeActiveClass(t){ht(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClass(this.activeClassName,t)}removeActiveClassAsync(t){this.fetch(()=>{ht(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClassesAs(t,this.activeClassName)})}onActionFinish(t,e){e&&this.emitClose(t)}getTarget(){var t;return ht(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:Et(this.element)}emitClose(t){this.emitEvent(I,{timestamp:Date.now(),state:this.args.state,event:t})}}tr=new WeakMap;var hr,ar,lr,cr,ur,dr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class gr{constructor(t,e){hr.set(this,void 0),ar.set(this,void 0),dr(this,hr,null!=e?e:300),dr(this,ar,t),this.escClose=!1,this.timeout=pr(this,hr),this.openAct="",this.closeAct="",this.keyClose=""}parse(t){this.escClose=yt(t.escClose),this.keyClose=t.keyClose,this.timeout=ft(t.timeout,pr(this,hr)),this.openAct=Ct(t.openAct,At(".{prefix}-dialog-default-in",pr(this,ar))),this.closeAct=Ct(t.closeAct,At(".{prefix}-dialog-default-out",pr(this,ar)))}}hr=new WeakMap,ar=new WeakMap;class vr{constructor(t){lr.set(this,void 0),dr(this,lr,null!=t?t:"cui"),this.attribute=pr(this,lr)+"-cover"}getStyle(){return null}get(t,e){return new fr(t,e,this.attribute,pr(this,lr))}}lr=new WeakMap;class fr extends Os{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new gr(s,e.setup.animationTimeLong),e),cr.set(this,void 0),ur.set(this,void 0),dr(this,cr,At("{prefix}-cover-open",s)),dr(this,ur,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){ws.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(dr(this,ur,window.pageYOffset),!0)}onAfterOpen(){this.helper.setClass(pr(this,cr),document.body),document.body.style.top=`-${pr(this,ur)}px`,ws.setAria(this.element,"aria-hidden","false")}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(pr(this,ur)||0)),dr(this,ur,0),this.helper.removeClass(pr(this,cr),document.body),ws.setAria(this.element,"aria-hidden","true")}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(pr(this,cr),document.body)}}cr=new WeakMap,ur=new WeakMap;var mr,wr,kr,yr,br,Cr,Mr,Ar=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Er{constructor(t,e){mr.set(this,void 0),wr.set(this,void 0),Ar(this,mr,null!=e?e:300),Ar(this,wr,t),this.escClose=!1,this.outClose=!1,this.timeout=Wr(this,mr),this.openAct="",this.closeAct="",this.keyClose=""}parse(t){this.escClose=yt(t.escClose),this.outClose=yt(t.outClose),this.keyClose=t.keyClose,this.timeout=ft(t.timeout,Wr(this,mr)),this.openAct=Ct(t.openAct,At(".{prefix}-dialog-default-in",Wr(this,wr))),this.closeAct=Ct(t.closeAct,At(".{prefix}-dialog-default-out",Wr(this,wr)))}}mr=new WeakMap,wr=new WeakMap;class Tr{constructor(t){kr.set(this,void 0),Ar(this,kr,null!=t?t:"cui"),this.attribute=Wr(this,kr)+"-dialog"}getStyle(){return null}get(t,e){return new xr(t,e,this.attribute,Wr(this,kr))}}kr=new WeakMap;class xr extends Os{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new Er(s,e.setup.animationTimeLong),e),yr.set(this,void 0),br.set(this,void 0),Cr.set(this,void 0),Mr.set(this,void 0),Ar(this,br,At("{prefix}-dialog-open",s)),Ar(this,yr,s),Ar(this,Cr,0),Ar(this,Mr,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){ws.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Ar(this,Cr,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&Ar(this,Mr,this.onEvent(R,this.onWindowClick.bind(this))),this.helper.setClass(Wr(this,br),document.body),document.body.style.top=`-${Wr(this,Cr)}px`}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(Wr(this,Cr)||0)),Ar(this,Cr,0),this.helper.removeClass(Wr(this,br),document.body),this.detachEvent(R,Wr(this,Mr))}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(Wr(this,br),document.body)}onWindowClick(t){let e=this.element.querySelector(At(".{prefix}-dialog-container",Wr(this,yr)));e&&!e.contains(t.target)&&this.close("out").then(()=>{this._log.debug("Closed by click outside")})}}yr=new WeakMap,br=new WeakMap,Cr=new WeakMap,Mr=new WeakMap;var Sr,Lr,Ir,Pr,Dr,Or,Nr,Br,_r=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class $r{constructor(t){Sr.set(this,void 0),Lr.set(this,void 0),Ir.set(this,void 0),Pr.set(this,void 0),Dr.set(this,void 0),Or.set(this,void 0),Nr.set(this,void 0),Br.set(this,void 0),_r(this,Sr,t),_r(this,Ir,!1),_r(this,Pr,!1),_r(this,Dr,!1),_r(this,Lr,void 0),_r(this,Nr,this.onMouseMove.bind(this)),_r(this,Br,this.onMouseOut.bind(this)),_r(this,Or,this.onMouseOver.bind(this))}setCallback(t){_r(this,Lr,t)}isInProgress(){return Hr(this,Ir)}attach(){Hr(this,Sr).addEventListener("mouseover",Hr(this,Or)),Hr(this,Sr).addEventListener("mousemove",Hr(this,Nr)),Hr(this,Sr).addEventListener("mouseout",Hr(this,Br)),_r(this,Dr,!0)}detach(){Hr(this,Sr).removeEventListener("mouseover",Hr(this,Or)),Hr(this,Sr).removeEventListener("mousemove",Hr(this,Nr)),Hr(this,Sr).removeEventListener("mouseout",Hr(this,Br)),_r(this,Dr,!1)}emit(t,e){pt(Hr(this,Lr))&&(!e&&Hr(this,Ir)||(_r(this,Ir,!0),window.requestAnimationFrame(this.invoke.bind(this,{isHovering:Hr(this,Pr),event:t,timestamp:Date.now()}))))}isAttached(){return Hr(this,Dr)}invoke(t){Hr(this,Lr)&&Hr(this,Lr).call(this,t),_r(this,Ir,!1)}onMouseOver(t){_r(this,Pr,!0),this.emit(t,!0)}onMouseOut(t){_r(this,Pr,!1),this.emit(t,!0)}onMouseMove(t){this.emit(t,!1)}}Sr=new WeakMap,Lr=new WeakMap,Ir=new WeakMap,Pr=new WeakMap,Dr=new WeakMap,Or=new WeakMap,Nr=new WeakMap,Br=new WeakMap;var Rr,Fr,qr,Ur,zr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Vr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class jr{constructor(){Rr.set(this,void 0),Fr.set(this,void 0),qr.set(this,void 0),Ur.set(this,void 0),zr(this,qr,-1),zr(this,Fr,-1),zr(this,Rr,void 0),zr(this,Ur,0)}setElementBox(t){zr(this,Rr,t)}setTarget(t){zr(this,Fr,t.width),zr(this,qr,t.height)}setMargin(t){zr(this,Ur,t)}getVerticalPosition(t){switch(t){case"top":return this.getTopPosition();case"bottom":return this.getBottomPosition();case"middle":return this.getMiddlePosition();default:return-1}}getHorizontalPosition(t){switch(t){case"left":return this.getLeftPosition();case"right":return this.getRightPosition();case"center":return this.getCenterPosition();default:return-1}}getAutoVerticalPosition(t){let e=window.innerHeight,i=this.getVerticalPosition(t);return("top"===t||"middle"===t)&&i<0?[this.getVerticalPosition("bottom"),"bottom"]:("bottom"===t||"middle"===t)&&i+Vr(this,qr)>e?[this.getVerticalPosition("top"),"top"]:[i,t]}getAutoHorizontalPosition(t){let e=window.innerWidth,i=this.getHorizontalPosition(t);return("right"===t||"center"===t)&&i<0?[this.getHorizontalPosition("left"),"left"]:("left"===t||"center"===t)&&i+Vr(this,Fr)>e?[this.getHorizontalPosition("right"),"right"]:[i,t]}getTopPosition(){return this.throwIfNotValid("getTopPosition"),Vr(this,Rr).top-Vr(this,Ur)-Vr(this,qr)}getBottomPosition(){return this.throwIfNotValid("getBottomPosition"),Vr(this,Rr).top+Vr(this,Rr).height+Vr(this,Ur)}getMiddlePosition(){return this.throwIfNotValid("getMiddlePosition"),Vr(this,Rr).top+Vr(this,Rr).height/2-Vr(this,qr)/2}getLeftPosition(){return this.throwIfNotValid("getLeftPosition"),Vr(this,Rr).left}getRightPosition(){return this.throwIfNotValid("getRightPosition"),Vr(this,Rr).left+Vr(this,Rr).width-Vr(this,Fr)}getCenterPosition(){return this.throwIfNotValid("getCenterPosition"),Vr(this,Rr).left+Vr(this,Rr).width/2-Vr(this,Fr)/2}validate(){return ht(Vr(this,Rr))&&Vr(this,qr)>0&&Vr(this,Fr)>0}throwIfNotValid(t){if(!this.validate())throw new c(`[${t}] Position cannot be calculated: missing data [width: ${Vr(this,Fr)}][height: ${Vr(this,qr)}]`)}}Rr=new WeakMap,Fr=new WeakMap,qr=new WeakMap,Ur=new WeakMap;var Yr,Xr,Kr,Gr,Zr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Jr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Qr{constructor(t){Yr.set(this,void 0),Xr.set(this,void 0),Kr.set(this,void 0),Gr.set(this,void 0),Zr(this,Xr,"top-center"),Zr(this,Yr,""),Zr(this,Kr,null!=t?t:new jr),Zr(this,Gr,jt.get("CuiBasePositionCalculator"))}setMargin(t){Jr(this,Kr).setMargin(t)}setPreferred(t){Zr(this,Xr,t)}setStatic(t){Zr(this,Yr,t)}calculate(t,e){if(Jr(this,Kr).setElementBox(t),Jr(this,Kr).setTarget(e),ht(Jr(this,Yr))){Jr(this,Gr).debug("Evaluating static position");const[t,e]=this.parse(Jr(this,Yr));return[Jr(this,Kr).getHorizontalPosition(e),Jr(this,Kr).getVerticalPosition(t),Jr(this,Yr)]}let[i,s]=["",""];ht(Jr(this,Xr))&&(Jr(this,Gr).debug("Evaluating auto position"),[i,s]=this.parse(Jr(this,Xr))),i=null!=i?i:"top",s=null!=s?s:"center",Jr(this,Gr).debug("Calculating position: "+i+"-"+s);const[n,r]=Jr(this,Kr).getAutoVerticalPosition(i),[o,h]=Jr(this,Kr).getAutoHorizontalPosition(s);return Jr(this,Gr).debug("Calculated position: "+r+"-"+h),[o,n,r+"-"+h]}parse(t){return t.split("-")}}Yr=new WeakMap,Xr=new WeakMap,Kr=new WeakMap,Gr=new WeakMap;var to,eo,io,so,no=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ro=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class oo{constructor(t,e,i){to.set(this,void 0),eo.set(this,void 0),io.set(this,void 0),so.set(this,void 0),no(this,eo,e),no(this,io,t),no(this,so,i)}start(){this.canRun()&&(this.stop(),no(this,to,setTimeout(()=>{ro(this,so).call(this),no(this,to,null),ro(this,eo)&&this.start()},ro(this,io))))}stop(){ro(this,to)&&(clearTimeout(ro(this,to)),no(this,to,null))}getId(){return ro(this,to)}canRun(){return ht(ro(this,so))&&ro(this,io)>0}setCallback(t){no(this,so,t)}setTimeout(t){no(this,io,t)}}to=new WeakMap,eo=new WeakMap,io=new WeakMap,so=new WeakMap;var ho,ao,lo,co,uo,po,go,vo,fo,mo,wo,ko,yo,bo,Co,Mo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ao=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Eo{constructor(t){ho.set(this,void 0),Ao(this,ho,At("{prefix}-drop-animation-in",t)),this.mode="click",this.trigger="> a, button",this.autoClose=!1,this.outClose=!1,this.prevent=!1,this.pos="",this.action=Wo(this,ho),this.timeout=3e3,this.margin=8}parse(t){this.mode=Ct(t.mode,"click").toLowerCase(),this.trigger=":scope "+Ct(t.trigger,"> a, button"),this.prevent=yt(t.prevent),this.autoClose=yt(t.autoClose),this.outClose=!t.outClose||yt(t.outClose),this.pos=Ct(t.pos,""),this.action=Ct(t.action,Wo(this,ho)),this.timeout=ft(t.timeout,3e3),this.margin=ft(t.margin,8)}}ho=new WeakMap;class To{constructor(t){ao.set(this,void 0),Ao(this,ao,null!=t?t:"cui"),this.attribute=Wo(this,ao)+"-drop"}getStyle(){return null}get(t,e){return new xo(t,e,this.attribute,Wo(this,ao))}}ao=new WeakMap;class xo extends Ds{constructor(t,e,i,s){super("CuidropHandler",t,i,new Eo(s),e),lo.set(this,void 0),co.set(this,void 0),uo.set(this,void 0),po.set(this,void 0),go.set(this,void 0),vo.set(this,void 0),fo.set(this,void 0),mo.set(this,void 0),wo.set(this,void 0),ko.set(this,void 0),yo.set(this,void 0),bo.set(this,void 0),Co.set(this,void 0),Ao(this,uo,i),Ao(this,lo,s),Ao(this,co,At("{prefix}-drop-open",s)),Ao(this,go,new $r(this.element)),Wo(this,go).setCallback(this.onElementHover.bind(this)),Ao(this,fo,null),Ao(this,mo,null),Ao(this,wo,null),this.onTriggerClick=this.onTriggerClick.bind(this),Ao(this,ko,new Qr),Wo(this,ko).setMargin(8),Wo(this,ko).setPreferred("bottom-left"),Ao(this,yo,""),Ao(this,po,void 0),Ao(this,vo,this.element),Ao(this,Co,[]),Ao(this,bo,new oo(this.args.timeout,!1,this.close.bind(this))),e.isPlugin("click-plugin")||this.logWarning("Window click plugin is not available: outClose will not work")}onInit(){Ao(this,vo,this.acquireTrigger()),Ao(this,po,new $r(Wo(this,vo))),this.setTriggerEvent(),Ao(this,mo,this.onEvent(x,this.open.bind(this))),Ao(this,wo,this.onEvent(L,this.close.bind(this))),Wo(this,ko).setStatic(this.args.pos),Wo(this,ko).setMargin(this.args.margin),Ao(this,bo,new oo(this.args.timeout,!1,this.close.bind(this))),Ao(this,Co,bi.get(this.args.action)),this.mutate(()=>{ws.setAria(this.element,"aria-dropdown","")}),this._log.debug("Initialized","handle")}onUpdate(){Wo(this,po)&&Wo(this,po).isAttached()?Wo(this,po).detach():this.prevArgs&&"click"===this.prevArgs.mode&&Wo(this,vo).removeEventListener("click",this.onTriggerClick),Ao(this,vo,this.acquireTrigger()),Ao(this,po,new $r(Wo(this,vo))),this.setTriggerEvent(),Wo(this,ko).setStatic(this.args.pos),Wo(this,ko).setMargin(this.args.margin),Ao(this,Co,bi.get(this.args.action)),Wo(this,bo).setTimeout(this.args.timeout)}onDestroy(){this.detachEvent(x,Wo(this,mo)),this.detachEvent(L,Wo(this,wo))}open(){return Mo(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?this.close():(this.isAnyActive()&&(yield this.findAndCloseOpenedDrop()),this.isLocked=!0,this._log.debug("Drop "+this.cuid,"open"),this.onOpen(),this.isLocked=!1,!0))}))}close(){return Mo(this,void 0,void 0,(function*(){return!(this.checkLockAndWarn("close")||!this.isActive())&&(this.isLocked=!0,this.logInfo("Drop "+this.cuid,"close"),this.onClose(),this.detachEvent(R,Wo(this,fo)),this.emitEvent(I,{timestamp:Date.now()}),Wo(this,go).detach(),this.isLocked=!1,!0)}))}onClose(){this.mutate(()=>{this.helper.removeClass(this.activeClassName,this.element),this.helper.removeClass(Wo(this,co),document.body),this.toggleActions(),this.helper.removeClass(Wo(this,yo),this.element),ws.setAria(this.element,"aria-expanded","false")})}onOpen(){this.helper.setClass(this.activeClassName,this.element),this.mutate(()=>{const t=Wo(this,vo).getBoundingClientRect();try{const[e,i,s]=Wo(this,ko).calculate(t,this.element.getBoundingClientRect());this.element.style.top=i-t.top+"px",this.element.style.left=e-t.left+"px",Ao(this,yo,At("{prefix}-drop-position-"+s,Wo(this,lo))),this.toggleActions(),this.helper.setClass(Wo(this,yo),this.element),this.helper.setClass(Wo(this,co),document.body),this.emitEvent(S,{timestamp:Date.now()}),Wo(this,go).attach(),this.runAutoCloseTask(),this.args.outClose&&Ao(this,fo,this.onEvent(R,this.onWindowClick.bind(this))),ws.setAria(this.element,"aria-expanded","true")}catch(t){this._log.exception(t)}})}onWindowClick(t){this.element.contains(t.target)||this.close()}isAnyActive(){return this.helper.hasClass(Wo(this,co),document.body)}findAndCloseOpenedDrop(){return Mo(this,void 0,void 0,(function*(){const t=document.querySelector(`[${Wo(this,uo)}].${this.activeClassName}`);if(!ht(t))return this._log.warning("Opened drop was not found"),!1;const e=t.$handlers[Wo(this,uo)];return ht(e)?e.close():(this._log.warning("Drop handler was not found in the element"),!1)}))}onTriggerClick(t){this.isActive()?this.close():this.open(),this.args.prevent&&t.preventDefault()}onHoverEvent(t){t.isHovering&&!this.isActive()&&this.open(),this.args.prevent&&t.event.preventDefault()}onElementHover(t){t.isHovering?Wo(this,bo).stop():!t.isHovering&&this.args.autoClose&&this.runAutoCloseTask()}setTriggerEvent(){"hover"===this.args.mode&&Wo(this,po)?(Wo(this,po).setCallback(this.onHoverEvent.bind(this)),Wo(this,po).attach()):Wo(this,vo).addEventListener("click",this.onTriggerClick)}runAutoCloseTask(){this.args.autoClose&&Wo(this,bo).start()}toggleActions(){Wo(this,Co).forEach(t=>{t.toggle(this.element)})}acquireTrigger(){let t=null;return t=this.element.parentElement?this.element.parentElement.querySelector(this.args.trigger):document.querySelector(this.args.trigger),null!=t?t:this.element}}lo=new WeakMap,co=new WeakMap,uo=new WeakMap,po=new WeakMap,go=new WeakMap,vo=new WeakMap,fo=new WeakMap,mo=new WeakMap,wo=new WeakMap,ko=new WeakMap,yo=new WeakMap,bo=new WeakMap,Co=new WeakMap;var So,Lo,Io,Po,Do,Oo,No=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _o{constructor(t){So.set(this,void 0),Lo.set(this,void 0),Io.set(this,void 0),Po.set(this,void 0),Do.set(this,void 0),Oo.set(this,void 0),No(this,Io,!1),No(this,So,null!=t?t:document.body),No(this,Po,!1),No(this,Do,!1),No(this,Lo,void 0),No(this,Oo,void 0),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this)}setCallback(t){No(this,Lo,t)}setTarget(t){No(this,Oo,t)}isInProgress(){return Bo(this,Io)}preventDefault(t){No(this,Do,t)}attach(){Bo(this,Po)||(Bo(this,So).addEventListener("mousedown",this.onMouseDown,{passive:!1}),Bo(this,So).addEventListener("mouseup",this.onMouseUp,{passive:!1}),Bo(this,So).addEventListener("mousemove",this.onMouseMove,{passive:!1}),Bo(this,So).addEventListener("touchstart",this.onTouchStart,{passive:!1}),Bo(this,So).addEventListener("touchend",this.onTouchEnd,{passive:!1}),Bo(this,So).addEventListener("touchmove",this.onTouchMove,{passive:!1}),No(this,Po,!0))}detach(){Bo(this,Po)&&(Bo(this,So).removeEventListener("mousedown",this.onMouseDown,{passive:!1}),Bo(this,So).removeEventListener("mouseup",this.onMouseUp,{passive:!1}),Bo(this,So).removeEventListener("mousemove",this.onMouseMove,{passive:!1}),Bo(this,So).removeEventListener("touchstart",this.onTouchStart,{passive:!1}),Bo(this,So).removeEventListener("touchend",this.onTouchEnd,{passive:!1}),Bo(this,So).removeEventListener("touchmove",this.onTouchMove,{passive:!1}),No(this,Po,!1))}isAttached(){return Bo(this,Po)}onMouseDown(t){Bo(this,Io)||Bo(this,Oo)&&!Bo(this,Oo).contains(t.target)||(No(this,Io,!0),this.publishMouseEvent("down",t))}onMouseUp(t){Bo(this,Io)&&(No(this,Io,!1),this.publishMouseEvent("up",t))}onMouseMove(t){Bo(this,Io)&&this.publishMouseEvent("move",t)}onTouchStart(t){Bo(this,Io)||Bo(this,Oo)&&!Bo(this,Oo).contains(t.target)||(No(this,Io,!0),this.publishTouchEvent("down",t))}onTouchEnd(t){Bo(this,Io)&&(No(this,Io,!1),this.publishTouchEvent("up",t))}onTouchMove(t){Bo(this,Io)&&this.publishTouchEvent("move",t)}publishMouseEvent(t,e){Bo(this,Do)&&e.cancelable&&e.preventDefault(),ht(Bo(this,Lo))&&Bo(this,Lo).call(this,{type:t,x:e.clientX,y:e.clientY,moveX:e.movementX,moveY:e.movementY,target:e.target,event:e})}publishTouchEvent(t,e){if(Bo(this,Do)&&e.cancelable&&e.preventDefault(),!ht(Bo(this,Lo)))return;let i=null;e.touches.length>0?i=e.touches[0]:e.changedTouches.length>0&&(i=e.changedTouches[0]),Bo(this,Lo).call(this,{event:e,type:t,target:e.target,x:ht(i)?i.clientX:-1,y:ht(i)?i.clientY:-1,moveX:-1,moveY:-1})}}So=new WeakMap,Lo=new WeakMap,Io=new WeakMap,Po=new WeakMap,Do=new WeakMap,Oo=new WeakMap;var Ho,$o=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ro=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fo{calculate(t,e,i,s){return[t,e]}}new WeakMap;class qo{constructor(t){Ho.set(this,void 0),$o(this,Ho,t)}calculate(t,e,i,s){return[t-Ro(this,Ho).offsetLeft,e-Ro(this,Ho).offsetTop]}}Ho=new WeakMap;new WeakMap;var Uo,zo,Vo,jo,Yo,Xo,Ko,Go,Zo,Jo,Qo,th,eh,ih=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class nh{constructor(t,e){Uo.set(this,void 0),zo.set(this,void 0),ih(this,Uo,null!=e?e:300),ih(this,zo,t),this.escClose=!1,this.keyClose="",this.openAct="",this.closeAct="",this.timeout=sh(this,Uo)}parse(t){this.escClose=yt(t.escClose),this.keyClose=t.keyClose,this.timeout=ft(t.timeout,sh(this,Uo)),this.openAct=Ct(t.openAct,At(".{prefix}-float-default-in",sh(this,zo))),this.closeAct=Ct(t.closeAct,At(".{prefix}-float-default-out",sh(this,zo)))}}Uo=new WeakMap,zo=new WeakMap;class rh{constructor(t){Vo.set(this,void 0),ih(this,Vo,null!=t?t:"cui"),this.attribute=sh(this,Vo)+"-float"}getStyle(){return null}get(t,e){return new oh(t,e,this.attribute,sh(this,Vo))}}Vo=new WeakMap;class oh extends Os{constructor(t,e,i,s){super("CuiFloatHandler",t,i,new nh(s,e.setup.animationTime),e),jo.set(this,void 0),Yo.set(this,void 0),Xo.set(this,void 0),Ko.set(this,void 0),Go.set(this,void 0),Zo.set(this,void 0),Jo.set(this,void 0),Qo.set(this,void 0),th.set(this,void 0),eh.set(this,void 0),ih(this,jo,!1),ih(this,Yo,!1),ih(this,Xo,0),ih(this,Ko,0),ih(this,Zo,new _o),sh(this,Zo).preventDefault(!1),ih(this,Jo,new Fo),ih(this,Qo,new qo(t)),ih(this,Go,s),this.move=this.move.bind(this),this.resize=this.resize.bind(this),ih(this,eh,null),ih(this,th,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){ws.setAria(this.element,"aria-modal",""),ih(this,eh,this.element.querySelector(At(".{prefix}-float-move",sh(this,Go)))),ih(this,th,this.element.querySelector(At(".{prefix}-float-resize",sh(this,Go)))),sh(this,Zo).setCallback(this.onMove.bind(this))}onUpdate(){}onDestroy(){}onBeforeOpen(){return!0}onAfterOpen(){sh(this,Zo).attach()}onAfterClose(){sh(this,Zo).detach()}onBeforeClose(){return!0}onMove(t){switch(t.type){case"down":this.onMouseDown(t);break;case"up":this.onMouseUp(t);break;case"move":this.onMouseMove(t)}}onMouseDown(t){t.target===sh(this,eh)?(ih(this,jo,!0),t.event.preventDefault()):t.target===sh(this,th)&&(ih(this,Yo,!0),t.event.preventDefault()),ih(this,Xo,t.x),ih(this,Ko,t.y),this.helper.setClassesAs(document.body,g),this.utils.bus.emit(V,null,!0)}onMouseMove(t){sh(this,jo)?this.peform(t,this.move):sh(this,Yo)&&this.peform(t,this.resize)}onMouseUp(t){ih(this,jo,!1),ih(this,Yo,!1),this.helper.removeClassesAs(document.body,g),this.utils.bus.emit(V,null,!1)}peform(t,e){this.mutate(()=>{ht(e)&&e(this.element,t.x,t.y,t.x-sh(this,Xo),t.y-sh(this,Ko)),ih(this,Xo,t.x),ih(this,Ko,t.y)}),t.event.preventDefault()}resize(t,e,i,s,n){let[r,o]=sh(this,Qo).calculate(e,i,s,n);this.fitsWindow(t.offsetTop,t.offsetLeft,r,o)&&this.mutate(()=>{t.style.width=r+"px",t.style.height=o+"px"})}move(t,e,i,s,n){let[r,o]=sh(this,Jo).calculate(e,i,s,n);this.fitsWindow(o,r,t.offsetWidth,t.offsetHeight)&&this.mutate(()=>{t.style.left=r+"px",t.style.top=o+"px"})}fitsWindow(t,e,i,s){return t+s<window.innerHeight-10&&t>10&&e>10&&e+i<window.innerWidth-10}}jo=new WeakMap,Yo=new WeakMap,Xo=new WeakMap,Ko=new WeakMap,Go=new WeakMap,Zo=new WeakMap,Jo=new WeakMap,Qo=new WeakMap,th=new WeakMap,eh=new WeakMap;var hh,ah=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},lh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ch{constructor(){this.icon="",this.scale=1}parse(t){Mt(t)?this.icon=Ct(t,""):(this.icon=Ct(t.icon,""),this.scale=ft(t.scale,1))}}class uh{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new dh(t,e,this.attribute)}}class dh extends Ds{constructor(t,e,i){super("CuiIconHandler",t,i,new ch,e),hh.set(this,void 0),ah(this,hh,null)}onInit(){this.isLocked||(null===lh(this,hh)?(this.isLocked=!0,ah(this,hh,this.args.icon),this.addIcon(this.args.icon)):this._log.debug("Icon already initialized"))}onUpdate(){this.isLocked||this.args.icon!==lh(this,hh)&&(ah(this,hh,this.args.icon),this.addIcon(this.args.icon))}onDestroy(){const t=this.element.querySelector("svg");ht(t)&&t.remove(),ah(this,hh,null)}addIcon(t){const e=t?v[t]:null;if(!e)return void(this.isLocked=!1);const i=new Rn(e).setScale(this.args.scale).build(),s=this.element.querySelector("svg");ht(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}insertBefore(t){this.element.insertBefore(t,this.element.firstChild),this.isLocked=!1}appendChild(t){this.element.appendChild(t),this.isLocked=!1}}hh=new WeakMap;var ph,gh,vh,fh,mh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class kh{constructor(t,e){ph.set(this,void 0),gh.set(this,void 0),vh.set(this,void 0),fh.set(this,void 0),mh(this,gh,t),mh(this,vh,null!=e?e:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]),mh(this,fh,void 0),mh(this,ph,void 0)}setCallback(t){mh(this,fh,t)}connect(){wh(this,fh)&&mh(this,ph,new IntersectionObserver(wh(this,fh),{root:wh(this,gh),rootMargin:"0px",threshold:wh(this,vh)}))}observe(t){wh(this,ph)&&wh(this,ph).observe(t)}unobserve(t){wh(this,ph)&&wh(this,ph).unobserve(t)}disconnect(){wh(this,ph)&&wh(this,ph).disconnect()}}ph=new WeakMap,gh=new WeakMap,vh=new WeakMap,fh=new WeakMap;var yh,bh,Ch,Mh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ah=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wh{constructor(){this.target="div",this.action="",this.offset=0,this.isRoot=!1}parse(t){this.target=ht(t.target)?":scope "+t.target:":scope > *",this.action=Ct(t.action,""),this.offset=ut(parseFloat(t.offset),0,1,0),this.isRoot=yt(t.isRoot)}}class Eh{constructor(t){this.attribute=(null!=t?t:"cui")+"-intersection"}getStyle(){return null}get(t,e){return new Th(t,e,this.attribute)}}class Th extends Ds{constructor(t,e,i){super("CuiIntersectionHandler",t,i,new Wh,e),yh.set(this,void 0),bh.set(this,void 0),Ch.set(this,void 0),Mh(this,yh,new kh(this.element)),Mh(this,bh,[]),Mh(this,Ch,[])}onInit(){this.parseArguments(),Ah(this,yh).setCallback(this.onIntersection.bind(this)),Ah(this,yh).connect(),Ah(this,bh).forEach(t=>{Ah(this,yh).observe(t)})}onUpdate(){this.parseArguments()}onDestroy(){Ah(this,yh).disconnect()}parseArguments(){if(!ht(this.prevArgs)||this.prevArgs.target!==this.args.target){let t=this.args.isRoot?document.body:this.element;Mh(this,bh,[...t.querySelectorAll(this.args.target)])}Mh(this,Ch,bi.get(this.args.action))}onIntersection(t,e){ht(Ah(this,bh))&&t.forEach(t=>{t.isIntersecting&&t.intersectionRatio>=this.args.offset?this.addActions(t.target):this.removeActions(t.target),this.emitIntersection(t)})}emitIntersection(t){this.emitEvent(H,{entry:t,offset:this.args.offset,timestamp:Date.now()})}addActions(t){Ah(this,Ch).forEach(e=>e.add(t))}removeActions(t){Ah(this,Ch).forEach(e=>e.remove(t))}}yh=new WeakMap,bh=new WeakMap,Ch=new WeakMap;var xh,Sh,Lh,Ih,Ph,Dh,Oh,Nh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _h{constructor(t,e){xh.set(this,void 0),Sh.set(this,void 0),Nh(this,Sh,null!=e?e:300),Nh(this,xh,t),this.escClose=!1,this.position="right",this.openAct=this.getDefaultOpenClass(),this.closeAct=this.getDefaultCloseClass(),this.timeout=Bh(this,Sh),this.outClose=!1,this.keyClose=""}parse(t){ht(t)&&(this.escClose=yt(t.escClose),this.outClose=yt(t.outClose),this.position=Ct(t.position,"right"),this.openAct=Ct(t.openAct,this.getDefaultOpenClass()),this.closeAct=Ct(t.closeAct,this.getDefaultCloseClass()),this.timeout=ft(t.timeout,Bh(this,Sh)),this.keyClose=t.keyClose)}getDefaultOpenClass(){return At("right"===this.position?".{prefix}-offcanvas-default-right-in":".{prefix}-offcanvas-default-left-in",Bh(this,xh))}getDefaultCloseClass(){return At("right"===this.position?".{prefix}-offcanvas-default-right-out":".{prefix}-offcanvas-default-left-out",Bh(this,xh))}}xh=new WeakMap,Sh=new WeakMap;class Hh{constructor(t){Lh.set(this,void 0),Nh(this,Lh,null!=t?t:"cui"),this.attribute=Bh(this,Lh)+"-off-canvas"}getStyle(){return null}get(t,e){return new $h(t,e,this.attribute,Bh(this,Lh))}}Lh=new WeakMap;class $h extends Os{constructor(t,e,i,s){super("CuiOffCanvasHandler",t,i,new _h(s,e.setup.animationTime),e),Ih.set(this,void 0),Ph.set(this,void 0),Dh.set(this,void 0),Oh.set(this,void 0),Nh(this,Ih,s),Nh(this,Ph,At("{prefix}-off-canvas-open",s)),Nh(this,Oh,null),Nh(this,Dh,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){this.mutate(()=>{this.setPositionLeft(),ws.setAria(this.element,"aria-modal","")})}onUpdate(){this.setPositionLeft()}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Nh(this,Dh,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&Nh(this,Oh,this.onEvent(R,this.onWindowClick.bind(this))),this.helper.setClass(Bh(this,Ph),document.body),document.body.style.top=`-${scrollY}px`}onAfterClose(){this.detachEvent(R,Bh(this,Oh)),this.helper.removeClass(Bh(this,Ph),document.body),document.body.style.top="",window.scrollTo(0,-1*Bh(this,Dh))}onBeforeClose(){return!0}onWindowClick(t){const e=this.element.querySelector(At(".{prefix}-off-canvas-container",Bh(this,Ih)));e&&!e.contains(t.target)&&this.close()}isAnyActive(){return this.helper.hasClass(Bh(this,Ph),document.body)}setPositionLeft(){let t=at(Bh(this,Ih),"left");"left"!==this.args.position||this.helper.hasClass(t,this.element)?"right"==this.args.position&&this.helper.hasClass(t,this.element)&&this.helper.removeClass(t,this.element):this.helper.setClass(t,this.element)}}Ih=new WeakMap,Ph=new WeakMap,Dh=new WeakMap,Oh=new WeakMap;var Rh,Fh,qh,Uh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},zh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vh{static get(t){return t instanceof Window?new Xh:t instanceof HTMLElement?new Yh(t):new jh(t)}}class jh{constructor(t){Rh.set(this,void 0),Fh.set(this,void 0),Uh(this,Fh,t),Uh(this,Rh,t.getBoundingClientRect())}getHeight(){return zh(this,Rh).height}getWidth(){return zh(this,Rh).width}getTop(){return zh(this,Rh).top}getLeft(){return zh(this,Rh).left}getScrollHeight(){return zh(this,Fh).scrollHeight}getScrollWidth(){return zh(this,Fh).scrollWidth}getScrollTop(){return zh(this,Fh).scrollTop}getScrollLeft(){return zh(this,Fh).scrollLeft}queryAll(t){return[...zh(this,Fh).querySelectorAll(t)]}}Rh=new WeakMap,Fh=new WeakMap;class Yh{constructor(t){qh.set(this,void 0),Uh(this,qh,t)}getHeight(){return zh(this,qh).offsetHeight}getWidth(){return zh(this,qh).offsetWidth}getTop(){return zh(this,qh).offsetTop}getLeft(){return zh(this,qh).offsetLeft}getScrollHeight(){return zh(this,qh).scrollHeight}getScrollWidth(){return zh(this,qh).scrollWidth}getScrollTop(){return zh(this,qh).scrollTop}getScrollLeft(){return zh(this,qh).scrollLeft}queryAll(t){return[...zh(this,qh).querySelectorAll(t)]}}qh=new WeakMap;class Xh{getHeight(){return window.innerHeight}getWidth(){return window.innerWidth}getTop(){return 0}getLeft(){return 0}getScrollHeight(){return window.innerHeight}getScrollWidth(){return window.innerWidth}getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}queryAll(t){return[...document.querySelectorAll(t)]}}var Kh,Gh,Zh,Jh,Qh,ta,ea,ia,sa,na,ra=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},oa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ha{constructor(t,e){Kh.set(this,void 0),Gh.set(this,void 0),Zh.set(this,void 0),Jh.set(this,void 0),Qh.set(this,void 0),ta.set(this,void 0),ea.set(this,void 0),ia.set(this,void 0),sa.set(this,void 0),na.set(this,void 0),ra(this,Kh,t),ra(this,ia,Vh.get(t)),ra(this,Gh,!1),ra(this,Zh,ut(e,0,100,0)),ra(this,Jh,ra(this,Qh,0)),ra(this,ea,!1),ra(this,ta,void 0),ra(this,sa,new oo(50,!1,this.onScrollFinish.bind(this))),ra(this,na,this.listener.bind(this))}setCallback(t){ra(this,ta,t)}attach(){oa(this,Kh).addEventListener("scroll",oa(this,na)),ra(this,ea,!0),this.listener(void 0,!0,"init")}detach(){oa(this,Kh).removeEventListener("scroll",oa(this,na)),oa(this,sa).stop(),ra(this,ea,!1)}setTarget(t){t!==oa(this,Kh)&&(this.detach(),ra(this,Kh,t),this.attach())}setThreshold(t){ra(this,Zh,ut(t,0,100,0))}isInProgress(){return oa(this,Gh)}isAttached(){return oa(this,ea)}listener(t,e,i){if(!ht(oa(this,ta)))return;let s=oa(this,ia).getScrollLeft(),n=oa(this,ia).getScrollTop();ra(this,Jh,oa(this,Jh)+s),ra(this,Qh,oa(this,Qh)+n),oa(this,Gh)||!this.passedThreshold()&&ht(t)||(ra(this,Gh,!0),oa(this,ta).call(this,{base:t,top:n,left:s,initial:null!=e&&e,scrolling:ht(t),source:null!=i?i:"event"}),ht(t)&&oa(this,sa).start(),ra(this,Gh,!1),ra(this,Jh,0),ra(this,Qh,0))}passedThreshold(){return oa(this,Zh)<=0||oa(this,Jh)>=oa(this,Zh)||oa(this,Qh)>=oa(this,Zh)}onScrollFinish(){this.listener(void 0,!1,"task")}}Kh=new WeakMap,Gh=new WeakMap,Zh=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,ta=new WeakMap,ea=new WeakMap,ia=new WeakMap,sa=new WeakMap,na=new WeakMap;var aa,la,ca,ua,da,pa,ga,va=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ma{matches(t,e,i,s){return i>0&&e>=i||s>0&&t>=s}}class wa{constructor(){aa.set(this,void 0),la.set(this,void 0),ca.set(this,void 0),ua.set(this,void 0),da.set(this,void 0),pa.set(this,void 0),ga.set(this,void 0),va(this,aa,0),va(this,la,0),va(this,ua,0),va(this,ca,0),va(this,ga,100),va(this,da,!1),va(this,pa,!1)}matches(t,e,i,s){return this.fitsOffsetY(t,s)||this.fitsOffsetX(e,i)}fitsOffsetX(t,e){if(e<=0)return!1;let i=t-fa(this,aa);return t>=e&&i>fa(this,ga)?va(this,da,!0):fa(this,da)&&i<-fa(this,ga)&&va(this,da,!1),(i<0&&fa(this,ua)<i||i>=0&&fa(this,ua)>i)&&va(this,aa,t),va(this,ua,i),fa(this,da)}fitsOffsetY(t,e){if(e<=0)return!1;let i=t-fa(this,la);return t>=e&&i>fa(this,ga)?va(this,pa,!0):fa(this,pa)&&i<-fa(this,ga)&&va(this,pa,!1),(i<0&&fa(this,ca)<i||i>=0&&fa(this,ca)>i)&&va(this,la,t),va(this,ca,i),fa(this,pa)}}aa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap,pa=new WeakMap,ga=new WeakMap;var ka,ya,ba,Ca,Ma,Aa,Wa,Ea,Ta,xa,Sa=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},La=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ia{constructor(){this.offsetX=0,this.offsetY=0,this.target="",this.root=!1,this.action="",this.mode="static"}parse(t){this.target=t.target,this.action=t.action,this.offsetX=ft(t.offsetX,-1),this.offsetY=ft(t.offsetY,-1),this.root=yt(t.root),this.mode=Ct(t.mode,"static")}}class Pa{constructor(t){this.attribute=(null!=t?t:"cui")+"-offset"}getStyle(){return null}get(t,e){return new Da(t,e,this.attribute)}}class Da extends Ds{constructor(t,e,i){super("CuiOffsetHandler",t,i,new Ia,e),ka.set(this,void 0),ya.set(this,void 0),ba.set(this,void 0),Ca.set(this,void 0),Ma.set(this,void 0),Aa.set(this,void 0),Wa.set(this,void 0),Ea.set(this,void 0),Ta.set(this,void 0),xa.set(this,void 0),this.element=t,Sa(this,ya,this.element),Sa(this,ba,e),Sa(this,Ca,!1),Sa(this,Ma,[]),Sa(this,Aa,0),Sa(this,Wa,0),Sa(this,Ea,20),Sa(this,Ta,this.element),Sa(this,xa,null),Sa(this,ka,void 0)}onInit(){this.parseAttribute(),Sa(this,ka,new ha(this.args.root?window:this.element,this.utils.setup.scrollThreshold)),La(this,ka).setCallback(this.onScroll.bind(this)),La(this,ka).attach()}onUpdate(){this.parseAttribute()}onDestroy(){La(this,ka)&&La(this,ka).detach()}onScroll(t){this.checkAndPerformActions(t)}parseAttribute(){Sa(this,Ta,this.getRoot()),Sa(this,ya,this.getTarget()),Sa(this,Ma,bi.get(this.args.action)),Sa(this,xa,class{static get(t){return"dynamic"===t?new wa:new ma}}.get(this.args.mode))}checkAndPerformActions(t){ht(La(this,xa))||this.logError("Cannot perform - mode handler not initialized","checkAndPerformActions");let e=La(this,xa).matches(t.top,t.left,this.args.offsetX,this.args.offsetY);if(e!==La(this,Ca))return this.act(e),Sa(this,Ca,e),void this.callEvent(La(this,Ca),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top));this.exceededThreshold(t.left,t.top)&&(this.callEvent(La(this,Ca),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top)),Sa(this,Aa,t.left),Sa(this,Wa,t.top))}act(t){pt(La(this,Ma),La(this,ya))&&(this.isLocked=!0,La(this,Ma).forEach(e=>{t?e.add(La(this,ya),La(this,ba)):e.remove(La(this,ya),La(this,ba))}),this.isLocked=!1)}callEvent(t,e,i,s,n,r,o){this.emitEvent(F,{matches:La(this,Ca),offsetX:e,offsetY:i,ratioX:r,ratioY:o,scrolling:s,source:n,timestamp:Date.now()})}getRoot(){return this.args.root?document.body:this.element}exceededThreshold(t,e){return Math.abs(t-La(this,Aa))>La(this,Ea)||Math.abs(e-La(this,Wa))>La(this,Ea)}calcaRatio(t,e){let i=parseFloat(((La(this,Ta).clientHeight+e)/La(this,Ta).scrollHeight).toFixed(2));return[ct(parseFloat(((La(this,Ta).clientWidth+t)/La(this,Ta).scrollWidth).toFixed(2)),0,1),ct(i,0,1)]}getTarget(){let t=this.args.target?La(this,Ta).querySelector(this.args.target):null;return null!=t?t:this.element}}ka=new WeakMap,ya=new WeakMap,ba=new WeakMap,Ca=new WeakMap,Ma=new WeakMap,Aa=new WeakMap,Wa=new WeakMap,Ea=new WeakMap,Ta=new WeakMap,xa=new WeakMap;var Oa,Na,Ba,_a=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ha=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$a=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ra{constructor(t){Oa.set(this,void 0),Ha(this,Oa,null!=t?t:300),this.target="",this.action="",this.timeout=0,this.prevent=!1,this.state=""}parse(t){if(ht(t)&&Mt(t))return this.target=t,this.action="",this.timeout=$a(this,Oa),this.prevent=!1,void(this.state="");this.target=Ct(t.target,""),this.action=t.action,this.timeout=ft(t.timeout,$a(this,Oa)),this.prevent=yt(t.prevent),this.state=t.state}}Oa=new WeakMap;class Fa{constructor(t){Na.set(this,void 0),Ha(this,Na,null!=t?t:"cui"),this.attribute=$a(this,Na)+"-open"}getStyle(){return null}get(t,e){return new qa(t,e,this.attribute,$a(this,Na))}}Na=new WeakMap;class qa extends Ds{constructor(t,e,i,s){super("CuiOpenHandler",t,i,new Ra(e.setup.animationTime),e),Ba.set(this,void 0),Ha(this,Ba,null),this.onClick=this.onClick.bind(this)}onInit(){this.element.addEventListener("click",this.onClick),Ha(this,Ba,this.onEvent(x,this.onOpen.bind(this)))}onUpdate(){}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(x,$a(this,Ba))}onClick(t){this.onOpen(t),this.args.prevent&&t.preventDefault()}onOpen(t){if(this.isLocked)return;const e=this.getTarget(this.args.target);ht(e)?(this.isLocked=!0,this.run(e).then(i=>{this.activateTarget(t,e,i)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return _a(this,void 0,void 0,(function*(){let e=t.$cuid;if(ht(e))return this._log.debug("Open cUI component"),yield this.utils.bus.emit(x,e,this.args.state),!1;if(this._log.debug("Open html component"),pt(this.args.timeout,this.args.action)){this._log.debug("Perfrom an action");let e=bi.get(this.args.action);return yield this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.setActiveClass(t)}),!0}return this.setActiveClassAsync(t),!0}))}setActiveClass(t){ht(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClass(this.activeClassName,t)}setActiveClassAsync(t){this.fetch(()=>{ht(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClassesAs(t,this.activeClassName)})}activateTarget(t,e,i){ht(e)&&!this.helper.hasClass(this.activeClassName,e)&&this.helper.setClassesAs(e,this.activeClassName),i&&this.emitOpen(t)}emitOpen(t){this.emitEvent(S,{event:t,state:this.args.state,timestamp:Date.now()})}getTarget(t){if(ht(t))return document.querySelector(t);let e=this.element.parentElement,i=ht(e)?e.querySelectorAll("[cuid]"):void 0;return!i||i.length<2?void 0:function(t,e){let i=t.length;if(t&&0!==i)for(let s=0;s<i;s++)if(e(t[s],s))return t[s]}([...i],t=>t!==this.element)}}Ba=new WeakMap;var Ua,za,Va,ja,Ya,Xa,Ka,Ga,Za,Ja=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class tl{constructor(){this.mode="simple",this.default="",this.small=this.medium=this.large=this.xlarge=void 0,this.delay=0}parse(t){var e,i,s,n;this.default=Ct(t.default,""),this.small=null!==(e=t.small)&&void 0!==e?e:t.s,this.medium=null!==(i=t.medium)&&void 0!==i?i:t.m,this.large=null!==(s=t.large)&&void 0!==s?s:t.l,this.xlarge=null!==(n=t.xlarge)&&void 0!==n?n:t.xl,this.mode="smart"===t.mode?"smart":"simple",this.delay=ft(t.delay,0)}}class el{constructor(t){Ua.set(this,void 0),Ja(this,Ua,null!=t?t:"cui"),this.attribute=Qa(this,Ua)+"-resize"}getStyle(){return null}get(t,e){return new il(t,e,this.attribute)}}Ua=new WeakMap;class il extends Ds{constructor(t,e,i){super("CuiResizeHandler",t,i,new tl,e),za.set(this,void 0),Va.set(this,void 0),ja.set(this,void 0),Ya.set(this,void 0),Xa.set(this,void 0),Ka.set(this,void 0),Ga.set(this,void 0),Za.set(this,void 0),Ja(this,za,null),Ja(this,Va,new kh(document.documentElement,[0,.1])),Qa(this,Va).setCallback(this.onIntersection.bind(this)),Ja(this,Xa,""),Ja(this,Ya,""),Ja(this,ja,"none"),Ja(this,Ga,!1),Ja(this,Za,void 0),Ja(this,Ka,void 0)}onInit(){Ja(this,za,this.utils.bus.on(T,this.resize.bind(this))),Qa(this,Va).connect(),Qa(this,Va).observe(this.element),Ja(this,ja,gt(window.innerWidth)),Ja(this,Ga,this.isInViewport(this.element)),this.setNewValue(),this.updateElement()}onUpdate(){this.setNewValue(),this.updateElement()}onDestroy(){null!==Qa(this,za)&&(this.utils.bus.detach(T,Qa(this,za)),Ja(this,za,null)),Qa(this,Va).unobserve(this.element),Qa(this,Va).disconnect()}resize(t){Ja(this,ja,t.current),this.setNewValue(),this.updateElement()}onIntersection(t){t.length>0&&Ja(this,Ga,t[0].isIntersecting),this.updateElement()}setNewValue(){let t=this.isSmartMode()?this.getSmartValue(Qa(this,ja)):this.getValue(Qa(this,ja),!0);t&&t!==Qa(this,Ya)&&Ja(this,Ya,t)}getValue(t,e){let i=void 0;switch(t){case"xlarge":i=this.args.xlarge;break;case"large":i=this.args.large;break;case"medium":i=this.args.medium;break;case"small":i=this.args.small;break;default:i=this.args.default}return e&&!i?this.args.default:i}getSmartValue(t){var e,i,s,n;let r=this.args.default;return"none"===t?r:(r=null!==(e=this.args.small)&&void 0!==e?e:r,"small"===t?r:(r=null!==(i=this.args.medium)&&void 0!==i?i:r,"medium"===t?r:(r=null!==(s=this.args.large)&&void 0!==s?s:r,"large"===t?r:null!==(n=this.args.xlarge)&&void 0!==n?n:r)))}updateElement(){Qa(this,Ga)||!this.isSmartMode()?ht(Qa(this,Ya))?Qa(this,Xa)!==Qa(this,Ya)&&this.run(()=>{let t=yi.get(Qa(this,Ya));this.mutate(()=>{Qa(this,Ka)&&Qa(this,Ka).remove(this.element),t.add(this.element),Ja(this,Xa,Qa(this,Ya)),Ja(this,Ka,t)})}):this.logWarning("Not eligible to set value: "+Qa(this,Ya)):this.logInfo("Not intersecting")}isSmartMode(){return"smart"===this.args.mode}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}run(t){Qa(this,Za)&&(clearTimeout(Qa(this,Za)),Ja(this,Za,void 0)),Ja(this,Za,setTimeout(()=>{t(),Ja(this,Za,void 0)},this.args.delay))}}za=new WeakMap,Va=new WeakMap,ja=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,Ka=new WeakMap,Ga=new WeakMap,Za=new WeakMap;var sl,nl,rl,ol=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},hl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class al{constructor(t){this.attribute=ht(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new cl(t,e,this.attribute)}}class ll{constructor(){this.target="",this.parent="",this.behavior="auto"}parse(t){this.target=Ct(t.target,""),this.parent=Ct(t.parent,""),this.behavior=ht(t.behavior)&&"smooth"===t.behavior.toLowerCase()?"smooth":"auto"}}class cl extends Ds{constructor(t,e,i){super("CuiScrollHandler",t,i,new ll,e),sl.set(this,void 0),nl.set(this,void 0),rl.set(this,void 0),this.element=t,ol(this,sl,null),ol(this,nl,null),ol(this,rl,this.onClick.bind(this))}onInit(){this.element.addEventListener("click",hl(this,rl)),this.setTargets()}onUpdate(){this.setTargets()}onDestroy(){this.element.removeEventListener("click",hl(this,rl))}onClick(t){if(!pt(hl(this,nl),hl(this,sl)))return;let e=function(t){if(!ht(t))return-1;let e=t.offsetTop-parseInt(mt(t,"margin-top"))-parseInt(mt(t,"padding-top"))-parseInt(mt(t,"border-top-width"));return e<0?t.offsetTop:e}(hl(this,nl))-hl(this,sl).offsetTop,i=e-hl(this,sl).scrollTop;hl(this,sl).scrollBy({top:i,behavior:this.args.behavior}),this.emitEvent(B,{to:e,by:i,target:hl(this,nl),parent:hl(this,sl),timestamp:Date.now()}),t.preventDefault()}setTargets(){ol(this,nl,ht(this.args.target)?document.querySelector(this.args.target):null),ht(hl(this,nl))&&ol(this,sl,ht(this.args.parent)?document.querySelector(this.args.parent):hl(this,nl).parentElement)}}sl=new WeakMap,nl=new WeakMap,rl=new WeakMap;var ul,dl,pl,gl,vl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ml{constructor(t,e){var i;ul.set(this,void 0),dl.set(this,void 0),pl.set(this,void 0),gl.set(this,void 0),vl(this,gl,Vh.get(t)),vl(this,ul,new ha(t,null!==(i=null==e?void 0:e.threshold)&&void 0!==i?i:0)),fl(this,ul).setCallback(this.onScroll.bind(this)),vl(this,pl,[]),vl(this,dl,void 0)}setChildren(t){vl(this,pl,t)}setThreshold(t){fl(this,ul).setThreshold(t)}setCallback(t){vl(this,dl,t)}setParent(t){vl(this,gl,Vh.get(t)),fl(this,ul).setTarget(t)}isInProgress(){return fl(this,ul).isInProgress()}attach(){this.isAttached()||fl(this,ul).attach()}detach(){this.isAttached()&&fl(this,ul).detach()}isAttached(){return fl(this,ul)&&fl(this,ul).isAttached()}onScroll(t){pt(fl(this,pl),fl(this,dl))&&fl(this,dl)&&fl(this,dl).call(this,this.prepareCallbackResult(t))}calcChildVerticalRatio(t,e,i){let s=t.offsetTop+t.offsetHeight;return ct(((i<s?i:s)-(e>t.offsetTop?e:t.offsetTop))/t.offsetHeight,0,1)}calcChildHorizontalRatio(t,e,i){let s=t.offsetLeft+t.offsetWidth;return ct(((i<s?i:s)-(e>t.offsetLeft?e:t.offsetLeft))/t.offsetWidth,0,1)}prepareCallbackResult(t){var e,i;let s=t.top+fl(this,gl).getHeight(),n=t.left+fl(this,gl).getWidth();return{ev:t.base,top:t.top,left:t.left,scrolling:null!==(e=t.scrolling)&&void 0!==e&&e,initial:null!==(i=t.initial)&&void 0!==i&&i,source:t.source,items:fl(this,pl).map((e,i)=>({verticalRatio:this.calcChildVerticalRatio(e,t.top,s),horizontalRatio:this.calcChildHorizontalRatio(e,t.left,n),element:e}))}}}ul=new WeakMap,dl=new WeakMap,pl=new WeakMap,gl=new WeakMap;class wl{static get(t){return"multi"===t?new bl:new yl}}class kl{constructor(t){this.previous=t}getMatching(t,e){return e.reduce((e,i,s)=>(i.verticalRatio>t&&e.push(s),e),[])}addActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.add(e)})}removeActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.remove(e)})}forEachAction(t,e,i){pt(t,e,i)&&t.forEach(t=>{e.forEach(e=>{ht(e)&&i(t,e)})})}}class yl extends kl{constructor(){super(-1)}update(t,e,i,s,n){let r=this.getMatching(e,t),o=r.length,h=o>0?r[o-1]:-1,a={changed:!1};if(!this.matches(h)){if(this.previous>-1&&this.removeActions(i,t[this.previous].element),h>-1){let e=t[h].element;a.intersecting=[e],this.addActions(i,e)}return pt(s,n)&&(this.previous>-1&&this.removeActions(n,s[this.previous]),h>-1&&this.addActions(n,s[h])),this.previous=h,a.changed=!0,a.intersecting=[],a}return a}matches(t){return t===this.previous}}class bl extends kl{constructor(){super([])}update(t,e,i,s,n){let r=this.getMatching(e,t),o={changed:!1};if(!this.matches(r)){let e=r.map(e=>t[e].element);return this.removeActions(i,...this.previous.map(e=>t[e].element)),this.addActions(i,...e),o.intersecting=e,pt(s,n)&&(this.removeActions(n,...this.previous.map(t=>s[t])),this.addActions(n,...r.map(t=>s[t]))),this.previous=r,o.changed=!0,o}return o}matches(t){let e=t.length;if(e!==this.previous.length)return!1;let i=0;for(i=0;i<e;i++)if(!this.previous.includes(t[i]))return!1;return!0}}var Cl,Ml,Al,Wl,El,Tl,xl,Sl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ll=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Il{constructor(){this.ratio=0,this.mode="single",this.threshold=-1,this.selector="",this.action="",this.isRoot=!1,this.link="",this.linkAction=""}parse(t){var e;this.selector=":scope "+(null!==(e=t.selector)&&void 0!==e?e:"> *"),this.action=Ct(t.action,""),this.link=Ct(t.link,""),this.linkAction=Ct(t.linkAction,""),this.ratio=ut(parseFloat(t.ratio),0,1,0),this.isRoot=yt(t.isRoot),this.mode="multi"===(null==t?void 0:t.mode)?"multi":"single",this.threshold=ft(t.threshold,-1)}}class Pl{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new Dl(t,e,this.attribute)}}class Dl extends Ds{constructor(t,e,i){super("CuiScrollspyHandler",t,i,new Il,e),Cl.set(this,void 0),Ml.set(this,void 0),Al.set(this,void 0),Wl.set(this,void 0),El.set(this,void 0),Tl.set(this,void 0),xl.set(this,void 0),this.element=t,Sl(this,Cl,new ml(this.element,{threshold:this.utils.setup.scrollThreshold})),Sl(this,Ml,[]),Sl(this,Al,[]),Sl(this,Wl,[]),Sl(this,El,void 0),Sl(this,Tl,void 0),Sl(this,xl,void 0)}onInit(){this.parseAttribute(),Ll(this,Cl).setCallback(this.onIntersection.bind(this)),Ll(this,Cl).attach()}onUpdate(){this.updateAttributes()}onDestroy(){Ll(this,Cl).detach()}onIntersection(t){if(!Ll(this,xl))return void this.logError("Cannot perform - mode handler not initialized","OnIntersection");let e=Date.now();this.mutate(()=>{let i=Ll(this,xl).update(t.items,this.args.ratio,Ll(this,Al),Ll(this,Ml),Ll(this,Wl));i.changed&&this.emitEvent(_,{intersecting:i.intersecting,timestamp:e})}),this.emitEvent(B,{top:t.top,left:t.left,scrolling:t.scrolling,initial:t.initial,source:t.source,timestamp:e})}parseAttribute(){Sl(this,El,this.args.isRoot?window:this.element),Sl(this,Tl,Vh.get(Ll(this,El)));let t=this.args.selector?Ll(this,Tl).queryAll(this.args.selector):[];Ll(this,Cl).setChildren(t),Ll(this,Cl).setThreshold(this.args.threshold),Sl(this,Ml,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),Sl(this,Al,bi.get(this.args.action)),Sl(this,Wl,bi.get(this.args.linkAction)),Sl(this,xl,wl.get(this.args.mode))}updateAttributes(){if(this.prevArgs&&this.args.isRoot!==this.prevArgs.isRoot&&(Sl(this,El,this.args.isRoot?window:this.element),Sl(this,Tl,Vh.get(Ll(this,El))),Ll(this,Cl).setParent(Ll(this,El))),this.prevArgs&&Ll(this,Tl)&&this.args.selector!==this.prevArgs.selector){let t=this.args.selector?Ll(this,Tl).queryAll(this.args.selector):[];Ll(this,Cl).setChildren(t)}Ll(this,Cl).setThreshold(this.args.threshold),Sl(this,Ml,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),Sl(this,Al,bi.get(this.args.action)),Sl(this,Wl,bi.get(this.args.linkAction)),Sl(this,xl,wl.get(this.args.mode))}}Cl=new WeakMap,Ml=new WeakMap,Al=new WeakMap,Wl=new WeakMap,El=new WeakMap,Tl=new WeakMap,xl=new WeakMap;var Ol,Nl,Bl,_l,Hl,$l,Rl,Fl,ql,Ul=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},zl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vl{constructor(t){Ol.set(this,void 0),Nl.set(this,void 0),Bl.set(this,void 0),_l.set(this,void 0),Hl.set(this,void 0),$l.set(this,void 0),Rl.set(this,void 0),Fl.set(this,void 0),ql.set(this,void 0),Ul(this,_l,t),Ul(this,Nl,[]),Ul(this,Bl,void 0),Ul(this,Ol,void 0),Ul(this,Hl,void 0),Ul(this,$l,[]),Ul(this,Rl,[]),Ul(this,ql,void 0),Ul(this,Fl,void 0)}setId(t){return Ul(this,Ol,t),this}setClasses(...t){return Ul(this,Nl,t),this}setAttributes(t){return Ul(this,Bl,t),this}setTextContent(t){return Ul(this,Hl,t),this}setChildren(...t){return Ul(this,$l,[...t]),this}setRawChildren(...t){return Ul(this,Rl,[...t]),this}onEvent(t,e){return Ul(this,ql,t),Ul(this,Fl,e),this}build(t){let e=document.createElement(zl(this,_l));return ht(zl(this,Ol))&&(e.id=zl(this,Ol)),ht(zl(this,Nl))&&e.classList.add(...zl(this,Nl)),ht(zl(this,Bl))&&xt(zl(this,Bl),(t,i)=>{e.setAttribute(t,i)}),ht(t)?e.innerHTML=t:ht(zl(this,Hl))&&(e.textContent=zl(this,Hl)),zl(this,Rl).forEach(t=>{e.appendChild(t.build())}),zl(this,$l).forEach(t=>e.appendChild(t)),pt(zl(this,ql),zl(this,Fl))&&e.addEventListener(zl(this,ql),t=>{zl(this,Fl).call(this,t)}),e}}Ol=new WeakMap,Nl=new WeakMap,Bl=new WeakMap,_l=new WeakMap,Hl=new WeakMap,$l=new WeakMap,Rl=new WeakMap,Fl=new WeakMap,ql=new WeakMap;var jl,Yl,Xl,Kl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Gl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Zl{constructor(){jl.set(this,void 0),Yl.set(this,void 0),Xl.set(this,void 0),Kl(this,jl,[]),Kl(this,Yl,0),Kl(this,Xl,5)}setElements(t){Kl(this,jl,t),Kl(this,Yl,Gl(this,jl).length)}setThreshold(t){Kl(this,Xl,t)}detect(t,e){if(!ht(Gl(this,jl)))return[-1,void 0];let i=-1,s=void 0;for(let n=0;n<Gl(this,Yl);n++)if(this.isInBounds(Gl(this,jl)[n],t,e)){0===n?(i=n,s=Gl(this,jl)[n]):n<Gl(this,Yl)-1&&(i=n+1,s=Gl(this,jl)[n+1]);break}return[i,s]}isInBounds(t,e,i){const s=t.getBoundingClientRect();return e>s.left-Gl(this,Xl)&&e<s.left+s.width+Gl(this,Xl)&&i>s.top-Gl(this,Xl)&&i<s.top+s.height+Gl(this,Xl)}}jl=new WeakMap,Yl=new WeakMap,Xl=new WeakMap;var Jl,Ql,tc,ec,ic,sc,nc,rc,oc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},hc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ac{constructor(t){Jl.set(this,void 0),Ql.set(this,void 0),tc.set(this,void 0),ec.set(this,void 0),ic.set(this,void 0),sc.set(this,void 0),nc.set(this,void 0),rc.set(this,void 0),oc(this,Jl,t),oc(this,Ql,new _o),oc(this,sc,150),oc(this,nc,!1),oc(this,rc,void 0),hc(this,Ql).setTarget(hc(this,Jl)),hc(this,Ql).preventDefault(!1),hc(this,Ql).setCallback(this.onMove.bind(this)),oc(this,tc,void 0),oc(this,ec,void 0),oc(this,ic,void 0)}setLongPressTimeout(t){oc(this,sc,t)}onDragStart(t){oc(this,tc,t)}onDragOver(t){oc(this,ec,t)}onDragEnd(t){oc(this,ic,t)}attach(){hc(this,Ql).attach()}detach(){hc(this,Ql).detach()}onMove(t){switch(t.type){case"down":if(hc(this,nc))return;oc(this,rc,setTimeout(()=>{hc(this,tc)&&hc(this,tc).call(this,t)&&oc(this,nc,!0)},hc(this,sc)));break;case"move":if(this.cancelTimeout(),!hc(this,nc))return;hc(this,ec)&&hc(this,ec).call(this,t);break;case"up":if(this.cancelTimeout(),!hc(this,nc))return;hc(this,ic)&&hc(this,ic).call(this,t),oc(this,nc,!1)}}cancelTimeout(){hc(this,rc)&&(clearTimeout(hc(this,rc)),oc(this,rc,void 0))}}Jl=new WeakMap,Ql=new WeakMap,tc=new WeakMap,ec=new WeakMap,ic=new WeakMap,sc=new WeakMap,nc=new WeakMap,rc=new WeakMap;var lc,cc,uc,dc,pc,gc,vc,fc,mc,wc,kc,yc,bc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Cc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Mc{constructor(){this.target=":scope  > *",this.trigger=":scope  > *",this.timeout=150,this.threshold=5}parse(t){this.target=t.target?":scope  "+t.target:":scope  > *",this.trigger=t.trigger?":scope  "+t.trigger:":scope  > *",this.timeout=ft(t.timeout,150),this.threshold=ft(t.threshold,5)}}class Ac{constructor(t){lc.set(this,void 0),bc(this,lc,null!=t?t:"cui"),this.attribute=Cc(this,lc)+"-sortable"}getStyle(){return null}get(t,e){return new Wc(t,this.attribute,e,Cc(this,lc))}}lc=new WeakMap;class Wc extends Ds{constructor(t,e,i,s){super("CuiSortableHandler",t,e,new Mc,i),cc.set(this,void 0),uc.set(this,void 0),dc.set(this,void 0),pc.set(this,void 0),gc.set(this,void 0),vc.set(this,void 0),fc.set(this,void 0),mc.set(this,void 0),wc.set(this,void 0),kc.set(this,void 0),yc.set(this,void 0),bc(this,dc,[]),bc(this,uc,[]),bc(this,gc,-1),bc(this,pc,null),bc(this,wc,null),bc(this,vc,null),bc(this,cc,new ac(t)),Cc(this,cc).onDragStart(this.onDragStart.bind(this)),Cc(this,cc).onDragOver(this.onDragOver.bind(this)),Cc(this,cc).onDragEnd(this.onDragEnd.bind(this)),bc(this,fc,At("{prefix}-moving",s)),bc(this,yc,At("{prefix}-sortable-preview",s)),bc(this,mc,new Zl),bc(this,kc,new yn),Cc(this,kc).setOnFinish(()=>{let t=Cc(this,pc),e=Cc(this,gc);this.stopMovementPrep(),this.utils.bus.emit(V,null,!1),this.emitEvent(X,{item:t,index:e,timestamp:new Date})})}onInit(){Cc(this,cc).attach(),this.getTargetsAndTrggers(),Cc(this,mc).setThreshold(this.args.threshold)}onUpdate(){!this.prevArgs||this.args.target===this.prevArgs.target&&this.args.trigger===this.prevArgs.trigger||this.getTargetsAndTrggers(),Cc(this,cc).setLongPressTimeout(this.args.timeout)}onDestroy(){Cc(this,cc).detach()}getTargetsAndTrggers(){try{if(bc(this,dc,[...this.element.querySelectorAll(this.args.target)]),bc(this,uc,[...this.element.querySelectorAll(this.args.trigger)]),Cc(this,uc).length!==Cc(this,dc).length)throw new Error(`Triggers (count ${Cc(this,uc).length}) and targets (count ${Cc(this,dc).length}) selector are not correct`);Cc(this,mc).setElements(Cc(this,dc))}catch(t){this._log.error("Incorrect trigger or target selector"),this._log.exception(t,"getTargetsAndTrggers"),bc(this,dc,[]),bc(this,uc,[])}}onDragStart(t){return bc(this,gc,this.getPressedElementIdx(t.target)),bc(this,pc,Cc(this,gc)>-1?Cc(this,dc)[Cc(this,gc)]:null),!!ht(Cc(this,pc))&&(this.utils.bus.emit(V,null,!0),this.startMovementPrep(t),this.emitEvent(K,{item:Cc(this,pc),index:Cc(this,gc),timestamp:new Date}),!0)}onDragOver(t){this.move(t),t.event.preventDefault()}onDragEnd(t){ht(Cc(this,vc))&&(Cc(this,kc).setElement(Cc(this,vc)),Cc(this,kc).setProps(this.getFinishAnimation()),Cc(this,kc).finish(0,100,!1))}getPressedElementIdx(t){return Cc(this,uc).findIndex(e=>e.contains(t))}startMovementPrep(t){this.mutate(()=>{this.createPreview(),ht(Cc(this,pc))&&this.helper.setClass(Cc(this,fc),Cc(this,pc)),this.helper.setClass("cui-locked",this.element),this.helper.setClass(g,document.body),this.setPreviewPosition(t),this.setCurrentPosition(t)})}stopMovementPrep(){this.mutate(()=>{ht(Cc(this,pc))&&this.helper.removeClass(Cc(this,fc),Cc(this,pc)),this.helper.removeClass(g,document.body),this.helper.removeClass("cui-locked",this.element),this.removePreview(),bc(this,pc,null),bc(this,wc,null),this.getTargetsAndTrggers()})}move(t){this.mutate(()=>{this.setPreviewPosition(t),this.setCurrentPosition(t)})}createPreview(){ht(Cc(this,pc))?(bc(this,vc,new Vl("div").setClasses(Cc(this,yc)).build()),Cc(this,vc).style.width=Cc(this,pc).offsetWidth+"px",Cc(this,vc).style.height=Cc(this,pc).offsetHeight+"px",document.body.appendChild(Cc(this,vc))):this.logError("Cannot create preview - current target does not exist","createPreview")}removePreview(){ht(Cc(this,vc))&&(Cc(this,vc).remove(),bc(this,vc,null))}setPreviewPosition(t){ht(Cc(this,vc))&&(Cc(this,vc).style.top=t.y+"px",Cc(this,vc).style.left=t.x+"px")}setCurrentPosition(t){if(!Cc(this,pc))return;let[e,i]=Cc(this,mc).detect(t.x,t.y);if(e!==Cc(this,gc)&&i&&Cc(this,wc)!==i){let t=i;this.insertElement(Cc(this,pc),t),bc(this,wc,t),this.getTargetsAndTrggers(),bc(this,gc,e)}}insertElement(t,e){ht(e)?this.element.insertBefore(t,e):this.element.appendChild(t)}getFinishAnimation(){if(!pt(Cc(this,pc),Cc(this,vc)))return{opacity:{from:1,to:0}};const t=Cc(this,pc).getBoundingClientRect();return{opacity:{from:1,to:0},top:{from:Cc(this,vc).offsetTop,to:t.top>0?t.top:Cc(this,vc).offsetTop,unit:"px"},left:{from:Cc(this,vc).offsetLeft,to:t.left>0?t.left:Cc(this,vc).offsetLeft,unit:"px"}}}}cc=new WeakMap,uc=new WeakMap,dc=new WeakMap,pc=new WeakMap,gc=new WeakMap,vc=new WeakMap,fc=new WeakMap,mc=new WeakMap,wc=new WeakMap,kc=new WeakMap,yc=new WeakMap;var Ec,Tc,xc,Sc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Lc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ic{constructor(){this.spinner="circle",this.scale=1}parse(t){Mt(t)?this.spinner=Ct(t,"circle"):(this.spinner=Ct(t.spinner,"circle"),this.scale=ft(t.scale,1))}}class Pc{constructor(t){Ec.set(this,void 0),Sc(this,Ec,null!=t?t:"cui"),this.attribute=Lc(this,Ec)+"-spinner",v.spinner_circle='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z"></path></svg>',v.spinner_circle_double='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z"></path><path d="M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z"></path></svg>'}getStyle(){return null}get(t,e){return new Dc(t,e,this.attribute,Lc(this,Ec))}}Ec=new WeakMap;class Dc extends Ds{constructor(t,e,i,s){super("CuiSpinnerHandler",t,i,new Ic,e),Tc.set(this,void 0),xc.set(this,void 0),Sc(this,Tc,null),Sc(this,xc,At("{prefix}-animation-pause",s))}onInit(){Sc(this,Tc,this.onEvent(j,this.onPause.bind(this))),this.add()}onUpdate(){this.prevArgs&&this.args.spinner!==this.prevArgs.spinner&&this.add()}onDestroy(){this.removeIfAnyExisists(),this.detachEvent(j,Lc(this,Tc))}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}add(){const t=ht(this.args.spinner)?v["spinner_"+this.args.spinner]:null;if(!ht(t))return void this._log.warning("Incorrect spinner name: "+this.args.spinner);this.removeIfAnyExisists();const e=new Rn(t).setScale(this.args.scale).build();this.mutate(this.addSpinner,e,this.args.spinner)}removeIfAnyExisists(){let t=this.element.querySelector("svg");t&&t.remove()}onPause(t){this.fetch(()=>{t&&!this.helper.hasClass(Lc(this,xc),this.element)?this.helper.setClassesAs(this.element,Lc(this,xc)):this.helper.removeClassesAs(this.element,Lc(this,xc))}),this.emitEvent(Y,t)}}Tc=new WeakMap,xc=new WeakMap;var Oc,Nc,Bc,_c,Hc,$c,Rc,Fc,qc,Uc,zc,Vc,jc,Yc,Xc,Kc,Gc,Zc,Jc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Qc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},tu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class eu{constructor(t,e){Oc.set(this,void 0),Nc.set(this,void 0),Qc(this,Oc,t),Qc(this,Nc,null!=e?e:300),this.targets="> li",this.timeout=tu(this,Nc),this.links="",this.autoTimeout=-1,this.height="",this.animation="",this.loop=!1}parse(t){this.targets=":scope "+Ct(t.targets,"> li"),this.timeout=ft(t.timeout,tu(this,Nc)),this.links=t.links,this.autoTimeout=ft(t.autoTimeout,-1),this.height=Ct(t.height,"auto"),this.animation=Ct(t.animation,"slide"),this.loop=bt(t.loop,!1)}}Oc=new WeakMap,Nc=new WeakMap;class iu{constructor(t){this.attribute=(null!=t?t:"cui")+"-slider"}getStyle(){return null}get(t,e){return new su(t,e,this.attribute)}}class su extends Ns{constructor(t,e,i){super("CuiSliderHandler",t,i,new eu(e.setup.prefix,e.setup.animationTime),e),Bc.set(this,void 0),_c.set(this,void 0),Hc.set(this,void 0),$c.set(this,void 0),Rc.set(this,void 0),Fc.set(this,void 0),qc.set(this,void 0),Uc.set(this,void 0),zc.set(this,void 0),Vc.set(this,void 0),jc.set(this,void 0),Yc.set(this,void 0),Xc.set(this,void 0),Kc.set(this,void 0),Gc.set(this,void 0),Zc.set(this,void 0),Qc(this,Bc,[]),Qc(this,_c,-1),Qc(this,zc,-1),Qc(this,Hc,[]),Qc(this,Rc,null),Qc(this,Zc,null),Qc(this,Fc,!1),Qc(this,qc,-1),Qc(this,Uc,0),Qc(this,Vc,null),Qc(this,jc,.4),Qc(this,Yc,new yn),Qc(this,Xc,new yn),tu(this,Yc).setOnFinish(this.onAnimationFinish.bind(this)),Qc(this,Gc,0),Qc(this,$c,new oo(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),Qc(this,Kc,ds[this.args.animation])}onInit(){Qc(this,Rc,this.onEvent(O,this.onPushSwitch.bind(this))),Qc(this,Zc,this.onEvent(z,this.onMove.bind(this))),this.getTargets(),this.getLinks(),this.getActiveIndex(),this.setLinkActive(-1,tu(this,_c)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(tu(this,Bc)[tu(this,_c)]))}),Qc(this,$c,new oo(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),Qc(this,Kc,ds[this.args.animation]),this.startTask()}onUpdate(){this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(tu(this,Bc)[tu(this,_c)]))}),Qc(this,Kc,ds[this.args.animation]),this.startTask()}onDestroy(){tu(this,$c).stop(),this.detachEvent(O,tu(this,Rc)),this.detachEvent(z,tu(this,Zc))}onMutation(t){}onMove(t){if(this.isLocked||!tu(this,Kc))return;let e=tu(this,Bc)[tu(this,_c)];switch(t.type){case"down":if(tu(this,Fc)||!e.contains(t.target))return;Qc(this,Fc,!0),Qc(this,qc,t.x),tu(this,Yc).setElement(e),this.helper.setClassesAs(document.body,g),t.event.cancelable&&t.event.preventDefault();break;case"up":if(!tu(this,Fc))break;this.isLocked=!0;let i=Math.abs(tu(this,Uc)),s=i*this.args.timeout,n=i<=tu(this,jc);tu(this,Yc).finish(i,s,n),tu(this,Xc).finish(i,s,n),this.helper.removeClassesAs(document.body,g),Qc(this,Fc,!1);break;case"move":if(!tu(this,Fc))break;let r=(t.x-tu(this,qc))/e.offsetWidth;if(Math.abs(r-tu(this,Uc))<.02)break;let o=St(tu(this,Uc)>0?"next":"prev",tu(this,_c),tu(this,Gc));Qc(this,Uc,this.adjustMoveRatio(r)),o!==tu(this,zc)&&(tu(this,Vc)&&this.helper.removeClass(d,tu(this,Vc)),Qc(this,Vc,tu(this,Bc)[o]),Qc(this,zc,o),tu(this,Xc).setElement(tu(this,Vc)),tu(this,Xc).setProps(tu(this,Uc)>0?tu(this,Kc).previous.right:tu(this,Kc).previous.left),tu(this,Yc).setProps(tu(this,Uc)>0?tu(this,Kc).current.right:tu(this,Kc).current.left),this.mutate(()=>{tu(this,Vc)&&this.helper.setClass(d,tu(this,Vc))})),this.mutate(()=>{tu(this,Yc).update(Math.abs(tu(this,Uc))),tu(this,Xc).update(Math.abs(tu(this,Uc)))}),t.event.cancelable&&t.event.preventDefault()}}adjustMoveRatio(t){return this.args.loop?t:tu(this,_c)===tu(this,Gc)-1&&t>0||0===tu(this,_c)&&t<0?0:t}switch(t){return Jc(this,void 0,void 0,(function*(){return!this.isLocked&&(this.onPushSwitch(t),!0)}))}onAnimationFinish(t,e,i){this.isLocked=!1;let s=tu(this,Bc)[tu(this,zc)],n=tu(this,Bc)[tu(this,_c)];e?(ht(tu(this,Vc))&&(this.helper.removeClass(d,tu(this,Vc)),this.helper.removeAttribute("style",tu(this,Vc))),this.helper.removeAttribute("style",n),Qc(this,zc,-1),Qc(this,Vc,null),Qc(this,qc,-1),Qc(this,Uc,0)):tu(this,zc)>-1&&this.mutate(()=>{this.helper.removeClass(d,s),this.helper.setClass(this.activeClassName,s),this.helper.removeClass(this.activeClassName,n),this.helper.removeAttribute("style",n),this.helper.removeAttribute("style",s),this.setLinkActive(tu(this,_c),tu(this,zc)),this.emitEvent(N,{timestamp:Date.now(),index:tu(this,zc)}),Qc(this,_c,tu(this,zc)),Qc(this,zc,-1),Qc(this,Vc,null),Qc(this,qc,-1),Qc(this,Uc,0)}),this.startTask()}onPushSwitch(t){if(!ht(t)||this.isLocked||!tu(this,Kc)||!this.args.loop&&0===tu(this,_c)&&"prev"===t||!this.args.loop&&tu(this,_c)===tu(this,Gc)-1&&"next"===t)return;this.isLocked=!0;let e=St(t,tu(this,_c),tu(this,Gc));if(e==tu(this,_c)||e<0||e>=tu(this,Bc).length)return this._log.warning(`Index ${t} is not within the suitable range`),!1;Qc(this,zc,e);let i=tu(this,Bc)[tu(this,_c)],s=tu(this,Bc)[tu(this,zc)];tu(this,Yc).setElement(i),tu(this,Xc).setElement(s),tu(this,Yc).setProps("prev"===t?tu(this,Kc).current.left:tu(this,Kc).current.right),tu(this,Xc).setProps("prev"===t?tu(this,Kc).previous.left:tu(this,Kc).previous.right),this.mutate(()=>{tu(this,Yc).finish(0,this.args.timeout,!1),tu(this,Xc).finish(0,this.args.timeout,!1),this.helper.setClass(d,s)})}getActiveIndex(){Qc(this,_c,ht(tu(this,Bc))?tu(this,Bc).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return ht(this.args.height)&&"auto"!==this.args.height?this.args.height:Tt(t)+"px"}getTargets(){let t=this.element.querySelectorAll(this.args.targets);Qc(this,Bc,t.length>0?[...t]:[]),Qc(this,Gc,tu(this,Bc).length)}getLinks(){Qc(this,Hc,ht(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}setLinkActive(t,e){ht(tu(this,Hc))&&this.mutate(()=>{wt(t,0,tu(this,Hc).length-1)&&this.helper.removeClass(this.activeClassName,tu(this,Hc)[t]),wt(e,0,tu(this,Hc).length-1)&&this.helper.setClass(this.activeClassName,tu(this,Hc)[e])})}startTask(){tu(this,$c).stop(),this.args.autoTimeout&&tu(this,$c).start()}}Bc=new WeakMap,_c=new WeakMap,Hc=new WeakMap,$c=new WeakMap,Rc=new WeakMap,Fc=new WeakMap,qc=new WeakMap,Uc=new WeakMap,zc=new WeakMap,Vc=new WeakMap,jc=new WeakMap,Yc=new WeakMap,Xc=new WeakMap,Kc=new WeakMap,Gc=new WeakMap,Zc=new WeakMap;var nu,ru,ou,hu,au,lu,cu,uu,du,pu,gu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},vu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class mu{constructor(t,e){nu.set(this,void 0),ru.set(this,void 0),vu(this,nu,t),vu(this,ru,null!=e?e:300),this.targets="",this.in="",this.out="",this.timeout=fu(this,ru),this.links="",this.switch="",this.autoTimeout=-1,this.height="",this.loop=!1}parse(t){this.targets=ht(t.targets)?":scope "+t.targets:":scope  > *",this.in=Ct(t.in,At(".{prefix}-switch-animation-default-in",fu(this,nu))),this.out=Ct(t.out,At(".{prefix}-switch-animation-default-out",fu(this,nu))),this.timeout=ft(t.timeout,fu(this,ru)),this.links=Ct(t.links,""),this.switch=Ct(t.switch,""),this.autoTimeout=ft(t.autoTimeout,-1),this.height=Ct(t.height,"auto"),this.loop=yt(t.loop)}}nu=new WeakMap,ru=new WeakMap;class wu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switch"}getStyle(){return null}get(t,e){return new ku(t,e,this.attribute)}}class ku extends Ns{constructor(t,e,i){super("CuiSwitchHandler",t,i,new mu(e.setup.prefix,e.setup.animationTime),e),ou.set(this,void 0),hu.set(this,void 0),au.set(this,void 0),lu.set(this,void 0),cu.set(this,void 0),uu.set(this,void 0),du.set(this,void 0),pu.set(this,void 0),vu(this,ou,[]),vu(this,hu,-1),vu(this,au,[]),vu(this,lu,[]),vu(this,uu,null),vu(this,du,vu(this,pu,[])),vu(this,cu,new oo(this.args.autoTimeout,!0,this.switch.bind(this,"next")))}onInit(){vu(this,uu,this.onEvent(O,this.onPushSwitch.bind(this))),this.parseArguments(),this.getTargets(),this.getActiveIndex(),this.getSwitches(),this.setSwitchesActive(fu(this,hu)),this.setLinkActive(-1,fu(this,hu)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(fu(this,ou)[fu(this,hu)]))}),vu(this,cu,new oo(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),this.startTask()}onUpdate(){this.parseArguments(),this.getTargets(),this.getSwitches(),this.setSwitchesActive(fu(this,hu)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(fu(this,ou)[fu(this,hu)]))}),this.startTask()}onDestroy(){fu(this,cu).stop(),this.detachEvent(O,fu(this,uu))}onMutation(t){this.getTargets(),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(fu(this,ou)[fu(this,hu)]))})}switch(t){return gu(this,void 0,void 0,(function*(){if(this.isLocked)return!1;this.getSwitches(),this.getActiveIndex();let e=St(t,fu(this,hu),fu(this,ou).length);if(!this.args.loop&&("next"===t&&0===e||"prev"===t&&0===fu(this,hu)))return this.logInfo("Switch blocked by loop settings","switch"),!1;if(e==fu(this,hu)||e<0||e>=fu(this,ou).length)return this.logWarning(`Index ${t} is not within the suitable range`,"switch"),!1;this.isLocked=!0,this.setSwitchesActive(e);let i=fu(this,ou)[e];return yield this.actionsHelper.performSwitchAction(i,fu(this,hu)>-1?fu(this,ou)[fu(this,hu)]:null,fu(this,du),fu(this,pu),()=>{i.classList.add(this.activeClassName),fu(this,hu)>-1&&fu(this,ou)[fu(this,hu)].classList.remove(this.activeClassName),this.setLinkActive(fu(this,hu),e),this.helper.setStyle(this.element,"height",this.getElementHeight(i)),this.startTask(),this.isLocked=!1},this.args.timeout),this.emitEvent(N,{timestamp:Date.now(),index:e}),!0}))}onPushSwitch(t){this.switch(t)}getActiveIndex(){vu(this,hu,ht(fu(this,ou))?fu(this,ou).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return ht(this.args.height)&&"auto"!==this.args.height?this.args.height:Tt(t)+"px"}parseArguments(){vu(this,du,bi.get(this.args.in)),vu(this,pu,bi.get(this.args.out)),vu(this,au,ht(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}getTargets(){let t=this.element.querySelectorAll(this.args.targets);vu(this,ou,t.length>0?[...t]:[])}getSwitches(){let t=ht(this.args.switch)?document.querySelectorAll(this.args.switch):null;vu(this,lu,[]),t&&t.forEach(t=>{fu(this,lu).push(t)})}setLinkActive(t,e){ht(fu(this,au))&&(wt(t,0,fu(this,au).length-1)&&this.helper.removeClass(this.activeClassName,fu(this,au)[t]),wt(e,0,fu(this,au).length-1)&&this.helper.setClass(this.activeClassName,fu(this,au)[e]))}setSwitchesActive(t){fu(this,lu).forEach(e=>{this.emitLinkSwitch(e.$cuid,t)})}emitLinkSwitch(t,e){ht(t)&&this.utils.bus.emit(O,t,e)}startTask(){fu(this,cu).stop(),this.args.autoTimeout&&fu(this,cu).start()}}ou=new WeakMap,hu=new WeakMap,au=new WeakMap,lu=new WeakMap,cu=new WeakMap,uu=new WeakMap,du=new WeakMap,pu=new WeakMap;var yu,bu,Cu,Mu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Au=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wu{constructor(){this.index="",this.target=""}parse(t){ht(t)&&(this.target=t.target,this.index=t.index)}}class Eu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switcher"}getStyle(){return null}get(t,e){return new Tu(t,e,this.attribute)}}class Tu extends Ds{constructor(t,e,i){super("CuiSwitcherHandler",t,i,new Wu,e),yu.set(this,void 0),bu.set(this,void 0),Cu.set(this,void 0),Mu(this,yu,null),Mu(this,bu,"UL"===t.tagName),this.onClickEvent=this.onClickEvent.bind(this),Mu(this,Cu,[])}onInit(){this.setEvents(),this.getTarget()}onUpdate(){this.getTarget()}onDestroy(){this.removeEvents()}getTarget(){ht(this.args.target)||Mu(this,yu,null);let t=document.querySelector(this.args.target);ht(t)&&Mu(this,yu,t.$cuid)}setEvents(){if(Au(this,bu)){this.element.querySelectorAll("li > a").forEach((t,e)=>{let i=this.onListItemClick.bind(this,e);Au(this,Cu).push(i),t.addEventListener("click",i)})}else this.element.addEventListener("click",this.onClickEvent)}removeEvents(){if(Au(this,bu)){this.element.querySelectorAll("li > a").forEach((t,e)=>{Au(this,Cu).length>e&&t.removeEventListener("click",Au(this,Cu)[e])}),Mu(this,Cu,[])}else this.element.removeEventListener("click",this.onClickEvent)}onClickEvent(t){this.getTarget(),ht(this.args.index)&&this.onClick(this.args.index.trim())}onListItemClick(t,e){this.getTarget(),this.onClick(t)}onClick(t){ht(Au(this,yu))&&this.utils.bus.emit(O,Au(this,yu),t)}}yu=new WeakMap,bu=new WeakMap,Cu=new WeakMap;var xu,Su,Lu,Iu,Pu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Du=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ou{constructor(){this.action="",this.target=""}parse(t){ht(t)&&Mt(t)?this.action=t:(this.target=Ct(t.target,""),this.action=t.action)}}class Nu{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new Bu(t,e,this.attribute)}}class Bu extends Ds{constructor(t,e,i){super("CuiToggleHandler",t,i,new Ou,e),xu.set(this,void 0),Su.set(this,void 0),Lu.set(this,void 0),Iu.set(this,void 0),Pu(this,xu,this.element),Pu(this,Su,e),Pu(this,Lu,null),Pu(this,Iu,[]),this.onClick=this.onClick.bind(this)}onInit(){Pu(this,xu,this.getTarget()),Pu(this,Iu,bi.get(this.args.action)),this.element.addEventListener("click",this.onClick),Pu(this,Lu,this.onEvent(P,this.toggle.bind(this)))}onUpdate(){Pu(this,xu,this.getTarget()),Pu(this,Iu,bi.get(this.args.action))}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(P,Du(this,Lu))}toggle(){Du(this,xu)?(Du(this,Iu).forEach(t=>t.toggle(Du(this,xu),Du(this,Su))),this.emitEvent(D,{action:this.args.action,target:Du(this,xu),timestamp:Date.now()})):this.logError("Target in not provided","toggle")}onClick(t){this.toggle(),t.preventDefault()}getTarget(){var t;return this.args.target&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:this.element}}xu=new WeakMap,Su=new WeakMap,Lu=new WeakMap,Iu=new WeakMap;var _u,Hu,$u,Ru,Fu,qu,Uu,zu,Vu,ju=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Yu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xu{constructor(t){_u.set(this,void 0),ju(this,_u,At(".{prefix}-animation-tooltip-in",t)),this.content="",this.width=150,this.margin=8,this.timeout=2e3,this.pos="",this.action=Yu(this,_u)}parse(t){Mt(t)?this.content=Ct(t,""):(this.content=Ct(t.content,""),this.width=ft(t.width,150),this.margin=ft(t.margin,8),this.pos=Ct(t.pos,""),this.action=Ct(t.action,Yu(this,_u)),this.timeout=ft(t.timeout,2e3))}}_u=new WeakMap;class Ku{constructor(t){Hu.set(this,void 0),ju(this,Hu,null!=t?t:"cui"),this.attribute=Yu(this,Hu)+"-tooltip"}getStyle(){return null}get(t,e){return new Gu(t,this.attribute,e,Yu(this,Hu))}}Hu=new WeakMap;class Gu extends Ds{constructor(t,e,i,s){super("CuiTooltipHandler",t,e,new Xu(s),i),$u.set(this,void 0),Ru.set(this,void 0),Fu.set(this,void 0),qu.set(this,void 0),Uu.set(this,void 0),zu.set(this,void 0),Vu.set(this,void 0),ju(this,Ru,void 0),ju(this,zu,[]),ju(this,Vu,void 0),ju(this,Uu,At("{prefix}-tooltip-data",s)),ju(this,$u,new $r(t)),Yu(this,$u).setCallback(this.onHover.bind(this)),ju(this,Fu,8),ju(this,qu,new Qr),Yu(this,qu).setPreferred("top-center")}onInit(){Yu(this,$u).attach(),this.getDataFromArgs(),ju(this,Vu,new oo(this.args.timeout,!1,this.removeTooltip.bind(this)))}onUpdate(){this.getDataFromArgs(),Yu(this,Vu)&&Yu(this,Vu).setTimeout(this.args.timeout)}onDestroy(){this.removeTooltip(),Yu(this,$u).detach()}onHover(t){t.isHovering?this.createTooltip():this.removeTooltip()}createTooltip(){if(ht(Yu(this,Ru))||!ht(this.args.content))return;const t=this.element.getBoundingClientRect();ju(this,Ru,new Vl("div").setClasses(Yu(this,Uu)).build()),Yu(this,Ru).textContent=this.args.content,Yu(this,Ru).style.maxWidth=this.args.width+"px",document.body.appendChild(Yu(this,Ru)),this.mutate(()=>{if(!Yu(this,Ru))return;const e=Yu(this,Ru).getBoundingClientRect();Yu(this,qu).setMargin(Yu(this,Fu));try{let[i,s]=Yu(this,qu).calculate(t,e);Yu(this,Ru).style.top=s+"px",Yu(this,Ru).style.left=i+"px",this.toggleActions(),Yu(this,Vu)&&Yu(this,Vu).start()}catch(t){this.logError(t.message,"createTooltip",t)}})}removeTooltip(){Yu(this,Vu)&&Yu(this,Vu).stop(),this.mutate(()=>{ht(Yu(this,Ru))&&(Yu(this,Ru).remove(),ju(this,Ru,void 0))})}getDataFromArgs(){Yu(this,qu).setMargin(this.args.margin),Yu(this,qu).setStatic(this.args.pos),ju(this,zu,bi.get(this.args.action))}toggleActions(){Yu(this,Ru)&&Yu(this,zu).forEach(t=>{t.toggle(Yu(this,Ru))})}}$u=new WeakMap,Ru=new WeakMap,Fu=new WeakMap,qu=new WeakMap,Uu=new WeakMap,zu=new WeakMap,Vu=new WeakMap;var Zu,Ju,Qu,td,ed,id,sd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},nd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rd{constructor(t,e,i){Zu.set(this,void 0),Ju.set(this,void 0),Qu.set(this,void 0),td.set(this,void 0),ed.set(this,void 0),id.set(this,void 0),sd(this,td,t),sd(this,Zu,sd(this,Qu,sd(this,Ju,void 0))),sd(this,ed,null!=i?i:""),sd(this,id,e)}createHeader(t,e,i){ht(e)||(e=[]),ht(i)||(i=[]);let s=new Vl("div");s.setClasses(nd(this,td)+"-dialog-header",...e),sd(this,Zu,s.build());let n=new Vl("span").setClasses(this.getPrefixedString("-dialog-title")).build(t);nd(this,Zu).appendChild(n),this.appendChildrens(nd(this,Zu),...i)}createFooter(t,e){ht(t)||(t=[]),ht(e)||(e=[]),sd(this,Qu,new Vl("div").setClasses(this.getPrefixedString("-dialog-footer"),...t).build()),this.appendChildrens(nd(this,Qu),...e)}createBody(t,e){ht(t)||(t=[]),ht(e)||(e=[]),sd(this,Ju,new Vl("div").setClasses(this.getPrefixedString("-dialog-body"),...t).build()),this.appendChildrens(nd(this,Ju),...e)}build(t){let e=[this.getPrefixedString("-dialog")];nd(this,id)&&e.push(this.getPrefixedString("-reverse-auto"));let i=new Vl("div").setId(t).setClasses(...e).setAttributes({[this.getPrefixedString("-dialog")]:nd(this,ed)}).build(),s=new Vl("div").setClasses(this.getPrefixedString("-dialog-container")).build();return nd(this,Zu)&&s.appendChild(nd(this,Zu)),nd(this,Ju)&&s.appendChild(nd(this,Ju)),nd(this,Qu)&&s.appendChild(nd(this,Qu)),i.appendChild(s),i}appendChildrens(t,...e){ht(e)&&e.forEach(e=>t.appendChild(e))}getPrefixedString(t){return nd(this,td)+t}}Zu=new WeakMap,Ju=new WeakMap,Qu=new WeakMap,td=new WeakMap,ed=new WeakMap,id=new WeakMap;var od,hd,ad,ld,cd,ud,dd,pd,gd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},vd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class fd{constructor(t,e,i){od.set(this,void 0),hd.set(this,void 0),ad.set(this,void 0),ld.set(this,void 0),cd.set(this,void 0),gd(this,od,{yes:i.onYes,no:i.onNo,cancel:i.onCancel,ok:i.onOk}),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,gd(this,hd,t),gd(this,ad,e),this.reverse=!1,gd(this,cd,null),this.closeStr=vd(this,hd).setup.prefix+"-close",this.iconStr=vd(this,hd).setup.prefix+"-icon",gd(this,ld,void 0)}getId(){return vd(this,ad)}show(t){if(!vd(this,hd))return;let e=document.getElementById(vd(this,ad));ht(e)?this.updateElement(e):(e=this.createElement(),vd(this,hd).interactions.mutate(()=>{t.appendChild(e)},null)),setTimeout(()=>{gd(this,ld,new Ii([e],vd(this,hd)));let t=vd(this,ld).on("closed",this.onClose.bind(this));gd(this,cd,t.length>0?t[0]:null),vd(this,ld).emit("open")},50)}updateElement(t){vd(this,hd).interactions.fetch(()=>{let e=t.querySelector(`.${this.prefix}-dialog-title`),i=t.querySelector(`.${this.prefix}-dialog-body>p`);vd(this,hd).interactions.mutate(()=>{e&&(e.innerHTML=this.title),i&&(i.innerHTML=this.content)},null)},null)}onClose(t){try{if(ht(t)&&t.state&&vd(this,od)&&ht(vd(this,od)[t.state])){let e=vd(this,od)[t.state];e&&e()}}finally{null!=vd(this,cd)&&(vd(this,ld)&&vd(this,ld).detach("closed",vd(this,cd)),gd(this,cd,null)),gd(this,ld,void 0)}}}od=new WeakMap,hd=new WeakMap,ad=new WeakMap,ld=new WeakMap,cd=new WeakMap;class md extends fd{constructor(t,e,i){var s;super(t,e,i),ud.set(this,void 0),gd(this,ud,e),this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new rd(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Vl("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Vl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Vl("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new Vl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(vd(this,ud))}}ud=new WeakMap;class wd extends fd{constructor(t,e,i){var s;super(t,e,i),dd.set(this,void 0),gd(this,dd,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new rd(this.prefix,this.reverse);return t.createHeader(this.title,[]),t.createBody([],[new Vl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Vl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(vd(this,dd))}}dd=new WeakMap;class kd extends fd{constructor(t,e,i){var s;super(t,e,i),pd.set(this,void 0),gd(this,pd,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new rd(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Vl("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Vl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Vl("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new Vl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),t.build(vd(this,pd))}}pd=new WeakMap;var yd,bd,Cd,Md=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ad=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wd{constructor(){yd.set(this,void 0),bd.set(this,void 0),Cd.set(this,void 0),this.name="alert-plugin",this.description="CuiAlertsPlugin",Md(this,yd,null),Md(this,bd,void 0),Md(this,Cd,null)}init(t){Md(this,Cd,jt.get("CuiAlertsPlugin")),Md(this,bd,t),this.detach(),Md(this,yd,Ad(this,bd).bus.on(Q,this.onAlert.bind(this),{$cuid:this.name}))}destroy(){this.detach()}detach(){Ad(this,yd)&&Ad(this,bd)&&(Ad(this,bd).bus.detach(Q,Ad(this,yd)),Md(this,yd,null))}onAlert(t){if(!Ad(this,bd))return void Ad(this,Cd).error("Utils are not set");if(!this.validateEvent(t))return void Ad(this,Cd).error("Event validation failed");let e=class{static get(t,e,i,s){return"Info"===e?new wd(s,t,i):"YesNoCancel"===e?new kd(s,t,i):"OkCancel"===e?new md(s,t,i):void 0}}.get(t.id,t.type,t.options,Ad(this,bd));e?e.show(Ad(this,bd).setup.root):Ad(this,Cd).error("Possibly incorrect alert type")}validateEvent(t){return!!(t&&t.id&&t.type&&t.options)}}yd=new WeakMap,bd=new WeakMap,Cd=new WeakMap;var Ed,Td,xd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Sd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ld{constructor(){this.name="click-plugin",Ed.set(this,void 0),Td.set(this,void 0),this.description="CuiWindowClickPlugin",xd(this,Ed,void 0),xd(this,Td,this.onWindowClick.bind(this))}init(t){xd(this,Ed,t.bus),window.addEventListener("click",Sd(this,Td))}destroy(){window.removeEventListener("click",Sd(this,Td))}onWindowClick(t){Sd(this,Ed)&&Sd(this,Ed).emit(R,null,t)}}Ed=new WeakMap,Td=new WeakMap;var Id,Pd,Dd,Od,Nd,Bd,_d=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class $d{constructor(t){Id.set(this,void 0),Pd.set(this,void 0),Dd.set(this,void 0),Od.set(this,void 0),Nd.set(this,void 0),Bd.set(this,void 0),this.setup=Object.assign({keybordClass:"focus-visible",mouseClass:"focus-precise",touchClass:"focus-precise"},t),this.description="CuiLightFocusPlugin",this.name="focus-plugin",_d(this,Id,void 0),_d(this,Nd,this.onKeyDownEvent.bind(this)),_d(this,Dd,this.onMouseEvent.bind(this)),_d(this,Od,this.onTouchEvent.bind(this)),_d(this,Pd,"none"),_d(this,Bd,void 0)}init(t){_d(this,Id,t.interactions),document.body.addEventListener("touchstart",Hd(this,Od)),document.body.addEventListener("mousedown",Hd(this,Dd)),window.addEventListener("keydown",Hd(this,Nd))}onMouseEvent(t){"mouse"!==Hd(this,Pd)&&this.update("mouse")}onKeyDownEvent(t){"keyboard"!==Hd(this,Pd)&&this.update("keyboard")}onTouchEvent(t){"touch"!==Hd(this,Pd)&&this.update("touch")}update(t){let e=this.getClass(t);this.setClasses(e,Hd(this,Bd),()=>{_d(this,Bd,e),_d(this,Pd,t)})}getClass(t){switch(t){case"keyboard":return this.setup.keybordClass;case"mouse":return this.setup.mouseClass;case"touch":return this.setup.touchClass;default:return}}setClasses(t,e,i){Hd(this,Id)&&t!==e&&Hd(this,Id).fetch(()=>{let s=t&&document.body.classList.contains(t),n=e&&document.body.classList.contains(e);Hd(this,Id).mutate(()=>{s||document.body.classList.add(t),n&&document.body.classList.remove(e),i()},null)},null)}destroy(){document.body.removeEventListener("touchstart",Hd(this,Od)),document.body.removeEventListener("mousedown",Hd(this,Dd)),window.removeEventListener("keydown",Hd(this,Nd))}}Id=new WeakMap,Pd=new WeakMap,Dd=new WeakMap,Od=new WeakMap,Nd=new WeakMap,Bd=new WeakMap;var Rd,Fd,qd,Ud,zd,Vd,jd,Yd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kd{constructor(t,e){Rd.set(this,void 0),Fd.set(this,void 0),qd.set(this,void 0),Ud.set(this,void 0),zd.set(this,void 0),Vd.set(this,void 0),jd.set(this,void 0),Yd(this,qd,!1),Yd(this,Ud,!0),Yd(this,zd,!1),Yd(this,Rd,void 0),Yd(this,Fd,null!=e?e:[]),Yd(this,Vd,this.onKeyDown.bind(this)),Yd(this,jd,this.onKeyUp.bind(this))}setCallback(t){Yd(this,Rd,t)}isInProgress(){return Xd(this,qd)}attach(){document.addEventListener("keydown",Xd(this,Vd)),Xd(this,Ud)&&document.addEventListener("keyup",Xd(this,jd)),Yd(this,zd,!0)}detach(){document.removeEventListener("keydown",Xd(this,Vd)),Xd(this,Ud)&&document.addEventListener("keyup",Xd(this,jd)),Yd(this,zd,!1)}isAttached(){return Xd(this,zd)}onKeyDown(t){if(!Xd(this,qd)){Yd(this,qd,!0);try{ht(Xd(this,Fd))&&!Xd(this,Fd).includes(t.code)||!Xd(this,Rd)||Xd(this,Rd).call(this,t)}catch(t){console.error(t)}finally{Xd(this,Ud)||Yd(this,qd,!1)}}}onKeyUp(t){Yd(this,qd,!1)}}Rd=new WeakMap,Fd=new WeakMap,qd=new WeakMap,Ud=new WeakMap,zd=new WeakMap,Vd=new WeakMap,jd=new WeakMap;var Gd,Zd,Jd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class tp{constructor(t){Gd.set(this,void 0),Zd.set(this,void 0),Jd(this,Zd,t),Jd(this,Gd,new Kd(!0)),Qd(this,Gd).setCallback(this.onKeyDown.bind(this))}connect(){Qd(this,Gd).attach()}disconnect(){Qd(this,Gd).detach()}onKeyDown(t){Qd(this,Zd).emit($,null,{timestamp:Date.now(),name:$,source:"CuiKeysObserver",event:t})}}Gd=new WeakMap,Zd=new WeakMap;var ep,ip=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class np{constructor(t){this.name="keys-plugin",ep.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t,ip(this,ep,void 0)}init(t){ip(this,ep,new tp(t.bus)),sp(this,ep).connect()}destroy(){sp(this,ep)&&sp(this,ep).disconnect()}}ep=new WeakMap;var rp,op,hp,ap,lp,cp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},up=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dp{constructor(t){rp.set(this,void 0),op.set(this,void 0),hp.set(this,void 0),ap.set(this,void 0),lp.set(this,void 0),cp(this,rp,t),cp(this,hp,!1),cp(this,op,void 0),cp(this,ap,!1),cp(this,lp,this.event.bind(this))}setCallback(t){cp(this,op,t)}isInProgress(){return up(this,ap)}attach(){window.matchMedia&&!up(this,hp)&&up(this,rp)&&(window.matchMedia(up(this,rp)).addEventListener("change",up(this,lp)),cp(this,hp,!0))}detach(){up(this,hp)&&(window.matchMedia(up(this,rp)).removeEventListener("change",up(this,lp)),cp(this,hp,!1))}isAttached(){return up(this,hp)}event(t){if(!up(this,ap)&&up(this,op)){cp(this,ap,!0);try{up(this,op).call(this,t)}catch(t){console.error(t)}finally{cp(this,ap,!1)}}}}rp=new WeakMap,op=new WeakMap,hp=new WeakMap,ap=new WeakMap,lp=new WeakMap;var pp,gp,vp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class mp{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",pp.set(this,void 0),gp.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t,vp(this,gp,void 0),vp(this,pp,void 0)}init(t){vp(this,gp,t),this.setup.autoLight&&"dark"==(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")&&fp(this,gp).setLightMode("dark"),vp(this,pp,new dp("(prefers-color-scheme: dark)")),fp(this,pp).setCallback(this.onChange.bind(this)),fp(this,pp).attach()}destroy(){fp(this,pp)&&fp(this,pp).detach()}onChange(t){var e;if(!fp(this,gp))return;let i=fp(this,gp).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?fp(this,gp).setLightMode("dark"):fp(this,gp).setLightMode("light"))}}pp=new WeakMap,gp=new WeakMap;var wp,kp,yp,bp,Cp,Mp,Ap,Wp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ep=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Tp{constructor(t,e){wp.set(this,void 0),kp.set(this,void 0),yp.set(this,void 0),bp.set(this,void 0),Cp.set(this,void 0),Mp.set(this,void 0),Ap.set(this,void 0),Wp(this,wp,t),Wp(this,kp,new _o),Ep(this,kp).setCallback(this.onMove.bind(this)),Wp(this,Cp,void 0),Wp(this,yp,!1),Wp(this,bp,null),Wp(this,Mp,!1),Wp(this,Ap,e)}attach(){Ep(this,kp).isAttached()||(Ep(this,kp).attach(),Wp(this,bp,Ep(this,wp).on(V,this.onMoveLock.bind(this))))}detach(){Ep(this,kp).isAttached()&&(Ep(this,kp).detach(),null!=Ep(this,bp)&&Ep(this,wp).detach(V,Ep(this,bp)))}isAttached(){return Ep(this,kp).isAttached()}onMove(t){if(!Ep(this,yp))switch(t.type){case"down":Wp(this,Cp,t),Wp(this,Mp,!1);break;case"move":Ep(this,Cp)&&!Ep(this,Mp)&&(this.pushMoveEvent(Ep(this,Cp)),Wp(this,Mp,!0)),this.pushMoveEvent(t);break;case"up":if(this.pushMoveEvent(t),Ep(this,Cp)){if(Ep(this,Ap)){const{diffX:e,diffY:i}=this.getGestureDiff(Ep(this,Cp),t),s=this.calculateGesture(e,i);this.pushGestureEvent(s,e,i)}Wp(this,Cp,void 0)}}}pushMoveEvent(t){Ep(this,wp).emit(z,null,{data:t,source:"CuiMoveObserver",timestamp:Date.now(),name:z})}onMoveLock(t){Wp(this,yp,t)}getGestureDiff(t,e){return{diffX:e.x-t.x,diffY:e.y-t.y}}calculateGesture(t,e){const i=.3*window.innerWidth,s=Math.abs(t),n=Math.abs(e);if(s>n&&s>i)return t>0?"right":"left";return n>.3*window.innerHeight?e>0?"down":"up":"none"}pushGestureEvent(t,e,i){const s=this.getGestureEventName(t);s&&Ep(this,wp).emit(s,null,{timespstamp:Date.now(),changeX:e,changeY:i,name:s,source:"CuiMoveObserver"})}getGestureEventName(t){switch(t){case"up":return et;case"down":return tt;case"left":return it;case"right":return st;default:return null}}}wp=new WeakMap,kp=new WeakMap,yp=new WeakMap,bp=new WeakMap,Cp=new WeakMap,Mp=new WeakMap,Ap=new WeakMap;var xp,Sp,Lp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ip=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pp{constructor(t){this.name="move-observer-plugin",xp.set(this,void 0),Sp.set(this,void 0),this.description="CuiMoveObserverPlugin",Lp(this,xp,void 0),Lp(this,Sp,!1!==t)}init(t){Lp(this,xp,new Tp(t.bus,Ip(this,Sp))),Ip(this,xp).attach()}destroy(){Ip(this,xp)&&Ip(this,xp).isAttached()&&Ip(this,xp).detach()}}xp=new WeakMap,Sp=new WeakMap;var Dp=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function Op(t,e,i,s){return Dp(this,void 0,void 0,(function*(){let n=e.setup.prefix;if(!pt(t.title,t.id))return;const r=[Np(t.title,i,s)];return ht(t.message)&&r.push(function(t,e){return new Vl("div").setClasses(e.NOTIFICATION_BODY_CLS).setRawChildren(new Vl("div").setTextContent(t))}(t.message,i)),ht(t.actions)&&r.push(function(t,e,i){return new Vl("div").setClasses(e.NOTIFICATION_FOOTER_CLS).setRawChildren(function(t,e){return new Vl("ul").setRawChildren(...t.map(t=>new Vl("li").setRawChildren(new Vl("a").onEvent("click",()=>{try{t.callback()}catch(t){jt.get("Notifications").exception(t,"OnActionClick")}finally{e()}}).setTextContent(t.name))))}(t,i))}(t.actions,i,s)),new Vl("div").setClasses(i.NOTIFICATION_CLS,i.MARGIN_SMALL_VERTICAL,function(t,e){return`${t}-${null!=e?e:"default"}`}(n,t.type)).setId(t.id).setRawChildren(...r).build()}))}function Np(t,e,i){const s=new Vl("span").setClasses(e.NOTIFICATION_TITLE_CLS).setTextContent(t),n=new Rn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 3,3 17,17"></path><path d="M 17,3 3,17"></path></svg>').build(),r=new Vl("a").setClasses(e.ICON_CLS,e.NOTIFICATION_CLOSE_CLS).onEvent("click",i);n&&r.setChildren(n);return new Vl("div").setClasses(e.NOTIFICATION_HEADER_CLS).setRawChildren(s,r)}var Bp,_p,Hp,$p,Rp,Fp,qp,Up=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},zp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Vp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class jp{constructor(t){var e;this.name="notification-plugin",Bp.set(this,void 0),_p.set(this,void 0),Hp.set(this,void 0),$p.set(this,void 0),Rp.set(this,void 0),Fp.set(this,void 0),qp.set(this,void 0),this.description="CuiNotificationPlugin",zp(this,_p,null),zp(this,Bp,void 0),zp(this,Hp,null),zp(this,$p,{}),zp(this,Rp,{}),zp(this,Fp,void 0),zp(this,qp,null!==(e=t.timeout)&&void 0!==e?e:5e3)}init(t){this.createCache(t.setup.prefix),this.getOrCreateContainer(t,document.body),zp(this,Fp,new oi(t.interactions)),zp(this,Bp,t),zp(this,Hp,Vp(this,Bp).bus.on(nt,this.onEvent.bind(this),{$cuid:this.name}))}destroy(){Vp(this,_p)&&Vp(this,_p).remove(),Vp(this,Hp)&&Vp(this,Bp)&&Vp(this,Bp).bus.detach(nt,Vp(this,Hp))}onEvent(t){(function(t){return ht(t)&&pt(t.id,t.title)})(t)&&Vp(this,Bp)&&Vp(this,Fp)&&Vp(this,_p)&&(Vp(this,Rp)[t.id]||Op(t,Vp(this,Bp),Vp(this,$p),()=>{this.onNotificationClose(t,!1,!0)}).then(e=>{if(!e)return;this.addNotificationToTree(e);let i=null;!1!==t.auto&&(i=this.setAutoClose(t)),Vp(this,Rp)[t.id]={element:e,timeoutId:i},this.act(e,Vp(this,$p).NOTIFICATION_ANIMATION_IN).then(()=>{e.classList.add(Vp(this,$p).NOTIFICATION_ACTIVE_CLS)})}))}setAutoClose(t){return setTimeout(()=>{this.onNotificationClose(t,!0,!1)},Vp(this,qp))}addNotificationToTree(t){Vp(this,Bp).interactions.mutate(()=>{0===Vp(this,_p).children.length?Vp(this,_p).appendChild(t):Vp(this,_p).insertBefore(t,Vp(this,_p).firstChild)},null)}onNotificationClose(t,e,i){if(!t||!Vp(this,Fp)||!Vp(this,Bp))return;const s=Vp(this,Rp)[t.id];s&&(e||clearTimeout(s.timeoutId),this.act(s.element,Vp(this,$p).NOTIFICATION_ANIMATION_OUT).then(()=>{Vp(this,Bp).bus.emit(rt,null,Object.assign(Object.assign({},t),{dissmissed:i})),s.element.remove(),delete Vp(this,Rp)[t.id]}))}getOrCreateContainer(t,e){zp(this,_p,document.getElementById("notifications-container")),Vp(this,_p)||(zp(this,_p,new Vl("div").setClasses(At("{prefix}-notification-container",t.setup.prefix)).build()),e.appendChild(Vp(this,_p)))}createCache(t){zp(this,$p,{NOTIFICATION_CLS:At("{prefix}-notification",t),NOTIFICATION_HEADER_CLS:At("{prefix}-notification-header",t),NOTIFICATION_TITLE_CLS:At("{prefix}-notification-title",t),NOTIFICATION_BODY_CLS:At("{prefix}-notification-body",t),NOTIFICATION_FOOTER_CLS:At("{prefix}-notification-footer",t),NOTIFICATION_ACTIVE_CLS:At("{prefix}-active",t),NOTIFICATION_ANIMATION_IN:At("{prefix}-notification-animation-in",t),NOTIFICATION_ANIMATION_OUT:At("{prefix}-notification-animation-out",t),NOTIFICATION_ICON_CLS:At("{prefix}-notification-icon",t),NOTIFICATION_CLOSE_CLS:At("{prefix}-notification-close",t),ICON_CLS:At("{prefix}-icon",t),MARGIN_SMALL_VERTICAL:At("{prefix}-margin-small-vertical",t)})}act(t,e,i){return Up(this,void 0,void 0,(function*(){const s=null!=i?i:Vp(this,Bp).setup.animationTime,n=new vi(e);return Vp(this,Fp).performAction(t,n,null!=s?s:0)}))}}Bp=new WeakMap,_p=new WeakMap,Hp=new WeakMap,$p=new WeakMap,Rp=new WeakMap,Fp=new WeakMap,qp=new WeakMap;var Yp,Xp,Kp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Gp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Zp{constructor(t){this.description="Auto print mode",this.name="auto-print",Yp.set(this,void 0),Xp.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t,Kp(this,Yp,void 0),Kp(this,Xp,void 0)}init(t){Kp(this,Xp,t),this.setup.autoPrint&&window.matchMedia&&window.matchMedia("print").matches&&Gp(this,Xp).setPrintMode(!0),Kp(this,Yp,new dp("print")),Gp(this,Yp).setCallback(this.onChange.bind(this)),Gp(this,Yp).attach()}destroy(){Gp(this,Yp)&&Gp(this,Yp).detach()}onChange(t){var e,i;if(!Gp(this,Xp))return;this.setup=Gp(this,Xp).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(t.matches?Gp(this,Xp).setPrintMode(!0):Gp(this,Xp).setPrintMode(!1))}}Yp=new WeakMap,Xp=new WeakMap;var Jp,Qp,tg,eg,ig,sg,ng=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class og{constructor(t,e,i,s){Jp.set(this,void 0),Qp.set(this,void 0),tg.set(this,void 0),eg.set(this,void 0),ng(this,Jp,0),ng(this,tg,0),ng(this,Qp,0),ng(this,eg,0),this.set(t,e,i,s)}static create(t){if(!ht(t))throw new l("Given color value is not in a valid format");let e;if(t.startsWith("#"))e=new hg(t);else{if(!t.startsWith("rgb"))throw new l("Unknown color string format");e=new ag(t)}let i=e.parse();if(!i)throw new l("Color was not parsed");return i}set(t,e,i,s){ng(this,eg,ct(null!=s?s:1,0,1)),ng(this,tg,ct(i,0,255)),ng(this,Jp,ct(t,0,255)),ng(this,Qp,ct(e,0,255))}setRed(t){ng(this,Jp,ct(t,0,255))}setGreen(t){ng(this,Qp,ct(t,0,255))}setBlue(t){ng(this,tg,ct(t,0,255))}opacity(t){return ng(this,eg,ct(t,0,1)),this}lighten(t){return this.shade(t),this}darken(t){return this.shade(-t),this}invert(){return ng(this,tg,255-rg(this,tg)),ng(this,Jp,255-rg(this,Jp)),ng(this,Qp,255-rg(this,Qp)),this}getColorValue(t){t&&t.toLowerCase();switch(t){case"red":return rg(this,Jp);case"green":return rg(this,Qp);case"blue":return rg(this,tg);case"alpha":return rg(this,eg)}return-1}toCssString(){return`rgba(${rg(this,Jp)}, ${rg(this,Qp)}, ${rg(this,tg)}, ${rg(this,eg)})`}shade(t,e=!0){ng(this,Jp,this.shadeSingle(rg(this,Jp),t,e)),ng(this,Qp,this.shadeSingle(rg(this,Qp),t,e)),ng(this,tg,this.shadeSingle(rg(this,tg),t,e))}shadeSingle(t,e,i=!0){let s=(i?t:255)*e/100;return ct(t+Math.round(s),0,255)}clone(){return new og(rg(this,Jp),rg(this,Qp),rg(this,tg),rg(this,eg))}}Jp=new WeakMap,Qp=new WeakMap,tg=new WeakMap,eg=new WeakMap;class hg{constructor(t){ig.set(this,void 0),ng(this,ig,t)}trim(){ng(this,ig,rg(this,ig)?rg(this,ig).trim():"")}isValid(){return ht(rg(this,ig))&&rg(this,ig).startsWith("#")}parse(){let t=0,e=0,i=0,s=1,n=rg(this,ig).length;if(4===rg(this,ig).length)t=parseInt(rg(this,ig)[1]+rg(this,ig)[1],16),i=parseInt(rg(this,ig)[2]+rg(this,ig)[2],16),e=parseInt(rg(this,ig)[3]+rg(this,ig)[3],16);else if(t=parseInt(rg(this,ig)[1]+rg(this,ig)[2],16),i=parseInt(rg(this,ig)[3]+rg(this,ig)[4],16),e=parseInt(rg(this,ig)[5]+rg(this,ig)[6],16),n>7){let t=parseInt(rg(this,ig)[7]+rg(this,ig)[8],16);s=parseFloat((t/255).toFixed(2))}return new og(t,i,e,s)}}ig=new WeakMap;class ag{constructor(t){sg.set(this,void 0),ng(this,sg,t)}trim(){ng(this,sg,ht(rg(this,sg))?rg(this,sg).trim():"")}isValid(){return ht(rg(this,sg))&&rg(this,sg).startsWith("rgb")}parse(){let t=rg(this,sg).length,e=(rg(this,sg).startsWith("rgba")?rg(this,sg).substring(5,t-1):rg(this,sg).substring(4,t-1)).split(",");if(!wt(e.length,3,4))return;let i=parseInt(e[0]),s=parseInt(e[1]),n=parseInt(e[2]),r=4===e.length?parseFloat(e[3]):1;return new og(i,s,n,r)}}sg=new WeakMap;var lg,cg,ug,dg,pg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},gg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};const vg={light:{background:M.colorLightBackground,base:M.colorLightBase,active:M.colorLightActive,muted:M.colorLightMuted},dark:{background:M.colorDarkBackground,base:M.colorDarkBase,active:M.colorDarkActive,muted:M.colorDarkMuted}},fg={accent:{base:M.colorAccent,muted:M.colorAccentMuted,active:M.colorAccentActive,shade:M.colorAccentShade,shadeDark:M.colorAccentShadeDark},secondary:{base:M.colorSecondary,muted:M.colorSecondaryMuted,active:M.colorSecondaryActive,shade:M.colorSecondaryShade,shadeDark:M.colorSecondaryShadeDark},error:{base:M.colorError,muted:M.colorErrorMuted,active:M.colorErrorActive,shade:M.colorErrorShade,shadeDark:M.colorErrorShadeDark},warning:{base:M.colorWarning,muted:M.colorWarningMuted,active:M.colorWarningActive,shade:M.colorWarningShade,shadeDark:M.colorWarningShadeDark},success:{base:M.colorSuccess,muted:M.colorSuccessMuted,active:M.colorSuccessActive,shade:M.colorSuccessShade,shadeDark:M.colorSuccessShadeDark}};class mg{constructor(t,e){lg.set(this,void 0),cg.set(this,void 0),pg(this,lg,vg[t]),pg(this,cg,e)}setBackgroundColor(t){this.setColor(gg(this,lg).background,t)}setBaseColor(t){this.setColor(gg(this,lg).base,t)}setActiveColor(t){this.setColor(gg(this,lg).active,t)}setMutedColor(t){this.setColor(gg(this,lg).muted,t)}setBaseColors(t){if(!gg(this,lg))return;let e={};e[gg(this,lg).background]=t.background?t.background.toCssString():"",e[gg(this,lg).active]=t.active?t.active.toCssString():"",e[gg(this,lg).muted]=t.muted?t.muted.toCssString():"",e[gg(this,lg).base]=t.base?t.base.toCssString():"",gg(this,cg).setProperties(e)}setColor(t,e){gg(this,cg).setProperty(t,e.toCssString())}}lg=new WeakMap,cg=new WeakMap;class wg{constructor(t,e){ug.set(this,void 0),dg.set(this,void 0),pg(this,ug,e),pg(this,dg,fg[t])}setBaseColor(t){this.setColor(gg(this,dg).base,t)}setMutedColor(t){this.setColor(gg(this,dg).muted,t)}setActiveColor(t){this.setColor(gg(this,dg).active,t)}setShadeColor(t){this.setColor(gg(this,dg).shade,t)}setShadeDarkColor(t){this.setColor(gg(this,dg).shadeDark,t)}setColors(t){if(!gg(this,dg))return;let e={};e[gg(this,dg).shade]=t.shade?t.shade.toCssString():"",e[gg(this,dg).shadeDark]=t.shadeDark?t.shadeDark.toCssString():"",e[gg(this,dg).active]=t.active?t.active.toCssString():"",e[gg(this,dg).muted]=t.muted?t.muted.toCssString():"",e[gg(this,dg).base]=t.base?t.base.toCssString():"",gg(this,ug).setProperties(e)}setAutoColors(t){let e={};e[gg(this,dg).base]=t.toCssString(),e[gg(this,dg).shade]=t.lighten(30).toCssString(),e[gg(this,dg).shadeDark]=t.darken(30).toCssString(),e[gg(this,dg).active]=t.darken(10).toCssString(),e[gg(this,dg).muted]=t.lighten(10).toCssString(),gg(this,ug).setProperties(e)}setColor(t,e){gg(this,ug).setProperty(t,e.toCssString())}}ug=new WeakMap,dg=new WeakMap;var kg,yg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},bg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Cg{constructor(t){kg.set(this,void 0),yg(this,kg,t)}setProperty(t,e){pt(t,e)&&bg(this,kg).interactions.mutate(()=>{bg(this,kg).setProperty(t,e)},null)}setProperties(t){ht(t)&&bg(this,kg).interactions.mutate(()=>{for(let e in t)ht(t[e])&&bg(this,kg).setProperty(e,t[e])},null)}}kg=new WeakMap;var Mg,Ag=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Eg{constructor(t){Mg.set(this,void 0),Ag(this,Mg,new Cg(t))}setBaseFontSize(t,e){this.setBaseUnitValue(M.fontSize,t,e)}setAnimationTime(t,e){this.setBaseUnitValue(M.animationTime,t,null!=e?e:"ms")}setAnimationTimeLong(t,e){this.setBaseUnitValue(M.setAnimationTimeLong,t,null!=e?e:"ms")}setAnimationTimeShort(t,e){this.setBaseUnitValue(M.setAnimationTimeShort,t,null!=e?e:"ms")}setBaseLineHeight(t,e){this.setBaseUnitValue(M.lineHeight,t,e)}setBaseMargin(t,e){this.setBaseUnitValue(M.margin,t,e)}setBasePadding(t,e){this.setBaseUnitValue(M.padding,t,e)}setBaseBorderRadius(t,e){this.setBaseUnitValue(M.borderRadius,t,e)}setComponentSpace(t,e){this.setBaseUnitValue(M.componentSpace,t,e)}setAccordionIcon(t){ht(t)&&this.setCSSVariable(M.accordionIcon,t)}setScrollbarWidth(t,e){this.setBaseUnitValue(M.scrollbarWidth,t,e)}setAppBackgroundColor(t){ht(t)&&this.setCSSVariable(M.colorLightAppBackground,t.toCssString())}setDarkAppBackgroundColor(t){ht(t)&&this.setCSSVariable(M.colorDarkAppBackground,t.toCssString())}getBaseColorsSetter(){return new mg("light",Wg(this,Mg))}getDarkBaseColorsSetter(){return new mg("dark",Wg(this,Mg))}getAccentThemeColorsSetter(){return new wg("accent",Wg(this,Mg))}getSecondaryThemeColorsSetter(){return new wg("secondary",Wg(this,Mg))}getErrorThemeColorsSetter(){return new wg("error",Wg(this,Mg))}getWarningThemeColorsSetter(){return new wg("warning",Wg(this,Mg))}getSuccessThemeColorsSetter(){return new wg("success",Wg(this,Mg))}setCSSVariable(t,e){Wg(this,Mg).setProperty(t,e)}setBaseUnitValue(t,e,i){if(!ht(e))return;let s=`${e}${null!=i?i:"px"}`;this.setCSSVariable(t,s)}}Mg=new WeakMap;var Tg,xg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Sg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Lg{constructor(t){this.name="css-variables-plugin",Tg.set(this,void 0),this.description="CuiCSSVariablesPlugin",this.setup=t,xg(this,Tg,null),this.handler=void 0}init(t){this.handler=new Eg(t),xg(this,Tg,jt.get("CuiCSSVariablesPlugin")),t.bus.on("csschange",this.onCssChange.bind(this))}destroy(){}onCssChange(t){if(!this.handler)return;let e=null,i=null;switch(t.method){case"baseFontSize":if(!this.isArgNumber(t.arg))return;this.handler.setBaseFontSize(t.arg.value,t.arg.unit);break;case"baseLineHeight":if(!this.isArgNumber(t.arg))return;this.handler.setBaseLineHeight(t.arg.value,t.arg.unit);break;case"animationTime":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTime(t.arg.value,t.arg.unit);break;case"animationTimeLong":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTimeLong(t.arg.value,t.arg.unit);break;case"animationTimeShort":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTimeShort(t.arg.value,t.arg.unit);break;case"margin":if(!this.isArgNumber(t.arg))return;this.handler.setBaseMargin(t.arg.value,t.arg.unit);break;case"padding":if(!this.isArgNumber(t.arg))return;this.handler.setBasePadding(t.arg.value,t.arg.unit);break;case"borderRadius":if(!this.isArgNumber(t.arg))return;this.handler.setBaseBorderRadius(t.arg.value,t.arg.unit);break;case"componentSpace":if(!this.isArgNumber(t.arg))return;this.handler.setComponentSpace(t.arg.value,t.arg.unit);break;case"scrollbarWidth":if(!this.isArgNumber(t.arg))return;this.handler.setScrollbarWidth(t.arg.value,t.arg.unit);break;case"accordionIcon":if(!ht(t.arg))return;this.handler.setAccordionIcon(t.arg);break;case"appLightBackground":if(!ht(t.arg))return;this.handler.setAppBackgroundColor(og.create(t.arg));break;case"appDarkBackground":case"appDarkBackground":if(!ht(t.arg))return;this.handler.setDarkAppBackgroundColor(og.create(t.arg));break;case"mainColorBackground":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setBackgroundColor(og.create(t.arg.color));break;case"mainColor":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setBaseColor(og.create(t.arg.color));break;case"mainColorMuted":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setMutedColor(og.create(t.arg.color));break;case"mainColorActive":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setActiveColor(og.create(t.arg.color));break;case"themeAutoColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setAutoColors(og.create(t.arg.color));case"themeBaseColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setAutoColors(og.create(t.arg.color));case"themeMutedColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setMutedColor(og.create(t.arg.color));case"themeActiveColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setActiveColor(og.create(t.arg.color));case"themeShadeColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setShadeColor(og.create(t.arg.color));case"themeShadeDarkColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setShadeDarkColor(og.create(t.arg.color));default:Sg(this,Tg).warning("Unknown event method","onCssChange")}}isArgNumber(t){return ht(t)&&ht(t.value)}isArgColor(t){return ht(t)&&ht(t.palette)&&ht(t.color)}getBaseColorSetter(t){if(!this.handler)return;switch(t.trim().toLowerCase()){case"light":return this.handler.getBaseColorsSetter();case"dark":return this.handler.getDarkBaseColorsSetter()}}getAccentColorSetter(t){if(!this.handler)return;switch(t.trim().toLowerCase()){case"accent":return this.handler.getAccentThemeColorsSetter();case"secondary":return this.handler.getSecondaryThemeColorsSetter();case"error":return this.handler.getErrorThemeColorsSetter();case"warning":return this.handler.getWarningThemeColorsSetter();case"success":return this.handler.getSuccessThemeColorsSetter();default:return}}}Tg=new WeakMap;var Ig,Pg,Dg,Og,Ng,Bg,_g,Hg,$g=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fg{constructor(t,e){Ig.set(this,void 0),Pg.set(this,void 0),Dg.set(this,void 0),Og.set(this,void 0),Ng.set(this,void 0),Bg.set(this,void 0),_g.set(this,void 0),Hg.set(this,void 0),$g(this,Ig,[]),$g(this,Pg,[]),$g(this,Dg,window.innerWidth),$g(this,Og,!1),$g(this,Ng,gt(window.innerWidth)),$g(this,Bg,null!=e?e:0),$g(this,_g,t),$g(this,Hg,this.listener.bind(this))}observe(t){Rg(this,Ig).findIndex(e=>e===t)<0&&Rg(this,Ig).push(t)}unobserve(t){let e=Rg(this,Ig).findIndex(e=>e===t);e>=0&&Rg(this,Ig).splice(e,1)}connect(){window.addEventListener("resize",Rg(this,Hg))}disconnect(){window.removeEventListener("resize",Rg(this,Hg))}pushUpdateToItems(t){Rg(this,Ig).length<1||($g(this,Pg,[]),Rg(this,Ig).forEach(e=>{Rg(this,Pg).push(e.resize(t))}),Promise.all(Rg(this,Pg)),$g(this,Pg,[]))}listener(t){if(Rg(this,Og))return;$g(this,Og,!0);const e=window.innerWidth-Rg(this,Dg);if(Math.abs(e)>=Rg(this,Bg)){const t=gt(window.innerWidth);if(t!==Rg(this,Ng)){const e={current:t,previous:Rg(this,Ng),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now(),name:T,source:"CuiResizeObserver"};Rg(this,_g).emit(T,"",e),this.pushUpdateToItems(e),$g(this,Ng,t)}}$g(this,Og,!1)}}Ig=new WeakMap,Pg=new WeakMap,Dg=new WeakMap,Og=new WeakMap,Ng=new WeakMap,Bg=new WeakMap,_g=new WeakMap,Hg=new WeakMap;var qg,Ug=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},zg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vg{constructor(t){this.name="resize-observer-plugin",qg.set(this,void 0),this.description="CuiResizeObserverPlugin",Ug(this,qg,void 0),this.setup=t}init(t){var e;Ug(this,qg,new Fg(t.bus,null!==(e=this.setup.resizeThreshold)&&void 0!==e?e:20)),zg(this,qg).connect()}destroy(){zg(this,qg)&&zg(this,qg).disconnect()}}qg=new WeakMap;var jg,Yg,Xg,Kg,Gg,Zg,Jg,Qg,tv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ev=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},iv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class sv{constructor(t,e,i){jg.set(this,void 0),Yg.set(this,void 0),Xg.set(this,void 0),Kg.set(this,void 0),Gg.set(this,void 0),Zg.set(this,void 0),Jg.set(this,void 0),Qg.set(this,void 0),ev(this,jg,t),ev(this,Yg,`.${e}-toast`),ev(this,Xg,e+"-toast"),ev(this,Kg,e+"-active"),ev(this,Gg,i),ev(this,Zg,!1),ev(this,Jg,e+"-toast-animation-in"),ev(this,Qg,e+"-toast-animation-out")}show(t){return tv(this,void 0,void 0,(function*(){if(iv(this,Zg))return!1;ev(this,Zg,!0);let e=document.querySelector(iv(this,Yg));return ht(e)||(e=document.createElement("div"),e.classList.add(iv(this,Xg)),document.body.appendChild(e),yield lt(10)),iv(this,jg).mutate(()=>{e.textContent=t,e.classList.add(d),e.classList.add(iv(this,Jg))},this),yield lt(iv(this,Gg)),iv(this,jg).mutate(()=>{e.classList.remove(d),e.classList.remove(iv(this,Jg)),e.classList.add(iv(this,Kg))},this),yield lt(3e3),iv(this,jg).mutate(()=>{e.classList.add(d),e.classList.add(iv(this,Qg))},this),setTimeout(()=>{iv(this,jg).mutate(()=>{e.classList.remove(d),e.classList.remove(iv(this,Qg)),e.classList.remove(iv(this,Kg))},this),ev(this,Zg,!1)},iv(this,Gg)),!0}))}}jg=new WeakMap,Yg=new WeakMap,Xg=new WeakMap,Kg=new WeakMap,Gg=new WeakMap,Zg=new WeakMap,Jg=new WeakMap,Qg=new WeakMap;var nv,rv,ov,hv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},av=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class lv{constructor(t){this.name="toast-plugin",nv.set(this,void 0),rv.set(this,void 0),ov.set(this,void 0),this.description="CuiToastPlugin",this.setup=t,hv(this,nv,void 0),hv(this,rv,null),hv(this,ov,void 0)}init(t){var e;hv(this,ov,t),av(this,nv)||hv(this,nv,new sv(t.interactions,t.setup.prefix,null!==(e=t.setup.animationTime)&&void 0!==e?e:300)),hv(this,rv,t.bus.on(G,this.onToastShow.bind(this),{$cuid:this.name}))}destroy(){av(this,ov)&&av(this,rv)&&(av(this,ov).bus.detach(G,av(this,rv)),hv(this,rv,null))}onToastShow(t){av(this,nv)&&av(this,ov)&&(av(this,ov).bus.emit(Z,null,[]),av(this,nv).show(t).then(()=>{av(this,ov)&&av(this,ov).bus.emit(J,null,[])}))}}nv=new WeakMap,rv=new WeakMap,ov=new WeakMap;var cv,uv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},dv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};cv=new WeakMap;const gv="0.3.9";window.cuiInit=new class{constructor(){cv.set(this,void 0),dv(this,cv,!1)}init(t){var e,i;return uv(this,void 0,void 0,(function*(){if(pv(this,cv))return console.log("Module is already initialized"),!1;const s=new ms,n=function(t){var e;let i=!t||t.autoLight,s=!t||t.autoPrint;return[new mp({autoLight:i}),new Zp({autoPrint:s}),new np({}),new Ld,new Lg({}),new Pp,new Vg({}),new lv({}),new Wd,new jp({timeout:t.notifcationTimeout}),new $d(null!==(e=t.focusSetup)&&void 0!==e?e:{})]}({autoLight:!0,autoPrint:!0}),r=function(t){let e=null==t?void 0:t.prefix;return[new uh(e),new Ku(e),new Gn(e),new Pc(e),new al(e),new Pl(e),new Eh(e),new Fa(e),new rr(e),new Nu(e),new Tr(e),new Hh(e),new Ys(e),new To(e),new Pa(e),new wu(e),new Eu(e),new rh(e),new iu(e),new Dn(e),new vr(e),new Ac(e),new el(e)]}({prefix:null===(e=t.setup)||void 0===e?void 0:e.prefix});let o=n;t.plugins&&(o=Object.assign(Object.assign({},n),t.plugins));let h=yield s.init(Object.assign(Object.assign({},t),{plugins:o,components:ht(t.components)?[...r,...t.components]:r}));return h.result?(dv(this,cv,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(i=h.message)&&void 0!==i?i:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}}])}));
//# sourceMappingURL=index.min.js.map