!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light-app",[],e):"object"==typeof exports?exports["cui-light-app"]=e():t["cui-light-app"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"CUI_LIGHT_VERSION",(function(){return _v})),i.d(e,"CuiInstance",(function(){return ts}));class s extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class n extends s{constructor(t){super("ItemNotFoundError",t)}}class r extends s{constructor(t){super("ArgumentError",t)}}class o extends s{constructor(t){super("CuiInstanceInitError",t)}}class h extends s{constructor(t){super("RegisterElementError",t)}}class a extends s{constructor(t){super("AnimatorError",t)}}class l extends s{constructor(t){super("CSSVariableError",t)}}class c extends s{constructor(t){super("CuiPositionError",t)}}const u="dark",d="animation-progress",p="print",v="swiping-on",f={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},g="--{prefix}-animation-time",w="--{prefix}-animation-time-long",m="--{prefix}-animation-time-short";class y{}y.logLevel="none",y.prefix="cui";const k="instance-initialized",b="instance-finished",M="resize",C="open",E="opened",W="close",T="closed",A="toggle",x="toggled",L="switch",S="switched",P="scroll",I="targetchange",O="intersection",N="keydown",H="windowclick",_="offset",D="progresschange",R="progresschanged",$="globalmove",F="movelock",B="pause",q="paused",z="sorted",V="sortstart",U="toast",j="toastshow",K="toasthidden",Y="alert",X="gesture-down",G="gesture-up",Z="gesture-left",J="gesture-right",Q="notify",tt="notified",et=function*(){let t=0;for(;;){((yield t++)||t>2e5)&&(t=0)}}();function it(t,e=!0){return null!=t&&(!e||!function(t){if("string"==typeof t)return 0===t.length;if("boolean"==typeof t)return t;if(Array.isArray(t))return 0===t.length;return!1}(t))}function st(t,e){if(!it(t)||!it(e))throw new r("Missing argument value");return`${t}-${e}`}function nt(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function rt(t,e,i){return t<e?e:t>i?i:t}function ot(t,e,i,s){return null==t||isNaN(t)?s:rt(t,e,i)}function ht(t){return it(t)?`[${t.join("],[")}]`:""}function at(...t){if(!it(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!it(t[i]))return!1;return!0}function lt(t){let e="none";return t>=640&&(e="small"),t>=960&&(e="medium"),t>=1200&&(e="large"),t>=1600&&(e="xlarge"),e}function ct(t){let e={};return it(t)?(e=function(t){let e=null;if(it(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error((i="An exception occured",s="Functions",n="parseJsonString",`[${(new Date).toLocaleString()}][${null!=s?s:"-"}][${null!=n?n:"-"}][${i}]`),t)}return e}var i,s,n;return null}(t.trim()),it(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=Mt(t),s=void 0,n="";i.length<2||(s=i[0].trim(),n=i[1].trim(),s&&(e[s]=n.replace("U+0003B",";")))})):e=t),e):e}function ut(t,e){let i=parseInt(t);return isNaN(i)?e:i}function dt(t,e){return it(t)&&it(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function pt(t,e,i){return it(t)&&t>=e&&t<=i}function vt(t,e){return at(t,e)?ct(t.getAttribute(e)):null}function ft(t){return!!it(t)&&["y","t","true","yes"].includes(t.toLowerCase())}function gt(t,e){return it(t)?t.replace("{prefix}",null!=e?e:""):t}function wt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function mt(t){if(!it(t))return;let e=t.parentElement;return it(e)&&it(e.$cuid)?e:mt(e)}function yt(t){let e=0;return t?(Array.from(t.children).forEach(t=>{e+=t.getBoundingClientRect().height}),e>0?e+4:e):-1}function kt(t,e){if(at(t,e))for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}function bt(t,e,i){let s=-1;switch(t){case"prev":s=e<=0?i-1:e-1;break;case"next":s=e<i-1?e+1:0;break;case"first":s=0;break;case"last":s=i-1;default:s=ut(t,-1)}return s}function Mt(t){let e=[];if(!it(t))return e;let i=t.split(":");return 1===i.length?i:[i.shift(),i.join(":")]}function Ct(t,e,...i){return i.includes(t)?t:e}function Et(t){return":scope "+t}function Wt(t){const e=t.split(">");return e[e.length-1].trim()}class Tt{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.prefix="cui",this.plugins={},this.root=document.body}fromInit(t){var e;return this.prefix=null!==(e=t.prefix)&&void 0!==e?e:"cui",this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this.root=t.root,this}}class At{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.root=document.body,this.busSetup=void 0,this.development=void 0}}var xt,Lt,St,Pt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},It=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ot{constructor(t,e){xt.set(this,void 0),Lt.set(this,void 0),St.set(this,void 0),Pt(this,Lt,t),Pt(this,xt,"-"),Pt(this,St,null!=e?e:y.logLevel)}registerElement(t,e,i){Pt(this,xt,e),console.log(this.prepString("Register element: "+e,"debug",i))}unregisterElement(t,e){Pt(this,xt,"-"),console.log(this.prepString("Unregister element: "+t,"debug",e))}setProperty(t,e,i,s){}pushState(t,e,i,s,n){this.logByType(i,s,n)}log(t,e,i){this.logByType(t,e,i)}debug(t,e){"debug"===It(this,St)&&console.log(this.prepString(t,"debug",e))}warning(t,e){"warning"!==It(this,St)&&"debug"!==It(this,St)||console.warn(this.prepString(t,"warning",e))}error(t,e){"error"!==It(this,St)&&"debug"!==It(this,St)&&"warning"!==It(this,St)||console.error(this.prepString(t,"error",e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,"exception",e)),"debug"===It(this,St)&&console.error(t.stack)}setId(t){t&&Pt(this,xt,t)}prepString(t,e,i){return`[${(new Date).toLocaleString()}][${e}][${It(this,Lt)}][${null!=i?i:"-"}][${It(this,xt)}][${t}]`}logByType(t,e,i){switch(t){case"debug":this.debug(e,i);break;case"warning":this.warning(e,i);break;case"error":this.error(e,i)}}}xt=new WeakMap,Lt=new WeakMap,St=new WeakMap;class Nt{get(t){return new Ot(t)}}class Ht{static get(t){return y.devTool||(y.devTool=new Nt),y.devTool.get(t)}}var _t=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function Dt(t,e){return e.filter(e=>t.hasAttribute&&t.hasAttribute(e.attribute))}function Rt(t,e,i){return _t(this,void 0,void 0,(function*(){if(!at(t,e,i))return!1;let s=t;s.$cuid||(s.$cuid=t.hasAttribute("cuid")?t.getAttribute("cuid"):function(t){return`${it(t)?t:"cui-element"}-${et.next().value}`}(t.tagName),t.setAttribute("cuid",s.$cuid));for(let t of e)yield Ft(s,t,i,vt(s,t.attribute));return!0}))}function $t(t){return _t(this,void 0,void 0,(function*(){const e=t;if(!e.$handlers)return!1;for(let t in e.$handlers)yield qt(e,t);return!0}))}function Ft(t,e,i,s){return _t(this,void 0,void 0,(function*(){if(t.$handlers||(t.$handlers={}),t.$handlers[e.attribute])return!1;try{let n=e.get(t,i);t.$handlers[e.attribute]=n,yield t.$handlers[e.attribute].handle(s)}catch(t){throw new h(`An error occured during [${e.attribute}] initialization: ${t.message}`)}return!0}))}function Bt(t,e,i){return _t(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let s=t.$handlers[e];if(!s)return!1;try{s.refresh&&(yield s.refresh(i))}catch(t){throw new h(`An error occured during [${e}] update: ${t.message}`)}return!0}))}function qt(t,e){return _t(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let i=t.$handlers[e];if(!i)return!1;try{yield i.destroy()}catch(t){throw new h(`An error occured during [${e}] destroy: ${t.message}`)}return!0}))}var zt,Vt,Ut,jt,Kt,Yt,Xt,Gt,Zt,Jt,Qt,te=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ee=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ie=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class se{constructor(t,e){zt.set(this,void 0),Vt.set(this,void 0),Ut.set(this,void 0),jt.set(this,void 0),Kt.set(this,void 0),Yt.set(this,void 0),ee(this,zt,void 0),this.plugins=void 0,ee(this,Vt,void 0),ee(this,Ut,t),this._log=Ht.get("CuiMutationObserver"),ee(this,jt,[]),ee(this,Kt,e),ee(this,Yt,"")}setPlugins(t){return this.plugins=t,this}setComponents(t){return ee(this,jt,t),this}setAttributes(t){return ee(this,Vt,{attributes:!0,subtree:!0,childList:!0,attributeFilter:t}),ee(this,Yt,ht(t)),this}start(){return this._log.debug("Starting"),ie(this,Vt)?(ee(this,zt,new MutationObserver(this.mutationCallback.bind(this))),ie(this,zt).observe(ie(this,Ut),ie(this,Vt)),this._log.debug("Started"),this):(this._log.error("Cannot start - options are not defined"),this)}stop(){return this._log.debug("Stopping"),ie(this,zt)?(ie(this,zt).disconnect(),ee(this,zt,void 0),this._log.debug("Stopped"),this):(this._log.debug("Observer not available"),this)}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;if(!at(t.attributeName,e)){this._log.error("Mutation attribute doesn't not exisist");break}this.handeComponentUpdate(t.attributeName,e);break;case"childList":this.handleChildListMutation(t)}it(this.plugins)&&this.plugins.onMutation(t).then(()=>{})})}handeComponentUpdate(t,e){let i=vt(e,t);Bt(e,t,i).then(e=>{this._log.debug("Component: "+t+" updated with: "+e,"handeComponentUpdate")}).catch(t=>{this._log.exception(t)})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(this._log.debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes).then(t=>{this._log.debug("Added nodes: "+e+" with status: "+t)}).catch(t=>{this._log.exception(t)})):i>0&&(this._log.debug("Removing nodes: "+i),this.handleRemovedNodes(t.removedNodes).then(t=>{this._log.debug("Removed nodes: "+i+" with status: "+t)}).catch(t=>{this._log.exception(t)}))}handleAddedNodes(t){return te(this,void 0,void 0,(function*(){for(let e of t){yield this.handleAddedNode(e);let t=e,i=t.hasChildNodes()?t.querySelectorAll(ie(this,Yt)):null;it(i)&&(this._log.debug("Additional nodes to add: "+i.length),yield this.handleAddedChildren(i))}return!0}))}handleAddedChildren(t){return te(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield this.handleAddedNode(i));return e}))}handleAddedNode(t){return te(this,void 0,void 0,(function*(){let e=Dt(t,ie(this,jt));return Rt(t,e,ie(this,Kt))}))}handleRemovedNodes(t){return te(this,void 0,void 0,(function*(){for(let e of t){yield $t(e);let t=e,i=e.hasChildNodes()?t.querySelectorAll(ie(this,Yt)):null;it(i)&&(this._log.debug("Additional nodes to remove: "+i.length),yield this.handleDestroyChildren(i))}return!0}))}handleDestroyChildren(t){return te(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield $t(i));return e}))}}zt=new WeakMap,Vt=new WeakMap,Ut=new WeakMap,jt=new WeakMap,Kt=new WeakMap,Yt=new WeakMap;class ne{constructor(t){Xt.set(this,void 0),Gt.set(this,void 0),Zt.set(this,void 0),Jt.set(this,void 0),Qt.set(this,{childList:!0,subtree:!0}),ee(this,Gt,void 0),ee(this,Jt,!1),ee(this,Xt,!1),ee(this,Zt,t)}observe(){ie(this,Xt)||ie(this,Jt)||!ie(this,Gt)||(ie(this,Gt).observe(ie(this,Zt),ie(this,Qt)),ee(this,Xt,!0))}unobserve(){ie(this,Xt)&&ie(this,Gt)&&(ie(this,Gt).disconnect(),ee(this,Xt,!1))}isObserving(){return ie(this,Xt)}disable(t){ee(this,Jt,t),ie(this,Jt)&&this.unobserve()}onMutation(t){ie(this,Xt)&&this.unobserve(),ee(this,Gt,new MutationObserver(t))}}Xt=new WeakMap,Gt=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap;var re,oe,he,ae,le,ce,ue=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},de=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pe{constructor(){re.set(this,void 0),oe.set(this,void 0),he.set(this,void 0),ae.set(this,!1),le.set(this,void 0),ce.set(this,void 0),ue(this,he,window.requestAnimationFrame.bind(window)),ue(this,re,[]),ue(this,oe,[]),ue(this,le,5),ue(this,ce,void 0)}onError(t){ue(this,ce,t)}mutate(t,e,...i){de(this,oe).push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){de(this,re).push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!de(this,ae)){if(ue(this,ae,!0),t&&t>=de(this,le))throw new Error("Fast Dom limit reached");de(this,he).call(this,this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=de(this,re),n=de(this,oe);try{this.run(n),this.run(s)}catch(t){de(this,ce)?de(this,ce).call(this,t):console.error("An error has been captured in interactions: "+t.message),i=t}ue(this,ae,!1),(i||de(this,re).length||de(this,oe).length)&&this.schedule(e+1)}}re=new WeakMap,oe=new WeakMap,he=new WeakMap,ae=new WeakMap,le=new WeakMap,ce=new WeakMap;class ve{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var fe,ge,we,me,ye,ke=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},be=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Me=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ce{constructor(t){fe.set(this,void 0),ge.set(this,void 0),we.set(this,void 0),me.set(this,void 0),ye.set(this,void 0),be(this,ge,!1),be(this,fe,[]),be(this,we,t),be(this,ye,void 0),be(this,me,void 0)}add(t){Me(this,fe).push(t),Me(this,ge)||(be(this,ge,!0),this.flush().then(()=>{be(this,ge,!1)}))}delete(t){const e=Me(this,fe).findIndex(e=>this.compare(e,t));if(!(e<0))return Me(this,fe).splice(e,1)[0]}isLocked(){return Me(this,ge)}setCompareCallback(t){be(this,ye,t)}onError(t){be(this,me,t)}compare(t,e){return Me(this,ye)?Me(this,ye).call(this,t,e):Object.is(t,e)}flush(){return ke(this,void 0,void 0,(function*(){const t=this.getItemsForFlush();if(0===t.length)return!0;try{yield Me(this,we).onFlush(t)}catch(e){this.callError(e,t)}return this.flush()}))}getItemsForFlush(){if("batch"===Me(this,we).type){let t=[...Me(this,fe)];return be(this,fe,[]),t}const t=Me(this,fe).shift();return t?[t]:[]}callError(t,e){Me(this,me)&&Me(this,me).call(this,t,e)}}fe=new WeakMap,ge=new WeakMap,we=new WeakMap,me=new WeakMap,ye=new WeakMap;var Ee,We,Te=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ae=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},xe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Le{constructor(t,e){this.log=Ht.get(t),this.queue=new Ce(e),this.queue.onError(t=>{this.log.error(t,"Flush")})}handle(t,e,i){return Te(this,void 0,void 0,(function*(){return it(t)?(this.queue.add({events:t,cuid:e,args:i}),!0):(this.log.warning("No events provided"),!1)}))}}class Se{constructor(t){Ee.set(this,void 0),this.type="single",Ae(this,Ee,t)}onFlush(t){return Te(this,void 0,void 0,(function*(){for(const e of t)for(let t in e.events){let i=e.events[t];Oe(e.cuid,i.$cuid)&&(yield xe(this,Ee).execute(i.callback,e.args))}return!0}))}}Ee=new WeakMap;class Pe{constructor(t){We.set(this,void 0),this.type="single",Ae(this,We,t)}onFlush(t){return Te(this,void 0,void 0,(function*(){for(const e of t){let t=[];for(let i in e.events){let s=e.events[i];Oe(e.cuid,s.$cuid)&&t.push(xe(this,We).execute(s.callback,e.args))}yield Promise.all(t)}return!0}))}}We=new WeakMap;class Ie{static get(t,e){switch(t){case"tasked":return new Le("TaskedEventEmitHandler",new Pe(e));default:return new Le("SimpleEventEmitHandler",new Se(e))}}}function Oe(t,e){return!it(t)||it(t)&&t==e}var Ne=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class He{execute(t,e){return Ne(this,void 0,void 0,(function*(){try{return t(e),!0}catch(t){}return!1}))}}var _e,De,Re,$e,Fe,Be,qe,ze,Ve=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ue=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},je=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ke{constructor(t,e){_e.set(this,void 0),De.set(this,void 0),Re.set(this,void 0),$e.set(this,void 0),Ue(this,_e,{}),Ue(this,Re,t),Ue(this,$e,null!=e?e:"CuiEventBus"),Ue(this,De,Ht.get(je(this,$e)))}on(t,e,i){if(!at(t,e))throw new r("Missing argument");let s=je(this,$e)+"-"+function(){let t=wt(1,1e3),e=wt(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}();return je(this,_e)[t]||(je(this,_e)[t]={}),this.isAttached(je(this,_e)[t],s,i)?null:(je(this,De).debug(`Attaching new event: [${t}] for: [${s}]`),je(this,_e)[t][s]={callback:e,$cuid:this.getCuid(i)},s)}detach(t,e){if(!at(t,e))throw new r("Missing argument");let i=je(this,_e)[t];je(this,De).debug(`Detaching item: [${e}] from [${t}]`),this.isAttached(i,e)&&delete i[e]}detachAll(t){it(t)&&je(this,_e)[t]?delete je(this,_e)[t]:je(this,De).error("Event name is missing or incorrect","detachAll")}emit(t,e,i){return Ve(this,void 0,void 0,(function*(){if(!it(t))throw new r("Event name is incorrect");let s=je(this,_e)[t];return it(s)&&(je(this,De).debug(`Emit: [${t}]`),yield je(this,Re).handle(s,e,i)),!0}))}isSubscribing(t,e,i){let s=je(this,_e)[t];return this.isAttached(s,e,i)}detachByCuid(t,e){if(!at(t,e))return;let i=je(this,_e)[t];it(i)&&kt(Object.assign({},i),(t,s)=>{s.$cuid===e&&delete i[t]})}isAttached(t,e,i){return it(i)?it(t)&&it(e)&&it(t[e])&&t[e].$cuid==i.$cuid:it(t)&&it(e)&&it(t[e])}getCuid(t){return it(t)?t.$cuid:null}}_e=new WeakMap,De=new WeakMap,Re=new WeakMap,$e=new WeakMap;class Ye{constructor(t){if(Fe.set(this,void 0),Be.set(this,void 0),qe.set(this,void 0),ze.set(this,void 0),Ue(this,Be,Ht.get("CuiEventBus")),Ue(this,qe,[]),Ue(this,Fe,{}),Ue(this,ze,0),it(t)){je(this,Be).debug("Initiating buses"),(1===t.length?t:t.sort((t,e)=>t.priority-e.priority)).forEach((t,e)=>{je(this,qe).push(this.initBusInstance(t.name,t.handler)),Ue(this,Fe,Object.assign(Object.assign({},je(this,Fe)),this.mapEvents(t.eventsDef,e))),je(this,Be).debug(`Bus ${t.name} has been initialized with number: ${e}`)}),je(this,qe).push(this.initBusInstance("DefaultEventBus","tasked")),Ue(this,ze,je(this,qe).length-1),je(this,Be).debug("Bus initialization finished")}}on(t,e,i){if(!at(t,e))throw new r("Missing argument");return this.get(t).on(t,e,i)}detach(t,e,i){if(!at(t,e))throw new r("Missing argument");this.get(t).detach(t,e,i)}detachAll(t){this.get(t).detachAll(t)}emit(t,e,i){return Ve(this,void 0,void 0,(function*(){if(!it(t))throw new r("Event name is incorrect");return this.get(t).emit(t,e,i)}))}isSubscribing(t,e,i){return this.get(t).isSubscribing(t,e,i)}detachByCuid(t,e){at(t,e)&&this.get(t).detachByCuid(t,e)}initBusInstance(t,e){if(!at(t,e))throw new r("Bus name or handler name is incorrect");let i=new He,s=Ie.get(e,i);return new Ke(s,t)}mapEvents(t,e){return t.reduce((t,i)=>t[i]?t:Object.assign(Object.assign({},t),{[i]:e}),{})}get(t){let e=je(this,Fe)[t];return je(this,qe)[null!=e?e:je(this,ze)]}}Fe=new WeakMap,Be=new WeakMap,qe=new WeakMap,ze=new WeakMap;new WeakMap,new WeakMap;class Xe{constructor(t){}append(t){if(it(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.appendChild(s),e.appendChild(i)}return!0}}var Ge,Ze=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Je=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Qe{constructor(t,e){Ge.set(this,void 0),this.setup=(new Tt).fromInit(t),this.interactions=class{static get(t,e){switch(t){case"async":const t=new pe;return e&&t.onError(e),t;default:return new ve}}}.get(t.interaction,this.onInteractionError.bind(this)),this.bus=class{static get(t){return it(t)?new Ye(t):new Ke(Ie.get("tasked",new He))}}.get(t.busSetup),this.styleAppender=new Xe(this.interactions),Ze(this,Ge,null!=e?e:[])}setLightMode(t){const e=st(this.setup.prefix,u),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=st(this.setup.prefix,u);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=st(this.setup.prefix,p),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=st(this.setup.prefix,p);return document.body.classList.contains(t)}setProperty(t,e){if(!at(t,e))throw new l("Property or value was not provided");let i=gt(t,this.setup.prefix);this.interactions.mutate(()=>{document.documentElement.style.setProperty(i,e)},null)}isPlugin(t){return it(t)&&Je(this,Ge).find(e=>e===t)}onInteractionError(t){console.error("An error has been captured from interactions"),console.error(t)}}Ge=new WeakMap;var ti,ei=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ii=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},si=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ni{constructor(t){ti.set(this,void 0),ii(this,ti,t)}performAction(t,e,i,s){return ei(this,void 0,void 0,(function*(){return new Promise(n=>{si(this,ti).mutate(()=>{e.add(t),t.classList.add(d),setTimeout(()=>{si(this,ti).mutate(()=>{e.remove(t),t.classList.remove(d),s&&s(),n(!0)},null)},i)},null)})}))}performActions(t,e,i,s){return ei(this,void 0,void 0,(function*(){return new Promise(n=>{si(this,ti).mutate(()=>{e.forEach(e=>e.add(t)),t.classList.add(d),setTimeout(()=>{si(this,ti).mutate(()=>{e.forEach(e=>e.remove(t)),t.classList.remove(d),s&&s(),n(!0)},null)},i)},null)})}))}performSwitchAction(t,e,i,s,n,r){return ei(this,void 0,void 0,(function*(){return new Promise(o=>{si(this,ti).mutate(()=>{i.forEach(e=>e.add(t)),t.classList.add(d),it(e)&&(s.forEach(t=>t.add(e)),e.classList.add(d)),setTimeout(()=>{si(this,ti).mutate(()=>{i.forEach(e=>e.remove(t)),t.classList.remove(d),it(e)&&(s.forEach(t=>t.remove(e)),e.classList.remove(d)),n(),o(!0)},null)},r)},null)})}))}}ti=new WeakMap;var ri,oi,hi,ai,li,ci,ui=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},di=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pi{constructor(t){ri.set(this,void 0),ui(this,ri,t)}add(t,e){at(t,di(this,ri))&&!t.classList.contains(di(this,ri))&&t.classList.add(di(this,ri))}remove(t,e){at(t,di(this,ri))&&t.classList.contains(di(this,ri))&&t.classList.remove(di(this,ri))}toggle(t,e){at(t,di(this,ri))&&(t.classList.contains(di(this,ri))?t.classList.remove(di(this,ri)):t.classList.add(di(this,ri)))}}ri=new WeakMap;class vi{constructor(t){oi.set(this,void 0),ui(this,oi,t)}add(t,e){if(e)switch(di(this,oi)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){if(e)switch(di(this,oi)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){if(e)switch(di(this,oi)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}oi=new WeakMap;class fi{constructor(t){var e,i;hi.set(this,void 0),ai.set(this,void 0),e=this,i=this,[{set value(t){ui(e,hi,t)}}.value,{set value(t){ui(i,ai,t)}}.value]=Mt(t)}add(t,e){at(t,di(this,hi),di(this,ai))&&t.setAttribute(di(this,hi),di(this,ai))}remove(t,e){at(t,di(this,hi),di(this,ai))&&t.hasAttribute(di(this,hi))&&t.removeAttribute(di(this,hi))}toggle(t,e){at(t,di(this,hi),di(this,ai))&&(t.hasAttribute(di(this,hi))?t.removeAttribute(di(this,hi)):t.setAttribute(di(this,hi),di(this,ai)))}}hi=new WeakMap,ai=new WeakMap;class gi{constructor(t){var e,i;li.set(this,void 0),ci.set(this,void 0),e=this,i=this,[{set value(t){ui(e,li,t)}}.value,{set value(t){ui(i,ci,t)}}.value]=Mt(t)}add(t,e){if(!at(t,di(this,li),di(this,ci)))return;let i=t;i.style&&!i.style[di(this,li)]&&(i.style[di(this,li)]=di(this,ci))}remove(t,e){if(!at(t,di(this,li),di(this,ci)))return;let i=t;i.style&&i.style[di(this,li)]&&(i.style[di(this,li)]="")}toggle(t,e){if(!at(t,di(this,li),di(this,ci)))return;let i=t;i.style&&(i.style[di(this,li)]?delete i.style[di(this,li)]:i.style[di(this,li)]=di(this,ci))}}li=new WeakMap,ci=new WeakMap;class wi{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class mi{static get(t){if(!it(t))return new wi;switch(t[0]){case".":return new pi(t.substring(1));case"~":return new vi(t.substring(1));case"&":return new fi(t.substring(1));case"^":return new gi(t.substring(1));default:return new pi(t)}}}class yi{static get(t){if(!it(t))return[];return t.split(",").map(t=>mi.get(t.trim()))}}var ki,bi,Mi,Ci,Ei,Wi,Ti=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ai=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},xi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Li{constructor(t,e){ki.set(this,void 0),bi.set(this,void 0),Mi.set(this,void 0),Ci.set(this,void 0),Ei.set(this,void 0),Wi.set(this,void 0),Ai(this,ki,t),Ai(this,bi,!1),Ai(this,Mi,Ht.get("ElementManager")),Ai(this,Ei,e),Ai(this,Ci,Date.now()),Ai(this,Wi,new ni(e.interactions))}toggleClass(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{let i=e.classList;xi(this,Ei).interactions.fetch(()=>{i.contains(t)?xi(this,Ei).interactions.mutate(i.remove,i,t):xi(this,Ei).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{let i=e.classList;xi(this,Ei).interactions.fetch(()=>{i.contains(t)||xi(this,Ei).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{let i=e.classList;xi(this,Ei).interactions.fetch(()=>{i.contains(t)&&xi(this,Ei).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return it(t)?xi(this,ki).reduce((e,i)=>{let s=i.getAttribute(t);return null!=s&&e.push(s),e},[]):[]}setAttribute(t,e){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(i=>{xi(this,Ei).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{xi(this,Ei).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(i=>{xi(this,Ei).interactions.fetch(()=>{i.hasAttribute(t)?xi(this,Ei).interactions.mutate(i.removeAttribute,i,t):xi(this,Ei).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return Ti(this,void 0,void 0,(function*(){return!!it(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return Ti(this,void 0,void 0,(function*(){return!(!it(t)||!it(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return Ti(this,void 0,void 0,(function*(){return xi(this,bi)&&xi(this,Mi).error("Element is locked",e),this.lock(),xi(this,ki).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}setAction(t,e,i){return Ti(this,void 0,void 0,(function*(){if(!it(t))return!1;let s=mi.get(t);return this.animate(e,i,t=>{s.add(t)})}))}removeAction(t,e,i){return Ti(this,void 0,void 0,(function*(){if(!it(t))return!1;let s=mi.get(t);return this.animate(e,i,t=>{s.remove(t)})}))}animate(t,e,i){var s;return Ti(this,void 0,void 0,(function*(){if(!it(t))return!1;const n=null!==(s=null!=e?e:xi(this,Ei).setup.animationTime)&&void 0!==s?s:0,r=new pi(t);return this.call(t=>xi(this,Wi).performAction(t,r,n,()=>{i&&i(t)}))}))}emit(t,...e){it(t)?this.call(i=>{let s=i.$cuid;it(s)&&(xi(this,Mi).debug(`Emitting event ${t} to ${s}`),xi(this,Ei).bus.emit(t,s,...e))},"emit"):xi(this,Mi).warning("Not enough data to emit event","emit")}on(t,e){let i=[];return at(t,e)?(this.call(s=>{let n=s;if(it(n)){let s=xi(this,Ei).bus.on(t,e,n);null!=s&&i.push(s)}},"on"),i):(xi(this,Mi).error("Incorrect arguments","on"),i)}detach(t,e){at(t,e)||xi(this,Mi).error("Incorrect arguments","detach"),this.call(i=>{let s=i;it(s)&&xi(this,Ei).bus.detach(t,e,s)},"detach")}read(t,...e){xi(this,Ei).interactions.fetch(t,this,...e)}change(t,...e){xi(this,Ei).interactions.mutate(t,this,...e)}elements(){return xi(this,ki)}count(){return xi(this,ki).length}lock(){Ai(this,bi,!0)}unlock(){Ai(this,bi,!1)}isLocked(){return xi(this,bi)}refresh(){return Date.now()-xi(this,Ci)<36e4}}ki=new WeakMap,bi=new WeakMap,Mi=new WeakMap,Ci=new WeakMap,Ei=new WeakMap,Wi=new WeakMap;var Si,Pi,Ii,Oi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ni=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _i{constructor(t){Si.set(this,void 0),Pi.set(this,void 0),Ii.set(this,void 0),Ni(this,Si,null!=t?t:[]),Ni(this,Ii,Ht.get("CuiPluginManager")),Ni(this,Pi,[])}init(t){Hi(this,Ii).debug("Plugins initialization started: "+Hi(this,Si).length),Ni(this,Pi,Hi(this,Si).filter(t=>it(t.mutation))),Hi(this,Si).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),Hi(this,Ii).debug("Plugins have been initialized")}get(t){if(it(t))return Hi(this,Si).find(e=>e.name===t)}has(t){return it(this.get(t))}onMutation(t){return Oi(this,void 0,void 0,(function*(){let e=[];return Hi(this,Pi).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}Si=new WeakMap,Pi=new WeakMap,Ii=new WeakMap;var Di,Ri,$i=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Fi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qi{constructor(t,e){Di.set(this,void 0),Ri.set(this,void 0),Fi(this,Di,t),Fi(this,Ri,e)}registerComponent(t){return $i(this,void 0,void 0,(function*(){let e=Dt(t,Bi(this,Di));return!(!e||0===e.length)&&Rt(t,e,Bi(this,Ri))}))}updateComponent(t,e,i){return $i(this,void 0,void 0,(function*(){return!!t.hasAttribute(e)&&Bt(t,e,i)}))}destroyComponent(t){return $i(this,void 0,void 0,(function*(){return $t(t)}))}}Di=new WeakMap,Ri=new WeakMap;var zi,Vi,Ui,ji,Ki,Yi,Xi,Gi,Zi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ji=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ts{constructor(t,e,i){zi.set(this,void 0),Vi.set(this,void 0),Ui.set(this,void 0),ji.set(this,void 0),Ki.set(this,void 0),Yi.set(this,void 0),Xi.set(this,void 0),Gi.set(this,void 0),y.prefix=t.prefix,y.logLevel=t.logLevel,t.development&&(y.devTool=t.development),Ji(this,ji,new _i(e)),Ji(this,Ki,null!=i?i:[]),Ji(this,Ui,new Qe(t,e.map(t=>t.name))),Ji(this,zi,Ht.get("CuiInstance")),Ji(this,Yi,t.root),Ji(this,Vi,void 0),Ji(this,Xi,[]),Ji(this,Gi,new qi(Qi(this,Ki),Qi(this,Ui)))}init(){return Zi(this,void 0,void 0,(function*(){if(Qi(this,zi).debug("Instance started","init"),!it(window.MutationObserver))throw new o("Mutation observer does not exists");Ji(this,Xi,Qi(this,Ki).map(t=>t.attribute));const t=it(Qi(this,Xi))?Qi(this,Yi).querySelectorAll(ht(Qi(this,Xi))):null;if(it(t)){Qi(this,zi).debug(`Initiating ${t.length} elements`);let e=[];for(let i of t)try{let t=Dt(i,Qi(this,Ki));e.push(Rt(i,t,Qi(this,Ui)))}catch(t){Qi(this,zi).exception(t)}yield Promise.all(e)}return Qi(this,zi).debug("Init plugins","init"),Qi(this,ji).init(Qi(this,Ui)),at(Qi(this,Ki),Qi(this,Xi))&&(Qi(this,zi).debug("Init mutation observer","init"),Ji(this,Vi,new se(Qi(this,Yi),Qi(this,Ui))),Qi(this,Vi).setComponents(Qi(this,Ki)).setAttributes(Qi(this,Xi)),Qi(this,Vi).setPlugins(Qi(this,ji)),Qi(this,Vi).start()),Qi(this,zi).debug("Setting CSS globals","init"),Qi(this,Ui).interactions.mutate(()=>{Qi(this,Ui).setProperty(w,Qi(this,Ui).setup.animationTimeLong+"ms"),Qi(this,Ui).setProperty(g,Qi(this,Ui).setup.animationTime+"ms"),Qi(this,Ui).setProperty(m,Qi(this,Ui).setup.animationTimeShort+"ms")},null),Qi(this,Ui).bus.emit(k,null),this}))}finish(){Qi(this,Vi)&&Qi(this,Vi).stop(),Qi(this,Ui).bus.emit(b,null)}get(t){const e=this.all(t);if(!e)return;return new Li(e,Qi(this,Ui))}all(t){const e=document.querySelectorAll(t);if(it(e))return[...e]}getUtils(){return Qi(this,Ui)}on(t,e,i){return at(t,e)?Qi(this,Ui).bus.on(t,e,i):(Qi(this,zi).error("Incorrect arguments","on"),null)}detach(t,e){at(t,e)||Qi(this,zi).error("Incorrect arguments","detach"),Qi(this,Ui).bus.detach(t,e)}detachAll(t){it(t)||Qi(this,zi).error("Incorrect arguments","detachAll"),Qi(this,Ui).bus.detachAll(t)}emit(t,e,...i){if(!at(t,e))return void Qi(this,zi).warning("Not enough data to emit event","emit");let s=null;if("string"==typeof e&&e.startsWith("~"))s=e.substring(1);else{s=("string"==typeof e?document.querySelector(e):e).$cuid}it(s)?Qi(this,Ui).bus.emit(t,s,...i):Qi(this,zi).warning("Element is not a cUI element","emit")}getPlugin(t){return Qi(this,ji).get(t)}api(){return Qi(this,Gi)}createCuiElement(t,e,i){return Zi(this,void 0,void 0,(function*(){if(!it(e)||!Qi(this,Xi).includes(e))return Qi(this,zi).error("Element cannot be created: Unknown attribute"),!1;let s=Qi(this,Ki).find(t=>t.attribute===e);return!!s&&(!!function(t,e,i){if(!at(e,i,t))return!1;if(t.hasAttribute(e))return!1;let s=[];return kt(i,(t,e)=>{s.push(`${t}: ${e}`)}),t.setAttribute(e,s.join("; ")),!0}(t,e,i)&&Rt(t,[s],Qi(this,Ui)))}))}}zi=new WeakMap,Vi=new WeakMap,Ui=new WeakMap,ji=new WeakMap,Ki=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Gi=new WeakMap;const es={slide:{current:{left:{transform:{translateX:{from:0,to:-100,unit:"%"}}},right:{transform:{translateX:{from:0,to:100,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}},fade:{current:{left:{opacity:{from:1,to:0}},right:{opacity:{from:1,to:0}}},previous:{left:{opacity:{from:0,to:1}},right:{opacity:{from:0,to:1}}}},push:{current:{left:{transform:{translateX:{from:0,to:-10,unit:"%"}}},right:{transform:{translateX:{from:0,to:10,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}}};var is,ss=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ns=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class os{constructor(){is.set(this,void 0),ns(this,is,window)}init(t){var e,i;return ss(this,void 0,void 0,(function*(){let s=Object.assign(Object.assign({},new At),t.setup);const n=s.app,r={result:!1};if(it(rs(this,is)[n]))return r.message="Instance is already initialized",r;if(it(t.icons))for(let e in t.icons)f[e]=t.icons[e];if(it(t.swipeAnimations))for(let e in t.swipeAnimations)es[e]=t.swipeAnimations[e];try{rs(this,is)[n]=new ts(s,null!==(e=t.plugins)&&void 0!==e?e:[],null!==(i=t.components)&&void 0!==i?i:[]),yield rs(this,is)[n].init()}catch(t){return console.error(t),r.message="An error occured during initialization",r}return r.result=!0,r}))}}is=new WeakMap;class hs{static setLabel(t,e){t.hasAttribute("aria-label")||t.setAttribute("aria-label",e)}static setAria(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}static removeAria(t,e){t.hasAttribute(e)&&t.removeAttribute(e)}}var as,ls,cs,us=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ds=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ps{constructor(t){as.set(this,void 0),ls.set(this,void 0),cs.set(this,void 0),us(this,as,[]),us(this,ls,[]),us(this,cs,!1),t&&t.forEach(t=>{if(!it(t.key))throw us(this,as,[]),us(this,ls,[]),new r("Key is empty");this.add(t.key,t.value)})}add(t,e){this.throwOnEmptyKey(t),this.lock(()=>{if(this.containsKey(t))throw new Error("Key already exists");ds(this,as).push(t),ds(this,ls).push(e)})}remove(t){this.throwOnEmptyKey(t),this.lock(()=>{let e=ds(this,as).indexOf(t);e<0||(ds(this,as).splice(e,1),ds(this,ls).splice(e,1))})}get(t){this.throwOnEmptyKey(t);let e=void 0;return this.lock(()=>{let i=this.indexOf(t);i>=0&&(e=ds(this,ls)[i])}),e}containsKey(t){return it(t)&&this.indexOf(t)>=0}keys(){return[...ds(this,as)]}values(){return[...ds(this,ls)]}indexOf(t){return it(t)?ds(this,as).indexOf(t):-1}update(t,e){this.throwOnEmptyKey(t),this.lock(()=>{let i=this.indexOf(t);if(i<0)throw new n(`Item with key [${t}] not found`);ds(this,ls)[i]=e})}clear(){this.lock(()=>{us(this,ls,[]),us(this,as,[])})}forEach(t){this.lock(()=>{let e=ds(this,as).length;for(let i=0;i<e;i++)t(ds(this,as)[i],ds(this,ls)[i])})}checkLock(){if(ds(this,cs))throw new Error("You cannot alter dictionary when is locked!")}lock(t){this.checkLock(),us(this,cs,!0);try{t()}catch(t){throw t}finally{us(this,cs,!1)}}throwOnEmptyKey(t){if(!it(t))throw new r("Key is empty")}}as=new WeakMap,ls=new WeakMap,cs=new WeakMap;var vs,fs=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},gs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ws=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ms{constructor(){vs.set(this,void 0),gs(this,vs,new ps)}add(t){ws(this,vs).add(t.type,t)}remove(t){ws(this,vs).remove(t)}init(t){return fs(this,void 0,void 0,(function*(){let e=[];return ws(this,vs).forEach((i,s)=>e.push(s.init(t))),yield Promise.all(e),!0}))}update(t){return fs(this,void 0,void 0,(function*(){let e=[];return ws(this,vs).forEach((i,s)=>{s.update&&e.push(s.update(t))}),yield Promise.all(e),!0}))}destroy(){return fs(this,void 0,void 0,(function*(){let t=[];return ws(this,vs).forEach((e,i)=>t.push(i.destroy())),yield Promise.all(t),!0}))}}vs=new WeakMap;var ys,ks,bs,Ms,Cs,Es,Ws,Ts,As,xs,Ls=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ss=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ps=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Is{constructor(t){ys.set(this,void 0),Ss(this,ys,t)}hasClass(t,e){return!(!t||!e.classList.contains(t))}setClass(t,e){this.setClasses([t],e)}setClasses(t,e){e&&e.classList.add(...t)}setClassesAs(t,...e){Ps(this,ys).mutate(this.setClasses,this,e,t)}removeClass(t,e){this.removeClasses([t],e)}removeClasses(t,e){e&&e.classList.remove(...t)}removeClassesAs(t,...e){Ps(this,ys).mutate(this.removeClasses,this,e,t)}removeAttribute(t,e){e&&e.hasAttribute(t)&&e.removeAttribute(t)}setStyle(t,e,i){t&&t.style&&it(i)&&(t.style[e]=i)}}ys=new WeakMap;ks=new WeakMap;class Os extends class{constructor(t,e,i){var s;ks.set(this,void 0),this._log=Ht.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid,this.isLocked=!1,this.activeClassName=(null!=(s=i.setup.prefix)?s:"")+"-active",this.helper=new Is(i.interactions),Ss(this,ks,[]),this.componentName=t}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,e,i){Ps(this,ks).includes(t)||Ps(this,ks).push(t),this.utils.bus.emit(t,this.cuid,Object.assign(Object.assign({},e),{name:t,timestamp:Date.now(),source:null!=i?i:this.element}))}onEvent(t,e){return this.utils.bus.on(t,e,this.element)}detachEvent(t,e){null!=e&&(this.utils.bus.detach(t,e),e="")}getId(){return this.cuid}checkLockAndWarn(t){return!!this.isLocked&&(this._log.warning("Component is locked",t),!0)}isActive(){return this.element.classList.contains(this.activeClassName)}detachEmiitedEvents(){Ps(this,ks).forEach(t=>{this.utils.bus.detachByCuid(t,this.cuid),this._log.debug("Detaching event: "+t+" on component delete")})}registerInDebug(){this._log.registerElement(this.element,this.cuid,this.componentName)}removeFromDebug(){this._log.unregisterElement(this.cuid,this.componentName)}setDebugProperty(t,e){}logInfo(t,e){this._log.debug(t,e)}logWarning(t,e){this._log.warning(t,e)}logError(t,e,i){this._log.error(t,e),i&&this._log.exception(i,e)}}{constructor(t,e,i,s,n){super(t,e,n),bs.set(this,void 0),Ms.set(this,void 0),this.args=s,this.actionsHelper=new ni(n.interactions),this.prevArgs=void 0,this.isInitialized=!1,Ss(this,bs,i),Ss(this,Ms,new ms)}handle(t){return Ls(this,void 0,void 0,(function*(){return this.isInitialized?(this.logWarning("Trying to initialize handler again","handle"),!1):!!this.checkLock("handle")&&(this.isLocked=!0,this.registerInDebug(),this.args.parse(t),this.element.classList.contains(Ps(this,bs))||this.helper.setClassesAs(this.element,Ps(this,bs)),this.logInfo("Init","handle"),yield Ps(this,Ms).init(t),this.performLifecycleOp("onHandle",this.onHandle(),()=>{this.isLocked=!1,this.isInitialized=!0}))}))}refresh(t){return Ls(this,void 0,void 0,(function*(){return this.logInfo("Update","refresh"),this.isInitialized?!!this.checkLock("refresh")&&(this.isLocked=!0,this.prevArgs=it(e=this.args)?Object.assign({},e):null,this.args.parse(t),this._log.debug("Component update","refresh"),yield Ps(this,Ms).update(t),this.performLifecycleOp("onRefresh",this.onRefresh(),()=>{this.isLocked=!1})):(this.logError("Cannot update not initialized component","refresh"),!1);var e}))}destroy(){return Ls(this,void 0,void 0,(function*(){return this.logInfo("Destroy","destroy"),this.isInitialized?!!this.checkLock("destroy")&&(this.isLocked=!0,yield Ps(this,Ms).destroy(),this.performLifecycleOp("onRemove",this.onRemove(),()=>{this.detachEmiitedEvents(),this.removeFromDebug(),this.isInitialized=!1,this.isLocked=!1})):(this.logError("Cannot update not initialized component","destroy"),!1)}))}performAction(t,e,i,s){return Ls(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}addModule(t){Ps(this,Ms).add(t)}checkLock(t){return!this.isLocked||(this.logWarning("Handler is locked",t),!1)}performLifecycleOp(t,e,i){return Ls(this,void 0,void 0,(function*(){let s=!1;try{s=yield e}catch(e){this.logError("An exception occured in"+t,t,e)}finally{i()}return s}))}}bs=new WeakMap,Ms=new WeakMap;class Ns extends Os{constructor(t,e,i,s,n){super(t,e,i,s,n),Cs.set(this,void 0),Es.set(this,void 0),Ws.set(this,void 0),Ts.set(this,void 0),As.set(this,void 0),Ss(this,Cs,null),Ss(this,Es,null),Ss(this,Ws,null),Ss(this,As,[]),Ss(this,Ts,[])}onHandle(){return Ls(this,void 0,void 0,(function*(){return Ss(this,Cs,this.onEvent(C,this.openFromEvent.bind(this))),Ss(this,Es,this.onEvent(W,this.closeFromEvent.bind(this))),Ss(this,Ts,yi.get(this.args.openAct)),Ss(this,As,yi.get(this.args.closeAct)),this.onInit(),!0}))}onRefresh(){return Ls(this,void 0,void 0,(function*(){return this.prevArgs&&this.args.openAct===this.prevArgs.openAct||Ss(this,Ts,yi.get(this.args.openAct)),this.prevArgs&&this.args.closeAct===this.prevArgs.closeAct||Ss(this,As,yi.get(this.args.closeAct)),this.onUpdate(),!0}))}onRemove(){return Ls(this,void 0,void 0,(function*(){return this.detachEvent(W,Ps(this,Es)),this.detachEvent(C,Ps(this,Cs)),this.onDestroy(),!0}))}open(t){return Ls(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?(this.logWarning("Component is already opened"),!1):((this.args.escClose||it(this.args.keyClose))&&Ss(this,Ws,this.onEvent(N,this.onKeyClose.bind(this))),!!this.onBeforeOpen()&&(this.isLocked=!0,this.performAction(Ps(this,Ts),this.args.timeout,this.onActionFinish.bind(this,this.onAfterOpen.bind(this),E,t),()=>{this.helper.setClass(this.activeClassName,this.element),hs.setAria(this.element,"aria-expanded","true")}))))}))}close(t){return Ls(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("close")&&(this.isActive()?(this.detachEvent(N,Ps(this,Ws)),!!this.onBeforeClose()&&(this.isLocked=!0,this.performAction(Ps(this,As),this.args.timeout,this.onActionFinish.bind(this,this.onAfterClose.bind(this),T,t),()=>{this.helper.removeClass(this.activeClassName,this.element),hs.setAria(this.element,"aria-expanded","false")}))):(this.logWarning("Component is already closed"),!1))}))}performAction(t,e,i,s){return Ls(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}openFromEvent(t){this.open(t)}closeFromEvent(t){this.close(t)}onActionFinish(t,e,i){t(),this.emitEvent(e,{timestamp:Date.now(),state:i}),this.isLocked=!1}onKeyClose(t){return Ls(this,void 0,void 0,(function*(){(this.args.escClose&&"Escape"===t.event.key||it(this.args.keyClose)&&t.event.key===this.args.keyClose)&&(yield this.close("Closed by key"))}))}}Cs=new WeakMap,Es=new WeakMap,Ws=new WeakMap,Ts=new WeakMap,As=new WeakMap;class Hs extends Os{constructor(t,e,i,s,n){super(t,e,i,s,n),xs.set(this,void 0),Ss(this,xs,new ne(e)),Ps(this,xs).onMutation(this.mutation.bind(this))}onHandle(){return Ls(this,void 0,void 0,(function*(){return this.onInit(),Ps(this,xs).observe(),!0}))}onRefresh(){return Ls(this,void 0,void 0,(function*(){return Ps(this,xs).unobserve(),this.onUpdate(),Ps(this,xs).observe(),!0}))}onRemove(){return Ls(this,void 0,void 0,(function*(){return Ps(this,xs).unobserve(),this.onDestroy(),!0}))}mutation(t){this._log.debug("Element mutation","mutation"),this.onMutation(this.prepareRecords(t))}prepareRecords(t){return t.reduce((t,e)=>("childList"!==e.type||(e.addedNodes.length>0&&t.added.push(...e.addedNodes),e.removedNodes.length>0&&t.removed.push(...e.removedNodes)),t),{added:[],removed:[]})}}xs=new WeakMap;var _s,Ds,Rs,$s,Fs,Bs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};const zs={string:t=>t.trim().toLowerCase(),boolean:ft,number:t=>{const e=t.includes(".")?parseFloat(t):parseInt(t);return isNaN(e)?void 0:e}};class Vs{constructor(t){_s.set(this,void 0),Ds.set(this,void 0),Rs.set(this,void 0),$s.set(this,void 0),Bs(this,$s,null!=t?t:{}),Bs(this,_s,new Us(qs(this,$s).props)),Bs(this,Ds,{}),Bs(this,Rs,0)}parse(t){if(this.fillDefaultValues(),t)if("string"==typeof t&&qs(this,$s).main){const e=typeof this[qs(this,$s).main];this[qs(this,$s).main]=qs(this,_s).parseValue(qs(this,$s).main,t,e)}else kt(this,(e,i)=>{const s=typeof i;if(!t[e])return void(this[e]=qs(this,Ds)[e]);const n=qs(this,_s).parseValue(e,t[e],s);n&&(this[e]=n)})}fillDefaultValues(){0===qs(this,Rs)&&(kt(this,(t,e)=>{qs(this,Ds)[t]=e}),Bs(this,Rs,Object.keys(qs(this,Ds)).length))}}_s=new WeakMap,Ds=new WeakMap,Rs=new WeakMap,$s=new WeakMap;class Us{constructor(t){Fs.set(this,void 0),Bs(this,Fs,null!=t?t:{})}parseValue(t,e,i){var s,n,r;let o=qs(this,Fs)[t],h=zs[null!==(s=null==o?void 0:o.type)&&void 0!==s?s:i],a=null==h?void 0:h(e);return a?null!==(r=null===(n=null==o?void 0:o.corrector)||void 0===n?void 0:n.call(o,a))&&void 0!==r?r:a:null==o?void 0:o.default}}Fs=new WeakMap;var js,Ks=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ys=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gs{constructor(t,e,i){js.set(this,void 0),this.type="click",this.description="",Ys(this,js,i),this.element=t,this.onElementClick=this.onElementClick.bind(this),this.args=e}init(t){return Ks(this,void 0,void 0,(function*(){return this.args=t,this.element.addEventListener("click",this.onElementClick),!0}))}update(t){return Ks(this,void 0,void 0,(function*(){return this.args=t,!0}))}destroy(){return Ks(this,void 0,void 0,(function*(){return this.element.removeEventListener("click",this.onElementClick),!0}))}onClick(t){Ys(this,js,t)}onElementClick(t){Xs(this,js)&&(Xs(this,js).call(this,t),this.args.prevent&&t.preventDefault(),this.args.stopPropagation&&t.stopPropagation())}}js=new WeakMap;var Zs,Js,Qs,tn,en=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},sn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},nn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rn extends Vs{constructor(t,e){super({props:{selector:{corrector:Et},items:{corrector:Et}}}),this.animation=!1,this.single=!1,this.selector=Et(gt("> * > .{prefix}-accordion-title",t)),this.items=Et(gt("> *",t)),this.timeout=null!=e?e:300,this.prevent=!1,this.stopPropagation=!1}}class on{constructor(t){Zs.set(this,void 0),sn(this,Zs,null!=t?t:"cui"),this.attribute=nn(this,Zs)+"-accordion"}getStyle(){return null}get(t,e){return new hn(t,e,this.attribute,nn(this,Zs))}}Zs=new WeakMap;class hn extends Os{constructor(t,e,i,s){super("CuiAccordionHandler",t,i,new rn(s,e.setup.animationTime),e),Js.set(this,void 0),Qs.set(this,void 0),tn.set(this,void 0),sn(this,Qs,null),sn(this,Js,[]),sn(this,Qs,null),sn(this,tn,""),this.addModule(new Gs(t,this.args,this.onElementClick.bind(this)))}onHandle(){return en(this,void 0,void 0,(function*(){return sn(this,Qs,this.onEvent(L,this.onSwitch.bind(this))),sn(this,tn,Wt(this.args.selector)),!0}))}onRefresh(){return en(this,void 0,void 0,(function*(){return sn(this,tn,Wt(this.args.selector)),!0}))}onRemove(){return en(this,void 0,void 0,(function*(){return this.detachEvent(L,nn(this,Qs)),!0}))}switch(t){return en(this,void 0,void 0,(function*(){if(this._log.debug("Switch to: "+t),t<0||this.isLocked||!this.isInitialized)return!1;if(sn(this,Js,this.queryItems()),nn(this,Js).length<=t)return!1;this.isLocked=!0;const e=nn(this,Js)[t];return this.openCloseTarget(t,e),this.emitEvent(S,{index:t,currentTarget:e,previousTarget:null,previous:-1}),this.isLocked=!1,!0}))}openCloseTarget(t,e){this.helper.hasClass(this.activeClassName,e)?this.helper.removeClassesAs(e,this.activeClassName):this.mutate(()=>{this.args.single&&this.closeAllExcept(t),this.helper.setClass(this.activeClassName,e)})}onSwitch(t){this.switch(ut(t,-1)).then(()=>{this._log.debug("Switch from event to "+t)})}closeAllExcept(t){nn(this,Js).forEach((e,i)=>{t!==i&&this.helper.hasClass(this.activeClassName,e)&&e.classList.remove(this.activeClassName)})}onElementClick(t){let e=t.target;e.matches(nn(this,tn))&&this.fetch(()=>{let t=[...this.element.querySelectorAll(this.args.selector)];if(!it(t))return;let i=t.findIndex(t=>t===e);i>=0&&this.switch(i)})}queryItems(){return[...this.element.querySelectorAll(this.args.items)]}}Js=new WeakMap,Qs=new WeakMap,tn=new WeakMap;var an,ln=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},cn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class un{constructor(){this.length=this.to=this.from=-1,this.rtl=!1}setProperty(t){if(!t||!it(t.from)||!it(t.to))throw new a("[OpacityAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to}perform(t,e,i){if(this.to<0)return;let s=this.length*e;t.style&&(t.style.opacity=this.rtl?Math.max(this.from-s,0):Math.min(this.from+s,1))}}class dn{constructor(t){if(an.set(this,void 0),!it(t))throw new a("[PropertyAnimator] Valid property is required");this.property=t,this.length=this.to=this.from=-1,this.rtl=!1,ln(this,an,"")}setProperty(t){if(!t||!it(t.from)||!it(t.to))throw new a("[PropertyAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to,ln(this,an,t.unit)}perform(t,e,i){if(!this.property)return;let s=this.length*e;t.style&&(t.style[this.property]=this.createValue(this.rtl?this.from-s:this.from+s,cn(this,an)))}createValue(t,e){return`${t}${null!=e?e:""}`}}an=new WeakMap;class pn{constructor(){this.prop=void 0}setProperty(t){if(!t)throw new a("[TransformAnimator] Property has incorrect format");this.prop=t}build(t){let e=[];for(let i in this.prop){let s=this.prop[i],n=Math.abs(s.to-s.from),r=s.from>s.to?s.from-n*t:s.from+n*t;e.push(this.buildSingle(i,r,s.unit))}return e.join(" ")}buildSingle(t,e,i){return`${t}(${e}${i})`}perform(t,e){this.prop&&t.style&&(t.style.transform=this.build(e))}}var vn,fn,gn,wn,mn,yn,kn,bn,Mn,Cn,En,Wn,Tn,An,xn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ln=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap,new WeakMap,new WeakMap;class Sn{get(t){if(it(t))switch(t){case"opacity":return new un;case"transform":return new pn;default:return new dn(t)}}}class Pn{constructor(t){vn.set(this,void 0),fn.set(this,void 0),gn.set(this,void 0),wn.set(this,void 0),mn.set(this,void 0),yn.set(this,void 0),kn.set(this,void 0),bn.set(this,void 0),Mn.set(this,void 0),xn(this,fn,[]),xn(this,mn,void 0),xn(this,wn,void 0),xn(this,yn,null!=t&&t),xn(this,bn,new Sn),xn(this,gn,!1),xn(this,vn,void 0),xn(this,kn,!1),xn(this,Mn,void 0)}onFinish(t){xn(this,vn,t)}setAnimators(t){xn(this,fn,t)}setProps(t){if(it(t)){xn(this,fn,[]);try{for(let e in t){let i=Ln(this,bn).get(e);if(!i)return;i.setProperty(t[e]),Ln(this,fn).push(i)}}catch(t){this.reportError(t)}}}setElement(t){xn(this,mn,t)}setOnError(t){xn(this,Mn,t)}animate(t,e,i){if(Ln(this,gn))return;if(!Ln(this,mn)||0===Ln(this,fn).length)return void this.reportError(new Error("Animation cannot be performed: element or animators are not set"));let s=null!=e?e:0,n=i||!1;xn(this,gn,!0),requestAnimationFrame(this.animateAsync.bind(this,t,s,n))}isLocked(){return Ln(this,gn)}animateAsync(t,e,i,s){Ln(this,wn)||xn(this,wn,s);let n=s-Ln(this,wn),r=n/t,o=0;o=0===e?r:i?e-r*e:e+r*e,this.callUpdate(i?Math.max(o,0):Math.min(o,1),1),n<t&&!Ln(this,kn)?requestAnimationFrame(this.animateAsync.bind(this,t,e,i)):this.endAnimation(i)}endAnimation(t){Ln(this,yn)&&Ln(this,mn)&&Ln(this,mn).removeAttribute("style"),Ln(this,vn)&&Ln(this,vn).call(this,Ln(this,mn),t,Ln(this,kn)),xn(this,kn,!1),xn(this,wn,void 0),xn(this,gn,!1)}callUpdate(t,e){try{Ln(this,fn).forEach(i=>i.perform(Ln(this,mn),t,e))}catch(t){this.reportError(t),xn(this,kn,!0)}}reportError(t){Ln(this,Mn)?Ln(this,Mn).call(this,t):(console.error("An error occured in CuiAnimtionEngine"),console.error(t))}}vn=new WeakMap,fn=new WeakMap,gn=new WeakMap,wn=new WeakMap,mn=new WeakMap,yn=new WeakMap,kn=new WeakMap,bn=new WeakMap,Mn=new WeakMap;class In{constructor(t){Cn.set(this,void 0),En.set(this,void 0),Wn.set(this,void 0),Tn.set(this,void 0),An.set(this,void 0),xn(this,Cn,void 0),xn(this,En,[]),xn(this,Wn,new Pn(t)),xn(this,Tn,new Sn),xn(this,An,void 0)}setElement(t){xn(this,Cn,t)}setOnFinish(t){Ln(this,Wn).onFinish(t)}setOnError(t){xn(this,An,t),Ln(this,Wn).setOnError(t)}setProps(t){if(it(t)){xn(this,En,[]);try{for(let e in t){let i=Ln(this,Tn).get(e);if(!i)return;i.setProperty(t[e]),Ln(this,En).push(i)}}catch(t){this.reportError(t)}}}update(t){Ln(this,Cn)&&0!==Ln(this,En).length&&Ln(this,En).forEach(e=>e.perform(Ln(this,Cn),Math.min(t,1),1))}updateAsync(t){requestAnimationFrame(this.update.bind(this,t))}finish(t,e,i){Ln(this,Cn)&&Ln(this,Wn).setElement(Ln(this,Cn)),Ln(this,Wn).setAnimators(Ln(this,En)),Ln(this,Wn).animate(e,t,i)}reportError(t){Ln(this,An)?Ln(this,An).call(this,t):console.log(t)}}Cn=new WeakMap,En=new WeakMap,Wn=new WeakMap,Tn=new WeakMap,An=new WeakMap;var On,Nn,Hn,_n,Dn,Rn,$n,Fn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qn extends Vs{constructor(t,e){super(),this.escClose=!1,this.keyClose="",this.timeout=null!=e?e:300,this.swipe=!1,this.openAct=gt(".{prefix}-animation-fade-in",t),this.closeAct=gt(".{prefix}-animation-fade-out",t)}}class zn{constructor(t){On.set(this,void 0),Fn(this,On,null!=t?t:"cui"),this.attribute=Bn(this,On)+"-banner"}getStyle(){return null}get(t,e){return new Vn(t,e,this.attribute,Bn(this,On))}}On=new WeakMap;class Vn extends Ns{constructor(t,e,i,s){super("CuiBannerHandler",t,i,new qn(s,e.setup.animationTime),e),Nn.set(this,void 0),Hn.set(this,void 0),_n.set(this,void 0),Dn.set(this,void 0),Rn.set(this,void 0),$n.set(this,void 0),Fn(this,Nn,new In(!0)),Bn(this,Nn).setOnFinish(this.onSwipeFinish.bind(this)),Bn(this,Nn).setElement(this.element),Fn(this,_n,-1),Fn(this,Dn,0),Fn(this,Rn,es.fade),Fn(this,$n,null),Fn(this,Hn,!1)}onInit(){}onUpdate(){}onDestroy(){this.detachEvent($,Bn(this,$n))}onBeforeOpen(){return!0}onAfterOpen(){this.args.swipe&&Fn(this,$n,this.onEvent($,this.onMove.bind(this)))}onAfterClose(){this.detachEvent($,Bn(this,$n))}onBeforeClose(){return!0}onMove(t){if(this.isLocked)return;let e=this.element;switch(t.type){case"down":if(Bn(this,Hn)||!e.contains(t.target))return;Fn(this,Hn,!0),Fn(this,_n,t.x),this.helper.setClassesAs(document.body,v),t.event.preventDefault();break;case"up":if(!Bn(this,Hn)&&0==Bn(this,Dn))break;let i=Math.abs(Bn(this,Dn)),s=i*this.args.timeout,n=i<=.4;this.isLocked=!0,Bn(this,Nn).finish(i,s,n),this.helper.removeClassesAs(document.body,v),Fn(this,Hn,!1);break;case"move":if(Bn(this,Hn)){let i=(t.x-Bn(this,_n))/e.offsetWidth;(Bn(this,Dn)>=0&&i<=0||Bn(this,Dn)<=0&&i>0)&&Bn(this,Nn).setProps(i>0?Bn(this,Rn).current.right:Bn(this,Rn).current.left),Fn(this,Dn,i),this.mutate(()=>{Bn(this,Nn).update(Math.abs(Bn(this,Dn)))}),t.event.preventDefault()}}}onSwipeFinish(t,e,i){this.isLocked=!1,e||(this.helper.removeClass(this.activeClassName,this.element),hs.setAria(this.element,"aria-expanded","false")),Fn(this,Dn,0),Fn(this,_n,0)}}Nn=new WeakMap,Hn=new WeakMap,_n=new WeakMap,Dn=new WeakMap,Rn=new WeakMap,$n=new WeakMap;var Un,jn,Kn,Yn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gn{constructor(t){Un.set(this,void 0),jn.set(this,void 0),Kn.set(this,void 0),Yn(this,Un,t),Yn(this,jn,1),Yn(this,Kn,new Zn)}setScale(t){return Yn(this,jn,t),this}build(){let t=function(t){if(!it(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}(Xn(this,Un));return it(t)&&Xn(this,jn)&&Xn(this,Kn).append(t,Xn(this,jn)),t}}Un=new WeakMap,jn=new WeakMap,Kn=new WeakMap;class Zn{append(t,e){let i=ut(t.getAttribute("width"),20),s=ut(t.getAttribute("height"),20);t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var Jn,Qn,tr,er,ir,sr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},nr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class or extends Vs{constructor(){super(),this.progress=0}}class hr{constructor(t){this.attribute=(null!=t?t:"cui")+"-circle-progress",f.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new ar(t,e,this.attribute)}}class ar extends Os{constructor(t,e,i){super("CuiCircleHandler",t,i,new or,e),Jn.set(this,void 0),Qn.set(this,void 0),tr.set(this,void 0),er.set(this,void 0),ir.set(this,void 0),nr(this,Jn,nr(this,Qn,0)),nr(this,tr,null),nr(this,er,i),nr(this,ir,null)}onHandle(){return sr(this,void 0,void 0,(function*(){const t=new Gn(f.special_circle_progress).build();if(!it(t))return this.logError("SVG circle was not created","onInit"),!1;const e=this.element.querySelector("svg");return it(e)&&e.remove(),this.element.appendChild(t),nr(this,tr,this.element.querySelector(".circle-progress-path")),nr(this,Qn,rr(this,tr).getTotalLength()),nr(this,Jn,rr(this,Qn)/100),this.fetch(this.readStyle),nr(this,ir,this.onEvent(D,this.onSetProgress.bind(this))),!0}))}onRefresh(){return sr(this,void 0,void 0,(function*(){return this.fetch(this.readStyle),this.emitEvent(R,{timestamp:Date.now(),progress:this.args.progress}),!0}))}onRemove(){return sr(this,void 0,void 0,(function*(){return this.detachEvent(D,rr(this,ir)),!0}))}onSetProgress(t){it(t)&&this.element.setAttribute(rr(this,er),t)}updateStyle(t){rr(this,tr).style.strokeDashoffset=t}readStyle(){if(this.prevArgs&&this.args.progress===this.prevArgs.progress)return;const t=rt(this.args.progress,0,100);this.mutate(this.updateStyle,rr(this,Qn)-rr(this,Jn)*t)}}Jn=new WeakMap,Qn=new WeakMap,tr=new WeakMap,er=new WeakMap,ir=new WeakMap;var lr,cr,ur=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},dr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class vr extends Vs{constructor(t){super({main:"target"}),this.target="",this.action="",this.prevent=!1,this.stopPropagation=!1,this.state="",this.timeout=null!=t?t:300}}class fr{constructor(t){lr.set(this,void 0),dr(this,lr,null!=t?t:"cui"),this.attribute=pr(this,lr)+"-close"}getStyle(){return null}get(t,e){return new gr(t,e,this.attribute,pr(this,lr))}}lr=new WeakMap;class gr extends Os{constructor(t,e,i,s){super("CuiCloseHandler",t,i,new vr(e.setup.animationTime),e),cr.set(this,void 0),dr(this,cr,null),this.addModule(new Gs(this.element,this.args,this.onClose.bind(this)))}onHandle(){return ur(this,void 0,void 0,(function*(){return dr(this,cr,this.onEvent(W,this.onClose.bind(this))),!0}))}onRefresh(){return ur(this,void 0,void 0,(function*(){return!0}))}onRemove(){return ur(this,void 0,void 0,(function*(){return this.detachEvent(W,pr(this,cr)),!0}))}onClose(t){if(this.isLocked)return;const e=this.getTarget();it(e)?(this.isLocked=!0,this.run(e).then(e=>{e&&this.emitClose(t)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return ur(this,void 0,void 0,(function*(){let e=t.$cuid;if(it(e))return yield this.utils.bus.emit(W,e,this.args.state),!1;if(at(this.args.action,this.args.timeout)){let e=yi.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.helper.removeClass(this.activeClassName,t)})}return this.helper.removeClassesAs(t,this.activeClassName),!0}))}getTarget(){var t;return it(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:mt(this.element)}emitClose(t){this.emitEvent(T,{state:this.args.state,event:t})}}cr=new WeakMap;var wr,mr,yr,kr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},br=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Mr extends Vs{constructor(t,e){super(),this.escClose=!1,this.timeout=null!=e?e:300,this.openAct=gt(".{prefix}-dialog-default-in",t),this.closeAct=gt(".{prefix}-dialog-default-out",t),this.keyClose=""}}class Cr{constructor(t){wr.set(this,void 0),kr(this,wr,null!=t?t:"cui"),this.attribute=br(this,wr)+"-cover"}getStyle(){return null}get(t,e){return new Er(t,e,this.attribute,br(this,wr))}}wr=new WeakMap;class Er extends Ns{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new Mr(s,e.setup.animationTimeLong),e),mr.set(this,void 0),yr.set(this,void 0),kr(this,mr,gt("{prefix}-cover-open",s)),kr(this,yr,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){hs.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(kr(this,yr,window.pageYOffset),!0)}onAfterOpen(){this.helper.setClass(br(this,mr),document.body),document.body.style.top=`-${br(this,yr)}px`,hs.setAria(this.element,"aria-hidden","false")}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(br(this,yr)||0)),kr(this,yr,0),this.helper.removeClass(br(this,mr),document.body),hs.setAria(this.element,"aria-hidden","true")}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(br(this,mr),document.body)}}mr=new WeakMap,yr=new WeakMap;var Wr,Tr,Ar,xr,Lr,Sr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ir extends Vs{constructor(t,e){super(),this.escClose=!1,this.outClose=!1,this.timeout=null!=e?e:300,this.openAct=gt(".{prefix}-dialog-default-in",t),this.closeAct=gt(".{prefix}-dialog-default-out",t),this.keyClose=""}}class Or{constructor(t){Wr.set(this,void 0),Sr(this,Wr,null!=t?t:"cui"),this.attribute=Pr(this,Wr)+"-dialog"}getStyle(){return null}get(t,e){return new Nr(t,e,this.attribute,Pr(this,Wr))}}Wr=new WeakMap;class Nr extends Ns{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new Ir(s,e.setup.animationTimeLong),e),Tr.set(this,void 0),Ar.set(this,void 0),xr.set(this,void 0),Lr.set(this,void 0),Sr(this,Ar,gt("{prefix}-dialog-open",s)),Sr(this,Tr,s),Sr(this,xr,0),Sr(this,Lr,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){hs.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Sr(this,xr,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&Sr(this,Lr,this.onEvent(H,this.onWindowClick.bind(this))),this.helper.setClass(Pr(this,Ar),document.body),document.body.style.top=`-${Pr(this,xr)}px`}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(Pr(this,xr)||0)),Sr(this,xr,0),this.helper.removeClass(Pr(this,Ar),document.body),this.detachEvent(H,Pr(this,Lr))}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(Pr(this,Ar),document.body)}onWindowClick(t){let e=this.element.querySelector(gt(".{prefix}-dialog-container",Pr(this,Tr)));e&&!e.contains(t.ev.target)&&this.close("out").then(()=>{this._log.debug("Closed by click outside")})}}Tr=new WeakMap,Ar=new WeakMap,xr=new WeakMap,Lr=new WeakMap;var Hr,_r,Dr,Rr,$r,Fr,Br,qr,zr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Vr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ur{constructor(t){Hr.set(this,void 0),_r.set(this,void 0),Dr.set(this,void 0),Rr.set(this,void 0),$r.set(this,void 0),Fr.set(this,void 0),Br.set(this,void 0),qr.set(this,void 0),zr(this,Hr,t),zr(this,Dr,!1),zr(this,Rr,!1),zr(this,$r,!1),zr(this,_r,void 0),zr(this,Br,this.onMouseMove.bind(this)),zr(this,qr,this.onMouseOut.bind(this)),zr(this,Fr,this.onMouseOver.bind(this))}setCallback(t){zr(this,_r,t)}isInProgress(){return Vr(this,Dr)}attach(){Vr(this,Hr).addEventListener("mouseover",Vr(this,Fr)),Vr(this,Hr).addEventListener("mousemove",Vr(this,Br)),Vr(this,Hr).addEventListener("mouseout",Vr(this,qr)),zr(this,$r,!0)}detach(){Vr(this,Hr).removeEventListener("mouseover",Vr(this,Fr)),Vr(this,Hr).removeEventListener("mousemove",Vr(this,Br)),Vr(this,Hr).removeEventListener("mouseout",Vr(this,qr)),zr(this,$r,!1)}emit(t,e){at(Vr(this,_r))&&(!e&&Vr(this,Dr)||(zr(this,Dr,!0),window.requestAnimationFrame(this.invoke.bind(this,{isHovering:Vr(this,Rr),event:t,timestamp:Date.now()}))))}isAttached(){return Vr(this,$r)}invoke(t){Vr(this,_r)&&Vr(this,_r).call(this,t),zr(this,Dr,!1)}onMouseOver(t){zr(this,Rr,!0),this.emit(t,!0)}onMouseOut(t){zr(this,Rr,!1),this.emit(t,!0)}onMouseMove(t){this.emit(t,!1)}}Hr=new WeakMap,_r=new WeakMap,Dr=new WeakMap,Rr=new WeakMap,$r=new WeakMap,Fr=new WeakMap,Br=new WeakMap,qr=new WeakMap;var jr,Kr,Yr,Xr,Gr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Jr{constructor(){jr.set(this,void 0),Kr.set(this,void 0),Yr.set(this,void 0),Xr.set(this,void 0),Gr(this,Yr,-1),Gr(this,Kr,-1),Gr(this,jr,void 0),Gr(this,Xr,0)}setElementBox(t){Gr(this,jr,t)}setTarget(t){Gr(this,Kr,t.width),Gr(this,Yr,t.height)}setMargin(t){Gr(this,Xr,t)}getVerticalPosition(t){switch(t){case"top":return this.getTopPosition();case"bottom":return this.getBottomPosition();case"middle":return this.getMiddlePosition();default:return-1}}getHorizontalPosition(t){switch(t){case"left":return this.getLeftPosition();case"right":return this.getRightPosition();case"center":return this.getCenterPosition();default:return-1}}getAutoVerticalPosition(t){let e=window.innerHeight,i=this.getVerticalPosition(t);return("top"===t||"middle"===t)&&i<0?[this.getVerticalPosition("bottom"),"bottom"]:("bottom"===t||"middle"===t)&&i+Zr(this,Yr)>e?[this.getVerticalPosition("top"),"top"]:[i,t]}getAutoHorizontalPosition(t){let e=window.innerWidth,i=this.getHorizontalPosition(t);return("right"===t||"center"===t)&&i<0?[this.getHorizontalPosition("left"),"left"]:("left"===t||"center"===t)&&i+Zr(this,Kr)>e?[this.getHorizontalPosition("right"),"right"]:[i,t]}getTopPosition(){return this.throwIfNotValid("getTopPosition"),Zr(this,jr).top-Zr(this,Xr)-Zr(this,Yr)}getBottomPosition(){return this.throwIfNotValid("getBottomPosition"),Zr(this,jr).top+Zr(this,jr).height+Zr(this,Xr)}getMiddlePosition(){return this.throwIfNotValid("getMiddlePosition"),Zr(this,jr).top+Zr(this,jr).height/2-Zr(this,Yr)/2}getLeftPosition(){return this.throwIfNotValid("getLeftPosition"),Zr(this,jr).left}getRightPosition(){return this.throwIfNotValid("getRightPosition"),Zr(this,jr).left+Zr(this,jr).width-Zr(this,Kr)}getCenterPosition(){return this.throwIfNotValid("getCenterPosition"),Zr(this,jr).left+Zr(this,jr).width/2-Zr(this,Kr)/2}validate(){return it(Zr(this,jr))&&Zr(this,Yr)>0&&Zr(this,Kr)>0}throwIfNotValid(t){if(!this.validate())throw new c(`[${t}] Position cannot be calculated: missing data [width: ${Zr(this,Kr)}][height: ${Zr(this,Yr)}]`)}}jr=new WeakMap,Kr=new WeakMap,Yr=new WeakMap,Xr=new WeakMap;var Qr,to,eo,io,so=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},no=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ro{constructor(t){Qr.set(this,void 0),to.set(this,void 0),eo.set(this,void 0),io.set(this,void 0),so(this,to,"top-center"),so(this,Qr,""),so(this,eo,null!=t?t:new Jr),so(this,io,Ht.get("CuiBasePositionCalculator"))}setMargin(t){no(this,eo).setMargin(t)}setPreferred(t){so(this,to,t)}setStatic(t){so(this,Qr,t)}calculate(t,e){if(no(this,eo).setElementBox(t),no(this,eo).setTarget(e),it(no(this,Qr))){no(this,io).debug("Evaluating static position");const[t,e]=this.parse(no(this,Qr));return[no(this,eo).getHorizontalPosition(e),no(this,eo).getVerticalPosition(t),no(this,Qr)]}let[i,s]=["",""];it(no(this,to))&&(no(this,io).debug("Evaluating auto position"),[i,s]=this.parse(no(this,to))),i=null!=i?i:"top",s=null!=s?s:"center",no(this,io).debug("Calculating position: "+i+"-"+s);const[n,r]=no(this,eo).getAutoVerticalPosition(i),[o,h]=no(this,eo).getAutoHorizontalPosition(s);return no(this,io).debug("Calculated position: "+r+"-"+h),[o,n,r+"-"+h]}parse(t){return t.split("-")}}Qr=new WeakMap,to=new WeakMap,eo=new WeakMap,io=new WeakMap;var oo,ho,ao,lo,co=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},uo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class po{constructor(t,e,i){oo.set(this,void 0),ho.set(this,void 0),ao.set(this,void 0),lo.set(this,void 0),co(this,ho,e),co(this,ao,t),co(this,lo,i)}start(){this.canRun()&&(this.stop(),co(this,oo,setTimeout(()=>{uo(this,lo).call(this),co(this,oo,null),uo(this,ho)&&this.start()},uo(this,ao))))}stop(){uo(this,oo)&&(clearTimeout(uo(this,oo)),co(this,oo,null))}getId(){return uo(this,oo)}canRun(){return it(uo(this,lo))&&uo(this,ao)>0}setCallback(t){co(this,lo,t)}setTimeout(t){co(this,ao,t)}}oo=new WeakMap,ho=new WeakMap,ao=new WeakMap,lo=new WeakMap;var vo,fo,go=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},wo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class yo{constructor(t,e){vo.set(this,void 0),fo.set(this,void 0),this.type="hover",this.description="",wo(this,fo,e),wo(this,vo,new Ur(t)),mo(this,vo).setCallback(this.onHover.bind(this))}init(t){return go(this,void 0,void 0,(function*(){return mo(this,vo).attach(),!0}))}destroy(){return go(this,void 0,void 0,(function*(){return mo(this,vo).detach(),!0}))}onHover(t){mo(this,fo).call(this,t)}}vo=new WeakMap,fo=new WeakMap;var ko,bo,Mo,Co,Eo,Wo,To,Ao,xo,Lo,So,Po,Io,Oo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},No=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ho=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _o extends Vs{constructor(t){super({props:{trigger:{corrector:Et}}}),this.mode="click",this.trigger=Et("> a, button"),this.autoClose=!1,this.outClose=!0,this.prevent=!1,this.pos="",this.action=gt("{prefix}-drop-animation-in",t),this.timeout=3e3,this.margin=8}}class Do{constructor(t){ko.set(this,void 0),No(this,ko,null!=t?t:"cui"),this.attribute=Ho(this,ko)+"-drop"}getStyle(){return null}get(t,e){return new Ro(t,e,this.attribute,Ho(this,ko))}}ko=new WeakMap;class Ro extends Os{constructor(t,e,i,s){super("CuidropHandler",t,i,new _o(s),e),bo.set(this,void 0),Mo.set(this,void 0),Co.set(this,void 0),Eo.set(this,void 0),Wo.set(this,void 0),To.set(this,void 0),Ao.set(this,void 0),xo.set(this,void 0),Lo.set(this,void 0),So.set(this,void 0),Po.set(this,void 0),Io.set(this,void 0),No(this,Co,i),No(this,bo,s),No(this,Mo,gt("{prefix}-drop-open",s)),No(this,To,null),No(this,Ao,null),No(this,xo,null),this.onTriggerClick=this.onTriggerClick.bind(this),No(this,Lo,new ro),Ho(this,Lo).setMargin(8),Ho(this,Lo).setPreferred("bottom-left"),No(this,So,""),No(this,Eo,void 0),No(this,Wo,this.element),No(this,Io,[]),No(this,Po,new po(this.args.timeout,!1,this.close.bind(this))),e.isPlugin("click-plugin")||this.logWarning("Window click plugin is not available: outClose will not work"),this.addModule(new yo(this.element,this.onElementHover.bind(this)))}onHandle(){return Oo(this,void 0,void 0,(function*(){return No(this,Wo,this.acquireTrigger()),No(this,Eo,new Ur(Ho(this,Wo))),Ho(this,Eo).setCallback(this.onHoverEvent.bind(this)),Ho(this,Eo).attach(),Ho(this,Wo).addEventListener("click",this.onTriggerClick),No(this,Ao,this.onEvent(C,this.open.bind(this))),No(this,xo,this.onEvent(W,this.close.bind(this))),this.setDataFromArgs(),this.mutate(()=>{hs.setAria(this.element,"aria-dropdown","")}),!0}))}onRefresh(){return Oo(this,void 0,void 0,(function*(){return this.prevArgs&&this.args.trigger!==this.prevArgs.trigger&&(Ho(this,Eo)&&Ho(this,Eo).isAttached()?Ho(this,Eo).detach():this.prevArgs&&"click"===this.prevArgs.mode&&Ho(this,Wo).removeEventListener("click",this.onTriggerClick),No(this,Wo,this.acquireTrigger()),No(this,Eo,new Ur(Ho(this,Wo))),Ho(this,Eo).setCallback(this.onHoverEvent.bind(this)),Ho(this,Eo).attach(),Ho(this,Wo).addEventListener("click",this.onTriggerClick)),this.setDataFromArgs(),!0}))}onRemove(){return Oo(this,void 0,void 0,(function*(){return this.detachEvent(C,Ho(this,Ao)),this.detachEvent(W,Ho(this,xo)),!0}))}setDataFromArgs(){Ho(this,Lo).setStatic(this.args.pos),Ho(this,Lo).setMargin(this.args.margin),Ho(this,Po).setTimeout(this.args.timeout),No(this,Io,yi.get(this.args.action))}open(){return Oo(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?this.close():(this.isAnyActive()&&(yield this.findAndCloseOpenedDrop()),this._log.debug("Drop "+this.cuid,"open"),this.onOpen(),!0))}))}close(){return Oo(this,void 0,void 0,(function*(){return!(this.checkLockAndWarn("close")||!this.isActive())&&(this.logInfo("Drop "+this.cuid,"close"),this.onClose(),this.emitEvent(T,{timestamp:Date.now()}),!0)}))}onOpen(){this.isLocked=!0,this.helper.setClass(this.activeClassName,this.element),this.mutate(()=>{const t=Ho(this,Wo).getBoundingClientRect();try{const[e,i,s]=Ho(this,Lo).calculate(t,this.element.getBoundingClientRect());this.element.style.top=i-t.top+"px",this.element.style.left=e-t.left+"px",No(this,So,gt("{prefix}-drop-position-"+s,Ho(this,bo))),this.toggleActions(),this.helper.setClass(Ho(this,So),this.element),this.helper.setClass(Ho(this,Mo),document.body),this.emitEvent(E,{timestamp:Date.now()}),this.runAutoCloseTask(),hs.setAria(this.element,"aria-expanded","true"),No(this,To,this.onEvent(H,this.onWindowClick.bind(this)))}catch(t){this._log.exception(t)}finally{this.isLocked=!1}})}onClose(){this.isLocked=!0,this.mutate(()=>{this.helper.removeClass(this.activeClassName,this.element),this.helper.removeClass(Ho(this,Mo),document.body),this.toggleActions(),this.helper.removeClass(Ho(this,So),this.element),hs.setAria(this.element,"aria-expanded","false"),this.detachEvent(H,Ho(this,To)),this.isLocked=!1})}onWindowClick(t){this.args.outClose&&(this.element.contains(t.ev.target)||this.close())}isAnyActive(){return this.helper.hasClass(Ho(this,Mo),document.body)}findAndCloseOpenedDrop(){return Oo(this,void 0,void 0,(function*(){const t=document.querySelector(`[${Ho(this,Co)}].${this.activeClassName}`);if(!it(t))return this._log.warning("Opened drop was not found"),!1;const e=t.$handlers[Ho(this,Co)];return it(e)?e.close():(this._log.warning("Drop handler was not found in the element"),!1)}))}onTriggerClick(t){"click"===this.args.mode&&(this.isActive()?this.close():this.open())}onHoverEvent(t){"hover"===this.args.mode&&t.isHovering&&!this.isActive()&&this.open()}onElementHover(t){t.isHovering?Ho(this,Po).stop():!t.isHovering&&this.args.autoClose&&this.runAutoCloseTask()}runAutoCloseTask(){this.args.autoClose&&Ho(this,Po).start()}toggleActions(){Ho(this,Io).forEach(t=>{t.toggle(this.element)})}acquireTrigger(){let t=null;return t=this.element.parentElement?this.element.parentElement.querySelector(this.args.trigger):document.querySelector(this.args.trigger),null!=t?t:this.element}}bo=new WeakMap,Mo=new WeakMap,Co=new WeakMap,Eo=new WeakMap,Wo=new WeakMap,To=new WeakMap,Ao=new WeakMap,xo=new WeakMap,Lo=new WeakMap,So=new WeakMap,Po=new WeakMap,Io=new WeakMap;var $o,Fo,Bo,qo,zo,Vo,Uo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ko{constructor(t){$o.set(this,void 0),Fo.set(this,void 0),Bo.set(this,void 0),qo.set(this,void 0),zo.set(this,void 0),Vo.set(this,void 0),Uo(this,Bo,!1),Uo(this,$o,null!=t?t:document.body),Uo(this,qo,!1),Uo(this,zo,!1),Uo(this,Fo,void 0),Uo(this,Vo,void 0),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this)}setCallback(t){Uo(this,Fo,t)}setTarget(t){Uo(this,Vo,t)}isInProgress(){return jo(this,Bo)}preventDefault(t){Uo(this,zo,t)}attach(){jo(this,qo)||(jo(this,$o).addEventListener("mousedown",this.onMouseDown,{passive:!1}),jo(this,$o).addEventListener("mouseup",this.onMouseUp,{passive:!1}),jo(this,$o).addEventListener("mousemove",this.onMouseMove,{passive:!1}),jo(this,$o).addEventListener("touchstart",this.onTouchStart,{passive:!1}),jo(this,$o).addEventListener("touchend",this.onTouchEnd,{passive:!1}),jo(this,$o).addEventListener("touchmove",this.onTouchMove,{passive:!1}),Uo(this,qo,!0))}detach(){jo(this,qo)&&(jo(this,$o).removeEventListener("mousedown",this.onMouseDown,{passive:!1}),jo(this,$o).removeEventListener("mouseup",this.onMouseUp,{passive:!1}),jo(this,$o).removeEventListener("mousemove",this.onMouseMove,{passive:!1}),jo(this,$o).removeEventListener("touchstart",this.onTouchStart,{passive:!1}),jo(this,$o).removeEventListener("touchend",this.onTouchEnd,{passive:!1}),jo(this,$o).removeEventListener("touchmove",this.onTouchMove,{passive:!1}),Uo(this,qo,!1))}isAttached(){return jo(this,qo)}onMouseDown(t){jo(this,Bo)||jo(this,Vo)&&!jo(this,Vo).contains(t.target)||(Uo(this,Bo,!0),this.publishMouseEvent("down",t))}onMouseUp(t){jo(this,Bo)&&(Uo(this,Bo,!1),this.publishMouseEvent("up",t))}onMouseMove(t){jo(this,Bo)&&this.publishMouseEvent("move",t)}onTouchStart(t){jo(this,Bo)||jo(this,Vo)&&!jo(this,Vo).contains(t.target)||(Uo(this,Bo,!0),this.publishTouchEvent("down",t))}onTouchEnd(t){jo(this,Bo)&&(Uo(this,Bo,!1),this.publishTouchEvent("up",t))}onTouchMove(t){jo(this,Bo)&&this.publishTouchEvent("move",t)}publishMouseEvent(t,e){jo(this,zo)&&e.cancelable&&e.preventDefault(),it(jo(this,Fo))&&jo(this,Fo).call(this,{type:t,x:e.clientX,y:e.clientY,moveX:e.movementX,moveY:e.movementY,target:e.target,event:e})}publishTouchEvent(t,e){if(jo(this,zo)&&e.cancelable&&e.preventDefault(),!it(jo(this,Fo)))return;let i=null;e.touches.length>0?i=e.touches[0]:e.changedTouches.length>0&&(i=e.changedTouches[0]),jo(this,Fo).call(this,{event:e,type:t,target:e.target,x:it(i)?i.clientX:-1,y:it(i)?i.clientY:-1,moveX:-1,moveY:-1})}}$o=new WeakMap,Fo=new WeakMap,Bo=new WeakMap,qo=new WeakMap,zo=new WeakMap,Vo=new WeakMap;var Yo,Xo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Go=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Zo{calculate(t,e,i,s){return[t,e]}}new WeakMap;class Jo{constructor(t){Yo.set(this,void 0),Xo(this,Yo,t)}calculate(t,e,i,s){return[t-Go(this,Yo).offsetLeft,e-Go(this,Yo).offsetTop]}}Yo=new WeakMap;new WeakMap;var Qo,th,eh,ih,sh,nh,rh,oh,hh,ah,lh,ch=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},uh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dh extends Vs{constructor(t,e){super(),this.escClose=!1,this.keyClose="",this.openAct=gt(".{prefix}-float-default-in",t),this.closeAct=gt(".{prefix}-float-default-out",t),this.timeout=null!=e?e:300}}class ph{constructor(t){Qo.set(this,void 0),ch(this,Qo,null!=t?t:"cui"),this.attribute=uh(this,Qo)+"-float"}getStyle(){return null}get(t,e){return new vh(t,e,this.attribute,uh(this,Qo))}}Qo=new WeakMap;class vh extends Ns{constructor(t,e,i,s){super("CuiFloatHandler",t,i,new dh(s,e.setup.animationTime),e),th.set(this,void 0),eh.set(this,void 0),ih.set(this,void 0),sh.set(this,void 0),nh.set(this,void 0),rh.set(this,void 0),oh.set(this,void 0),hh.set(this,void 0),ah.set(this,void 0),lh.set(this,void 0),ch(this,th,!1),ch(this,eh,!1),ch(this,ih,0),ch(this,sh,0),ch(this,rh,new Ko),uh(this,rh).preventDefault(!1),ch(this,oh,new Zo),ch(this,hh,new Jo(t)),ch(this,nh,s),this.move=this.move.bind(this),this.resize=this.resize.bind(this),ch(this,lh,null),ch(this,ah,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){hs.setAria(this.element,"aria-modal",""),ch(this,lh,this.element.querySelector(gt(".{prefix}-float-move",uh(this,nh)))),ch(this,ah,this.element.querySelector(gt(".{prefix}-float-resize",uh(this,nh)))),uh(this,rh).setCallback(this.onMove.bind(this))}onUpdate(){}onDestroy(){}onBeforeOpen(){return!0}onAfterOpen(){uh(this,rh).attach()}onAfterClose(){uh(this,rh).detach()}onBeforeClose(){return!0}onMove(t){switch(t.type){case"down":this.onMouseDown(t);break;case"up":this.onMouseUp(t);break;case"move":this.onMouseMove(t)}}onMouseDown(t){t.target===uh(this,lh)?(ch(this,th,!0),t.event.preventDefault()):t.target===uh(this,ah)&&(ch(this,eh,!0),t.event.preventDefault()),ch(this,ih,t.x),ch(this,sh,t.y),this.helper.setClassesAs(document.body,v),this.utils.bus.emit(F,null,!0)}onMouseMove(t){uh(this,th)?this.peform(t,this.move):uh(this,eh)&&this.peform(t,this.resize)}onMouseUp(t){ch(this,th,!1),ch(this,eh,!1),this.helper.removeClassesAs(document.body,v),this.utils.bus.emit(F,null,!1)}peform(t,e){this.mutate(()=>{it(e)&&e(this.element,t.x,t.y,t.x-uh(this,ih),t.y-uh(this,sh)),ch(this,ih,t.x),ch(this,sh,t.y)}),t.event.preventDefault()}resize(t,e,i,s,n){let[r,o]=uh(this,hh).calculate(e,i,s,n);this.fitsWindow(t.offsetTop,t.offsetLeft,r,o)&&this.mutate(()=>{t.style.width=r+"px",t.style.height=o+"px"})}move(t,e,i,s,n){let[r,o]=uh(this,oh).calculate(e,i,s,n);this.fitsWindow(o,r,t.offsetWidth,t.offsetHeight)&&this.mutate(()=>{t.style.left=r+"px",t.style.top=o+"px"})}fitsWindow(t,e,i,s){return t+s<window.innerHeight-10&&t>10&&e>10&&e+i<window.innerWidth-10}}th=new WeakMap,eh=new WeakMap,ih=new WeakMap,sh=new WeakMap,nh=new WeakMap,rh=new WeakMap,oh=new WeakMap,hh=new WeakMap,ah=new WeakMap,lh=new WeakMap;var fh,gh=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},wh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class yh extends Vs{constructor(){super({main:"icon"}),this.icon="",this.scale=1}}class kh{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new bh(t,e,this.attribute)}}class bh extends Os{constructor(t,e,i){super("CuiIconHandler",t,i,new yh,e),fh.set(this,void 0),wh(this,fh,null)}onHandle(){return gh(this,void 0,void 0,(function*(){return null!==mh(this,fh)?(this._log.debug("Icon already initialized"),!1):(wh(this,fh,this.args.icon),this.addIcon(this.args.icon),!0)}))}onRefresh(){return gh(this,void 0,void 0,(function*(){return this.args.icon!==mh(this,fh)&&(wh(this,fh,this.args.icon),this.addIcon(this.args.icon),!0)}))}onRemove(){return gh(this,void 0,void 0,(function*(){const t=this.element.querySelector("svg");return it(t)&&t.remove(),wh(this,fh,null),!0}))}addIcon(t){const e=t?f[t]:null;if(!e)return;const i=new Gn(e).setScale(this.args.scale).build(),s=this.element.querySelector("svg");it(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}insertBefore(t){this.element.insertBefore(t,this.element.firstChild)}appendChild(t){this.element.appendChild(t)}}fh=new WeakMap;var Mh,Ch,Eh,Wh,Th=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ah=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xh{constructor(t,e){Mh.set(this,void 0),Ch.set(this,void 0),Eh.set(this,void 0),Wh.set(this,void 0),Th(this,Ch,t),Th(this,Eh,null!=e?e:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]),Th(this,Wh,void 0),Th(this,Mh,void 0)}setCallback(t){Th(this,Wh,t)}connect(){Ah(this,Wh)&&Th(this,Mh,new IntersectionObserver(Ah(this,Wh),{root:Ah(this,Ch),rootMargin:"0px",threshold:Ah(this,Eh)}))}observe(t){Ah(this,Mh)&&Ah(this,Mh).observe(t)}unobserve(t){Ah(this,Mh)&&Ah(this,Mh).unobserve(t)}disconnect(){Ah(this,Mh)&&Ah(this,Mh).disconnect()}}Mh=new WeakMap,Ch=new WeakMap,Eh=new WeakMap,Wh=new WeakMap;var Lh,Sh,Ph,Ih,Oh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Nh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Hh extends Vs{constructor(){super({props:{offset:{corrector:t=>ot(t,0,1,0)},target:{corrector:Et}}}),this.target=Et("> *"),this.action="",this.offset=0,this.isRoot=!1}}class _h{constructor(t){this.attribute=(null!=t?t:"cui")+"-intersection"}getStyle(){return null}get(t,e){return new Dh(t,e,this.attribute)}}class Dh extends Hs{constructor(t,e,i){super("CuiIntersectionHandler",t,i,new Hh,e),Lh.set(this,void 0),Sh.set(this,void 0),Ph.set(this,void 0),Ih.set(this,void 0),Oh(this,Lh,new xh(this.element)),Oh(this,Sh,[]),Oh(this,Ph,[]),Oh(this,Ih,"")}onMutation(t){(t.added.length>0&&t.added.find(t=>t.matches(Nh(this,Ih)))||t.added.length>0&&t.removed.find(t=>t.matches(Nh(this,Ih))))&&(this._log.debug("Reinitialize targets from mutation","onMutation"),this.initializeTargets())}onInit(){this.parseArguments(),Nh(this,Lh).setCallback(this.onIntersection.bind(this)),Nh(this,Lh).connect(),Nh(this,Sh).forEach(t=>{Nh(this,Lh).observe(t)})}onUpdate(){this.parseArguments()}onDestroy(){Nh(this,Lh).disconnect()}parseArguments(){it(this.prevArgs)&&this.prevArgs.target===this.args.target||this.initializeTargets(),Oh(this,Ph,yi.get(this.args.action)),Oh(this,Ih,Wt(this.args.target))}onIntersection(t,e){it(Nh(this,Sh))&&t.forEach(t=>{t.isIntersecting&&t.intersectionRatio>=this.args.offset?this.addActions(t.target):this.removeActions(t.target),this.emitIntersection(t)})}emitIntersection(t){this.emitEvent(O,{entry:t,offset:this.args.offset})}initializeTargets(){let t=this.args.isRoot?document.body:this.element;this.removeObservables(),Oh(this,Sh,[...t.querySelectorAll(this.args.target)]),this.setObservables()}setObservables(){Nh(this,Sh).forEach(t=>{Nh(this,Lh).observe(t)})}removeObservables(){it(Nh(this,Sh))&&Nh(this,Sh).forEach(t=>{Nh(this,Lh).observe(t)})}addActions(t){Nh(this,Ph).forEach(e=>e.add(t))}removeActions(t){Nh(this,Ph).forEach(e=>e.remove(t))}}Lh=new WeakMap,Sh=new WeakMap,Ph=new WeakMap,Ih=new WeakMap;var Rh,$h,Fh,Bh,qh,zh,Vh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Uh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class jh extends Vs{constructor(t,e){super(),Rh.set(this,void 0),Vh(this,Rh,t),this.escClose=!1,this.position="right",this.openAct=this.getDefaultOpenClass(),this.closeAct=this.getDefaultCloseClass(),this.timeout=null!=e?e:300,this.outClose=!1,this.keyClose=""}getDefaultOpenClass(){return gt("right"===this.position?".{prefix}-offcanvas-default-right-in":".{prefix}-offcanvas-default-left-in",Uh(this,Rh))}getDefaultCloseClass(){return gt("right"===this.position?".{prefix}-offcanvas-default-right-out":".{prefix}-offcanvas-default-left-out",Uh(this,Rh))}}Rh=new WeakMap;class Kh{constructor(t){$h.set(this,void 0),Vh(this,$h,null!=t?t:"cui"),this.attribute=Uh(this,$h)+"-off-canvas"}getStyle(){return null}get(t,e){return new Yh(t,e,this.attribute,Uh(this,$h))}}$h=new WeakMap;class Yh extends Ns{constructor(t,e,i,s){super("CuiOffCanvasHandler",t,i,new jh(s,e.setup.animationTime),e),Fh.set(this,void 0),Bh.set(this,void 0),qh.set(this,void 0),zh.set(this,void 0),Vh(this,Fh,s),Vh(this,Bh,gt("{prefix}-off-canvas-open",s)),Vh(this,zh,null),Vh(this,qh,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){this.mutate(()=>{this.setPositionLeft(),hs.setAria(this.element,"aria-modal","")})}onUpdate(){this.setPositionLeft()}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Vh(this,qh,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&Vh(this,zh,this.onEvent(H,this.onWindowClick.bind(this))),this.helper.setClass(Uh(this,Bh),document.body),document.body.style.top=`-${scrollY}px`}onAfterClose(){this.detachEvent(H,Uh(this,zh)),this.helper.removeClass(Uh(this,Bh),document.body),document.body.style.top="",window.scrollTo(0,-1*Uh(this,qh))}onBeforeClose(){return!0}onWindowClick(t){const e=this.element.querySelector(gt(".{prefix}-off-canvas-container",Uh(this,Fh)));e&&!e.contains(t.ev.target)&&this.close()}isAnyActive(){return this.helper.hasClass(Uh(this,Bh),document.body)}setPositionLeft(){let t=st(Uh(this,Fh),"left");"left"!==this.args.position||this.helper.hasClass(t,this.element)?"right"==this.args.position&&this.helper.hasClass(t,this.element)&&this.helper.removeClass(t,this.element):this.helper.setClass(t,this.element)}}Fh=new WeakMap,Bh=new WeakMap,qh=new WeakMap,zh=new WeakMap;var Xh,Gh,Zh,Jh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ta{static get(t){return t instanceof Window?new sa:t instanceof HTMLElement?new ia(t):new ea(t)}}class ea{constructor(t){Xh.set(this,void 0),Gh.set(this,void 0),Jh(this,Gh,t),Jh(this,Xh,t.getBoundingClientRect())}getHeight(){return Qh(this,Xh).height}getWidth(){return Qh(this,Xh).width}getTop(){return Qh(this,Xh).top}getLeft(){return Qh(this,Xh).left}getScrollHeight(){return Qh(this,Gh).scrollHeight}getScrollWidth(){return Qh(this,Gh).scrollWidth}getScrollTop(){return Qh(this,Gh).scrollTop}getScrollLeft(){return Qh(this,Gh).scrollLeft}queryAll(t){return[...Qh(this,Gh).querySelectorAll(t)]}}Xh=new WeakMap,Gh=new WeakMap;class ia{constructor(t){Zh.set(this,void 0),Jh(this,Zh,t)}getHeight(){return Qh(this,Zh).offsetHeight}getWidth(){return Qh(this,Zh).offsetWidth}getTop(){return Qh(this,Zh).offsetTop}getLeft(){return Qh(this,Zh).offsetLeft}getScrollHeight(){return Qh(this,Zh).scrollHeight}getScrollWidth(){return Qh(this,Zh).scrollWidth}getScrollTop(){return Qh(this,Zh).scrollTop}getScrollLeft(){return Qh(this,Zh).scrollLeft}queryAll(t){return[...Qh(this,Zh).querySelectorAll(t)]}}Zh=new WeakMap;class sa{getHeight(){return window.innerHeight}getWidth(){return window.innerWidth}getTop(){return 0}getLeft(){return 0}getScrollHeight(){return window.innerHeight}getScrollWidth(){return window.innerWidth}getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}queryAll(t){return[...document.querySelectorAll(t)]}}var na,ra,oa,ha,aa,la,ca,ua,da,pa,va=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ga{constructor(t,e){na.set(this,void 0),ra.set(this,void 0),oa.set(this,void 0),ha.set(this,void 0),aa.set(this,void 0),la.set(this,void 0),ca.set(this,void 0),ua.set(this,void 0),da.set(this,void 0),pa.set(this,void 0),va(this,na,t),va(this,ua,ta.get(t)),va(this,ra,!1),va(this,oa,ot(e,0,100,0)),va(this,ha,va(this,aa,0)),va(this,ca,!1),va(this,la,void 0),va(this,da,new po(50,!1,this.onScrollFinish.bind(this))),va(this,pa,this.listener.bind(this))}setCallback(t){va(this,la,t)}attach(){fa(this,na).addEventListener("scroll",fa(this,pa)),va(this,ca,!0),this.listener(void 0,!0,"init")}detach(){fa(this,na).removeEventListener("scroll",fa(this,pa)),fa(this,da).stop(),va(this,ca,!1)}setTarget(t){t!==fa(this,na)&&(this.detach(),va(this,na,t),this.attach())}setThreshold(t){va(this,oa,ot(t,0,100,0))}isInProgress(){return fa(this,ra)}isAttached(){return fa(this,ca)}listener(t,e,i){if(!it(fa(this,la)))return;let s=fa(this,ua).getScrollLeft(),n=fa(this,ua).getScrollTop();va(this,ha,fa(this,ha)+s),va(this,aa,fa(this,aa)+n),fa(this,ra)||!this.passedThreshold()&&it(t)||(va(this,ra,!0),fa(this,la).call(this,{base:t,top:n,left:s,initial:null!=e&&e,scrolling:it(t),source:null!=i?i:"event"}),it(t)&&fa(this,da).start(),va(this,ra,!1),va(this,ha,0),va(this,aa,0))}passedThreshold(){return fa(this,oa)<=0||fa(this,ha)>=fa(this,oa)||fa(this,aa)>=fa(this,oa)}onScrollFinish(){this.listener(void 0,!1,"task")}}na=new WeakMap,ra=new WeakMap,oa=new WeakMap,ha=new WeakMap,aa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap,pa=new WeakMap;var wa,ma,ya,ka,ba,Ma,Ca,Ea=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ta{matches(t,e,i,s){return i>0&&e>=i||s>0&&t>=s}}class Aa{constructor(){wa.set(this,void 0),ma.set(this,void 0),ya.set(this,void 0),ka.set(this,void 0),ba.set(this,void 0),Ma.set(this,void 0),Ca.set(this,void 0),Ea(this,wa,0),Ea(this,ma,0),Ea(this,ka,0),Ea(this,ya,0),Ea(this,Ca,100),Ea(this,ba,!1),Ea(this,Ma,!1)}matches(t,e,i,s){return this.fitsOffsetY(t,s)||this.fitsOffsetX(e,i)}fitsOffsetX(t,e){if(e<=0)return!1;let i=t-Wa(this,wa);return t>=e&&i>Wa(this,Ca)?Ea(this,ba,!0):Wa(this,ba)&&i<-Wa(this,Ca)&&Ea(this,ba,!1),(i<0&&Wa(this,ka)<i||i>=0&&Wa(this,ka)>i)&&Ea(this,wa,t),Ea(this,ka,i),Wa(this,ba)}fitsOffsetY(t,e){if(e<=0)return!1;let i=t-Wa(this,ma);return t>=e&&i>Wa(this,Ca)?Ea(this,Ma,!0):Wa(this,Ma)&&i<-Wa(this,Ca)&&Ea(this,Ma,!1),(i<0&&Wa(this,ya)<i||i>=0&&Wa(this,ya)>i)&&Ea(this,ma,t),Ea(this,ya,i),Wa(this,Ma)}}wa=new WeakMap,ma=new WeakMap,ya=new WeakMap,ka=new WeakMap,ba=new WeakMap,Ma=new WeakMap,Ca=new WeakMap;var xa,La,Sa,Pa,Ia,Oa,Na,Ha,_a,Da,Ra=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},$a=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ba extends Vs{constructor(){super(),this.offsetX=-1,this.offsetY=-1,this.target="",this.root=!1,this.action="",this.mode="static"}}class qa{constructor(t){this.attribute=(null!=t?t:"cui")+"-offset"}getStyle(){return null}get(t,e){return new za(t,e,this.attribute)}}class za extends Os{constructor(t,e,i){super("CuiOffsetHandler",t,i,new Ba,e),xa.set(this,void 0),La.set(this,void 0),Sa.set(this,void 0),Pa.set(this,void 0),Ia.set(this,void 0),Oa.set(this,void 0),Na.set(this,void 0),Ha.set(this,void 0),_a.set(this,void 0),Da.set(this,void 0),this.element=t,$a(this,La,this.element),$a(this,Sa,e),$a(this,Pa,!1),$a(this,Ia,[]),$a(this,Oa,0),$a(this,Na,0),$a(this,Ha,20),$a(this,_a,this.element),$a(this,Da,null),$a(this,xa,void 0)}onHandle(){return Ra(this,void 0,void 0,(function*(){return this.parseAttribute(),$a(this,xa,new ga(this.args.root?window:this.element,this.utils.setup.scrollThreshold)),Fa(this,xa).setCallback(this.onScroll.bind(this)),Fa(this,xa).attach(),!0}))}onRefresh(){return Ra(this,void 0,void 0,(function*(){return this.parseAttribute(),!0}))}onRemove(){return Ra(this,void 0,void 0,(function*(){return Fa(this,xa)&&Fa(this,xa).detach(),!0}))}onScroll(t){this.checkAndPerformActions(t)}parseAttribute(){$a(this,_a,this.getRoot()),$a(this,La,this.getTarget()),$a(this,Ia,yi.get(this.args.action)),$a(this,Da,class{static get(t){return"dynamic"===t?new Aa:new Ta}}.get(this.args.mode))}checkAndPerformActions(t){it(Fa(this,Da))||this.logError("Cannot perform - mode handler not initialized","checkAndPerformActions");let e=Fa(this,Da).matches(t.top,t.left,this.args.offsetX,this.args.offsetY);if(e!==Fa(this,Pa))return this.act(e),$a(this,Pa,e),void this.callEvent(Fa(this,Pa),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top));this.exceededThreshold(t.left,t.top)&&(this.callEvent(Fa(this,Pa),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top)),$a(this,Oa,t.left),$a(this,Na,t.top))}act(t){at(Fa(this,Ia),Fa(this,La))&&(this.isLocked=!0,Fa(this,Ia).forEach(e=>{t?e.add(Fa(this,La),Fa(this,Sa)):e.remove(Fa(this,La),Fa(this,Sa))}),this.isLocked=!1)}callEvent(t,e,i,s,n,r,o){this.emitEvent(_,{matches:Fa(this,Pa),offsetX:e,offsetY:i,ratioX:r,ratioY:o,scrolling:s,source:n,timestamp:Date.now()})}getRoot(){return this.args.root?document.body:this.element}exceededThreshold(t,e){return Math.abs(t-Fa(this,Oa))>Fa(this,Ha)||Math.abs(e-Fa(this,Na))>Fa(this,Ha)}calcaRatio(t,e){let i=parseFloat(((Fa(this,_a).clientHeight+e)/Fa(this,_a).scrollHeight).toFixed(2));return[rt(parseFloat(((Fa(this,_a).clientWidth+t)/Fa(this,_a).scrollWidth).toFixed(2)),0,1),rt(i,0,1)]}getTarget(){let t=this.args.target?Fa(this,_a).querySelector(this.args.target):null;return null!=t?t:this.element}}xa=new WeakMap,La=new WeakMap,Sa=new WeakMap,Pa=new WeakMap,Ia=new WeakMap,Oa=new WeakMap,Na=new WeakMap,Ha=new WeakMap,_a=new WeakMap,Da=new WeakMap;var Va,Ua,ja=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ka=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ya=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xa extends Vs{constructor(t){super({main:"target"}),this.target="",this.action="",this.timeout=null!=t?t:300,this.prevent=!1,this.stopPropagation=!1,this.state=""}}class Ga{constructor(t){Va.set(this,void 0),Ka(this,Va,null!=t?t:"cui"),this.attribute=Ya(this,Va)+"-open"}getStyle(){return null}get(t,e){return new Za(t,e,this.attribute,Ya(this,Va))}}Va=new WeakMap;class Za extends Os{constructor(t,e,i,s){super("CuiOpenHandler",t,i,new Xa(e.setup.animationTime),e),Ua.set(this,void 0),Ka(this,Ua,null),this.addModule(new Gs(this.element,this.args,this.onOpen.bind(this)))}onHandle(){return ja(this,void 0,void 0,(function*(){return Ka(this,Ua,this.onEvent(C,this.onOpen.bind(this))),!0}))}onRefresh(){return ja(this,void 0,void 0,(function*(){return!0}))}onRemove(){return ja(this,void 0,void 0,(function*(){return this.detachEvent(C,Ya(this,Ua)),!0}))}onOpen(t){if(this.isLocked)return;const e=this.getTarget();it(e)?(this.isLocked=!0,this.run(e).then(e=>{e&&this.emitOpen(t)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return ja(this,void 0,void 0,(function*(){let e=t.$cuid;if(it(e))return this.handleClickCui(e),!1;if(this._log.debug("Open html component"),at(this.args.timeout,this.args.action)){this._log.debug("Perfrom an action");let e=yi.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.helper.setClass(this.activeClassName,t)})}return this.helper.setClassesAs(t,this.activeClassName),!0}))}handleClickCui(t){return this._log.debug("Open cUI component"),this.utils.bus.emit(C,t,this.args.state),!1}emitOpen(t){this.emitEvent(E,{event:t,state:this.args.state})}getTarget(){var t;return it(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:mt(this.element)}}Ua=new WeakMap;var Ja,Qa,tl,el,il,sl,nl,rl,ol,hl=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},al=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ll=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class cl extends Vs{constructor(){super(),this.mode="simple",this.default="",this.small=this.medium=this.large=this.xlarge="",this.delay=0}}class ul{constructor(t){Ja.set(this,void 0),al(this,Ja,null!=t?t:"cui"),this.attribute=ll(this,Ja)+"-resize"}getStyle(){return null}get(t,e){return new dl(t,e,this.attribute)}}Ja=new WeakMap;class dl extends Os{constructor(t,e,i){super("CuiResizeHandler",t,i,new cl,e),Qa.set(this,void 0),tl.set(this,void 0),el.set(this,void 0),il.set(this,void 0),sl.set(this,void 0),nl.set(this,void 0),rl.set(this,void 0),ol.set(this,void 0),al(this,Qa,null),al(this,tl,new xh(document.documentElement,[0,.1])),ll(this,tl).setCallback(this.onIntersection.bind(this)),al(this,sl,""),al(this,il,""),al(this,el,"none"),al(this,rl,!1),al(this,ol,void 0),al(this,nl,void 0)}onHandle(){return hl(this,void 0,void 0,(function*(){return al(this,Qa,this.utils.bus.on(M,this.resize.bind(this))),ll(this,tl).connect(),ll(this,tl).observe(this.element),al(this,el,lt(window.innerWidth)),al(this,rl,this.isInViewport(this.element)),this.setNewValue(),this.updateElement(),!0}))}onRefresh(){return hl(this,void 0,void 0,(function*(){return this.setNewValue(),this.updateElement(),!0}))}onRemove(){return hl(this,void 0,void 0,(function*(){return null!==ll(this,Qa)&&(this.utils.bus.detach(M,ll(this,Qa)),al(this,Qa,null)),ll(this,tl).unobserve(this.element),ll(this,tl).disconnect(),!0}))}resize(t){al(this,el,t.current),this.setNewValue(),this.updateElement()}onIntersection(t){t.length>0&&al(this,rl,t[0].isIntersecting),this.updateElement()}setNewValue(){let t=this.isSmartMode()?this.getSmartValue(ll(this,el)):this.getValue(ll(this,el),!0);t&&t!==ll(this,il)&&al(this,il,t)}getValue(t,e){let i=void 0;switch(t){case"xlarge":i=this.args.xlarge;break;case"large":i=this.args.large;break;case"medium":i=this.args.medium;break;case"small":i=this.args.small;break;default:i=this.args.default}return e&&!i?this.args.default:i}getSmartValue(t){var e,i,s,n;let r=this.args.default;return"none"===t?r:(r=null!==(e=this.args.small)&&void 0!==e?e:r,"small"===t?r:(r=null!==(i=this.args.medium)&&void 0!==i?i:r,"medium"===t?r:(r=null!==(s=this.args.large)&&void 0!==s?s:r,"large"===t?r:null!==(n=this.args.xlarge)&&void 0!==n?n:r)))}updateElement(){ll(this,rl)||!this.isSmartMode()?it(ll(this,il))?ll(this,sl)!==ll(this,il)&&this.run(()=>{let t=mi.get(ll(this,il));this.mutate(()=>{ll(this,nl)&&ll(this,nl).remove(this.element),t.add(this.element),al(this,sl,ll(this,il)),al(this,nl,t)})}):this.logWarning("Not eligible to set value: "+ll(this,il)):this.logInfo("Not intersecting")}isSmartMode(){return"smart"===this.args.mode}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}run(t){ll(this,ol)&&(clearTimeout(ll(this,ol)),al(this,ol,void 0)),al(this,ol,setTimeout(()=>{t(),al(this,ol,void 0)},this.args.delay))}}Qa=new WeakMap,tl=new WeakMap,el=new WeakMap,il=new WeakMap,sl=new WeakMap,nl=new WeakMap,rl=new WeakMap,ol=new WeakMap;var pl=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class vl extends Vs{constructor(){super({props:{behavior:{corrector:t=>Ct(t,"auto","smooth")}}}),this.target="",this.parent="",this.behavior="auto",this.stopPropagation=!1,this.prevent=!1}}class fl{constructor(t){this.attribute=it(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new gl(t,e,this.attribute)}}class gl extends Os{constructor(t,e,i){super("CuiScrollHandler",t,i,new vl,e),this.addModule(new Gs(this.element,this.args,this.onClick.bind(this)))}onHandle(){return pl(this,void 0,void 0,(function*(){return!0}))}onRefresh(){return pl(this,void 0,void 0,(function*(){return!0}))}onRemove(){return pl(this,void 0,void 0,(function*(){return!0}))}onClick(t){const e=this.getTarget(),i=this.getTargetsParent(e);if(!e||!i)return;let s=function(t){if(!it(t))return-1;let e=t.offsetTop-parseInt(dt(t,"margin-top"))-parseInt(dt(t,"padding-top"))-parseInt(dt(t,"border-top-width"));return e<0?t.offsetTop:e}(e)-i.offsetTop,n=s-i.scrollTop;i.scrollBy({top:n,behavior:this.args.behavior}),this.emitEvent(P,{to:s,by:n,target:e,parent:i})}getTarget(){return it(this.args.target)?document.querySelector(this.args.target):null}getTargetsParent(t){return it(this.args.parent)?document.querySelector(this.args.parent):t?t.parentElement:null}}var wl,ml,yl,kl,bl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ml=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Cl{constructor(t,e){var i;wl.set(this,void 0),ml.set(this,void 0),yl.set(this,void 0),kl.set(this,void 0),bl(this,kl,ta.get(t)),bl(this,wl,new ga(t,null!==(i=null==e?void 0:e.threshold)&&void 0!==i?i:0)),Ml(this,wl).setCallback(this.onScroll.bind(this)),bl(this,yl,[]),bl(this,ml,void 0)}setChildren(t){bl(this,yl,t)}setThreshold(t){Ml(this,wl).setThreshold(t)}setCallback(t){bl(this,ml,t)}setParent(t){bl(this,kl,ta.get(t)),Ml(this,wl).setTarget(t)}isInProgress(){return Ml(this,wl).isInProgress()}attach(){this.isAttached()||Ml(this,wl).attach()}detach(){this.isAttached()&&Ml(this,wl).detach()}isAttached(){return Ml(this,wl)&&Ml(this,wl).isAttached()}onScroll(t){at(Ml(this,yl),Ml(this,ml))&&Ml(this,ml)&&Ml(this,ml).call(this,this.prepareCallbackResult(t))}calcChildVerticalRatio(t,e,i){let s=t.offsetTop+t.offsetHeight;return rt(((i<s?i:s)-(e>t.offsetTop?e:t.offsetTop))/t.offsetHeight,0,1)}calcChildHorizontalRatio(t,e,i){let s=t.offsetLeft+t.offsetWidth;return rt(((i<s?i:s)-(e>t.offsetLeft?e:t.offsetLeft))/t.offsetWidth,0,1)}prepareCallbackResult(t){var e,i;let s=t.top+Ml(this,kl).getHeight(),n=t.left+Ml(this,kl).getWidth();return{ev:t.base,top:t.top,left:t.left,scrolling:null!==(e=t.scrolling)&&void 0!==e&&e,initial:null!==(i=t.initial)&&void 0!==i&&i,source:t.source,items:Ml(this,yl).map((e,i)=>({verticalRatio:this.calcChildVerticalRatio(e,t.top,s),horizontalRatio:this.calcChildHorizontalRatio(e,t.left,n),element:e}))}}}wl=new WeakMap,ml=new WeakMap,yl=new WeakMap,kl=new WeakMap;class El{static get(t){return"multi"===t?new Al:new Tl}}class Wl{constructor(t){this.previous=t}getMatching(t,e){return e.reduce((e,i,s)=>(i.verticalRatio>t&&e.push(s),e),[])}addActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.add(e)})}removeActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.remove(e)})}forEachAction(t,e,i){at(t,e,i)&&t.forEach(t=>{e.forEach(e=>{it(e)&&i(t,e)})})}}class Tl extends Wl{constructor(){super(-1)}update(t,e,i,s,n){let r=this.getMatching(e,t),o=r.length,h=o>0?r[o-1]:-1,a={changed:!1};if(!this.matches(h)){if(this.previous>-1&&this.removeActions(i,t[this.previous].element),h>-1){let e=t[h].element;a.intersecting=[e],this.addActions(i,e)}return at(s,n)&&(this.previous>-1&&this.removeActions(n,s[this.previous]),h>-1&&this.addActions(n,s[h])),this.previous=h,a.changed=!0,a.intersecting=[],a}return a}matches(t){return t===this.previous}}class Al extends Wl{constructor(){super([])}update(t,e,i,s,n){let r=this.getMatching(e,t),o={changed:!1};if(!this.matches(r)){let e=r.map(e=>t[e].element);return this.removeActions(i,...this.previous.map(e=>t[e].element)),this.addActions(i,...e),o.intersecting=e,at(s,n)&&(this.removeActions(n,...this.previous.map(t=>s[t])),this.addActions(n,...r.map(t=>s[t]))),this.previous=r,o.changed=!0,o}return o}matches(t){let e=t.length;if(e!==this.previous.length)return!1;let i=0;for(i=0;i<e;i++)if(!this.previous.includes(t[i]))return!1;return!0}}var xl,Ll,Sl,Pl,Il,Ol,Nl,Hl=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},_l=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Dl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Rl extends Vs{constructor(){super({props:{selector:{corrector:Et},ratio:{corrector:t=>ot(t,0,1,0)},mode:{corrector:t=>Ct(t,"single","multi")}}}),this.ratio=0,this.mode="single",this.threshold=-1,this.selector=Et("> *"),this.action="",this.isRoot=!1,this.link="",this.linkAction=""}}class $l{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new Fl(t,e,this.attribute)}}class Fl extends Os{constructor(t,e,i){super("CuiScrollspyHandler",t,i,new Rl,e),xl.set(this,void 0),Ll.set(this,void 0),Sl.set(this,void 0),Pl.set(this,void 0),Il.set(this,void 0),Ol.set(this,void 0),Nl.set(this,void 0),this.element=t,_l(this,xl,new Cl(this.element,{threshold:this.utils.setup.scrollThreshold})),_l(this,Ll,[]),_l(this,Sl,[]),_l(this,Pl,[]),_l(this,Il,void 0),_l(this,Ol,void 0),_l(this,Nl,void 0)}onHandle(){return Hl(this,void 0,void 0,(function*(){return this.init(),Dl(this,xl).setCallback(this.onIntersection.bind(this)),Dl(this,xl).attach(),!0}))}onRefresh(){return Hl(this,void 0,void 0,(function*(){return this.update(),!0}))}onRemove(){return Hl(this,void 0,void 0,(function*(){return Dl(this,xl).detach(),!0}))}onIntersection(t){if(!Dl(this,Nl))return void this.logError("Cannot perform - mode handler not initialized","OnIntersection");let e=Date.now();this.mutate(()=>{let i=Dl(this,Nl).update(t.items,this.args.ratio,Dl(this,Sl),Dl(this,Ll),Dl(this,Pl));i.changed&&this.emitEvent(I,{intersecting:i.intersecting,timestamp:e})}),this.emitEvent(P,{top:t.top,left:t.left,scrolling:t.scrolling,initial:t.initial,source:t.source,timestamp:e,name:P})}init(){_l(this,Il,this.args.isRoot?window:this.element),_l(this,Ol,ta.get(Dl(this,Il)));let t=this.args.selector?Dl(this,Ol).queryAll(this.args.selector):[];Dl(this,xl).setChildren(t),Dl(this,xl).setThreshold(this.args.threshold),_l(this,Ll,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),_l(this,Sl,yi.get(this.args.action)),_l(this,Pl,yi.get(this.args.linkAction)),_l(this,Nl,El.get(this.args.mode))}update(){if(this.prevArgs&&this.args.isRoot!==this.prevArgs.isRoot&&(_l(this,Il,this.args.isRoot?window:this.element),_l(this,Ol,ta.get(Dl(this,Il))),Dl(this,xl).setParent(Dl(this,Il))),this.prevArgs&&Dl(this,Ol)&&this.args.selector!==this.prevArgs.selector){let t=this.args.selector?Dl(this,Ol).queryAll(this.args.selector):[];Dl(this,xl).setChildren(t)}Dl(this,xl).setThreshold(this.args.threshold),_l(this,Ll,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),_l(this,Sl,yi.get(this.args.action)),_l(this,Pl,yi.get(this.args.linkAction)),_l(this,Nl,El.get(this.args.mode))}}xl=new WeakMap,Ll=new WeakMap,Sl=new WeakMap,Pl=new WeakMap,Il=new WeakMap,Ol=new WeakMap,Nl=new WeakMap;var Bl,ql,zl,Vl,Ul,jl,Kl,Yl,Xl,Gl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Jl{constructor(t){Bl.set(this,void 0),ql.set(this,void 0),zl.set(this,void 0),Vl.set(this,void 0),Ul.set(this,void 0),jl.set(this,void 0),Kl.set(this,void 0),Yl.set(this,void 0),Xl.set(this,void 0),Gl(this,Vl,t),Gl(this,ql,[]),Gl(this,zl,void 0),Gl(this,Bl,void 0),Gl(this,Ul,void 0),Gl(this,jl,[]),Gl(this,Kl,[]),Gl(this,Xl,void 0),Gl(this,Yl,void 0)}setId(t){return Gl(this,Bl,t),this}setClasses(...t){return Gl(this,ql,t),this}setAttributes(t){return Gl(this,zl,t),this}setTextContent(t){return Gl(this,Ul,t),this}setChildren(...t){return Gl(this,jl,[...t]),this}setRawChildren(...t){return Gl(this,Kl,[...t]),this}onEvent(t,e){return Gl(this,Xl,t),Gl(this,Yl,e),this}build(t){let e=document.createElement(Zl(this,Vl));return it(Zl(this,Bl))&&(e.id=Zl(this,Bl)),it(Zl(this,ql))&&e.classList.add(...Zl(this,ql)),it(Zl(this,zl))&&kt(Zl(this,zl),(t,i)=>{e.setAttribute(t,i)}),it(t)?e.innerHTML=t:it(Zl(this,Ul))&&(e.textContent=Zl(this,Ul)),Zl(this,Kl).forEach(t=>{e.appendChild(t.build())}),Zl(this,jl).forEach(t=>e.appendChild(t)),at(Zl(this,Xl),Zl(this,Yl))&&e.addEventListener(Zl(this,Xl),t=>{Zl(this,Yl).call(this,t)}),e}}Bl=new WeakMap,ql=new WeakMap,zl=new WeakMap,Vl=new WeakMap,Ul=new WeakMap,jl=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,Xl=new WeakMap;var Ql,tc,ec,ic=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class nc{constructor(){Ql.set(this,void 0),tc.set(this,void 0),ec.set(this,void 0),ic(this,Ql,[]),ic(this,tc,0),ic(this,ec,5)}setElements(t){ic(this,Ql,t),ic(this,tc,sc(this,Ql).length)}setThreshold(t){ic(this,ec,t)}detect(t,e){if(!it(sc(this,Ql)))return[-1,void 0];let i=-1,s=void 0;for(let n=0;n<sc(this,tc);n++)if(this.isInBounds(sc(this,Ql)[n],t,e)){0===n?(i=n,s=sc(this,Ql)[n]):n<sc(this,tc)-1&&(i=n+1,s=sc(this,Ql)[n+1]);break}return[i,s]}isInBounds(t,e,i){const s=t.getBoundingClientRect();return e>s.left-sc(this,ec)&&e<s.left+s.width+sc(this,ec)&&i>s.top-sc(this,ec)&&i<s.top+s.height+sc(this,ec)}}Ql=new WeakMap,tc=new WeakMap,ec=new WeakMap;var rc,oc,hc,ac,lc,cc,uc,dc,pc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},vc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class fc{constructor(t){rc.set(this,void 0),oc.set(this,void 0),hc.set(this,void 0),ac.set(this,void 0),lc.set(this,void 0),cc.set(this,void 0),uc.set(this,void 0),dc.set(this,void 0),pc(this,rc,t),pc(this,oc,new Ko),pc(this,cc,150),pc(this,uc,!1),pc(this,dc,void 0),vc(this,oc).setTarget(vc(this,rc)),vc(this,oc).preventDefault(!1),vc(this,oc).setCallback(this.onMove.bind(this)),pc(this,hc,void 0),pc(this,ac,void 0),pc(this,lc,void 0)}setLongPressTimeout(t){pc(this,cc,t)}onDragStart(t){pc(this,hc,t)}onDragOver(t){pc(this,ac,t)}onDragEnd(t){pc(this,lc,t)}attach(){vc(this,oc).attach()}detach(){vc(this,oc).detach()}onMove(t){switch(t.type){case"down":if(vc(this,uc))return;pc(this,dc,setTimeout(()=>{vc(this,hc)&&vc(this,hc).call(this,t)&&pc(this,uc,!0)},vc(this,cc)));break;case"move":if(this.cancelTimeout(),!vc(this,uc))return;vc(this,ac)&&vc(this,ac).call(this,t);break;case"up":if(this.cancelTimeout(),!vc(this,uc))return;vc(this,lc)&&vc(this,lc).call(this,t),pc(this,uc,!1)}}cancelTimeout(){vc(this,dc)&&(clearTimeout(vc(this,dc)),pc(this,dc,void 0))}}rc=new WeakMap,oc=new WeakMap,hc=new WeakMap,ac=new WeakMap,lc=new WeakMap,cc=new WeakMap,uc=new WeakMap,dc=new WeakMap;var gc,wc,mc,yc,kc,bc,Mc,Cc,Ec,Wc,Tc,Ac,xc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Lc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Sc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pc extends Vs{constructor(){super({props:{target:{corrector:Et},trigger:{corrector:Et}}}),this.target=Et(" > *"),this.trigger=Et(" > *"),this.timeout=150,this.threshold=5}}class Ic{constructor(t){gc.set(this,void 0),Lc(this,gc,null!=t?t:"cui"),this.attribute=Sc(this,gc)+"-sortable"}getStyle(){return null}get(t,e){return new Oc(t,this.attribute,e,Sc(this,gc))}}gc=new WeakMap;class Oc extends Os{constructor(t,e,i,s){super("CuiSortableHandler",t,e,new Pc,i),wc.set(this,void 0),mc.set(this,void 0),yc.set(this,void 0),kc.set(this,void 0),bc.set(this,void 0),Mc.set(this,void 0),Cc.set(this,void 0),Ec.set(this,void 0),Wc.set(this,void 0),Tc.set(this,void 0),Ac.set(this,void 0),Lc(this,yc,[]),Lc(this,mc,[]),Lc(this,bc,-1),Lc(this,kc,null),Lc(this,Wc,null),Lc(this,Mc,null),Lc(this,wc,new fc(t)),Sc(this,wc).onDragStart(this.onDragStart.bind(this)),Sc(this,wc).onDragOver(this.onDragOver.bind(this)),Sc(this,wc).onDragEnd(this.onDragEnd.bind(this)),Lc(this,Cc,gt("{prefix}-moving",s)),Lc(this,Ac,gt("{prefix}-sortable-preview",s)),Lc(this,Ec,new nc),Lc(this,Tc,new In),Sc(this,Tc).setOnFinish(this.onSortAnimationFinish.bind(this))}onHandle(){return xc(this,void 0,void 0,(function*(){return Sc(this,wc).attach(),this.getTargetsAndTrggers(),Sc(this,Ec).setThreshold(this.args.threshold),!0}))}onRefresh(){return xc(this,void 0,void 0,(function*(){return!this.prevArgs||this.args.target===this.prevArgs.target&&this.args.trigger===this.prevArgs.trigger||this.getTargetsAndTrggers(),Sc(this,wc).setLongPressTimeout(this.args.timeout),!0}))}onRemove(){return xc(this,void 0,void 0,(function*(){return Sc(this,wc).detach(),!0}))}getTargetsAndTrggers(){try{if(Lc(this,yc,[...this.element.querySelectorAll(this.args.target)]),Lc(this,mc,[...this.element.querySelectorAll(this.args.trigger)]),Sc(this,mc).length!==Sc(this,yc).length)throw new Error(`Triggers (count ${Sc(this,mc).length}) and targets (count ${Sc(this,yc).length}) selector are not correct`);Sc(this,Ec).setElements(Sc(this,yc))}catch(t){this._log.error("Incorrect trigger or target selector"),this._log.exception(t,"getTargetsAndTrggers"),Lc(this,yc,[]),Lc(this,mc,[])}}onDragStart(t){return Lc(this,bc,this.getPressedElementIdx(t.target)),Lc(this,kc,Sc(this,bc)>-1?Sc(this,yc)[Sc(this,bc)]:null),!!it(Sc(this,kc))&&(this.utils.bus.emit(F,null,!0),this.startMovementPrep(t),this.emitEvent(V,{target:Sc(this,kc),index:Sc(this,bc)}),!0)}onDragOver(t){this.move(t),t.event.preventDefault()}onDragEnd(t){it(Sc(this,Mc))&&(Sc(this,Tc).setElement(Sc(this,Mc)),Sc(this,Tc).setProps(this.getFinishAnimation()),Sc(this,Tc).finish(0,100,!1))}getPressedElementIdx(t){return Sc(this,mc).findIndex(e=>e.contains(t))}startMovementPrep(t){this.mutate(()=>{this.createPreview(),it(Sc(this,kc))&&this.helper.setClass(Sc(this,Cc),Sc(this,kc)),this.helper.setClass("cui-locked",this.element),this.helper.setClass(v,document.body),this.setPreviewPosition(t),this.setCurrentPosition(t)})}stopMovementPrep(){this.mutate(()=>{it(Sc(this,kc))&&this.helper.removeClass(Sc(this,Cc),Sc(this,kc)),this.helper.removeClass(v,document.body),this.helper.removeClass("cui-locked",this.element),this.removePreview(),Lc(this,kc,null),Lc(this,Wc,null),this.getTargetsAndTrggers()})}move(t){this.mutate(()=>{this.setPreviewPosition(t),this.setCurrentPosition(t)})}createPreview(){it(Sc(this,kc))?(Lc(this,Mc,new Jl("div").setClasses(Sc(this,Ac)).build()),Sc(this,Mc).style.width=Sc(this,kc).offsetWidth+"px",Sc(this,Mc).style.height=Sc(this,kc).offsetHeight+"px",document.body.appendChild(Sc(this,Mc))):this.logError("Cannot create preview - current target does not exist","createPreview")}removePreview(){it(Sc(this,Mc))&&(Sc(this,Mc).remove(),Lc(this,Mc,null))}setPreviewPosition(t){it(Sc(this,Mc))&&(Sc(this,Mc).style.top=t.y+"px",Sc(this,Mc).style.left=t.x+"px")}setCurrentPosition(t){if(!Sc(this,kc))return;let[e,i]=Sc(this,Ec).detect(t.x,t.y);if(e!==Sc(this,bc)&&i&&Sc(this,Wc)!==i){let t=i;this.insertElement(Sc(this,kc),t),Lc(this,Wc,t),this.getTargetsAndTrggers(),Lc(this,bc,e)}}insertElement(t,e){it(e)?this.element.insertBefore(t,e):this.element.appendChild(t)}getFinishAnimation(){if(!at(Sc(this,kc),Sc(this,Mc)))return{opacity:{from:1,to:0}};const t=Sc(this,kc).getBoundingClientRect();return{opacity:{from:1,to:0},top:{from:Sc(this,Mc).offsetTop,to:t.top>0?t.top:Sc(this,Mc).offsetTop,unit:"px"},left:{from:Sc(this,Mc).offsetLeft,to:t.left>0?t.left:Sc(this,Mc).offsetLeft,unit:"px"}}}onSortAnimationFinish(){this.stopMovementPrep(),this.utils.bus.emit(F,null,!1),this.emitEvent(z,{target:Sc(this,kc),index:Sc(this,bc)})}}wc=new WeakMap,mc=new WeakMap,yc=new WeakMap,kc=new WeakMap,bc=new WeakMap,Mc=new WeakMap,Cc=new WeakMap,Ec=new WeakMap,Wc=new WeakMap,Tc=new WeakMap,Ac=new WeakMap;var Nc,Hc,_c,Dc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Rc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$c=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fc extends Vs{constructor(){super({main:"spinner"}),this.spinner="circle",this.scale=1}}class Bc{constructor(t){Nc.set(this,void 0),Rc(this,Nc,null!=t?t:"cui"),this.attribute=$c(this,Nc)+"-spinner",f.spinner_circle='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z"></path></svg>',f.spinner_circle_double='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z"></path><path d="M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z"></path></svg>'}getStyle(){return null}get(t,e){return new qc(t,e,this.attribute,$c(this,Nc))}}Nc=new WeakMap;class qc extends Os{constructor(t,e,i,s){super("CuiSpinnerHandler",t,i,new Fc,e),Hc.set(this,void 0),_c.set(this,void 0),Rc(this,Hc,null),Rc(this,_c,gt("{prefix}-animation-pause",s))}onHandle(){return Dc(this,void 0,void 0,(function*(){return Rc(this,Hc,this.onEvent(B,this.onPause.bind(this))),this.add(),!0}))}onRefresh(){return Dc(this,void 0,void 0,(function*(){return this.prevArgs&&this.args.spinner!==this.prevArgs.spinner&&this.add(),!0}))}onRemove(){return Dc(this,void 0,void 0,(function*(){return this.removeIfAnyExisists(),this.detachEvent(B,$c(this,Hc)),!0}))}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}add(){const t=it(this.args.spinner)?f["spinner_"+this.args.spinner]:null;if(!it(t))return void this._log.warning("Incorrect spinner name: "+this.args.spinner);this.removeIfAnyExisists();const e=new Gn(t).setScale(this.args.scale).build();this.mutate(this.addSpinner,e,this.args.spinner)}removeIfAnyExisists(){let t=this.element.querySelector("svg");t&&t.remove()}onPause(t){this.fetch(()=>{t&&!this.helper.hasClass($c(this,_c),this.element)?this.helper.setClassesAs(this.element,$c(this,_c)):this.helper.removeClassesAs(this.element,$c(this,_c))}),this.emitEvent(q,{paused:t})}}Hc=new WeakMap,_c=new WeakMap;var zc,Vc,Uc,jc,Kc,Yc,Xc,Gc,Zc,Jc,Qc,tu,eu,iu,su,nu,ru=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ou=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},hu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class au extends Vs{constructor(t,e){super({props:{targets:{corrector:Et}}}),this.targets=Et(" > li"),this.links="",this.autoTimeout=-1,this.height="",this.animation="slide",this.loop=!1,this.timeout=null!=e?e:300}}class lu{constructor(t){this.attribute=(null!=t?t:"cui")+"-slider"}getStyle(){return null}get(t,e){return new cu(t,e,this.attribute)}}class cu extends Hs{constructor(t,e,i){super("CuiSliderHandler",t,i,new au(e.setup.prefix,e.setup.animationTime),e),zc.set(this,void 0),Vc.set(this,void 0),Uc.set(this,void 0),jc.set(this,void 0),Kc.set(this,void 0),Yc.set(this,void 0),Xc.set(this,void 0),Gc.set(this,void 0),Zc.set(this,void 0),Jc.set(this,void 0),Qc.set(this,void 0),tu.set(this,void 0),eu.set(this,void 0),iu.set(this,void 0),su.set(this,void 0),nu.set(this,void 0),ou(this,zc,[]),ou(this,Vc,-1),ou(this,Zc,-1),ou(this,Uc,[]),ou(this,Kc,null),ou(this,nu,null),ou(this,Yc,!1),ou(this,Xc,-1),ou(this,Gc,0),ou(this,Jc,null),ou(this,Qc,.4),ou(this,tu,new In),ou(this,eu,new In),hu(this,tu).setOnFinish(this.onAnimationFinish.bind(this)),ou(this,su,0),ou(this,jc,new po(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),ou(this,iu,es[this.args.animation])}onInit(){ou(this,Kc,this.onEvent(L,this.onPushSwitch.bind(this))),ou(this,nu,this.onEvent($,this.onMove.bind(this))),this.getTargets(),this.getLinks(),this.getActiveIndex(),this.setLinkActive(-1,hu(this,Vc)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(hu(this,zc)[hu(this,Vc)]))}),ou(this,jc,new po(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),ou(this,iu,es[this.args.animation]),this.startTask()}onUpdate(){this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(hu(this,zc)[hu(this,Vc)]))}),ou(this,iu,es[this.args.animation]),this.startTask()}onDestroy(){hu(this,jc).stop(),this.detachEvent(L,hu(this,Kc)),this.detachEvent($,hu(this,nu))}onMutation(t){}onMove(t){if(this.isLocked||!hu(this,iu))return;let e=hu(this,zc)[hu(this,Vc)];switch(t.type){case"down":if(hu(this,Yc)||!e.contains(t.target))return;ou(this,Yc,!0),ou(this,Xc,t.x),hu(this,tu).setElement(e),this.helper.setClassesAs(document.body,v),t.event.cancelable&&t.event.preventDefault();break;case"up":if(!hu(this,Yc))break;this.isLocked=!0;let i=Math.abs(hu(this,Gc)),s=i*this.args.timeout,n=i<=hu(this,Qc);hu(this,tu).finish(i,s,n),hu(this,eu).finish(i,s,n),this.helper.removeClassesAs(document.body,v),ou(this,Yc,!1);break;case"move":if(!hu(this,Yc))break;let r=(t.x-hu(this,Xc))/e.offsetWidth;if(Math.abs(r-hu(this,Gc))<.02)break;let o=bt(hu(this,Gc)>0?"next":"prev",hu(this,Vc),hu(this,su));ou(this,Gc,this.adjustMoveRatio(r)),o!==hu(this,Zc)&&(hu(this,Jc)&&this.helper.removeClass(d,hu(this,Jc)),ou(this,Jc,hu(this,zc)[o]),ou(this,Zc,o),hu(this,eu).setElement(hu(this,Jc)),hu(this,eu).setProps(hu(this,Gc)>0?hu(this,iu).previous.right:hu(this,iu).previous.left),hu(this,tu).setProps(hu(this,Gc)>0?hu(this,iu).current.right:hu(this,iu).current.left),this.mutate(()=>{hu(this,Jc)&&this.helper.setClass(d,hu(this,Jc))})),this.mutate(()=>{hu(this,tu).update(Math.abs(hu(this,Gc))),hu(this,eu).update(Math.abs(hu(this,Gc)))}),t.event.cancelable&&t.event.preventDefault()}}adjustMoveRatio(t){return this.args.loop?t:hu(this,Vc)===hu(this,su)-1&&t>0||0===hu(this,Vc)&&t<0?0:t}switch(t){return ru(this,void 0,void 0,(function*(){return this.isLocked?(console.log("Locked"),!1):(this.onPushSwitch(t),!0)}))}onAnimationFinish(t,e,i){this.isLocked=!1;let s=hu(this,zc)[hu(this,Zc)],n=hu(this,zc)[hu(this,Vc)];e?(it(hu(this,Jc))&&(this.helper.removeClass(d,hu(this,Jc)),this.helper.removeAttribute("style",hu(this,Jc))),this.helper.removeAttribute("style",n),ou(this,Zc,-1),ou(this,Jc,null),ou(this,Xc,-1),ou(this,Gc,0)):hu(this,Zc)>-1&&this.mutate(()=>{this.helper.removeClass(d,s),this.helper.setClass(this.activeClassName,s),this.helper.removeClass(this.activeClassName,n),this.helper.removeAttribute("style",n),this.helper.removeAttribute("style",s),this.setLinkActive(hu(this,Vc),hu(this,Zc)),this.emitEvent(S,{timestamp:Date.now(),index:hu(this,Zc)}),ou(this,Vc,hu(this,Zc)),ou(this,Zc,-1),ou(this,Jc,null),ou(this,Xc,-1),ou(this,Gc,0)}),this.startTask()}onPushSwitch(t){if(!it(t)||this.isLocked||!hu(this,iu)||!this.args.loop&&0===hu(this,Vc)&&"prev"===t||!this.args.loop&&hu(this,Vc)===hu(this,su)-1&&"next"===t)return;this.isLocked=!0;let e=bt(t,hu(this,Vc),hu(this,su));if(e==hu(this,Vc)||e<0||e>=hu(this,zc).length)return this._log.warning(`Index ${t} is not within the suitable range`),!1;ou(this,Zc,e);let i=hu(this,zc)[hu(this,Vc)],s=hu(this,zc)[hu(this,Zc)];hu(this,tu).setElement(i),hu(this,eu).setElement(s),hu(this,tu).setProps("prev"===t?hu(this,iu).current.left:hu(this,iu).current.right),hu(this,eu).setProps("prev"===t?hu(this,iu).previous.left:hu(this,iu).previous.right),this.mutate(()=>{hu(this,tu).finish(0,this.args.timeout,!1),hu(this,eu).finish(0,this.args.timeout,!1),this.helper.setClass(d,s)})}getActiveIndex(){ou(this,Vc,it(hu(this,zc))?hu(this,zc).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return it(this.args.height)&&"auto"!==this.args.height?this.args.height:yt(t)+"px"}getTargets(){let t=this.element.querySelectorAll(this.args.targets);ou(this,zc,t.length>0?[...t]:[]),ou(this,su,hu(this,zc).length)}getLinks(){ou(this,Uc,it(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}setLinkActive(t,e){it(hu(this,Uc))&&this.mutate(()=>{pt(t,0,hu(this,Uc).length-1)&&this.helper.removeClass(this.activeClassName,hu(this,Uc)[t]),pt(e,0,hu(this,Uc).length-1)&&this.helper.setClass(this.activeClassName,hu(this,Uc)[e])})}startTask(){hu(this,jc).stop(),this.args.autoTimeout&&hu(this,jc).start()}}zc=new WeakMap,Vc=new WeakMap,Uc=new WeakMap,jc=new WeakMap,Kc=new WeakMap,Yc=new WeakMap,Xc=new WeakMap,Gc=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,Qc=new WeakMap,tu=new WeakMap,eu=new WeakMap,iu=new WeakMap,su=new WeakMap,nu=new WeakMap;var uu,du,pu,vu,fu,gu,wu,mu,yu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ku=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},bu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Mu extends Vs{constructor(t,e){super({props:{targets:{corrector:Et}}}),this.targets=Et(" > *"),this.in=gt(".{prefix}-switch-animation-default-in",t),this.out=gt(".{prefix}-switch-animation-default-out",t),this.timeout=null!=e?e:300,this.links="",this.switch="",this.autoTimeout=-1,this.height="auto",this.loop=!1}}class Cu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switch"}getStyle(){return null}get(t,e){return new Eu(t,e,this.attribute)}}class Eu extends Hs{constructor(t,e,i){super("CuiSwitchHandler",t,i,new Mu(e.setup.prefix,e.setup.animationTime),e),uu.set(this,void 0),du.set(this,void 0),pu.set(this,void 0),vu.set(this,void 0),fu.set(this,void 0),gu.set(this,void 0),wu.set(this,void 0),mu.set(this,void 0),ku(this,uu,[]),ku(this,du,-1),ku(this,pu,[]),ku(this,vu,[]),ku(this,gu,null),ku(this,wu,ku(this,mu,[])),ku(this,fu,new po(this.args.autoTimeout,!0,this.switch.bind(this,"next")))}onInit(){ku(this,gu,this.onEvent(L,this.onPushSwitch.bind(this))),this.parseArguments(),this.getTargets(),this.getActiveIndex(),this.getSwitches(),this.setSwitchesActive(bu(this,du)),this.setLinkActive(-1,bu(this,du)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(bu(this,uu)[bu(this,du)]))}),ku(this,fu,new po(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),this.startTask()}onUpdate(){this.parseArguments(),this.getTargets(),this.getSwitches(),this.setSwitchesActive(bu(this,du)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(bu(this,uu)[bu(this,du)]))}),this.startTask()}onDestroy(){bu(this,fu).stop(),this.detachEvent(L,bu(this,gu))}onMutation(t){this.getTargets(),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(bu(this,uu)[bu(this,du)]))})}switch(t){return yu(this,void 0,void 0,(function*(){if(this.isLocked)return!1;this.getSwitches(),this.getActiveIndex();let e=bt(t,bu(this,du),bu(this,uu).length);if(!this.args.loop&&("next"===t&&0===e||"prev"===t&&0===bu(this,du)))return this.logInfo("Switch blocked by loop settings","switch"),!1;if(e==bu(this,du)||e<0||e>=bu(this,uu).length)return this.logWarning(`Index ${t} is not within the suitable range`,"switch"),!1;this.isLocked=!0,this.setSwitchesActive(e);let i=bu(this,uu)[e];return yield this.actionsHelper.performSwitchAction(i,bu(this,du)>-1?bu(this,uu)[bu(this,du)]:null,bu(this,wu),bu(this,mu),()=>{i.classList.add(this.activeClassName),bu(this,du)>-1&&bu(this,uu)[bu(this,du)].classList.remove(this.activeClassName),this.setLinkActive(bu(this,du),e),this.helper.setStyle(this.element,"height",this.getElementHeight(i)),this.startTask(),this.isLocked=!1},this.args.timeout),this.emitEvent(S,{timestamp:Date.now(),index:e}),!0}))}onPushSwitch(t){this.switch(t)}getActiveIndex(){ku(this,du,it(bu(this,uu))?bu(this,uu).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return it(this.args.height)&&"auto"!==this.args.height?this.args.height:yt(t)+"px"}parseArguments(){ku(this,wu,yi.get(this.args.in)),ku(this,mu,yi.get(this.args.out)),ku(this,pu,it(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}getTargets(){let t=this.element.querySelectorAll(this.args.targets);ku(this,uu,t.length>0?[...t]:[])}getSwitches(){let t=it(this.args.switch)?document.querySelectorAll(this.args.switch):null;ku(this,vu,[]),t&&t.forEach(t=>{bu(this,vu).push(t)})}setLinkActive(t,e){it(bu(this,pu))&&(pt(t,0,bu(this,pu).length-1)&&this.helper.removeClass(this.activeClassName,bu(this,pu)[t]),pt(e,0,bu(this,pu).length-1)&&this.helper.setClass(this.activeClassName,bu(this,pu)[e]))}setSwitchesActive(t){bu(this,vu).forEach(e=>{this.emitLinkSwitch(e.$cuid,t)})}emitLinkSwitch(t,e){it(t)&&this.utils.bus.emit(L,t,e)}startTask(){bu(this,fu).stop(),this.args.autoTimeout&&bu(this,fu).start()}}uu=new WeakMap,du=new WeakMap,pu=new WeakMap,vu=new WeakMap,fu=new WeakMap,gu=new WeakMap,wu=new WeakMap,mu=new WeakMap;var Wu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class Tu extends Vs{constructor(){super(),this.index="",this.target="",this.prevent=!1,this.stopPropagation=!1,this.targets="li > a",this.isList=!1}}class Au{constructor(t){this.attribute=(null!=t?t:"cui")+"-switcher"}getStyle(){return null}get(t,e){return new xu(t,e,this.attribute)}}class xu extends Os{constructor(t,e,i){super("CuiSwitcherHandler",t,i,new Tu,e),this.onClickEvent=this.onClickEvent.bind(this),this.addModule(new Gs(this.element,this.args,this.onClickEvent.bind(this)))}onHandle(){return Wu(this,void 0,void 0,(function*(){return!0}))}onRefresh(){return Wu(this,void 0,void 0,(function*(){return!0}))}onRemove(){return Wu(this,void 0,void 0,(function*(){return!0}))}getTargetCuid(){let t=null;it(this.args.target)||(t=null);let e=document.querySelector(this.args.target);return it(e)&&(t=e.$cuid),t}onClickEvent(t){const e=this.getTargetCuid();e&&(this.args.isList||"UL"===this.element.tagName?this.handleListClick(t,e):this.handleItemClick(t,e))}handleItemClick(t,e){this.args.index?this.utils.bus.emit(L,e,this.args.index):this._log.warning("Switch cannot be performed since component doesn't specify index")}handleListClick(t,e){const i=Wt(this.args.targets);if(!t.target.matches(i))return;const s=[...this.element.querySelectorAll(this.args.targets)].findIndex(e=>e===t.target);s<0||this.utils.bus.emit(L,e,s)}}var Lu,Su,Pu,Iu,Ou=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Nu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _u extends Vs{constructor(){super({main:"action"}),this.action="",this.target="",this.prevent=!1,this.stopPropagation=!1}}class Du{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new Ru(t,e,this.attribute)}}class Ru extends Os{constructor(t,e,i){super("CuiToggleHandler",t,i,new _u,e),Lu.set(this,void 0),Su.set(this,void 0),Pu.set(this,void 0),Iu.set(this,void 0),Nu(this,Lu,this.element),Nu(this,Su,e),Nu(this,Pu,null),Nu(this,Iu,[]),this.addModule(new Gs(t,this.args,this.onClick.bind(this)))}onHandle(){return Ou(this,void 0,void 0,(function*(){return Nu(this,Lu,this.getTarget()),Nu(this,Iu,yi.get(this.args.action)),Nu(this,Pu,this.onEvent(A,this.toggle.bind(this))),!0}))}onRefresh(){return Ou(this,void 0,void 0,(function*(){return Nu(this,Lu,this.getTarget()),Nu(this,Iu,yi.get(this.args.action)),!0}))}onRemove(){return Ou(this,void 0,void 0,(function*(){return this.detachEvent(A,Hu(this,Pu)),!0}))}toggle(){Hu(this,Lu)?(Hu(this,Iu).forEach(t=>t.toggle(Hu(this,Lu),Hu(this,Su))),this.emitEvent(x,{action:this.args.action,target:Hu(this,Lu),timestamp:Date.now()})):this.logError("Target in not provided","toggle")}onClick(t){this.toggle()}getTarget(){var t;return this.args.target&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:this.element}}Lu=new WeakMap,Su=new WeakMap,Pu=new WeakMap,Iu=new WeakMap;var $u,Fu,Bu,qu,zu,Vu,Uu,ju=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ku=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Yu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xu extends Vs{constructor(t){super({main:"content"}),this.content="",this.width=150,this.margin=8,this.timeout=2e3,this.pos="",this.action=gt(".{prefix}-animation-tooltip-in",t)}}class Gu{constructor(t){$u.set(this,void 0),Ku(this,$u,null!=t?t:"cui"),this.attribute=Yu(this,$u)+"-tooltip"}getStyle(){return null}get(t,e){return new Zu(t,this.attribute,e,Yu(this,$u))}}$u=new WeakMap;class Zu extends Os{constructor(t,e,i,s){super("CuiTooltipHandler",t,e,new Xu(s),i),Fu.set(this,void 0),Bu.set(this,void 0),qu.set(this,void 0),zu.set(this,void 0),Vu.set(this,void 0),Uu.set(this,void 0),Ku(this,Fu,void 0),Ku(this,Vu,[]),Ku(this,zu,gt("{prefix}-tooltip-data",s)),Ku(this,Bu,8),Ku(this,qu,new ro),Yu(this,qu).setPreferred("top-center"),Ku(this,Uu,new po(this.args.timeout,!1,this.removeTooltip.bind(this))),this.addModule(new yo(this.element,this.onHover.bind(this)))}onHandle(){return ju(this,void 0,void 0,(function*(){return this.getDataFromArgs(),Yu(this,Uu).setTimeout(this.args.timeout),!0}))}onRefresh(){return ju(this,void 0,void 0,(function*(){return this.getDataFromArgs(),Yu(this,Uu).setTimeout(this.args.timeout),!0}))}onRemove(){return ju(this,void 0,void 0,(function*(){return this.removeTooltip(),!0}))}onHover(t){t.isHovering?this.createTooltip():this.removeTooltip()}createTooltip(){if(it(Yu(this,Fu))||!it(this.args.content))return;const t=this.element.getBoundingClientRect();Ku(this,Fu,new Jl("div").setClasses(Yu(this,zu)).build()),Yu(this,Fu).textContent=this.args.content,Yu(this,Fu).style.maxWidth=this.args.width+"px",document.body.appendChild(Yu(this,Fu)),this.mutate(()=>{if(!Yu(this,Fu))return;const e=Yu(this,Fu).getBoundingClientRect();Yu(this,qu).setMargin(Yu(this,Bu));try{let[i,s]=Yu(this,qu).calculate(t,e);Yu(this,Fu).style.top=s+"px",Yu(this,Fu).style.left=i+"px",this.toggleActions(),Yu(this,Uu).start()}catch(t){this.logError(t.message,"createTooltip",t)}})}removeTooltip(){Yu(this,Uu).stop(),it(Yu(this,Fu))&&this.mutate(()=>{Yu(this,Fu).remove(),Ku(this,Fu,void 0)})}getDataFromArgs(){Yu(this,qu).setMargin(this.args.margin),Yu(this,qu).setStatic(this.args.pos),Ku(this,Vu,yi.get(this.args.action))}toggleActions(){Yu(this,Fu)&&Yu(this,Vu).forEach(t=>{t.toggle(Yu(this,Fu))})}}Fu=new WeakMap,Bu=new WeakMap,qu=new WeakMap,zu=new WeakMap,Vu=new WeakMap,Uu=new WeakMap;var Ju,Qu,td,ed,id,sd,nd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class od{constructor(t,e,i){Ju.set(this,void 0),Qu.set(this,void 0),td.set(this,void 0),ed.set(this,void 0),id.set(this,void 0),sd.set(this,void 0),nd(this,ed,t),nd(this,Ju,nd(this,td,nd(this,Qu,void 0))),nd(this,id,null!=i?i:""),nd(this,sd,e)}createHeader(t,e,i){it(e)||(e=[]),it(i)||(i=[]);let s=new Jl("div");s.setClasses(rd(this,ed)+"-dialog-header",...e),nd(this,Ju,s.build());let n=new Jl("span").setClasses(this.getPrefixedString("-dialog-title")).build(t);rd(this,Ju).appendChild(n),this.appendChildrens(rd(this,Ju),...i)}createFooter(t,e){it(t)||(t=[]),it(e)||(e=[]),nd(this,td,new Jl("div").setClasses(this.getPrefixedString("-dialog-footer"),...t).build()),this.appendChildrens(rd(this,td),...e)}createBody(t,e){it(t)||(t=[]),it(e)||(e=[]),nd(this,Qu,new Jl("div").setClasses(this.getPrefixedString("-dialog-body"),...t).build()),this.appendChildrens(rd(this,Qu),...e)}build(t){let e=[this.getPrefixedString("-dialog")];rd(this,sd)&&e.push(this.getPrefixedString("-reverse-auto"));let i=new Jl("div").setId(t).setClasses(...e).setAttributes({[this.getPrefixedString("-dialog")]:rd(this,id)}).build(),s=new Jl("div").setClasses(this.getPrefixedString("-dialog-container")).build();return rd(this,Ju)&&s.appendChild(rd(this,Ju)),rd(this,Qu)&&s.appendChild(rd(this,Qu)),rd(this,td)&&s.appendChild(rd(this,td)),i.appendChild(s),i}appendChildrens(t,...e){it(e)&&e.forEach(e=>t.appendChild(e))}getPrefixedString(t){return rd(this,ed)+t}}Ju=new WeakMap,Qu=new WeakMap,td=new WeakMap,ed=new WeakMap,id=new WeakMap,sd=new WeakMap;var hd,ad,ld,cd,ud,dd,pd,vd,fd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},gd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wd{constructor(t,e,i){hd.set(this,void 0),ad.set(this,void 0),ld.set(this,void 0),cd.set(this,void 0),ud.set(this,void 0),fd(this,hd,{yes:i.onYes,no:i.onNo,cancel:i.onCancel,ok:i.onOk}),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,fd(this,ad,t),fd(this,ld,e),this.reverse=!1,fd(this,ud,null),this.closeStr=gd(this,ad).setup.prefix+"-close",this.iconStr=gd(this,ad).setup.prefix+"-icon",fd(this,cd,void 0)}getId(){return gd(this,ld)}show(t){if(!gd(this,ad))return;let e=document.getElementById(gd(this,ld));it(e)?this.updateElement(e):(e=this.createElement(),gd(this,ad).interactions.mutate(()=>{t.appendChild(e)},null)),setTimeout(()=>{fd(this,cd,new Li([e],gd(this,ad)));let t=gd(this,cd).on("closed",this.onClose.bind(this));fd(this,ud,t.length>0?t[0]:null),gd(this,cd).emit("open")},50)}updateElement(t){gd(this,ad).interactions.fetch(()=>{let e=t.querySelector(`.${this.prefix}-dialog-title`),i=t.querySelector(`.${this.prefix}-dialog-body>p`);gd(this,ad).interactions.mutate(()=>{e&&(e.innerHTML=this.title),i&&(i.innerHTML=this.content)},null)},null)}onClose(t){try{if(it(t)&&t.state&&gd(this,hd)&&it(gd(this,hd)[t.state])){let e=gd(this,hd)[t.state];e&&e()}}finally{null!=gd(this,ud)&&(gd(this,cd)&&gd(this,cd).detach("closed",gd(this,ud)),fd(this,ud,null)),fd(this,cd,void 0)}}}hd=new WeakMap,ad=new WeakMap,ld=new WeakMap,cd=new WeakMap,ud=new WeakMap;class md extends wd{constructor(t,e,i){var s;super(t,e,i),dd.set(this,void 0),fd(this,dd,e),this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new od(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Jl("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Jl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Jl("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new Jl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(gd(this,dd))}}dd=new WeakMap;class yd extends wd{constructor(t,e,i){var s;super(t,e,i),pd.set(this,void 0),fd(this,pd,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new od(this.prefix,this.reverse);return t.createHeader(this.title,[]),t.createBody([],[new Jl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Jl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(gd(this,pd))}}pd=new WeakMap;class kd extends wd{constructor(t,e,i){var s;super(t,e,i),vd.set(this,void 0),fd(this,vd,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new od(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Jl("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Jl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Jl("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new Jl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),t.build(gd(this,vd))}}vd=new WeakMap;var bd,Md,Cd,Ed=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Td{constructor(){bd.set(this,void 0),Md.set(this,void 0),Cd.set(this,void 0),this.name="alert-plugin",this.description="CuiAlertsPlugin",Ed(this,bd,null),Ed(this,Md,void 0),Ed(this,Cd,null)}init(t){Ed(this,Cd,Ht.get("CuiAlertsPlugin")),Ed(this,Md,t),this.detach(),Ed(this,bd,Wd(this,Md).bus.on(Y,this.onAlert.bind(this),{$cuid:this.name}))}destroy(){this.detach()}detach(){Wd(this,bd)&&Wd(this,Md)&&(Wd(this,Md).bus.detach(Y,Wd(this,bd)),Ed(this,bd,null))}onAlert(t){if(!Wd(this,Md))return void Wd(this,Cd).error("Utils are not set");if(!this.validateEvent(t))return void Wd(this,Cd).error("Event validation failed");let e=class{static get(t,e,i,s){return"Info"===e?new yd(s,t,i):"YesNoCancel"===e?new kd(s,t,i):"OkCancel"===e?new md(s,t,i):void 0}}.get(t.id,t.type,t.options,Wd(this,Md));e?e.show(Wd(this,Md).setup.root):Wd(this,Cd).error("Possibly incorrect alert type")}validateEvent(t){return!!(t&&t.id&&t.type&&t.options)}}bd=new WeakMap,Md=new WeakMap,Cd=new WeakMap;var Ad,xd,Ld=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Sd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pd{constructor(){this.name="click-plugin",Ad.set(this,void 0),xd.set(this,void 0),this.description="CuiWindowClickPlugin",Ld(this,Ad,void 0),Ld(this,xd,this.onWindowClick.bind(this))}init(t){Ld(this,Ad,t.bus),window.addEventListener("click",Sd(this,xd))}destroy(){window.removeEventListener("click",Sd(this,xd))}onWindowClick(t){Sd(this,Ad)&&Sd(this,Ad).emit(H,null,{ev:t,source:"CuiWindowClickPlugin",timestamp:Date.now(),name:H})}}Ad=new WeakMap,xd=new WeakMap;var Id,Od,Nd,Hd,_d,Dd,Rd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$d=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fd{constructor(t){Id.set(this,void 0),Od.set(this,void 0),Nd.set(this,void 0),Hd.set(this,void 0),_d.set(this,void 0),Dd.set(this,void 0),this.setup=Object.assign({keybordClass:"focus-visible",mouseClass:"focus-precise",touchClass:"focus-precise"},t),this.description="CuiLightFocusPlugin",this.name="focus-plugin",Rd(this,Id,void 0),Rd(this,_d,this.onKeyDownEvent.bind(this)),Rd(this,Nd,this.onMouseEvent.bind(this)),Rd(this,Hd,this.onTouchEvent.bind(this)),Rd(this,Od,"none"),Rd(this,Dd,void 0)}init(t){Rd(this,Id,t.interactions),document.body.addEventListener("touchstart",$d(this,Hd)),document.body.addEventListener("mousedown",$d(this,Nd)),window.addEventListener("keydown",$d(this,_d))}onMouseEvent(t){"mouse"!==$d(this,Od)&&this.update("mouse")}onKeyDownEvent(t){"keyboard"!==$d(this,Od)&&this.update("keyboard")}onTouchEvent(t){"touch"!==$d(this,Od)&&this.update("touch")}update(t){let e=this.getClass(t);this.setClasses(e,$d(this,Dd),()=>{Rd(this,Dd,e),Rd(this,Od,t)})}getClass(t){switch(t){case"keyboard":return this.setup.keybordClass;case"mouse":return this.setup.mouseClass;case"touch":return this.setup.touchClass;default:return}}setClasses(t,e,i){$d(this,Id)&&t!==e&&$d(this,Id).fetch(()=>{let s=t&&document.body.classList.contains(t),n=e&&document.body.classList.contains(e);$d(this,Id).mutate(()=>{s||document.body.classList.add(t),n&&document.body.classList.remove(e),i()},null)},null)}destroy(){document.body.removeEventListener("touchstart",$d(this,Hd)),document.body.removeEventListener("mousedown",$d(this,Nd)),window.removeEventListener("keydown",$d(this,_d))}}Id=new WeakMap,Od=new WeakMap,Nd=new WeakMap,Hd=new WeakMap,_d=new WeakMap,Dd=new WeakMap;var Bd,qd,zd,Vd,Ud,jd,Kd,Yd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gd{constructor(t,e){Bd.set(this,void 0),qd.set(this,void 0),zd.set(this,void 0),Vd.set(this,void 0),Ud.set(this,void 0),jd.set(this,void 0),Kd.set(this,void 0),Yd(this,zd,!1),Yd(this,Vd,!0),Yd(this,Ud,!1),Yd(this,Bd,void 0),Yd(this,qd,null!=e?e:[]),Yd(this,jd,this.onKeyDown.bind(this)),Yd(this,Kd,this.onKeyUp.bind(this))}setCallback(t){Yd(this,Bd,t)}isInProgress(){return Xd(this,zd)}attach(){document.addEventListener("keydown",Xd(this,jd)),Xd(this,Vd)&&document.addEventListener("keyup",Xd(this,Kd)),Yd(this,Ud,!0)}detach(){document.removeEventListener("keydown",Xd(this,jd)),Xd(this,Vd)&&document.addEventListener("keyup",Xd(this,Kd)),Yd(this,Ud,!1)}isAttached(){return Xd(this,Ud)}onKeyDown(t){if(!Xd(this,zd)){Yd(this,zd,!0);try{it(Xd(this,qd))&&!Xd(this,qd).includes(t.code)||!Xd(this,Bd)||Xd(this,Bd).call(this,t)}catch(t){console.error(t)}finally{Xd(this,Vd)||Yd(this,zd,!1)}}}onKeyUp(t){Yd(this,zd,!1)}}Bd=new WeakMap,qd=new WeakMap,zd=new WeakMap,Vd=new WeakMap,Ud=new WeakMap,jd=new WeakMap,Kd=new WeakMap;var Zd,Jd,Qd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},tp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ep{constructor(t){Zd.set(this,void 0),Jd.set(this,void 0),Qd(this,Jd,t),Qd(this,Zd,new Gd(!0)),tp(this,Zd).setCallback(this.onKeyDown.bind(this))}connect(){tp(this,Zd).attach()}disconnect(){tp(this,Zd).detach()}onKeyDown(t){tp(this,Jd).emit(N,null,{timestamp:Date.now(),name:N,source:"CuiKeysObserver",event:t})}}Zd=new WeakMap,Jd=new WeakMap;var ip,sp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},np=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rp{constructor(t){this.name="keys-plugin",ip.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t,sp(this,ip,void 0)}init(t){sp(this,ip,new ep(t.bus)),np(this,ip).connect()}destroy(){np(this,ip)&&np(this,ip).disconnect()}}ip=new WeakMap;var op,hp,ap,lp,cp,up=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pp{constructor(t){op.set(this,void 0),hp.set(this,void 0),ap.set(this,void 0),lp.set(this,void 0),cp.set(this,void 0),up(this,op,t),up(this,ap,!1),up(this,hp,void 0),up(this,lp,!1),up(this,cp,this.event.bind(this))}setCallback(t){up(this,hp,t)}isInProgress(){return dp(this,lp)}attach(){window.matchMedia&&!dp(this,ap)&&dp(this,op)&&(window.matchMedia(dp(this,op)).addEventListener("change",dp(this,cp)),up(this,ap,!0))}detach(){dp(this,ap)&&(window.matchMedia(dp(this,op)).removeEventListener("change",dp(this,cp)),up(this,ap,!1))}isAttached(){return dp(this,ap)}event(t){if(!dp(this,lp)&&dp(this,hp)){up(this,lp,!0);try{dp(this,hp).call(this,t)}catch(t){console.error(t)}finally{up(this,lp,!1)}}}}op=new WeakMap,hp=new WeakMap,ap=new WeakMap,lp=new WeakMap,cp=new WeakMap;var vp,fp,gp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class mp{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",vp.set(this,void 0),fp.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t,gp(this,fp,void 0),gp(this,vp,void 0)}init(t){gp(this,fp,t),this.setup.autoLight&&"dark"==(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")&&wp(this,fp).setLightMode("dark"),gp(this,vp,new pp("(prefers-color-scheme: dark)")),wp(this,vp).setCallback(this.onChange.bind(this)),wp(this,vp).attach()}destroy(){wp(this,vp)&&wp(this,vp).detach()}onChange(t){var e;if(!wp(this,fp))return;let i=wp(this,fp).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?wp(this,fp).setLightMode("dark"):wp(this,fp).setLightMode("light"))}}vp=new WeakMap,fp=new WeakMap;var yp,kp,bp,Mp,Cp,Ep,Wp,Tp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ap=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xp{constructor(t,e){yp.set(this,void 0),kp.set(this,void 0),bp.set(this,void 0),Mp.set(this,void 0),Cp.set(this,void 0),Ep.set(this,void 0),Wp.set(this,void 0),Tp(this,yp,t),Tp(this,kp,new Ko),Ap(this,kp).setCallback(this.onMove.bind(this)),Tp(this,Cp,void 0),Tp(this,bp,!1),Tp(this,Mp,null),Tp(this,Ep,!1),Tp(this,Wp,e)}attach(){Ap(this,kp).isAttached()||(Ap(this,kp).attach(),Tp(this,Mp,Ap(this,yp).on(F,this.onMoveLock.bind(this))))}detach(){Ap(this,kp).isAttached()&&(Ap(this,kp).detach(),null!=Ap(this,Mp)&&Ap(this,yp).detach(F,Ap(this,Mp)))}isAttached(){return Ap(this,kp).isAttached()}onMove(t){if(!Ap(this,bp))switch(t.type){case"down":Tp(this,Cp,t),Tp(this,Ep,!1);break;case"move":Ap(this,Cp)&&!Ap(this,Ep)&&(this.pushMoveEvent(Ap(this,Cp)),Tp(this,Ep,!0)),this.pushMoveEvent(t);break;case"up":if(this.pushMoveEvent(t),Ap(this,Cp)){if(Ap(this,Wp)){const{diffX:e,diffY:i}=this.getGestureDiff(Ap(this,Cp),t),s=this.calculateGesture(e,i);this.pushGestureEvent(s,e,i)}Tp(this,Cp,void 0)}}}pushMoveEvent(t){Ap(this,yp).emit($,null,{data:t,source:"CuiMoveObserver",timestamp:Date.now(),name:$})}onMoveLock(t){Tp(this,bp,t)}getGestureDiff(t,e){return{diffX:e.x-t.x,diffY:e.y-t.y}}calculateGesture(t,e){const i=.3*window.innerWidth,s=Math.abs(t),n=Math.abs(e);if(s>n&&s>i)return t>0?"right":"left";return n>.3*window.innerHeight?e>0?"down":"up":"none"}pushGestureEvent(t,e,i){const s=this.getGestureEventName(t);s&&Ap(this,yp).emit(s,null,{timespstamp:Date.now(),changeX:e,changeY:i,name:s,source:"CuiMoveObserver"})}getGestureEventName(t){switch(t){case"up":return G;case"down":return X;case"left":return Z;case"right":return J;default:return null}}}yp=new WeakMap,kp=new WeakMap,bp=new WeakMap,Mp=new WeakMap,Cp=new WeakMap,Ep=new WeakMap,Wp=new WeakMap;var Lp,Sp,Pp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ip=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Op{constructor(t){this.name="move-observer-plugin",Lp.set(this,void 0),Sp.set(this,void 0),this.description="CuiMoveObserverPlugin",Pp(this,Lp,void 0),Pp(this,Sp,!1!==t)}init(t){Pp(this,Lp,new xp(t.bus,Ip(this,Sp))),Ip(this,Lp).attach()}destroy(){Ip(this,Lp)&&Ip(this,Lp).isAttached()&&Ip(this,Lp).detach()}}Lp=new WeakMap,Sp=new WeakMap;var Np=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function Hp(t,e,i,s){return Np(this,void 0,void 0,(function*(){let n=e.setup.prefix;if(!at(t.title,t.id))return;const r=[_p(t.title,i,s)];return it(t.message)&&r.push(function(t,e){return new Jl("div").setClasses(e.NOTIFICATION_BODY_CLS).setRawChildren(new Jl("div").setTextContent(t))}(t.message,i)),it(t.actions)&&r.push(function(t,e,i){return new Jl("div").setClasses(e.NOTIFICATION_FOOTER_CLS).setRawChildren(function(t,e){return new Jl("ul").setRawChildren(...t.map(t=>new Jl("li").setRawChildren(new Jl("a").onEvent("click",()=>{try{t.callback()}catch(t){Ht.get("Notifications").exception(t,"OnActionClick")}finally{e()}}).setTextContent(t.name))))}(t,i))}(t.actions,i,s)),new Jl("div").setClasses(i.NOTIFICATION_CLS,i.MARGIN_SMALL_VERTICAL,function(t,e){return`${t}-${null!=e?e:"default"}`}(n,t.type)).setId(t.id).setRawChildren(...r).build()}))}function _p(t,e,i){const s=new Jl("span").setClasses(e.NOTIFICATION_TITLE_CLS).setTextContent(t),n=new Gn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 3,3 17,17"></path><path d="M 17,3 3,17"></path></svg>').build(),r=new Jl("a").setClasses(e.ICON_CLS,e.NOTIFICATION_CLOSE_CLS).onEvent("click",i);n&&r.setChildren(n);return new Jl("div").setClasses(e.NOTIFICATION_HEADER_CLS).setRawChildren(s,r)}var Dp,Rp,$p,Fp,Bp,qp,zp,Vp=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Up=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kp{constructor(t){var e;this.name="notification-plugin",Dp.set(this,void 0),Rp.set(this,void 0),$p.set(this,void 0),Fp.set(this,void 0),Bp.set(this,void 0),qp.set(this,void 0),zp.set(this,void 0),this.description="CuiNotificationPlugin",Up(this,Rp,null),Up(this,Dp,void 0),Up(this,$p,null),Up(this,Fp,{}),Up(this,Bp,{}),Up(this,qp,void 0),Up(this,zp,null!==(e=t.timeout)&&void 0!==e?e:5e3)}init(t){this.createCache(t.setup.prefix),this.getOrCreateContainer(t,document.body),Up(this,qp,new ni(t.interactions)),Up(this,Dp,t),Up(this,$p,jp(this,Dp).bus.on(Q,this.onEvent.bind(this),{$cuid:this.name}))}destroy(){jp(this,Rp)&&jp(this,Rp).remove(),jp(this,$p)&&jp(this,Dp)&&jp(this,Dp).bus.detach(Q,jp(this,$p))}onEvent(t){(function(t){return it(t)&&at(t.id,t.title)})(t)&&jp(this,Dp)&&jp(this,qp)&&jp(this,Rp)&&(jp(this,Bp)[t.id]||Hp(t,jp(this,Dp),jp(this,Fp),()=>{this.onNotificationClose(t,!1,!0)}).then(e=>{if(!e)return;this.addNotificationToTree(e);let i=null;!1!==t.auto&&(i=this.setAutoClose(t)),jp(this,Bp)[t.id]={element:e,timeoutId:i},this.act(e,jp(this,Fp).NOTIFICATION_ANIMATION_IN).then(()=>{e.classList.add(jp(this,Fp).NOTIFICATION_ACTIVE_CLS)})}))}setAutoClose(t){return setTimeout(()=>{this.onNotificationClose(t,!0,!1)},jp(this,zp))}addNotificationToTree(t){jp(this,Dp).interactions.mutate(()=>{0===jp(this,Rp).children.length?jp(this,Rp).appendChild(t):jp(this,Rp).insertBefore(t,jp(this,Rp).firstChild)},null)}onNotificationClose(t,e,i){if(!t||!jp(this,qp)||!jp(this,Dp))return;const s=jp(this,Bp)[t.id];s&&(e||clearTimeout(s.timeoutId),this.act(s.element,jp(this,Fp).NOTIFICATION_ANIMATION_OUT).then(()=>{jp(this,Dp).bus.emit(tt,null,Object.assign(Object.assign({},t),{dissmissed:i})),s.element.remove(),delete jp(this,Bp)[t.id]}))}getOrCreateContainer(t,e){Up(this,Rp,document.getElementById("notifications-container")),jp(this,Rp)||(Up(this,Rp,new Jl("div").setClasses(gt("{prefix}-notification-container",t.setup.prefix)).build()),e.appendChild(jp(this,Rp)))}createCache(t){Up(this,Fp,{NOTIFICATION_CLS:gt("{prefix}-notification",t),NOTIFICATION_HEADER_CLS:gt("{prefix}-notification-header",t),NOTIFICATION_TITLE_CLS:gt("{prefix}-notification-title",t),NOTIFICATION_BODY_CLS:gt("{prefix}-notification-body",t),NOTIFICATION_FOOTER_CLS:gt("{prefix}-notification-footer",t),NOTIFICATION_ACTIVE_CLS:gt("{prefix}-active",t),NOTIFICATION_ANIMATION_IN:gt("{prefix}-notification-animation-in",t),NOTIFICATION_ANIMATION_OUT:gt("{prefix}-notification-animation-out",t),NOTIFICATION_ICON_CLS:gt("{prefix}-notification-icon",t),NOTIFICATION_CLOSE_CLS:gt("{prefix}-notification-close",t),ICON_CLS:gt("{prefix}-icon",t),MARGIN_SMALL_VERTICAL:gt("{prefix}-margin-small-vertical",t)})}act(t,e,i){return Vp(this,void 0,void 0,(function*(){const s=null!=i?i:jp(this,Dp).setup.animationTime,n=new pi(e);return jp(this,qp).performAction(t,n,null!=s?s:0)}))}}Dp=new WeakMap,Rp=new WeakMap,$p=new WeakMap,Fp=new WeakMap,Bp=new WeakMap,qp=new WeakMap,zp=new WeakMap;var Yp,Xp,Gp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Jp{constructor(t){this.description="Auto print mode",this.name="auto-print",Yp.set(this,void 0),Xp.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t,Gp(this,Yp,void 0),Gp(this,Xp,void 0)}init(t){Gp(this,Xp,t),this.setup.autoPrint&&window.matchMedia&&window.matchMedia("print").matches&&Zp(this,Xp).setPrintMode(!0),Gp(this,Yp,new pp("print")),Zp(this,Yp).setCallback(this.onChange.bind(this)),Zp(this,Yp).attach()}destroy(){Zp(this,Yp)&&Zp(this,Yp).detach()}onChange(t){var e,i;if(!Zp(this,Xp))return;this.setup=Zp(this,Xp).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(t.matches?Zp(this,Xp).setPrintMode(!0):Zp(this,Xp).setPrintMode(!1))}}Yp=new WeakMap,Xp=new WeakMap;var Qp,tv,ev,iv,sv,nv,rv,ov,hv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},av=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class lv{constructor(t,e){Qp.set(this,void 0),tv.set(this,void 0),ev.set(this,void 0),iv.set(this,void 0),sv.set(this,void 0),nv.set(this,void 0),rv.set(this,void 0),ov.set(this,void 0),hv(this,Qp,[]),hv(this,tv,[]),hv(this,ev,window.innerWidth),hv(this,iv,!1),hv(this,sv,lt(window.innerWidth)),hv(this,nv,null!=e?e:0),hv(this,rv,t),hv(this,ov,this.listener.bind(this))}observe(t){av(this,Qp).findIndex(e=>e===t)<0&&av(this,Qp).push(t)}unobserve(t){let e=av(this,Qp).findIndex(e=>e===t);e>=0&&av(this,Qp).splice(e,1)}connect(){window.addEventListener("resize",av(this,ov))}disconnect(){window.removeEventListener("resize",av(this,ov))}pushUpdateToItems(t){av(this,Qp).length<1||(hv(this,tv,[]),av(this,Qp).forEach(e=>{av(this,tv).push(e.resize(t))}),Promise.all(av(this,tv)),hv(this,tv,[]))}listener(t){if(av(this,iv))return;hv(this,iv,!0);const e=window.innerWidth-av(this,ev);if(Math.abs(e)>=av(this,nv)){const t=lt(window.innerWidth);if(t!==av(this,sv)){const e={current:t,previous:av(this,sv),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now(),name:M,source:"CuiResizeObserver"};av(this,rv).emit(M,"",e),this.pushUpdateToItems(e),hv(this,sv,t)}}hv(this,iv,!1)}}Qp=new WeakMap,tv=new WeakMap,ev=new WeakMap,iv=new WeakMap,sv=new WeakMap,nv=new WeakMap,rv=new WeakMap,ov=new WeakMap;var cv,uv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pv{constructor(t){this.name="resize-observer-plugin",cv.set(this,void 0),this.description="CuiResizeObserverPlugin",uv(this,cv,void 0),this.setup=t}init(t){var e;uv(this,cv,new lv(t.bus,null!==(e=this.setup.resizeThreshold)&&void 0!==e?e:20)),dv(this,cv).connect()}destroy(){dv(this,cv)&&dv(this,cv).disconnect()}}cv=new WeakMap;var vv,fv,gv,wv,mv,yv,kv,bv,Mv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Cv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ev=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wv{constructor(t,e,i){vv.set(this,void 0),fv.set(this,void 0),gv.set(this,void 0),wv.set(this,void 0),mv.set(this,void 0),yv.set(this,void 0),kv.set(this,void 0),bv.set(this,void 0),Cv(this,vv,t),Cv(this,fv,`.${e}-toast`),Cv(this,gv,e+"-toast"),Cv(this,wv,e+"-active"),Cv(this,mv,i),Cv(this,yv,!1),Cv(this,kv,e+"-toast-animation-in"),Cv(this,bv,e+"-toast-animation-out")}show(t){return Mv(this,void 0,void 0,(function*(){if(Ev(this,yv))return!1;Cv(this,yv,!0);let e=document.querySelector(Ev(this,fv));return it(e)||(e=document.createElement("div"),e.classList.add(Ev(this,gv)),document.body.appendChild(e),yield nt(10)),Ev(this,vv).mutate(()=>{e.textContent=t,e.classList.add(d),e.classList.add(Ev(this,kv))},this),yield nt(Ev(this,mv)),Ev(this,vv).mutate(()=>{e.classList.remove(d),e.classList.remove(Ev(this,kv)),e.classList.add(Ev(this,wv))},this),yield nt(3e3),Ev(this,vv).mutate(()=>{e.classList.add(d),e.classList.add(Ev(this,bv))},this),setTimeout(()=>{Ev(this,vv).mutate(()=>{e.classList.remove(d),e.classList.remove(Ev(this,bv)),e.classList.remove(Ev(this,wv))},this),Cv(this,yv,!1)},Ev(this,mv)),!0}))}}vv=new WeakMap,fv=new WeakMap,gv=new WeakMap,wv=new WeakMap,mv=new WeakMap,yv=new WeakMap,kv=new WeakMap,bv=new WeakMap;var Tv,Av,xv,Lv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Sv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pv{constructor(t){this.name="toast-plugin",Tv.set(this,void 0),Av.set(this,void 0),xv.set(this,void 0),this.description="CuiToastPlugin",this.setup=t,Lv(this,Tv,void 0),Lv(this,Av,null),Lv(this,xv,void 0)}init(t){var e;Lv(this,xv,t),Sv(this,Tv)||Lv(this,Tv,new Wv(t.interactions,t.setup.prefix,null!==(e=t.setup.animationTime)&&void 0!==e?e:300)),Lv(this,Av,t.bus.on(U,this.onToastShow.bind(this),{$cuid:this.name}))}destroy(){Sv(this,xv)&&Sv(this,Av)&&(Sv(this,xv).bus.detach(U,Sv(this,Av)),Lv(this,Av,null))}onToastShow(t){Sv(this,Tv)&&Sv(this,xv)&&(Sv(this,xv).bus.emit(j,null,[]),Sv(this,Tv).show(t).then(()=>{Sv(this,xv)&&Sv(this,xv).bus.emit(K,null,[])}))}}Tv=new WeakMap,Av=new WeakMap,xv=new WeakMap;var Iv,Ov=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Nv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};Iv=new WeakMap;const _v="0.4.2";window.cuiInit=new class{constructor(){Iv.set(this,void 0),Nv(this,Iv,!1)}init(t){var e,i;return Ov(this,void 0,void 0,(function*(){if(Hv(this,Iv))return console.log("Module is already initialized"),!1;const s=new os,n=function(t){var e;let i=!t||t.autoLight,s=!t||t.autoPrint;return[new mp({autoLight:i}),new Jp({autoPrint:s}),new rp({}),new Pd,new Op,new pv({}),new Pv({}),new Td,new Kp({timeout:t.notifcationTimeout}),new Fd(null!==(e=t.focusSetup)&&void 0!==e?e:{})]}({autoLight:!0,autoPrint:!0}),r=function(t){let e=null==t?void 0:t.prefix;return[new kh(e),new Gu(e),new hr(e),new Bc(e),new fl(e),new $l(e),new _h(e),new Ga(e),new fr(e),new Du(e),new Or(e),new Kh(e),new on(e),new Do(e),new qa(e),new Cu(e),new Au(e),new ph(e),new lu(e),new zn(e),new Cr(e),new Ic(e),new ul(e)]}({prefix:null===(e=t.setup)||void 0===e?void 0:e.prefix});let o=n;t.plugins&&(o=Object.assign(Object.assign({},n),t.plugins));let h=yield s.init(Object.assign(Object.assign({},t),{plugins:o,components:it(t.components)?[...r,...t.components]:r}));return h.result?(Nv(this,Iv,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(i=h.message)&&void 0!==i?i:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}}])}));
//# sourceMappingURL=index.min.js.map