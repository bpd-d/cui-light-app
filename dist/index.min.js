!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light-app",[],e):"object"==typeof exports?exports["cui-light-app"]=e():t["cui-light-app"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"CUI_LIGHT_VERSION",(function(){return ov})),i.d(e,"CuiInstance",(function(){return ps}));class s extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class n extends s{constructor(t){super("ItemNotFoundError",t)}}class r extends s{constructor(t){super("ArgumentError",t)}}class o extends s{constructor(t){super("CuiInstanceInitError",t)}}class h extends s{constructor(t){super("RegisterElementError",t)}}class a extends s{constructor(t){super("AnimatorError",t)}}class l extends s{constructor(t){super("CSSVariableError",t)}}class c extends s{constructor(t){super("CuiColorError",t)}}class u extends s{constructor(t){super("CuiPositionError",t)}}const d="dark",p="animation-progress",g="print",v="swiping-on",f={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},m="--cui-color-light-app-background",w="--cui-color-dark-app-background",k="--cui-color-light-background",y="--cui-color-dark-background ",b="--cui-color-light-border",C="--cui-color-dark-border",M={light:{base:"--cui-color-light-base",muted:"--cui-color-light-muted",active:"--cui-color-light-active"},dark:{base:"--cui-color-dark-base",muted:"--cui-color-dark-muted",active:"--cui-color-dark-active"},accent:{base:"--cui-color-primary",muted:"--cui-color-primary-muted",active:"--cui-color-primary-active"},secondary:{base:"--cui-color-secondary",muted:"--cui-color-secondary-muted",active:"--cui-color-secondary-active"},success:{base:"--cui-color-success",muted:"--cui-color-success-muted",active:"--cui-color-success-active"},warning:{base:"--cui-color-warning",muted:"--cui-color-warning-muted",active:"--cui-color-warning-active"},error:{base:"--cui-color-error",muted:"--cui-color-error-muted",active:"--cui-color-error-active"}},A={fontSize:"--{prefix}-font-size",lineHeight:"--{prefix}-line-height",animationTime:"--{prefix}-animation-time",animationTimeLong:"--{prefix}-animation-time-long",animationTimeShort:"--{prefix}-animation-time-short",colorLightAppBackground:"--{prefix}-color-light-app-background",colorLightBackground:"--{prefix}-color-light-background",colorLightBorder:"--{prefix}-color-light-border",colorLightBase:"--{prefix}-color-light-base",colorLightActive:"--{prefix}-color-light-active",colorLightMuted:"--{prefix}-color-light-muted",colorDarkAppBackground:"--{prefix}-color-dark-app-background",colorDarkBackground:"--{prefix}-color-dark-background",colorDarkBorder:"--{prefix}-color-dark-border",colorDarkBase:"--{prefix}-color-dark-base",colorDarkActive:"--{prefix}-color-dark-active",colorDarkMuted:"--{prefix}-color-dark-muted",colorAccent:"--{prefix}-color-primary",colorAccentActive:"--{prefix}-color-primary-active",colorAccentMuted:"--{prefix}-color-primary-muted",colorAccentShade:"--{prefix}-color-primary-shade",colorAccentShadeDark:"--{prefix}-color-primary-shade-dark",colorSecondary:"--{prefix}-color-secondary",colorSecondaryActive:"--{prefix}-color-secondary-active",colorSecondaryMuted:"--{prefix}-color-secondary-muted",colorSecondaryShade:"--{prefix}-color-secondary-shade",colorSecondaryShadeDark:"--{prefix}-color-secondary-shade-dark",colorWarning:"--{prefix}-color-warning",colorWarningActive:"--{prefix}-color-warning-active",colorWarningMuted:"--{prefix}-color-warning-muted",colorWarningShade:"--{prefix}-color-warning-shade",colorWarningShadeDark:"--{prefix}-color-warning-shade-dark",colorSuccess:"--{prefix}-color-success",colorSuccessActive:"--{prefix}-color-success-active",colorSuccessMuted:"--{prefix}-color-success-muted",colorSuccessShade:"--{prefix}-color-success-shade",colorSuccessShadeDark:"--{prefix}-color-success-shade-dark",colorError:"--{prefix}-color-error",colorErrorActive:"--{prefix}-color-error-active",colorErrorMuted:"--{prefix}-color-error-muted",colorErrorShade:"--{prefix}-color-error-shade",colorErrorShadeDark:"--{prefix}-color-error-shade-dark",inputBackground:"--{prefix}-input-background-color",colorShade:"--{prefix}-color-shade",colorShadeDarker:"--{prefix}-color-shade-darker",colorShadeLight:"--{prefix}-color-shade-light",colorShadeLighter:"--{prefix}-color-shade-light-lighter",outline:"--{prefix}-outline",borderRadius:"--{prefix}-border-radius",padding:"--{prefix}-padding",margin:"--{prefix}-margin",scrollbarWidth:"--{prefix}-scrollbar-width",componentSpace:"--{prefix}-component-space",accordionIcon:"--{prefix}-accordion-icon"};class E{}E.logLevel="none",E.prefix="cui";const W="instance-initialized",T="instance-finished",x="resize",S="open",L="opened",I="close",P="closed",D="toggle",O="toggled",N="switch",B="switched",_="scroll",H="targetchange",$="intersection",R="keydown",F="windowclick",q="offset",U="progresschange",z="progresschanged",V="globalmove",j="movelock",Y="pause",X="paused",K="sorted",G="sortstart",Z="toast",J="toastshow",Q="toasthidden",tt="alert",et="gesture-down",it="gesture-up",st="gesture-left",nt="gesture-right",rt="notify",ot="notified",ht=function*(){let t=0;for(;;){((yield t++)||t>2e5)&&(t=0)}}();function at(t,e=!0){return null!=t&&(!e||!function(t){if("string"==typeof t)return 0===t.length;if("boolean"==typeof t)return t;if(Array.isArray(t))return 0===t.length;return!1}(t))}function lt(t,e){if(!at(t)||!at(e))throw new r("Missing argument value");return`${t}-${e}`}function ct(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function ut(t,e,i){return t<e?e:t>i?i:t}function dt(t,e,i,s){return null==t||isNaN(t)?s:ut(t,e,i)}function pt(t){return at(t)?`[${t.join("],[")}]`:""}function gt(...t){if(!at(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!at(t[i]))return!1;return!0}function vt(t){let e="none";return t>=640&&(e="small"),t>=960&&(e="medium"),t>=1200&&(e="large"),t>=1600&&(e="xlarge"),e}function ft(t){let e={};return at(t)?(e=function(t){let e=null;if(at(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error((i="An exception occured",s="Functions",n="parseJsonString",`[${(new Date).toLocaleString()}][${null!=s?s:"-"}][${null!=n?n:"-"}][${i}]`),t)}return e}var i,s,n;return null}(t.trim()),at(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=Pt(t),s=void 0,n="";i.length<2||(s=i[0].trim(),n=i[1].trim(),s&&(e[s]=n.replace("U+0003B",";")))})):e=t),e):e}function mt(t,e){let i=parseInt(t);return isNaN(i)?e:i}function wt(t,e){return at(t)&&at(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function kt(t,e,i){return at(t)&&t>=e&&t<=i}function yt(t,e){return gt(t,e)?ft(t.getAttribute(e)):null}function bt(t){return!!at(t)&&["y","t","true","yes"].includes(t.toLowerCase())}function Ct(t,e){return at(t)?bt(t):e}function Mt(t,e){return at(t)?t.toLowerCase():e}function At(t){return"string"==typeof t}function Et(t,e){return at(t)?t.replace("{prefix}",null!=e?e:""):t}function Wt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function Tt(t,e,i,s){let n=t;n.$handlers={};let r=function(t,e){return t&&at(t.hasAttribute)?e.filter(e=>t.hasAttribute(e)):[]}(t,i);at(r)&&(n.$cuid=t.hasAttribute("cuid")?t.getAttribute("cuid"):function(t){return`${at(t)?t:"cui-element"}-${ht.next().value}`}(t.tagName),t.setAttribute("cuid",n.$cuid),r.forEach(i=>{let o=e.find(t=>t.attribute===i);if(at(o))try{s.styleAppender.append(o.getStyle());let e=o.get(t,s);n.$handlers[o.attribute]=e,n.$handlers[o.attribute].handle(yt(t,o.attribute))}catch(t){let e=r?r.join(", "):"";throw new h(`An error occured during [${e}] initialization: ${t.message}`)}}))}function xt(t){if(!at(t))return;let e=t.parentElement;return at(e)&&at(e.$cuid)?e:xt(e)}function St(t){let e=0;return t?(Array.from(t.children).forEach(t=>{e+=t.getBoundingClientRect().height}),e>0?e+4:e):-1}function Lt(t,e){if(gt(t,e))for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}function It(t,e,i){let s=-1;switch(t){case"prev":s=e<=0?i-1:e-1;break;case"next":s=e<i-1?e+1:0;break;case"first":s=0;break;case"last":s=i-1;default:s=mt(t,-1)}return s}function Pt(t){let e=[];if(!at(t))return e;let i=t.split(":");return 1===i.length?i:[i.shift(),i.join(":")]}class Dt{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.prefix="cui",this.plugins={},this.root=document.body}fromInit(t){var e;return this.prefix=null!==(e=t.prefix)&&void 0!==e?e:"cui",this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this.root=t.root,this}}class Ot{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.root=document.body,this.busSetup=void 0,this.development=void 0}}class Nt{constructor(t,e){this.level=e,this.component=t,this.id="-"}setLevel(t){this.level=t}setId(t){this.id=t}debug(t,e){"debug"===this.level&&console.log(this.prepString(t,"debug",e))}error(t,e){"error"!==this.level&&"debug"!==this.level&&"warning"!==this.level||console.error(this.prepString(t,"error",e))}warning(t,e){"warning"!==this.level&&"debug"!==this.level||console.warn(this.prepString(t,"warning",e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,"exception",e)),"debug"===this.level&&console.error(t.stack)}performance(t,e){if("debug"!==this.level)return;let i=Date.now();t(),console.log(this.prepString(`Performance measure: ${Date.now()-i}ms`,"performance",e))}prepString(t,e,i){return`[${(new Date).toLocaleString()}][${e}][${this.component}][${null!=i?i:"-"}][${this.id}][${t}]`}}class Bt{static get(t,e){return new Nt(t,null!=e?e:E.logLevel)}}var _t,Ht,$t,Rt,Ft,qt,Ut,zt,Vt,jt,Yt,Xt,Kt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Gt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Zt{constructor(t,e){_t.set(this,void 0),Ht.set(this,void 0),$t.set(this,void 0),Rt.set(this,void 0),Ft.set(this,void 0),qt.set(this,void 0),Ut.set(this,void 0),Kt(this,_t,void 0),this.plugins=void 0,Kt(this,Ht,void 0),Kt(this,$t,t),this._log=Bt.get("CuiMutationObserver"),Kt(this,Rt,[]),Kt(this,Ft,[]),Kt(this,qt,e),Kt(this,Ut,"")}setPlugins(t){return this.plugins=t,this}setComponents(t){return Kt(this,Rt,t),this}setAttributes(t){return Kt(this,Ht,{attributes:!0,subtree:!0,childList:!0,attributeFilter:t}),Kt(this,Ft,t),Kt(this,Ut,pt(t)),this}start(){return this._log.debug("Starting"),Gt(this,Ht)?(Kt(this,_t,new MutationObserver(this.mutationCallback.bind(this))),Gt(this,_t).observe(Gt(this,$t),Gt(this,Ht)),this._log.debug("Started"),this):(this._log.error("Cannot start - options are not defined"),this)}stop(){return this._log.debug("Stopping"),Gt(this,_t)?(Gt(this,_t).disconnect(),Kt(this,_t,void 0),this._log.debug("Stopped"),this):(this._log.debug("Observer not available"),this)}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;gt(t.attributeName,e)?gt(e.$handlers,e.$handlers[t.attributeName])&&e.$handlers[t.attributeName].refresh(yt(e,t.attributeName)):this._log.error("Mutation attribute doesn't not exisist");break;case"childList":this.handleChildListMutation(t)}at(this.plugins)&&this.plugins.onMutation(t).then(()=>{})})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(this._log.debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes)):i>0&&(this._log.debug("Removing nodes: "+i),this.handleRemovedNodes(t.removedNodes))}handleAddedNodes(t){t.forEach(t=>{try{Tt(t,Gt(this,Rt),Gt(this,Ft),Gt(this,qt));let e=t.hasChildNodes()?t.querySelectorAll(Gt(this,Ut)):null;at(e)&&e.forEach(t=>{Tt(t,Gt(this,Rt),Gt(this,Ft),Gt(this,qt))})}catch(t){this._log.exception(t)}})}handleRemovedNodes(t){t.forEach(t=>{this.destroySingleElement(t);let e=t.hasChildNodes()?t.querySelectorAll(Gt(this,Ut)):null;at(e)&&e.forEach(t=>{this.destroySingleElement(t)})})}destroySingleElement(t){let e=t;if(e.$handlers)for(let t in e.$handlers)if(e.$handlers.hasOwnProperty(t))try{e.$handlers[t].destroy()}catch(e){this._log.exception(e,"remove - "+t)}}}_t=new WeakMap,Ht=new WeakMap,$t=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,qt=new WeakMap,Ut=new WeakMap;class Jt{constructor(t){zt.set(this,void 0),Vt.set(this,void 0),jt.set(this,void 0),Yt.set(this,void 0),Xt.set(this,{childList:!0,subtree:!0}),Kt(this,Vt,void 0),Kt(this,Yt,!1),Kt(this,zt,!1),Kt(this,jt,t)}observe(){Gt(this,zt)||Gt(this,Yt)||!Gt(this,Vt)||(Gt(this,Vt).observe(Gt(this,jt),Gt(this,Xt)),Kt(this,zt,!0))}unobserve(){Gt(this,zt)&&Gt(this,Vt)&&(Gt(this,Vt).disconnect(),Kt(this,zt,!1))}isObserving(){return Gt(this,zt)}disable(t){Kt(this,Yt,t),Gt(this,Yt)&&this.unobserve()}onMutation(t){Gt(this,zt)&&this.unobserve(),Kt(this,Vt,new MutationObserver(t))}}zt=new WeakMap,Vt=new WeakMap,jt=new WeakMap,Yt=new WeakMap,Xt=new WeakMap;var Qt,te,ee,ie,se,ne,re=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},oe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class he{constructor(){Qt.set(this,void 0),te.set(this,void 0),ee.set(this,void 0),ie.set(this,!1),se.set(this,void 0),ne.set(this,void 0),re(this,ee,window.requestAnimationFrame.bind(window)),re(this,Qt,[]),re(this,te,[]),re(this,se,5),re(this,ne,void 0)}onError(t){re(this,ne,t)}mutate(t,e,...i){oe(this,te).push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){oe(this,Qt).push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!oe(this,ie)){if(re(this,ie,!0),t&&t>=oe(this,se))throw new Error("Fast Dom limit reached");oe(this,ee).call(this,this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=oe(this,Qt),n=oe(this,te);try{this.run(n),this.run(s)}catch(t){oe(this,ne)?oe(this,ne).call(this,t):console.error("An error has been captured in interactions: "+t.message),i=t}re(this,ie,!1),(i||oe(this,Qt).length||oe(this,te).length)&&this.schedule(e+1)}}Qt=new WeakMap,te=new WeakMap,ee=new WeakMap,ie=new WeakMap,se=new WeakMap,ne=new WeakMap;class ae{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var le,ce,ue=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},de=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pe{constructor(t){le.set(this,void 0),ce.set(this,void 0),ue(this,le,[]),ue(this,ce,[]),t&&t.forEach(t=>{if(!at(t.key))throw ue(this,le,[]),ue(this,ce,[]),new r("Key is empty");this.add(t.key,t.value)})}add(t,e){if(this.throwOnEmptyKey(t),this.containsKey(t))throw new Error("Key already exists");de(this,le).push(t),de(this,ce).push(e)}remove(t){if(!at(t))return;let e=de(this,le).indexOf(t);e>=0&&(de(this,le).splice(e,1),de(this,ce).splice(e,1))}get(t){this.throwOnEmptyKey(t);let e=this.indexOf(t);if(!(e<0))return de(this,ce)[e]}containsKey(t){return at(t)&&this.indexOf(t)>=0}keys(){return de(this,le)}values(){return de(this,ce)}indexOf(t){return at(t)?de(this,le).indexOf(t):-1}update(t,e){this.throwOnEmptyKey(t);let i=this.indexOf(t);if(i<0)throw new n(`Item with key [${t}] not found`);de(this,ce)[i]=e}clear(){ue(this,ce,[]),ue(this,le,[])}throwOnEmptyKey(t){if(!at(t))throw new r("Key is empty")}}le=new WeakMap,ce=new WeakMap;var ge,ve,fe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},me=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class we{constructor(t){ge.set(this,void 0),ve.set(this,void 0),fe(this,ge,new pe),fe(this,ve,null!=t?t:500)}put(t,e){at(t)&&(this.has(t)?me(this,ge).update(t,e):(this.clean(),me(this,ge).add(t,e)))}get(t){if(!this.has(t))return;let e=me(this,ge).get(t);if(e&&e.refresh())return e;me(this,ge).remove(t)}has(t){return!!at(t)&&me(this,ge).containsKey(t)}remove(t){return!!at(t)&&(!!this.has(t)&&(me(this,ge).remove(t),!0))}clear(){me(this,ge).clear()}clean(){me(this,ge).keys().length>=me(this,ve)&&me(this,ge).remove(me(this,ge).keys()[0])}}ge=new WeakMap,ve=new WeakMap;var ke,ye,be,Ce=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Me=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ae=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ee{constructor(){this.queue=[],this.isBusy=!1}idMatches(t,e){return!at(t)||at(t)&&t==e}}class We extends Ee{constructor(t){super(),ke.set(this,void 0),ye.set(this,void 0),Me(this,ye,t),Me(this,ke,Bt.get("SimpleEventEmitHandler"))}handle(t,e,i){return Ce(this,void 0,void 0,(function*(){at(t)?(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||this.isBusy||(this.isBusy=!0,this.queue.length>0&&(yield this.perform()),this.isBusy=!1)):Ae(this,ke).warning("No events provided")}))}perform(){return Ce(this,void 0,void 0,(function*(){let t=this.queue.shift();if(t)for(let e in t.events){let i=t.events[e];try{this.idMatches(t.cuid,i.$cuid)&&(yield Ae(this,ye).execute(i.callback,t.args))}catch(t){Ae(this,ke).error(t)}}}))}}ke=new WeakMap,ye=new WeakMap;class Te extends Ee{constructor(t){super(),be.set(this,void 0),Me(this,be,t)}handle(t,e,i){return Ce(this,void 0,void 0,(function*(){at(t)&&(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||(this.isBusy=!0,this.perform(),this.queue.length>0&&this.perform(),this.isBusy=!1))}))}perform(){return Ce(this,void 0,void 0,(function*(){let t=this.queue.shift(),e=[];if(!t)return Promise.all(e);for(let i in t.events){let s=t.events[i];this.idMatches(t.cuid,s.$cuid)&&e.push(Ae(this,be).execute(s.callback,t.args))}return Promise.all(e)}))}}be=new WeakMap;var xe=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class Se{execute(t,e){return xe(this,void 0,void 0,(function*(){e=null!=e?e:[],t(...e)}))}}var Le,Ie,Pe,De,Oe,Ne,Be,_e,He=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},$e=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Re=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fe{constructor(t,e){Le.set(this,void 0),Ie.set(this,void 0),Pe.set(this,void 0),De.set(this,void 0),$e(this,Le,{}),$e(this,Pe,t),$e(this,De,null!=e?e:"CuiEventBus"),$e(this,Ie,Bt.get(Re(this,De)))}on(t,e,i){if(!gt(t,e))throw new r("Missing argument");let s=Re(this,De)+"-"+function(){let t=Wt(1,1e3),e=Wt(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}();return Re(this,Le)[t]||(Re(this,Le)[t]={}),this.isAttached(Re(this,Le)[t],s,i)?null:(Re(this,Ie).debug(`Attaching new event: [${t}] for: [${s}]`),Re(this,Le)[t][s]={callback:e,$cuid:this.getCuid(i)},s)}detach(t,e){if(!gt(t,e))throw new r("Missing argument");let i=Re(this,Le)[t];Re(this,Ie).debug(`Detaching item: [${e}] from [${t}]`),this.isAttached(i,e)&&delete i[e]}detachAll(t){at(t)&&Re(this,Le)[t]?delete Re(this,Le)[t]:Re(this,Ie).error("Event name is missing or incorrect","detachAll")}emit(t,e,...i){return He(this,void 0,void 0,(function*(){if(!at(t))throw new r("Event name is incorrect");let s=Re(this,Le)[t];return at(s)&&(Re(this,Ie).debug(`Emit: [${t}]`),yield Re(this,Pe).handle(s,e,i)),!0}))}isSubscribing(t,e,i){let s=Re(this,Le)[t];return this.isAttached(s,e,i)}detachByCuid(t,e){if(!gt(t,e))return;let i=Re(this,Le)[t];at(i)&&Lt(Object.assign({},i),(t,s)=>{s.$cuid===e&&delete i[t]})}isAttached(t,e,i){return at(i)?at(t)&&at(e)&&at(t[e])&&t[e].$cuid==i.$cuid:at(t)&&at(e)&&at(t[e])}getCuid(t){return at(t)?t.$cuid:null}}Le=new WeakMap,Ie=new WeakMap,Pe=new WeakMap,De=new WeakMap;class qe{constructor(t){if(Oe.set(this,void 0),Ne.set(this,void 0),Be.set(this,void 0),_e.set(this,void 0),$e(this,Ne,Bt.get("CuiEventBus")),$e(this,Be,[]),$e(this,Oe,{}),$e(this,_e,0),at(t)){Re(this,Ne).debug("Initiating buses"),(1===t.length?t:t.sort((t,e)=>t.priority-e.priority)).forEach((t,e)=>{Re(this,Be).push(this.initBusInstance(t.name,t.handler)),$e(this,Oe,Object.assign(Object.assign({},Re(this,Oe)),this.mapEvents(t.eventsDef,e))),Re(this,Ne).debug(`Bus ${t.name} has been initialized with number: ${e}`)}),Re(this,Be).push(this.initBusInstance("DefaultEventBus","tasked")),$e(this,_e,Re(this,Be).length-1),Re(this,Ne).debug("Bus initialization finished")}}on(t,e,i){if(!gt(t,e))throw new r("Missing argument");return this.get(t).on(t,e,i)}detach(t,e,i){if(!gt(t,e))throw new r("Missing argument");this.get(t).detach(t,e,i)}detachAll(t){this.get(t).detachAll(t)}emit(t,e,...i){return He(this,void 0,void 0,(function*(){if(!at(t))throw new r("Event name is incorrect");return this.get(t).emit(t,e,...i)}))}isSubscribing(t,e,i){return this.get(t).isSubscribing(t,e,i)}detachByCuid(t,e){gt(t,e)&&this.get(t).detachByCuid(t,e)}initBusInstance(t,e){if(!gt(t,e))throw new r("Bus name or handler name is incorrect");let i=new Se,s=class{static get(t,e){switch(t){case"tasked":return new Te(e);default:return new We(e)}}}.get(e,i);return new Fe(s,t)}mapEvents(t,e){return t.reduce((t,i)=>t[i]?t:Object.assign(Object.assign({},t),{[i]:e}),{})}get(t){let e=Re(this,Oe)[t];return Re(this,Be)[null!=e?e:Re(this,_e)]}}Oe=new WeakMap,Ne=new WeakMap,Be=new WeakMap,_e=new WeakMap;new WeakMap,new WeakMap;class Ue{constructor(t){}append(t){if(at(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.appendChild(s),e.appendChild(i)}return!0}}var ze,Ve,je,Ye,Xe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ke=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ge{constructor(t){ze.set(this,void 0),Ve.set(this,void 0),je.set(this,15),Ye.set(this,15),Xe(this,ze,document.documentElement),Xe(this,Ve,t)}setAppBackground(t,e){this.setPropertyIn(m,t.toCssString()),this.setPropertyIn(w,e.toCssString())}setComponentBackground(t,e){this.setPropertyIn(k,t.toCssString()),this.setPropertyIn(y,e.toCssString())}setBordersColors(t,e){this.setPropertyIn(b,t.toCssString()),this.setPropertyIn(C,e.toCssString())}setColor(t,e){var i,s;const n=M[t],r=e.base;if(!at(n)||!at(r))return;const o=null!==(i=e.muted)&&void 0!==i?i:r.clone().lighten(Ke(this,je)),h=null!==(s=e.active)&&void 0!==s?s:r.clone().darken(Ke(this,Ye));Ke(this,Ve).mutate(()=>{this.setProperty(n.base,r.toCssString()),this.setProperty(n.active,h.toCssString()),this.setProperty(n.muted,o.toCssString())},this)}setLightenFactor(t){Xe(this,je,ut(t,0,100))}setDarkenFactor(t){Xe(this,Ye,ut(t,0,100))}setProperty(t,e){Ke(this,ze).style.setProperty(t,e)}setPropertyIn(t,e){gt(e,t)&&Ke(this,Ve).mutate(this.setProperty,this,t,e)}}ze=new WeakMap,Ve=new WeakMap,je=new WeakMap,Ye=new WeakMap;var Ze,Je=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ti{constructor(t){Ze.set(this,void 0),Je(this,Ze,t)}pushState(t,e,i,s,n){this.checkAndCall(()=>{Qe(this,Ze).pushState(t,e,i,s,n)})}registerElement(t,e,i){this.checkAndCall(()=>{Qe(this,Ze).registerElement(t,e,i)})}unregisterElement(t,e){this.checkAndCall(()=>{Qe(this,Ze).unregisterElement(t,e)})}setProperty(t,e,i,s){this.checkAndCall(()=>{Qe(this,Ze).setProperty(t,e,i,s)})}log(t,e,i){this.checkAndCall(()=>{Qe(this,Ze).log(t,e,i)})}checkAndCall(t){at(Qe(this,Ze))&&t()}}Ze=new WeakMap;var ei,ii=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},si=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ni{constructor(t,e){ei.set(this,void 0),this.setup=(new Dt).fromInit(t),this.interactions=class{static get(t,e){switch(t){case"async":const t=new he;return e&&t.onError(e),t;default:return new ae}}}.get(t.interaction,this.onInteractionError.bind(this)),this.cache=new we(this.setup.cacheSize),this.bus=class{static get(t){return at(t)?new qe(t):new Fe(new Te(new Se))}}.get(t.busSetup),this.colors=new Ge(this.interactions),this.development=new ti(t.development),this.styleAppender=new Ue(this.interactions),ii(this,ei,null!=e?e:[])}setLightMode(t){const e=lt(this.setup.prefix,d),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=lt(this.setup.prefix,d);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=lt(this.setup.prefix,g),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=lt(this.setup.prefix,g);return document.body.classList.contains(t)}setProperty(t,e){if(!gt(t,e))throw new l("Property or value was not provided");let i=Et(t,this.setup.prefix);document.documentElement.style.setProperty(i,e)}isPlugin(t){return at(t)&&si(this,ei).find(e=>e===t)}onInteractionError(t){console.error("An error has been captured from interactions"),console.error(t)}}ei=new WeakMap;var ri,oi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},hi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ai=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class li{constructor(t){ri.set(this,void 0),hi(this,ri,t)}performAction(t,e,i,s){return oi(this,void 0,void 0,(function*(){return new Promise(n=>{ai(this,ri).mutate(()=>{e.add(t),t.classList.add(p),setTimeout(()=>{ai(this,ri).mutate(()=>{e.remove(t),t.classList.remove(p),s&&s(),n(!0)},null)},i)},null)})}))}performActions(t,e,i,s){return oi(this,void 0,void 0,(function*(){return new Promise(n=>{ai(this,ri).mutate(()=>{e.forEach(e=>e.add(t)),t.classList.add(p),setTimeout(()=>{ai(this,ri).mutate(()=>{e.forEach(e=>e.remove(t)),t.classList.remove(p),s&&s(),n(!0)},null)},i)},null)})}))}performSwitchAction(t,e,i,s,n,r){return oi(this,void 0,void 0,(function*(){return new Promise(o=>{ai(this,ri).mutate(()=>{i.forEach(e=>e.add(t)),t.classList.add(p),at(e)&&(s.forEach(t=>t.add(e)),e.classList.add(p)),setTimeout(()=>{ai(this,ri).mutate(()=>{i.forEach(e=>e.remove(t)),t.classList.remove(p),at(e)&&(s.forEach(t=>t.remove(e)),e.classList.remove(p)),n(),o(!0)},null)},r)},null)})}))}}ri=new WeakMap;var ci,ui,di,pi,gi,vi,fi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wi{constructor(t){ci.set(this,void 0),fi(this,ci,t)}add(t,e){gt(t,mi(this,ci))&&!t.classList.contains(mi(this,ci))&&t.classList.add(mi(this,ci))}remove(t,e){gt(t,mi(this,ci))&&t.classList.contains(mi(this,ci))&&t.classList.remove(mi(this,ci))}toggle(t,e){gt(t,mi(this,ci))&&(t.classList.contains(mi(this,ci))?t.classList.remove(mi(this,ci)):t.classList.add(mi(this,ci)))}}ci=new WeakMap;class ki{constructor(t){ui.set(this,void 0),fi(this,ui,t)}add(t,e){if(e)switch(mi(this,ui)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){if(e)switch(mi(this,ui)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){if(e)switch(mi(this,ui)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}ui=new WeakMap;class yi{constructor(t){var e,i;di.set(this,void 0),pi.set(this,void 0),e=this,i=this,[{set value(t){fi(e,di,t)}}.value,{set value(t){fi(i,pi,t)}}.value]=Pt(t)}add(t,e){gt(t,mi(this,di),mi(this,pi))&&t.setAttribute(mi(this,di),mi(this,pi))}remove(t,e){gt(t,mi(this,di),mi(this,pi))&&t.hasAttribute(mi(this,di))&&t.removeAttribute(mi(this,di))}toggle(t,e){gt(t,mi(this,di),mi(this,pi))&&(t.hasAttribute(mi(this,di))?t.removeAttribute(mi(this,di)):t.setAttribute(mi(this,di),mi(this,pi)))}}di=new WeakMap,pi=new WeakMap;class bi{constructor(t){var e,i;gi.set(this,void 0),vi.set(this,void 0),e=this,i=this,[{set value(t){fi(e,gi,t)}}.value,{set value(t){fi(i,vi,t)}}.value]=Pt(t)}add(t,e){if(!gt(t,mi(this,gi),mi(this,vi)))return;let i=t;i.style&&!i.style[mi(this,gi)]&&(i.style[mi(this,gi)]=mi(this,vi))}remove(t,e){if(!gt(t,mi(this,gi),mi(this,vi)))return;let i=t;i.style&&i.style[mi(this,gi)]&&(i.style[mi(this,gi)]="")}toggle(t,e){if(!gt(t,mi(this,gi),mi(this,vi)))return;let i=t;i.style&&(i.style[mi(this,gi)]?delete i.style[mi(this,gi)]:i.style[mi(this,gi)]=mi(this,vi))}}gi=new WeakMap,vi=new WeakMap;class Ci{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class Mi{static get(t){if(!at(t))return new Ci;switch(t[0]){case".":return new wi(t.substring(1));case"~":return new ki(t.substring(1));case"&":return new yi(t.substring(1));case"^":return new bi(t.substring(1));default:return new wi(t)}}}class Ai{static get(t){if(!at(t))return[];return t.split(",").map(t=>Mi.get(t.trim()))}}var Ei,Wi,Ti,xi,Si,Li,Ii=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Pi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Di=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Oi{constructor(t,e){Ei.set(this,void 0),Wi.set(this,void 0),Ti.set(this,void 0),xi.set(this,void 0),Si.set(this,void 0),Li.set(this,void 0),Pi(this,Ei,t),Pi(this,Wi,!1),Pi(this,Ti,Bt.get("ElementManager")),Pi(this,Si,e),Pi(this,xi,Date.now()),Pi(this,Li,new li(e.interactions))}toggleClass(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{let i=e.classList;Di(this,Si).interactions.fetch(()=>{i.contains(t)?Di(this,Si).interactions.mutate(i.remove,i,t):Di(this,Si).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{let i=e.classList;Di(this,Si).interactions.fetch(()=>{i.contains(t)||Di(this,Si).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{let i=e.classList;Di(this,Si).interactions.fetch(()=>{i.contains(t)&&Di(this,Si).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return at(t)?Di(this,Ei).reduce((e,i)=>{let s=i.getAttribute(t);return null!=s&&e.push(s),e},[]):[]}setAttribute(t,e){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(i=>{Di(this,Si).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{Di(this,Si).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(i=>{Di(this,Si).interactions.fetch(()=>{i.hasAttribute(t)?Di(this,Si).interactions.mutate(i.removeAttribute,i,t):Di(this,Si).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return Ii(this,void 0,void 0,(function*(){return!!at(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return Ii(this,void 0,void 0,(function*(){return!(!at(t)||!at(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return Ii(this,void 0,void 0,(function*(){return Di(this,Wi)&&Di(this,Ti).error("Element is locked",e),this.lock(),Di(this,Ei).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}animate(t,e){return Ii(this,void 0,void 0,(function*(){if(!at(t))return!1;const i=null!=e?e:Di(this,Si).setup.animationTime;return this.call(e=>{this.change(()=>{e.classList.add(t),e.classList.add(p),setTimeout(()=>{this.change(()=>{e.classList.remove(t),e.classList.remove(p)})},i)})})}))}open(t,e,i){return Ii(this,void 0,void 0,(function*(){if(!gt(t,e))return!1;const s=null!=i?i:Di(this,Si).setup.animationTime,n=new wi(e);return this.call(e=>{Di(this,Li).performAction(e,n,null!=s?s:0).then(()=>{e.classList.add(t)})})}))}close(t,e,i){return Ii(this,void 0,void 0,(function*(){if(!gt(t,e))return!1;const s=null!=i?i:Di(this,Si).setup.animationTime,n=new wi(e);return this.call(e=>{Di(this,Li).performAction(e,n,null!=s?s:0).then(()=>{e.classList.remove(t)})})}))}emit(t,...e){at(t)?this.call(i=>{let s=i.$cuid;at(s)&&(Di(this,Ti).debug(`Emitting event ${t} to ${s}`),Di(this,Si).bus.emit(t,s,...e))},"emit"):Di(this,Ti).warning("Not enough data to emit event","emit")}on(t,e){let i=[];return gt(t,e)?(this.call(s=>{let n=s;if(at(n)){let s=Di(this,Si).bus.on(t,e,n);null!=s&&i.push(s)}},"on"),i):(Di(this,Ti).error("Incorrect arguments","on"),i)}detach(t,e){gt(t,e)||Di(this,Ti).error("Incorrect arguments","detach"),this.call(i=>{let s=i;at(s)&&Di(this,Si).bus.detach(t,e,s)},"detach")}read(t,...e){Di(this,Si).interactions.fetch(t,this,...e)}change(t,...e){Di(this,Si).interactions.mutate(t,this,...e)}elements(){return Di(this,Ei)}count(){return Di(this,Ei).length}lock(){Pi(this,Wi,!0)}unlock(){Pi(this,Wi,!1)}isLocked(){return Di(this,Wi)}refresh(){return Date.now()-Di(this,xi)<36e4}}Ei=new WeakMap,Wi=new WeakMap,Ti=new WeakMap,xi=new WeakMap,Si=new WeakMap,Li=new WeakMap;var Ni,Bi,_i,Hi,$i,Ri=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Fi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ui{constructor(t){Ni.set(this,void 0),Bi.set(this,void 0),_i.set(this,void 0),Hi.set(this,void 0),$i.set(this,void 0),Fi(this,$i,t),Fi(this,Bi,Bt.get("CollectionManager")),Fi(this,Ni,[]),Fi(this,_i,!1),Fi(this,Hi,"")}setElements(t){Fi(this,Ni,t)}setToggle(t){Fi(this,Hi,t)}addAnimationClass(t,e,i,s){e.classList.add(p),t.classList.add(s),e.classList.add(i)}setFinalClasses(t,e,i,s){e.classList.remove(p),t.classList.remove(s),e.classList.remove(i),t.classList.remove(qi(this,Hi)),e.classList.add(qi(this,Hi))}verifyIndex(t,e,i){return t>=0&&t!==e&&t<i}setCurrent(t,e){return Ri(this,void 0,void 0,(function*(){return this.lock(),qi(this,Bi).debug(`Switching index from: ${e} to ${t}`),e>-1&&qi(this,Ni)[e].classList.remove(qi(this,Hi)),qi(this,Ni)[t].classList.add(qi(this,Hi)),this.unlock(),!0}))}setCurrentWithAnimation(t,e,i,s,n){return Ri(this,void 0,void 0,(function*(){this.lock(),qi(this,Bi).debug(`Switching index from: ${n} to ${t}`);const r=qi(this,Ni)[n],o=qi(this,Ni)[t];return qi(this,$i).mutate(this.addAnimationClass,this,r,o,e,i),setTimeout(()=>{qi(this,$i).mutate(this.setFinalClasses,this,r,o,e,i),this.unlock()},s),!0}))}getCurrentIndex(){if(!at(qi(this,Hi)))return-1;let t=this.count();for(let e=0;e<t;e++)if(qi(this,Ni)[e].classList.contains(qi(this,Hi)))return e;return-1}elements(){return qi(this,Ni)}check(){return qi(this,_i)?(qi(this,Bi).warning("Object locked. Operation in progress","Check"),!1):at(qi(this,Hi))?!(this.count()<=0)||(qi(this,Bi).warning("Elements list is empty","Check"),!1):(qi(this,Bi).warning("Toggle is not set. Call setToggleClass","Check"),!1)}count(){return qi(this,Ni)?qi(this,Ni).length:-1}lock(){Fi(this,_i,!0)}unlock(){Fi(this,_i,!1)}}Ni=new WeakMap,Bi=new WeakMap,_i=new WeakMap,Hi=new WeakMap,$i=new WeakMap;var zi,Vi,ji,Yi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Xi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ki=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gi{constructor(t,e){zi.set(this,void 0),Vi.set(this,void 0),ji.set(this,void 0),Xi(this,zi,Bt.get("CollectionManager")),Xi(this,ji,new Ui(e)),Ki(this,ji).setElements(t),Xi(this,Vi,Date.now())}setToggle(t){Ki(this,ji).setToggle(t)}setElements(t){Ki(this,ji).setElements(t)}click(t){Ki(this,ji).elements().forEach((e,i)=>{e.addEventListener("click",()=>{this.set(i).then(()=>{t&&t(e,i)})})})}next(){return Yi(this,void 0,void 0,(function*(){if(!Ki(this,ji).check())return!1;let t=Ki(this,ji).getCurrentIndex()+1;return this.set(t>=this.length()?0:t)}))}previous(){return Yi(this,void 0,void 0,(function*(){if(!Ki(this,ji).check())return!1;let t=Ki(this,ji).getCurrentIndex()-1;return this.set(t<0?this.length()-1:t)}))}set(t){return Yi(this,void 0,void 0,(function*(){let e=Ki(this,ji).getCurrentIndex();return!(!Ki(this,ji).check()||!Ki(this,ji).verifyIndex(t,e,this.length()))&&Ki(this,ji).setCurrent(t,e)}))}setWithAnimation(t,e,i,s){return Yi(this,void 0,void 0,(function*(){let n=Ki(this,ji).getCurrentIndex();return!(!Ki(this,ji).check()||!Ki(this,ji).verifyIndex(t,n,this.length()))&&Ki(this,ji).setCurrentWithAnimation(t,e,i,s,n)}))}getCurrentIndex(){return Ki(this,ji).getCurrentIndex()}length(){return Ki(this,ji).count()}refresh(){return this.length()>0&&Date.now()-Ki(this,Vi)>36e4}}zi=new WeakMap,Vi=new WeakMap,ji=new WeakMap;var Zi,Ji,Qi,ts=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},es=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},is=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ss{constructor(t){Zi.set(this,void 0),Ji.set(this,void 0),Qi.set(this,void 0),es(this,Zi,null!=t?t:[]),es(this,Qi,Bt.get("CuiPluginManager")),es(this,Ji,[])}init(t){is(this,Qi).debug("Plugins initialization started: "+is(this,Zi).length),es(this,Ji,is(this,Zi).filter(t=>at(t.mutation))),is(this,Zi).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),is(this,Qi).debug("Plugins have been initialized")}get(t){if(at(t))return is(this,Zi).find(e=>e.name===t)}has(t){return at(this.get(t))}onMutation(t){return ts(this,void 0,void 0,(function*(){let e=[];return is(this,Ji).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}Zi=new WeakMap,Ji=new WeakMap,Qi=new WeakMap;var ns,rs,os,hs,as,ls,cs,us=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ds=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ps{constructor(t,e,i){ns.set(this,void 0),rs.set(this,void 0),os.set(this,void 0),hs.set(this,void 0),as.set(this,void 0),ls.set(this,void 0),cs.set(this,void 0),E.prefix=t.prefix,E.logLevel=t.logLevel,us(this,ns,Bt.get("CuiInstance")),us(this,hs,new ss(e)),us(this,as,null!=i?i:[]),us(this,os,new ni(t,e.map(t=>t.name))),us(this,ls,t.root),us(this,rs,void 0),us(this,cs,[])}init(){if(ds(this,ns).debug("Instance started","init"),!at(window.MutationObserver))throw new o("Mutation observer does not exists");us(this,cs,ds(this,as).map(t=>t.attribute));const t=at(ds(this,cs))?ds(this,ls).querySelectorAll(pt(ds(this,cs))):null;if(at(t)){ds(this,ns).debug(`Initiating ${t.length} elements`);try{t.forEach(t=>{Tt(t,ds(this,as),ds(this,cs),ds(this,os))})}catch(t){ds(this,ns).exception(t)}}return ds(this,ns).debug("Init plugins","init"),ds(this,hs).init(ds(this,os)),gt(ds(this,as),ds(this,cs))&&(ds(this,ns).debug("Init mutation observer","init"),us(this,rs,new Zt(ds(this,ls),ds(this,os))),ds(this,rs).setComponents(ds(this,as)).setAttributes(ds(this,cs)),ds(this,rs).setPlugins(ds(this,hs)),ds(this,rs).start()),ds(this,ns).debug("Setting CSS globals","init"),ds(this,os).interactions.mutate(()=>{ds(this,os).setProperty(A.animationTimeLong,ds(this,os).setup.animationTimeLong+"ms"),ds(this,os).setProperty(A.animationTime,ds(this,os).setup.animationTime+"ms"),ds(this,os).setProperty(A.animationTimeShort,ds(this,os).setup.animationTimeShort+"ms")},null),ds(this,os).bus.emit(W,null),this}finish(){ds(this,rs)&&ds(this,rs).stop(),ds(this,os).bus.emit(T,null)}get(t){const e=this.all(t);if(!e)return;return new Oi(e,ds(this,os))}collection(t){const e=this.all(t);if(!at(e))return;return new Gi(e,ds(this,os).interactions)}select(t){return document.querySelector(t)}all(t){const e=document.querySelectorAll(t);if(at(e))return[...e]}getUtils(){return ds(this,os)}on(t,e,i){gt(t,e)||ds(this,ns).error("Incorrect arguments","on"),ds(this,os).bus.on(t,e,i)}detach(t,e){gt(t,e)||ds(this,ns).error("Incorrect arguments","detach"),ds(this,os).bus.detach(t,e)}detachAll(t){at(t)||ds(this,ns).error("Incorrect arguments","detachAll"),ds(this,os).bus.detachAll(t)}emit(t,e,...i){if(!gt(t,e))return void ds(this,ns).warning("Not enough data to emit event","emit");let s=null;if("string"==typeof e&&e.startsWith("~"))s=e.substring(1);else{s=("string"==typeof e?document.querySelector(e):e).$cuid}at(s)?ds(this,os).bus.emit(t,s,...i):ds(this,ns).warning("Element is not a cUI element","emit")}getPlugin(t){return ds(this,hs).get(t)}createCuiElement(t,e,i){return at(e)&&ds(this,cs).includes(e)?!!function(t,e,i){if(!gt(e,i,t))return!1;if(t.hasAttribute(e))return!1;let s=[];return Lt(i,(t,e)=>{s.push(`${t}: ${e}`)}),t.setAttribute(e,s.join("; ")),!0}(t,e,i)||(ds(this,ns).error("Element cannot be created: Missing data"),!1):(ds(this,ns).error("Element cannot be created: Unknown attribute"),!1)}}ns=new WeakMap,rs=new WeakMap,os=new WeakMap,hs=new WeakMap,as=new WeakMap,ls=new WeakMap,cs=new WeakMap;const gs={slide:{current:{left:{transform:{translateX:{from:0,to:-100,unit:"%"}}},right:{transform:{translateX:{from:0,to:100,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}},fade:{current:{left:{opacity:{from:1,to:0}},right:{opacity:{from:1,to:0}}},previous:{left:{opacity:{from:0,to:1}},right:{opacity:{from:0,to:1}}}},push:{current:{left:{transform:{translateX:{from:0,to:-10,unit:"%"}}},right:{transform:{translateX:{from:0,to:10,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}}};var vs,fs=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ms=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ws=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ks{constructor(){vs.set(this,void 0),ms(this,vs,window)}init(t){var e,i;return fs(this,void 0,void 0,(function*(){let s=Object.assign(Object.assign({},new Ot),t.setup);const n=s.app,r={result:!1};if(at(ws(this,vs)[n]))return r.message="Instance is already initialized",r;if(at(t.icons))for(let e in t.icons)f[e]=t.icons[e];if(at(t.swipeAnimations))for(let e in t.swipeAnimations)gs[e]=t.swipeAnimations[e];try{ws(this,vs)[n]=new ps(s,null!==(e=t.plugins)&&void 0!==e?e:[],null!==(i=t.components)&&void 0!==i?i:[]),ws(this,vs)[n].init()}catch(t){return console.error(t),r.message="An error occured during initialization",r}return r.result=!0,r}))}}vs=new WeakMap;class ys{static setLabel(t,e){t.hasAttribute("aria-label")||t.setAttribute("aria-label",e)}static setAria(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}static removeAria(t,e){t.hasAttribute(e)&&t.removeAttribute(e)}}var bs,Cs,Ms,As,Es,Ws,Ts,xs,Ss,Ls=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Is=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ps=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ds{constructor(t){bs.set(this,void 0),Is(this,bs,t)}hasClass(t,e){return!(!t||!e.classList.contains(t))}setClass(t,e){this.setClasses([t],e)}setClasses(t,e){e&&e.classList.add(...t)}setClassesAs(t,...e){Ps(this,bs).mutate(this.setClasses,this,e,t)}removeClass(t,e){this.removeClasses([t],e)}removeClasses(t,e){e&&e.classList.remove(...t)}removeClassesAs(t,...e){Ps(this,bs).mutate(this.removeClasses,this,e,t)}removeAttribute(t,e){e&&e.hasAttribute(t)&&e.removeAttribute(t)}setStyle(t,e,i){t&&t.style&&at(i)&&(t.style[e]=i)}}bs=new WeakMap;Cs=new WeakMap;class Os extends class{constructor(t,e,i){var s;Cs.set(this,void 0),this._log=Bt.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid,this.isLocked=!1,this._log.setId(this.cuid),this.activeClassName=(null!=(s=i.setup.prefix)?s:"")+"-active",this.helper=new Ds(i.interactions),Is(this,Cs,[]),this.componentName=t}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,...e){Ps(this,Cs).includes(t)||Ps(this,Cs).push(t),this.utils.bus.emit(t,this.cuid,...e)}onEvent(t,e){return this.utils.bus.on(t,e,this.element)}detachEvent(t,e){null!=e&&(this.utils.bus.detach(t,e),e="")}getId(){return this.cuid}checkLockAndWarn(t){return!!this.isLocked&&(this._log.warning("Component is locked",t),!0)}isActive(){return this.element.classList.contains(this.activeClassName)}detachEmiitedEvents(){Ps(this,Cs).forEach(t=>{this.utils.bus.detachByCuid(t,this.cuid),this._log.debug("Detaching event: "+t+" on component delete")})}registerInDebug(){this.utils.development.registerElement(this.element,this.cuid,this.componentName)}removeFromDebug(){this.utils.development.unregisterElement(this.cuid,this.componentName)}setDebugProperty(t,e){this.utils.development.setProperty(this.cuid,this.componentName,t,e)}logInfo(t,e){this._log.debug(t,e),this.utils.development.pushState(this.cuid,this.componentName,"info",t,e)}logWarning(t,e){this._log.warning(t,e),this.utils.development.pushState(this.cuid,this.componentName,"warning",t,e)}pushDebugState(t,e,i){this.utils.development.pushState(this.cuid,this.componentName,t,e,i)}logError(t,e,i){this._log.error(t,e),i&&this._log.exception(i,e),this.utils.development.pushState(this.cuid,this.componentName,"error",t,e)}}{constructor(t,e,i,s,n){super(t,e,n),Ms.set(this,void 0),this.args=s,this.actionsHelper=new li(n.interactions),this.prevArgs=void 0,this.isInitialized=!1,Is(this,Ms,i)}handle(t){this.logInfo("Init","handle"),this.isInitialized?this.logWarning("Trying to initialize component again","handle"):(this.args.parse(t),this.element.classList.contains(Ps(this,Ms))||this.element.classList.add(Ps(this,Ms)),this.registerInDebug(),this.onHandle(),this.isInitialized=!0)}refresh(t){var e;(this.logInfo("Update","refresh"),this.isInitialized)?(this.prevArgs=at(e=this.args)?Object.assign({},e):null,this.args.parse(t),this.pushDebugState("info","Component update","refresh"),this.onRefresh()):this.logError("Cannot update not initialized component","refresh")}destroy(){this.logInfo("Destroy","destroy"),this.onRemove(),this.detachEmiitedEvents(),this.removeFromDebug(),this.isInitialized=!1}}Ms=new WeakMap;class Ns extends Os{constructor(t,e,i,s,n){super(t,e,i,s,n)}onHandle(){this.onInit()}onRefresh(){this.onUpdate()}onRemove(){this.onDestroy()}performAction(t,e,i,s){return Ls(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}}class Bs extends Os{constructor(t,e,i,s,n){super(t,e,i,s,n),As.set(this,void 0),Es.set(this,void 0),Ws.set(this,void 0),Ts.set(this,void 0),xs.set(this,void 0),Is(this,As,null),Is(this,Es,null),Is(this,Ws,null),Is(this,xs,[]),Is(this,Ts,[])}onHandle(){Is(this,As,this.onEvent(S,this.openFromEvent.bind(this))),Is(this,Es,this.onEvent(I,this.closeFromEvent.bind(this))),Is(this,Ts,Ai.get(this.args.openAct)),Is(this,xs,Ai.get(this.args.closeAct)),this.onInit()}onRefresh(){this.prevArgs&&this.args.openAct===this.prevArgs.openAct||Is(this,Ts,Ai.get(this.args.openAct)),this.prevArgs&&this.args.closeAct===this.prevArgs.closeAct||Is(this,xs,Ai.get(this.args.closeAct)),this.onUpdate()}onRemove(){this.detachEvent(I,Ps(this,Es)),this.detachEvent(S,Ps(this,As)),this.onDestroy()}open(t){return Ls(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?(this.logWarning("Component is already opened"),!1):((this.args.escClose||at(this.args.keyClose))&&Is(this,Ws,this.onEvent(R,this.onKeyClose.bind(this))),!!this.onBeforeOpen()&&(this.isLocked=!0,this.performAction(Ps(this,Ts),this.args.timeout,this.onActionFinish.bind(this,this.onAfterOpen.bind(this),L,t),()=>{this.helper.setClass(this.activeClassName,this.element),ys.setAria(this.element,"aria-expanded","true")}))))}))}close(t){return Ls(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("close")&&(this.isActive()?(this.detachEvent(R,Ps(this,Ws)),!!this.onBeforeClose()&&(this.isLocked=!0,this.performAction(Ps(this,xs),this.args.timeout,this.onActionFinish.bind(this,this.onAfterClose.bind(this),P,t),()=>{this.helper.removeClass(this.activeClassName,this.element),ys.setAria(this.element,"aria-expanded","false")}))):(this.logWarning("Component is already closed"),!1))}))}performAction(t,e,i,s){return Ls(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}openFromEvent(t){this.open(t)}closeFromEvent(t){this.close(t)}onActionFinish(t,e,i){t(),this.emitEvent(e,{timestamp:Date.now(),state:i}),this.isLocked=!1}onKeyClose(t){return Ls(this,void 0,void 0,(function*(){(this.args.escClose&&"Escape"===t.event.key||at(this.args.keyClose)&&t.event.key===this.args.keyClose)&&(yield this.close("Closed by key"))}))}}As=new WeakMap,Es=new WeakMap,Ws=new WeakMap,Ts=new WeakMap,xs=new WeakMap;class _s extends Os{constructor(t,e,i,s,n){super(t,e,i,s,n),Ss.set(this,void 0),Is(this,Ss,new Jt(e)),Ps(this,Ss).onMutation(this.mutation.bind(this))}onHandle(){this.onInit(),Ps(this,Ss).observe()}onRefresh(){Ps(this,Ss).unobserve(),this.onUpdate(),Ps(this,Ss).observe()}onRemove(){Ps(this,Ss).unobserve(),this.onDestroy()}mutation(t){this._log.debug("Element mutation","mutation"),this.onMutation(t.reduce((t,e)=>("childList"!==e.type||(e.addedNodes.length>0&&t.added.push(...e.addedNodes),e.removedNodes.length>0&&t.removed.push(...e.removedNodes)),t),{added:[],removed:[]}))}}Ss=new WeakMap;var Hs,$s,Rs,Fs,qs,Us,zs,Vs=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},js=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ys=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xs{constructor(t,e){Hs.set(this,void 0),$s.set(this,void 0),Rs.set(this,void 0),js(this,Hs,Et("> * > .{prefix}-accordion-title",t)),js(this,$s,Et("> *",t)),this.animation=!1,js(this,Rs,null!=e?e:300),this.single=!1,this.selector=":scope "+Ys(this,Hs),this.items=":scope "+Ys(this,$s),this.timeout=Ys(this,Rs)}parse(t){if(at(t))return this.single=bt(t.single),this.selector=":scope "+Mt(t.selector,Ys(this,Hs)),this.items=":scope "+Mt(t.content,Ys(this,$s)),this.timeout=mt(t.timeout,Ys(this,Rs)),void(this.animation=bt(t.animation))}isValid(){return!0}}Hs=new WeakMap,$s=new WeakMap,Rs=new WeakMap;class Ks{constructor(t){Fs.set(this,void 0),js(this,Fs,null!=t?t:"cui"),this.attribute=Ys(this,Fs)+"-accordion"}getStyle(){return null}get(t,e){return new Gs(t,e,this.attribute,Ys(this,Fs))}}Fs=new WeakMap;class Gs extends _s{constructor(t,e,i,s){super("CuiAccordionHandler",t,i,new Xs(s,e.setup.animationTime),e),qs.set(this,void 0),Us.set(this,void 0),zs.set(this,void 0),js(this,zs,null),js(this,qs,[]),js(this,Us,[]),js(this,zs,null)}onInit(){if(this.args.isValid()){try{this.initTargets(),js(this,zs,this.onEvent(N,this.onSwitch.bind(this)))}catch(t){this._log.exception(t,"handle")}this._log.debug("Initialized","handle")}}onUpdate(){try{this.initTargets()}catch(t){this._log.exception(t,"handle")}}onDestroy(){this.detachEvent(N,Ys(this,zs))}onMutation(t){(t.added.length>0||t.removed.length>0)&&this.initTargets()}switch(t){return Vs(this,void 0,void 0,(function*(){if(this._log.debug("Switch to: "+t),t<0||this.isLocked||!this.isInitialized)return!1;if(js(this,qs,this.queryItems()),Ys(this,qs).length<=t)return!1;this.isLocked=!0;const e=Ys(this,qs)[t];return this.helper.hasClass(this.activeClassName,e)?this.helper.removeClassesAs(e,this.activeClassName):(this.args.single&&this.closeAllExcept(t),this.helper.setClassesAs(e,this.activeClassName)),this.emitEvent(B,{index:t,currentTarget:e,timestamp:Date.now()}),this.isLocked=!1,!0}))}onSwitch(t){this.switch(mt(t,-1)).then(()=>{this._log.debug("Switch from event to "+t)})}initTargets(){js(this,qs,this.queryItems());const t=this.element.querySelectorAll(this.args.selector);js(this,Us,[]),t.forEach((t,e)=>{let i={element:t};this.setListener(i,e),Ys(this,Us).push(i)})}closeAllExcept(t){this.mutate(()=>{Ys(this,qs).forEach((e,i)=>{t!==i&&this.helper.hasClass(this.activeClassName,e)&&e.classList.remove(this.activeClassName)})})}setListener(t,e){t.listener=()=>{this.switch(e)},t.element.addEventListener("click",t.listener)}removeListener(t){t.listener&&t.element.removeEventListener("click",t.listener)}queryItems(){return[...this.element.querySelectorAll(this.args.items)]}}qs=new WeakMap,Us=new WeakMap,zs=new WeakMap;var Zs,Js=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class tn{constructor(){this.length=this.to=this.from=-1,this.rtl=!1}setProperty(t){if(!t||!at(t.from)||!at(t.to))throw new a("[OpacityAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to}perform(t,e,i){if(this.to<0)return;let s=this.length*e;t.style&&(t.style.opacity=this.rtl?Math.max(this.from-s,0):Math.min(this.from+s,1))}}class en{constructor(t){if(Zs.set(this,void 0),!at(t))throw new a("[PropertyAnimator] Valid property is required");this.property=t,this.length=this.to=this.from=-1,this.rtl=!1,Js(this,Zs,"")}setProperty(t){if(!t||!at(t.from)||!at(t.to))throw new a("[PropertyAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to,Js(this,Zs,t.unit)}perform(t,e,i){if(!this.property)return;let s=this.length*e;t.style&&(t.style[this.property]=this.createValue(this.rtl?this.from-s:this.from+s,Qs(this,Zs)))}createValue(t,e){return`${t}${null!=e?e:""}`}}Zs=new WeakMap;class sn{constructor(){this.prop=void 0}setProperty(t){if(!t)throw new a("[TransformAnimator] Property has incorrect format");this.prop=t}build(t){let e=[];for(let i in this.prop){let s=this.prop[i],n=Math.abs(s.to-s.from),r=s.from>s.to?s.from-n*t:s.from+n*t;e.push(this.buildSingle(i,r,s.unit))}return e.join(" ")}buildSingle(t,e,i){return`${t}(${e}${i})`}perform(t,e){this.prop&&t.style&&(t.style.transform=this.build(e))}}var nn,rn,on,hn,an,ln,cn,un,dn,pn,gn,vn,fn,mn,wn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},kn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap,new WeakMap,new WeakMap;class yn{get(t){if(at(t))switch(t){case"opacity":return new tn;case"transform":return new sn;default:return new en(t)}}}class bn{constructor(t){nn.set(this,void 0),rn.set(this,void 0),on.set(this,void 0),hn.set(this,void 0),an.set(this,void 0),ln.set(this,void 0),cn.set(this,void 0),un.set(this,void 0),dn.set(this,void 0),wn(this,rn,[]),wn(this,an,void 0),wn(this,hn,void 0),wn(this,ln,null!=t&&t),wn(this,un,new yn),wn(this,on,!1),wn(this,nn,void 0),wn(this,cn,!1),wn(this,dn,void 0)}onFinish(t){wn(this,nn,t)}setAnimators(t){wn(this,rn,t)}setProps(t){if(at(t)){wn(this,rn,[]);try{for(let e in t){let i=kn(this,un).get(e);if(!i)return;i.setProperty(t[e]),kn(this,rn).push(i)}}catch(t){this.reportError(t)}}}setElement(t){wn(this,an,t)}setOnError(t){wn(this,dn,t)}animate(t,e,i){if(kn(this,on))return;if(!kn(this,an)||0===kn(this,rn).length)return void this.reportError(new Error("Animation cannot be performed: element or animators are not set"));let s=null!=e?e:0,n=i||!1;wn(this,on,!0),requestAnimationFrame(this.animateAsync.bind(this,t,s,n))}isLocked(){return kn(this,on)}animateAsync(t,e,i,s){kn(this,hn)||wn(this,hn,s);let n=s-kn(this,hn),r=n/t,o=0;o=0===e?r:i?e-r*e:e+r*e,this.callUpdate(i?Math.max(o,0):Math.min(o,1),1),n<t&&!kn(this,cn)?requestAnimationFrame(this.animateAsync.bind(this,t,e,i)):this.endAnimation(i)}endAnimation(t){kn(this,ln)&&kn(this,an)&&kn(this,an).removeAttribute("style"),kn(this,nn)&&kn(this,nn).call(this,kn(this,an),t,kn(this,cn)),wn(this,cn,!1),wn(this,hn,void 0),wn(this,on,!1)}callUpdate(t,e){try{kn(this,rn).forEach(i=>i.perform(kn(this,an),t,e))}catch(t){this.reportError(t),wn(this,cn,!0)}}reportError(t){kn(this,dn)?kn(this,dn).call(this,t):(console.error("An error occured in CuiAnimtionEngine"),console.error(t))}}nn=new WeakMap,rn=new WeakMap,on=new WeakMap,hn=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap;class Cn{constructor(t){pn.set(this,void 0),gn.set(this,void 0),vn.set(this,void 0),fn.set(this,void 0),mn.set(this,void 0),wn(this,pn,void 0),wn(this,gn,[]),wn(this,vn,new bn(t)),wn(this,fn,new yn),wn(this,mn,void 0)}setElement(t){wn(this,pn,t)}setOnFinish(t){kn(this,vn).onFinish(t)}setOnError(t){wn(this,mn,t),kn(this,vn).setOnError(t)}setProps(t){if(at(t)){wn(this,gn,[]);try{for(let e in t){let i=kn(this,fn).get(e);if(!i)return;i.setProperty(t[e]),kn(this,gn).push(i)}}catch(t){this.reportError(t)}}}update(t){kn(this,pn)&&0!==kn(this,gn).length&&kn(this,gn).forEach(e=>e.perform(kn(this,pn),Math.min(t,1),1))}updateAsync(t){requestAnimationFrame(this.update.bind(this,t))}finish(t,e,i){kn(this,pn)&&kn(this,vn).setElement(kn(this,pn)),kn(this,vn).setAnimators(kn(this,gn)),kn(this,vn).animate(e,t,i)}reportError(t){kn(this,mn)?kn(this,mn).call(this,t):console.log(t)}}pn=new WeakMap,gn=new WeakMap,vn=new WeakMap,fn=new WeakMap,mn=new WeakMap;var Mn,An,En,Wn,Tn,xn,Sn,Ln,In,Pn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Dn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class On{constructor(t,e){Mn.set(this,void 0),An.set(this,void 0),Pn(this,Mn,null!=e?e:300),Pn(this,An,t),this.escClose=!1,this.keyClose="",this.timeout=Dn(this,Mn),this.swipe=!1,this.openAct="",this.closeAct=""}parse(t){this.swipe=Ct(t.swipe,!1),this.escClose=!1,this.keyClose="",this.timeout=mt(t.timeout,Dn(this,Mn)),this.openAct=Mt(t.openAct,Et(".{prefix}-animation-fade-in",Dn(this,An))),this.closeAct=Mt(t.closeAct,Et(".{prefix}-animation-fade-out",Dn(this,An)))}}Mn=new WeakMap,An=new WeakMap;class Nn{constructor(t){En.set(this,void 0),Pn(this,En,null!=t?t:"cui"),this.attribute=Dn(this,En)+"-banner"}getStyle(){return null}get(t,e){return new Bn(t,e,this.attribute,Dn(this,En))}}En=new WeakMap;class Bn extends Bs{constructor(t,e,i,s){super("CuiBannerHandler",t,i,new On(s,e.setup.animationTime),e),Wn.set(this,void 0),Tn.set(this,void 0),xn.set(this,void 0),Sn.set(this,void 0),Ln.set(this,void 0),In.set(this,void 0),Pn(this,Wn,new Cn(!0)),Dn(this,Wn).setOnFinish(this.onSwipeFinish.bind(this)),Dn(this,Wn).setElement(this.element),Pn(this,xn,-1),Pn(this,Sn,0),Pn(this,Ln,gs.fade),Pn(this,In,null),Pn(this,Tn,!1)}onInit(){this.isActive()||this.open()}onUpdate(){}onDestroy(){this.detachEvent(V,Dn(this,In))}onBeforeOpen(){return!0}onAfterOpen(){this.args.swipe&&Pn(this,In,this.onEvent(V,this.onMove.bind(this)))}onAfterClose(){this.detachEvent(V,Dn(this,In))}onBeforeClose(){return!0}onMove(t){if(this.isLocked)return;let e=this.element;switch(t.type){case"down":if(Dn(this,Tn)||!e.contains(t.target))return;Pn(this,Tn,!0),Pn(this,xn,t.x),this.helper.setClassesAs(document.body,v),t.event.preventDefault();break;case"up":if(!Dn(this,Tn)&&0==Dn(this,Sn))break;let i=Math.abs(Dn(this,Sn)),s=i*this.args.timeout,n=i<=.4;this.isLocked=!0,Dn(this,Wn).finish(i,s,n),this.helper.removeClassesAs(document.body,v),Pn(this,Tn,!1);break;case"move":if(Dn(this,Tn)){let i=(t.x-Dn(this,xn))/e.offsetWidth;(Dn(this,Sn)>=0&&i<=0||Dn(this,Sn)<=0&&i>0)&&Dn(this,Wn).setProps(i>0?Dn(this,Ln).current.right:Dn(this,Ln).current.left),Pn(this,Sn,i),this.mutate(()=>{Dn(this,Wn).update(Math.abs(Dn(this,Sn)))}),t.event.preventDefault()}}}onSwipeFinish(t,e,i){this.isLocked=!1,e||(this.helper.removeClass(this.activeClassName,this.element),ys.setAria(this.element,"aria-expanded","false")),Pn(this,Sn,0),Pn(this,xn,0)}}Wn=new WeakMap,Tn=new WeakMap,xn=new WeakMap,Sn=new WeakMap,Ln=new WeakMap,In=new WeakMap;var _n,Hn,$n,Rn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qn{constructor(t){_n.set(this,void 0),Hn.set(this,void 0),$n.set(this,void 0),Rn(this,_n,t),Rn(this,Hn,1),Rn(this,$n,new Un)}setScale(t){return Rn(this,Hn,t),this}build(){let t=function(t){if(!at(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}(Fn(this,_n));return at(t)&&Fn(this,Hn)&&Fn(this,$n).append(t,Fn(this,Hn)),t}}_n=new WeakMap,Hn=new WeakMap,$n=new WeakMap;class Un{append(t,e){let i=mt(t.getAttribute("width"),20),s=mt(t.getAttribute("height"),20);t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var zn,Vn,jn,Yn,Xn,Kn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Gn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Zn{constructor(){this.progress=0}parse(t){at(t)?At(t)?this.progress=mt(t,0):this.progress=mt(t.progress,0):this.progress=0}}class Jn{constructor(t){this.attribute=(null!=t?t:"cui")+"-circle-progress",f.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new Qn(t,e,this.attribute)}}class Qn extends Ns{constructor(t,e,i){super("CuiCircleHandler",t,i,new Zn,e),zn.set(this,void 0),Vn.set(this,void 0),jn.set(this,void 0),Yn.set(this,void 0),Xn.set(this,void 0),Kn(this,zn,Kn(this,Vn,0)),Kn(this,jn,null),Kn(this,Yn,i),Kn(this,Xn,null)}onInit(){const t=new qn(f.special_circle_progress).build();if(!at(t))return void this.logError("SVG circle was not created","onInit");const e=this.element.querySelector("svg");at(e)&&e.remove(),this.element.appendChild(t),Kn(this,jn,this.element.querySelector(".circle-progress-path")),Kn(this,Vn,Gn(this,jn).getTotalLength()),Kn(this,zn,Gn(this,Vn)/100),this.fetch(this.readStyle),Kn(this,Xn,this.onEvent(U,this.onSetProgress.bind(this)))}onUpdate(){this.fetch(this.readStyle),this.emitEvent(z,{timestamp:Date.now(),progress:this.args.progress})}onDestroy(){this.detachEvent(U,Gn(this,Xn))}onSetProgress(t){at(t)&&this.element.setAttribute(Gn(this,Yn),t)}updateStyle(t){Gn(this,jn).style.strokeDashoffset=t}readStyle(){if(this.prevArgs&&this.args.progress===this.prevArgs.progress)return;const t=ut(this.args.progress,0,100);this.mutate(this.updateStyle,Gn(this,Vn)-Gn(this,zn)*t)}}zn=new WeakMap,Vn=new WeakMap,jn=new WeakMap,Yn=new WeakMap,Xn=new WeakMap;var tr,er,ir,sr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},nr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class or{constructor(t){tr.set(this,void 0),this.target="",this.action="",this.prevent=!1,this.state="",nr(this,tr,null!=t?t:300),this.timeout=rr(this,tr)}parse(t){if(at(t)&&At(t))return this.target=t,this.action="",this.timeout=rr(this,tr),this.prevent=!1,void(this.state="");this.target=Mt(t.target,""),this.action=t.action,this.timeout=mt(t.timeout,rr(this,tr)),this.prevent=t.prevent&&bt(t.prevent),this.state=t.state}}tr=new WeakMap;class hr{constructor(t){er.set(this,void 0),nr(this,er,null!=t?t:"cui"),this.attribute=rr(this,er)+"-close"}getStyle(){return null}get(t,e){return new ar(t,e,this.attribute,rr(this,er))}}er=new WeakMap;class ar extends Ns{constructor(t,e,i,s){super("CuiCloseHandler",t,i,new or(e.setup.animationTime),e),ir.set(this,void 0),nr(this,ir,null),this.onClick=this.onClick.bind(this)}onInit(){this.element.addEventListener("click",this.onClick),nr(this,ir,this.onEvent(I,this.onClose.bind(this)))}onUpdate(){}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(I,rr(this,ir))}onClick(t){this.onClose(t),this.args.prevent&&t.preventDefault()}onClose(t){if(this.isLocked)return;const e=this.getTarget();at(e)?(this.isLocked=!0,this.run(e).then(e=>{this.onActionFinish(t,e)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return sr(this,void 0,void 0,(function*(){let e=t.$cuid;if(at(e))return yield this.utils.bus.emit(I,e,this.args.state),!1;if(gt(this.args.action,this.args.timeout)){let e=Ai.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.removeActiveClass(t)})}return this.removeActiveClassAsync(t),!0}))}removeActiveClass(t){at(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClass(this.activeClassName,t)}removeActiveClassAsync(t){this.fetch(()=>{at(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClassesAs(t,this.activeClassName)})}onActionFinish(t,e){e&&this.emitClose(t)}getTarget(){var t;return at(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:xt(this.element)}emitClose(t){this.emitEvent(P,{timestamp:Date.now(),state:this.args.state,event:t})}}ir=new WeakMap;var lr,cr,ur,dr,pr,gr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},vr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class fr{constructor(t,e){lr.set(this,void 0),cr.set(this,void 0),gr(this,lr,null!=e?e:300),gr(this,cr,t),this.escClose=!1,this.timeout=vr(this,lr),this.openAct="",this.closeAct="",this.keyClose=""}parse(t){this.escClose=bt(t.escClose),this.keyClose=t.keyClose,this.timeout=mt(t.timeout,vr(this,lr)),this.openAct=Mt(t.openAct,Et(".{prefix}-dialog-default-in",vr(this,cr))),this.closeAct=Mt(t.closeAct,Et(".{prefix}-dialog-default-out",vr(this,cr)))}}lr=new WeakMap,cr=new WeakMap;class mr{constructor(t){ur.set(this,void 0),gr(this,ur,null!=t?t:"cui"),this.attribute=vr(this,ur)+"-cover"}getStyle(){return null}get(t,e){return new wr(t,e,this.attribute,vr(this,ur))}}ur=new WeakMap;class wr extends Bs{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new fr(s,e.setup.animationTimeLong),e),dr.set(this,void 0),pr.set(this,void 0),gr(this,dr,Et("{prefix}-cover-open",s)),gr(this,pr,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){ys.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(gr(this,pr,window.pageYOffset),!0)}onAfterOpen(){this.helper.setClass(vr(this,dr),document.body),document.body.style.top=`-${vr(this,pr)}px`,ys.setAria(this.element,"aria-hidden","false")}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(vr(this,pr)||0)),gr(this,pr,0),this.helper.removeClass(vr(this,dr),document.body),ys.setAria(this.element,"aria-hidden","true")}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(vr(this,dr),document.body)}}dr=new WeakMap,pr=new WeakMap;var kr,yr,br,Cr,Mr,Ar,Er,Wr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Tr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xr{constructor(t,e){kr.set(this,void 0),yr.set(this,void 0),Wr(this,kr,null!=e?e:300),Wr(this,yr,t),this.escClose=!1,this.outClose=!1,this.timeout=Tr(this,kr),this.openAct="",this.closeAct="",this.keyClose=""}parse(t){this.escClose=bt(t.escClose),this.outClose=bt(t.outClose),this.keyClose=t.keyClose,this.timeout=mt(t.timeout,Tr(this,kr)),this.openAct=Mt(t.openAct,Et(".{prefix}-dialog-default-in",Tr(this,yr))),this.closeAct=Mt(t.closeAct,Et(".{prefix}-dialog-default-out",Tr(this,yr)))}}kr=new WeakMap,yr=new WeakMap;class Sr{constructor(t){br.set(this,void 0),Wr(this,br,null!=t?t:"cui"),this.attribute=Tr(this,br)+"-dialog"}getStyle(){return null}get(t,e){return new Lr(t,e,this.attribute,Tr(this,br))}}br=new WeakMap;class Lr extends Bs{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new xr(s,e.setup.animationTimeLong),e),Cr.set(this,void 0),Mr.set(this,void 0),Ar.set(this,void 0),Er.set(this,void 0),Wr(this,Mr,Et("{prefix}-dialog-open",s)),Wr(this,Cr,s),Wr(this,Ar,0),Wr(this,Er,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){ys.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Wr(this,Ar,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&Wr(this,Er,this.onEvent(F,this.onWindowClick.bind(this))),this.helper.setClass(Tr(this,Mr),document.body),document.body.style.top=`-${Tr(this,Ar)}px`}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(Tr(this,Ar)||0)),Wr(this,Ar,0),this.helper.removeClass(Tr(this,Mr),document.body),this.detachEvent(F,Tr(this,Er))}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(Tr(this,Mr),document.body)}onWindowClick(t){let e=this.element.querySelector(Et(".{prefix}-dialog-container",Tr(this,Cr)));e&&!e.contains(t.target)&&this.close("out").then(()=>{this._log.debug("Closed by click outside")})}}Cr=new WeakMap,Mr=new WeakMap,Ar=new WeakMap,Er=new WeakMap;var Ir,Pr,Dr,Or,Nr,Br,_r,Hr,$r=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fr{constructor(t){Ir.set(this,void 0),Pr.set(this,void 0),Dr.set(this,void 0),Or.set(this,void 0),Nr.set(this,void 0),Br.set(this,void 0),_r.set(this,void 0),Hr.set(this,void 0),$r(this,Ir,t),$r(this,Dr,!1),$r(this,Or,!1),$r(this,Nr,!1),$r(this,Pr,void 0),$r(this,_r,this.onMouseMove.bind(this)),$r(this,Hr,this.onMouseOut.bind(this)),$r(this,Br,this.onMouseOver.bind(this))}setCallback(t){$r(this,Pr,t)}isInProgress(){return Rr(this,Dr)}attach(){Rr(this,Ir).addEventListener("mouseover",Rr(this,Br)),Rr(this,Ir).addEventListener("mousemove",Rr(this,_r)),Rr(this,Ir).addEventListener("mouseout",Rr(this,Hr)),$r(this,Nr,!0)}detach(){Rr(this,Ir).removeEventListener("mouseover",Rr(this,Br)),Rr(this,Ir).removeEventListener("mousemove",Rr(this,_r)),Rr(this,Ir).removeEventListener("mouseout",Rr(this,Hr)),$r(this,Nr,!1)}emit(t,e){gt(Rr(this,Pr))&&(!e&&Rr(this,Dr)||($r(this,Dr,!0),window.requestAnimationFrame(this.invoke.bind(this,{isHovering:Rr(this,Or),event:t,timestamp:Date.now()}))))}isAttached(){return Rr(this,Nr)}invoke(t){Rr(this,Pr)&&Rr(this,Pr).call(this,t),$r(this,Dr,!1)}onMouseOver(t){$r(this,Or,!0),this.emit(t,!0)}onMouseOut(t){$r(this,Or,!1),this.emit(t,!0)}onMouseMove(t){this.emit(t,!1)}}Ir=new WeakMap,Pr=new WeakMap,Dr=new WeakMap,Or=new WeakMap,Nr=new WeakMap,Br=new WeakMap,_r=new WeakMap,Hr=new WeakMap;var qr,Ur,zr,Vr,jr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Yr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xr{constructor(){qr.set(this,void 0),Ur.set(this,void 0),zr.set(this,void 0),Vr.set(this,void 0),jr(this,zr,-1),jr(this,Ur,-1),jr(this,qr,void 0),jr(this,Vr,0)}setElementBox(t){jr(this,qr,t)}setTarget(t){jr(this,Ur,t.width),jr(this,zr,t.height)}setMargin(t){jr(this,Vr,t)}getVerticalPosition(t){switch(t){case"top":return this.getTopPosition();case"bottom":return this.getBottomPosition();case"middle":return this.getMiddlePosition();default:return-1}}getHorizontalPosition(t){switch(t){case"left":return this.getLeftPosition();case"right":return this.getRightPosition();case"center":return this.getCenterPosition();default:return-1}}getAutoVerticalPosition(t){let e=window.innerHeight,i=this.getVerticalPosition(t);return("top"===t||"middle"===t)&&i<0?[this.getVerticalPosition("bottom"),"bottom"]:("bottom"===t||"middle"===t)&&i+Yr(this,zr)>e?[this.getVerticalPosition("top"),"top"]:[i,t]}getAutoHorizontalPosition(t){let e=window.innerWidth,i=this.getHorizontalPosition(t);return("right"===t||"center"===t)&&i<0?[this.getHorizontalPosition("left"),"left"]:("left"===t||"center"===t)&&i+Yr(this,Ur)>e?[this.getHorizontalPosition("right"),"right"]:[i,t]}getTopPosition(){return this.throwIfNotValid("getTopPosition"),Yr(this,qr).top-Yr(this,Vr)-Yr(this,zr)}getBottomPosition(){return this.throwIfNotValid("getBottomPosition"),Yr(this,qr).top+Yr(this,qr).height+Yr(this,Vr)}getMiddlePosition(){return this.throwIfNotValid("getMiddlePosition"),Yr(this,qr).top+Yr(this,qr).height/2-Yr(this,zr)/2}getLeftPosition(){return this.throwIfNotValid("getLeftPosition"),Yr(this,qr).left}getRightPosition(){return this.throwIfNotValid("getRightPosition"),Yr(this,qr).left+Yr(this,qr).width-Yr(this,Ur)}getCenterPosition(){return this.throwIfNotValid("getCenterPosition"),Yr(this,qr).left+Yr(this,qr).width/2-Yr(this,Ur)/2}validate(){return at(Yr(this,qr))&&Yr(this,zr)>0&&Yr(this,Ur)>0}throwIfNotValid(t){if(!this.validate())throw new u(`[${t}] Position cannot be calculated: missing data [width: ${Yr(this,Ur)}][height: ${Yr(this,zr)}]`)}}qr=new WeakMap,Ur=new WeakMap,zr=new WeakMap,Vr=new WeakMap;var Kr,Gr,Zr,Jr,Qr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},to=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class eo{constructor(t){Kr.set(this,void 0),Gr.set(this,void 0),Zr.set(this,void 0),Jr.set(this,void 0),Qr(this,Gr,"top-center"),Qr(this,Kr,""),Qr(this,Zr,null!=t?t:new Xr),Qr(this,Jr,Bt.get("CuiBasePositionCalculator"))}setMargin(t){to(this,Zr).setMargin(t)}setPreferred(t){Qr(this,Gr,t)}setStatic(t){Qr(this,Kr,t)}calculate(t,e){if(to(this,Zr).setElementBox(t),to(this,Zr).setTarget(e),at(to(this,Kr))){to(this,Jr).debug("Evaluating static position");const[t,e]=this.parse(to(this,Kr));return[to(this,Zr).getHorizontalPosition(e),to(this,Zr).getVerticalPosition(t),to(this,Kr)]}let[i,s]=["",""];at(to(this,Gr))&&(to(this,Jr).debug("Evaluating auto position"),[i,s]=this.parse(to(this,Gr))),i=null!=i?i:"top",s=null!=s?s:"center",to(this,Jr).debug("Calculating position: "+i+"-"+s);const[n,r]=to(this,Zr).getAutoVerticalPosition(i),[o,h]=to(this,Zr).getAutoHorizontalPosition(s);return to(this,Jr).debug("Calculated position: "+r+"-"+h),[o,n,r+"-"+h]}parse(t){return t.split("-")}}Kr=new WeakMap,Gr=new WeakMap,Zr=new WeakMap,Jr=new WeakMap;var io,so,no,ro,oo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ho=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ao{constructor(t,e,i){io.set(this,void 0),so.set(this,void 0),no.set(this,void 0),ro.set(this,void 0),oo(this,so,e),oo(this,no,t),oo(this,ro,i)}start(){this.canRun()&&(this.stop(),oo(this,io,setTimeout(()=>{ho(this,ro).call(this),oo(this,io,null),ho(this,so)&&this.start()},ho(this,no))))}stop(){ho(this,io)&&(clearTimeout(ho(this,io)),oo(this,io,null))}getId(){return ho(this,io)}canRun(){return at(ho(this,ro))&&ho(this,no)>0}setCallback(t){oo(this,ro,t)}setTimeout(t){oo(this,no,t)}}io=new WeakMap,so=new WeakMap,no=new WeakMap,ro=new WeakMap;var lo,co,uo,po,go,vo,fo,mo,wo,ko,yo,bo,Co,Mo,Ao,Eo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Wo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},To=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xo{constructor(t){lo.set(this,void 0),Wo(this,lo,Et("{prefix}-drop-animation-in",t)),this.mode="click",this.trigger="> a, button",this.autoClose=!1,this.outClose=!1,this.prevent=!1,this.pos="",this.action=To(this,lo),this.timeout=3e3,this.margin=8}parse(t){this.mode=Mt(t.mode,"click").toLowerCase(),this.trigger=":scope "+Mt(t.trigger,"> a, button"),this.prevent=bt(t.prevent),this.autoClose=bt(t.autoClose),this.outClose=!t.outClose||bt(t.outClose),this.pos=Mt(t.pos,""),this.action=Mt(t.action,To(this,lo)),this.timeout=mt(t.timeout,3e3),this.margin=mt(t.margin,8)}}lo=new WeakMap;class So{constructor(t){co.set(this,void 0),Wo(this,co,null!=t?t:"cui"),this.attribute=To(this,co)+"-drop"}getStyle(){return null}get(t,e){return new Lo(t,e,this.attribute,To(this,co))}}co=new WeakMap;class Lo extends Ns{constructor(t,e,i,s){super("CuidropHandler",t,i,new xo(s),e),uo.set(this,void 0),po.set(this,void 0),go.set(this,void 0),vo.set(this,void 0),fo.set(this,void 0),mo.set(this,void 0),wo.set(this,void 0),ko.set(this,void 0),yo.set(this,void 0),bo.set(this,void 0),Co.set(this,void 0),Mo.set(this,void 0),Ao.set(this,void 0),Wo(this,go,i),Wo(this,uo,s),Wo(this,po,Et("{prefix}-drop-open",s)),Wo(this,fo,new Fr(this.element)),To(this,fo).setCallback(this.onElementHover.bind(this)),Wo(this,wo,null),Wo(this,ko,null),Wo(this,yo,null),this.onTriggerClick=this.onTriggerClick.bind(this),Wo(this,bo,new eo),To(this,bo).setMargin(8),To(this,bo).setPreferred("bottom-left"),Wo(this,Co,""),Wo(this,vo,void 0),Wo(this,mo,this.element),Wo(this,Ao,[]),Wo(this,Mo,new ao(this.args.timeout,!1,this.close.bind(this))),e.isPlugin("click-plugin")||this.logWarning("Window click plugin is not available: outClose will not work")}onInit(){Wo(this,mo,this.acquireTrigger()),Wo(this,vo,new Fr(To(this,mo))),this.setTriggerEvent(),Wo(this,ko,this.onEvent(S,this.open.bind(this))),Wo(this,yo,this.onEvent(I,this.close.bind(this))),To(this,bo).setStatic(this.args.pos),To(this,bo).setMargin(this.args.margin),Wo(this,Mo,new ao(this.args.timeout,!1,this.close.bind(this))),Wo(this,Ao,Ai.get(this.args.action)),this.mutate(()=>{ys.setAria(this.element,"aria-dropdown","")}),this._log.debug("Initialized","handle")}onUpdate(){To(this,vo)&&To(this,vo).isAttached()?To(this,vo).detach():this.prevArgs&&"click"===this.prevArgs.mode&&To(this,mo).removeEventListener("click",this.onTriggerClick),Wo(this,mo,this.acquireTrigger()),Wo(this,vo,new Fr(To(this,mo))),this.setTriggerEvent(),To(this,bo).setStatic(this.args.pos),To(this,bo).setMargin(this.args.margin),Wo(this,Ao,Ai.get(this.args.action)),To(this,Mo).setTimeout(this.args.timeout)}onDestroy(){this.detachEvent(S,To(this,ko)),this.detachEvent(I,To(this,yo))}open(){return Eo(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?this.close():(this.isAnyActive()&&(yield this.findAndCloseOpenedDrop()),this.isLocked=!0,this._log.debug("Drop "+this.cuid,"open"),this.onOpen(),this.isLocked=!1,!0))}))}close(){return Eo(this,void 0,void 0,(function*(){return!(this.checkLockAndWarn("close")||!this.isActive())&&(this.isLocked=!0,this.logInfo("Drop "+this.cuid,"close"),this.onClose(),this.detachEvent(F,To(this,wo)),this.emitEvent(P,{timestamp:Date.now()}),To(this,fo).detach(),this.isLocked=!1,!0)}))}onClose(){this.mutate(()=>{this.helper.removeClass(this.activeClassName,this.element),this.helper.removeClass(To(this,po),document.body),this.toggleActions(),this.helper.removeClass(To(this,Co),this.element),ys.setAria(this.element,"aria-expanded","false")})}onOpen(){this.helper.setClass(this.activeClassName,this.element),this.mutate(()=>{const t=To(this,mo).getBoundingClientRect();try{const[e,i,s]=To(this,bo).calculate(t,this.element.getBoundingClientRect());this.element.style.top=i-t.top+"px",this.element.style.left=e-t.left+"px",Wo(this,Co,Et("{prefix}-drop-position-"+s,To(this,uo))),this.toggleActions(),this.helper.setClass(To(this,Co),this.element),this.helper.setClass(To(this,po),document.body),this.emitEvent(L,{timestamp:Date.now()}),To(this,fo).attach(),this.runAutoCloseTask(),this.args.outClose&&Wo(this,wo,this.onEvent(F,this.onWindowClick.bind(this))),ys.setAria(this.element,"aria-expanded","true")}catch(t){this._log.exception(t)}})}onWindowClick(t){this.element.contains(t.target)||this.close()}isAnyActive(){return this.helper.hasClass(To(this,po),document.body)}findAndCloseOpenedDrop(){return Eo(this,void 0,void 0,(function*(){const t=document.querySelector(`[${To(this,go)}].${this.activeClassName}`);if(!at(t))return this._log.warning("Opened drop was not found"),!1;const e=t.$handlers[To(this,go)];return at(e)?e.close():(this._log.warning("Drop handler was not found in the element"),!1)}))}onTriggerClick(t){this.isActive()?this.close():this.open(),this.args.prevent&&t.preventDefault()}onHoverEvent(t){t.isHovering&&!this.isActive()&&this.open(),this.args.prevent&&t.event.preventDefault()}onElementHover(t){t.isHovering?To(this,Mo).stop():!t.isHovering&&this.args.autoClose&&this.runAutoCloseTask()}setTriggerEvent(){"hover"===this.args.mode&&To(this,vo)?(To(this,vo).setCallback(this.onHoverEvent.bind(this)),To(this,vo).attach()):To(this,mo).addEventListener("click",this.onTriggerClick)}runAutoCloseTask(){this.args.autoClose&&To(this,Mo).start()}toggleActions(){To(this,Ao).forEach(t=>{t.toggle(this.element)})}acquireTrigger(){let t=null;return t=this.element.parentElement?this.element.parentElement.querySelector(this.args.trigger):document.querySelector(this.args.trigger),null!=t?t:this.element}}uo=new WeakMap,po=new WeakMap,go=new WeakMap,vo=new WeakMap,fo=new WeakMap,mo=new WeakMap,wo=new WeakMap,ko=new WeakMap,yo=new WeakMap,bo=new WeakMap,Co=new WeakMap,Mo=new WeakMap,Ao=new WeakMap;var Io,Po,Do,Oo,No,Bo,_o=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ho=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class $o{constructor(t){Io.set(this,void 0),Po.set(this,void 0),Do.set(this,void 0),Oo.set(this,void 0),No.set(this,void 0),Bo.set(this,void 0),_o(this,Do,!1),_o(this,Io,null!=t?t:document.body),_o(this,Oo,!1),_o(this,No,!1),_o(this,Po,void 0),_o(this,Bo,void 0),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this)}setCallback(t){_o(this,Po,t)}setTarget(t){_o(this,Bo,t)}isInProgress(){return Ho(this,Do)}preventDefault(t){_o(this,No,t)}attach(){Ho(this,Oo)||(Ho(this,Io).addEventListener("mousedown",this.onMouseDown,{passive:!1}),Ho(this,Io).addEventListener("mouseup",this.onMouseUp,{passive:!1}),Ho(this,Io).addEventListener("mousemove",this.onMouseMove,{passive:!1}),Ho(this,Io).addEventListener("touchstart",this.onTouchStart,{passive:!1}),Ho(this,Io).addEventListener("touchend",this.onTouchEnd,{passive:!1}),Ho(this,Io).addEventListener("touchmove",this.onTouchMove,{passive:!1}),_o(this,Oo,!0))}detach(){Ho(this,Oo)&&(Ho(this,Io).removeEventListener("mousedown",this.onMouseDown,{passive:!1}),Ho(this,Io).removeEventListener("mouseup",this.onMouseUp,{passive:!1}),Ho(this,Io).removeEventListener("mousemove",this.onMouseMove,{passive:!1}),Ho(this,Io).removeEventListener("touchstart",this.onTouchStart,{passive:!1}),Ho(this,Io).removeEventListener("touchend",this.onTouchEnd,{passive:!1}),Ho(this,Io).removeEventListener("touchmove",this.onTouchMove,{passive:!1}),_o(this,Oo,!1))}isAttached(){return Ho(this,Oo)}onMouseDown(t){Ho(this,Do)||Ho(this,Bo)&&!Ho(this,Bo).contains(t.target)||(_o(this,Do,!0),this.publishMouseEvent("down",t))}onMouseUp(t){Ho(this,Do)&&(_o(this,Do,!1),this.publishMouseEvent("up",t))}onMouseMove(t){Ho(this,Do)&&this.publishMouseEvent("move",t)}onTouchStart(t){Ho(this,Do)||Ho(this,Bo)&&!Ho(this,Bo).contains(t.target)||(_o(this,Do,!0),this.publishTouchEvent("down",t))}onTouchEnd(t){Ho(this,Do)&&(_o(this,Do,!1),this.publishTouchEvent("up",t))}onTouchMove(t){Ho(this,Do)&&this.publishTouchEvent("move",t)}publishMouseEvent(t,e){Ho(this,No)&&e.cancelable&&e.preventDefault(),at(Ho(this,Po))&&Ho(this,Po).call(this,{type:t,x:e.clientX,y:e.clientY,moveX:e.movementX,moveY:e.movementY,target:e.target,event:e})}publishTouchEvent(t,e){if(Ho(this,No)&&e.cancelable&&e.preventDefault(),!at(Ho(this,Po)))return;let i=null;e.touches.length>0?i=e.touches[0]:e.changedTouches.length>0&&(i=e.changedTouches[0]),Ho(this,Po).call(this,{event:e,type:t,target:e.target,x:at(i)?i.clientX:-1,y:at(i)?i.clientY:-1,moveX:-1,moveY:-1})}}Io=new WeakMap,Po=new WeakMap,Do=new WeakMap,Oo=new WeakMap,No=new WeakMap,Bo=new WeakMap;var Ro,Fo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Uo{calculate(t,e,i,s){return[t,e]}}new WeakMap;class zo{constructor(t){Ro.set(this,void 0),Fo(this,Ro,t)}calculate(t,e,i,s){return[t-qo(this,Ro).offsetLeft,e-qo(this,Ro).offsetTop]}}Ro=new WeakMap;new WeakMap;var Vo,jo,Yo,Xo,Ko,Go,Zo,Jo,Qo,th,eh,ih,sh,nh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class oh{constructor(t,e){Vo.set(this,void 0),jo.set(this,void 0),nh(this,Vo,null!=e?e:300),nh(this,jo,t),this.escClose=!1,this.keyClose="",this.openAct="",this.closeAct="",this.timeout=rh(this,Vo)}parse(t){this.escClose=bt(t.escClose),this.keyClose=t.keyClose,this.timeout=mt(t.timeout,rh(this,Vo)),this.openAct=Mt(t.openAct,Et(".{prefix}-float-default-in",rh(this,jo))),this.closeAct=Mt(t.closeAct,Et(".{prefix}-float-default-out",rh(this,jo)))}}Vo=new WeakMap,jo=new WeakMap;class hh{constructor(t){Yo.set(this,void 0),nh(this,Yo,null!=t?t:"cui"),this.attribute=rh(this,Yo)+"-float"}getStyle(){return null}get(t,e){return new ah(t,e,this.attribute,rh(this,Yo))}}Yo=new WeakMap;class ah extends Bs{constructor(t,e,i,s){super("CuiFloatHandler",t,i,new oh(s,e.setup.animationTime),e),Xo.set(this,void 0),Ko.set(this,void 0),Go.set(this,void 0),Zo.set(this,void 0),Jo.set(this,void 0),Qo.set(this,void 0),th.set(this,void 0),eh.set(this,void 0),ih.set(this,void 0),sh.set(this,void 0),nh(this,Xo,!1),nh(this,Ko,!1),nh(this,Go,0),nh(this,Zo,0),nh(this,Qo,new $o),rh(this,Qo).preventDefault(!1),nh(this,th,new Uo),nh(this,eh,new zo(t)),nh(this,Jo,s),this.move=this.move.bind(this),this.resize=this.resize.bind(this),nh(this,sh,null),nh(this,ih,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){ys.setAria(this.element,"aria-modal",""),nh(this,sh,this.element.querySelector(Et(".{prefix}-float-move",rh(this,Jo)))),nh(this,ih,this.element.querySelector(Et(".{prefix}-float-resize",rh(this,Jo)))),rh(this,Qo).setCallback(this.onMove.bind(this))}onUpdate(){}onDestroy(){}onBeforeOpen(){return!0}onAfterOpen(){rh(this,Qo).attach()}onAfterClose(){rh(this,Qo).detach()}onBeforeClose(){return!0}onMove(t){switch(t.type){case"down":this.onMouseDown(t);break;case"up":this.onMouseUp(t);break;case"move":this.onMouseMove(t)}}onMouseDown(t){t.target===rh(this,sh)?(nh(this,Xo,!0),t.event.preventDefault()):t.target===rh(this,ih)&&(nh(this,Ko,!0),t.event.preventDefault()),nh(this,Go,t.x),nh(this,Zo,t.y),this.helper.setClassesAs(document.body,v),this.utils.bus.emit(j,null,!0)}onMouseMove(t){rh(this,Xo)?this.peform(t,this.move):rh(this,Ko)&&this.peform(t,this.resize)}onMouseUp(t){nh(this,Xo,!1),nh(this,Ko,!1),this.helper.removeClassesAs(document.body,v),this.utils.bus.emit(j,null,!1)}peform(t,e){this.mutate(()=>{at(e)&&e(this.element,t.x,t.y,t.x-rh(this,Go),t.y-rh(this,Zo)),nh(this,Go,t.x),nh(this,Zo,t.y)}),t.event.preventDefault()}resize(t,e,i,s,n){let[r,o]=rh(this,eh).calculate(e,i,s,n);this.fitsWindow(t.offsetTop,t.offsetLeft,r,o)&&this.mutate(()=>{t.style.width=r+"px",t.style.height=o+"px"})}move(t,e,i,s,n){let[r,o]=rh(this,th).calculate(e,i,s,n);this.fitsWindow(o,r,t.offsetWidth,t.offsetHeight)&&this.mutate(()=>{t.style.left=r+"px",t.style.top=o+"px"})}fitsWindow(t,e,i,s){return t+s<window.innerHeight-10&&t>10&&e>10&&e+i<window.innerWidth-10}}Xo=new WeakMap,Ko=new WeakMap,Go=new WeakMap,Zo=new WeakMap,Jo=new WeakMap,Qo=new WeakMap,th=new WeakMap,eh=new WeakMap,ih=new WeakMap,sh=new WeakMap;var lh,ch=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},uh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dh{constructor(){this.icon="",this.scale=1}parse(t){At(t)?this.icon=Mt(t,""):(this.icon=Mt(t.icon,""),this.scale=mt(t.scale,1))}}class ph{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new gh(t,e,this.attribute)}}class gh extends Ns{constructor(t,e,i){super("CuiIconHandler",t,i,new dh,e),lh.set(this,void 0),ch(this,lh,null)}onInit(){this.isLocked||(null===uh(this,lh)?(this.isLocked=!0,ch(this,lh,this.args.icon),this.addIcon(this.args.icon)):this._log.debug("Icon already initialized"))}onUpdate(){this.isLocked||this.args.icon!==uh(this,lh)&&(ch(this,lh,this.args.icon),this.addIcon(this.args.icon))}onDestroy(){const t=this.element.querySelector("svg");at(t)&&t.remove(),ch(this,lh,null)}addIcon(t){const e=t?f[t]:null;if(!e)return void(this.isLocked=!1);const i=new qn(e).setScale(this.args.scale).build(),s=this.element.querySelector("svg");at(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}insertBefore(t){this.element.insertBefore(t,this.element.firstChild),this.isLocked=!1}appendChild(t){this.element.appendChild(t),this.isLocked=!1}}lh=new WeakMap;var vh,fh,mh,wh,kh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},yh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class bh{constructor(t,e){vh.set(this,void 0),fh.set(this,void 0),mh.set(this,void 0),wh.set(this,void 0),kh(this,fh,t),kh(this,mh,null!=e?e:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]),kh(this,wh,void 0),kh(this,vh,void 0)}setCallback(t){kh(this,wh,t)}connect(){yh(this,wh)&&kh(this,vh,new IntersectionObserver(yh(this,wh),{root:yh(this,fh),rootMargin:"0px",threshold:yh(this,mh)}))}observe(t){yh(this,vh)&&yh(this,vh).observe(t)}unobserve(t){yh(this,vh)&&yh(this,vh).unobserve(t)}disconnect(){yh(this,vh)&&yh(this,vh).disconnect()}}vh=new WeakMap,fh=new WeakMap,mh=new WeakMap,wh=new WeakMap;var Ch,Mh,Ah,Eh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Th{constructor(){this.target="div",this.action="",this.offset=0,this.isRoot=!1}parse(t){this.target=at(t.target)?":scope "+t.target:":scope > *",this.action=Mt(t.action,""),this.offset=dt(parseFloat(t.offset),0,1,0),this.isRoot=bt(t.isRoot)}}class xh{constructor(t){this.attribute=(null!=t?t:"cui")+"-intersection"}getStyle(){return null}get(t,e){return new Sh(t,e,this.attribute)}}class Sh extends Ns{constructor(t,e,i){super("CuiIntersectionHandler",t,i,new Th,e),Ch.set(this,void 0),Mh.set(this,void 0),Ah.set(this,void 0),Eh(this,Ch,new bh(this.element)),Eh(this,Mh,[]),Eh(this,Ah,[])}onInit(){this.parseArguments(),Wh(this,Ch).setCallback(this.onIntersection.bind(this)),Wh(this,Ch).connect(),Wh(this,Mh).forEach(t=>{Wh(this,Ch).observe(t)})}onUpdate(){this.parseArguments()}onDestroy(){Wh(this,Ch).disconnect()}parseArguments(){if(!at(this.prevArgs)||this.prevArgs.target!==this.args.target){let t=this.args.isRoot?document.body:this.element;Eh(this,Mh,[...t.querySelectorAll(this.args.target)])}Eh(this,Ah,Ai.get(this.args.action))}onIntersection(t,e){at(Wh(this,Mh))&&t.forEach(t=>{t.isIntersecting&&t.intersectionRatio>=this.args.offset?this.addActions(t.target):this.removeActions(t.target),this.emitIntersection(t)})}emitIntersection(t){this.emitEvent($,{entry:t,offset:this.args.offset,timestamp:Date.now()})}addActions(t){Wh(this,Ah).forEach(e=>e.add(t))}removeActions(t){Wh(this,Ah).forEach(e=>e.remove(t))}}Ch=new WeakMap,Mh=new WeakMap,Ah=new WeakMap;var Lh,Ih,Ph,Dh,Oh,Nh,Bh,_h=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class $h{constructor(t,e){Lh.set(this,void 0),Ih.set(this,void 0),_h(this,Ih,null!=e?e:300),_h(this,Lh,t),this.escClose=!1,this.position="right",this.openAct=this.getDefaultOpenClass(),this.closeAct=this.getDefaultCloseClass(),this.timeout=Hh(this,Ih),this.outClose=!1,this.keyClose=""}parse(t){at(t)&&(this.escClose=bt(t.escClose),this.outClose=bt(t.outClose),this.position=Mt(t.position,"right"),this.openAct=Mt(t.openAct,this.getDefaultOpenClass()),this.closeAct=Mt(t.closeAct,this.getDefaultCloseClass()),this.timeout=mt(t.timeout,Hh(this,Ih)),this.keyClose=t.keyClose)}getDefaultOpenClass(){return Et("right"===this.position?".{prefix}-offcanvas-default-right-in":".{prefix}-offcanvas-default-left-in",Hh(this,Lh))}getDefaultCloseClass(){return Et("right"===this.position?".{prefix}-offcanvas-default-right-out":".{prefix}-offcanvas-default-left-out",Hh(this,Lh))}}Lh=new WeakMap,Ih=new WeakMap;class Rh{constructor(t){Ph.set(this,void 0),_h(this,Ph,null!=t?t:"cui"),this.attribute=Hh(this,Ph)+"-off-canvas"}getStyle(){return null}get(t,e){return new Fh(t,e,this.attribute,Hh(this,Ph))}}Ph=new WeakMap;class Fh extends Bs{constructor(t,e,i,s){super("CuiOffCanvasHandler",t,i,new $h(s,e.setup.animationTime),e),Dh.set(this,void 0),Oh.set(this,void 0),Nh.set(this,void 0),Bh.set(this,void 0),_h(this,Dh,s),_h(this,Oh,Et("{prefix}-off-canvas-open",s)),_h(this,Bh,null),_h(this,Nh,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){this.mutate(()=>{this.setPositionLeft(),ys.setAria(this.element,"aria-modal","")})}onUpdate(){this.setPositionLeft()}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(_h(this,Nh,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&_h(this,Bh,this.onEvent(F,this.onWindowClick.bind(this))),this.helper.setClass(Hh(this,Oh),document.body),document.body.style.top=`-${scrollY}px`}onAfterClose(){this.detachEvent(F,Hh(this,Bh)),this.helper.removeClass(Hh(this,Oh),document.body),document.body.style.top="",window.scrollTo(0,-1*Hh(this,Nh))}onBeforeClose(){return!0}onWindowClick(t){const e=this.element.querySelector(Et(".{prefix}-off-canvas-container",Hh(this,Dh)));e&&!e.contains(t.target)&&this.close()}isAnyActive(){return this.helper.hasClass(Hh(this,Oh),document.body)}setPositionLeft(){let t=lt(Hh(this,Dh),"left");"left"!==this.args.position||this.helper.hasClass(t,this.element)?"right"==this.args.position&&this.helper.hasClass(t,this.element)&&this.helper.removeClass(t,this.element):this.helper.setClass(t,this.element)}}Dh=new WeakMap,Oh=new WeakMap,Nh=new WeakMap,Bh=new WeakMap;var qh,Uh,zh,Vh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Yh{static get(t){return t instanceof Window?new Gh:t instanceof HTMLElement?new Kh(t):new Xh(t)}}class Xh{constructor(t){qh.set(this,void 0),Uh.set(this,void 0),Vh(this,Uh,t),Vh(this,qh,t.getBoundingClientRect())}getHeight(){return jh(this,qh).height}getWidth(){return jh(this,qh).width}getTop(){return jh(this,qh).top}getLeft(){return jh(this,qh).left}getScrollHeight(){return jh(this,Uh).scrollHeight}getScrollWidth(){return jh(this,Uh).scrollWidth}getScrollTop(){return jh(this,Uh).scrollTop}getScrollLeft(){return jh(this,Uh).scrollLeft}queryAll(t){return[...jh(this,Uh).querySelectorAll(t)]}}qh=new WeakMap,Uh=new WeakMap;class Kh{constructor(t){zh.set(this,void 0),Vh(this,zh,t)}getHeight(){return jh(this,zh).offsetHeight}getWidth(){return jh(this,zh).offsetWidth}getTop(){return jh(this,zh).offsetTop}getLeft(){return jh(this,zh).offsetLeft}getScrollHeight(){return jh(this,zh).scrollHeight}getScrollWidth(){return jh(this,zh).scrollWidth}getScrollTop(){return jh(this,zh).scrollTop}getScrollLeft(){return jh(this,zh).scrollLeft}queryAll(t){return[...jh(this,zh).querySelectorAll(t)]}}zh=new WeakMap;class Gh{getHeight(){return window.innerHeight}getWidth(){return window.innerWidth}getTop(){return 0}getLeft(){return 0}getScrollHeight(){return window.innerHeight}getScrollWidth(){return window.innerWidth}getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}queryAll(t){return[...document.querySelectorAll(t)]}}var Zh,Jh,Qh,ta,ea,ia,sa,na,ra,oa,ha=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},aa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class la{constructor(t,e){Zh.set(this,void 0),Jh.set(this,void 0),Qh.set(this,void 0),ta.set(this,void 0),ea.set(this,void 0),ia.set(this,void 0),sa.set(this,void 0),na.set(this,void 0),ra.set(this,void 0),oa.set(this,void 0),ha(this,Zh,t),ha(this,na,Yh.get(t)),ha(this,Jh,!1),ha(this,Qh,dt(e,0,100,0)),ha(this,ta,ha(this,ea,0)),ha(this,sa,!1),ha(this,ia,void 0),ha(this,ra,new ao(50,!1,this.onScrollFinish.bind(this))),ha(this,oa,this.listener.bind(this))}setCallback(t){ha(this,ia,t)}attach(){aa(this,Zh).addEventListener("scroll",aa(this,oa)),ha(this,sa,!0),this.listener(void 0,!0,"init")}detach(){aa(this,Zh).removeEventListener("scroll",aa(this,oa)),aa(this,ra).stop(),ha(this,sa,!1)}setTarget(t){t!==aa(this,Zh)&&(this.detach(),ha(this,Zh,t),this.attach())}setThreshold(t){ha(this,Qh,dt(t,0,100,0))}isInProgress(){return aa(this,Jh)}isAttached(){return aa(this,sa)}listener(t,e,i){if(!at(aa(this,ia)))return;let s=aa(this,na).getScrollLeft(),n=aa(this,na).getScrollTop();ha(this,ta,aa(this,ta)+s),ha(this,ea,aa(this,ea)+n),aa(this,Jh)||!this.passedThreshold()&&at(t)||(ha(this,Jh,!0),aa(this,ia).call(this,{base:t,top:n,left:s,initial:null!=e&&e,scrolling:at(t),source:null!=i?i:"event"}),at(t)&&aa(this,ra).start(),ha(this,Jh,!1),ha(this,ta,0),ha(this,ea,0))}passedThreshold(){return aa(this,Qh)<=0||aa(this,ta)>=aa(this,Qh)||aa(this,ea)>=aa(this,Qh)}onScrollFinish(){this.listener(void 0,!1,"task")}}Zh=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,ta=new WeakMap,ea=new WeakMap,ia=new WeakMap,sa=new WeakMap,na=new WeakMap,ra=new WeakMap,oa=new WeakMap;var ca,ua,da,pa,ga,va,fa,ma=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ka{matches(t,e,i,s){return i>0&&e>=i||s>0&&t>=s}}class ya{constructor(){ca.set(this,void 0),ua.set(this,void 0),da.set(this,void 0),pa.set(this,void 0),ga.set(this,void 0),va.set(this,void 0),fa.set(this,void 0),ma(this,ca,0),ma(this,ua,0),ma(this,pa,0),ma(this,da,0),ma(this,fa,100),ma(this,ga,!1),ma(this,va,!1)}matches(t,e,i,s){return this.fitsOffsetY(t,s)||this.fitsOffsetX(e,i)}fitsOffsetX(t,e){if(e<=0)return!1;let i=t-wa(this,ca);return t>=e&&i>wa(this,fa)?ma(this,ga,!0):wa(this,ga)&&i<-wa(this,fa)&&ma(this,ga,!1),(i<0&&wa(this,pa)<i||i>=0&&wa(this,pa)>i)&&ma(this,ca,t),ma(this,pa,i),wa(this,ga)}fitsOffsetY(t,e){if(e<=0)return!1;let i=t-wa(this,ua);return t>=e&&i>wa(this,fa)?ma(this,va,!0):wa(this,va)&&i<-wa(this,fa)&&ma(this,va,!1),(i<0&&wa(this,da)<i||i>=0&&wa(this,da)>i)&&ma(this,ua,t),ma(this,da,i),wa(this,va)}}ca=new WeakMap,ua=new WeakMap,da=new WeakMap,pa=new WeakMap,ga=new WeakMap,va=new WeakMap,fa=new WeakMap;var ba,Ca,Ma,Aa,Ea,Wa,Ta,xa,Sa,La,Ia=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Da{constructor(){this.offsetX=0,this.offsetY=0,this.target="",this.root=!1,this.action="",this.mode="static"}parse(t){this.target=t.target,this.action=t.action,this.offsetX=mt(t.offsetX,-1),this.offsetY=mt(t.offsetY,-1),this.root=bt(t.root),this.mode=Mt(t.mode,"static")}}class Oa{constructor(t){this.attribute=(null!=t?t:"cui")+"-offset"}getStyle(){return null}get(t,e){return new Na(t,e,this.attribute)}}class Na extends Ns{constructor(t,e,i){super("CuiOffsetHandler",t,i,new Da,e),ba.set(this,void 0),Ca.set(this,void 0),Ma.set(this,void 0),Aa.set(this,void 0),Ea.set(this,void 0),Wa.set(this,void 0),Ta.set(this,void 0),xa.set(this,void 0),Sa.set(this,void 0),La.set(this,void 0),this.element=t,Ia(this,Ca,this.element),Ia(this,Ma,e),Ia(this,Aa,!1),Ia(this,Ea,[]),Ia(this,Wa,0),Ia(this,Ta,0),Ia(this,xa,20),Ia(this,Sa,this.element),Ia(this,La,null),Ia(this,ba,void 0)}onInit(){this.parseAttribute(),Ia(this,ba,new la(this.args.root?window:this.element,this.utils.setup.scrollThreshold)),Pa(this,ba).setCallback(this.onScroll.bind(this)),Pa(this,ba).attach()}onUpdate(){this.parseAttribute()}onDestroy(){Pa(this,ba)&&Pa(this,ba).detach()}onScroll(t){this.checkAndPerformActions(t)}parseAttribute(){Ia(this,Sa,this.getRoot()),Ia(this,Ca,this.getTarget()),Ia(this,Ea,Ai.get(this.args.action)),Ia(this,La,class{static get(t){return"dynamic"===t?new ya:new ka}}.get(this.args.mode))}checkAndPerformActions(t){at(Pa(this,La))||this.logError("Cannot perform - mode handler not initialized","checkAndPerformActions");let e=Pa(this,La).matches(t.top,t.left,this.args.offsetX,this.args.offsetY);if(e!==Pa(this,Aa))return this.act(e),Ia(this,Aa,e),void this.callEvent(Pa(this,Aa),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top));this.exceededThreshold(t.left,t.top)&&(this.callEvent(Pa(this,Aa),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top)),Ia(this,Wa,t.left),Ia(this,Ta,t.top))}act(t){gt(Pa(this,Ea),Pa(this,Ca))&&(this.isLocked=!0,Pa(this,Ea).forEach(e=>{t?e.add(Pa(this,Ca),Pa(this,Ma)):e.remove(Pa(this,Ca),Pa(this,Ma))}),this.isLocked=!1)}callEvent(t,e,i,s,n,r,o){this.emitEvent(q,{matches:Pa(this,Aa),offsetX:e,offsetY:i,ratioX:r,ratioY:o,scrolling:s,source:n,timestamp:Date.now()})}getRoot(){return this.args.root?document.body:this.element}exceededThreshold(t,e){return Math.abs(t-Pa(this,Wa))>Pa(this,xa)||Math.abs(e-Pa(this,Ta))>Pa(this,xa)}calcaRatio(t,e){let i=parseFloat(((Pa(this,Sa).clientHeight+e)/Pa(this,Sa).scrollHeight).toFixed(2));return[ut(parseFloat(((Pa(this,Sa).clientWidth+t)/Pa(this,Sa).scrollWidth).toFixed(2)),0,1),ut(i,0,1)]}getTarget(){let t=this.args.target?Pa(this,Sa).querySelector(this.args.target):null;return null!=t?t:this.element}}ba=new WeakMap,Ca=new WeakMap,Ma=new WeakMap,Aa=new WeakMap,Ea=new WeakMap,Wa=new WeakMap,Ta=new WeakMap,xa=new WeakMap,Sa=new WeakMap,La=new WeakMap;var Ba,_a,Ha,$a=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ra=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qa{constructor(t){Ba.set(this,void 0),Ra(this,Ba,null!=t?t:300),this.target="",this.action="",this.timeout=0,this.prevent=!1,this.state=""}parse(t){if(at(t)&&At(t))return this.target=t,this.action="",this.timeout=Fa(this,Ba),this.prevent=!1,void(this.state="");this.target=Mt(t.target,""),this.action=t.action,this.timeout=mt(t.timeout,Fa(this,Ba)),this.prevent=bt(t.prevent),this.state=t.state}}Ba=new WeakMap;class Ua{constructor(t){_a.set(this,void 0),Ra(this,_a,null!=t?t:"cui"),this.attribute=Fa(this,_a)+"-open"}getStyle(){return null}get(t,e){return new za(t,e,this.attribute,Fa(this,_a))}}_a=new WeakMap;class za extends Ns{constructor(t,e,i,s){super("CuiOpenHandler",t,i,new qa(e.setup.animationTime),e),Ha.set(this,void 0),Ra(this,Ha,null),this.onClick=this.onClick.bind(this)}onInit(){this.element.addEventListener("click",this.onClick),Ra(this,Ha,this.onEvent(S,this.onOpen.bind(this)))}onUpdate(){}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(S,Fa(this,Ha))}onClick(t){this.onOpen(t),this.args.prevent&&t.preventDefault()}onOpen(t){if(this.isLocked)return;const e=this.getTarget(this.args.target);at(e)?(this.isLocked=!0,this.run(e).then(i=>{this.activateTarget(t,e,i)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return $a(this,void 0,void 0,(function*(){let e=t.$cuid;if(at(e))return this._log.debug("Open cUI component"),yield this.utils.bus.emit(S,e,this.args.state),!1;if(this._log.debug("Open html component"),gt(this.args.timeout,this.args.action)){this._log.debug("Perfrom an action");let e=Ai.get(this.args.action);return yield this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.setActiveClass(t)}),!0}return this.setActiveClassAsync(t),!0}))}setActiveClass(t){at(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClass(this.activeClassName,t)}setActiveClassAsync(t){this.fetch(()=>{at(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClassesAs(t,this.activeClassName)})}activateTarget(t,e,i){at(e)&&!this.helper.hasClass(this.activeClassName,e)&&this.helper.setClassesAs(e,this.activeClassName),i&&this.emitOpen(t)}emitOpen(t){this.emitEvent(L,{event:t,state:this.args.state,timestamp:Date.now()})}getTarget(t){if(at(t))return document.querySelector(t);let e=this.element.parentElement,i=at(e)?e.querySelectorAll("[cuid]"):void 0;return!i||i.length<2?void 0:function(t,e){let i=t.length;if(t&&0!==i)for(let s=0;s<i;s++)if(e(t[s],s))return t[s]}([...i],t=>t!==this.element)}}Ha=new WeakMap;var Va,ja,Ya,Xa,Ka,Ga,Za,Ja,Qa,tl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},el=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class il{constructor(){this.mode="simple",this.default="",this.small=this.medium=this.large=this.xlarge=void 0,this.delay=0}parse(t){var e,i,s,n;this.default=Mt(t.default,""),this.small=null!==(e=t.small)&&void 0!==e?e:t.s,this.medium=null!==(i=t.medium)&&void 0!==i?i:t.m,this.large=null!==(s=t.large)&&void 0!==s?s:t.l,this.xlarge=null!==(n=t.xlarge)&&void 0!==n?n:t.xl,this.mode="smart"===t.mode?"smart":"simple",this.delay=mt(t.delay,0)}}class sl{constructor(t){Va.set(this,void 0),tl(this,Va,null!=t?t:"cui"),this.attribute=el(this,Va)+"-resize"}getStyle(){return null}get(t,e){return new nl(t,e,this.attribute)}}Va=new WeakMap;class nl extends Ns{constructor(t,e,i){super("CuiResizeHandler",t,i,new il,e),ja.set(this,void 0),Ya.set(this,void 0),Xa.set(this,void 0),Ka.set(this,void 0),Ga.set(this,void 0),Za.set(this,void 0),Ja.set(this,void 0),Qa.set(this,void 0),tl(this,ja,null),tl(this,Ya,new bh(document.documentElement,[0,.1])),el(this,Ya).setCallback(this.onIntersection.bind(this)),tl(this,Ga,""),tl(this,Ka,""),tl(this,Xa,"none"),tl(this,Ja,!1),tl(this,Qa,void 0),tl(this,Za,void 0)}onInit(){tl(this,ja,this.utils.bus.on(x,this.resize.bind(this))),el(this,Ya).connect(),el(this,Ya).observe(this.element),tl(this,Xa,vt(window.innerWidth)),tl(this,Ja,this.isInViewport(this.element)),this.setNewValue(),this.updateElement()}onUpdate(){this.setNewValue(),this.updateElement()}onDestroy(){null!==el(this,ja)&&(this.utils.bus.detach(x,el(this,ja)),tl(this,ja,null)),el(this,Ya).unobserve(this.element),el(this,Ya).disconnect()}resize(t){tl(this,Xa,t.current),this.setNewValue(),this.updateElement()}onIntersection(t){t.length>0&&tl(this,Ja,t[0].isIntersecting),this.updateElement()}setNewValue(){let t=this.isSmartMode()?this.getSmartValue(el(this,Xa)):this.getValue(el(this,Xa),!0);t&&t!==el(this,Ka)&&tl(this,Ka,t)}getValue(t,e){let i=void 0;switch(t){case"xlarge":i=this.args.xlarge;break;case"large":i=this.args.large;break;case"medium":i=this.args.medium;break;case"small":i=this.args.small;break;default:i=this.args.default}return e&&!i?this.args.default:i}getSmartValue(t){var e,i,s,n;let r=this.args.default;return"none"===t?r:(r=null!==(e=this.args.small)&&void 0!==e?e:r,"small"===t?r:(r=null!==(i=this.args.medium)&&void 0!==i?i:r,"medium"===t?r:(r=null!==(s=this.args.large)&&void 0!==s?s:r,"large"===t?r:null!==(n=this.args.xlarge)&&void 0!==n?n:r)))}updateElement(){el(this,Ja)||!this.isSmartMode()?at(el(this,Ka))?el(this,Ga)!==el(this,Ka)&&this.run(()=>{let t=Mi.get(el(this,Ka));this.mutate(()=>{el(this,Za)&&el(this,Za).remove(this.element),t.add(this.element),tl(this,Ga,el(this,Ka)),tl(this,Za,t)})}):this.logWarning("Not eligible to set value: "+el(this,Ka)):this.logInfo("Not intersecting")}isSmartMode(){return"smart"===this.args.mode}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}run(t){el(this,Qa)&&(clearTimeout(el(this,Qa)),tl(this,Qa,void 0)),tl(this,Qa,setTimeout(()=>{t(),tl(this,Qa,void 0)},this.args.delay))}}ja=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,Ka=new WeakMap,Ga=new WeakMap,Za=new WeakMap,Ja=new WeakMap,Qa=new WeakMap;var rl,ol,hl,al=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ll=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class cl{constructor(t){this.attribute=at(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new dl(t,e,this.attribute)}}class ul{constructor(){this.target="",this.parent="",this.behavior="auto"}parse(t){this.target=Mt(t.target,""),this.parent=Mt(t.parent,""),this.behavior=at(t.behavior)&&"smooth"===t.behavior.toLowerCase()?"smooth":"auto"}}class dl extends Ns{constructor(t,e,i){super("CuiScrollHandler",t,i,new ul,e),rl.set(this,void 0),ol.set(this,void 0),hl.set(this,void 0),this.element=t,al(this,rl,null),al(this,ol,null),al(this,hl,this.onClick.bind(this))}onInit(){this.element.addEventListener("click",ll(this,hl)),this.setTargets()}onUpdate(){this.setTargets()}onDestroy(){this.element.removeEventListener("click",ll(this,hl))}onClick(t){if(!gt(ll(this,ol),ll(this,rl)))return;let e=function(t){if(!at(t))return-1;let e=t.offsetTop-parseInt(wt(t,"margin-top"))-parseInt(wt(t,"padding-top"))-parseInt(wt(t,"border-top-width"));return e<0?t.offsetTop:e}(ll(this,ol))-ll(this,rl).offsetTop,i=e-ll(this,rl).scrollTop;ll(this,rl).scrollBy({top:i,behavior:this.args.behavior}),this.emitEvent(_,{to:e,by:i,target:ll(this,ol),parent:ll(this,rl),timestamp:Date.now()}),t.preventDefault()}setTargets(){al(this,ol,document.querySelector(this.args.target)),at(ll(this,ol))&&al(this,rl,at(this.args.parent)?document.querySelector(this.args.parent):ll(this,ol).parentElement)}}rl=new WeakMap,ol=new WeakMap,hl=new WeakMap;var pl,gl,vl,fl,ml=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class kl{constructor(t,e){var i;pl.set(this,void 0),gl.set(this,void 0),vl.set(this,void 0),fl.set(this,void 0),ml(this,fl,Yh.get(t)),ml(this,pl,new la(t,null!==(i=null==e?void 0:e.threshold)&&void 0!==i?i:0)),wl(this,pl).setCallback(this.onScroll.bind(this)),ml(this,vl,[]),ml(this,gl,void 0)}setChildren(t){ml(this,vl,t)}setThreshold(t){wl(this,pl).setThreshold(t)}setCallback(t){ml(this,gl,t)}setParent(t){ml(this,fl,Yh.get(t)),wl(this,pl).setTarget(t)}isInProgress(){return wl(this,pl).isInProgress()}attach(){this.isAttached()||wl(this,pl).attach()}detach(){this.isAttached()&&wl(this,pl).detach()}isAttached(){return wl(this,pl)&&wl(this,pl).isAttached()}onScroll(t){gt(wl(this,vl),wl(this,gl))&&wl(this,gl)&&wl(this,gl).call(this,this.prepareCallbackResult(t))}calcChildVerticalRatio(t,e,i){let s=t.offsetTop+t.offsetHeight;return ut(((i<s?i:s)-(e>t.offsetTop?e:t.offsetTop))/t.offsetHeight,0,1)}calcChildHorizontalRatio(t,e,i){let s=t.offsetLeft+t.offsetWidth;return ut(((i<s?i:s)-(e>t.offsetLeft?e:t.offsetLeft))/t.offsetWidth,0,1)}prepareCallbackResult(t){var e,i;let s=t.top+wl(this,fl).getHeight(),n=t.left+wl(this,fl).getWidth();return{ev:t.base,top:t.top,left:t.left,scrolling:null!==(e=t.scrolling)&&void 0!==e&&e,initial:null!==(i=t.initial)&&void 0!==i&&i,source:t.source,items:wl(this,vl).map((e,i)=>({verticalRatio:this.calcChildVerticalRatio(e,t.top,s),horizontalRatio:this.calcChildHorizontalRatio(e,t.left,n),element:e}))}}}pl=new WeakMap,gl=new WeakMap,vl=new WeakMap,fl=new WeakMap;class yl{static get(t){return"multi"===t?new Ml:new Cl}}class bl{constructor(t){this.previous=t}getMatching(t,e){return e.reduce((e,i,s)=>(i.verticalRatio>t&&e.push(s),e),[])}addActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.add(e)})}removeActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.remove(e)})}forEachAction(t,e,i){gt(t,e,i)&&t.forEach(t=>{e.forEach(e=>{at(e)&&i(t,e)})})}}class Cl extends bl{constructor(){super(-1)}update(t,e,i,s,n){let r=this.getMatching(e,t),o=r.length,h=o>0?r[o-1]:-1,a={changed:!1};if(!this.matches(h)){if(this.previous>-1&&this.removeActions(i,t[this.previous].element),h>-1){let e=t[h].element;a.intersecting=[e],this.addActions(i,e)}return gt(s,n)&&(this.previous>-1&&this.removeActions(n,s[this.previous]),h>-1&&this.addActions(n,s[h])),this.previous=h,a.changed=!0,a.intersecting=[],a}return a}matches(t){return t===this.previous}}class Ml extends bl{constructor(){super([])}update(t,e,i,s,n){let r=this.getMatching(e,t),o={changed:!1};if(!this.matches(r)){let e=r.map(e=>t[e].element);return this.removeActions(i,...this.previous.map(e=>t[e].element)),this.addActions(i,...e),o.intersecting=e,gt(s,n)&&(this.removeActions(n,...this.previous.map(t=>s[t])),this.addActions(n,...r.map(t=>s[t]))),this.previous=r,o.changed=!0,o}return o}matches(t){let e=t.length;if(e!==this.previous.length)return!1;let i=0;for(i=0;i<e;i++)if(!this.previous.includes(t[i]))return!1;return!0}}var Al,El,Wl,Tl,xl,Sl,Ll,Il=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Dl{constructor(){this.ratio=0,this.mode="single",this.threshold=-1,this.selector="",this.action="",this.isRoot=!1,this.link="",this.linkAction=""}parse(t){var e;this.selector=":scope "+(null!==(e=t.selector)&&void 0!==e?e:"> *"),this.action=Mt(t.action,""),this.link=Mt(t.link,""),this.linkAction=Mt(t.linkAction,""),this.ratio=dt(parseFloat(t.ratio),0,1,0),this.isRoot=bt(t.isRoot),this.mode="multi"===(null==t?void 0:t.mode)?"multi":"single",this.threshold=mt(t.threshold,-1)}}class Ol{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new Nl(t,e,this.attribute)}}class Nl extends Ns{constructor(t,e,i){super("CuiScrollspyHandler",t,i,new Dl,e),Al.set(this,void 0),El.set(this,void 0),Wl.set(this,void 0),Tl.set(this,void 0),xl.set(this,void 0),Sl.set(this,void 0),Ll.set(this,void 0),this.element=t,Il(this,Al,new kl(this.element,{threshold:this.utils.setup.scrollThreshold})),Il(this,El,[]),Il(this,Wl,[]),Il(this,Tl,[]),Il(this,xl,void 0),Il(this,Sl,void 0),Il(this,Ll,void 0)}onInit(){this.parseAttribute(),Pl(this,Al).setCallback(this.onIntersection.bind(this)),Pl(this,Al).attach()}onUpdate(){this.updateAttributes()}onDestroy(){Pl(this,Al).detach()}onIntersection(t){if(!Pl(this,Ll))return void this.logError("Cannot perform - mode handler not initialized","OnIntersection");let e=Date.now();this.mutate(()=>{let i=Pl(this,Ll).update(t.items,this.args.ratio,Pl(this,Wl),Pl(this,El),Pl(this,Tl));i.changed&&this.emitEvent(H,{intersecting:i.intersecting,timestamp:e})}),this.emitEvent(_,{top:t.top,left:t.left,scrolling:t.scrolling,initial:t.initial,source:t.source,timestamp:e})}parseAttribute(){Il(this,xl,this.args.isRoot?window:this.element),Il(this,Sl,Yh.get(Pl(this,xl)));let t=this.args.selector?Pl(this,Sl).queryAll(this.args.selector):[];Pl(this,Al).setChildren(t),Pl(this,Al).setThreshold(this.args.threshold),Il(this,El,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),Il(this,Wl,Ai.get(this.args.action)),Il(this,Tl,Ai.get(this.args.linkAction)),Il(this,Ll,yl.get(this.args.mode))}updateAttributes(){if(this.prevArgs&&this.args.isRoot!==this.prevArgs.isRoot&&(Il(this,xl,this.args.isRoot?window:this.element),Il(this,Sl,Yh.get(Pl(this,xl))),Pl(this,Al).setParent(Pl(this,xl))),this.prevArgs&&Pl(this,Sl)&&this.args.selector!==this.prevArgs.selector){let t=this.args.selector?Pl(this,Sl).queryAll(this.args.selector):[];Pl(this,Al).setChildren(t)}Pl(this,Al).setThreshold(this.args.threshold),Il(this,El,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),Il(this,Wl,Ai.get(this.args.action)),Il(this,Tl,Ai.get(this.args.linkAction)),Il(this,Ll,yl.get(this.args.mode))}}Al=new WeakMap,El=new WeakMap,Wl=new WeakMap,Tl=new WeakMap,xl=new WeakMap,Sl=new WeakMap,Ll=new WeakMap;var Bl,_l,Hl,$l,Rl,Fl,ql,Ul,zl,Vl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Yl{constructor(t){Bl.set(this,void 0),_l.set(this,void 0),Hl.set(this,void 0),$l.set(this,void 0),Rl.set(this,void 0),Fl.set(this,void 0),ql.set(this,void 0),Ul.set(this,void 0),zl.set(this,void 0),Vl(this,$l,t),Vl(this,_l,[]),Vl(this,Hl,void 0),Vl(this,Bl,void 0),Vl(this,Rl,void 0),Vl(this,Fl,[]),Vl(this,ql,[]),Vl(this,zl,void 0),Vl(this,Ul,void 0)}setId(t){return Vl(this,Bl,t),this}setClasses(...t){return Vl(this,_l,t),this}setAttributes(t){return Vl(this,Hl,t),this}setTextContent(t){return Vl(this,Rl,t),this}setChildren(...t){return Vl(this,Fl,[...t]),this}setRawChildren(...t){return Vl(this,ql,[...t]),this}onEvent(t,e){return Vl(this,zl,t),Vl(this,Ul,e),this}build(t){let e=document.createElement(jl(this,$l));return at(jl(this,Bl))&&(e.id=jl(this,Bl)),at(jl(this,_l))&&e.classList.add(...jl(this,_l)),at(jl(this,Hl))&&Lt(jl(this,Hl),(t,i)=>{e.setAttribute(t,i)}),at(t)?e.innerHTML=t:at(jl(this,Rl))&&(e.textContent=jl(this,Rl)),jl(this,ql).forEach(t=>{e.appendChild(t.build())}),jl(this,Fl).forEach(t=>e.appendChild(t)),gt(jl(this,zl),jl(this,Ul))&&e.addEventListener(jl(this,zl),t=>{jl(this,Ul).call(this,t)}),e}}Bl=new WeakMap,_l=new WeakMap,Hl=new WeakMap,$l=new WeakMap,Rl=new WeakMap,Fl=new WeakMap,ql=new WeakMap,Ul=new WeakMap,zl=new WeakMap;var Xl,Kl,Gl,Zl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Jl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ql{constructor(){Xl.set(this,void 0),Kl.set(this,void 0),Gl.set(this,void 0),Zl(this,Xl,[]),Zl(this,Kl,0),Zl(this,Gl,5)}setElements(t){Zl(this,Xl,t),Zl(this,Kl,Jl(this,Xl).length)}setThreshold(t){Zl(this,Gl,t)}detect(t,e){if(!at(Jl(this,Xl)))return[-1,void 0];let i=-1,s=void 0;for(let n=0;n<Jl(this,Kl);n++)if(this.isInBounds(Jl(this,Xl)[n],t,e)){0===n?(i=n,s=Jl(this,Xl)[n]):n<Jl(this,Kl)-1&&(i=n+1,s=Jl(this,Xl)[n+1]);break}return[i,s]}isInBounds(t,e,i){const s=t.getBoundingClientRect();return e>s.left-Jl(this,Gl)&&e<s.left+s.width+Jl(this,Gl)&&i>s.top-Jl(this,Gl)&&i<s.top+s.height+Jl(this,Gl)}}Xl=new WeakMap,Kl=new WeakMap,Gl=new WeakMap;var tc,ec,ic,sc,nc,rc,oc,hc,ac=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},lc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class cc{constructor(t){tc.set(this,void 0),ec.set(this,void 0),ic.set(this,void 0),sc.set(this,void 0),nc.set(this,void 0),rc.set(this,void 0),oc.set(this,void 0),hc.set(this,void 0),ac(this,tc,t),ac(this,ec,new $o),ac(this,rc,150),ac(this,oc,!1),ac(this,hc,void 0),lc(this,ec).setTarget(lc(this,tc)),lc(this,ec).preventDefault(!1),lc(this,ec).setCallback(this.onMove.bind(this)),ac(this,ic,void 0),ac(this,sc,void 0),ac(this,nc,void 0)}setLongPressTimeout(t){ac(this,rc,t)}onDragStart(t){ac(this,ic,t)}onDragOver(t){ac(this,sc,t)}onDragEnd(t){ac(this,nc,t)}attach(){lc(this,ec).attach()}detach(){lc(this,ec).detach()}onMove(t){switch(t.type){case"down":if(lc(this,oc))return;ac(this,hc,setTimeout(()=>{lc(this,ic)&&lc(this,ic).call(this,t)&&ac(this,oc,!0)},lc(this,rc)));break;case"move":if(this.cancelTimeout(),!lc(this,oc))return;lc(this,sc)&&lc(this,sc).call(this,t);break;case"up":if(this.cancelTimeout(),!lc(this,oc))return;lc(this,nc)&&lc(this,nc).call(this,t),ac(this,oc,!1)}}cancelTimeout(){lc(this,hc)&&(clearTimeout(lc(this,hc)),ac(this,hc,void 0))}}tc=new WeakMap,ec=new WeakMap,ic=new WeakMap,sc=new WeakMap,nc=new WeakMap,rc=new WeakMap,oc=new WeakMap,hc=new WeakMap;var uc,dc,pc,gc,vc,fc,mc,wc,kc,yc,bc,Cc,Mc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ac=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ec{constructor(){this.target=":scope  > *",this.trigger=":scope  > *",this.timeout=150,this.threshold=5}parse(t){this.target=t.target?":scope  "+t.target:":scope  > *",this.trigger=t.trigger?":scope  "+t.trigger:":scope  > *",this.timeout=mt(t.timeout,150),this.threshold=mt(t.threshold,5)}}class Wc{constructor(t){uc.set(this,void 0),Mc(this,uc,null!=t?t:"cui"),this.attribute=Ac(this,uc)+"-sortable"}getStyle(){return null}get(t,e){return new Tc(t,this.attribute,e,Ac(this,uc))}}uc=new WeakMap;class Tc extends Ns{constructor(t,e,i,s){super("CuiSortableHandler",t,e,new Ec,i),dc.set(this,void 0),pc.set(this,void 0),gc.set(this,void 0),vc.set(this,void 0),fc.set(this,void 0),mc.set(this,void 0),wc.set(this,void 0),kc.set(this,void 0),yc.set(this,void 0),bc.set(this,void 0),Cc.set(this,void 0),Mc(this,gc,[]),Mc(this,pc,[]),Mc(this,fc,-1),Mc(this,vc,null),Mc(this,yc,null),Mc(this,mc,null),Mc(this,dc,new cc(t)),Ac(this,dc).onDragStart(this.onDragStart.bind(this)),Ac(this,dc).onDragOver(this.onDragOver.bind(this)),Ac(this,dc).onDragEnd(this.onDragEnd.bind(this)),Mc(this,wc,Et("{prefix}-moving",s)),Mc(this,Cc,Et("{prefix}-sortable-preview",s)),Mc(this,kc,new Ql),Mc(this,bc,new Cn),Ac(this,bc).setOnFinish(()=>{let t=Ac(this,vc),e=Ac(this,fc);this.stopMovementPrep(),this.utils.bus.emit(j,null,!1),this.emitEvent(K,{item:t,index:e,timestamp:new Date})})}onInit(){Ac(this,dc).attach(),this.getTargetsAndTrggers(),Ac(this,kc).setThreshold(this.args.threshold)}onUpdate(){!this.prevArgs||this.args.target===this.prevArgs.target&&this.args.trigger===this.prevArgs.trigger||this.getTargetsAndTrggers(),Ac(this,dc).setLongPressTimeout(this.args.timeout)}onDestroy(){Ac(this,dc).detach()}getTargetsAndTrggers(){try{if(Mc(this,gc,[...this.element.querySelectorAll(this.args.target)]),Mc(this,pc,[...this.element.querySelectorAll(this.args.trigger)]),Ac(this,pc).length!==Ac(this,gc).length)throw new Error(`Triggers (count ${Ac(this,pc).length}) and targets (count ${Ac(this,gc).length}) selector are not correct`);Ac(this,kc).setElements(Ac(this,gc))}catch(t){this._log.error("Incorrect trigger or target selector"),this._log.exception(t,"getTargetsAndTrggers"),Mc(this,gc,[]),Mc(this,pc,[])}}onDragStart(t){return Mc(this,fc,this.getPressedElementIdx(t.target)),Mc(this,vc,Ac(this,fc)>-1?Ac(this,gc)[Ac(this,fc)]:null),!!at(Ac(this,vc))&&(this.utils.bus.emit(j,null,!0),this.startMovementPrep(t),this.emitEvent(G,{item:Ac(this,vc),index:Ac(this,fc),timestamp:new Date}),!0)}onDragOver(t){this.move(t),t.event.preventDefault()}onDragEnd(t){at(Ac(this,mc))&&(Ac(this,bc).setElement(Ac(this,mc)),Ac(this,bc).setProps(this.getFinishAnimation()),Ac(this,bc).finish(0,100,!1))}getPressedElementIdx(t){return Ac(this,pc).findIndex(e=>e.contains(t))}startMovementPrep(t){this.mutate(()=>{this.createPreview(),at(Ac(this,vc))&&this.helper.setClass(Ac(this,wc),Ac(this,vc)),this.helper.setClass("cui-locked",this.element),this.helper.setClass(v,document.body),this.setPreviewPosition(t),this.setCurrentPosition(t)})}stopMovementPrep(){this.mutate(()=>{at(Ac(this,vc))&&this.helper.removeClass(Ac(this,wc),Ac(this,vc)),this.helper.removeClass(v,document.body),this.helper.removeClass("cui-locked",this.element),this.removePreview(),Mc(this,vc,null),Mc(this,yc,null),this.getTargetsAndTrggers()})}move(t){this.mutate(()=>{this.setPreviewPosition(t),this.setCurrentPosition(t)})}createPreview(){at(Ac(this,vc))?(Mc(this,mc,new Yl("div").setClasses(Ac(this,Cc)).build()),Ac(this,mc).style.width=Ac(this,vc).offsetWidth+"px",Ac(this,mc).style.height=Ac(this,vc).offsetHeight+"px",document.body.appendChild(Ac(this,mc))):this.logError("Cannot create preview - current target does not exist","createPreview")}removePreview(){at(Ac(this,mc))&&(Ac(this,mc).remove(),Mc(this,mc,null))}setPreviewPosition(t){at(Ac(this,mc))&&(Ac(this,mc).style.top=t.y+"px",Ac(this,mc).style.left=t.x+"px")}setCurrentPosition(t){if(!Ac(this,vc))return;let[e,i]=Ac(this,kc).detect(t.x,t.y);if(e!==Ac(this,fc)&&i&&Ac(this,yc)!==i){let t=i;this.insertElement(Ac(this,vc),t),Mc(this,yc,t),this.getTargetsAndTrggers(),Mc(this,fc,e)}}insertElement(t,e){at(e)?this.element.insertBefore(t,e):this.element.appendChild(t)}getFinishAnimation(){if(!gt(Ac(this,vc),Ac(this,mc)))return{opacity:{from:1,to:0}};const t=Ac(this,vc).getBoundingClientRect();return{opacity:{from:1,to:0},top:{from:Ac(this,mc).offsetTop,to:t.top>0?t.top:Ac(this,mc).offsetTop,unit:"px"},left:{from:Ac(this,mc).offsetLeft,to:t.left>0?t.left:Ac(this,mc).offsetLeft,unit:"px"}}}}dc=new WeakMap,pc=new WeakMap,gc=new WeakMap,vc=new WeakMap,fc=new WeakMap,mc=new WeakMap,wc=new WeakMap,kc=new WeakMap,yc=new WeakMap,bc=new WeakMap,Cc=new WeakMap;var xc,Sc,Lc,Ic=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Dc{constructor(){this.spinner="circle",this.scale=1}parse(t){At(t)?this.spinner=Mt(t,"circle"):(this.spinner=Mt(t.spinner,"circle"),this.scale=mt(t.scale,1))}}class Oc{constructor(t){xc.set(this,void 0),Ic(this,xc,null!=t?t:"cui"),this.attribute=Pc(this,xc)+"-spinner",f.spinner_circle='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z"></path></svg>',f.spinner_circle_double='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z"></path><path d="M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z"></path></svg>'}getStyle(){return null}get(t,e){return new Nc(t,e,this.attribute,Pc(this,xc))}}xc=new WeakMap;class Nc extends Ns{constructor(t,e,i,s){super("CuiSpinnerHandler",t,i,new Dc,e),Sc.set(this,void 0),Lc.set(this,void 0),Ic(this,Sc,null),Ic(this,Lc,Et("{prefix}-animation-pause",s))}onInit(){Ic(this,Sc,this.onEvent(Y,this.onPause.bind(this))),this.add()}onUpdate(){this.prevArgs&&this.args.spinner!==this.prevArgs.spinner&&this.add()}onDestroy(){this.removeIfAnyExisists(),this.detachEvent(Y,Pc(this,Sc))}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}add(){const t=at(this.args.spinner)?f["spinner_"+this.args.spinner]:null;if(!at(t))return void this._log.warning("Incorrect spinner name: "+this.args.spinner);this.removeIfAnyExisists();const e=new qn(t).setScale(this.args.scale).build();this.mutate(this.addSpinner,e,this.args.spinner)}removeIfAnyExisists(){let t=this.element.querySelector("svg");t&&t.remove()}onPause(t){this.fetch(()=>{t&&!this.helper.hasClass(Pc(this,Lc),this.element)?this.helper.setClassesAs(this.element,Pc(this,Lc)):this.helper.removeClassesAs(this.element,Pc(this,Lc))}),this.emitEvent(X,t)}}Sc=new WeakMap,Lc=new WeakMap;var Bc,_c,Hc,$c,Rc,Fc,qc,Uc,zc,Vc,jc,Yc,Xc,Kc,Gc,Zc,Jc,Qc,tu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},eu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},iu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class su{constructor(t,e){Bc.set(this,void 0),_c.set(this,void 0),eu(this,Bc,t),eu(this,_c,null!=e?e:300),this.targets="> li",this.timeout=iu(this,_c),this.links="",this.autoTimeout=-1,this.height="",this.animation="",this.loop=!1}parse(t){this.targets=":scope "+Mt(t.targets,"> li"),this.timeout=mt(t.timeout,iu(this,_c)),this.links=t.links,this.autoTimeout=mt(t.autoTimeout,-1),this.height=Mt(t.height,"auto"),this.animation=Mt(t.animation,"slide"),this.loop=Ct(t.loop,!1)}}Bc=new WeakMap,_c=new WeakMap;class nu{constructor(t){this.attribute=(null!=t?t:"cui")+"-slider"}getStyle(){return null}get(t,e){return new ru(t,e,this.attribute)}}class ru extends _s{constructor(t,e,i){super("CuiSliderHandler",t,i,new su(e.setup.prefix,e.setup.animationTime),e),Hc.set(this,void 0),$c.set(this,void 0),Rc.set(this,void 0),Fc.set(this,void 0),qc.set(this,void 0),Uc.set(this,void 0),zc.set(this,void 0),Vc.set(this,void 0),jc.set(this,void 0),Yc.set(this,void 0),Xc.set(this,void 0),Kc.set(this,void 0),Gc.set(this,void 0),Zc.set(this,void 0),Jc.set(this,void 0),Qc.set(this,void 0),eu(this,Hc,[]),eu(this,$c,-1),eu(this,jc,-1),eu(this,Rc,[]),eu(this,qc,null),eu(this,Qc,null),eu(this,Uc,!1),eu(this,zc,-1),eu(this,Vc,0),eu(this,Yc,null),eu(this,Xc,.4),eu(this,Kc,new Cn),eu(this,Gc,new Cn),iu(this,Kc).setOnFinish(this.onAnimationFinish.bind(this)),eu(this,Jc,0),eu(this,Fc,new ao(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),eu(this,Zc,gs[this.args.animation])}onInit(){eu(this,qc,this.onEvent(N,this.onPushSwitch.bind(this))),eu(this,Qc,this.onEvent(V,this.onMove.bind(this))),this.getTargets(),this.getLinks(),this.getActiveIndex(),this.setLinkActive(-1,iu(this,$c)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(iu(this,Hc)[iu(this,$c)]))}),eu(this,Fc,new ao(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),eu(this,Zc,gs[this.args.animation]),this.startTask()}onUpdate(){this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(iu(this,Hc)[iu(this,$c)]))}),eu(this,Zc,gs[this.args.animation]),this.startTask()}onDestroy(){iu(this,Fc).stop(),this.detachEvent(N,iu(this,qc)),this.detachEvent(V,iu(this,Qc))}onMutation(t){}onMove(t){if(this.isLocked||!iu(this,Zc))return;let e=iu(this,Hc)[iu(this,$c)];switch(t.type){case"down":if(iu(this,Uc)||!e.contains(t.target))return;eu(this,Uc,!0),eu(this,zc,t.x),iu(this,Kc).setElement(e),this.helper.setClassesAs(document.body,v),t.event.cancelable&&t.event.preventDefault();break;case"up":if(!iu(this,Uc))break;this.isLocked=!0;let i=Math.abs(iu(this,Vc)),s=i*this.args.timeout,n=i<=iu(this,Xc);iu(this,Kc).finish(i,s,n),iu(this,Gc).finish(i,s,n),this.helper.removeClassesAs(document.body,v),eu(this,Uc,!1);break;case"move":if(!iu(this,Uc))break;let r=(t.x-iu(this,zc))/e.offsetWidth;if(Math.abs(r-iu(this,Vc))<.02)break;let o=It(iu(this,Vc)>0?"next":"prev",iu(this,$c),iu(this,Jc));eu(this,Vc,this.adjustMoveRatio(r)),o!==iu(this,jc)&&(iu(this,Yc)&&this.helper.removeClass(p,iu(this,Yc)),eu(this,Yc,iu(this,Hc)[o]),eu(this,jc,o),iu(this,Gc).setElement(iu(this,Yc)),iu(this,Gc).setProps(iu(this,Vc)>0?iu(this,Zc).previous.right:iu(this,Zc).previous.left),iu(this,Kc).setProps(iu(this,Vc)>0?iu(this,Zc).current.right:iu(this,Zc).current.left),this.mutate(()=>{iu(this,Yc)&&this.helper.setClass(p,iu(this,Yc))})),this.mutate(()=>{iu(this,Kc).update(Math.abs(iu(this,Vc))),iu(this,Gc).update(Math.abs(iu(this,Vc)))}),t.event.cancelable&&t.event.preventDefault()}}adjustMoveRatio(t){return this.args.loop?t:iu(this,$c)===iu(this,Jc)-1&&t>0||0===iu(this,$c)&&t<0?0:t}switch(t){return tu(this,void 0,void 0,(function*(){return!this.isLocked&&(this.onPushSwitch(t),!0)}))}onAnimationFinish(t,e,i){this.isLocked=!1;let s=iu(this,Hc)[iu(this,jc)],n=iu(this,Hc)[iu(this,$c)];e?(at(iu(this,Yc))&&(this.helper.removeClass(p,iu(this,Yc)),this.helper.removeAttribute("style",iu(this,Yc))),this.helper.removeAttribute("style",n),eu(this,jc,-1),eu(this,Yc,null),eu(this,zc,-1),eu(this,Vc,0)):iu(this,jc)>-1&&this.mutate(()=>{this.helper.removeClass(p,s),this.helper.setClass(this.activeClassName,s),this.helper.removeClass(this.activeClassName,n),this.helper.removeAttribute("style",n),this.helper.removeAttribute("style",s),this.setLinkActive(iu(this,$c),iu(this,jc)),this.emitEvent(B,{timestamp:Date.now(),index:iu(this,jc)}),eu(this,$c,iu(this,jc)),eu(this,jc,-1),eu(this,Yc,null),eu(this,zc,-1),eu(this,Vc,0)}),this.startTask()}onPushSwitch(t){if(!at(t)||this.isLocked||!iu(this,Zc)||!this.args.loop&&0===iu(this,$c)&&"prev"===t||!this.args.loop&&iu(this,$c)===iu(this,Jc)-1&&"next"===t)return;this.isLocked=!0;let e=It(t,iu(this,$c),iu(this,Jc));if(e==iu(this,$c)||e<0||e>=iu(this,Hc).length)return this._log.warning(`Index ${t} is not within the suitable range`),!1;eu(this,jc,e);let i=iu(this,Hc)[iu(this,$c)],s=iu(this,Hc)[iu(this,jc)];iu(this,Kc).setElement(i),iu(this,Gc).setElement(s),iu(this,Kc).setProps("prev"===t?iu(this,Zc).current.left:iu(this,Zc).current.right),iu(this,Gc).setProps("prev"===t?iu(this,Zc).previous.left:iu(this,Zc).previous.right),this.mutate(()=>{iu(this,Kc).finish(0,this.args.timeout,!1),iu(this,Gc).finish(0,this.args.timeout,!1),this.helper.setClass(p,s)})}getActiveIndex(){eu(this,$c,at(iu(this,Hc))?iu(this,Hc).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return at(this.args.height)&&"auto"!==this.args.height?this.args.height:St(t)+"px"}getTargets(){let t=this.element.querySelectorAll(this.args.targets);eu(this,Hc,t.length>0?[...t]:[]),eu(this,Jc,iu(this,Hc).length)}getLinks(){eu(this,Rc,at(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}setLinkActive(t,e){at(iu(this,Rc))&&this.mutate(()=>{kt(t,0,iu(this,Rc).length-1)&&this.helper.removeClass(this.activeClassName,iu(this,Rc)[t]),kt(e,0,iu(this,Rc).length-1)&&this.helper.setClass(this.activeClassName,iu(this,Rc)[e])})}startTask(){iu(this,Fc).stop(),this.args.autoTimeout&&iu(this,Fc).start()}}Hc=new WeakMap,$c=new WeakMap,Rc=new WeakMap,Fc=new WeakMap,qc=new WeakMap,Uc=new WeakMap,zc=new WeakMap,Vc=new WeakMap,jc=new WeakMap,Yc=new WeakMap,Xc=new WeakMap,Kc=new WeakMap,Gc=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,Qc=new WeakMap;var ou,hu,au,lu,cu,uu,du,pu,gu,vu,fu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},mu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ku{constructor(t,e){ou.set(this,void 0),hu.set(this,void 0),mu(this,ou,t),mu(this,hu,null!=e?e:300),this.targets="",this.in="",this.out="",this.timeout=wu(this,hu),this.links="",this.switch="",this.autoTimeout=-1,this.height="",this.loop=!1}parse(t){this.targets=at(t.targets)?":scope "+t.targets:":scope  > *",this.in=Mt(t.in,Et(".{prefix}-switch-animation-default-in",wu(this,ou))),this.out=Mt(t.out,Et(".{prefix}-switch-animation-default-out",wu(this,ou))),this.timeout=mt(t.timeout,wu(this,hu)),this.links=Mt(t.links,""),this.switch=Mt(t.switch,""),this.autoTimeout=mt(t.autoTimeout,-1),this.height=Mt(t.height,"auto"),this.loop=bt(t.loop)}}ou=new WeakMap,hu=new WeakMap;class yu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switch"}getStyle(){return null}get(t,e){return new bu(t,e,this.attribute)}}class bu extends _s{constructor(t,e,i){super("CuiSwitchHandler",t,i,new ku(e.setup.prefix,e.setup.animationTime),e),au.set(this,void 0),lu.set(this,void 0),cu.set(this,void 0),uu.set(this,void 0),du.set(this,void 0),pu.set(this,void 0),gu.set(this,void 0),vu.set(this,void 0),mu(this,au,[]),mu(this,lu,-1),mu(this,cu,[]),mu(this,uu,[]),mu(this,pu,null),mu(this,gu,mu(this,vu,[])),mu(this,du,new ao(this.args.autoTimeout,!0,this.switch.bind(this,"next")))}onInit(){mu(this,pu,this.onEvent(N,this.onPushSwitch.bind(this))),this.parseArguments(),this.getTargets(),this.getActiveIndex(),this.getSwitches(),this.setSwitchesActive(wu(this,lu)),this.setLinkActive(-1,wu(this,lu)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(wu(this,au)[wu(this,lu)]))}),mu(this,du,new ao(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),this.startTask()}onUpdate(){this.parseArguments(),this.getTargets(),this.getSwitches(),this.setSwitchesActive(wu(this,lu)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(wu(this,au)[wu(this,lu)]))}),this.startTask()}onDestroy(){wu(this,du).stop(),this.detachEvent(N,wu(this,pu))}onMutation(t){this.getTargets(),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(wu(this,au)[wu(this,lu)]))})}switch(t){return fu(this,void 0,void 0,(function*(){if(this.isLocked)return!1;this.getSwitches(),this.getActiveIndex();let e=It(t,wu(this,lu),wu(this,au).length);if(!this.args.loop&&("next"===t&&0===e||"prev"===t&&0===wu(this,lu)))return this.logInfo("Switch blocked by loop settings","switch"),!1;if(e==wu(this,lu)||e<0||e>=wu(this,au).length)return this.logWarning(`Index ${t} is not within the suitable range`,"switch"),!1;this.isLocked=!0,this.setSwitchesActive(e);let i=wu(this,au)[e];return yield this.actionsHelper.performSwitchAction(i,wu(this,lu)>-1?wu(this,au)[wu(this,lu)]:null,wu(this,gu),wu(this,vu),()=>{i.classList.add(this.activeClassName),wu(this,lu)>-1&&wu(this,au)[wu(this,lu)].classList.remove(this.activeClassName),this.setLinkActive(wu(this,lu),e),this.helper.setStyle(this.element,"height",this.getElementHeight(i)),this.startTask(),this.isLocked=!1},this.args.timeout),this.emitEvent(B,{timestamp:Date.now(),index:e}),!0}))}onPushSwitch(t){this.switch(t)}getActiveIndex(){mu(this,lu,at(wu(this,au))?wu(this,au).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return at(this.args.height)&&"auto"!==this.args.height?this.args.height:St(t)+"px"}parseArguments(){mu(this,gu,Ai.get(this.args.in)),mu(this,vu,Ai.get(this.args.out)),mu(this,cu,at(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}getTargets(){let t=this.element.querySelectorAll(this.args.targets);mu(this,au,t.length>0?[...t]:[])}getSwitches(){let t=at(this.args.switch)?document.querySelectorAll(this.args.switch):null;mu(this,uu,[]),t&&t.forEach(t=>{wu(this,uu).push(t)})}setLinkActive(t,e){at(wu(this,cu))&&(kt(t,0,wu(this,cu).length-1)&&this.helper.removeClass(this.activeClassName,wu(this,cu)[t]),kt(e,0,wu(this,cu).length-1)&&this.helper.setClass(this.activeClassName,wu(this,cu)[e]))}setSwitchesActive(t){wu(this,uu).forEach(e=>{this.emitLinkSwitch(e.$cuid,t)})}emitLinkSwitch(t,e){at(t)&&this.utils.bus.emit(N,t,e)}startTask(){wu(this,du).stop(),this.args.autoTimeout&&wu(this,du).start()}}au=new WeakMap,lu=new WeakMap,cu=new WeakMap,uu=new WeakMap,du=new WeakMap,pu=new WeakMap,gu=new WeakMap,vu=new WeakMap;var Cu,Mu,Au,Eu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Tu{constructor(){this.index="",this.target=""}parse(t){at(t)&&(this.target=t.target,this.index=t.index)}}class xu{constructor(t){this.attribute=(null!=t?t:"cui")+"-switcher"}getStyle(){return null}get(t,e){return new Su(t,e,this.attribute)}}class Su extends Ns{constructor(t,e,i){super("CuiSwitcherHandler",t,i,new Tu,e),Cu.set(this,void 0),Mu.set(this,void 0),Au.set(this,void 0),Eu(this,Cu,null),Eu(this,Mu,"UL"===t.tagName),this.onClickEvent=this.onClickEvent.bind(this),Eu(this,Au,[])}onInit(){this.setEvents(),this.getTarget()}onUpdate(){this.getTarget()}onDestroy(){this.removeEvents()}getTarget(){at(this.args.target)||Eu(this,Cu,null);let t=document.querySelector(this.args.target);at(t)&&Eu(this,Cu,t.$cuid)}setEvents(){if(Wu(this,Mu)){this.element.querySelectorAll("li > a").forEach((t,e)=>{let i=this.onListItemClick.bind(this,e);Wu(this,Au).push(i),t.addEventListener("click",i)})}else this.element.addEventListener("click",this.onClickEvent)}removeEvents(){if(Wu(this,Mu)){this.element.querySelectorAll("li > a").forEach((t,e)=>{Wu(this,Au).length>e&&t.removeEventListener("click",Wu(this,Au)[e])}),Eu(this,Au,[])}else this.element.removeEventListener("click",this.onClickEvent)}onClickEvent(t){this.getTarget(),at(this.args.index)&&this.onClick(this.args.index.trim())}onListItemClick(t,e){this.getTarget(),this.onClick(t)}onClick(t){at(Wu(this,Cu))&&this.utils.bus.emit(N,Wu(this,Cu),t)}}Cu=new WeakMap,Mu=new WeakMap,Au=new WeakMap;var Lu,Iu,Pu,Du,Ou=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Nu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Bu{constructor(){this.action="",this.target=""}parse(t){at(t)&&At(t)?this.action=t:(this.target=Mt(t.target,""),this.action=t.action)}}class _u{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new Hu(t,e,this.attribute)}}class Hu extends Ns{constructor(t,e,i){super("CuiToggleHandler",t,i,new Bu,e),Lu.set(this,void 0),Iu.set(this,void 0),Pu.set(this,void 0),Du.set(this,void 0),Ou(this,Lu,this.element),Ou(this,Iu,e),Ou(this,Pu,null),Ou(this,Du,[]),this.onClick=this.onClick.bind(this)}onInit(){Ou(this,Lu,this.getTarget()),Ou(this,Du,Ai.get(this.args.action)),this.element.addEventListener("click",this.onClick),Ou(this,Pu,this.onEvent(D,this.toggle.bind(this)))}onUpdate(){Ou(this,Lu,this.getTarget()),Ou(this,Du,Ai.get(this.args.action))}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(D,Nu(this,Pu))}toggle(){Nu(this,Lu)?(Nu(this,Du).forEach(t=>t.toggle(Nu(this,Lu),Nu(this,Iu))),this.emitEvent(O,{action:this.args.action,target:Nu(this,Lu),timestamp:Date.now()})):this.logError("Target in not provided","toggle")}onClick(t){this.toggle(),t.preventDefault()}getTarget(){var t;return this.args.target&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:this.element}}Lu=new WeakMap,Iu=new WeakMap,Pu=new WeakMap,Du=new WeakMap;var $u,Ru,Fu,qu,Uu,zu,Vu,ju,Yu,Xu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ku=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gu{constructor(t){$u.set(this,void 0),Xu(this,$u,Et(".{prefix}-animation-tooltip-in",t)),this.content="",this.width=150,this.margin=8,this.timeout=2e3,this.pos="",this.action=Ku(this,$u)}parse(t){At(t)?this.content=Mt(t,""):(this.content=Mt(t.content,""),this.width=mt(t.width,150),this.margin=mt(t.margin,8),this.pos=Mt(t.pos,""),this.action=Mt(t.action,Ku(this,$u)),this.timeout=mt(t.timeout,2e3))}}$u=new WeakMap;class Zu{constructor(t){Ru.set(this,void 0),Xu(this,Ru,null!=t?t:"cui"),this.attribute=Ku(this,Ru)+"-tooltip"}getStyle(){return null}get(t,e){return new Ju(t,this.attribute,e,Ku(this,Ru))}}Ru=new WeakMap;class Ju extends Ns{constructor(t,e,i,s){super("CuiTooltipHandler",t,e,new Gu(s),i),Fu.set(this,void 0),qu.set(this,void 0),Uu.set(this,void 0),zu.set(this,void 0),Vu.set(this,void 0),ju.set(this,void 0),Yu.set(this,void 0),Xu(this,qu,void 0),Xu(this,ju,[]),Xu(this,Yu,void 0),Xu(this,Vu,Et("{prefix}-tooltip-data",s)),Xu(this,Fu,new Fr(t)),Ku(this,Fu).setCallback(this.onHover.bind(this)),Xu(this,Uu,8),Xu(this,zu,new eo),Ku(this,zu).setPreferred("top-center")}onInit(){Ku(this,Fu).attach(),this.getDataFromArgs(),Xu(this,Yu,new ao(this.args.timeout,!1,this.removeTooltip.bind(this)))}onUpdate(){this.getDataFromArgs(),Ku(this,Yu)&&Ku(this,Yu).setTimeout(this.args.timeout)}onDestroy(){this.removeTooltip(),Ku(this,Fu).detach()}onHover(t){t.isHovering?this.createTooltip():this.removeTooltip()}createTooltip(){if(at(Ku(this,qu))||!at(this.args.content))return;const t=this.element.getBoundingClientRect();Xu(this,qu,new Yl("div").setClasses(Ku(this,Vu)).build()),Ku(this,qu).textContent=this.args.content,Ku(this,qu).style.maxWidth=this.args.width+"px",document.body.appendChild(Ku(this,qu)),this.mutate(()=>{if(!Ku(this,qu))return;const e=Ku(this,qu).getBoundingClientRect();Ku(this,zu).setMargin(Ku(this,Uu));try{let[i,s]=Ku(this,zu).calculate(t,e);Ku(this,qu).style.top=s+"px",Ku(this,qu).style.left=i+"px",this.toggleActions(),Ku(this,Yu)&&Ku(this,Yu).start()}catch(t){this.logError(t.message,"createTooltip",t)}})}removeTooltip(){Ku(this,Yu)&&Ku(this,Yu).stop(),this.mutate(()=>{at(Ku(this,qu))&&(Ku(this,qu).remove(),Xu(this,qu,void 0))})}getDataFromArgs(){Ku(this,zu).setMargin(this.args.margin),Ku(this,zu).setStatic(this.args.pos),Xu(this,ju,Ai.get(this.args.action))}toggleActions(){Ku(this,qu)&&Ku(this,ju).forEach(t=>{t.toggle(Ku(this,qu))})}}Fu=new WeakMap,qu=new WeakMap,Uu=new WeakMap,zu=new WeakMap,Vu=new WeakMap,ju=new WeakMap,Yu=new WeakMap;var Qu,td,ed,id,sd,nd,rd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},od=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class hd{constructor(t,e,i){Qu.set(this,void 0),td.set(this,void 0),ed.set(this,void 0),id.set(this,void 0),sd.set(this,void 0),nd.set(this,void 0),rd(this,id,t),rd(this,Qu,rd(this,ed,rd(this,td,void 0))),rd(this,sd,null!=i?i:""),rd(this,nd,e)}createHeader(t,e,i){at(e)||(e=[]),at(i)||(i=[]);let s=new Yl("div");s.setClasses(od(this,id)+"-dialog-header",...e),rd(this,Qu,s.build());let n=new Yl("span").setClasses(this.getPrefixedString("-dialog-title")).build(t);od(this,Qu).appendChild(n),this.appendChildrens(od(this,Qu),...i)}createFooter(t,e){at(t)||(t=[]),at(e)||(e=[]),rd(this,ed,new Yl("div").setClasses(this.getPrefixedString("-dialog-footer"),...t).build()),this.appendChildrens(od(this,ed),...e)}createBody(t,e){at(t)||(t=[]),at(e)||(e=[]),rd(this,td,new Yl("div").setClasses(this.getPrefixedString("-dialog-body"),...t).build()),this.appendChildrens(od(this,td),...e)}build(t){let e=[this.getPrefixedString("-dialog")];od(this,nd)&&e.push(this.getPrefixedString("-reverse-auto"));let i=new Yl("div").setId(t).setClasses(...e).setAttributes({[this.getPrefixedString("-dialog")]:od(this,sd)}).build(),s=new Yl("div").setClasses(this.getPrefixedString("-dialog-container")).build();return od(this,Qu)&&s.appendChild(od(this,Qu)),od(this,td)&&s.appendChild(od(this,td)),od(this,ed)&&s.appendChild(od(this,ed)),i.appendChild(s),i}appendChildrens(t,...e){at(e)&&e.forEach(e=>t.appendChild(e))}getPrefixedString(t){return od(this,id)+t}}Qu=new WeakMap,td=new WeakMap,ed=new WeakMap,id=new WeakMap,sd=new WeakMap,nd=new WeakMap;var ad,ld,cd,ud,dd,pd,gd,vd,fd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},md=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wd{constructor(t,e,i){ad.set(this,void 0),ld.set(this,void 0),cd.set(this,void 0),ud.set(this,void 0),dd.set(this,void 0),fd(this,ad,{yes:i.onYes,no:i.onNo,cancel:i.onCancel,ok:i.onOk}),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,fd(this,ld,t),fd(this,cd,e),this.reverse=!1,fd(this,dd,null),this.closeStr=md(this,ld).setup.prefix+"-close",this.iconStr=md(this,ld).setup.prefix+"-icon",fd(this,ud,void 0)}getId(){return md(this,cd)}show(t){let e=document.getElementById(md(this,cd));at(e)?this.updateElement(e):(e=this.createElement(),t.appendChild(e)),setTimeout(()=>{fd(this,ud,new Oi([e],md(this,ld)));let t=md(this,ud).on("closed",this.onClose.bind(this));fd(this,dd,t.length>0?t[0]:null),md(this,ud).emit("open")},100)}updateElement(t){let e=t.querySelector(`.${this.prefix}-dialog-title`),i=t.querySelector(`.${this.prefix}-dialog-body>p`);md(this,ld).interactions.mutate(()=>{e&&(e.innerHTML=this.title),i&&(i.innerHTML=this.content)},null)}onClose(t){try{if(at(t)&&t.state&&md(this,ad)&&at(md(this,ad)[t.state])){let e=md(this,ad)[t.state];e&&e()}}finally{null!=md(this,dd)&&(md(this,ud)&&md(this,ud).detach("closed",md(this,dd)),fd(this,dd,null)),fd(this,ud,void 0)}}}ad=new WeakMap,ld=new WeakMap,cd=new WeakMap,ud=new WeakMap,dd=new WeakMap;class kd extends wd{constructor(t,e,i){var s;super(t,e,i),pd.set(this,void 0),fd(this,pd,e),this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new hd(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Yl("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Yl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Yl("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new Yl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(md(this,pd))}}pd=new WeakMap;class yd extends wd{constructor(t,e,i){var s;super(t,e,i),gd.set(this,void 0),fd(this,gd,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new hd(this.prefix,this.reverse);return t.createHeader(this.title,[]),t.createBody([],[new Yl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Yl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(md(this,gd))}}gd=new WeakMap;class bd extends wd{constructor(t,e,i){var s;super(t,e,i),vd.set(this,void 0),fd(this,vd,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new hd(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Yl("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Yl("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Yl("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new Yl("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),t.build(md(this,vd))}}vd=new WeakMap;var Cd,Md,Ad,Ed=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Td{constructor(){Cd.set(this,void 0),Md.set(this,void 0),Ad.set(this,void 0),this.name="alert-plugin",this.description="CuiAlertsPlugin",Ed(this,Cd,null),Ed(this,Md,void 0),Ed(this,Ad,Bt.get("CuiAlertsPlugin"))}init(t){Ed(this,Md,t),this.detach(),Ed(this,Cd,Wd(this,Md).bus.on(tt,this.onAlert.bind(this),{$cuid:this.name}))}destroy(){this.detach()}detach(){Wd(this,Cd)&&Wd(this,Md)&&(Wd(this,Md).bus.detach(tt,Wd(this,Cd)),Ed(this,Cd,null))}onAlert(t){if(!Wd(this,Md))return void Wd(this,Ad).error("Utils are not set");if(!this.validateEvent(t))return void Wd(this,Ad).error("Event validation failed");let e=class{static get(t,e,i,s){return"Info"===e?new yd(s,t,i):"YesNoCancel"===e?new bd(s,t,i):"OkCancel"===e?new kd(s,t,i):void 0}}.get(t.id,t.type,t.options,Wd(this,Md));e?e.show(Wd(this,Md).setup.root):Wd(this,Ad).error("Possibly incorrect alert type")}validateEvent(t){return!!(t&&t.id&&t.type&&t.options)}}Cd=new WeakMap,Md=new WeakMap,Ad=new WeakMap;var xd,Sd,Ld=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Id=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pd{constructor(){this.name="click-plugin",xd.set(this,void 0),Sd.set(this,void 0),this.description="CuiWindowClickPlugin",Ld(this,xd,void 0),Ld(this,Sd,this.onWindowClick.bind(this))}init(t){Ld(this,xd,t.bus),window.addEventListener("click",Id(this,Sd))}destroy(){window.removeEventListener("click",Id(this,Sd))}onWindowClick(t){Id(this,xd)&&Id(this,xd).emit(F,null,t)}}xd=new WeakMap,Sd=new WeakMap;var Dd,Od,Nd,Bd,_d,Hd,$d,Rd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qd{constructor(t,e){Dd.set(this,void 0),Od.set(this,void 0),Nd.set(this,void 0),Bd.set(this,void 0),_d.set(this,void 0),Hd.set(this,void 0),$d.set(this,void 0),Rd(this,Nd,!1),Rd(this,Bd,!0),Rd(this,_d,!1),Rd(this,Dd,void 0),Rd(this,Od,null!=e?e:[]),Rd(this,Hd,this.onKeyDown.bind(this)),Rd(this,$d,this.onKeyUp.bind(this))}setCallback(t){Rd(this,Dd,t)}isInProgress(){return Fd(this,Nd)}attach(){document.addEventListener("keydown",Fd(this,Hd)),Fd(this,Bd)&&document.addEventListener("keyup",Fd(this,$d)),Rd(this,_d,!0)}detach(){document.removeEventListener("keydown",Fd(this,Hd)),Fd(this,Bd)&&document.addEventListener("keyup",Fd(this,$d)),Rd(this,_d,!1)}isAttached(){return Fd(this,_d)}onKeyDown(t){if(!Fd(this,Nd)){Rd(this,Nd,!0);try{at(Fd(this,Od))&&!Fd(this,Od).includes(t.code)||!Fd(this,Dd)||Fd(this,Dd).call(this,t)}catch(t){console.error(t)}finally{Fd(this,Bd)||Rd(this,Nd,!1)}}}onKeyUp(t){Rd(this,Nd,!1)}}Dd=new WeakMap,Od=new WeakMap,Nd=new WeakMap,Bd=new WeakMap,_d=new WeakMap,Hd=new WeakMap,$d=new WeakMap;var Ud,zd,Vd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Yd{constructor(t){Ud.set(this,void 0),zd.set(this,void 0),Vd(this,zd,t),Vd(this,Ud,new qd(!0)),jd(this,Ud).setCallback(this.onKeyDown.bind(this))}connect(){jd(this,Ud).attach()}disconnect(){jd(this,Ud).detach()}onKeyDown(t){jd(this,zd).emit(R,null,{timestamp:Date.now(),event:t})}}Ud=new WeakMap,zd=new WeakMap;var Xd,Kd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Gd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Zd{constructor(t){this.name="keys-plugin",Xd.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t,Kd(this,Xd,void 0)}init(t){Kd(this,Xd,new Yd(t.bus)),Gd(this,Xd).connect()}destroy(){Gd(this,Xd)&&Gd(this,Xd).disconnect()}}Xd=new WeakMap;var Jd,Qd,tp,ep,ip,sp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},np=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rp{constructor(t){Jd.set(this,void 0),Qd.set(this,void 0),tp.set(this,void 0),ep.set(this,void 0),ip.set(this,void 0),sp(this,Jd,t),sp(this,tp,!1),sp(this,Qd,void 0),sp(this,ep,!1),sp(this,ip,this.event.bind(this))}setCallback(t){sp(this,Qd,t)}isInProgress(){return np(this,ep)}attach(){window.matchMedia&&!np(this,tp)&&np(this,Jd)&&(window.matchMedia(np(this,Jd)).addEventListener("change",np(this,ip)),sp(this,tp,!0))}detach(){np(this,tp)&&(window.matchMedia(np(this,Jd)).removeEventListener("change",np(this,ip)),sp(this,tp,!1))}isAttached(){return np(this,tp)}event(t){if(!np(this,ep)&&np(this,Qd)){sp(this,ep,!0);try{np(this,Qd).call(this,t)}catch(t){console.error(t)}finally{sp(this,ep,!1)}}}}Jd=new WeakMap,Qd=new WeakMap,tp=new WeakMap,ep=new WeakMap,ip=new WeakMap;var op,hp,ap=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},lp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class cp{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",op.set(this,void 0),hp.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t,ap(this,hp,void 0),ap(this,op,void 0)}init(t){ap(this,hp,t),this.setup.autoLight&&"dark"==(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")&&lp(this,hp).setLightMode("dark"),ap(this,op,new rp("(prefers-color-scheme: dark)")),lp(this,op).setCallback(this.onChange.bind(this)),lp(this,op).attach()}destroy(){lp(this,op)&&lp(this,op).detach()}onChange(t){var e;if(!lp(this,hp))return;let i=lp(this,hp).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?lp(this,hp).setLightMode("dark"):lp(this,hp).setLightMode("light"))}}op=new WeakMap,hp=new WeakMap;var up,dp,pp,gp,vp,fp,mp,wp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},kp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class yp{constructor(t,e){up.set(this,void 0),dp.set(this,void 0),pp.set(this,void 0),gp.set(this,void 0),vp.set(this,void 0),fp.set(this,void 0),mp.set(this,void 0),wp(this,up,t),wp(this,dp,new $o),kp(this,dp).setCallback(this.onMove.bind(this)),wp(this,vp,void 0),wp(this,pp,!1),wp(this,gp,null),wp(this,fp,!1),wp(this,mp,e)}attach(){kp(this,dp).isAttached()||(kp(this,dp).attach(),wp(this,gp,kp(this,up).on(j,this.onMoveLock.bind(this))))}detach(){kp(this,dp).isAttached()&&(kp(this,dp).detach(),null!=kp(this,gp)&&kp(this,up).detach(j,kp(this,gp)))}isAttached(){return kp(this,dp).isAttached()}onMove(t){if(!kp(this,pp))switch(t.type){case"down":wp(this,vp,t),wp(this,fp,!1);break;case"move":kp(this,vp)&&!kp(this,fp)&&(kp(this,up).emit(V,null,kp(this,vp)),wp(this,fp,!0)),kp(this,up).emit(V,null,t);break;case"up":if(kp(this,up).emit(V,null,t),kp(this,vp)){if(kp(this,mp)){const{diffX:e,diffY:i}=this.getGestureDiff(kp(this,vp),t),s=this.calculateGesture(e,i);this.pushGestureEvent(s,e,i)}wp(this,vp,void 0)}}}onMoveLock(t){wp(this,pp,t)}getGestureDiff(t,e){return{diffX:e.x-t.x,diffY:e.y-t.y}}calculateGesture(t,e){const i=.3*window.innerWidth,s=Math.abs(t),n=Math.abs(e);if(s>n&&s>i)return t>0?"right":"left";return n>.3*window.innerHeight?e>0?"down":"up":"none"}pushGestureEvent(t,e,i){const s=this.getGestureEventName(t);s&&kp(this,up).emit(s,null,{timespstamp:Date.now(),changeX:e,changeY:i})}getGestureEventName(t){switch(t){case"up":return it;case"down":return et;case"left":return st;case"right":return nt;default:return null}}}up=new WeakMap,dp=new WeakMap,pp=new WeakMap,gp=new WeakMap,vp=new WeakMap,fp=new WeakMap,mp=new WeakMap;var bp,Cp,Mp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ap=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ep{constructor(t){this.name="move-observer-plugin",bp.set(this,void 0),Cp.set(this,void 0),this.description="CuiMoveObserverPlugin",Mp(this,bp,void 0),Mp(this,Cp,!1!==t)}init(t){Mp(this,bp,new yp(t.bus,Ap(this,Cp))),Ap(this,bp).attach()}destroy(){Ap(this,bp)&&Ap(this,bp).isAttached()&&Ap(this,bp).detach()}}bp=new WeakMap,Cp=new WeakMap;function Wp(t,e,i,s){let n=e.setup.prefix;if(!gt(t.title,t.id))return;const r=[Tp(t.title,i,s)];return at(t.message)&&r.push(function(t,e){return new Yl("div").setClasses(e.NOTIFICATION_BODY_CLS).setTextContent(t)}(t.message,i)),at(t.actions)&&r.push(function(t,e){return new Yl("div").setClasses(e.NOTIFICATION_FOOTER_CLS).setRawChildren(function(t){return new Yl("ul").setRawChildren(...t.map(t=>new Yl("li").setRawChildren(new Yl("a").onEvent("click",t.callback).setTextContent(t.name))))}(t))}(t.actions,i)),new Yl("div").setClasses(i.NOTIFICATION_CLS,i.MARGIN_SMALL_VERTICAL,function(t,e){return`${t}-${null!=e?e:"default"}`}(n,t.type)).setId(t.id).setRawChildren(...r).build()}function Tp(t,e,i){const s=new Yl("span").setClasses(e.NOTIFICATION_TITLE_CLS).setTextContent(t),n=new qn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 3,3 17,17"></path><path d="M 17,3 3,17"></path></svg>').build(),r=new Yl("a").setClasses(e.ICON_CLS,e.NOTIFICATION_CLOSE_CLS).onEvent("click",i);n&&r.setChildren(n);return new Yl("div").setClasses(e.NOTIFICATION_HEADER_CLS).setRawChildren(s,r)}var xp,Sp,Lp,Ip,Pp,Dp,Op,Np=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Bp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},_p=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Hp{constructor(t){var e;this.name="notification-plugin",xp.set(this,void 0),Sp.set(this,void 0),Lp.set(this,void 0),Ip.set(this,void 0),Pp.set(this,void 0),Dp.set(this,void 0),Op.set(this,void 0),this.description="CuiNotificationPlugin",Bp(this,Sp,null),Bp(this,xp,void 0),Bp(this,Lp,null),Bp(this,Ip,{}),Bp(this,Pp,{}),Bp(this,Dp,void 0),Bp(this,Op,null!==(e=t.timeout)&&void 0!==e?e:5e3)}init(t){this.createCache(t.setup.prefix),this.getOrCreateContainer(t,document.body),Bp(this,Dp,new li(t.interactions)),Bp(this,xp,t),Bp(this,Lp,_p(this,xp).bus.on(rt,this.onEvent.bind(this),{$cuid:this.name}))}destroy(){_p(this,Sp)&&_p(this,Sp).remove(),_p(this,Lp)&&_p(this,xp)&&_p(this,xp).bus.detach(rt,_p(this,Lp))}onEvent(t){if(!(function(t){return at(t)&&gt(t.id,t.title)}(t)&&_p(this,xp)&&_p(this,Dp)&&_p(this,Sp)))return;if(_p(this,Pp)[t.id])return;const e=Wp(t,_p(this,xp),_p(this,Ip),()=>{this.onNotificationClose(t,!1,!0)});e&&_p(this,xp).interactions.mutate(()=>{0===_p(this,Sp).children.length?_p(this,Sp).appendChild(e):_p(this,Sp).insertBefore(e,_p(this,Sp).firstChild);let i=null;!1!==t.auto&&(i=setTimeout(()=>{this.onNotificationClose(t,!0,!1)},_p(this,Op))),_p(this,Pp)[t.id]={element:e,timeoutId:i},this.act(e,_p(this,Ip).NOTIFICATION_ANIMATION_IN).then(()=>{e.classList.add(_p(this,Ip).NOTIFICATION_ACTIVE_CLS)})},null)}onNotificationClose(t,e,i){if(!t||!_p(this,Dp)||!_p(this,xp))return;const s=_p(this,Pp)[t.id];s&&(e||clearTimeout(s.timeoutId),this.act(s.element,_p(this,Ip).NOTIFICATION_ANIMATION_OUT).then(()=>{_p(this,xp).bus.emit(ot,null,Object.assign(Object.assign({},t),{dissmissed:i})),s.element.remove(),delete _p(this,Pp)[t.id]}))}getOrCreateContainer(t,e){Bp(this,Sp,document.getElementById("notifications-container")),_p(this,Sp)||(Bp(this,Sp,new Yl("div").setClasses(Et("{prefix}-notification-container",t.setup.prefix)).build()),e.appendChild(_p(this,Sp)))}createCache(t){Bp(this,Ip,{NOTIFICATION_CLS:Et("{prefix}-notification",t),NOTIFICATION_HEADER_CLS:Et("{prefix}-notification-header",t),NOTIFICATION_TITLE_CLS:Et("{prefix}-notification-title",t),NOTIFICATION_BODY_CLS:Et("{prefix}-notification-body",t),NOTIFICATION_FOOTER_CLS:Et("{prefix}-notification-footer",t),NOTIFICATION_ACTIVE_CLS:Et("{prefix}-active",t),NOTIFICATION_ANIMATION_IN:Et("{prefix}-notification-animation-in",t),NOTIFICATION_ANIMATION_OUT:Et("{prefix}-notification-animation-out",t),NOTIFICATION_ICON_CLS:Et("{prefix}-notification-icon",t),NOTIFICATION_CLOSE_CLS:Et("{prefix}-notification-close",t),ICON_CLS:Et("{prefix}-icon",t),MARGIN_SMALL_VERTICAL:Et("{prefix}-margin-small-vertical",t)})}act(t,e,i){return Np(this,void 0,void 0,(function*(){const s=null!=i?i:_p(this,xp).setup.animationTime,n=new wi(e);return _p(this,Dp).performAction(t,n,null!=s?s:0)}))}}xp=new WeakMap,Sp=new WeakMap,Lp=new WeakMap,Ip=new WeakMap,Pp=new WeakMap,Dp=new WeakMap,Op=new WeakMap;var $p,Rp,Fp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Up{constructor(t){this.description="Auto print mode",this.name="auto-print",$p.set(this,void 0),Rp.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t,Fp(this,$p,void 0),Fp(this,Rp,void 0)}init(t){Fp(this,Rp,t),this.setup.autoPrint&&window.matchMedia&&window.matchMedia("print").matches&&qp(this,Rp).setPrintMode(!0),Fp(this,$p,new rp("print")),qp(this,$p).setCallback(this.onChange.bind(this)),qp(this,$p).attach()}destroy(){qp(this,$p)&&qp(this,$p).detach()}onChange(t){var e,i;if(!qp(this,Rp))return;this.setup=qp(this,Rp).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(t.matches?qp(this,Rp).setPrintMode(!0):qp(this,Rp).setPrintMode(!1))}}$p=new WeakMap,Rp=new WeakMap;var zp,Vp,jp,Yp,Xp,Kp,Gp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Jp{constructor(t,e,i,s){zp.set(this,void 0),Vp.set(this,void 0),jp.set(this,void 0),Yp.set(this,void 0),Gp(this,zp,0),Gp(this,jp,0),Gp(this,Vp,0),Gp(this,Yp,0),this.set(t,e,i,s)}static create(t){if(!at(t))throw new c("Given color value is not in a valid format");let e;if(t.startsWith("#"))e=new Qp(t);else{if(!t.startsWith("rgb"))throw new c("Unknown color string format");e=new tg(t)}let i=e.parse();if(!i)throw new c("Color was not parsed");return i}set(t,e,i,s){Gp(this,Yp,ut(null!=s?s:1,0,1)),Gp(this,jp,ut(i,0,255)),Gp(this,zp,ut(t,0,255)),Gp(this,Vp,ut(e,0,255))}setRed(t){Gp(this,zp,ut(t,0,255))}setGreen(t){Gp(this,Vp,ut(t,0,255))}setBlue(t){Gp(this,jp,ut(t,0,255))}opacity(t){return Gp(this,Yp,ut(t,0,1)),this}lighten(t){return this.shade(t),this}darken(t){return this.shade(-t),this}invert(){return Gp(this,jp,255-Zp(this,jp)),Gp(this,zp,255-Zp(this,zp)),Gp(this,Vp,255-Zp(this,Vp)),this}getColorValue(t){t&&t.toLowerCase();switch(t){case"red":return Zp(this,zp);case"green":return Zp(this,Vp);case"blue":return Zp(this,jp);case"alpha":return Zp(this,Yp)}return-1}toCssString(){return`rgba(${Zp(this,zp)}, ${Zp(this,Vp)}, ${Zp(this,jp)}, ${Zp(this,Yp)})`}shade(t,e=!0){Gp(this,zp,this.shadeSingle(Zp(this,zp),t,e)),Gp(this,Vp,this.shadeSingle(Zp(this,Vp),t,e)),Gp(this,jp,this.shadeSingle(Zp(this,jp),t,e))}shadeSingle(t,e,i=!0){let s=(i?t:255)*e/100;return ut(t+Math.round(s),0,255)}clone(){return new Jp(Zp(this,zp),Zp(this,Vp),Zp(this,jp),Zp(this,Yp))}}zp=new WeakMap,Vp=new WeakMap,jp=new WeakMap,Yp=new WeakMap;class Qp{constructor(t){Xp.set(this,void 0),Gp(this,Xp,t)}trim(){Gp(this,Xp,Zp(this,Xp)?Zp(this,Xp).trim():"")}isValid(){return at(Zp(this,Xp))&&Zp(this,Xp).startsWith("#")}parse(){let t=0,e=0,i=0,s=1,n=Zp(this,Xp).length;if(4===Zp(this,Xp).length)t=parseInt(Zp(this,Xp)[1]+Zp(this,Xp)[1],16),i=parseInt(Zp(this,Xp)[2]+Zp(this,Xp)[2],16),e=parseInt(Zp(this,Xp)[3]+Zp(this,Xp)[3],16);else if(t=parseInt(Zp(this,Xp)[1]+Zp(this,Xp)[2],16),i=parseInt(Zp(this,Xp)[3]+Zp(this,Xp)[4],16),e=parseInt(Zp(this,Xp)[5]+Zp(this,Xp)[6],16),n>7){let t=parseInt(Zp(this,Xp)[7]+Zp(this,Xp)[8],16);s=parseFloat((t/255).toFixed(2))}return new Jp(t,i,e,s)}}Xp=new WeakMap;class tg{constructor(t){Kp.set(this,void 0),Gp(this,Kp,t)}trim(){Gp(this,Kp,at(Zp(this,Kp))?Zp(this,Kp).trim():"")}isValid(){return at(Zp(this,Kp))&&Zp(this,Kp).startsWith("rgb")}parse(){let t=Zp(this,Kp).length,e=(Zp(this,Kp).startsWith("rgba")?Zp(this,Kp).substring(5,t-1):Zp(this,Kp).substring(4,t-1)).split(",");if(!kt(e.length,3,4))return;let i=parseInt(e[0]),s=parseInt(e[1]),n=parseInt(e[2]),r=4===e.length?parseFloat(e[3]):1;return new Jp(i,s,n,r)}}Kp=new WeakMap;var eg,ig,sg,ng,rg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},og=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};const hg={light:{background:A.colorLightBackground,base:A.colorLightBase,active:A.colorLightActive,muted:A.colorLightMuted},dark:{background:A.colorDarkBackground,base:A.colorDarkBase,active:A.colorDarkActive,muted:A.colorDarkMuted}},ag={accent:{base:A.colorAccent,muted:A.colorAccentMuted,active:A.colorAccentActive,shade:A.colorAccentShade,shadeDark:A.colorAccentShadeDark},secondary:{base:A.colorSecondary,muted:A.colorSecondaryMuted,active:A.colorSecondaryActive,shade:A.colorSecondaryShade,shadeDark:A.colorSecondaryShadeDark},error:{base:A.colorError,muted:A.colorErrorMuted,active:A.colorErrorActive,shade:A.colorErrorShade,shadeDark:A.colorErrorShadeDark},warning:{base:A.colorWarning,muted:A.colorWarningMuted,active:A.colorWarningActive,shade:A.colorWarningShade,shadeDark:A.colorWarningShadeDark},success:{base:A.colorSuccess,muted:A.colorSuccessMuted,active:A.colorSuccessActive,shade:A.colorSuccessShade,shadeDark:A.colorSuccessShadeDark}};class lg{constructor(t,e){eg.set(this,void 0),ig.set(this,void 0),rg(this,eg,hg[t]),rg(this,ig,e)}setBackgroundColor(t){this.setColor(og(this,eg).background,t)}setBaseColor(t){this.setColor(og(this,eg).base,t)}setActiveColor(t){this.setColor(og(this,eg).active,t)}setMutedColor(t){this.setColor(og(this,eg).muted,t)}setBaseColors(t){if(!og(this,eg))return;let e={};e[og(this,eg).background]=t.background?t.background.toCssString():"",e[og(this,eg).active]=t.active?t.active.toCssString():"",e[og(this,eg).muted]=t.muted?t.muted.toCssString():"",e[og(this,eg).base]=t.base?t.base.toCssString():"",og(this,ig).setProperties(e)}setColor(t,e){og(this,ig).setProperty(t,e.toCssString())}}eg=new WeakMap,ig=new WeakMap;class cg{constructor(t,e){sg.set(this,void 0),ng.set(this,void 0),rg(this,sg,e),rg(this,ng,ag[t])}setBaseColor(t){this.setColor(og(this,ng).base,t)}setMutedColor(t){this.setColor(og(this,ng).muted,t)}setActiveColor(t){this.setColor(og(this,ng).active,t)}setShadeColor(t){this.setColor(og(this,ng).shade,t)}setShadeDarkColor(t){this.setColor(og(this,ng).shadeDark,t)}setColors(t){if(!og(this,ng))return;let e={};e[og(this,ng).shade]=t.shade?t.shade.toCssString():"",e[og(this,ng).shadeDark]=t.shadeDark?t.shadeDark.toCssString():"",e[og(this,ng).active]=t.active?t.active.toCssString():"",e[og(this,ng).muted]=t.muted?t.muted.toCssString():"",e[og(this,ng).base]=t.base?t.base.toCssString():"",og(this,sg).setProperties(e)}setAutoColors(t){let e={};e[og(this,ng).base]=t.toCssString(),e[og(this,ng).shade]=t.lighten(30).toCssString(),e[og(this,ng).shadeDark]=t.darken(30).toCssString(),e[og(this,ng).active]=t.darken(10).toCssString(),e[og(this,ng).muted]=t.lighten(10).toCssString(),og(this,sg).setProperties(e)}setColor(t,e){og(this,sg).setProperty(t,e.toCssString())}}sg=new WeakMap,ng=new WeakMap;var ug,dg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class gg{constructor(t){ug.set(this,void 0),dg(this,ug,t)}setProperty(t,e){gt(t,e)&&pg(this,ug).interactions.mutate(()=>{pg(this,ug).setProperty(t,e)},null)}setProperties(t){at(t)&&pg(this,ug).interactions.mutate(()=>{for(let e in t)at(t[e])&&pg(this,ug).setProperty(e,t[e])},null)}}ug=new WeakMap;var vg,fg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wg{constructor(t){vg.set(this,void 0),fg(this,vg,new gg(t))}setBaseFontSize(t,e){this.setBaseUnitValue(A.fontSize,t,e)}setAnimationTime(t,e){this.setBaseUnitValue(A.animationTime,t,null!=e?e:"ms")}setAnimationTimeLong(t,e){this.setBaseUnitValue(A.setAnimationTimeLong,t,null!=e?e:"ms")}setAnimationTimeShort(t,e){this.setBaseUnitValue(A.setAnimationTimeShort,t,null!=e?e:"ms")}setBaseLineHeight(t,e){this.setBaseUnitValue(A.lineHeight,t,e)}setBaseMargin(t,e){this.setBaseUnitValue(A.margin,t,e)}setBasePadding(t,e){this.setBaseUnitValue(A.padding,t,e)}setBaseBorderRadius(t,e){this.setBaseUnitValue(A.borderRadius,t,e)}setComponentSpace(t,e){this.setBaseUnitValue(A.componentSpace,t,e)}setAccordionIcon(t){at(t)&&this.setCSSVariable(A.accordionIcon,t)}setScrollbarWidth(t,e){this.setBaseUnitValue(A.scrollbarWidth,t,e)}setAppBackgroundColor(t){at(t)&&this.setCSSVariable(A.colorLightAppBackground,t.toCssString())}setDarkAppBackgroundColor(t){at(t)&&this.setCSSVariable(A.colorDarkAppBackground,t.toCssString())}getBaseColorsSetter(){return new lg("light",mg(this,vg))}getDarkBaseColorsSetter(){return new lg("dark",mg(this,vg))}getAccentThemeColorsSetter(){return new cg("accent",mg(this,vg))}getSecondaryThemeColorsSetter(){return new cg("secondary",mg(this,vg))}getErrorThemeColorsSetter(){return new cg("error",mg(this,vg))}getWarningThemeColorsSetter(){return new cg("warning",mg(this,vg))}getSuccessThemeColorsSetter(){return new cg("success",mg(this,vg))}setCSSVariable(t,e){mg(this,vg).setProperty(t,e)}setBaseUnitValue(t,e,i){if(!at(e))return;let s=`${e}${null!=i?i:"px"}`;this.setCSSVariable(t,s)}}vg=new WeakMap;var kg,yg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},bg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Cg{constructor(t){this.name="css-variables-plugin",kg.set(this,void 0),this.description="CuiCSSVariablesPlugin",this.setup=t,yg(this,kg,Bt.get("CuiCSSVariablesPlugin")),this.handler=void 0}init(t){this.handler=new wg(t),t.bus.on("csschange",this.onCssChange.bind(this))}destroy(){}onCssChange(t){if(!this.handler)return;let e=null,i=null;switch(t.method){case"baseFontSize":if(!this.isArgNumber(t.arg))return;this.handler.setBaseFontSize(t.arg.value,t.arg.unit);break;case"baseLineHeight":if(!this.isArgNumber(t.arg))return;this.handler.setBaseLineHeight(t.arg.value,t.arg.unit);break;case"animationTime":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTime(t.arg.value,t.arg.unit);break;case"animationTimeLong":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTimeLong(t.arg.value,t.arg.unit);break;case"animationTimeShort":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTimeShort(t.arg.value,t.arg.unit);break;case"margin":if(!this.isArgNumber(t.arg))return;this.handler.setBaseMargin(t.arg.value,t.arg.unit);break;case"padding":if(!this.isArgNumber(t.arg))return;this.handler.setBasePadding(t.arg.value,t.arg.unit);break;case"borderRadius":if(!this.isArgNumber(t.arg))return;this.handler.setBaseBorderRadius(t.arg.value,t.arg.unit);break;case"componentSpace":if(!this.isArgNumber(t.arg))return;this.handler.setComponentSpace(t.arg.value,t.arg.unit);break;case"scrollbarWidth":if(!this.isArgNumber(t.arg))return;this.handler.setScrollbarWidth(t.arg.value,t.arg.unit);break;case"accordionIcon":if(!at(t.arg))return;this.handler.setAccordionIcon(t.arg);break;case"appLightBackground":if(!at(t.arg))return;this.handler.setAppBackgroundColor(Jp.create(t.arg));break;case"appDarkBackground":case"appDarkBackground":if(!at(t.arg))return;this.handler.setDarkAppBackgroundColor(Jp.create(t.arg));break;case"mainColorBackground":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setBackgroundColor(Jp.create(t.arg.color));break;case"mainColor":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setBaseColor(Jp.create(t.arg.color));break;case"mainColorMuted":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setMutedColor(Jp.create(t.arg.color));break;case"mainColorActive":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setActiveColor(Jp.create(t.arg.color));break;case"themeAutoColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setAutoColors(Jp.create(t.arg.color));case"themeBaseColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setAutoColors(Jp.create(t.arg.color));case"themeMutedColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setMutedColor(Jp.create(t.arg.color));case"themeActiveColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setActiveColor(Jp.create(t.arg.color));case"themeShadeColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setShadeColor(Jp.create(t.arg.color));case"themeShadeDarkColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setShadeDarkColor(Jp.create(t.arg.color));default:bg(this,kg).warning("Unknown event method","onCssChange")}}isArgNumber(t){return at(t)&&at(t.value)}isArgColor(t){return at(t)&&at(t.palette)&&at(t.color)}getBaseColorSetter(t){if(!this.handler)return;switch(t.trim().toLowerCase()){case"light":return this.handler.getBaseColorsSetter();case"dark":return this.handler.getDarkBaseColorsSetter()}}getAccentColorSetter(t){if(!this.handler)return;switch(t.trim().toLowerCase()){case"accent":return this.handler.getAccentThemeColorsSetter();case"secondary":return this.handler.getSecondaryThemeColorsSetter();case"error":return this.handler.getErrorThemeColorsSetter();case"warning":return this.handler.getWarningThemeColorsSetter();case"success":return this.handler.getSuccessThemeColorsSetter();default:return}}}kg=new WeakMap;var Mg,Ag,Eg,Wg,Tg,xg,Sg,Lg,Ig=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Dg{constructor(t,e){var i;Mg.set(this,void 0),Ag.set(this,void 0),Eg.set(this,void 0),Wg.set(this,void 0),Tg.set(this,void 0),xg.set(this,void 0),Sg.set(this,void 0),Lg.set(this,void 0),Ig(this,Mg,[]),Ig(this,Ag,[]),Ig(this,Eg,window.innerWidth),Ig(this,Wg,!1),Ig(this,Tg,(i=window.innerWidth)<=640?"small":i>640&&i<=960?"medium":i>960&&i<=1200?"large":"xlarge"),Ig(this,xg,null!=e?e:0),Ig(this,Sg,t),Ig(this,Lg,this.listener.bind(this))}observe(t){Pg(this,Mg).findIndex(e=>e===t)<0&&Pg(this,Mg).push(t)}unobserve(t){let e=Pg(this,Mg).findIndex(e=>e===t);e>=0&&Pg(this,Mg).splice(e,1)}connect(){window.addEventListener("resize",Pg(this,Lg))}disconnect(){window.removeEventListener("resize",Pg(this,Lg))}pushUpdateToItems(t){Pg(this,Mg).length<1||(Ig(this,Ag,[]),Pg(this,Mg).forEach(e=>{Pg(this,Ag).push(e.resize(t))}),Promise.all(Pg(this,Ag)),Ig(this,Ag,[]))}listener(t){if(Pg(this,Wg))return;Ig(this,Wg,!0);const e=window.innerWidth-Pg(this,Eg);if(Math.abs(e)>=Pg(this,xg)){const t=vt(window.innerWidth);if(t!==Pg(this,Tg)){const e={current:t,previous:Pg(this,Tg),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now()};Pg(this,Sg).emit(x,"",e),this.pushUpdateToItems(e),Ig(this,Tg,t)}}Ig(this,Wg,!1)}}Mg=new WeakMap,Ag=new WeakMap,Eg=new WeakMap,Wg=new WeakMap,Tg=new WeakMap,xg=new WeakMap,Sg=new WeakMap,Lg=new WeakMap;var Og,Ng=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _g{constructor(t){this.name="resize-observer-plugin",Og.set(this,void 0),this.description="CuiResizeObserverPlugin",Ng(this,Og,void 0),this.setup=t}init(t){var e;Ng(this,Og,new Dg(t.bus,null!==(e=this.setup.resizeThreshold)&&void 0!==e?e:20)),Bg(this,Og).connect()}destroy(){Bg(this,Og)&&Bg(this,Og).disconnect()}}Og=new WeakMap;var Hg,$g,Rg,Fg,qg,Ug,zg,Vg,jg=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Yg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kg{constructor(t,e,i){Hg.set(this,void 0),$g.set(this,void 0),Rg.set(this,void 0),Fg.set(this,void 0),qg.set(this,void 0),Ug.set(this,void 0),zg.set(this,void 0),Vg.set(this,void 0),Yg(this,Hg,t),Yg(this,$g,`.${e}-toast`),Yg(this,Rg,e+"-toast"),Yg(this,Fg,e+"-active"),Yg(this,qg,i),Yg(this,Ug,!1),Yg(this,zg,e+"-toast-animation-in"),Yg(this,Vg,e+"-toast-animation-out")}show(t){return jg(this,void 0,void 0,(function*(){if(Xg(this,Ug))return!1;Yg(this,Ug,!0);let e=document.querySelector(Xg(this,$g));return at(e)||(e=document.createElement("div"),e.classList.add(Xg(this,Rg)),document.body.appendChild(e),yield ct(10)),Xg(this,Hg).mutate(()=>{e.textContent=t,e.classList.add(p),e.classList.add(Xg(this,zg))},this),yield ct(Xg(this,qg)),Xg(this,Hg).mutate(()=>{e.classList.remove(p),e.classList.remove(Xg(this,zg)),e.classList.add(Xg(this,Fg))},this),yield ct(3e3),Xg(this,Hg).mutate(()=>{e.classList.add(p),e.classList.add(Xg(this,Vg))},this),setTimeout(()=>{Xg(this,Hg).mutate(()=>{e.classList.remove(p),e.classList.remove(Xg(this,Vg)),e.classList.remove(Xg(this,Fg))},this),Yg(this,Ug,!1)},Xg(this,qg)),!0}))}}Hg=new WeakMap,$g=new WeakMap,Rg=new WeakMap,Fg=new WeakMap,qg=new WeakMap,Ug=new WeakMap,zg=new WeakMap,Vg=new WeakMap;var Gg,Zg,Jg,Qg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},tv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ev{constructor(t){this.name="toast-plugin",Gg.set(this,void 0),Zg.set(this,void 0),Jg.set(this,void 0),this.description="CuiToastPlugin",this.setup=t,Qg(this,Gg,void 0),Qg(this,Zg,null),Qg(this,Jg,void 0)}init(t){var e;Qg(this,Jg,t),tv(this,Gg)||Qg(this,Gg,new Kg(t.interactions,t.setup.prefix,null!==(e=t.setup.animationTime)&&void 0!==e?e:300)),Qg(this,Zg,t.bus.on(Z,this.onToastShow.bind(this),{$cuid:this.name}))}destroy(){tv(this,Jg)&&tv(this,Zg)&&(tv(this,Jg).bus.detach(Z,tv(this,Zg)),Qg(this,Zg,null))}onToastShow(t){tv(this,Gg)&&tv(this,Jg)&&(tv(this,Jg).bus.emit(J,null,[]),tv(this,Gg).show(t).then(()=>{tv(this,Jg)&&tv(this,Jg).bus.emit(Q,null,[])}))}}Gg=new WeakMap,Zg=new WeakMap,Jg=new WeakMap;var iv,sv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},nv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};iv=new WeakMap;const ov="0.3.3";window.cuiInit=new class{constructor(){iv.set(this,void 0),nv(this,iv,!1)}init(t){var e,i;return sv(this,void 0,void 0,(function*(){if(rv(this,iv))return console.log("Module is already initialized"),!1;const s=new ks,n=function(t){let e=!t||t.autoLight,i=!t||t.autoPrint;return[new cp({autoLight:e}),new Up({autoPrint:i}),new Zd({}),new Pd,new Cg({}),new Ep,new _g({}),new ev({}),new Td,new Hp({timeout:t.notifcationTimeout})]}({autoLight:!0,autoPrint:!0}),r=function(t){let e=null==t?void 0:t.prefix;return[new ph(e),new Zu(e),new Jn(e),new Oc(e),new cl(e),new Ol(e),new xh(e),new Ua(e),new hr(e),new _u(e),new Sr(e),new Rh(e),new Ks(e),new So(e),new Oa(e),new yu(e),new xu(e),new hh(e),new nu(e),new Nn(e),new mr(e),new Wc(e),new sl(e)]}({prefix:null===(e=t.setup)||void 0===e?void 0:e.prefix});let o=n;t.plugins&&(o=Object.assign(Object.assign({},n),t.plugins));let h=yield s.init(Object.assign(Object.assign({},t),{plugins:o,components:at(t.components)?[...r,...t.components]:r}));return h.result?(nv(this,iv,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(i=h.message)&&void 0!==i?i:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}}])}));
//# sourceMappingURL=index.min.js.map