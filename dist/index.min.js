!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light-app",[],e):"object"==typeof exports?exports["cui-light-app"]=e():t["cui-light-app"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"CUI_LIGHT_VERSION",(function(){return gg})),i.d(e,"CuiInstance",(function(){return En}));class s extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class n extends s{constructor(t){super("ItemNotFoundError",t)}}class r extends s{constructor(t){super("ArgumentError",t)}}class o extends s{constructor(t){super("CuiInstanceInitError",t)}}class h extends s{constructor(t){super("RegisterElementError",t)}}class a extends s{constructor(t){super("AnimatorError",t)}}class l extends s{constructor(t){super("CSSVariableError",t)}}class c extends s{constructor(t){super("CuiColorError",t)}}class u extends s{constructor(t){super("CuiPositionError",t)}}const d="dark",p="animation-progress",g="print",v="swiping-on",f={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},m="--cui-color-light-app-background",w="--cui-color-dark-app-background",k="--cui-color-light-background",y="--cui-color-dark-background ",b="--cui-color-light-border",M="--cui-color-dark-border",C={light:{base:"--cui-color-light-base",muted:"--cui-color-light-muted",active:"--cui-color-light-active"},dark:{base:"--cui-color-dark-base",muted:"--cui-color-dark-muted",active:"--cui-color-dark-active"},accent:{base:"--cui-color-primary",muted:"--cui-color-primary-muted",active:"--cui-color-primary-active"},secondary:{base:"--cui-color-secondary",muted:"--cui-color-secondary-muted",active:"--cui-color-secondary-active"},success:{base:"--cui-color-success",muted:"--cui-color-success-muted",active:"--cui-color-success-active"},warning:{base:"--cui-color-warning",muted:"--cui-color-warning-muted",active:"--cui-color-warning-active"},error:{base:"--cui-color-error",muted:"--cui-color-error-muted",active:"--cui-color-error-active"}},A={fontSize:"--{prefix}-font-size",lineHeight:"--{prefix}-line-height",animationTime:"--{prefix}-animation-time",animationTimeLong:"--{prefix}-animation-time-long",animationTimeShort:"--{prefix}-animation-time-short",colorLightAppBackground:"--{prefix}-color-light-app-background",colorLightBackground:"--{prefix}-color-light-background",colorLightBorder:"--{prefix}-color-light-border",colorLightBase:"--{prefix}-color-light-base",colorLightActive:"--{prefix}-color-light-active",colorLightMuted:"--{prefix}-color-light-muted",colorDarkAppBackground:"--{prefix}-color-dark-app-background",colorDarkBackground:"--{prefix}-color-dark-background",colorDarkBorder:"--{prefix}-color-dark-border",colorDarkBase:"--{prefix}-color-dark-base",colorDarkActive:"--{prefix}-color-dark-active",colorDarkMuted:"--{prefix}-color-dark-muted",colorAccent:"--{prefix}-color-primary",colorAccentActive:"--{prefix}-color-primary-active",colorAccentMuted:"--{prefix}-color-primary-muted",colorAccentShade:"--{prefix}-color-primary-shade",colorAccentShadeDark:"--{prefix}-color-primary-shade-dark",colorSecondary:"--{prefix}-color-secondary",colorSecondaryActive:"--{prefix}-color-secondary-active",colorSecondaryMuted:"--{prefix}-color-secondary-muted",colorSecondaryShade:"--{prefix}-color-secondary-shade",colorSecondaryShadeDark:"--{prefix}-color-secondary-shade-dark",colorWarning:"--{prefix}-color-warning",colorWarningActive:"--{prefix}-color-warning-active",colorWarningMuted:"--{prefix}-color-warning-muted",colorWarningShade:"--{prefix}-color-warning-shade",colorWarningShadeDark:"--{prefix}-color-warning-shade-dark",colorSuccess:"--{prefix}-color-success",colorSuccessActive:"--{prefix}-color-success-active",colorSuccessMuted:"--{prefix}-color-success-muted",colorSuccessShade:"--{prefix}-color-success-shade",colorSuccessShadeDark:"--{prefix}-color-success-shade-dark",colorError:"--{prefix}-color-error",colorErrorActive:"--{prefix}-color-error-active",colorErrorMuted:"--{prefix}-color-error-muted",colorErrorShade:"--{prefix}-color-error-shade",colorErrorShadeDark:"--{prefix}-color-error-shade-dark",inputBackground:"--{prefix}-input-background-color",colorShade:"--{prefix}-color-shade",colorShadeDarker:"--{prefix}-color-shade-darker",colorShadeLight:"--{prefix}-color-shade-light",colorShadeLighter:"--{prefix}-color-shade-light-lighter",outline:"--{prefix}-outline",borderRadius:"--{prefix}-border-radius",padding:"--{prefix}-padding",margin:"--{prefix}-margin",scrollbarWidth:"--{prefix}-scrollbar-width",componentSpace:"--{prefix}-component-space",accordionIcon:"--{prefix}-accordion-icon"};class E{}E.logLevel="none",E.prefix="cui";const W="instance-initialized",T="instance-finished",x="resize",S="open",L="opened",P="close",I="closed",D="toggle",B="toggled",O="switch",H="switched",N="scroll",$="targetchange",q="intersection",_="keydown",R="windowclick",z="offset",U="progresschange",F="progresschanged",V="globalmove",j="movelock",X="pause",Y="paused",K="sorted",Z="sortstart",G=function*(){let t=0;for(;;){((yield t++)||t>2e5)&&(t=0)}}();function J(t,e=!0){return null!=t&&(!e||!function(t){if("string"==typeof t)return 0===t.length;if("boolean"==typeof t)return t;if(Array.isArray(t))return 0===t.length;return!1}(t))}function Q(t,e){if(!J(t)||!J(e))throw new r("Missing argument value");return`${t}-${e}`}function tt(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function et(t,e,i){return t<e?e:t>i?i:t}function it(t,e,i,s){return null==t||isNaN(t)?s:et(t,e,i)}function st(t){return J(t)?`[${t.join("],[")}]`:""}function nt(...t){if(!J(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!J(t[i]))return!1;return!0}function rt(t){let e="none";return t>=640&&(e="small"),t>=960&&(e="medium"),t>=1200&&(e="large"),t>=1600&&(e="xlarge"),e}function ot(t){let e={};return J(t)?(e=function(t){let e=null;if(J(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error((i="An exception occured",s="Functions",n="parseJsonString",`[${(new Date).toLocaleString()}][${null!=s?s:"-"}][${null!=n?n:"-"}][${i}]`),t)}return e}var i,s,n;return null}(t.trim()),J(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=Mt(t),s=void 0,n="";i.length<2||(s=i[0].trim(),n=i[1].trim(),s&&(e[s]=n.replace("U+0003B",";")))})):e=t),e):e}function ht(t,e){let i=parseInt(t);return isNaN(i)?e:i}function at(t,e){return J(t)&&J(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function lt(t,e,i){return J(t)&&t>=e&&t<=i}function ct(t,e){return nt(t,e)?ot(t.getAttribute(e)):null}function ut(t){return!!J(t)&&["y","t","true","yes"].includes(t.toLowerCase())}function dt(t,e){return J(t)?ut(t):e}function pt(t,e){return J(t)?t.toLowerCase():e}function gt(t){return"string"==typeof t}function vt(t,e){return J(t)?t.replace("{prefix}",null!=e?e:""):t}function ft(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function mt(t,e,i,s){let n=t;n.$handlers={};let r=function(t,e){return t&&J(t.hasAttribute)?e.filter(e=>t.hasAttribute(e)):[]}(t,i);J(r)&&(n.$cuid=t.hasAttribute("cuid")?t.getAttribute("cuid"):function(t){return`${J(t)?t:"cui-element"}-${G.next().value}`}(t.tagName),t.setAttribute("cuid",n.$cuid),r.forEach(i=>{let o=e.find(t=>t.attribute===i);if(J(o))try{s.styleAppender.append(o.getStyle());let e=o.get(t,s);n.$handlers[o.attribute]=e,n.$handlers[o.attribute].handle(ct(t,o.attribute))}catch(t){let e=r?r.join(", "):"";throw new h(`An error occured during [${e}] initialization: ${t.message}`)}}))}function wt(t){if(!J(t))return;let e=t.parentElement;return J(e)&&J(e.$cuid)?e:wt(e)}function kt(t){let e=0;return t?(Array.from(t.children).forEach(t=>{e+=t.getBoundingClientRect().height}),e>0?e+4:e):-1}function yt(t,e){if(nt(t,e))for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}function bt(t,e,i){let s=-1;switch(t){case"prev":s=e<=0?i-1:e-1;break;case"next":s=e<i-1?e+1:0;break;case"first":s=0;break;case"last":s=i-1;default:s=ht(t,-1)}return s}function Mt(t){let e=[];if(!J(t))return e;let i=t.split(":");return 1===i.length?i:[i.shift(),i.join(":")]}class Ct{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.prefix="cui",this.plugins={}}fromInit(t){var e;return this.prefix=null!==(e=t.prefix)&&void 0!==e?e:"cui",this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this}}class At{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.root=document.body,this.busSetup=void 0,this.development=void 0}}class Et{constructor(t,e){this.level=e,this.component=t,this.id="-"}setLevel(t){this.level=t}setId(t){this.id=t}debug(t,e){"debug"===this.level&&console.log(this.prepString(t,"debug",e))}error(t,e){"error"!==this.level&&"debug"!==this.level&&"warning"!==this.level||console.error(this.prepString(t,"error",e))}warning(t,e){"warning"!==this.level&&"debug"!==this.level||console.warn(this.prepString(t,"warning",e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,"exception",e)),"debug"===this.level&&console.error(t.stack)}performance(t,e){if("debug"!==this.level)return;let i=Date.now();t(),console.log(this.prepString(`Performance measure: ${Date.now()-i}ms`,"performance",e))}prepString(t,e,i){return`[${(new Date).toLocaleString()}][${e}][${this.component}][${null!=i?i:"-"}][${this.id}][${t}]`}}class Wt{static get(t,e){return new Et(t,null!=e?e:E.logLevel)}}var Tt,xt,St,Lt,Pt,It,Dt,Bt,Ot,Ht,Nt,$t,qt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},_t=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Rt{constructor(t,e){Tt.set(this,void 0),xt.set(this,void 0),St.set(this,void 0),Lt.set(this,void 0),Pt.set(this,void 0),It.set(this,void 0),Dt.set(this,void 0),qt(this,Tt,void 0),this.plugins=void 0,qt(this,xt,void 0),qt(this,St,t),this._log=Wt.get("CuiMutationObserver"),qt(this,Lt,[]),qt(this,Pt,[]),qt(this,It,e),qt(this,Dt,"")}setPlugins(t){return this.plugins=t,this}setComponents(t){return qt(this,Lt,t),this}setAttributes(t){return qt(this,xt,{attributes:!0,subtree:!0,childList:!0,attributeFilter:t}),qt(this,Pt,t),qt(this,Dt,st(t)),this}start(){return this._log.debug("Starting"),_t(this,xt)?(qt(this,Tt,new MutationObserver(this.mutationCallback.bind(this))),_t(this,Tt).observe(_t(this,St),_t(this,xt)),this._log.debug("Started"),this):(this._log.error("Cannot start - options are not defined"),this)}stop(){return this._log.debug("Stopping"),_t(this,Tt)?(_t(this,Tt).disconnect(),qt(this,Tt,void 0),this._log.debug("Stopped"),this):(this._log.debug("Observer not available"),this)}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;nt(t.attributeName,e)?nt(e.$handlers,e.$handlers[t.attributeName])&&e.$handlers[t.attributeName].refresh(ct(e,t.attributeName)):this._log.error("Mutation attribute doesn't not exisist");break;case"childList":this.handleChildListMutation(t)}J(this.plugins)&&this.plugins.onMutation(t).then(()=>{})})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(this._log.debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes)):i>0&&(this._log.debug("Removing nodes: "+i),this.handleRemovedNodes(t.removedNodes))}handleAddedNodes(t){t.forEach(t=>{try{mt(t,_t(this,Lt),_t(this,Pt),_t(this,It));let e=t.hasChildNodes()?t.querySelectorAll(_t(this,Dt)):null;J(e)&&e.forEach(t=>{mt(t,_t(this,Lt),_t(this,Pt),_t(this,It))})}catch(t){this._log.exception(t)}})}handleRemovedNodes(t){t.forEach(t=>{this.destroySingleElement(t);let e=t.hasChildNodes()?t.querySelectorAll(_t(this,Dt)):null;J(e)&&e.forEach(t=>{this.destroySingleElement(t)})})}destroySingleElement(t){let e=t;if(e.$handlers)for(let t in e.$handlers)if(e.$handlers.hasOwnProperty(t))try{e.$handlers[t].destroy()}catch(e){this._log.exception(e,"remove - "+t)}}}Tt=new WeakMap,xt=new WeakMap,St=new WeakMap,Lt=new WeakMap,Pt=new WeakMap,It=new WeakMap,Dt=new WeakMap;class zt{constructor(t){Bt.set(this,void 0),Ot.set(this,void 0),Ht.set(this,void 0),Nt.set(this,void 0),$t.set(this,{childList:!0,subtree:!0}),qt(this,Ot,void 0),qt(this,Nt,!1),qt(this,Bt,!1),qt(this,Ht,t)}observe(){_t(this,Bt)||_t(this,Nt)||!_t(this,Ot)||(_t(this,Ot).observe(_t(this,Ht),_t(this,$t)),qt(this,Bt,!0))}unobserve(){_t(this,Bt)&&_t(this,Ot)&&(_t(this,Ot).disconnect(),qt(this,Bt,!1))}isObserving(){return _t(this,Bt)}disable(t){qt(this,Nt,t),_t(this,Nt)&&this.unobserve()}onMutation(t){_t(this,Bt)&&this.unobserve(),qt(this,Ot,new MutationObserver(t))}}Bt=new WeakMap,Ot=new WeakMap,Ht=new WeakMap,Nt=new WeakMap,$t=new WeakMap;var Ut,Ft,Vt,jt,Xt,Yt,Kt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gt{constructor(){Ut.set(this,void 0),Ft.set(this,void 0),Vt.set(this,void 0),jt.set(this,!1),Xt.set(this,void 0),Yt.set(this,void 0),Kt(this,Vt,window.requestAnimationFrame.bind(window)),Kt(this,Ut,[]),Kt(this,Ft,[]),Kt(this,Xt,5),Kt(this,Yt,void 0)}onError(t){Kt(this,Yt,t)}mutate(t,e,...i){Zt(this,Ft).push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){Zt(this,Ut).push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!Zt(this,jt)){if(Kt(this,jt,!0),t&&t>=Zt(this,Xt))throw new Error("Fast Dom limit reached");Zt(this,Vt).call(this,this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=Zt(this,Ut),n=Zt(this,Ft);try{this.run(n),this.run(s)}catch(t){Zt(this,Yt)?Zt(this,Yt).call(this,t):console.error("An error has been captured in interactions: "+t.message),i=t}Kt(this,jt,!1),(i||Zt(this,Ut).length||Zt(this,Ft).length)&&this.schedule(e+1)}}Ut=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,jt=new WeakMap,Xt=new WeakMap,Yt=new WeakMap;class Jt{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var Qt,te,ee=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ie=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class se{constructor(t){Qt.set(this,void 0),te.set(this,void 0),ee(this,Qt,[]),ee(this,te,[]),t&&t.forEach(t=>{if(!J(t.key))throw ee(this,Qt,[]),ee(this,te,[]),new r("Key is empty");this.add(t.key,t.value)})}add(t,e){if(this.throwOnEmptyKey(t),this.containsKey(t))throw new Error("Key already exists");ie(this,Qt).push(t),ie(this,te).push(e)}remove(t){if(!J(t))return;let e=ie(this,Qt).indexOf(t);e>=0&&(ie(this,Qt).splice(e,1),ie(this,te).splice(e,1))}get(t){this.throwOnEmptyKey(t);let e=this.indexOf(t);if(!(e<0))return ie(this,te)[e]}containsKey(t){return J(t)&&this.indexOf(t)>=0}keys(){return ie(this,Qt)}values(){return ie(this,te)}indexOf(t){return J(t)?ie(this,Qt).indexOf(t):-1}update(t,e){this.throwOnEmptyKey(t);let i=this.indexOf(t);if(i<0)throw new n(`Item with key [${t}] not found`);ie(this,te)[i]=e}clear(){ee(this,te,[]),ee(this,Qt,[])}throwOnEmptyKey(t){if(!J(t))throw new r("Key is empty")}}Qt=new WeakMap,te=new WeakMap;var ne,re,oe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},he=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ae{constructor(t){ne.set(this,void 0),re.set(this,void 0),oe(this,ne,new se),oe(this,re,null!=t?t:500)}put(t,e){J(t)&&(this.has(t)?he(this,ne).update(t,e):(this.clean(),he(this,ne).add(t,e)))}get(t){if(!this.has(t))return;let e=he(this,ne).get(t);if(e&&e.refresh())return e;he(this,ne).remove(t)}has(t){return!!J(t)&&he(this,ne).containsKey(t)}remove(t){return!!J(t)&&(!!this.has(t)&&(he(this,ne).remove(t),!0))}clear(){he(this,ne).clear()}clean(){he(this,ne).keys().length>=he(this,re)&&he(this,ne).remove(he(this,ne).keys()[0])}}ne=new WeakMap,re=new WeakMap;var le,ce,ue,de=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},pe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ge=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ve{constructor(){this.queue=[],this.isBusy=!1}idMatches(t,e){return!J(t)||J(t)&&t==e}}class fe extends ve{constructor(t){super(),le.set(this,void 0),ce.set(this,void 0),pe(this,ce,t),pe(this,le,Wt.get("SimpleEventEmitHandler"))}handle(t,e,i){return de(this,void 0,void 0,(function*(){J(t)?(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||this.isBusy||(this.isBusy=!0,this.perform(),this.queue.length>0&&(yield this.perform()),this.isBusy=!1)):ge(this,le).warning("No events provided")}))}perform(){return de(this,void 0,void 0,(function*(){let t=this.queue.shift();if(t)for(let e in t.events){let i=t.events[e];try{this.idMatches(t.cuid,i.$cuid)&&(yield ge(this,ce).execute(i.callback,t.args))}catch(t){ge(this,le).error(t)}}}))}}le=new WeakMap,ce=new WeakMap;class me extends ve{constructor(t){super(),ue.set(this,void 0),pe(this,ue,t)}handle(t,e,i){return de(this,void 0,void 0,(function*(){J(t)&&(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||(this.isBusy=!0,this.perform(),this.queue.length>0&&this.perform(),this.isBusy=!1))}))}perform(){return de(this,void 0,void 0,(function*(){let t=this.queue.shift(),e=[];if(!t)return Promise.all(e);for(let i in t.events){let s=t.events[i];this.idMatches(t.cuid,s.$cuid)&&e.push(ge(this,ue).execute(s.callback,t.args))}return Promise.all(e)}))}}ue=new WeakMap;var we=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class ke{execute(t,e){return we(this,void 0,void 0,(function*(){e=null!=e?e:[],t(...e)}))}}var ye,be,Me,Ce,Ae,Ee,We,Te,xe=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Se=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Le=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pe{constructor(t,e){ye.set(this,void 0),be.set(this,void 0),Me.set(this,void 0),Ce.set(this,void 0),Se(this,ye,{}),Se(this,Me,t),Se(this,Ce,null!=e?e:"CuiEventBus"),Se(this,be,Wt.get(Le(this,Ce)))}on(t,e,i){if(!nt(t,e))throw new r("Missing argument");let s=Le(this,Ce)+"-"+function(){let t=ft(1,1e3),e=ft(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}();return Le(this,ye)[t]||(Le(this,ye)[t]={}),this.isAttached(Le(this,ye)[t],s,i)?null:(Le(this,be).debug(`Attaching new event: [${t}] for: [${s}]`),Le(this,ye)[t][s]={callback:e,$cuid:this.getCuid(i)},s)}detach(t,e){if(!nt(t,e))throw new r("Missing argument");let i=Le(this,ye)[t];Le(this,be).debug(`Detaching item: [${e}] from [${t}]`),this.isAttached(i,e)&&delete i[e]}detachAll(t){J(t)&&Le(this,ye)[t]?delete Le(this,ye)[t]:Le(this,be).error("Event name is missing or incorrect","detachAll")}emit(t,e,...i){return xe(this,void 0,void 0,(function*(){if(!J(t))throw new r("Event name is incorrect");return J(Le(this,ye)[t])&&(Le(this,be).debug(`Emit: [${t}]`),yield Le(this,Me).handle(Le(this,ye)[t],e,i)),!0}))}isSubscribing(t,e,i){let s=Le(this,ye)[t];return this.isAttached(s,e,i)}detachByCuid(t,e){if(!nt(t,e))return;let i=Le(this,ye)[t];J(i)&&yt(Object.assign({},i),(t,s)=>{s.$cuid===e&&delete i[t]})}isAttached(t,e,i){return J(i)?J(t)&&J(e)&&J(t[e])&&t[e].$cuid==i.$cuid:J(t)&&J(e)&&J(t[e])}getCuid(t){return J(t)?t.$cuid:null}}ye=new WeakMap,be=new WeakMap,Me=new WeakMap,Ce=new WeakMap;class Ie{constructor(t){if(Ae.set(this,void 0),Ee.set(this,void 0),We.set(this,void 0),Te.set(this,void 0),Se(this,Ee,Wt.get("CuiEventBus")),Se(this,We,[]),Se(this,Ae,{}),Se(this,Te,0),J(t)){Le(this,Ee).debug("Initiating buses"),(1===t.length?t:t.sort((t,e)=>t.priority-e.priority)).forEach((t,e)=>{Le(this,We).push(this.initBusInstance(t.name,t.handler)),Se(this,Ae,Object.assign(Object.assign({},Le(this,Ae)),this.mapEvents(t.eventsDef,e))),Le(this,Ee).debug(`Bus ${t.name} has been initialized with number: ${e}`)}),Le(this,We).push(this.initBusInstance("DefaultEventBus","tasked")),Se(this,Te,Le(this,We).length-1),Le(this,Ee).debug("Bus initialization finished")}}on(t,e,i){if(!nt(t,e))throw new r("Missing argument");return this.get(t).on(t,e,i)}detach(t,e,i){if(!nt(t,e))throw new r("Missing argument");this.get(t).detach(t,e,i)}detachAll(t){this.get(t).detachAll(t)}emit(t,e,...i){return xe(this,void 0,void 0,(function*(){if(!J(t))throw new r("Event name is incorrect");return this.get(t).emit(t,e,...i)}))}isSubscribing(t,e,i){return this.get(t).isSubscribing(t,e,i)}detachByCuid(t,e){nt(t,e)&&this.get(t).detachByCuid(t,e)}initBusInstance(t,e){if(!nt(t,e))throw new r("Bus name or handler name is incorrect");let i=new ke,s=class{static get(t,e){switch(t){case"tasked":return new me(e);default:return new fe(e)}}}.get(e,i);return new Pe(s,t)}mapEvents(t,e){return t.reduce((t,i)=>t[i]?t:Object.assign(Object.assign({},t),{[i]:e}),{})}get(t){let e=Le(this,Ae)[t];return Le(this,We)[null!=e?e:Le(this,Te)]}}Ae=new WeakMap,Ee=new WeakMap,We=new WeakMap,Te=new WeakMap;new WeakMap,new WeakMap;var De,Be=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i};class Oe{constructor(t){De.set(this,void 0),Be(this,De,t)}append(t){if(J(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.type="text/css",i.appendChild(s),e.appendChild(i)}return!0}}De=new WeakMap;var He,Ne,$e,qe,_e=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Re=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ze{constructor(t){He.set(this,void 0),Ne.set(this,void 0),$e.set(this,15),qe.set(this,15),_e(this,He,document.documentElement),_e(this,Ne,t)}setAppBackground(t,e){this.setPropertyIn(m,t.toCssString()),this.setPropertyIn(w,e.toCssString())}setComponentBackground(t,e){this.setPropertyIn(k,t.toCssString()),this.setPropertyIn(y,e.toCssString())}setBordersColors(t,e){this.setPropertyIn(b,t.toCssString()),this.setPropertyIn(M,e.toCssString())}setColor(t,e){var i,s;const n=C[t],r=e.base;if(!J(n)||!J(r))return;const o=null!==(i=e.muted)&&void 0!==i?i:r.clone().lighten(Re(this,$e)),h=null!==(s=e.active)&&void 0!==s?s:r.clone().darken(Re(this,qe));Re(this,Ne).mutate(()=>{this.setProperty(n.base,r.toCssString()),this.setProperty(n.active,h.toCssString()),this.setProperty(n.muted,o.toCssString())},this)}setLightenFactor(t){_e(this,$e,et(t,0,100))}setDarkenFactor(t){_e(this,qe,et(t,0,100))}setProperty(t,e){Re(this,He).style.setProperty(t,e)}setPropertyIn(t,e){nt(e,t)&&Re(this,Ne).mutate(this.setProperty,this,t,e)}}He=new WeakMap,Ne=new WeakMap,$e=new WeakMap,qe=new WeakMap;var Ue,Fe,Ve,je,Xe,Ye,Ke,Ze,Ge=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Je=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Qe{constructor(t,e){var i;Ue.set(this,void 0),Fe.set(this,void 0),Ve.set(this,void 0),je.set(this,void 0),Xe.set(this,void 0),Ye.set(this,void 0),Ke.set(this,void 0),Ze.set(this,void 0),Ge(this,Ue,[]),Ge(this,Fe,[]),Ge(this,Ve,window.innerWidth),Ge(this,je,!1),Ge(this,Xe,(i=window.innerWidth)<=640?"small":i>640&&i<=960?"medium":i>960&&i<=1200?"large":"xlarge"),Ge(this,Ye,null!=e?e:0),Ge(this,Ke,t),Ge(this,Ze,this.listener.bind(this))}observe(t){Je(this,Ue).findIndex(e=>e===t)<0&&Je(this,Ue).push(t)}unobserve(t){let e=Je(this,Ue).findIndex(e=>e===t);e>=0&&Je(this,Ue).splice(e,1)}connect(){window.addEventListener("resize",Je(this,Ze))}disconnect(){window.removeEventListener("resize",Je(this,Ze))}pushUpdateToItems(t){Je(this,Ue).length<1||(Ge(this,Fe,[]),Je(this,Ue).forEach(e=>{Je(this,Fe).push(e.resize(t))}),Promise.all(Je(this,Fe)),Ge(this,Fe,[]))}listener(t){if(Je(this,je))return;Ge(this,je,!0);const e=window.innerWidth-Je(this,Ve);if(Math.abs(e)>=Je(this,Ye)){const t=rt(window.innerWidth);if(t!==Je(this,Xe)){const e={current:t,previous:Je(this,Xe),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now()};Je(this,Ke).emit(x,"",e),this.pushUpdateToItems(e),Ge(this,Xe,t)}}Ge(this,je,!1)}}Ue=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,je=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,Ke=new WeakMap,Ze=new WeakMap;var ti,ei=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ii=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class si{constructor(t){ti.set(this,void 0),ei(this,ti,t)}pushState(t,e,i,s,n){this.checkAndCall(()=>{ii(this,ti).pushState(t,e,i,s,n)})}registerElement(t,e,i){this.checkAndCall(()=>{ii(this,ti).registerElement(t,e,i)})}unregisterElement(t,e){this.checkAndCall(()=>{ii(this,ti).unregisterElement(t,e)})}setProperty(t,e,i,s){this.checkAndCall(()=>{ii(this,ti).setProperty(t,e,i,s)})}log(t,e,i){this.checkAndCall(()=>{ii(this,ti).log(t,e,i)})}checkAndCall(t){J(ii(this,ti))&&t()}}ti=new WeakMap;var ni,ri=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},oi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class hi{constructor(t){ni.set(this,void 0),this.setup=(new Ct).fromInit(t),this.interactions=class{static get(t,e){switch(t){case"async":const t=new Gt;return e&&t.onError(e),t;default:return new Jt}}}.get(t.interaction,this.onInteractionError.bind(this)),this.cache=new ae(this.setup.cacheSize),this.bus=class{static get(t){return J(t)?new Ie(t):new Pe(new me(new ke))}}.get(t.busSetup),this.colors=new ze(this.interactions),this.development=new si(t.development),this.styleAppender=new Oe(this.interactions),ri(this,ni,new Qe(this.bus,this.setup.resizeThreshold)),oi(this,ni).connect()}setLightMode(t){const e=Q(this.setup.prefix,d),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=Q(this.setup.prefix,d);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=Q(this.setup.prefix,g),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=Q(this.setup.prefix,g);return document.body.classList.contains(t)}setProperty(t,e){if(!nt(t,e))throw new l("Property or value was not provided");let i=vt(t,this.setup.prefix);document.documentElement.style.setProperty(i,e)}onInteractionError(t){console.error("An error has been captured from interactions"),console.error(t)}}ni=new WeakMap;var ai,li=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ci=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ui=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class di{constructor(t){ai.set(this,void 0),ci(this,ai,t)}performAction(t,e,i,s){return li(this,void 0,void 0,(function*(){return new Promise(n=>{ui(this,ai).mutate(()=>{e.add(t),t.classList.add(p),setTimeout(()=>{ui(this,ai).mutate(()=>{e.remove(t),t.classList.remove(p),s&&s(),n(!0)},null)},i)},null)})}))}performActions(t,e,i,s){return li(this,void 0,void 0,(function*(){return new Promise(n=>{ui(this,ai).mutate(()=>{e.forEach(e=>e.add(t)),t.classList.add(p),setTimeout(()=>{ui(this,ai).mutate(()=>{e.forEach(e=>e.remove(t)),t.classList.remove(p),s&&s(),n(!0)},null)},i)},null)})}))}performSwitchAction(t,e,i,s,n,r){return li(this,void 0,void 0,(function*(){return new Promise(o=>{ui(this,ai).mutate(()=>{i.forEach(e=>e.add(t)),t.classList.add(p),J(e)&&(s.forEach(t=>t.add(e)),e.classList.add(p)),setTimeout(()=>{ui(this,ai).mutate(()=>{i.forEach(e=>e.remove(t)),t.classList.remove(p),J(e)&&(s.forEach(t=>t.remove(e)),e.classList.remove(p)),n(),o(!0)},null)},r)},null)})}))}}ai=new WeakMap;var pi,gi,vi,fi,mi,wi,ki=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},yi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class bi{constructor(t){pi.set(this,void 0),ki(this,pi,t)}add(t,e){nt(t,yi(this,pi))&&!t.classList.contains(yi(this,pi))&&t.classList.add(yi(this,pi))}remove(t,e){nt(t,yi(this,pi))&&t.classList.contains(yi(this,pi))&&t.classList.remove(yi(this,pi))}toggle(t,e){nt(t,yi(this,pi))&&(t.classList.contains(yi(this,pi))?t.classList.remove(yi(this,pi)):t.classList.add(yi(this,pi)))}}pi=new WeakMap;class Mi{constructor(t){gi.set(this,void 0),ki(this,gi,t)}add(t,e){if(e)switch(yi(this,gi)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){if(e)switch(yi(this,gi)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){if(e)switch(yi(this,gi)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}gi=new WeakMap;class Ci{constructor(t){var e,i;vi.set(this,void 0),fi.set(this,void 0),e=this,i=this,[{set value(t){ki(e,vi,t)}}.value,{set value(t){ki(i,fi,t)}}.value]=Mt(t)}add(t,e){nt(t,yi(this,vi),yi(this,fi))&&t.setAttribute(yi(this,vi),yi(this,fi))}remove(t,e){nt(t,yi(this,vi),yi(this,fi))&&t.hasAttribute(yi(this,vi))&&t.removeAttribute(yi(this,vi))}toggle(t,e){nt(t,yi(this,vi),yi(this,fi))&&(t.hasAttribute(yi(this,vi))?t.removeAttribute(yi(this,vi)):t.setAttribute(yi(this,vi),yi(this,fi)))}}vi=new WeakMap,fi=new WeakMap;class Ai{constructor(t){var e,i;mi.set(this,void 0),wi.set(this,void 0),e=this,i=this,[{set value(t){ki(e,mi,t)}}.value,{set value(t){ki(i,wi,t)}}.value]=Mt(t)}add(t,e){if(!nt(t,yi(this,mi),yi(this,wi)))return;let i=t;i.style&&!i.style[yi(this,mi)]&&(i.style[yi(this,mi)]=yi(this,wi))}remove(t,e){if(!nt(t,yi(this,mi),yi(this,wi)))return;let i=t;i.style&&i.style[yi(this,mi)]&&(i.style[yi(this,mi)]="")}toggle(t,e){if(!nt(t,yi(this,mi),yi(this,wi)))return;let i=t;i.style&&(i.style[yi(this,mi)]?delete i.style[yi(this,mi)]:i.style[yi(this,mi)]=yi(this,wi))}}mi=new WeakMap,wi=new WeakMap;class Ei{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class Wi{static get(t){if(!J(t))return new Ei;switch(t[0]){case".":return new bi(t.substring(1));case"~":return new Mi(t.substring(1));case"&":return new Ci(t.substring(1));case"^":return new Ai(t.substring(1));default:return new bi(t)}}}class Ti{static get(t){if(!J(t))return[];return t.split(",").map(t=>Wi.get(t.trim()))}}var xi,Si,Li,Pi,Ii,Di,Bi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Oi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ni{constructor(t,e){xi.set(this,void 0),Si.set(this,void 0),Li.set(this,void 0),Pi.set(this,void 0),Ii.set(this,void 0),Di.set(this,void 0),Oi(this,xi,t),Oi(this,Si,!1),Oi(this,Li,Wt.get("ElementManager")),Oi(this,Ii,e),Oi(this,Pi,Date.now()),Oi(this,Di,new di(e.interactions))}toggleClass(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{let i=e.classList;Hi(this,Ii).interactions.fetch(()=>{i.contains(t)?Hi(this,Ii).interactions.mutate(i.remove,i,t):Hi(this,Ii).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{let i=e.classList;Hi(this,Ii).interactions.fetch(()=>{i.contains(t)||Hi(this,Ii).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{let i=e.classList;Hi(this,Ii).interactions.fetch(()=>{i.contains(t)&&Hi(this,Ii).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return J(t)?Hi(this,xi).reduce((e,i)=>{let s=i.getAttribute(t);return null!=s&&e.push(s),e},[]):[]}setAttribute(t,e){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(i=>{Hi(this,Ii).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{Hi(this,Ii).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(i=>{Hi(this,Ii).interactions.fetch(()=>{i.hasAttribute(t)?Hi(this,Ii).interactions.mutate(i.removeAttribute,i,t):Hi(this,Ii).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return Bi(this,void 0,void 0,(function*(){return!!J(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return Bi(this,void 0,void 0,(function*(){return!(!J(t)||!J(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return Bi(this,void 0,void 0,(function*(){return Hi(this,Si)&&Hi(this,Li).error("Element is locked",e),this.lock(),Hi(this,xi).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}animate(t,e){return Bi(this,void 0,void 0,(function*(){if(!J(t))return!1;const i=null!=e?e:Hi(this,Ii).setup.animationTime;return this.call(e=>{this.change(()=>{e.classList.add(t),e.classList.add(p),setTimeout(()=>{this.change(()=>{e.classList.remove(t),e.classList.remove(p)})},i)})})}))}open(t,e,i){return Bi(this,void 0,void 0,(function*(){if(!nt(t,e))return!1;const s=null!=i?i:Hi(this,Ii).setup.animationTime,n=new bi(e);return this.call(e=>{Hi(this,Di).performAction(e,n,null!=s?s:0).then(()=>{e.classList.add(t)})})}))}close(t,e,i){return Bi(this,void 0,void 0,(function*(){if(!nt(t,e))return!1;const s=null!=i?i:Hi(this,Ii).setup.animationTime,n=new bi(e);return this.call(e=>{Hi(this,Di).performAction(e,n,null!=s?s:0).then(()=>{e.classList.remove(t)})})}))}emit(t,...e){J(t)?this.call(i=>{let s=i.$cuid;J(s)&&(Hi(this,Li).debug(`Emitting event ${t} to ${s}`),Hi(this,Ii).bus.emit(t,s,...e))},"emit"):Hi(this,Li).warning("Not enough data to emit event","emit")}on(t,e){let i=[];return nt(t,e)?(this.call(s=>{let n=s;if(J(n)){let s=Hi(this,Ii).bus.on(t,e,n);null!=s&&i.push(s)}},"on"),i):(Hi(this,Li).error("Incorrect arguments","on"),i)}detach(t,e){nt(t,e)||Hi(this,Li).error("Incorrect arguments","detach"),this.call(i=>{let s=i;J(s)&&Hi(this,Ii).bus.detach(t,e,s)},"detach")}read(t,...e){Hi(this,Ii).interactions.fetch(t,this,...e)}change(t,...e){Hi(this,Ii).interactions.mutate(t,this,...e)}elements(){return Hi(this,xi)}count(){return Hi(this,xi).length}lock(){Oi(this,Si,!0)}unlock(){Oi(this,Si,!1)}isLocked(){return Hi(this,Si)}refresh(){return Date.now()-Hi(this,Pi)<36e4}}xi=new WeakMap,Si=new WeakMap,Li=new WeakMap,Pi=new WeakMap,Ii=new WeakMap,Di=new WeakMap;var $i,qi,_i,Ri,zi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ui=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fi{constructor(t){$i.set(this,void 0),qi.set(this,void 0),_i.set(this,void 0),Ri.set(this,void 0),zi(this,Ri,t),zi(this,qi,[]),zi(this,_i,void 0),zi(this,$i,void 0)}setId(t){return zi(this,$i,t),this}setClasses(...t){return zi(this,qi,t),this}setAttributes(t){return zi(this,_i,t),this}build(t){let e=document.createElement(Ui(this,Ri));return J(Ui(this,$i))&&(e.id=Ui(this,$i)),J(Ui(this,qi))&&e.classList.add(...Ui(this,qi)),J(Ui(this,_i))&&yt(Ui(this,_i),(t,i)=>{e.setAttribute(t,i)}),J(t)&&(e.innerHTML=t),e}}$i=new WeakMap,qi=new WeakMap,_i=new WeakMap,Ri=new WeakMap;var Vi,ji,Xi,Yi,Ki,Zi,Gi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ji=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Qi{constructor(t,e,i){Vi.set(this,void 0),ji.set(this,void 0),Xi.set(this,void 0),Yi.set(this,void 0),Ki.set(this,void 0),Zi.set(this,void 0),Gi(this,Yi,t),Gi(this,Vi,Gi(this,Xi,Gi(this,ji,void 0))),Gi(this,Ki,null!=i?i:""),Gi(this,Zi,e)}createHeader(t,e,i){J(e)||(e=[]),J(i)||(i=[]);let s=new Fi("div");s.setClasses(Ji(this,Yi)+"-dialog-header",...e),Gi(this,Vi,s.build());let n=new Fi("span").setClasses(this.getPrefixedString("-dialog-title")).build(t);Ji(this,Vi).appendChild(n),this.appendChildrens(Ji(this,Vi),...i)}createFooter(t,e){J(t)||(t=[]),J(e)||(e=[]),Gi(this,Xi,new Fi("div").setClasses(this.getPrefixedString("-dialog-footer"),...t).build()),this.appendChildrens(Ji(this,Xi),...e)}createBody(t,e){J(t)||(t=[]),J(e)||(e=[]),Gi(this,ji,new Fi("div").setClasses(this.getPrefixedString("-dialog-body"),...t).build()),this.appendChildrens(Ji(this,ji),...e)}build(t){let e=[this.getPrefixedString("-dialog")];Ji(this,Zi)&&e.push(this.getPrefixedString("-reverse-auto"));let i=new Fi("div").setId(t).setClasses(...e).setAttributes({[this.getPrefixedString("-dialog")]:Ji(this,Ki)}).build(),s=new Fi("div").setClasses(this.getPrefixedString("-dialog-container")).build();return Ji(this,Vi)&&s.appendChild(Ji(this,Vi)),Ji(this,ji)&&s.appendChild(Ji(this,ji)),Ji(this,Xi)&&s.appendChild(Ji(this,Xi)),i.appendChild(s),i}appendChildrens(t,...e){J(e)&&e.forEach(e=>t.appendChild(e))}getPrefixedString(t){return Ji(this,Yi)+t}}Vi=new WeakMap,ji=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,Ki=new WeakMap,Zi=new WeakMap;var ts,es,is,ss,ns,rs,os,hs,as=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ls=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class cs{constructor(t,e,i){ts.set(this,void 0),es.set(this,void 0),is.set(this,void 0),ss.set(this,void 0),ns.set(this,void 0),as(this,ts,{yes:i.onYes,no:i.onNo,cancel:i.onCancel,ok:i.onOk}),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,as(this,es,t),as(this,is,e),this.reverse=!1,as(this,ns,null),this.closeStr=ls(this,es).setup.prefix+"-close",this.iconStr=ls(this,es).setup.prefix+"-icon",as(this,ss,void 0)}getId(){return ls(this,is)}show(t){let e=document.getElementById(ls(this,is));J(e)?this.updateElement(e):(e=this.createElement(),t.appendChild(e)),setTimeout(()=>{as(this,ss,new Ni([e],ls(this,es)));let t=ls(this,ss).on("closed",this.onClose.bind(this));as(this,ns,t.length>0?t[0]:null),ls(this,ss).emit("open")},100)}updateElement(t){let e=t.querySelector(`.${this.prefix}-dialog-title`),i=t.querySelector(`.${this.prefix}-dialog-body>p`);ls(this,es).interactions.mutate(()=>{e&&(e.innerHTML=this.title),i&&(i.innerHTML=this.content)},null)}onClose(t){try{if(J(t)&&t.state&&ls(this,ts)&&J(ls(this,ts)[t.state])){let e=ls(this,ts)[t.state];e&&e()}}finally{null!=ls(this,ns)&&(ls(this,ss)&&ls(this,ss).detach("closed",ls(this,ns)),as(this,ns,null)),as(this,ss,void 0)}}}ts=new WeakMap,es=new WeakMap,is=new WeakMap,ss=new WeakMap,ns=new WeakMap;class us extends cs{constructor(t,e,i){var s;super(t,e,i),rs.set(this,void 0),as(this,rs,e),this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new Qi(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Fi("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Fi("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Fi("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new Fi("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(ls(this,rs))}}rs=new WeakMap;class ds extends cs{constructor(t,e,i){var s;super(t,e,i),os.set(this,void 0),as(this,os,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new Qi(this.prefix,this.reverse);return t.createHeader(this.title,[]),t.createBody([],[new Fi("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Fi("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(ls(this,os))}}os=new WeakMap;class ps extends cs{constructor(t,e,i){var s;super(t,e,i),hs.set(this,void 0),as(this,hs,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new Qi(this.prefix,this.reverse);return t.createHeader(this.title,[],[new Fi("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new Fi("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new Fi("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new Fi("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),t.build(ls(this,hs))}}hs=new WeakMap;var gs,vs,fs,ms,ws,ks,ys=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},bs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ms{constructor(t){gs.set(this,void 0),vs.set(this,void 0),fs.set(this,void 0),ms.set(this,void 0),ws.set(this,void 0),ks.set(this,void 0),ys(this,fs,!1),ys(this,gs,null!=t?t:document.body),ys(this,ms,!1),ys(this,ws,!1),ys(this,vs,void 0),ys(this,ks,void 0),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this)}setCallback(t){ys(this,vs,t)}setTarget(t){ys(this,ks,t)}isInProgress(){return bs(this,fs)}preventDefault(t){ys(this,ws,t)}attach(){bs(this,ms)||(bs(this,gs).addEventListener("mousedown",this.onMouseDown,{passive:!1}),bs(this,gs).addEventListener("mouseup",this.onMouseUp,{passive:!1}),bs(this,gs).addEventListener("mousemove",this.onMouseMove,{passive:!1}),bs(this,gs).addEventListener("touchstart",this.onTouchStart,{passive:!1}),bs(this,gs).addEventListener("touchend",this.onTouchEnd,{passive:!1}),bs(this,gs).addEventListener("touchmove",this.onTouchMove,{passive:!1}),ys(this,ms,!0))}detach(){bs(this,ms)&&(bs(this,gs).removeEventListener("mousedown",this.onMouseDown,{passive:!1}),bs(this,gs).removeEventListener("mouseup",this.onMouseUp,{passive:!1}),bs(this,gs).removeEventListener("mousemove",this.onMouseMove,{passive:!1}),bs(this,gs).removeEventListener("touchstart",this.onTouchStart,{passive:!1}),bs(this,gs).removeEventListener("touchend",this.onTouchEnd,{passive:!1}),bs(this,gs).removeEventListener("touchmove",this.onTouchMove,{passive:!1}),ys(this,ms,!1))}isAttached(){return bs(this,ms)}onMouseDown(t){bs(this,fs)||bs(this,ks)&&!bs(this,ks).contains(t.target)||(ys(this,fs,!0),this.publishMouseEvent("down",t))}onMouseUp(t){bs(this,fs)&&(ys(this,fs,!1),this.publishMouseEvent("up",t))}onMouseMove(t){bs(this,fs)&&this.publishMouseEvent("move",t)}onTouchStart(t){bs(this,fs)||bs(this,ks)&&!bs(this,ks).contains(t.target)||(ys(this,fs,!0),this.publishTouchEvent("down",t))}onTouchEnd(t){bs(this,fs)&&(ys(this,fs,!1),this.publishTouchEvent("up",t))}onTouchMove(t){bs(this,fs)&&this.publishTouchEvent("move",t)}publishMouseEvent(t,e){bs(this,ws)&&e.cancelable&&e.preventDefault(),J(bs(this,vs))&&bs(this,vs).call(this,{type:t,x:e.clientX,y:e.clientY,moveX:e.movementX,moveY:e.movementY,target:e.target,event:e})}publishTouchEvent(t,e){if(bs(this,ws)&&e.cancelable&&e.preventDefault(),!J(bs(this,vs)))return;let i=null;e.touches.length>0?i=e.touches[0]:e.changedTouches.length>0&&(i=e.changedTouches[0]),bs(this,vs).call(this,{event:e,type:t,target:e.target,x:J(i)?i.clientX:-1,y:J(i)?i.clientY:-1,moveX:-1,moveY:-1})}}gs=new WeakMap,vs=new WeakMap,fs=new WeakMap,ms=new WeakMap,ws=new WeakMap,ks=new WeakMap;var Cs,As,Es,Ws,Ts,xs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ss=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ls{constructor(t){Cs.set(this,void 0),As.set(this,void 0),Es.set(this,void 0),Ws.set(this,void 0),Ts.set(this,void 0),xs(this,Cs,t),xs(this,As,new Ms),Ss(this,As).setCallback(this.onMove.bind(this)),xs(this,Ts,void 0),xs(this,Es,!1),xs(this,Ws,null)}attach(){Ss(this,As).isAttached()||(Ss(this,As).attach(),xs(this,Ws,Ss(this,Cs).on(j,this.onMoveLock.bind(this))))}detach(){Ss(this,As).isAttached()&&(Ss(this,As).detach(),null!=Ss(this,Ws)&&Ss(this,Cs).detach(j,Ss(this,Ws)))}isAttached(){return Ss(this,As).isAttached()}onMove(t){if(!Ss(this,Es))switch(t.type){case"down":xs(this,Ts,t);break;case"move":Ss(this,Ts)&&(Ss(this,Cs).emit(V,null,Ss(this,Ts)),xs(this,Ts,void 0)),Ss(this,Cs).emit(V,null,t);break;case"up":if(Ss(this,Ts))return void xs(this,Ts,void 0);Ss(this,Cs).emit(V,null,t)}}onMoveLock(t){xs(this,Es,t)}}Cs=new WeakMap,As=new WeakMap,Es=new WeakMap,Ws=new WeakMap,Ts=new WeakMap;var Ps,Is,Ds,Bs,Os,Hs,Ns,$s,qs=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},_s=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class zs{constructor(t,e,i){Ps.set(this,void 0),Is.set(this,void 0),Ds.set(this,void 0),Bs.set(this,void 0),Os.set(this,void 0),Hs.set(this,void 0),Ns.set(this,void 0),$s.set(this,void 0),_s(this,Ps,t),_s(this,Is,`.${e}-toast`),_s(this,Ds,e+"-toast"),_s(this,Bs,e+"-active"),_s(this,Os,i),_s(this,Hs,!1),_s(this,Ns,e+"-toast-animation-in"),_s(this,$s,e+"-toast-animation-out")}show(t){return qs(this,void 0,void 0,(function*(){if(Rs(this,Hs))return!1;_s(this,Hs,!0);let e=document.querySelector(Rs(this,Is));return J(e)||(e=document.createElement("div"),e.classList.add(Rs(this,Ds)),document.body.appendChild(e),yield tt(10)),Rs(this,Ps).mutate(()=>{e.textContent=t,e.classList.add(p),e.classList.add(Rs(this,Ns))},this),yield tt(Rs(this,Os)),Rs(this,Ps).mutate(()=>{e.classList.remove(p),e.classList.remove(Rs(this,Ns)),e.classList.add(Rs(this,Bs))},this),yield tt(3e3),Rs(this,Ps).mutate(()=>{e.classList.add(p),e.classList.add(Rs(this,$s))},this),setTimeout(()=>{Rs(this,Ps).mutate(()=>{e.classList.remove(p),e.classList.remove(Rs(this,$s)),e.classList.remove(Rs(this,Bs))},this),_s(this,Hs,!1)},Rs(this,Os)),!0}))}}Ps=new WeakMap,Is=new WeakMap,Ds=new WeakMap,Bs=new WeakMap,Os=new WeakMap,Hs=new WeakMap,Ns=new WeakMap,$s=new WeakMap;var Us,Fs,Vs,js,Xs,Ys=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ks=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gs{constructor(t){Us.set(this,void 0),Fs.set(this,void 0),Vs.set(this,void 0),js.set(this,void 0),Xs.set(this,void 0),Ks(this,Xs,t),Ks(this,Fs,Wt.get("CollectionManager")),Ks(this,Us,[]),Ks(this,Vs,!1),Ks(this,js,"")}setElements(t){Ks(this,Us,t)}setToggle(t){Ks(this,js,t)}addAnimationClass(t,e,i,s){e.classList.add(p),t.classList.add(s),e.classList.add(i)}setFinalClasses(t,e,i,s){e.classList.remove(p),t.classList.remove(s),e.classList.remove(i),t.classList.remove(Zs(this,js)),e.classList.add(Zs(this,js))}verifyIndex(t,e,i){return t>=0&&t!==e&&t<i}setCurrent(t,e){return Ys(this,void 0,void 0,(function*(){return this.lock(),Zs(this,Fs).debug(`Switching index from: ${e} to ${t}`),e>-1&&Zs(this,Us)[e].classList.remove(Zs(this,js)),Zs(this,Us)[t].classList.add(Zs(this,js)),this.unlock(),!0}))}setCurrentWithAnimation(t,e,i,s,n){return Ys(this,void 0,void 0,(function*(){this.lock(),Zs(this,Fs).debug(`Switching index from: ${n} to ${t}`);const r=Zs(this,Us)[n],o=Zs(this,Us)[t];return Zs(this,Xs).mutate(this.addAnimationClass,this,r,o,e,i),setTimeout(()=>{Zs(this,Xs).mutate(this.setFinalClasses,this,r,o,e,i),this.unlock()},s),!0}))}getCurrentIndex(){if(!J(Zs(this,js)))return-1;let t=this.count();for(let e=0;e<t;e++)if(Zs(this,Us)[e].classList.contains(Zs(this,js)))return e;return-1}elements(){return Zs(this,Us)}check(){return Zs(this,Vs)?(Zs(this,Fs).warning("Object locked. Operation in progress","Check"),!1):J(Zs(this,js))?!(this.count()<=0)||(Zs(this,Fs).warning("Elements list is empty","Check"),!1):(Zs(this,Fs).warning("Toggle is not set. Call setToggleClass","Check"),!1)}count(){return Zs(this,Us)?Zs(this,Us).length:-1}lock(){Ks(this,Vs,!0)}unlock(){Ks(this,Vs,!1)}}Us=new WeakMap,Fs=new WeakMap,Vs=new WeakMap,js=new WeakMap,Xs=new WeakMap;var Js,Qs,tn,en=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},sn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},nn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rn{constructor(t,e){Js.set(this,void 0),Qs.set(this,void 0),tn.set(this,void 0),sn(this,Js,Wt.get("CollectionManager")),sn(this,tn,new Gs(e)),nn(this,tn).setElements(t),sn(this,Qs,Date.now())}setToggle(t){nn(this,tn).setToggle(t)}setElements(t){nn(this,tn).setElements(t)}click(t){nn(this,tn).elements().forEach((e,i)=>{e.addEventListener("click",()=>{this.set(i).then(()=>{t&&t(e,i)})})})}next(){return en(this,void 0,void 0,(function*(){if(!nn(this,tn).check())return!1;let t=nn(this,tn).getCurrentIndex()+1;return this.set(t>=this.length()?0:t)}))}previous(){return en(this,void 0,void 0,(function*(){if(!nn(this,tn).check())return!1;let t=nn(this,tn).getCurrentIndex()-1;return this.set(t<0?this.length()-1:t)}))}set(t){return en(this,void 0,void 0,(function*(){let e=nn(this,tn).getCurrentIndex();return!(!nn(this,tn).check()||!nn(this,tn).verifyIndex(t,e,this.length()))&&nn(this,tn).setCurrent(t,e)}))}setWithAnimation(t,e,i,s){return en(this,void 0,void 0,(function*(){let n=nn(this,tn).getCurrentIndex();return!(!nn(this,tn).check()||!nn(this,tn).verifyIndex(t,n,this.length()))&&nn(this,tn).setCurrentWithAnimation(t,e,i,s,n)}))}getCurrentIndex(){return nn(this,tn).getCurrentIndex()}length(){return nn(this,tn).count()}refresh(){return this.length()>0&&Date.now()-nn(this,Qs)>36e4}}Js=new WeakMap,Qs=new WeakMap,tn=new WeakMap;var on,hn,an,ln=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},cn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},un=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dn{constructor(t){on.set(this,void 0),hn.set(this,void 0),an.set(this,void 0),cn(this,on,null!=t?t:[]),cn(this,an,Wt.get("CuiPluginManager")),cn(this,hn,[])}init(t){un(this,an).debug("Plugins initialization started: "+un(this,on).length),cn(this,hn,un(this,on).filter(t=>J(t.mutation))),un(this,on).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),un(this,an).debug("Plugins have been initialized")}get(t){if(J(t))return un(this,on).find(e=>e.name===t)}onMutation(t){return ln(this,void 0,void 0,(function*(){let e=[];return un(this,hn).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}on=new WeakMap,hn=new WeakMap,an=new WeakMap;var pn,gn,vn,fn,mn,wn,kn,yn,bn,Mn=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Cn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},An=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class En{constructor(t,e,i){pn.set(this,void 0),gn.set(this,void 0),vn.set(this,void 0),fn.set(this,void 0),mn.set(this,void 0),wn.set(this,void 0),kn.set(this,void 0),yn.set(this,void 0),bn.set(this,void 0),E.prefix=t.prefix,E.logLevel=t.logLevel,Cn(this,mn,new dn(e)),Cn(this,wn,null!=i?i:[]),Cn(this,fn,new hi(t)),Cn(this,pn,Wt.get("CuiInstance")),Cn(this,kn,t.root),Cn(this,yn,new Ls(An(this,fn).bus)),Cn(this,gn,void 0),Cn(this,vn,void 0),Cn(this,bn,[])}init(){var t;if(An(this,pn).debug("Instance started","init"),!J(window.MutationObserver))throw new o("Mutation observer does not exists");Cn(this,vn,new zs(An(this,fn).interactions,An(this,fn).setup.prefix,null!==(t=An(this,fn).setup.animationTimeLong)&&void 0!==t?t:0)),Cn(this,bn,An(this,wn).map(t=>t.attribute));const e=J(An(this,bn))?An(this,kn).querySelectorAll(st(An(this,bn))):null;if(J(e)){An(this,pn).debug(`Initiating ${e.length} elements`);try{e.forEach(t=>{mt(t,An(this,wn),An(this,bn),An(this,fn))})}catch(t){An(this,pn).exception(t)}}return An(this,pn).debug("Init plugins","init"),An(this,mn).init(An(this,fn)),nt(An(this,wn),An(this,bn))&&(An(this,pn).debug("Init mutation observer","init"),Cn(this,gn,new Rt(An(this,kn),An(this,fn))),An(this,gn).setComponents(An(this,wn)).setAttributes(An(this,bn)),An(this,gn).setPlugins(An(this,mn)),An(this,gn).start()),An(this,pn).debug("Setting CSS globals","init"),An(this,fn).interactions.mutate(()=>{An(this,fn).setProperty(A.animationTimeLong,An(this,fn).setup.animationTimeLong+"ms"),An(this,fn).setProperty(A.animationTime,An(this,fn).setup.animationTime+"ms"),An(this,fn).setProperty(A.animationTimeShort,An(this,fn).setup.animationTimeShort+"ms")},null),An(this,yn).attach(),An(this,fn).bus.emit(W,null),this}finish(){An(this,gn)&&An(this,gn).stop(),An(this,yn).detach(),An(this,fn).bus.emit(T,null)}get(t){const e=this.all(t);if(!e)return;return new Ni(e,An(this,fn))}collection(t){const e=this.all(t);if(!J(e))return;return new rn(e,An(this,fn).interactions)}toast(t){return Mn(this,void 0,void 0,(function*(){return!!nt(t,An(this,vn))&&An(this,vn).show(t)}))}select(t){return document.querySelector(t)}all(t){const e=document.querySelectorAll(t);if(J(e))return[...e]}getUtils(){return An(this,fn)}on(t,e,i){nt(t,e)||An(this,pn).error("Incorrect arguments","on"),An(this,fn).bus.on(t,e,i)}detach(t,e){nt(t,e)||An(this,pn).error("Incorrect arguments","detach"),An(this,fn).bus.detach(t,e)}detachAll(t){J(t)||An(this,pn).error("Incorrect arguments","detachAll"),An(this,fn).bus.detachAll(t)}emit(t,e,...i){if(!nt(t,e))return void An(this,pn).warning("Not enough data to emit event","emit");let s=("string"==typeof e?document.querySelector(e):e).$cuid;J(s)?An(this,fn).bus.emit(t,s,...i):An(this,pn).warning("Element is not a cUI element","emit")}alert(t,e,i){let s=class{static get(t,e,i,s){return"Info"===e?new ds(s,t,i):"YesNoCancel"===e?new ps(s,t,i):"OkCancel"===e?new us(s,t,i):void 0}}.get(t,e,i,An(this,fn));s?s.show(An(this,kn)):An(this,pn).error("Possibly incorrect alert type")}getPlugin(t){return An(this,mn).get(t)}createCuiElement(t,e,i){return J(e)&&An(this,bn).includes(e)?!!function(t,e,i){if(!nt(e,i,t))return!1;if(t.hasAttribute(e))return!1;let s=[];return yt(i,(t,e)=>{s.push(`${t}: ${e}`)}),t.setAttribute(e,s.join("; ")),!0}(t,e,i)||(An(this,pn).error("Element cannot be created: Missing data"),!1):(An(this,pn).error("Element cannot be created: Unknown attribute"),!1)}}pn=new WeakMap,gn=new WeakMap,vn=new WeakMap,fn=new WeakMap,mn=new WeakMap,wn=new WeakMap,kn=new WeakMap,yn=new WeakMap,bn=new WeakMap;const Wn={slide:{current:{left:{transform:{translateX:{from:0,to:-100,unit:"%"}}},right:{transform:{translateX:{from:0,to:100,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}},fade:{current:{left:{opacity:{from:1,to:0}},right:{opacity:{from:1,to:0}}},previous:{left:{opacity:{from:0,to:1}},right:{opacity:{from:0,to:1}}}},push:{current:{left:{transform:{translateX:{from:0,to:-10,unit:"%"}}},right:{transform:{translateX:{from:0,to:10,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}}};var Tn,xn=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Sn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ln=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Pn{constructor(){Tn.set(this,void 0),Sn(this,Tn,window)}init(t){var e,i;return xn(this,void 0,void 0,(function*(){let s=Object.assign(Object.assign({},new At),t.setup);const n=s.app,r={result:!1};if(J(Ln(this,Tn)[n]))return r.message="Instance is already initialized",r;if(J(t.icons))for(let e in t.icons)f[e]=t.icons[e];if(J(t.swipeAnimations))for(let e in t.swipeAnimations)Wn[e]=t.swipeAnimations[e];try{Ln(this,Tn)[n]=new En(s,null!==(e=t.plugins)&&void 0!==e?e:[],null!==(i=t.components)&&void 0!==i?i:[]),Ln(this,Tn)[n].init()}catch(t){return console.error(t),r.message="An error occured during initialization",r}return r.result=!0,r}))}}Tn=new WeakMap;class In{static setLabel(t,e){t.hasAttribute("aria-label")||t.setAttribute("aria-label",e)}static setAria(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}static removeAria(t,e){t.hasAttribute(e)&&t.removeAttribute(e)}}var Dn,Bn,On,Hn,Nn,$n,qn,_n,Rn,zn=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Un=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vn{constructor(t){Dn.set(this,void 0),Un(this,Dn,t)}hasClass(t,e){return!(!t||!e.classList.contains(t))}setClass(t,e){this.setClasses([t],e)}setClasses(t,e){e&&e.classList.add(...t)}setClassesAs(t,...e){Fn(this,Dn).mutate(this.setClasses,this,e,t)}removeClass(t,e){this.removeClasses([t],e)}removeClasses(t,e){e&&e.classList.remove(...t)}removeClassesAs(t,...e){Fn(this,Dn).mutate(this.removeClasses,this,e,t)}removeAttribute(t,e){e&&e.hasAttribute(t)&&e.removeAttribute(t)}setStyle(t,e,i){t&&t.style&&J(i)&&(t.style[e]=i)}}Dn=new WeakMap;Bn=new WeakMap;class jn extends class{constructor(t,e,i){var s;Bn.set(this,void 0),this._log=Wt.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid,this.isLocked=!1,this._log.setId(this.cuid),this.activeClassName=(null!=(s=i.setup.prefix)?s:"")+"-active",this.helper=new Vn(i.interactions),Un(this,Bn,[]),this.componentName=t}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,...e){Fn(this,Bn).includes(t)||Fn(this,Bn).push(t),this.utils.bus.emit(t,this.cuid,...e)}onEvent(t,e){return this.utils.bus.on(t,e,this.element)}detachEvent(t,e){null!=e&&(this.utils.bus.detach(t,e),e="")}getId(){return this.cuid}checkLockAndWarn(t){return!!this.isLocked&&(this._log.warning("Component is locked",t),!0)}isActive(){return this.element.classList.contains(this.activeClassName)}detachEmiitedEvents(){Fn(this,Bn).forEach(t=>{this.utils.bus.detachByCuid(t,this.cuid),this._log.debug("Detaching event: "+t+" on component delete")})}registerInDebug(){this.utils.development.registerElement(this.element,this.cuid,this.componentName)}removeFromDebug(){this.utils.development.unregisterElement(this.cuid,this.componentName)}setDebugProperty(t,e){this.utils.development.setProperty(this.cuid,this.componentName,t,e)}logInfo(t,e){this._log.debug(t,e),this.utils.development.pushState(this.cuid,this.componentName,"info",t,e)}logWarning(t,e){this._log.warning(t,e),this.utils.development.pushState(this.cuid,this.componentName,"warning",t,e)}pushDebugState(t,e,i){this.utils.development.pushState(this.cuid,this.componentName,t,e,i)}logError(t,e,i){this._log.error(t,e),i&&this._log.exception(i,e),this.utils.development.pushState(this.cuid,this.componentName,"error",t,e)}}{constructor(t,e,i,s,n){super(t,e,n),On.set(this,void 0),this.args=s,this.actionsHelper=new di(n.interactions),this.prevArgs=void 0,this.isInitialized=!1,Un(this,On,i)}handle(t){this.logInfo("Init","handle"),this.isInitialized?this.logWarning("Trying to initialize component again","handle"):(this.args.parse(t),this.element.classList.contains(Fn(this,On))||this.element.classList.add(Fn(this,On)),this.registerInDebug(),this.onHandle(),this.isInitialized=!0)}refresh(t){var e;(this.logInfo("Update","refresh"),this.isInitialized)?(this.prevArgs=J(e=this.args)?Object.assign({},e):null,this.args.parse(t),this.pushDebugState("info","Component update","refresh"),this.onRefresh()):this.logError("Cannot update not initialized component","refresh")}destroy(){this.logInfo("Destroy","destroy"),this.onRemove(),this.detachEmiitedEvents(),this.removeFromDebug(),this.isInitialized=!1}}On=new WeakMap;class Xn extends jn{constructor(t,e,i,s,n){super(t,e,i,s,n)}onHandle(){this.onInit()}onRefresh(){this.onUpdate()}onRemove(){this.onDestroy()}performAction(t,e,i,s){return zn(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}}class Yn extends jn{constructor(t,e,i,s,n){super(t,e,i,s,n),Hn.set(this,void 0),Nn.set(this,void 0),$n.set(this,void 0),qn.set(this,void 0),_n.set(this,void 0),Un(this,Hn,null),Un(this,Nn,null),Un(this,$n,null),Un(this,_n,[]),Un(this,qn,[])}onHandle(){Un(this,Hn,this.onEvent(S,this.openFromEvent.bind(this))),Un(this,Nn,this.onEvent(P,this.closeFromEvent.bind(this))),Un(this,qn,Ti.get(this.args.openAct)),Un(this,_n,Ti.get(this.args.closeAct)),this.onInit()}onRefresh(){this.prevArgs&&this.args.openAct===this.prevArgs.openAct||Un(this,qn,Ti.get(this.args.openAct)),this.prevArgs&&this.args.closeAct===this.prevArgs.closeAct||Un(this,_n,Ti.get(this.args.closeAct)),this.onUpdate()}onRemove(){this.detachEvent(P,Fn(this,Nn)),this.detachEvent(S,Fn(this,Hn)),this.onDestroy()}open(t){return zn(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?(this.logWarning("Component is already opened"),!1):((this.args.escClose||J(this.args.keyClose))&&Un(this,$n,this.onEvent(_,this.onKeyClose.bind(this))),!!this.onBeforeOpen()&&(this.isLocked=!0,this.performAction(Fn(this,qn),this.args.timeout,this.onActionFinish.bind(this,this.onAfterOpen.bind(this),L,t),()=>{this.helper.setClass(this.activeClassName,this.element),In.setAria(this.element,"aria-expanded","true")}))))}))}close(t){return zn(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("close")&&(this.isActive()?(this.detachEvent(_,Fn(this,$n)),!!this.onBeforeClose()&&(this.isLocked=!0,this.performAction(Fn(this,_n),this.args.timeout,this.onActionFinish.bind(this,this.onAfterClose.bind(this),I,t),()=>{this.helper.removeClass(this.activeClassName,this.element),In.setAria(this.element,"aria-expanded","false")}))):(this.logWarning("Component is already closed"),!1))}))}performAction(t,e,i,s){return zn(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}openFromEvent(t){this.open(t)}closeFromEvent(t){this.close(t)}onActionFinish(t,e,i){t(),this.emitEvent(e,{timestamp:Date.now(),state:i}),this.isLocked=!1}onKeyClose(t){return zn(this,void 0,void 0,(function*(){(this.args.escClose&&"Escape"===t.event.key||J(this.args.keyClose)&&t.event.key===this.args.keyClose)&&(yield this.close("Closed by key"))}))}}Hn=new WeakMap,Nn=new WeakMap,$n=new WeakMap,qn=new WeakMap,_n=new WeakMap;class Kn extends jn{constructor(t,e,i,s,n){super(t,e,i,s,n),Rn.set(this,void 0),Un(this,Rn,new zt(e)),Fn(this,Rn).onMutation(this.mutation.bind(this))}onHandle(){this.onInit(),Fn(this,Rn).observe()}onRefresh(){Fn(this,Rn).unobserve(),this.onUpdate(),Fn(this,Rn).observe()}onRemove(){Fn(this,Rn).unobserve(),this.onDestroy()}mutation(t){this._log.debug("Element mutation","mutation"),this.onMutation(t.reduce((t,e)=>("childList"!==e.type||(e.addedNodes.length>0&&t.added.push(...e.addedNodes),e.removedNodes.length>0&&t.removed.push(...e.removedNodes)),t),{added:[],removed:[]}))}}Rn=new WeakMap;var Zn,Gn,Jn,Qn,tr,er,ir,sr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},nr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class or{constructor(t,e){Zn.set(this,void 0),Gn.set(this,void 0),Jn.set(this,void 0),nr(this,Zn,vt("> * > .{prefix}-accordion-title",t)),nr(this,Gn,vt("> *",t)),this.animation=!1,nr(this,Jn,null!=e?e:300),this.single=!1,this.selector=":scope "+rr(this,Zn),this.items=":scope "+rr(this,Gn),this.timeout=rr(this,Jn)}parse(t){if(J(t))return this.single=ut(t.single),this.selector=":scope "+pt(t.selector,rr(this,Zn)),this.items=":scope "+pt(t.content,rr(this,Gn)),this.timeout=ht(t.timeout,rr(this,Jn)),void(this.animation=ut(t.animation))}isValid(){return!0}}Zn=new WeakMap,Gn=new WeakMap,Jn=new WeakMap;class hr{constructor(t){Qn.set(this,void 0),nr(this,Qn,null!=t?t:"cui"),this.attribute=rr(this,Qn)+"-accordion"}getStyle(){return null}get(t,e){return new ar(t,e,this.attribute,rr(this,Qn))}}Qn=new WeakMap;class ar extends Kn{constructor(t,e,i,s){super("CuiAccordionHandler",t,i,new or(s,e.setup.animationTime),e),tr.set(this,void 0),er.set(this,void 0),ir.set(this,void 0),nr(this,ir,null),nr(this,tr,[]),nr(this,er,[]),nr(this,ir,null)}onInit(){if(this.args.isValid()){try{this.initTargets(),nr(this,ir,this.onEvent(O,this.onSwitch.bind(this)))}catch(t){this._log.exception(t,"handle")}this._log.debug("Initialized","handle")}}onUpdate(){try{this.initTargets()}catch(t){this._log.exception(t,"handle")}}onDestroy(){this.detachEvent(O,rr(this,ir))}onMutation(t){(t.added.length>0||t.removed.length>0)&&this.initTargets()}switch(t){return sr(this,void 0,void 0,(function*(){if(this._log.debug("Switch to: "+t),t<0||this.isLocked||!this.isInitialized)return!1;if(nr(this,tr,this.queryItems()),rr(this,tr).length<=t)return!1;this.isLocked=!0;const e=rr(this,tr)[t];return this.helper.hasClass(this.activeClassName,e)?this.helper.removeClassesAs(e,this.activeClassName):(this.args.single&&this.closeAllExcept(t),this.helper.setClassesAs(e,this.activeClassName)),this.emitEvent(H,{index:t,currentTarget:e,timestamp:Date.now()}),this.isLocked=!1,!0}))}onSwitch(t){this.switch(ht(t,-1)).then(()=>{this._log.debug("Switch from event to "+t)})}initTargets(){nr(this,tr,this.queryItems());const t=this.element.querySelectorAll(this.args.selector);nr(this,er,[]),t.forEach((t,e)=>{let i={element:t};this.setListener(i,e),rr(this,er).push(i)})}closeAllExcept(t){this.mutate(()=>{rr(this,tr).forEach((e,i)=>{t!==i&&this.helper.hasClass(this.activeClassName,e)&&e.classList.remove(this.activeClassName)})})}setListener(t,e){t.listener=()=>{this.switch(e)},t.element.addEventListener("click",t.listener)}removeListener(t){t.listener&&t.element.removeEventListener("click",t.listener)}queryItems(){return[...this.element.querySelectorAll(this.args.items)]}}tr=new WeakMap,er=new WeakMap,ir=new WeakMap;var lr,cr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ur=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dr{constructor(){this.length=this.to=this.from=-1,this.rtl=!1}setProperty(t){if(!t||!J(t.from)||!J(t.to))throw new a("[OpacityAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to}perform(t,e,i){if(this.to<0)return;let s=this.length*e;t.style&&(t.style.opacity=this.rtl?Math.max(this.from-s,0):Math.min(this.from+s,1))}}class pr{constructor(t){if(lr.set(this,void 0),!J(t))throw new a("[PropertyAnimator] Valid property is required");this.property=t,this.length=this.to=this.from=-1,this.rtl=!1,cr(this,lr,"")}setProperty(t){if(!t||!J(t.from)||!J(t.to))throw new a("[PropertyAnimator] Property has incorrect format");this.from=t.from,this.to=t.to,this.length=Math.abs(this.to-this.from),this.rtl=this.from>this.to,cr(this,lr,t.unit)}perform(t,e,i){if(!this.property)return;let s=this.length*e;t.style&&(t.style[this.property]=this.createValue(this.rtl?this.from-s:this.from+s,ur(this,lr)))}createValue(t,e){return`${t}${null!=e?e:""}`}}lr=new WeakMap;class gr{constructor(){this.prop=void 0}setProperty(t){if(!t)throw new a("[TransformAnimator] Property has incorrect format");this.prop=t}build(t){let e=[];for(let i in this.prop){let s=this.prop[i],n=Math.abs(s.to-s.from),r=s.from>s.to?s.from-n*t:s.from+n*t;e.push(this.buildSingle(i,r,s.unit))}return e.join(" ")}buildSingle(t,e,i){return`${t}(${e}${i})`}perform(t,e){this.prop&&t.style&&(t.style.transform=this.build(e))}}var vr,fr,mr,wr,kr,yr,br,Mr,Cr,Ar,Er,Wr,Tr,xr,Sr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Lr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap,new WeakMap,new WeakMap;class Pr{get(t){if(J(t))switch(t){case"opacity":return new dr;case"transform":return new gr;default:return new pr(t)}}}class Ir{constructor(t){vr.set(this,void 0),fr.set(this,void 0),mr.set(this,void 0),wr.set(this,void 0),kr.set(this,void 0),yr.set(this,void 0),br.set(this,void 0),Mr.set(this,void 0),Cr.set(this,void 0),Sr(this,fr,[]),Sr(this,kr,void 0),Sr(this,wr,void 0),Sr(this,yr,null!=t&&t),Sr(this,Mr,new Pr),Sr(this,mr,!1),Sr(this,vr,void 0),Sr(this,br,!1),Sr(this,Cr,void 0)}onFinish(t){Sr(this,vr,t)}setAnimators(t){Sr(this,fr,t)}setProps(t){if(J(t)){Sr(this,fr,[]);try{for(let e in t){let i=Lr(this,Mr).get(e);if(!i)return;i.setProperty(t[e]),Lr(this,fr).push(i)}}catch(t){this.reportError(t)}}}setElement(t){Sr(this,kr,t)}setOnError(t){Sr(this,Cr,t)}animate(t,e,i){if(Lr(this,mr))return;if(!Lr(this,kr)||0===Lr(this,fr).length)return void this.reportError(new Error("Animation cannot be performed: element or animators are not set"));let s=null!=e?e:0,n=i||!1;Sr(this,mr,!0),requestAnimationFrame(this.animateAsync.bind(this,t,s,n))}isLocked(){return Lr(this,mr)}animateAsync(t,e,i,s){Lr(this,wr)||Sr(this,wr,s);let n=s-Lr(this,wr),r=n/t,o=0;o=0===e?r:i?e-r*e:e+r*e,this.callUpdate(i?Math.max(o,0):Math.min(o,1),1),n<t&&!Lr(this,br)?requestAnimationFrame(this.animateAsync.bind(this,t,e,i)):this.endAnimation(i)}endAnimation(t){Lr(this,yr)&&Lr(this,kr)&&Lr(this,kr).removeAttribute("style"),Lr(this,vr)&&Lr(this,vr).call(this,Lr(this,kr),t,Lr(this,br)),Sr(this,br,!1),Sr(this,wr,void 0),Sr(this,mr,!1)}callUpdate(t,e){try{Lr(this,fr).forEach(i=>i.perform(Lr(this,kr),t,e))}catch(t){this.reportError(t),Sr(this,br,!0)}}reportError(t){Lr(this,Cr)?Lr(this,Cr).call(this,t):(console.error("An error occured in CuiAnimtionEngine"),console.error(t))}}vr=new WeakMap,fr=new WeakMap,mr=new WeakMap,wr=new WeakMap,kr=new WeakMap,yr=new WeakMap,br=new WeakMap,Mr=new WeakMap,Cr=new WeakMap;class Dr{constructor(t){Ar.set(this,void 0),Er.set(this,void 0),Wr.set(this,void 0),Tr.set(this,void 0),xr.set(this,void 0),Sr(this,Ar,void 0),Sr(this,Er,[]),Sr(this,Wr,new Ir(t)),Sr(this,Tr,new Pr),Sr(this,xr,void 0)}setElement(t){Sr(this,Ar,t)}setOnFinish(t){Lr(this,Wr).onFinish(t)}setOnError(t){Sr(this,xr,t),Lr(this,Wr).setOnError(t)}setProps(t){if(J(t)){Sr(this,Er,[]);try{for(let e in t){let i=Lr(this,Tr).get(e);if(!i)return;i.setProperty(t[e]),Lr(this,Er).push(i)}}catch(t){this.reportError(t)}}}update(t){Lr(this,Ar)&&0!==Lr(this,Er).length&&Lr(this,Er).forEach(e=>e.perform(Lr(this,Ar),Math.min(t,1),1))}updateAsync(t){requestAnimationFrame(this.update.bind(this,t))}finish(t,e,i){Lr(this,Ar)&&Lr(this,Wr).setElement(Lr(this,Ar)),Lr(this,Wr).setAnimators(Lr(this,Er)),Lr(this,Wr).animate(e,t,i)}reportError(t){Lr(this,xr)?Lr(this,xr).call(this,t):console.log(t)}}Ar=new WeakMap,Er=new WeakMap,Wr=new WeakMap,Tr=new WeakMap,xr=new WeakMap;var Br,Or,Hr,Nr,$r,qr,_r,Rr,zr,Ur=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vr{constructor(t,e){Br.set(this,void 0),Or.set(this,void 0),Ur(this,Br,null!=e?e:300),Ur(this,Or,t),this.escClose=!1,this.keyClose="",this.timeout=Fr(this,Br),this.swipe=!1,this.openAct="",this.closeAct=""}parse(t){this.swipe=dt(t.swipe,!1),this.escClose=!1,this.keyClose="",this.timeout=ht(t.timeout,Fr(this,Br)),this.openAct=pt(t.openAct,vt(".{prefix}-animation-fade-in",Fr(this,Or))),this.closeAct=pt(t.closeAct,vt(".{prefix}-animation-fade-out",Fr(this,Or)))}}Br=new WeakMap,Or=new WeakMap;class jr{constructor(t){Hr.set(this,void 0),Ur(this,Hr,null!=t?t:"cui"),this.attribute=Fr(this,Hr)+"-banner"}getStyle(){return null}get(t,e){return new Xr(t,e,this.attribute,Fr(this,Hr))}}Hr=new WeakMap;class Xr extends Yn{constructor(t,e,i,s){super("CuiBannerHandler",t,i,new Vr(s,e.setup.animationTime),e),Nr.set(this,void 0),$r.set(this,void 0),qr.set(this,void 0),_r.set(this,void 0),Rr.set(this,void 0),zr.set(this,void 0),Ur(this,Nr,new Dr(!0)),Fr(this,Nr).setOnFinish(this.onSwipeFinish.bind(this)),Fr(this,Nr).setElement(this.element),Ur(this,qr,-1),Ur(this,_r,0),Ur(this,Rr,Wn.fade),Ur(this,zr,null),Ur(this,$r,!1)}onInit(){this.isActive()||this.open()}onUpdate(){}onDestroy(){this.detachEvent(V,Fr(this,zr))}onBeforeOpen(){return!0}onAfterOpen(){this.args.swipe&&Ur(this,zr,this.onEvent(V,this.onMove.bind(this)))}onAfterClose(){this.detachEvent(V,Fr(this,zr))}onBeforeClose(){return!0}onMove(t){if(this.isLocked)return;let e=this.element;switch(t.type){case"down":if(Fr(this,$r)||!e.contains(t.target))return;Ur(this,$r,!0),Ur(this,qr,t.x),this.helper.setClassesAs(document.body,v),t.event.preventDefault();break;case"up":if(!Fr(this,$r)&&0==Fr(this,_r))break;let i=Math.abs(Fr(this,_r)),s=i*this.args.timeout,n=i<=.4;this.isLocked=!0,Fr(this,Nr).finish(i,s,n),this.helper.removeClassesAs(document.body,v),Ur(this,$r,!1);break;case"move":if(Fr(this,$r)){let i=(t.x-Fr(this,qr))/e.offsetWidth;(Fr(this,_r)>=0&&i<=0||Fr(this,_r)<=0&&i>0)&&Fr(this,Nr).setProps(i>0?Fr(this,Rr).current.right:Fr(this,Rr).current.left),Ur(this,_r,i),this.mutate(()=>{Fr(this,Nr).update(Math.abs(Fr(this,_r)))}),t.event.preventDefault()}}}onSwipeFinish(t,e,i){this.isLocked=!1,e||(this.helper.removeClass(this.activeClassName,this.element),In.setAria(this.element,"aria-expanded","false")),Ur(this,_r,0),Ur(this,qr,0)}}Nr=new WeakMap,$r=new WeakMap,qr=new WeakMap,_r=new WeakMap,Rr=new WeakMap,zr=new WeakMap;var Yr,Kr,Zr,Gr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Jr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Qr{constructor(t){Yr.set(this,void 0),Kr.set(this,void 0),Zr.set(this,void 0),Gr(this,Yr,t),Gr(this,Kr,1),Gr(this,Zr,new to)}setScale(t){return Gr(this,Kr,t),this}build(){let t=function(t){if(!J(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}(Jr(this,Yr));return J(t)&&Jr(this,Kr)&&Jr(this,Zr).append(t,Jr(this,Kr)),t}}Yr=new WeakMap,Kr=new WeakMap,Zr=new WeakMap;class to{append(t,e){let i=ht(t.getAttribute("width"),20),s=ht(t.getAttribute("height"),20);t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var eo,io,so,no,ro,oo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ho=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ao{constructor(){this.progress=0}parse(t){J(t)?gt(t)?this.progress=ht(t,0):this.progress=ht(t.progress,0):this.progress=0}}class lo{constructor(t){this.attribute=(null!=t?t:"cui")+"-circle-progress",f.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new co(t,e,this.attribute)}}class co extends Xn{constructor(t,e,i){super("CuiCircleHandler",t,i,new ao,e),eo.set(this,void 0),io.set(this,void 0),so.set(this,void 0),no.set(this,void 0),ro.set(this,void 0),oo(this,eo,oo(this,io,0)),oo(this,so,null),oo(this,no,i),oo(this,ro,null)}onInit(){const t=new Qr(f.special_circle_progress).build();if(!J(t))return void this.logError("SVG circle was not created","onInit");const e=this.element.querySelector("svg");J(e)&&e.remove(),this.element.appendChild(t),oo(this,so,this.element.querySelector(".circle-progress-path")),oo(this,io,ho(this,so).getTotalLength()),oo(this,eo,ho(this,io)/100),this.fetch(this.readStyle),oo(this,ro,this.onEvent(U,this.onSetProgress.bind(this)))}onUpdate(){this.fetch(this.readStyle),this.emitEvent(F,{timestamp:Date.now(),progress:this.args.progress})}onDestroy(){this.detachEvent(U,ho(this,ro))}onSetProgress(t){J(t)&&this.element.setAttribute(ho(this,no),t)}updateStyle(t){ho(this,so).style.strokeDashoffset=t}readStyle(){if(this.prevArgs&&this.args.progress===this.prevArgs.progress)return;const t=et(this.args.progress,0,100);this.mutate(this.updateStyle,ho(this,io)-ho(this,eo)*t)}}eo=new WeakMap,io=new WeakMap,so=new WeakMap,no=new WeakMap,ro=new WeakMap;var uo,po,go,vo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},fo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wo{constructor(t){uo.set(this,void 0),this.target="",this.action="",this.prevent=!1,this.state="",fo(this,uo,null!=t?t:300),this.timeout=mo(this,uo)}parse(t){if(J(t)&&gt(t))return this.target=t,this.action="",this.timeout=mo(this,uo),this.prevent=!1,void(this.state="");this.target=pt(t.target,""),this.action=t.action,this.timeout=ht(t.timeout,mo(this,uo)),this.prevent=t.prevent&&ut(t.prevent),this.state=t.state}}uo=new WeakMap;class ko{constructor(t){po.set(this,void 0),fo(this,po,null!=t?t:"cui"),this.attribute=mo(this,po)+"-close"}getStyle(){return null}get(t,e){return new yo(t,e,this.attribute,mo(this,po))}}po=new WeakMap;class yo extends Xn{constructor(t,e,i,s){super("CuiCloseHandler",t,i,new wo(e.setup.animationTime),e),go.set(this,void 0),fo(this,go,null),this.onClick=this.onClick.bind(this)}onInit(){this.element.addEventListener("click",this.onClick),fo(this,go,this.onEvent(P,this.onClose.bind(this)))}onUpdate(){}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(P,mo(this,go))}onClick(t){this.onClose(t),this.args.prevent&&t.preventDefault()}onClose(t){if(this.isLocked)return;const e=this.getTarget();J(e)?(this.isLocked=!0,this.run(e).then(e=>{this.onActionFinish(t,e)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return vo(this,void 0,void 0,(function*(){let e=t.$cuid;if(J(e))return yield this.utils.bus.emit(P,e,this.args.state),!1;if(nt(this.args.action,this.args.timeout)){let e=Ti.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.removeActiveClass(t)})}return this.removeActiveClassAsync(t),!0}))}removeActiveClass(t){J(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClass(this.activeClassName,t)}removeActiveClassAsync(t){this.fetch(()=>{J(t)&&this.helper.hasClass(this.activeClassName,t)&&this.helper.removeClassesAs(t,this.activeClassName)})}onActionFinish(t,e){e&&this.emitClose(t)}getTarget(){var t;return J(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:wt(this.element)}emitClose(t){this.emitEvent(I,{timestamp:Date.now(),state:this.args.state,event:t})}}go=new WeakMap;var bo,Mo,Co,Ao,Eo,Wo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},To=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xo{constructor(t,e){bo.set(this,void 0),Mo.set(this,void 0),Wo(this,bo,null!=e?e:300),Wo(this,Mo,t),this.escClose=!1,this.timeout=To(this,bo),this.openAct="",this.closeAct="",this.keyClose=""}parse(t){this.escClose=ut(t.escClose),this.keyClose=t.keyClose,this.timeout=ht(t.timeout,To(this,bo)),this.openAct=pt(t.openAct,vt(".{prefix}-dialog-default-in",To(this,Mo))),this.closeAct=pt(t.closeAct,vt(".{prefix}-dialog-default-out",To(this,Mo)))}}bo=new WeakMap,Mo=new WeakMap;class So{constructor(t){Co.set(this,void 0),Wo(this,Co,null!=t?t:"cui"),this.attribute=To(this,Co)+"-cover"}getStyle(){return null}get(t,e){return new Lo(t,e,this.attribute,To(this,Co))}}Co=new WeakMap;class Lo extends Yn{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new xo(s,e.setup.animationTimeLong),e),Ao.set(this,void 0),Eo.set(this,void 0),Wo(this,Ao,vt("{prefix}-cover-open",s)),Wo(this,Eo,0)}onInit(){In.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Wo(this,Eo,window.pageYOffset),!0)}onAfterOpen(){this.helper.setClass(To(this,Ao),document.body),document.body.style.top=`-${To(this,Eo)}px`,In.setAria(this.element,"aria-hidden","false")}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(To(this,Eo)||0)),Wo(this,Eo,0),this.helper.removeClass(To(this,Ao),document.body),In.setAria(this.element,"aria-hidden","true")}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(To(this,Ao),document.body)}}Ao=new WeakMap,Eo=new WeakMap;var Po,Io,Do,Bo,Oo,Ho,No,$o=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _o{constructor(t,e){Po.set(this,void 0),Io.set(this,void 0),$o(this,Po,null!=e?e:300),$o(this,Io,t),this.escClose=!1,this.outClose=!1,this.timeout=qo(this,Po),this.openAct="",this.closeAct="",this.keyClose=""}parse(t){this.escClose=ut(t.escClose),this.outClose=ut(t.outClose),this.keyClose=t.keyClose,this.timeout=ht(t.timeout,qo(this,Po)),this.openAct=pt(t.openAct,vt(".{prefix}-dialog-default-in",qo(this,Io))),this.closeAct=pt(t.closeAct,vt(".{prefix}-dialog-default-out",qo(this,Io)))}}Po=new WeakMap,Io=new WeakMap;class Ro{constructor(t){Do.set(this,void 0),$o(this,Do,null!=t?t:"cui"),this.attribute=qo(this,Do)+"-dialog"}getStyle(){return null}get(t,e){return new zo(t,e,this.attribute,qo(this,Do))}}Do=new WeakMap;class zo extends Yn{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new _o(s,e.setup.animationTimeLong),e),Bo.set(this,void 0),Oo.set(this,void 0),Ho.set(this,void 0),No.set(this,void 0),$o(this,Oo,vt("{prefix}-dialog-open",s)),$o(this,Bo,s),$o(this,Ho,0),$o(this,No,null)}onInit(){In.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&($o(this,Ho,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&$o(this,No,this.onEvent(R,this.onWindowClick.bind(this))),this.helper.setClass(qo(this,Oo),document.body),document.body.style.top=`-${qo(this,Ho)}px`}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(qo(this,Ho)||0)),$o(this,Ho,0),this.helper.removeClass(qo(this,Oo),document.body),this.detachEvent(R,qo(this,No))}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(qo(this,Oo),document.body)}onWindowClick(t){let e=this.element.querySelector(vt(".{prefix}-dialog-container",qo(this,Bo)));e&&!e.contains(t.target)&&this.close("out").then(()=>{this._log.debug("Closed by click outside")})}}Bo=new WeakMap,Oo=new WeakMap,Ho=new WeakMap,No=new WeakMap;var Uo,Fo,Vo,jo,Xo,Yo,Ko,Zo,Go=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Jo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Qo{constructor(t){Uo.set(this,void 0),Fo.set(this,void 0),Vo.set(this,void 0),jo.set(this,void 0),Xo.set(this,void 0),Yo.set(this,void 0),Ko.set(this,void 0),Zo.set(this,void 0),Go(this,Uo,t),Go(this,Vo,!1),Go(this,jo,!1),Go(this,Xo,!1),Go(this,Fo,void 0),Go(this,Ko,this.onMouseMove.bind(this)),Go(this,Zo,this.onMouseOut.bind(this)),Go(this,Yo,this.onMouseOver.bind(this))}setCallback(t){Go(this,Fo,t)}isInProgress(){return Jo(this,Vo)}attach(){Jo(this,Uo).addEventListener("mouseover",Jo(this,Yo)),Jo(this,Uo).addEventListener("mousemove",Jo(this,Ko)),Jo(this,Uo).addEventListener("mouseout",Jo(this,Zo)),Go(this,Xo,!0)}detach(){Jo(this,Uo).removeEventListener("mouseover",Jo(this,Yo)),Jo(this,Uo).removeEventListener("mousemove",Jo(this,Ko)),Jo(this,Uo).removeEventListener("mouseout",Jo(this,Zo)),Go(this,Xo,!1)}emit(t,e){nt(Jo(this,Fo))&&(!e&&Jo(this,Vo)||(Go(this,Vo,!0),window.requestAnimationFrame(this.invoke.bind(this,{isHovering:Jo(this,jo),event:t,timestamp:Date.now()}))))}isAttached(){return Jo(this,Xo)}invoke(t){Jo(this,Fo)&&Jo(this,Fo).call(this,t),Go(this,Vo,!1)}onMouseOver(t){Go(this,jo,!0),this.emit(t,!0)}onMouseOut(t){Go(this,jo,!1),this.emit(t,!0)}onMouseMove(t){this.emit(t,!1)}}Uo=new WeakMap,Fo=new WeakMap,Vo=new WeakMap,jo=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,Zo=new WeakMap;var th,eh,ih,sh,nh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class oh{constructor(){th.set(this,void 0),eh.set(this,void 0),ih.set(this,void 0),sh.set(this,void 0),nh(this,ih,-1),nh(this,eh,-1),nh(this,th,void 0),nh(this,sh,0)}setElementBox(t){nh(this,th,t)}setTarget(t){nh(this,eh,t.width),nh(this,ih,t.height)}setMargin(t){nh(this,sh,t)}getVerticalPosition(t){switch(t){case"top":return this.getTopPosition();case"bottom":return this.getBottomPosition();case"middle":return this.getMiddlePosition();default:return-1}}getHorizontalPosition(t){switch(t){case"left":return this.getLeftPosition();case"right":return this.getRightPosition();case"center":return this.getCenterPosition();default:return-1}}getAutoVerticalPosition(t){let e=window.innerHeight,i=this.getVerticalPosition(t);return("top"===t||"middle"===t)&&i<0?[this.getVerticalPosition("bottom"),"bottom"]:("bottom"===t||"middle"===t)&&i+rh(this,ih)>e?[this.getVerticalPosition("top"),"top"]:[i,t]}getAutoHorizontalPosition(t){let e=window.innerWidth,i=this.getHorizontalPosition(t);return("right"===t||"center"===t)&&i<0?[this.getHorizontalPosition("left"),"left"]:("left"===t||"center"===t)&&i+rh(this,eh)>e?[this.getHorizontalPosition("right"),"right"]:[i,t]}getTopPosition(){return this.throwIfNotValid("getTopPosition"),rh(this,th).top-rh(this,sh)-rh(this,ih)}getBottomPosition(){return this.throwIfNotValid("getBottomPosition"),rh(this,th).top+rh(this,th).height+rh(this,sh)}getMiddlePosition(){return this.throwIfNotValid("getMiddlePosition"),rh(this,th).top+rh(this,th).height/2-rh(this,ih)/2}getLeftPosition(){return this.throwIfNotValid("getLeftPosition"),rh(this,th).left}getRightPosition(){return this.throwIfNotValid("getRightPosition"),rh(this,th).left+rh(this,th).width-rh(this,eh)}getCenterPosition(){return this.throwIfNotValid("getCenterPosition"),rh(this,th).left+rh(this,th).width/2-rh(this,eh)/2}validate(){return J(rh(this,th))&&rh(this,ih)>0&&rh(this,eh)>0}throwIfNotValid(t){if(!this.validate())throw new u(`[${t}] Position cannot be calculated: missing data [width: ${rh(this,eh)}][height: ${rh(this,ih)}]`)}}th=new WeakMap,eh=new WeakMap,ih=new WeakMap,sh=new WeakMap;var hh,ah,lh,ch,uh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ph{constructor(t){hh.set(this,void 0),ah.set(this,void 0),lh.set(this,void 0),ch.set(this,void 0),uh(this,ah,"top-center"),uh(this,hh,""),uh(this,lh,null!=t?t:new oh),uh(this,ch,Wt.get("CuiBasePositionCalculator"))}setMargin(t){dh(this,lh).setMargin(t)}setPreferred(t){uh(this,ah,t)}setStatic(t){uh(this,hh,t)}calculate(t,e){if(dh(this,lh).setElementBox(t),dh(this,lh).setTarget(e),J(dh(this,hh))){dh(this,ch).debug("Evaluating static position");const[t,e]=this.parse(dh(this,hh));return[dh(this,lh).getHorizontalPosition(e),dh(this,lh).getVerticalPosition(t),dh(this,hh)]}let[i,s]=["",""];J(dh(this,ah))&&(dh(this,ch).debug("Evaluating auto position"),[i,s]=this.parse(dh(this,ah))),i=null!=i?i:"top",s=null!=s?s:"center",dh(this,ch).debug("Calculating position: "+i+"-"+s);const[n,r]=dh(this,lh).getAutoVerticalPosition(i),[o,h]=dh(this,lh).getAutoHorizontalPosition(s);return dh(this,ch).debug("Calculated position: "+r+"-"+h),[o,n,r+"-"+h]}parse(t){return t.split("-")}}hh=new WeakMap,ah=new WeakMap,lh=new WeakMap,ch=new WeakMap;var gh,vh,fh,mh,wh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},kh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class yh{constructor(t,e,i){gh.set(this,void 0),vh.set(this,void 0),fh.set(this,void 0),mh.set(this,void 0),wh(this,vh,e),wh(this,fh,t),wh(this,mh,i)}start(){this.canRun()&&(this.stop(),wh(this,gh,setTimeout(()=>{kh(this,mh).call(this),wh(this,gh,null),kh(this,vh)&&this.start()},kh(this,fh))))}stop(){kh(this,gh)&&(clearTimeout(kh(this,gh)),wh(this,gh,null))}getId(){return kh(this,gh)}canRun(){return J(kh(this,mh))&&kh(this,fh)>0}setCallback(t){wh(this,mh,t)}setTimeout(t){wh(this,fh,t)}}gh=new WeakMap,vh=new WeakMap,fh=new WeakMap,mh=new WeakMap;var bh,Mh,Ch,Ah,Eh,Wh,Th,xh,Sh,Lh,Ph,Ih,Dh,Bh,Oh,Hh=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Nh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$h=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qh{constructor(t){bh.set(this,void 0),Nh(this,bh,vt("{prefix}-drop-animation-in",t)),this.mode="click",this.trigger="> a, button",this.autoClose=!1,this.outClose=!1,this.prevent=!1,this.pos="",this.action=$h(this,bh),this.timeout=3e3,this.margin=8}parse(t){this.mode=pt(t.mode,"click").toLowerCase(),this.trigger=":scope "+pt(t.trigger,"> a, button"),this.prevent=ut(t.prevent),this.autoClose=ut(t.autoClose),this.outClose=!t.outClose||ut(t.outClose),this.pos=pt(t.pos,""),this.action=pt(t.action,$h(this,bh)),this.timeout=ht(t.timeout,3e3),this.margin=ht(t.margin,8)}}bh=new WeakMap;class _h{constructor(t){Mh.set(this,void 0),Nh(this,Mh,null!=t?t:"cui"),this.attribute=$h(this,Mh)+"-drop"}getStyle(){return null}get(t,e){return new Rh(t,e,this.attribute,$h(this,Mh))}}Mh=new WeakMap;class Rh extends Xn{constructor(t,e,i,s){super("CuidropHandler",t,i,new qh(s),e),Ch.set(this,void 0),Ah.set(this,void 0),Eh.set(this,void 0),Wh.set(this,void 0),Th.set(this,void 0),xh.set(this,void 0),Sh.set(this,void 0),Lh.set(this,void 0),Ph.set(this,void 0),Ih.set(this,void 0),Dh.set(this,void 0),Bh.set(this,void 0),Oh.set(this,void 0),Nh(this,Eh,i),Nh(this,Ch,s),Nh(this,Ah,vt("{prefix}-drop-open",s)),Nh(this,Th,new Qo(this.element)),$h(this,Th).setCallback(this.onElementHover.bind(this)),Nh(this,Sh,null),Nh(this,Lh,null),Nh(this,Ph,null),this.onTriggerClick=this.onTriggerClick.bind(this),Nh(this,Ih,new ph),$h(this,Ih).setMargin(8),$h(this,Ih).setPreferred("bottom-left"),Nh(this,Dh,""),Nh(this,Wh,void 0),Nh(this,xh,this.element),Nh(this,Oh,[]),Nh(this,Bh,new yh(this.args.timeout,!1,this.close.bind(this)))}onInit(){Nh(this,xh,this.acquireTrigger()),Nh(this,Wh,new Qo($h(this,xh))),this.setTriggerEvent(),Nh(this,Lh,this.onEvent(S,this.open.bind(this))),Nh(this,Ph,this.onEvent(P,this.close.bind(this))),$h(this,Ih).setStatic(this.args.pos),$h(this,Ih).setMargin(this.args.margin),Nh(this,Bh,new yh(this.args.timeout,!1,this.close.bind(this))),Nh(this,Oh,Ti.get(this.args.action)),this.mutate(()=>{In.setAria(this.element,"aria-dropdown","")}),this._log.debug("Initialized","handle")}onUpdate(){$h(this,Wh)&&$h(this,Wh).isAttached()?$h(this,Wh).detach():this.prevArgs&&"click"===this.prevArgs.mode&&$h(this,xh).removeEventListener("click",this.onTriggerClick),Nh(this,xh,this.acquireTrigger()),Nh(this,Wh,new Qo($h(this,xh))),this.setTriggerEvent(),$h(this,Ih).setStatic(this.args.pos),$h(this,Ih).setMargin(this.args.margin),Nh(this,Oh,Ti.get(this.args.action)),$h(this,Bh).setTimeout(this.args.timeout)}onDestroy(){this.detachEvent(S,$h(this,Lh)),this.detachEvent(P,$h(this,Ph))}open(){return Hh(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?this.close():(this.isAnyActive()&&(yield this.findAndCloseOpenedDrop()),this.isLocked=!0,this._log.debug("Drop "+this.cuid,"open"),this.onOpen(),this.isLocked=!1,!0))}))}close(){return Hh(this,void 0,void 0,(function*(){return!(this.checkLockAndWarn("close")||!this.isActive())&&(this.isLocked=!0,this.logInfo("Drop "+this.cuid,"close"),this.onClose(),this.detachEvent(R,$h(this,Sh)),this.emitEvent(I,{timestamp:Date.now()}),$h(this,Th).detach(),this.isLocked=!1,!0)}))}onClose(){this.mutate(()=>{this.helper.removeClass(this.activeClassName,this.element),this.helper.removeClass($h(this,Ah),document.body),this.toggleActions(),this.helper.removeClass($h(this,Dh),this.element),In.setAria(this.element,"aria-expanded","false")})}onOpen(){this.helper.setClass(this.activeClassName,this.element),this.mutate(()=>{const t=$h(this,xh).getBoundingClientRect();try{const[e,i,s]=$h(this,Ih).calculate(t,this.element.getBoundingClientRect());this.element.style.top=i-t.top+"px",this.element.style.left=e-t.left+"px",Nh(this,Dh,vt("{prefix}-drop-position-"+s,$h(this,Ch))),this.toggleActions(),this.helper.setClass($h(this,Dh),this.element),this.helper.setClass($h(this,Ah),document.body),this.emitEvent(L,{timestamp:Date.now()}),$h(this,Th).attach(),this.runAutoCloseTask(),this.args.outClose&&Nh(this,Sh,this.onEvent(R,this.onWindowClick.bind(this))),In.setAria(this.element,"aria-expanded","true")}catch(t){this._log.exception(t)}})}onWindowClick(t){this.element.contains(t.target)||this.close()}isAnyActive(){return this.helper.hasClass($h(this,Ah),document.body)}findAndCloseOpenedDrop(){return Hh(this,void 0,void 0,(function*(){const t=document.querySelector(`[${$h(this,Eh)}].${this.activeClassName}`);if(!J(t))return this._log.warning("Opened drop was not found"),!1;const e=t.$handlers[$h(this,Eh)];return J(e)?e.close():(this._log.warning("Drop handler was not found in the element"),!1)}))}onTriggerClick(t){this.isActive()?this.close():this.open(),this.args.prevent&&t.preventDefault()}onHoverEvent(t){t.isHovering&&!this.isActive()&&this.open(),this.args.prevent&&t.event.preventDefault()}onElementHover(t){t.isHovering?$h(this,Bh).stop():!t.isHovering&&this.args.autoClose&&this.runAutoCloseTask()}setTriggerEvent(){"hover"===this.args.mode&&$h(this,Wh)?($h(this,Wh).setCallback(this.onHoverEvent.bind(this)),$h(this,Wh).attach()):$h(this,xh).addEventListener("click",this.onTriggerClick)}runAutoCloseTask(){this.args.autoClose&&$h(this,Bh).start()}toggleActions(){$h(this,Oh).forEach(t=>{t.toggle(this.element)})}acquireTrigger(){let t=null;return t=this.element.parentElement?this.element.parentElement.querySelector(this.args.trigger):document.querySelector(this.args.trigger),null!=t?t:this.element}}Ch=new WeakMap,Ah=new WeakMap,Eh=new WeakMap,Wh=new WeakMap,Th=new WeakMap,xh=new WeakMap,Sh=new WeakMap,Lh=new WeakMap,Ph=new WeakMap,Ih=new WeakMap,Dh=new WeakMap,Bh=new WeakMap,Oh=new WeakMap;var zh,Uh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vh{calculate(t,e,i,s){return[t,e]}}new WeakMap;class jh{constructor(t){zh.set(this,void 0),Uh(this,zh,t)}calculate(t,e,i,s){return[t-Fh(this,zh).offsetLeft,e-Fh(this,zh).offsetTop]}}zh=new WeakMap;new WeakMap;var Xh,Yh,Kh,Zh,Gh,Jh,Qh,ta,ea,ia,sa,na,ra,oa=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ha=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class aa{constructor(t,e){Xh.set(this,void 0),Yh.set(this,void 0),oa(this,Xh,null!=e?e:300),oa(this,Yh,t),this.escClose=!1,this.keyClose="",this.openAct="",this.closeAct="",this.timeout=ha(this,Xh)}parse(t){this.escClose=ut(t.escClose),this.keyClose=t.keyClose,this.timeout=ht(t.timeout,ha(this,Xh)),this.openAct=pt(t.openAct,vt(".{prefix}-float-default-in",ha(this,Yh))),this.closeAct=pt(t.closeAct,vt(".{prefix}-float-default-out",ha(this,Yh)))}}Xh=new WeakMap,Yh=new WeakMap;class la{constructor(t){Kh.set(this,void 0),oa(this,Kh,null!=t?t:"cui"),this.attribute=ha(this,Kh)+"-float"}getStyle(){return null}get(t,e){return new ca(t,e,this.attribute,ha(this,Kh))}}Kh=new WeakMap;class ca extends Yn{constructor(t,e,i,s){super("CuiFloatHandler",t,i,new aa(s,e.setup.animationTime),e),Zh.set(this,void 0),Gh.set(this,void 0),Jh.set(this,void 0),Qh.set(this,void 0),ta.set(this,void 0),ea.set(this,void 0),ia.set(this,void 0),sa.set(this,void 0),na.set(this,void 0),ra.set(this,void 0),oa(this,Zh,!1),oa(this,Gh,!1),oa(this,Jh,0),oa(this,Qh,0),oa(this,ea,new Ms),ha(this,ea).preventDefault(!1),oa(this,ia,new Vh),oa(this,sa,new jh(t)),oa(this,ta,s),this.move=this.move.bind(this),this.resize=this.resize.bind(this),oa(this,ra,null),oa(this,na,null)}onInit(){In.setAria(this.element,"aria-modal",""),oa(this,ra,this.element.querySelector(vt(".{prefix}-float-move",ha(this,ta)))),oa(this,na,this.element.querySelector(vt(".{prefix}-float-resize",ha(this,ta)))),ha(this,ea).setCallback(this.onMove.bind(this))}onUpdate(){}onDestroy(){}onBeforeOpen(){return!0}onAfterOpen(){ha(this,ea).attach()}onAfterClose(){ha(this,ea).detach()}onBeforeClose(){return!0}onMove(t){switch(t.type){case"down":this.onMouseDown(t);break;case"up":this.onMouseUp(t);break;case"move":this.onMouseMove(t)}}onMouseDown(t){t.target===ha(this,ra)?(oa(this,Zh,!0),t.event.preventDefault()):t.target===ha(this,na)&&(oa(this,Gh,!0),t.event.preventDefault()),oa(this,Jh,t.x),oa(this,Qh,t.y),this.helper.setClassesAs(document.body,v),this.utils.bus.emit(j,null,!0)}onMouseMove(t){ha(this,Zh)?this.peform(t,this.move):ha(this,Gh)&&this.peform(t,this.resize)}onMouseUp(t){oa(this,Zh,!1),oa(this,Gh,!1),this.helper.removeClassesAs(document.body,v),this.utils.bus.emit(j,null,!1)}peform(t,e){this.mutate(()=>{J(e)&&e(this.element,t.x,t.y,t.x-ha(this,Jh),t.y-ha(this,Qh)),oa(this,Jh,t.x),oa(this,Qh,t.y)}),t.event.preventDefault()}resize(t,e,i,s,n){let[r,o]=ha(this,sa).calculate(e,i,s,n);this.fitsWindow(t.offsetTop,t.offsetLeft,r,o)&&this.mutate(()=>{t.style.width=r+"px",t.style.height=o+"px"})}move(t,e,i,s,n){let[r,o]=ha(this,ia).calculate(e,i,s,n);this.fitsWindow(o,r,t.offsetWidth,t.offsetHeight)&&this.mutate(()=>{t.style.left=r+"px",t.style.top=o+"px"})}fitsWindow(t,e,i,s){return t+s<window.innerHeight-10&&t>10&&e>10&&e+i<window.innerWidth-10}}Zh=new WeakMap,Gh=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,ta=new WeakMap,ea=new WeakMap,ia=new WeakMap,sa=new WeakMap,na=new WeakMap,ra=new WeakMap;var ua,da=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ga{constructor(){this.icon="",this.scale=1}parse(t){gt(t)?this.icon=pt(t,""):(this.icon=pt(t.icon,""),this.scale=ht(t.scale,1))}}class va{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new fa(t,e,this.attribute)}}class fa extends Xn{constructor(t,e,i){super("CuiIconHandler",t,i,new ga,e),ua.set(this,void 0),da(this,ua,null)}onInit(){null===pa(this,ua)?(this.addIcon(this.args.icon),da(this,ua,this.args.icon)):this._log.debug("Icon already initialized")}onUpdate(){this.args.icon!==pa(this,ua)&&(this.addIcon(this.args.icon),da(this,ua,this.args.icon))}onDestroy(){const t=this.element.querySelector("svg");J(t)&&t.remove(),da(this,ua,null)}addIcon(t){const e=t?f[t]:null;if(!e)return;const i=new Qr(e).setScale(this.args.scale).build(),s=this.element.querySelector("svg");J(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}insertBefore(t){this.element.insertBefore(t,this.element.firstChild)}appendChild(t){this.element.appendChild(t)}}ua=new WeakMap;var ma,wa,ka,ya,ba=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ma=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ca{constructor(t,e){ma.set(this,void 0),wa.set(this,void 0),ka.set(this,void 0),ya.set(this,void 0),ba(this,wa,t),ba(this,ka,null!=e?e:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]),ba(this,ya,void 0),ba(this,ma,void 0)}setCallback(t){ba(this,ya,t)}connect(){Ma(this,ya)&&ba(this,ma,new IntersectionObserver(Ma(this,ya),{root:Ma(this,wa),rootMargin:"0px",threshold:Ma(this,ka)}))}observe(t){Ma(this,ma)&&Ma(this,ma).observe(t)}unobserve(t){Ma(this,ma)&&Ma(this,ma).unobserve(t)}disconnect(){Ma(this,ma)&&Ma(this,ma).disconnect()}}ma=new WeakMap,wa=new WeakMap,ka=new WeakMap,ya=new WeakMap;var Aa,Ea,Wa,Ta=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},xa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Sa{constructor(){this.target="div",this.action="",this.offset=0,this.isRoot=!1}parse(t){this.target=J(t.target)?":scope "+t.target:":scope > *",this.action=pt(t.action,""),this.offset=it(parseFloat(t.offset),0,1,0),this.isRoot=ut(t.isRoot)}}class La{constructor(t){this.attribute=(null!=t?t:"cui")+"-intersection"}getStyle(){return null}get(t,e){return new Pa(t,e,this.attribute)}}class Pa extends Xn{constructor(t,e,i){super("CuiIntersectionHandler",t,i,new Sa,e),Aa.set(this,void 0),Ea.set(this,void 0),Wa.set(this,void 0),Ta(this,Aa,new Ca(this.element)),Ta(this,Ea,[]),Ta(this,Wa,[])}onInit(){this.parseArguments(),xa(this,Aa).setCallback(this.onIntersection.bind(this)),xa(this,Aa).connect(),xa(this,Ea).forEach(t=>{xa(this,Aa).observe(t)})}onUpdate(){this.parseArguments()}onDestroy(){xa(this,Aa).disconnect()}parseArguments(){if(!J(this.prevArgs)||this.prevArgs.target!==this.args.target){let t=this.args.isRoot?document.body:this.element;Ta(this,Ea,[...t.querySelectorAll(this.args.target)])}Ta(this,Wa,Ti.get(this.args.action))}onIntersection(t,e){J(xa(this,Ea))&&t.forEach(t=>{t.isIntersecting&&t.intersectionRatio>=this.args.offset?this.addActions(t.target):this.removeActions(t.target),this.emitIntersection(t)})}emitIntersection(t){this.emitEvent(q,{entry:t,offset:this.args.offset,timestamp:Date.now()})}addActions(t){xa(this,Wa).forEach(e=>e.add(t))}removeActions(t){xa(this,Wa).forEach(e=>e.remove(t))}}Aa=new WeakMap,Ea=new WeakMap,Wa=new WeakMap;var Ia,Da,Ba,Oa,Ha,Na,$a,qa=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},_a=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ra{constructor(t,e){Ia.set(this,void 0),Da.set(this,void 0),qa(this,Da,null!=e?e:300),qa(this,Ia,t),this.escClose=!1,this.position="right",this.openAct=this.getDefaultOpenClass(),this.closeAct=this.getDefaultCloseClass(),this.timeout=_a(this,Da),this.outClose=!1,this.keyClose=""}parse(t){J(t)&&(this.escClose=ut(t.escClose),this.outClose=ut(t.outClose),this.position=pt(t.position,"right"),this.openAct=pt(t.openAct,this.getDefaultOpenClass()),this.closeAct=pt(t.closeAct,this.getDefaultCloseClass()),this.timeout=ht(t.timeout,_a(this,Da)),this.keyClose=t.keyClose)}getDefaultOpenClass(){return vt("right"===this.position?".{prefix}-offcanvas-default-right-in":".{prefix}-offcanvas-default-left-in",_a(this,Ia))}getDefaultCloseClass(){return vt("right"===this.position?".{prefix}-offcanvas-default-right-out":".{prefix}-offcanvas-default-left-out",_a(this,Ia))}}Ia=new WeakMap,Da=new WeakMap;class za{constructor(t){Ba.set(this,void 0),qa(this,Ba,null!=t?t:"cui"),this.attribute=_a(this,Ba)+"-off-canvas"}getStyle(){return null}get(t,e){return new Ua(t,e,this.attribute,_a(this,Ba))}}Ba=new WeakMap;class Ua extends Yn{constructor(t,e,i,s){super("CuiOffCanvasHandler",t,i,new Ra(s,e.setup.animationTime),e),Oa.set(this,void 0),Ha.set(this,void 0),Na.set(this,void 0),$a.set(this,void 0),qa(this,Oa,s),qa(this,Ha,vt("{prefix}-off-canvas-open",s)),qa(this,$a,null),qa(this,Na,0)}onInit(){this.mutate(()=>{this.setPositionLeft(),In.setAria(this.element,"aria-modal","")})}onUpdate(){this.setPositionLeft()}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(qa(this,Na,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&qa(this,$a,this.onEvent(R,this.onWindowClick.bind(this))),this.helper.setClass(_a(this,Ha),document.body),document.body.style.top=`-${scrollY}px`}onAfterClose(){this.detachEvent(R,_a(this,$a)),this.helper.removeClass(_a(this,Ha),document.body),document.body.style.top="",window.scrollTo(0,-1*_a(this,Na))}onBeforeClose(){return!0}onWindowClick(t){const e=this.element.querySelector(vt(".{prefix}-off-canvas-container",_a(this,Oa)));e&&!e.contains(t.target)&&this.close()}isAnyActive(){return this.helper.hasClass(_a(this,Ha),document.body)}setPositionLeft(){let t=Q(_a(this,Oa),"left");"left"!==this.args.position||this.helper.hasClass(t,this.element)?"right"==this.args.position&&this.helper.hasClass(t,this.element)&&this.helper.removeClass(t,this.element):this.helper.setClass(t,this.element)}}Oa=new WeakMap,Ha=new WeakMap,Na=new WeakMap,$a=new WeakMap;var Fa,Va,ja,Xa=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ya=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ka{static get(t){return t instanceof Window?new Ja:t instanceof HTMLElement?new Ga(t):new Za(t)}}class Za{constructor(t){Fa.set(this,void 0),Va.set(this,void 0),Xa(this,Va,t),Xa(this,Fa,t.getBoundingClientRect())}getHeight(){return Ya(this,Fa).height}getWidth(){return Ya(this,Fa).width}getTop(){return Ya(this,Fa).top}getLeft(){return Ya(this,Fa).left}getScrollHeight(){return Ya(this,Va).scrollHeight}getScrollWidth(){return Ya(this,Va).scrollWidth}getScrollTop(){return Ya(this,Va).scrollTop}getScrollLeft(){return Ya(this,Va).scrollLeft}queryAll(t){return[...Ya(this,Va).querySelectorAll(t)]}}Fa=new WeakMap,Va=new WeakMap;class Ga{constructor(t){ja.set(this,void 0),Xa(this,ja,t)}getHeight(){return Ya(this,ja).offsetHeight}getWidth(){return Ya(this,ja).offsetWidth}getTop(){return Ya(this,ja).offsetTop}getLeft(){return Ya(this,ja).offsetLeft}getScrollHeight(){return Ya(this,ja).scrollHeight}getScrollWidth(){return Ya(this,ja).scrollWidth}getScrollTop(){return Ya(this,ja).scrollTop}getScrollLeft(){return Ya(this,ja).scrollLeft}queryAll(t){return[...Ya(this,ja).querySelectorAll(t)]}}ja=new WeakMap;class Ja{getHeight(){return window.innerHeight}getWidth(){return window.innerWidth}getTop(){return 0}getLeft(){return 0}getScrollHeight(){return window.innerHeight}getScrollWidth(){return window.innerWidth}getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}queryAll(t){return[...document.querySelectorAll(t)]}}var Qa,tl,el,il,sl,nl,rl,ol,hl,al,ll=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},cl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ul{constructor(t,e){Qa.set(this,void 0),tl.set(this,void 0),el.set(this,void 0),il.set(this,void 0),sl.set(this,void 0),nl.set(this,void 0),rl.set(this,void 0),ol.set(this,void 0),hl.set(this,void 0),al.set(this,void 0),ll(this,Qa,t),ll(this,ol,Ka.get(t)),ll(this,tl,!1),ll(this,el,it(e,0,100,0)),ll(this,il,ll(this,sl,0)),ll(this,rl,!1),ll(this,nl,void 0),ll(this,hl,new yh(50,!1,this.onScrollFinish.bind(this))),ll(this,al,this.listener.bind(this))}setCallback(t){ll(this,nl,t)}attach(){cl(this,Qa).addEventListener("scroll",cl(this,al)),ll(this,rl,!0),this.listener(void 0,!0,"init")}detach(){cl(this,Qa).removeEventListener("scroll",cl(this,al)),cl(this,hl).stop(),ll(this,rl,!1)}setTarget(t){t!==cl(this,Qa)&&(this.detach(),ll(this,Qa,t),this.attach())}setThreshold(t){ll(this,el,it(t,0,100,0))}isInProgress(){return cl(this,tl)}isAttached(){return cl(this,rl)}listener(t,e,i){if(!J(cl(this,nl)))return;let s=cl(this,ol).getScrollLeft(),n=cl(this,ol).getScrollTop();ll(this,il,cl(this,il)+s),ll(this,sl,cl(this,sl)+n),cl(this,tl)||!this.passedThreshold()&&J(t)||(ll(this,tl,!0),cl(this,nl).call(this,{base:t,top:n,left:s,initial:null!=e&&e,scrolling:J(t),source:null!=i?i:"event"}),J(t)&&cl(this,hl).start(),ll(this,tl,!1),ll(this,il,0),ll(this,sl,0))}passedThreshold(){return cl(this,el)<=0||cl(this,il)>=cl(this,el)||cl(this,sl)>=cl(this,el)}onScrollFinish(){this.listener(void 0,!1,"task")}}Qa=new WeakMap,tl=new WeakMap,el=new WeakMap,il=new WeakMap,sl=new WeakMap,nl=new WeakMap,rl=new WeakMap,ol=new WeakMap,hl=new WeakMap,al=new WeakMap;var dl,pl,gl,vl,fl,ml,wl,kl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},yl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class bl{matches(t,e,i,s){return i>0&&e>=i||s>0&&t>=s}}class Ml{constructor(){dl.set(this,void 0),pl.set(this,void 0),gl.set(this,void 0),vl.set(this,void 0),fl.set(this,void 0),ml.set(this,void 0),wl.set(this,void 0),kl(this,dl,0),kl(this,pl,0),kl(this,vl,0),kl(this,gl,0),kl(this,wl,100),kl(this,fl,!1),kl(this,ml,!1)}matches(t,e,i,s){return this.fitsOffsetY(t,s)||this.fitsOffsetX(e,i)}fitsOffsetX(t,e){if(e<=0)return!1;let i=t-yl(this,dl);return t>=e&&i>yl(this,wl)?kl(this,fl,!0):yl(this,fl)&&i<-yl(this,wl)&&kl(this,fl,!1),(i<0&&yl(this,vl)<i||i>=0&&yl(this,vl)>i)&&kl(this,dl,t),kl(this,vl,i),yl(this,fl)}fitsOffsetY(t,e){if(e<=0)return!1;let i=t-yl(this,pl);return t>=e&&i>yl(this,wl)?kl(this,ml,!0):yl(this,ml)&&i<-yl(this,wl)&&kl(this,ml,!1),(i<0&&yl(this,gl)<i||i>=0&&yl(this,gl)>i)&&kl(this,pl,t),kl(this,gl,i),yl(this,ml)}}dl=new WeakMap,pl=new WeakMap,gl=new WeakMap,vl=new WeakMap,fl=new WeakMap,ml=new WeakMap,wl=new WeakMap;var Cl,Al,El,Wl,Tl,xl,Sl,Ll,Pl,Il,Dl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ol{constructor(){this.offsetX=0,this.offsetY=0,this.target="",this.root=!1,this.action="",this.mode="static"}parse(t){this.target=t.target,this.action=t.action,this.offsetX=ht(t.offsetX,-1),this.offsetY=ht(t.offsetY,-1),this.root=ut(t.root),this.mode=pt(t.mode,"static")}}class Hl{constructor(t){this.attribute=(null!=t?t:"cui")+"-offset"}getStyle(){return null}get(t,e){return new Nl(t,e,this.attribute)}}class Nl extends Xn{constructor(t,e,i){super("CuiOffsetHandler",t,i,new Ol,e),Cl.set(this,void 0),Al.set(this,void 0),El.set(this,void 0),Wl.set(this,void 0),Tl.set(this,void 0),xl.set(this,void 0),Sl.set(this,void 0),Ll.set(this,void 0),Pl.set(this,void 0),Il.set(this,void 0),this.element=t,Dl(this,Al,this.element),Dl(this,El,e),Dl(this,Wl,!1),Dl(this,Tl,[]),Dl(this,xl,0),Dl(this,Sl,0),Dl(this,Ll,20),Dl(this,Pl,this.element),Dl(this,Il,null),Dl(this,Cl,void 0)}onInit(){this.parseAttribute(),Dl(this,Cl,new ul(this.args.root?window:this.element,this.utils.setup.scrollThreshold)),Bl(this,Cl).setCallback(this.onScroll.bind(this)),Bl(this,Cl).attach()}onUpdate(){this.parseAttribute()}onDestroy(){Bl(this,Cl)&&Bl(this,Cl).detach()}onScroll(t){this.checkAndPerformActions(t)}parseAttribute(){Dl(this,Pl,this.getRoot()),Dl(this,Al,this.getTarget()),Dl(this,Tl,Ti.get(this.args.action)),Dl(this,Il,class{static get(t){return"dynamic"===t?new Ml:new bl}}.get(this.args.mode))}checkAndPerformActions(t){J(Bl(this,Il))||this.logError("Cannot perform - mode handler not initialized","checkAndPerformActions");let e=Bl(this,Il).matches(t.top,t.left,this.args.offsetX,this.args.offsetY);if(e!==Bl(this,Wl))return this.act(e),Dl(this,Wl,e),void this.callEvent(Bl(this,Wl),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top));this.exceededThreshold(t.left,t.top)&&(this.callEvent(Bl(this,Wl),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top)),Dl(this,xl,t.left),Dl(this,Sl,t.top))}act(t){nt(Bl(this,Tl),Bl(this,Al))&&(this.isLocked=!0,Bl(this,Tl).forEach(e=>{t?e.add(Bl(this,Al),Bl(this,El)):e.remove(Bl(this,Al),Bl(this,El))}),this.isLocked=!1)}callEvent(t,e,i,s,n,r,o){this.emitEvent(z,{matches:Bl(this,Wl),offsetX:e,offsetY:i,ratioX:r,ratioY:o,scrolling:s,source:n,timestamp:Date.now()})}getRoot(){return this.args.root?document.body:this.element}exceededThreshold(t,e){return Math.abs(t-Bl(this,xl))>Bl(this,Ll)||Math.abs(e-Bl(this,Sl))>Bl(this,Ll)}calcaRatio(t,e){let i=parseFloat(((Bl(this,Pl).clientHeight+e)/Bl(this,Pl).scrollHeight).toFixed(2));return[et(parseFloat(((Bl(this,Pl).clientWidth+t)/Bl(this,Pl).scrollWidth).toFixed(2)),0,1),et(i,0,1)]}getTarget(){let t=this.args.target?Bl(this,Pl).querySelector(this.args.target):null;return null!=t?t:this.element}}Cl=new WeakMap,Al=new WeakMap,El=new WeakMap,Wl=new WeakMap,Tl=new WeakMap,xl=new WeakMap,Sl=new WeakMap,Ll=new WeakMap,Pl=new WeakMap,Il=new WeakMap;var $l,ql,_l,Rl=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},zl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ul=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fl{constructor(t){$l.set(this,void 0),zl(this,$l,null!=t?t:300),this.target="",this.action="",this.timeout=0,this.prevent=!1,this.state=""}parse(t){if(J(t)&&gt(t))return this.target=t,this.action="",this.timeout=Ul(this,$l),this.prevent=!1,void(this.state="");this.target=pt(t.target,""),this.action=t.action,this.timeout=ht(t.timeout,Ul(this,$l)),this.prevent=ut(t.prevent),this.state=t.state}}$l=new WeakMap;class Vl{constructor(t){ql.set(this,void 0),zl(this,ql,null!=t?t:"cui"),this.attribute=Ul(this,ql)+"-open"}getStyle(){return null}get(t,e){return new jl(t,e,this.attribute,Ul(this,ql))}}ql=new WeakMap;class jl extends Xn{constructor(t,e,i,s){super("CuiOpenHandler",t,i,new Fl(e.setup.animationTime),e),_l.set(this,void 0),zl(this,_l,null),this.onClick=this.onClick.bind(this)}onInit(){this.element.addEventListener("click",this.onClick),zl(this,_l,this.onEvent(S,this.onOpen.bind(this)))}onUpdate(){}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(S,Ul(this,_l))}onClick(t){this.onOpen(t),this.args.prevent&&t.preventDefault()}onOpen(t){if(this.isLocked)return;const e=this.getTarget(this.args.target);J(e)?(this.isLocked=!0,this.run(e).then(i=>{this.activateTarget(t,e,i)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return Rl(this,void 0,void 0,(function*(){let e=t.$cuid;if(J(e))return this._log.debug("Open cUI component"),yield this.utils.bus.emit(S,e,this.args.state),!1;if(this._log.debug("Open html component"),nt(this.args.timeout,this.args.action)){this._log.debug("Perfrom an action");let e=Ti.get(this.args.action);return yield this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.setActiveClass(t)}),!0}return this.setActiveClassAsync(t),!0}))}setActiveClass(t){J(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClass(this.activeClassName,t)}setActiveClassAsync(t){this.fetch(()=>{J(t)&&!this.helper.hasClass(this.activeClassName,t)&&this.helper.setClassesAs(t,this.activeClassName)})}activateTarget(t,e,i){J(e)&&!this.helper.hasClass(this.activeClassName,e)&&this.helper.setClassesAs(e,this.activeClassName),i&&this.emitOpen(t)}emitOpen(t){this.emitEvent(L,{event:t,state:this.args.state,timestamp:Date.now()})}getTarget(t){if(J(t))return document.querySelector(t);let e=this.element.parentElement,i=J(e)?e.querySelectorAll("[cuid]"):void 0;return!i||i.length<2?void 0:function(t,e){let i=t.length;if(t&&0!==i)for(let s=0;s<i;s++)if(e(t[s],s))return t[s]}([...i],t=>t!==this.element)}}_l=new WeakMap;var Xl,Yl,Kl,Zl,Gl,Jl,Ql,tc,ec,ic=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},sc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class nc{constructor(){this.mode="simple",this.default="",this.small=this.medium=this.large=this.xlarge=void 0,this.delay=0}parse(t){var e,i,s,n;this.default=pt(t.default,""),this.small=null!==(e=t.small)&&void 0!==e?e:t.s,this.medium=null!==(i=t.medium)&&void 0!==i?i:t.m,this.large=null!==(s=t.large)&&void 0!==s?s:t.l,this.xlarge=null!==(n=t.xlarge)&&void 0!==n?n:t.xl,this.mode="smart"===t.mode?"smart":"simple",this.delay=ht(t.delay,0)}}class rc{constructor(t){Xl.set(this,void 0),ic(this,Xl,null!=t?t:"cui"),this.attribute=sc(this,Xl)+"-resize"}getStyle(){return null}get(t,e){return new oc(t,e,this.attribute)}}Xl=new WeakMap;class oc extends Xn{constructor(t,e,i){super("CuiResizeHandler",t,i,new nc,e),Yl.set(this,void 0),Kl.set(this,void 0),Zl.set(this,void 0),Gl.set(this,void 0),Jl.set(this,void 0),Ql.set(this,void 0),tc.set(this,void 0),ec.set(this,void 0),ic(this,Yl,null),ic(this,Kl,new Ca(document.documentElement,[0,.1])),sc(this,Kl).setCallback(this.onIntersection.bind(this)),ic(this,Jl,""),ic(this,Gl,""),ic(this,Zl,"none"),ic(this,tc,!1),ic(this,ec,void 0),ic(this,Ql,void 0)}onInit(){ic(this,Yl,this.utils.bus.on(x,this.resize.bind(this))),sc(this,Kl).connect(),sc(this,Kl).observe(this.element),ic(this,Zl,rt(window.innerWidth)),ic(this,tc,this.isInViewport(this.element)),this.setNewValue(),this.updateElement()}onUpdate(){this.setNewValue(),this.updateElement()}onDestroy(){null!==sc(this,Yl)&&(this.utils.bus.detach(x,sc(this,Yl)),ic(this,Yl,null)),sc(this,Kl).unobserve(this.element),sc(this,Kl).disconnect()}resize(t){ic(this,Zl,t.current),this.setNewValue(),this.updateElement()}onIntersection(t){t.length>0&&ic(this,tc,t[0].isIntersecting),this.updateElement()}setNewValue(){let t=this.isSmartMode()?this.getSmartValue(sc(this,Zl)):this.getValue(sc(this,Zl),!0);t&&t!==sc(this,Gl)&&ic(this,Gl,t)}getValue(t,e){let i=void 0;switch(t){case"xlarge":i=this.args.xlarge;break;case"large":i=this.args.large;break;case"medium":i=this.args.medium;break;case"small":i=this.args.small;break;default:i=this.args.default}return e&&!i?this.args.default:i}getSmartValue(t){var e,i,s,n;let r=this.args.default;return"none"===t?r:(r=null!==(e=this.args.small)&&void 0!==e?e:r,"small"===t?r:(r=null!==(i=this.args.medium)&&void 0!==i?i:r,"medium"===t?r:(r=null!==(s=this.args.large)&&void 0!==s?s:r,"large"===t?r:null!==(n=this.args.xlarge)&&void 0!==n?n:r)))}updateElement(){sc(this,tc)||!this.isSmartMode()?J(sc(this,Gl))?sc(this,Jl)!==sc(this,Gl)&&this.run(()=>{let t=Wi.get(sc(this,Gl));this.mutate(()=>{sc(this,Ql)&&sc(this,Ql).remove(this.element),t.add(this.element),ic(this,Jl,sc(this,Gl)),ic(this,Ql,t)})}):this.logWarning("Not eligible to set value: "+sc(this,Gl)):this.logInfo("Not intersecting")}isSmartMode(){return"smart"===this.args.mode}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}run(t){sc(this,ec)&&(clearTimeout(sc(this,ec)),ic(this,ec,void 0)),ic(this,ec,setTimeout(()=>{t(),ic(this,ec,void 0)},this.args.delay))}}Yl=new WeakMap,Kl=new WeakMap,Zl=new WeakMap,Gl=new WeakMap,Jl=new WeakMap,Ql=new WeakMap,tc=new WeakMap,ec=new WeakMap;var hc,ac,lc,cc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},uc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dc{constructor(t){this.attribute=J(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new gc(t,e,this.attribute)}}class pc{constructor(){this.target="",this.parent="",this.behavior="auto"}parse(t){this.target=pt(t.target,""),this.parent=pt(t.parent,""),this.behavior=J(t.behavior)&&"smooth"===t.behavior.toLowerCase()?"smooth":"auto"}}class gc extends Xn{constructor(t,e,i){super("CuiScrollHandler",t,i,new pc,e),hc.set(this,void 0),ac.set(this,void 0),lc.set(this,void 0),this.element=t,cc(this,hc,null),cc(this,ac,null),cc(this,lc,this.onClick.bind(this))}onInit(){this.element.addEventListener("click",uc(this,lc)),this.setTargets()}onUpdate(){this.setTargets()}onDestroy(){this.element.removeEventListener("click",uc(this,lc))}onClick(t){if(!nt(uc(this,ac),uc(this,hc)))return;let e=function(t){if(!J(t))return-1;let e=t.offsetTop-parseInt(at(t,"margin-top"))-parseInt(at(t,"padding-top"))-parseInt(at(t,"border-top-width"));return e<0?t.offsetTop:e}(uc(this,ac))-uc(this,hc).offsetTop,i=e-uc(this,hc).scrollTop;uc(this,hc).scrollBy({top:i,behavior:this.args.behavior}),this.emitEvent(N,{to:e,by:i,target:uc(this,ac),parent:uc(this,hc),timestamp:Date.now()}),t.preventDefault()}setTargets(){cc(this,ac,document.querySelector(this.args.target)),J(uc(this,ac))&&cc(this,hc,J(this.args.parent)?document.querySelector(this.args.parent):uc(this,ac).parentElement)}}hc=new WeakMap,ac=new WeakMap,lc=new WeakMap;var vc,fc,mc,wc,kc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},yc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class bc{constructor(t,e){var i;vc.set(this,void 0),fc.set(this,void 0),mc.set(this,void 0),wc.set(this,void 0),kc(this,wc,Ka.get(t)),kc(this,vc,new ul(t,null!==(i=null==e?void 0:e.threshold)&&void 0!==i?i:0)),yc(this,vc).setCallback(this.onScroll.bind(this)),kc(this,mc,[]),kc(this,fc,void 0)}setChildren(t){kc(this,mc,t)}setThreshold(t){yc(this,vc).setThreshold(t)}setCallback(t){kc(this,fc,t)}setParent(t){kc(this,wc,Ka.get(t)),yc(this,vc).setTarget(t)}isInProgress(){return yc(this,vc).isInProgress()}attach(){this.isAttached()||yc(this,vc).attach()}detach(){this.isAttached()&&yc(this,vc).detach()}isAttached(){return yc(this,vc)&&yc(this,vc).isAttached()}onScroll(t){nt(yc(this,mc),yc(this,fc))&&yc(this,fc)&&yc(this,fc).call(this,this.prepareCallbackResult(t))}calcChildVerticalRatio(t,e,i){let s=t.offsetTop+t.offsetHeight;return et(((i<s?i:s)-(e>t.offsetTop?e:t.offsetTop))/t.offsetHeight,0,1)}calcChildHorizontalRatio(t,e,i){let s=t.offsetLeft+t.offsetWidth;return et(((i<s?i:s)-(e>t.offsetLeft?e:t.offsetLeft))/t.offsetWidth,0,1)}prepareCallbackResult(t){var e,i;let s=t.top+yc(this,wc).getHeight(),n=t.left+yc(this,wc).getWidth();return{ev:t.base,top:t.top,left:t.left,scrolling:null!==(e=t.scrolling)&&void 0!==e&&e,initial:null!==(i=t.initial)&&void 0!==i&&i,source:t.source,items:yc(this,mc).map((e,i)=>({verticalRatio:this.calcChildVerticalRatio(e,t.top,s),horizontalRatio:this.calcChildHorizontalRatio(e,t.left,n),element:e}))}}}vc=new WeakMap,fc=new WeakMap,mc=new WeakMap,wc=new WeakMap;class Mc{static get(t){return"multi"===t?new Ec:new Ac}}class Cc{constructor(t){this.previous=t}getMatching(t,e){return e.reduce((e,i,s)=>(i.verticalRatio>t&&e.push(s),e),[])}addActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.add(e)})}removeActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.remove(e)})}forEachAction(t,e,i){nt(t,e,i)&&t.forEach(t=>{e.forEach(e=>{J(e)&&i(t,e)})})}}class Ac extends Cc{constructor(){super(-1)}update(t,e,i,s,n){let r=this.getMatching(e,t),o=r.length,h=o>0?r[o-1]:-1,a={changed:!1};if(!this.matches(h)){if(this.previous>-1&&this.removeActions(i,t[this.previous].element),h>-1){let e=t[h].element;a.intersecting=[e],this.addActions(i,e)}return nt(s,n)&&(this.previous>-1&&this.removeActions(n,s[this.previous]),h>-1&&this.addActions(n,s[h])),this.previous=h,a.changed=!0,a.intersecting=[],a}return a}matches(t){return t===this.previous}}class Ec extends Cc{constructor(){super([])}update(t,e,i,s,n){let r=this.getMatching(e,t),o={changed:!1};if(!this.matches(r)){let e=r.map(e=>t[e].element);return this.removeActions(i,...this.previous.map(e=>t[e].element)),this.addActions(i,...e),o.intersecting=e,nt(s,n)&&(this.removeActions(n,...this.previous.map(t=>s[t])),this.addActions(n,...r.map(t=>s[t]))),this.previous=r,o.changed=!0,o}return o}matches(t){let e=t.length;if(e!==this.previous.length)return!1;let i=0;for(i=0;i<e;i++)if(!this.previous.includes(t[i]))return!1;return!0}}var Wc,Tc,xc,Sc,Lc,Pc,Ic,Dc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Bc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Oc{constructor(){this.ratio=0,this.mode="single",this.threshold=-1,this.selector="",this.action="",this.isRoot=!1,this.link="",this.linkAction=""}parse(t){var e;this.selector=":scope "+(null!==(e=t.selector)&&void 0!==e?e:"> *"),this.action=pt(t.action,""),this.link=pt(t.link,""),this.linkAction=pt(t.linkAction,""),this.ratio=it(parseFloat(t.ratio),0,1,0),this.isRoot=ut(t.isRoot),this.mode="multi"===(null==t?void 0:t.mode)?"multi":"single",this.threshold=ht(t.threshold,-1)}}class Hc{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new Nc(t,e,this.attribute)}}class Nc extends Xn{constructor(t,e,i){super("CuiScrollspyHandler",t,i,new Oc,e),Wc.set(this,void 0),Tc.set(this,void 0),xc.set(this,void 0),Sc.set(this,void 0),Lc.set(this,void 0),Pc.set(this,void 0),Ic.set(this,void 0),this.element=t,Dc(this,Wc,new bc(this.element,{threshold:this.utils.setup.scrollThreshold})),Dc(this,Tc,[]),Dc(this,xc,[]),Dc(this,Sc,[]),Dc(this,Lc,void 0),Dc(this,Pc,void 0),Dc(this,Ic,void 0)}onInit(){this.parseAttribute(),Bc(this,Wc).setCallback(this.onIntersection.bind(this)),Bc(this,Wc).attach()}onUpdate(){this.updateAttributes()}onDestroy(){Bc(this,Wc).detach()}onIntersection(t){if(!Bc(this,Ic))return void this.logError("Cannot perform - mode handler not initialized","OnIntersection");let e=Date.now();this.mutate(()=>{let i=Bc(this,Ic).update(t.items,this.args.ratio,Bc(this,xc),Bc(this,Tc),Bc(this,Sc));i.changed&&this.emitEvent($,{intersecting:i.intersecting,timestamp:e})}),this.emitEvent(N,{top:t.top,left:t.left,scrolling:t.scrolling,initial:t.initial,source:t.source,timestamp:e})}parseAttribute(){Dc(this,Lc,this.args.isRoot?window:this.element),Dc(this,Pc,Ka.get(Bc(this,Lc)));let t=this.args.selector?Bc(this,Pc).queryAll(this.args.selector):[];Bc(this,Wc).setChildren(t),Bc(this,Wc).setThreshold(this.args.threshold),Dc(this,Tc,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),Dc(this,xc,Ti.get(this.args.action)),Dc(this,Sc,Ti.get(this.args.linkAction)),Dc(this,Ic,Mc.get(this.args.mode))}updateAttributes(){if(this.prevArgs&&this.args.isRoot!==this.prevArgs.isRoot&&(Dc(this,Lc,this.args.isRoot?window:this.element),Dc(this,Pc,Ka.get(Bc(this,Lc))),Bc(this,Wc).setParent(Bc(this,Lc))),this.prevArgs&&Bc(this,Pc)&&this.args.selector!==this.prevArgs.selector){let t=this.args.selector?Bc(this,Pc).queryAll(this.args.selector):[];Bc(this,Wc).setChildren(t)}Bc(this,Wc).setThreshold(this.args.threshold),Dc(this,Tc,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),Dc(this,xc,Ti.get(this.args.action)),Dc(this,Sc,Ti.get(this.args.linkAction)),Dc(this,Ic,Mc.get(this.args.mode))}}Wc=new WeakMap,Tc=new WeakMap,xc=new WeakMap,Sc=new WeakMap,Lc=new WeakMap,Pc=new WeakMap,Ic=new WeakMap;var $c,qc,_c,Rc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},zc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Uc{constructor(){$c.set(this,void 0),qc.set(this,void 0),_c.set(this,void 0),Rc(this,$c,[]),Rc(this,qc,0),Rc(this,_c,5)}setElements(t){Rc(this,$c,t),Rc(this,qc,zc(this,$c).length)}setThreshold(t){Rc(this,_c,t)}detect(t,e){if(!J(zc(this,$c)))return[-1,void 0];let i=-1,s=void 0;for(let n=0;n<zc(this,qc);n++)if(this.isInBounds(zc(this,$c)[n],t,e)){0===n?(i=n,s=zc(this,$c)[n]):n<zc(this,qc)-1&&(i=n+1,s=zc(this,$c)[n+1]);break}return[i,s]}isInBounds(t,e,i){const s=t.getBoundingClientRect();return e>s.left-zc(this,_c)&&e<s.left+s.width+zc(this,_c)&&i>s.top-zc(this,_c)&&i<s.top+s.height+zc(this,_c)}}$c=new WeakMap,qc=new WeakMap,_c=new WeakMap;var Fc,Vc,jc,Xc,Yc,Kc,Zc,Gc,Jc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class tu{constructor(t){Fc.set(this,void 0),Vc.set(this,void 0),jc.set(this,void 0),Xc.set(this,void 0),Yc.set(this,void 0),Kc.set(this,void 0),Zc.set(this,void 0),Gc.set(this,void 0),Jc(this,Fc,t),Jc(this,Vc,new Ms),Jc(this,Kc,150),Jc(this,Zc,!1),Jc(this,Gc,void 0),Qc(this,Vc).setTarget(Qc(this,Fc)),Qc(this,Vc).preventDefault(!1),Qc(this,Vc).setCallback(this.onMove.bind(this)),Jc(this,jc,void 0),Jc(this,Xc,void 0),Jc(this,Yc,void 0)}setLongPressTimeout(t){Jc(this,Kc,t)}onDragStart(t){Jc(this,jc,t)}onDragOver(t){Jc(this,Xc,t)}onDragEnd(t){Jc(this,Yc,t)}attach(){Qc(this,Vc).attach()}detach(){Qc(this,Vc).detach()}onMove(t){switch(t.type){case"down":if(Qc(this,Zc))return;Jc(this,Gc,setTimeout(()=>{Qc(this,jc)&&Qc(this,jc).call(this,t)&&Jc(this,Zc,!0)},Qc(this,Kc)));break;case"move":if(this.cancelTimeout(),!Qc(this,Zc))return;Qc(this,Xc)&&Qc(this,Xc).call(this,t);break;case"up":if(this.cancelTimeout(),!Qc(this,Zc))return;Qc(this,Yc)&&Qc(this,Yc).call(this,t),Jc(this,Zc,!1)}}cancelTimeout(){Qc(this,Gc)&&(clearTimeout(Qc(this,Gc)),Jc(this,Gc,void 0))}}Fc=new WeakMap,Vc=new WeakMap,jc=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,Zc=new WeakMap,Gc=new WeakMap;var eu,iu,su,nu,ru,ou,hu,au,lu,cu,uu,du,pu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},gu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class vu{constructor(){this.target=":scope  > *",this.trigger=":scope  > *",this.timeout=150,this.threshold=5}parse(t){this.target=t.target?":scope  "+t.target:":scope  > *",this.trigger=t.trigger?":scope  "+t.trigger:":scope  > *",this.timeout=ht(t.timeout,150),this.threshold=ht(t.threshold,5)}}class fu{constructor(t){eu.set(this,void 0),pu(this,eu,null!=t?t:"cui"),this.attribute=gu(this,eu)+"-sortable"}getStyle(){return null}get(t,e){return new mu(t,this.attribute,e,gu(this,eu))}}eu=new WeakMap;class mu extends Xn{constructor(t,e,i,s){super("CuiSortableHandler",t,e,new vu,i),iu.set(this,void 0),su.set(this,void 0),nu.set(this,void 0),ru.set(this,void 0),ou.set(this,void 0),hu.set(this,void 0),au.set(this,void 0),lu.set(this,void 0),cu.set(this,void 0),uu.set(this,void 0),du.set(this,void 0),pu(this,nu,[]),pu(this,su,[]),pu(this,ou,-1),pu(this,ru,null),pu(this,cu,null),pu(this,hu,null),pu(this,iu,new tu(t)),gu(this,iu).onDragStart(this.onDragStart.bind(this)),gu(this,iu).onDragOver(this.onDragOver.bind(this)),gu(this,iu).onDragEnd(this.onDragEnd.bind(this)),pu(this,au,vt("{prefix}-moving",s)),pu(this,du,vt("{prefix}-sortable-preview",s)),pu(this,lu,new Uc),pu(this,uu,new Dr),gu(this,uu).setOnFinish(()=>{let t=gu(this,ru),e=gu(this,ou);this.stopMovementPrep(),this.utils.bus.emit(j,null,!1),this.emitEvent(K,{item:t,index:e,timestamp:new Date})})}onInit(){gu(this,iu).attach(),this.getTargetsAndTrggers(),gu(this,lu).setThreshold(this.args.threshold)}onUpdate(){!this.prevArgs||this.args.target===this.prevArgs.target&&this.args.trigger===this.prevArgs.trigger||this.getTargetsAndTrggers(),gu(this,iu).setLongPressTimeout(this.args.timeout)}onDestroy(){gu(this,iu).detach()}getTargetsAndTrggers(){try{if(pu(this,nu,[...this.element.querySelectorAll(this.args.target)]),pu(this,su,[...this.element.querySelectorAll(this.args.trigger)]),gu(this,su).length!==gu(this,nu).length)throw new Error(`Triggers (count ${gu(this,su).length}) and targets (count ${gu(this,nu).length}) selector are not correct`);gu(this,lu).setElements(gu(this,nu))}catch(t){this._log.error("Incorrect trigger or target selector"),this._log.exception(t,"getTargetsAndTrggers"),pu(this,nu,[]),pu(this,su,[])}}onDragStart(t){return pu(this,ou,this.getPressedElementIdx(t.target)),pu(this,ru,gu(this,ou)>-1?gu(this,nu)[gu(this,ou)]:null),!!J(gu(this,ru))&&(this.utils.bus.emit(j,null,!0),this.startMovementPrep(t),this.emitEvent(Z,{item:gu(this,ru),index:gu(this,ou),timestamp:new Date}),!0)}onDragOver(t){this.move(t),t.event.preventDefault()}onDragEnd(t){J(gu(this,hu))&&(gu(this,uu).setElement(gu(this,hu)),gu(this,uu).setProps(this.getFinishAnimation()),gu(this,uu).finish(0,100,!1))}getPressedElementIdx(t){return gu(this,su).findIndex(e=>e.contains(t))}startMovementPrep(t){this.mutate(()=>{this.createPreview(),J(gu(this,ru))&&this.helper.setClass(gu(this,au),gu(this,ru)),this.helper.setClass("cui-locked",this.element),this.helper.setClass(v,document.body),this.setPreviewPosition(t),this.setCurrentPosition(t)})}stopMovementPrep(){this.mutate(()=>{J(gu(this,ru))&&this.helper.removeClass(gu(this,au),gu(this,ru)),this.helper.removeClass(v,document.body),this.helper.removeClass("cui-locked",this.element),this.removePreview(),pu(this,ru,null),pu(this,cu,null),this.getTargetsAndTrggers()})}move(t){this.mutate(()=>{this.setPreviewPosition(t),this.setCurrentPosition(t)})}createPreview(){J(gu(this,ru))?(pu(this,hu,new Fi("div").setClasses(gu(this,du)).build()),gu(this,hu).style.width=gu(this,ru).offsetWidth+"px",gu(this,hu).style.height=gu(this,ru).offsetHeight+"px",document.body.appendChild(gu(this,hu))):this.logError("Cannot create preview - current target does not exist","createPreview")}removePreview(){J(gu(this,hu))&&(gu(this,hu).remove(),pu(this,hu,null))}setPreviewPosition(t){J(gu(this,hu))&&(gu(this,hu).style.top=t.y+"px",gu(this,hu).style.left=t.x+"px")}setCurrentPosition(t){if(!gu(this,ru))return;let[e,i]=gu(this,lu).detect(t.x,t.y);if(e!==gu(this,ou)&&i&&gu(this,cu)!==i){let t=i;this.insertElement(gu(this,ru),t),pu(this,cu,t),this.getTargetsAndTrggers(),pu(this,ou,e)}}insertElement(t,e){J(e)?this.element.insertBefore(t,e):this.element.appendChild(t)}getFinishAnimation(){if(!nt(gu(this,ru),gu(this,hu)))return{opacity:{from:1,to:0}};const t=gu(this,ru).getBoundingClientRect();return{opacity:{from:1,to:0},top:{from:gu(this,hu).offsetTop,to:t.top>0?t.top:gu(this,hu).offsetTop,unit:"px"},left:{from:gu(this,hu).offsetLeft,to:t.left>0?t.left:gu(this,hu).offsetLeft,unit:"px"}}}}iu=new WeakMap,su=new WeakMap,nu=new WeakMap,ru=new WeakMap,ou=new WeakMap,hu=new WeakMap,au=new WeakMap,lu=new WeakMap,cu=new WeakMap,uu=new WeakMap,du=new WeakMap;var wu,ku,yu,bu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Mu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Cu{constructor(){this.spinner="circle",this.scale=1}parse(t){gt(t)?this.spinner=pt(t,"circle"):(this.spinner=pt(t.spinner,"circle"),this.scale=ht(t.scale,1))}}class Au{constructor(t){wu.set(this,void 0),bu(this,wu,null!=t?t:"cui"),this.attribute=Mu(this,wu)+"-spinner",f.spinner_circle='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z"></path></svg>',f.spinner_circle_double='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z"></path><path d="M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z"></path></svg>'}getStyle(){return null}get(t,e){return new Eu(t,e,this.attribute,Mu(this,wu))}}wu=new WeakMap;class Eu extends Xn{constructor(t,e,i,s){super("CuiSpinnerHandler",t,i,new Cu,e),ku.set(this,void 0),yu.set(this,void 0),bu(this,ku,null),bu(this,yu,vt("{prefix}-animation-pause",s))}onInit(){bu(this,ku,this.onEvent(X,this.onPause.bind(this))),this.add()}onUpdate(){this.prevArgs&&this.args.spinner!==this.prevArgs.spinner&&this.add()}onDestroy(){this.removeIfAnyExisists(),this.detachEvent(X,Mu(this,ku))}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}add(){const t=J(this.args.spinner)?f["spinner_"+this.args.spinner]:null;if(!J(t))return void this._log.warning("Incorrect spinner name: "+this.args.spinner);this.removeIfAnyExisists();const e=new Qr(t).setScale(this.args.scale).build();this.mutate(this.addSpinner,e,this.args.spinner)}removeIfAnyExisists(){let t=this.element.querySelector("svg");t&&t.remove()}onPause(t){this.fetch(()=>{t&&!this.helper.hasClass(Mu(this,yu),this.element)?this.helper.setClassesAs(this.element,Mu(this,yu)):this.helper.removeClassesAs(this.element,Mu(this,yu))}),this.emitEvent(Y,t)}}ku=new WeakMap,yu=new WeakMap;var Wu,Tu,xu,Su,Lu,Pu,Iu,Du,Bu,Ou,Hu,Nu,$u,qu,_u,Ru,zu,Uu,Fu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Vu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ju=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xu{constructor(t,e){Wu.set(this,void 0),Tu.set(this,void 0),Vu(this,Wu,t),Vu(this,Tu,null!=e?e:300),this.targets="> li",this.timeout=ju(this,Tu),this.links="",this.autoTimeout=-1,this.height="",this.animation="",this.loop=!1}parse(t){this.targets=":scope "+pt(t.targets,"> li"),this.timeout=ht(t.timeout,ju(this,Tu)),this.links=t.links,this.autoTimeout=ht(t.autoTimeout,-1),this.height=pt(t.height,"auto"),this.animation=pt(t.animation,"slide"),this.loop=dt(t.loop,!1)}}Wu=new WeakMap,Tu=new WeakMap;class Yu{constructor(t){this.attribute=(null!=t?t:"cui")+"-slider"}getStyle(){return null}get(t,e){return new Ku(t,e,this.attribute)}}class Ku extends Kn{constructor(t,e,i){super("CuiSliderHandler",t,i,new Xu(e.setup.prefix,e.setup.animationTime),e),xu.set(this,void 0),Su.set(this,void 0),Lu.set(this,void 0),Pu.set(this,void 0),Iu.set(this,void 0),Du.set(this,void 0),Bu.set(this,void 0),Ou.set(this,void 0),Hu.set(this,void 0),Nu.set(this,void 0),$u.set(this,void 0),qu.set(this,void 0),_u.set(this,void 0),Ru.set(this,void 0),zu.set(this,void 0),Uu.set(this,void 0),Vu(this,xu,[]),Vu(this,Su,-1),Vu(this,Hu,-1),Vu(this,Lu,[]),Vu(this,Iu,null),Vu(this,Uu,null),Vu(this,Du,!1),Vu(this,Bu,-1),Vu(this,Ou,0),Vu(this,Nu,null),Vu(this,$u,.4),Vu(this,qu,new Dr),Vu(this,_u,new Dr),ju(this,qu).setOnFinish(this.onAnimationFinish.bind(this)),Vu(this,zu,0),Vu(this,Pu,new yh(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),Vu(this,Ru,Wn[this.args.animation])}onInit(){Vu(this,Iu,this.onEvent(O,this.onPushSwitch.bind(this))),Vu(this,Uu,this.onEvent(V,this.onMove.bind(this))),this.getTargets(),this.getLinks(),this.getActiveIndex(),this.setLinkActive(-1,ju(this,Su)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(ju(this,xu)[ju(this,Su)]))}),Vu(this,Pu,new yh(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),Vu(this,Ru,Wn[this.args.animation]),this.startTask()}onUpdate(){this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(ju(this,xu)[ju(this,Su)]))}),Vu(this,Ru,Wn[this.args.animation]),this.startTask()}onDestroy(){ju(this,Pu).stop(),this.detachEvent(O,ju(this,Iu)),this.detachEvent(V,ju(this,Uu))}onMutation(t){}onMove(t){if(this.isLocked||!ju(this,Ru))return;let e=ju(this,xu)[ju(this,Su)];switch(t.type){case"down":if(ju(this,Du)||!e.contains(t.target))return;Vu(this,Du,!0),Vu(this,Bu,t.x),ju(this,qu).setElement(e),this.helper.setClassesAs(document.body,v),t.event.cancelable&&t.event.preventDefault();break;case"up":if(!ju(this,Du))break;this.isLocked=!0;let i=Math.abs(ju(this,Ou)),s=i*this.args.timeout,n=i<=ju(this,$u);ju(this,qu).finish(i,s,n),ju(this,_u).finish(i,s,n),this.helper.removeClassesAs(document.body,v),Vu(this,Du,!1);break;case"move":if(!ju(this,Du))break;let r=(t.x-ju(this,Bu))/e.offsetWidth;if(Math.abs(r-ju(this,Ou))<.02)break;let o=bt(ju(this,Ou)>0?"next":"prev",ju(this,Su),ju(this,zu));Vu(this,Ou,this.adjustMoveRatio(r)),o!==ju(this,Hu)&&(ju(this,Nu)&&this.helper.removeClass(p,ju(this,Nu)),Vu(this,Nu,ju(this,xu)[o]),Vu(this,Hu,o),ju(this,_u).setElement(ju(this,Nu)),ju(this,_u).setProps(ju(this,Ou)>0?ju(this,Ru).previous.right:ju(this,Ru).previous.left),ju(this,qu).setProps(ju(this,Ou)>0?ju(this,Ru).current.right:ju(this,Ru).current.left),this.mutate(()=>{ju(this,Nu)&&this.helper.setClass(p,ju(this,Nu))})),this.mutate(()=>{ju(this,qu).update(Math.abs(ju(this,Ou))),ju(this,_u).update(Math.abs(ju(this,Ou)))}),t.event.cancelable&&t.event.preventDefault()}}adjustMoveRatio(t){return this.args.loop?t:ju(this,Su)===ju(this,zu)-1&&t>0||0===ju(this,Su)&&t<0?0:t}switch(t){return Fu(this,void 0,void 0,(function*(){return!this.isLocked&&(this.onPushSwitch(t),!0)}))}onAnimationFinish(t,e,i){this.isLocked=!1;let s=ju(this,xu)[ju(this,Hu)],n=ju(this,xu)[ju(this,Su)];e?(J(ju(this,Nu))&&(this.helper.removeClass(p,ju(this,Nu)),this.helper.removeAttribute("style",ju(this,Nu))),this.helper.removeAttribute("style",n),Vu(this,Hu,-1),Vu(this,Nu,null),Vu(this,Bu,-1),Vu(this,Ou,0)):ju(this,Hu)>-1&&this.mutate(()=>{this.helper.removeClass(p,s),this.helper.setClass(this.activeClassName,s),this.helper.removeClass(this.activeClassName,n),this.helper.removeAttribute("style",n),this.helper.removeAttribute("style",s),this.setLinkActive(ju(this,Su),ju(this,Hu)),this.emitEvent(H,{timestamp:Date.now(),index:ju(this,Hu)}),Vu(this,Su,ju(this,Hu)),Vu(this,Hu,-1),Vu(this,Nu,null),Vu(this,Bu,-1),Vu(this,Ou,0)}),this.startTask()}onPushSwitch(t){if(!J(t)||this.isLocked||!ju(this,Ru)||!this.args.loop&&0===ju(this,Su)&&"prev"===t||!this.args.loop&&ju(this,Su)===ju(this,zu)-1&&"next"===t)return;this.isLocked=!0;let e=bt(t,ju(this,Su),ju(this,zu));if(e==ju(this,Su)||e<0||e>=ju(this,xu).length)return this._log.warning(`Index ${t} is not within the suitable range`),!1;Vu(this,Hu,e);let i=ju(this,xu)[ju(this,Su)],s=ju(this,xu)[ju(this,Hu)];ju(this,qu).setElement(i),ju(this,_u).setElement(s),ju(this,qu).setProps("prev"===t?ju(this,Ru).current.left:ju(this,Ru).current.right),ju(this,_u).setProps("prev"===t?ju(this,Ru).previous.left:ju(this,Ru).previous.right),this.mutate(()=>{ju(this,qu).finish(0,this.args.timeout,!1),ju(this,_u).finish(0,this.args.timeout,!1),this.helper.setClass(p,s)})}getActiveIndex(){Vu(this,Su,J(ju(this,xu))?ju(this,xu).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return J(this.args.height)&&"auto"!==this.args.height?this.args.height:kt(t)+"px"}getTargets(){let t=this.element.querySelectorAll(this.args.targets);Vu(this,xu,t.length>0?[...t]:[]),Vu(this,zu,ju(this,xu).length)}getLinks(){Vu(this,Lu,J(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}setLinkActive(t,e){J(ju(this,Lu))&&this.mutate(()=>{lt(t,0,ju(this,Lu).length-1)&&this.helper.removeClass(this.activeClassName,ju(this,Lu)[t]),lt(e,0,ju(this,Lu).length-1)&&this.helper.setClass(this.activeClassName,ju(this,Lu)[e])})}startTask(){ju(this,Pu).stop(),this.args.autoTimeout&&ju(this,Pu).start()}}xu=new WeakMap,Su=new WeakMap,Lu=new WeakMap,Pu=new WeakMap,Iu=new WeakMap,Du=new WeakMap,Bu=new WeakMap,Ou=new WeakMap,Hu=new WeakMap,Nu=new WeakMap,$u=new WeakMap,qu=new WeakMap,_u=new WeakMap,Ru=new WeakMap,zu=new WeakMap,Uu=new WeakMap;var Zu,Gu,Ju,Qu,td,ed,id,sd,nd,rd,od=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},hd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ad=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ld{constructor(t,e){Zu.set(this,void 0),Gu.set(this,void 0),hd(this,Zu,t),hd(this,Gu,null!=e?e:300),this.targets="",this.in="",this.out="",this.timeout=ad(this,Gu),this.links="",this.switch="",this.autoTimeout=-1,this.height="",this.loop=!1}parse(t){this.targets=J(t.targets)?":scope "+t.targets:":scope  > *",this.in=pt(t.in,vt(".{prefix}-switch-animation-default-in",ad(this,Zu))),this.out=pt(t.out,vt(".{prefix}-switch-animation-default-out",ad(this,Zu))),this.timeout=ht(t.timeout,ad(this,Gu)),this.links=pt(t.links,""),this.switch=pt(t.switch,""),this.autoTimeout=ht(t.autoTimeout,-1),this.height=pt(t.height,"auto"),this.loop=ut(t.loop)}}Zu=new WeakMap,Gu=new WeakMap;class cd{constructor(t){this.attribute=(null!=t?t:"cui")+"-switch"}getStyle(){return null}get(t,e){return new ud(t,e,this.attribute)}}class ud extends Kn{constructor(t,e,i){super("CuiSwitchHandler",t,i,new ld(e.setup.prefix,e.setup.animationTime),e),Ju.set(this,void 0),Qu.set(this,void 0),td.set(this,void 0),ed.set(this,void 0),id.set(this,void 0),sd.set(this,void 0),nd.set(this,void 0),rd.set(this,void 0),hd(this,Ju,[]),hd(this,Qu,-1),hd(this,td,[]),hd(this,ed,[]),hd(this,sd,null),hd(this,nd,hd(this,rd,[])),hd(this,id,new yh(this.args.autoTimeout,!0,this.switch.bind(this,"next")))}onInit(){hd(this,sd,this.onEvent(O,this.onPushSwitch.bind(this))),this.parseArguments(),this.getTargets(),this.getActiveIndex(),this.getSwitches(),this.setSwitchesActive(ad(this,Qu)),this.setLinkActive(-1,ad(this,Qu)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(ad(this,Ju)[ad(this,Qu)]))}),hd(this,id,new yh(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),this.startTask()}onUpdate(){this.parseArguments(),this.getTargets(),this.getSwitches(),this.setSwitchesActive(ad(this,Qu)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(ad(this,Ju)[ad(this,Qu)]))}),this.startTask()}onDestroy(){ad(this,id).stop(),this.detachEvent(O,ad(this,sd))}onMutation(t){this.getTargets(),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(ad(this,Ju)[ad(this,Qu)]))})}switch(t){return od(this,void 0,void 0,(function*(){if(this.isLocked)return!1;this.getSwitches(),this.getActiveIndex();let e=bt(t,ad(this,Qu),ad(this,Ju).length);if(!this.args.loop&&("next"===t&&0===e||"prev"===t&&0===ad(this,Qu)))return this.logInfo("Switch blocked by loop settings","switch"),!1;if(e==ad(this,Qu)||e<0||e>=ad(this,Ju).length)return this.logWarning(`Index ${t} is not within the suitable range`,"switch"),!1;this.isLocked=!0,this.setSwitchesActive(e);let i=ad(this,Ju)[e];return yield this.actionsHelper.performSwitchAction(i,ad(this,Qu)>-1?ad(this,Ju)[ad(this,Qu)]:null,ad(this,nd),ad(this,rd),()=>{i.classList.add(this.activeClassName),ad(this,Qu)>-1&&ad(this,Ju)[ad(this,Qu)].classList.remove(this.activeClassName),this.setLinkActive(ad(this,Qu),e),this.helper.setStyle(this.element,"height",this.getElementHeight(i)),this.startTask(),this.isLocked=!1},this.args.timeout),this.emitEvent(H,{timestamp:Date.now(),index:e}),!0}))}onPushSwitch(t){this.switch(t)}getActiveIndex(){hd(this,Qu,J(ad(this,Ju))?ad(this,Ju).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return J(this.args.height)&&"auto"!==this.args.height?this.args.height:kt(t)+"px"}parseArguments(){hd(this,nd,Ti.get(this.args.in)),hd(this,rd,Ti.get(this.args.out)),hd(this,td,J(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}getTargets(){let t=this.element.querySelectorAll(this.args.targets);hd(this,Ju,t.length>0?[...t]:[])}getSwitches(){let t=J(this.args.switch)?document.querySelectorAll(this.args.switch):null;hd(this,ed,[]),t&&t.forEach(t=>{ad(this,ed).push(t)})}setLinkActive(t,e){J(ad(this,td))&&(lt(t,0,ad(this,td).length-1)&&this.helper.removeClass(this.activeClassName,ad(this,td)[t]),lt(e,0,ad(this,td).length-1)&&this.helper.setClass(this.activeClassName,ad(this,td)[e]))}setSwitchesActive(t){ad(this,ed).forEach(e=>{this.emitLinkSwitch(e.$cuid,t)})}emitLinkSwitch(t,e){J(t)&&this.utils.bus.emit(O,t,e)}startTask(){ad(this,id).stop(),this.args.autoTimeout&&ad(this,id).start()}}Ju=new WeakMap,Qu=new WeakMap,td=new WeakMap,ed=new WeakMap,id=new WeakMap,sd=new WeakMap,nd=new WeakMap,rd=new WeakMap;var dd,pd,gd,vd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class md{constructor(){this.index="",this.target=""}parse(t){J(t)&&(this.target=t.target,this.index=t.index)}}class wd{constructor(t){this.attribute=(null!=t?t:"cui")+"-switcher"}getStyle(){return null}get(t,e){return new kd(t,e,this.attribute)}}class kd extends Xn{constructor(t,e,i){super("CuiSwitcherHandler",t,i,new md,e),dd.set(this,void 0),pd.set(this,void 0),gd.set(this,void 0),vd(this,dd,null),vd(this,pd,"UL"===t.tagName),this.onClickEvent=this.onClickEvent.bind(this),vd(this,gd,[])}onInit(){this.setEvents(),this.getTarget()}onUpdate(){this.getTarget()}onDestroy(){this.removeEvents()}getTarget(){J(this.args.target)||vd(this,dd,null);let t=document.querySelector(this.args.target);J(t)&&vd(this,dd,t.$cuid)}setEvents(){if(fd(this,pd)){this.element.querySelectorAll("li > a").forEach((t,e)=>{let i=this.onListItemClick.bind(this,e);fd(this,gd).push(i),t.addEventListener("click",i)})}else this.element.addEventListener("click",this.onClickEvent)}removeEvents(){if(fd(this,pd)){this.element.querySelectorAll("li > a").forEach((t,e)=>{fd(this,gd).length>e&&t.removeEventListener("click",fd(this,gd)[e])}),vd(this,gd,[])}else this.element.removeEventListener("click",this.onClickEvent)}onClickEvent(t){this.getTarget(),J(this.args.index)&&this.onClick(this.args.index.trim())}onListItemClick(t,e){this.getTarget(),this.onClick(t)}onClick(t){J(fd(this,dd))&&this.utils.bus.emit(O,fd(this,dd),t)}}dd=new WeakMap,pd=new WeakMap,gd=new WeakMap;var yd,bd,Md,Cd,Ad=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ed=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wd{constructor(){this.action="",this.target=""}parse(t){J(t)&&gt(t)?this.action=t:(this.target=pt(t.target,""),this.action=t.action)}}class Td{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new xd(t,e,this.attribute)}}class xd extends Xn{constructor(t,e,i){super("CuiToggleHandler",t,i,new Wd,e),yd.set(this,void 0),bd.set(this,void 0),Md.set(this,void 0),Cd.set(this,void 0),Ad(this,yd,this.element),Ad(this,bd,e),Ad(this,Md,null),Ad(this,Cd,[]),this.onClick=this.onClick.bind(this)}onInit(){Ad(this,yd,this.getTarget()),Ad(this,Cd,Ti.get(this.args.action)),this.element.addEventListener("click",this.onClick),Ad(this,Md,this.onEvent(D,this.toggle.bind(this)))}onUpdate(){Ad(this,yd,this.getTarget()),Ad(this,Cd,Ti.get(this.args.action))}onDestroy(){this.element.removeEventListener("click",this.onClick),this.detachEvent(D,Ed(this,Md))}toggle(){Ed(this,yd)?(Ed(this,Cd).forEach(t=>t.toggle(Ed(this,yd),Ed(this,bd))),this.emitEvent(B,{action:this.args.action,target:Ed(this,yd),timestamp:Date.now()})):this.logError("Target in not provided","toggle")}onClick(t){this.toggle(),t.preventDefault()}getTarget(){var t;return this.args.target&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:this.element}}yd=new WeakMap,bd=new WeakMap,Md=new WeakMap,Cd=new WeakMap;var Sd,Ld,Pd,Id,Dd,Bd,Od,Hd,Nd,$d=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _d{constructor(t){Sd.set(this,void 0),$d(this,Sd,vt(".{prefix}-animation-tooltip-in",t)),this.content="",this.width=150,this.margin=8,this.timeout=2e3,this.pos="",this.action=qd(this,Sd)}parse(t){gt(t)?this.content=pt(t,""):(this.content=pt(t.content,""),this.width=ht(t.width,150),this.margin=ht(t.margin,8),this.pos=pt(t.pos,""),this.action=pt(t.action,qd(this,Sd)),this.timeout=ht(t.timeout,2e3))}}Sd=new WeakMap;class Rd{constructor(t){Ld.set(this,void 0),$d(this,Ld,null!=t?t:"cui"),this.attribute=qd(this,Ld)+"-tooltip"}getStyle(){return null}get(t,e){return new zd(t,this.attribute,e,qd(this,Ld))}}Ld=new WeakMap;class zd extends Xn{constructor(t,e,i,s){super("CuiTooltipHandler",t,e,new _d(s),i),Pd.set(this,void 0),Id.set(this,void 0),Dd.set(this,void 0),Bd.set(this,void 0),Od.set(this,void 0),Hd.set(this,void 0),Nd.set(this,void 0),$d(this,Id,void 0),$d(this,Hd,[]),$d(this,Nd,void 0),$d(this,Od,vt("{prefix}-tooltip-data",s)),$d(this,Pd,new Qo(t)),qd(this,Pd).setCallback(this.onHover.bind(this)),$d(this,Dd,8),$d(this,Bd,new ph),qd(this,Bd).setPreferred("top-center")}onInit(){qd(this,Pd).attach(),this.getDataFromArgs(),$d(this,Nd,new yh(this.args.timeout,!1,this.removeTooltip.bind(this)))}onUpdate(){this.getDataFromArgs(),qd(this,Nd)&&qd(this,Nd).setTimeout(this.args.timeout)}onDestroy(){this.removeTooltip(),qd(this,Pd).detach()}onHover(t){t.isHovering?this.createTooltip():this.removeTooltip()}createTooltip(){if(J(qd(this,Id))||!J(this.args.content))return;const t=this.element.getBoundingClientRect();$d(this,Id,new Fi("div").setClasses(qd(this,Od)).build()),qd(this,Id).textContent=this.args.content,qd(this,Id).style.maxWidth=this.args.width+"px",document.body.appendChild(qd(this,Id)),this.mutate(()=>{if(!qd(this,Id))return;const e=qd(this,Id).getBoundingClientRect();qd(this,Bd).setMargin(qd(this,Dd));try{let[i,s]=qd(this,Bd).calculate(t,e);qd(this,Id).style.top=s+"px",qd(this,Id).style.left=i+"px",this.toggleActions(),qd(this,Nd)&&qd(this,Nd).start()}catch(t){this.logError(t.message,"createTooltip",t)}})}removeTooltip(){J(qd(this,Id))&&(qd(this,Nd)&&qd(this,Nd).stop(),this.mutate(()=>{qd(this,Id).remove(),$d(this,Id,void 0)}))}getDataFromArgs(){qd(this,Bd).setMargin(this.args.margin),qd(this,Bd).setStatic(this.args.pos),$d(this,Hd,Ti.get(this.args.action))}toggleActions(){qd(this,Id)&&qd(this,Hd).forEach(t=>{t.toggle(qd(this,Id))})}}Pd=new WeakMap,Id=new WeakMap,Dd=new WeakMap,Bd=new WeakMap,Od=new WeakMap,Hd=new WeakMap,Nd=new WeakMap;var Ud,Fd,Vd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xd{constructor(){this.name="click-plugin",Ud.set(this,void 0),Fd.set(this,void 0),this.description="CuiWindowClickPlugin",Vd(this,Ud,void 0),Vd(this,Fd,this.onWindowClick.bind(this))}init(t){Vd(this,Ud,t.bus),window.addEventListener("click",jd(this,Fd))}destroy(){window.removeEventListener("click",jd(this,Fd))}onWindowClick(t){jd(this,Ud)&&jd(this,Ud).emit(R,null,t)}}Ud=new WeakMap,Fd=new WeakMap;var Yd,Kd,Zd,Gd,Jd,Qd,tp,ep=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ip=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class sp{constructor(t,e){Yd.set(this,void 0),Kd.set(this,void 0),Zd.set(this,void 0),Gd.set(this,void 0),Jd.set(this,void 0),Qd.set(this,void 0),tp.set(this,void 0),ep(this,Zd,!1),ep(this,Gd,!0),ep(this,Jd,!1),ep(this,Yd,void 0),ep(this,Kd,null!=e?e:[]),ep(this,Qd,this.onKeyDown.bind(this)),ep(this,tp,this.onKeyUp.bind(this))}setCallback(t){ep(this,Yd,t)}isInProgress(){return ip(this,Zd)}attach(){document.addEventListener("keydown",ip(this,Qd)),ip(this,Gd)&&document.addEventListener("keyup",ip(this,tp)),ep(this,Jd,!0)}detach(){document.removeEventListener("keydown",ip(this,Qd)),ip(this,Gd)&&document.addEventListener("keyup",ip(this,tp)),ep(this,Jd,!1)}isAttached(){return ip(this,Jd)}onKeyDown(t){if(!ip(this,Zd)){ep(this,Zd,!0);try{J(ip(this,Kd))&&!ip(this,Kd).includes(t.code)||!ip(this,Yd)||ip(this,Yd).call(this,t)}catch(t){console.error(t)}finally{ip(this,Gd)||ep(this,Zd,!1)}}}onKeyUp(t){ep(this,Zd,!1)}}Yd=new WeakMap,Kd=new WeakMap,Zd=new WeakMap,Gd=new WeakMap,Jd=new WeakMap,Qd=new WeakMap,tp=new WeakMap;var np,rp,op=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},hp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ap{constructor(t){np.set(this,void 0),rp.set(this,void 0),op(this,rp,t),op(this,np,new sp(!0)),hp(this,np).setCallback(this.onKeyDown.bind(this))}connect(){hp(this,np).attach()}disconnect(){hp(this,np).detach()}onKeyDown(t){hp(this,rp).emit(_,null,{timestamp:Date.now(),event:t})}}np=new WeakMap,rp=new WeakMap;var lp,cp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},up=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class dp{constructor(t){this.name="keys-observer",lp.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t,cp(this,lp,void 0)}init(t){cp(this,lp,new ap(t.bus)),up(this,lp).connect()}destroy(){up(this,lp)&&up(this,lp).disconnect()}}lp=new WeakMap;var pp,gp,vp,fp,mp,wp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},kp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class yp{constructor(t){pp.set(this,void 0),gp.set(this,void 0),vp.set(this,void 0),fp.set(this,void 0),mp.set(this,void 0),wp(this,pp,t),wp(this,vp,!1),wp(this,gp,void 0),wp(this,fp,!1),wp(this,mp,this.event.bind(this))}setCallback(t){wp(this,gp,t)}isInProgress(){return kp(this,fp)}attach(){window.matchMedia&&!kp(this,vp)&&kp(this,pp)&&(window.matchMedia(kp(this,pp)).addEventListener("change",kp(this,mp)),wp(this,vp,!0))}detach(){kp(this,vp)&&(window.matchMedia(kp(this,pp)).removeEventListener("change",kp(this,mp)),wp(this,vp,!1))}isAttached(){return kp(this,vp)}event(t){if(!kp(this,fp)&&kp(this,gp)){wp(this,fp,!0);try{kp(this,gp).call(this,t)}catch(t){console.error(t)}finally{wp(this,fp,!1)}}}}pp=new WeakMap,gp=new WeakMap,vp=new WeakMap,fp=new WeakMap,mp=new WeakMap;var bp,Mp,Cp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ap=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ep{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",bp.set(this,void 0),Mp.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t,Cp(this,Mp,void 0),Cp(this,bp,void 0)}init(t){Cp(this,Mp,t),this.setup.autoLight&&"dark"==(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")&&Ap(this,Mp).setLightMode("dark"),Cp(this,bp,new yp("(prefers-color-scheme: dark)")),Ap(this,bp).setCallback(this.onChange.bind(this)),Ap(this,bp).attach()}destroy(){Ap(this,bp)&&Ap(this,bp).detach()}onChange(t){var e;if(!Ap(this,Mp))return;let i=Ap(this,Mp).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?Ap(this,Mp).setLightMode("dark"):Ap(this,Mp).setLightMode("light"))}}bp=new WeakMap,Mp=new WeakMap;var Wp,Tp,xp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Sp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Lp{constructor(t){this.description="Auto print mode",this.name="auto-print",Wp.set(this,void 0),Tp.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t,xp(this,Wp,void 0),xp(this,Tp,void 0)}init(t){xp(this,Tp,t),this.setup.autoPrint&&window.matchMedia&&window.matchMedia("print").matches&&Sp(this,Tp).setPrintMode(!0),xp(this,Wp,new yp("print")),Sp(this,Wp).setCallback(this.onChange.bind(this)),Sp(this,Wp).attach()}destroy(){Sp(this,Wp)&&Sp(this,Wp).detach()}onChange(t){var e,i;if(!Sp(this,Tp))return;this.setup=Sp(this,Tp).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(t.matches?Sp(this,Tp).setPrintMode(!0):Sp(this,Tp).setPrintMode(!1))}}Wp=new WeakMap,Tp=new WeakMap;var Pp,Ip,Dp,Bp,Op,Hp,Np=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$p=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class qp{constructor(t,e,i,s){Pp.set(this,void 0),Ip.set(this,void 0),Dp.set(this,void 0),Bp.set(this,void 0),Np(this,Pp,0),Np(this,Dp,0),Np(this,Ip,0),Np(this,Bp,0),this.set(t,e,i,s)}static create(t){if(!J(t))throw new c("Given color value is not in a valid format");let e;if(t.startsWith("#"))e=new _p(t);else{if(!t.startsWith("rgb"))throw new c("Unknown color string format");e=new Rp(t)}let i=e.parse();if(!i)throw new c("Color was not parsed");return i}set(t,e,i,s){Np(this,Bp,et(null!=s?s:1,0,1)),Np(this,Dp,et(i,0,255)),Np(this,Pp,et(t,0,255)),Np(this,Ip,et(e,0,255))}setRed(t){Np(this,Pp,et(t,0,255))}setGreen(t){Np(this,Ip,et(t,0,255))}setBlue(t){Np(this,Dp,et(t,0,255))}opacity(t){return Np(this,Bp,et(t,0,1)),this}lighten(t){return this.shade(t),this}darken(t){return this.shade(-t),this}invert(){return Np(this,Dp,255-$p(this,Dp)),Np(this,Pp,255-$p(this,Pp)),Np(this,Ip,255-$p(this,Ip)),this}getColorValue(t){t&&t.toLowerCase();switch(t){case"red":return $p(this,Pp);case"green":return $p(this,Ip);case"blue":return $p(this,Dp);case"alpha":return $p(this,Bp)}return-1}toCssString(){return`rgba(${$p(this,Pp)}, ${$p(this,Ip)}, ${$p(this,Dp)}, ${$p(this,Bp)})`}shade(t,e=!0){Np(this,Pp,this.shadeSingle($p(this,Pp),t,e)),Np(this,Ip,this.shadeSingle($p(this,Ip),t,e)),Np(this,Dp,this.shadeSingle($p(this,Dp),t,e))}shadeSingle(t,e,i=!0){let s=(i?t:255)*e/100;return et(t+Math.round(s),0,255)}clone(){return new qp($p(this,Pp),$p(this,Ip),$p(this,Dp),$p(this,Bp))}}Pp=new WeakMap,Ip=new WeakMap,Dp=new WeakMap,Bp=new WeakMap;class _p{constructor(t){Op.set(this,void 0),Np(this,Op,t)}trim(){Np(this,Op,$p(this,Op)?$p(this,Op).trim():"")}isValid(){return J($p(this,Op))&&$p(this,Op).startsWith("#")}parse(){let t=0,e=0,i=0,s=1,n=$p(this,Op).length;if(4===$p(this,Op).length)t=parseInt($p(this,Op)[1]+$p(this,Op)[1],16),i=parseInt($p(this,Op)[2]+$p(this,Op)[2],16),e=parseInt($p(this,Op)[3]+$p(this,Op)[3],16);else if(t=parseInt($p(this,Op)[1]+$p(this,Op)[2],16),i=parseInt($p(this,Op)[3]+$p(this,Op)[4],16),e=parseInt($p(this,Op)[5]+$p(this,Op)[6],16),n>7){let t=parseInt($p(this,Op)[7]+$p(this,Op)[8],16);s=parseFloat((t/255).toFixed(2))}return new qp(t,i,e,s)}}Op=new WeakMap;class Rp{constructor(t){Hp.set(this,void 0),Np(this,Hp,t)}trim(){Np(this,Hp,J($p(this,Hp))?$p(this,Hp).trim():"")}isValid(){return J($p(this,Hp))&&$p(this,Hp).startsWith("rgb")}parse(){let t=$p(this,Hp).length,e=($p(this,Hp).startsWith("rgba")?$p(this,Hp).substring(5,t-1):$p(this,Hp).substring(4,t-1)).split(",");if(!lt(e.length,3,4))return;let i=parseInt(e[0]),s=parseInt(e[1]),n=parseInt(e[2]),r=4===e.length?parseFloat(e[3]):1;return new qp(i,s,n,r)}}Hp=new WeakMap;var zp,Up,Fp,Vp,jp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};const Yp={light:{background:A.colorLightBackground,base:A.colorLightBase,active:A.colorLightActive,muted:A.colorLightMuted},dark:{background:A.colorDarkBackground,base:A.colorDarkBase,active:A.colorDarkActive,muted:A.colorDarkMuted}},Kp={accent:{base:A.colorAccent,muted:A.colorAccentMuted,active:A.colorAccentActive,shade:A.colorAccentShade,shadeDark:A.colorAccentShadeDark},secondary:{base:A.colorSecondary,muted:A.colorSecondaryMuted,active:A.colorSecondaryActive,shade:A.colorSecondaryShade,shadeDark:A.colorSecondaryShadeDark},error:{base:A.colorError,muted:A.colorErrorMuted,active:A.colorErrorActive,shade:A.colorErrorShade,shadeDark:A.colorErrorShadeDark},warning:{base:A.colorWarning,muted:A.colorWarningMuted,active:A.colorWarningActive,shade:A.colorWarningShade,shadeDark:A.colorWarningShadeDark},success:{base:A.colorSuccess,muted:A.colorSuccessMuted,active:A.colorSuccessActive,shade:A.colorSuccessShade,shadeDark:A.colorSuccessShadeDark}};class Zp{constructor(t,e){zp.set(this,void 0),Up.set(this,void 0),jp(this,zp,Yp[t]),jp(this,Up,e)}setBackgroundColor(t){this.setColor(Xp(this,zp).background,t)}setBaseColor(t){this.setColor(Xp(this,zp).base,t)}setActiveColor(t){this.setColor(Xp(this,zp).active,t)}setMutedColor(t){this.setColor(Xp(this,zp).muted,t)}setBaseColors(t){if(!Xp(this,zp))return;let e={};e[Xp(this,zp).background]=t.background?t.background.toCssString():"",e[Xp(this,zp).active]=t.active?t.active.toCssString():"",e[Xp(this,zp).muted]=t.muted?t.muted.toCssString():"",e[Xp(this,zp).base]=t.base?t.base.toCssString():"",Xp(this,Up).setProperties(e)}setColor(t,e){Xp(this,Up).setProperty(t,e.toCssString())}}zp=new WeakMap,Up=new WeakMap;class Gp{constructor(t,e){Fp.set(this,void 0),Vp.set(this,void 0),jp(this,Fp,e),jp(this,Vp,Kp[t])}setBaseColor(t){this.setColor(Xp(this,Vp).base,t)}setMutedColor(t){this.setColor(Xp(this,Vp).muted,t)}setActiveColor(t){this.setColor(Xp(this,Vp).active,t)}setShadeColor(t){this.setColor(Xp(this,Vp).shade,t)}setShadeDarkColor(t){this.setColor(Xp(this,Vp).shadeDark,t)}setColors(t){if(!Xp(this,Vp))return;let e={};e[Xp(this,Vp).shade]=t.shade?t.shade.toCssString():"",e[Xp(this,Vp).shadeDark]=t.shadeDark?t.shadeDark.toCssString():"",e[Xp(this,Vp).active]=t.active?t.active.toCssString():"",e[Xp(this,Vp).muted]=t.muted?t.muted.toCssString():"",e[Xp(this,Vp).base]=t.base?t.base.toCssString():"",Xp(this,Fp).setProperties(e)}setAutoColors(t){let e={};e[Xp(this,Vp).base]=t.toCssString(),e[Xp(this,Vp).shade]=t.lighten(30).toCssString(),e[Xp(this,Vp).shadeDark]=t.darken(30).toCssString(),e[Xp(this,Vp).active]=t.darken(10).toCssString(),e[Xp(this,Vp).muted]=t.lighten(10).toCssString(),Xp(this,Fp).setProperties(e)}setColor(t,e){Xp(this,Fp).setProperty(t,e.toCssString())}}Fp=new WeakMap,Vp=new WeakMap;var Jp,Qp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},tg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class eg{constructor(t){Jp.set(this,void 0),Qp(this,Jp,t)}setProperty(t,e){nt(t,e)&&tg(this,Jp).interactions.mutate(()=>{tg(this,Jp).setProperty(t,e)},null)}setProperties(t){J(t)&&tg(this,Jp).interactions.mutate(()=>{for(let e in t)J(t[e])&&tg(this,Jp).setProperty(e,t[e])},null)}}Jp=new WeakMap;var ig,sg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ng=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rg{constructor(t){ig.set(this,void 0),sg(this,ig,new eg(t))}setBaseFontSize(t,e){this.setBaseUnitValue(A.fontSize,t,e)}setAnimationTime(t,e){this.setBaseUnitValue(A.animationTime,t,null!=e?e:"ms")}setAnimationTimeLong(t,e){this.setBaseUnitValue(A.setAnimationTimeLong,t,null!=e?e:"ms")}setAnimationTimeShort(t,e){this.setBaseUnitValue(A.setAnimationTimeShort,t,null!=e?e:"ms")}setBaseLineHeight(t,e){this.setBaseUnitValue(A.lineHeight,t,e)}setBaseMargin(t,e){this.setBaseUnitValue(A.margin,t,e)}setBasePadding(t,e){this.setBaseUnitValue(A.padding,t,e)}setBaseBorderRadius(t,e){this.setBaseUnitValue(A.borderRadius,t,e)}setComponentSpace(t,e){this.setBaseUnitValue(A.componentSpace,t,e)}setAccordionIcon(t){J(t)&&this.setCSSVariable(A.accordionIcon,t)}setScrollbarWidth(t,e){this.setBaseUnitValue(A.scrollbarWidth,t,e)}setAppBackgroundColor(t){J(t)&&this.setCSSVariable(A.colorLightAppBackground,t.toCssString())}setDarkAppBackgroundColor(t){J(t)&&this.setCSSVariable(A.colorDarkAppBackground,t.toCssString())}getBaseColorsSetter(){return new Zp("light",ng(this,ig))}getDarkBaseColorsSetter(){return new Zp("dark",ng(this,ig))}getAccentThemeColorsSetter(){return new Gp("accent",ng(this,ig))}getSecondaryThemeColorsSetter(){return new Gp("secondary",ng(this,ig))}getErrorThemeColorsSetter(){return new Gp("error",ng(this,ig))}getWarningThemeColorsSetter(){return new Gp("warning",ng(this,ig))}getSuccessThemeColorsSetter(){return new Gp("success",ng(this,ig))}setCSSVariable(t,e){ng(this,ig).setProperty(t,e)}setBaseUnitValue(t,e,i){if(!J(e))return;let s=`${e}${null!=i?i:"px"}`;this.setCSSVariable(t,s)}}ig=new WeakMap;var og,hg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ag=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class lg{constructor(t){this.name="css-variables-plugin",og.set(this,void 0),this.description="CuiCSSVariablesPlugin",this.setup=t,hg(this,og,Wt.get("CuiCSSVariablesPlugin")),this.handler=void 0}init(t){this.handler=new rg(t),t.bus.on("csschange",this.onCssChange.bind(this))}destroy(){}onCssChange(t){if(!this.handler)return;let e=null,i=null;switch(t.method){case"baseFontSize":if(!this.isArgNumber(t.arg))return;this.handler.setBaseFontSize(t.arg.value,t.arg.unit);break;case"baseLineHeight":if(!this.isArgNumber(t.arg))return;this.handler.setBaseLineHeight(t.arg.value,t.arg.unit);break;case"animationTime":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTime(t.arg.value,t.arg.unit);break;case"animationTimeLong":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTimeLong(t.arg.value,t.arg.unit);break;case"animationTimeShort":if(!this.isArgNumber(t.arg))return;this.handler.setAnimationTimeShort(t.arg.value,t.arg.unit);break;case"margin":if(!this.isArgNumber(t.arg))return;this.handler.setBaseMargin(t.arg.value,t.arg.unit);break;case"padding":if(!this.isArgNumber(t.arg))return;this.handler.setBasePadding(t.arg.value,t.arg.unit);break;case"borderRadius":if(!this.isArgNumber(t.arg))return;this.handler.setBaseBorderRadius(t.arg.value,t.arg.unit);break;case"componentSpace":if(!this.isArgNumber(t.arg))return;this.handler.setComponentSpace(t.arg.value,t.arg.unit);break;case"scrollbarWidth":if(!this.isArgNumber(t.arg))return;this.handler.setScrollbarWidth(t.arg.value,t.arg.unit);break;case"accordionIcon":if(!J(t.arg))return;this.handler.setAccordionIcon(t.arg);break;case"appLightBackground":if(!J(t.arg))return;this.handler.setAppBackgroundColor(qp.create(t.arg));break;case"appDarkBackground":case"appDarkBackground":if(!J(t.arg))return;this.handler.setDarkAppBackgroundColor(qp.create(t.arg));break;case"mainColorBackground":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setBackgroundColor(qp.create(t.arg.color));break;case"mainColor":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setBaseColor(qp.create(t.arg.color));break;case"mainColorMuted":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setMutedColor(qp.create(t.arg.color));break;case"mainColorActive":if(!this.isArgColor(t.arg))return;e=this.getBaseColorSetter(t.arg.palette),e&&e.setActiveColor(qp.create(t.arg.color));break;case"themeAutoColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setAutoColors(qp.create(t.arg.color));case"themeBaseColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setAutoColors(qp.create(t.arg.color));case"themeMutedColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setMutedColor(qp.create(t.arg.color));case"themeActiveColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setActiveColor(qp.create(t.arg.color));case"themeShadeColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setShadeColor(qp.create(t.arg.color));case"themeShadeDarkColor":if(!this.isArgColor(t.arg))return;i=this.getAccentColorSetter(t.arg.palette),i&&i.setShadeDarkColor(qp.create(t.arg.color));default:ag(this,og).warning("Unknown event method","onCssChange")}}isArgNumber(t){return J(t)&&J(t.value)}isArgColor(t){return J(t)&&J(t.palette)&&J(t.color)}getBaseColorSetter(t){if(!this.handler)return;switch(t.trim().toLowerCase()){case"light":return this.handler.getBaseColorsSetter();case"dark":return this.handler.getDarkBaseColorsSetter()}}getAccentColorSetter(t){if(!this.handler)return;switch(t.trim().toLowerCase()){case"accent":return this.handler.getAccentThemeColorsSetter();case"secondary":return this.handler.getSecondaryThemeColorsSetter();case"error":return this.handler.getErrorThemeColorsSetter();case"warning":return this.handler.getWarningThemeColorsSetter();case"success":return this.handler.getSuccessThemeColorsSetter();default:return}}}og=new WeakMap;var cg,ug=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},dg=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pg=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};cg=new WeakMap;const gg="0.3.0";window.cuiInit=new class{constructor(){cg.set(this,void 0),dg(this,cg,!1)}init(t){var e,i;return ug(this,void 0,void 0,(function*(){if(pg(this,cg))return console.log("Module is already initialized"),!1;const s=new Pn,n=function(t){let e=!t||t.autoLight,i=!t||t.autoPrint;return[new Ep({autoLight:e}),new Lp({autoPrint:i}),new dp({}),new Xd,new lg({})]}({autoLight:!0,autoPrint:!0}),r=function(t){let e=null==t?void 0:t.prefix;return[new va(e),new Rd(e),new lo(e),new Au(e),new dc(e),new Hc(e),new La(e),new Vl(e),new ko(e),new Td(e),new Ro(e),new za(e),new hr(e),new _h(e),new Hl(e),new cd(e),new wd(e),new la(e),new Yu(e),new jr(e),new So(e),new fu(e),new rc(e)]}({prefix:null===(e=t.setup)||void 0===e?void 0:e.prefix});let o=n;t.plugins&&(o=Object.assign(Object.assign({},n),t.plugins));let h=yield s.init(Object.assign(Object.assign({},t),{plugins:o,components:J(t.components)?[...r,...t.components]:r}));return h.result?(dg(this,cg,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(i=h.message)&&void 0!==i?i:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}}])}));
//# sourceMappingURL=index.min.js.map