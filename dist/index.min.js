!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light-app",[],e):"object"==typeof exports?exports["cui-light-app"]=e():t["cui-light-app"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"CUI_LIGHT_VERSION",(function(){return zv})),i.d(e,"CuiInstance",(function(){return es}));class s extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class n extends s{constructor(t){super("ItemNotFoundError",t)}}class r extends s{constructor(t){super("ArgumentError",t)}}class o extends s{constructor(t){super("CuiInstanceInitError",t)}}class h extends s{constructor(t){super("RegisterElementError",t)}}class a extends s{constructor(t){super("AnimatorError",t)}}class l extends s{constructor(t){super("CSSVariableError",t)}}class u extends s{constructor(t){super("CuiPositionError",t)}}const c="dark",d="animation-progress",p="print",v="swiping-on",f={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},g="--{prefix}-animation-time",w="--{prefix}-animation-time-long",m="--{prefix}-animation-time-short";class y{}y.logLevel="none",y.prefix="cui";const k="instance-initialized",b="instance-finished",M="resize",C="open",E="opened",W="close",A="closed",T="toggle",x="toggled",L="switch",S="switched",P="scroll",I="targetchange",O="keydown",N="windowclick",H="offset",_="progresschange",D="progresschanged",R="globalmove",$="movelock",F="pause",B="paused",q="sorted",z="sortstart",j="toast",V="toastshow",U="toasthidden",K="alert",Y="gesture-down",X="gesture-up",G="gesture-left",Z="gesture-right",J="notify",Q="notified",tt=function*(){let t=0;for(;;){((yield t++)||t>2e5)&&(t=0)}}();function et(t,e=!0){return null!=t&&(!e||!function(t){if("string"==typeof t)return 0===t.length;if("boolean"==typeof t)return t;if(Array.isArray(t))return 0===t.length;return!1}(t))}function it(t,e){if(!et(t)||!et(e))throw new r("Missing argument value");return`${t}-${e}`}function st(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function nt(t,e,i){return t<e?e:t>i?i:t}function rt(t,e,i,s){return null==t||isNaN(t)?s:nt(t,e,i)}function ot(t){return et(t)?`[${t.join("],[")}]`:""}function ht(...t){if(!et(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!et(t[i]))return!1;return!0}function at(t){let e="none";return t>=640&&(e="small"),t>=960&&(e="medium"),t>=1200&&(e="large"),t>=1600&&(e="xlarge"),e}function lt(t){let e={};return et(t)?(e=function(t){let e=null;if(et(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error((i="An exception occured",s="Functions",n="parseJsonString",`[${(new Date).toLocaleString()}][${null!=s?s:"-"}][${null!=n?n:"-"}][${i}]`),t)}return e}var i,s,n;return null}(t.trim()),et(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=bt(t),s=void 0,n="";i.length<2||(s=i[0].trim(),n=i[1].trim(),s&&(e[s]=n.replace("U+0003B",";")))})):e=t),e):e}function ut(t,e){if(!t)return e;let i=t.includes&&t.includes(".")?parseFloat(t):parseInt(t);return isNaN(i)?e:i}function ct(t,e){return et(t)&&et(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function dt(t,e,i){return et(t)&&t>=e&&t<=i}function pt(t,e){return ht(t,e)?lt(t.getAttribute(e)):null}function vt(t){return!!et(t)&&["y","t","true","yes"].includes(t.toLowerCase())}function ft(t,e){return et(t)?t.replace("{prefix}",null!=e?e:""):t}function gt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function wt(t){if(!et(t))return;let e=t.parentElement;return et(e)&&et(e.$cuid)?e:wt(e)}function mt(t){let e=0;return t?(Array.from(t.children).forEach(t=>{e+=t.getBoundingClientRect().height}),e>0?e+4:e):-1}function yt(t,e){if(ht(t,e))for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}function kt(t,e,i){let s=-1;switch(t){case"prev":s=e<=0?i-1:e-1;break;case"next":s=e<i-1?e+1:0;break;case"first":s=0;break;case"last":s=i-1;default:s=ut(t,-1)}return s}function bt(t){let e=[];if(!et(t))return e;let i=t.split(":");return 1===i.length?i:[i.shift(),i.join(":")]}function Mt(t,e,...i){return i.includes(t)?t:e}function Ct(t){return":scope "+t}function Et(t){const e=t.split(">");return e[e.length-1].trim()}class Wt{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.prefix="cui",this.plugins={},this.root=document.body,this.parallaxAnimations={}}fromInit(t){var e;return this.prefix=null!==(e=t.prefix)&&void 0!==e?e:"cui",this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this.root=t.root,this.parallaxAnimations=t.parallaxAnimations,this}}class At{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.root=document.body,this.busSetup=void 0,this.development=void 0,this.parallaxAnimations={}}}var Tt,xt,Lt,St=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class It{constructor(t,e){Tt.set(this,void 0),xt.set(this,void 0),Lt.set(this,void 0),St(this,xt,t),St(this,Tt,"-"),St(this,Lt,null!=e?e:y.logLevel)}registerElement(t,e,i){St(this,Tt,e),console.log(this.prepString("Register element: "+e,"debug",i))}unregisterElement(t,e){St(this,Tt,"-"),console.log(this.prepString("Unregister element: "+t,"debug",e))}setProperty(t,e,i,s){}pushState(t,e,i,s,n){this.logByType(i,s,n)}log(t,e,i){this.logByType(t,e,i)}debug(t,e){"debug"===Pt(this,Lt)&&console.log(this.prepString(t,"debug",e))}warning(t,e){"warning"!==Pt(this,Lt)&&"debug"!==Pt(this,Lt)||console.warn(this.prepString(t,"warning",e))}error(t,e){"error"!==Pt(this,Lt)&&"debug"!==Pt(this,Lt)&&"warning"!==Pt(this,Lt)||console.error(this.prepString(t,"error",e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,"exception",e)),"debug"===Pt(this,Lt)&&console.error(t.stack)}setId(t){t&&St(this,Tt,t)}prepString(t,e,i){return`[${(new Date).toLocaleString()}][${e}][${Pt(this,xt)}][${null!=i?i:"-"}][${Pt(this,Tt)}][${t}]`}logByType(t,e,i){switch(t){case"debug":this.debug(e,i);break;case"warning":this.warning(e,i);break;case"error":this.error(e,i)}}}Tt=new WeakMap,xt=new WeakMap,Lt=new WeakMap;class Ot{get(t){return new It(t)}}class Nt{static get(t){return y.devTool||(y.devTool=new Ot),y.devTool.get(t)}}var Ht=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function _t(t,e){return e.filter(e=>t.hasAttribute&&t.hasAttribute(e.attribute))}function Dt(t,e,i){return Ht(this,void 0,void 0,(function*(){if(!ht(t,e,i))return!1;let s=t;s.$cuid||(s.$cuid=t.hasAttribute("cuid")?t.getAttribute("cuid"):function(t){return`${et(t)?t:"cui-element"}-${tt.next().value}`}(t.tagName),t.setAttribute("cuid",s.$cuid));for(let t of e)yield $t(s,t,i,pt(s,t.attribute));return!0}))}function Rt(t){return Ht(this,void 0,void 0,(function*(){const e=t;if(!e.$handlers)return!1;for(let t in e.$handlers)yield Bt(e,t);return!0}))}function $t(t,e,i,s){return Ht(this,void 0,void 0,(function*(){if(t.$handlers||(t.$handlers={}),t.$handlers[e.attribute])return!1;try{let n=e.get(t,i);t.$handlers[e.attribute]=n,yield t.$handlers[e.attribute].handle(s)}catch(t){throw new h(`An error occured during [${e.attribute}] initialization: ${t.message}`)}return!0}))}function Ft(t,e,i){return Ht(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let s=t.$handlers[e];if(!s)return!1;try{s.refresh&&(yield s.refresh(i))}catch(t){throw new h(`An error occured during [${e}] update: ${t.message}`)}return!0}))}function Bt(t,e){return Ht(this,void 0,void 0,(function*(){if(!t||!t.$handlers)return!1;let i=t.$handlers[e];if(!i)return!1;try{yield i.destroy()}catch(t){throw new h(`An error occured during [${e}] destroy: ${t.message}`)}return!0}))}var qt,zt,jt,Vt,Ut,Kt,Yt,Xt,Gt,Zt,Jt,Qt,te,ee=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ie=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},se=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ne{constructor(t,e){qt.set(this,void 0),zt.set(this,void 0),jt.set(this,void 0),Vt.set(this,void 0),Ut.set(this,void 0),Kt.set(this,void 0),ie(this,qt,void 0),this.plugins=void 0,ie(this,zt,void 0),ie(this,jt,t),this._log=Nt.get("CuiMutationObserver"),ie(this,Vt,[]),ie(this,Ut,e),ie(this,Kt,"")}setPlugins(t){return this.plugins=t,this}setComponents(t){return ie(this,Vt,t),this}setAttributes(t){return ie(this,zt,{attributes:!0,subtree:!0,childList:!0,attributeFilter:t}),ie(this,Kt,ot(t)),this}start(){return this._log.debug("Starting"),se(this,zt)?(ie(this,qt,new MutationObserver(this.mutationCallback.bind(this))),se(this,qt).observe(se(this,jt),se(this,zt)),this._log.debug("Started"),this):(this._log.error("Cannot start - options are not defined"),this)}stop(){return this._log.debug("Stopping"),se(this,qt)?(se(this,qt).disconnect(),ie(this,qt,void 0),this._log.debug("Stopped"),this):(this._log.debug("Observer not available"),this)}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;if(!ht(t.attributeName,e)){this._log.error("Mutation attribute doesn't not exisist");break}this.handeComponentUpdate(t.attributeName,e);break;case"childList":this.handleChildListMutation(t)}et(this.plugins)&&this.plugins.onMutation(t).then(()=>{})})}handeComponentUpdate(t,e){let i=pt(e,t);Ft(e,t,i).then(e=>{this._log.debug("Component: "+t+" updated with: "+e,"handeComponentUpdate")}).catch(t=>{this._log.exception(t)})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(this._log.debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes).then(t=>{this._log.debug("Added nodes: "+e+" with status: "+t)}).catch(t=>{this._log.exception(t)})):i>0&&(this._log.debug("Removing nodes: "+i),this.handleRemovedNodes(t.removedNodes).then(t=>{this._log.debug("Removed nodes: "+i+" with status: "+t)}).catch(t=>{this._log.exception(t)}))}handleAddedNodes(t){return ee(this,void 0,void 0,(function*(){for(let e of t){yield this.handleAddedNode(e);let t=e,i=t.hasChildNodes()?t.querySelectorAll(se(this,Kt)):null;et(i)&&(this._log.debug("Additional nodes to add: "+i.length),yield this.handleAddedChildren(i))}return!0}))}handleAddedChildren(t){return ee(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield this.handleAddedNode(i));return e}))}handleAddedNode(t){return ee(this,void 0,void 0,(function*(){let e=_t(t,se(this,Vt));return Dt(t,e,se(this,Ut))}))}handleRemovedNodes(t){return ee(this,void 0,void 0,(function*(){for(let e of t){yield Rt(e);let t=e,i=e.hasChildNodes()?t.querySelectorAll(se(this,Kt)):null;et(i)&&(this._log.debug("Additional nodes to remove: "+i.length),yield this.handleDestroyChildren(i))}return!0}))}handleDestroyChildren(t){return ee(this,void 0,void 0,(function*(){let e=[];for(let i of t)e.push(yield Rt(i));return e}))}}qt=new WeakMap,zt=new WeakMap,jt=new WeakMap,Vt=new WeakMap,Ut=new WeakMap,Kt=new WeakMap;class re{constructor(t,e){Yt.set(this,void 0),Xt.set(this,void 0),Gt.set(this,void 0),Zt.set(this,void 0),Jt.set(this,void 0),Qt.set(this,{childList:!0,subtree:!0}),te.set(this,void 0),ie(this,Zt,!1),ie(this,Yt,!1),ie(this,Gt,t),ie(this,Jt,e),ie(this,te,void 0),ie(this,Xt,new MutationObserver(this.mutationCallback.bind(this)))}observe(){se(this,Yt)||se(this,Zt)||(se(this,Xt).observe(se(this,Gt),se(this,Qt)),ie(this,Yt,!0))}unobserve(){se(this,Yt)&&(se(this,Xt).disconnect(),ie(this,Yt,!1))}setSelector(t){ie(this,Jt,t)}setAttributes(t){t&&t.length>0&&ie(this,Qt,Object.assign(Object.assign({},se(this,Qt)),{attributes:!0,attributeFilter:t})),ie(this,Qt,{childList:!0,subtree:!0}),this.unobserve()}isObserving(){return se(this,Yt)}disable(t){ie(this,Zt,t),se(this,Zt)&&this.unobserve()}onMutation(t){ie(this,te,t)}mutationCallback(t){let e=t.reduce((t,e)=>(se(this,Jt)&&"childList"===e.type?this.matchesSelector(e)&&t.push(e):t.push(e),t),[]);se(this,te)&&se(this,te).call(this,e)}matchesSelector(t){return t.addedNodes.length>0?this.isAnyItemMatching([...t.addedNodes]):t.removedNodes.length>0&&this.isAnyItemMatching([...t.removedNodes])}isAnyItemMatching(t){return null!==t.find(t=>t.matches(se(this,Jt)))}}Yt=new WeakMap,Xt=new WeakMap,Gt=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,te=new WeakMap;var oe,he,ae,le,ue,ce,de=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ve{constructor(){oe.set(this,void 0),he.set(this,void 0),ae.set(this,void 0),le.set(this,!1),ue.set(this,void 0),ce.set(this,void 0),de(this,ae,window.requestAnimationFrame.bind(window)),de(this,oe,[]),de(this,he,[]),de(this,ue,5),de(this,ce,void 0)}onError(t){de(this,ce,t)}mutate(t,e,...i){pe(this,he).push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){pe(this,oe).push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!pe(this,le)){if(de(this,le,!0),t&&t>=pe(this,ue))throw new Error("Fast Dom limit reached");pe(this,ae).call(this,this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=pe(this,oe),n=pe(this,he);try{this.run(n),this.run(s)}catch(t){pe(this,ce)?pe(this,ce).call(this,t):console.error("An error has been captured in interactions: "+t.message),i=t}de(this,le,!1),(i||pe(this,oe).length||pe(this,he).length)&&this.schedule(e+1)}}oe=new WeakMap,he=new WeakMap,ae=new WeakMap,le=new WeakMap,ue=new WeakMap,ce=new WeakMap;class fe{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var ge,we,me,ye,ke,be=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Me=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ce=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ee{constructor(t){ge.set(this,void 0),we.set(this,void 0),me.set(this,void 0),ye.set(this,void 0),ke.set(this,void 0),Me(this,we,!1),Me(this,ge,[]),Me(this,me,t),Me(this,ke,void 0),Me(this,ye,void 0)}add(t){Ce(this,ge).push(t),Ce(this,we)||(Me(this,we,!0),this.flush().then(()=>{Me(this,we,!1)}))}delete(t){const e=Ce(this,ge).findIndex(e=>this.compare(e,t));if(!(e<0))return Ce(this,ge).splice(e,1)[0]}isLocked(){return Ce(this,we)}setCompareCallback(t){Me(this,ke,t)}onError(t){Me(this,ye,t)}compare(t,e){return Ce(this,ke)?Ce(this,ke).call(this,t,e):Object.is(t,e)}flush(){return be(this,void 0,void 0,(function*(){const t=this.getItemsForFlush();if(0===t.length)return!0;try{yield Ce(this,me).onFlush(t)}catch(e){this.callError(e,t)}return this.flush()}))}getItemsForFlush(){if("batch"===Ce(this,me).type){let t=[...Ce(this,ge)];return Me(this,ge,[]),t}const t=Ce(this,ge).shift();return t?[t]:[]}callError(t,e){Ce(this,ye)&&Ce(this,ye).call(this,t,e)}}ge=new WeakMap,we=new WeakMap,me=new WeakMap,ye=new WeakMap,ke=new WeakMap;var We,Ae,Te=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},xe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Le=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Se{constructor(t,e){this.log=Nt.get(t),this.queue=new Ee(e),this.queue.onError(t=>{this.log.error(t,"Flush")})}handle(t,e,i){return Te(this,void 0,void 0,(function*(){return et(t)?(this.queue.add({events:t,cuid:e,args:i}),!0):(this.log.warning("No events provided"),!1)}))}}class Pe{constructor(t){We.set(this,void 0),this.type="single",xe(this,We,t)}onFlush(t){return Te(this,void 0,void 0,(function*(){for(const e of t)for(let t in e.events){let i=e.events[t];Ne(e.cuid,i.$cuid)&&(yield Le(this,We).execute(i.callback,e.args))}return!0}))}}We=new WeakMap;class Ie{constructor(t){Ae.set(this,void 0),this.type="single",xe(this,Ae,t)}onFlush(t){return Te(this,void 0,void 0,(function*(){for(const e of t){let t=[];for(let i in e.events){let s=e.events[i];Ne(e.cuid,s.$cuid)&&t.push(Le(this,Ae).execute(s.callback,e.args))}yield Promise.all(t)}return!0}))}}Ae=new WeakMap;class Oe{static get(t,e){switch(t){case"tasked":return new Se("TaskedEventEmitHandler",new Ie(e));default:return new Se("SimpleEventEmitHandler",new Pe(e))}}}function Ne(t,e){return!et(t)||et(t)&&t==e}var He=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class _e{execute(t,e){return He(this,void 0,void 0,(function*(){try{return t(e),!0}catch(t){}return!1}))}}var De,Re,$e,Fe,Be,qe,ze,je,Ve=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ue=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ke=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ye{constructor(t,e){De.set(this,void 0),Re.set(this,void 0),$e.set(this,void 0),Fe.set(this,void 0),Ue(this,De,{}),Ue(this,$e,t),Ue(this,Fe,null!=e?e:"CuiEventBus"),Ue(this,Re,Nt.get(Ke(this,Fe)))}on(t,e,i){if(!ht(t,e))throw new r("Missing argument");let s=Ke(this,Fe)+"-"+function(){let t=gt(1,1e3),e=gt(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}();return Ke(this,De)[t]||(Ke(this,De)[t]={}),this.isAttached(Ke(this,De)[t],s,i)?null:(Ke(this,Re).debug(`Attaching new event: [${t}] for: [${s}]`),Ke(this,De)[t][s]={callback:e,$cuid:this.getCuid(i)},s)}detach(t,e){if(!ht(t,e))throw new r("Missing argument");let i=Ke(this,De)[t];Ke(this,Re).debug(`Detaching item: [${e}] from [${t}]`),this.isAttached(i,e)&&delete i[e]}detachAll(t){et(t)&&Ke(this,De)[t]?delete Ke(this,De)[t]:Ke(this,Re).error("Event name is missing or incorrect","detachAll")}emit(t,e,i){return Ve(this,void 0,void 0,(function*(){if(!et(t))throw new r("Event name is incorrect");let s=Ke(this,De)[t];return et(s)&&(Ke(this,Re).debug(`Emit: [${t}]`),yield Ke(this,$e).handle(s,e,i)),!0}))}isSubscribing(t,e,i){let s=Ke(this,De)[t];return this.isAttached(s,e,i)}detachByCuid(t,e){if(!ht(t,e))return;let i=Ke(this,De)[t];et(i)&&yt(Object.assign({},i),(t,s)=>{s.$cuid===e&&delete i[t]})}isAttached(t,e,i){return et(i)?et(t)&&et(e)&&et(t[e])&&t[e].$cuid==i.$cuid:et(t)&&et(e)&&et(t[e])}getCuid(t){return et(t)?t.$cuid:null}}De=new WeakMap,Re=new WeakMap,$e=new WeakMap,Fe=new WeakMap;class Xe{constructor(t){if(Be.set(this,void 0),qe.set(this,void 0),ze.set(this,void 0),je.set(this,void 0),Ue(this,qe,Nt.get("CuiEventBus")),Ue(this,ze,[]),Ue(this,Be,{}),Ue(this,je,0),et(t)){Ke(this,qe).debug("Initiating buses"),(1===t.length?t:t.sort((t,e)=>t.priority-e.priority)).forEach((t,e)=>{Ke(this,ze).push(this.initBusInstance(t.name,t.handler)),Ue(this,Be,Object.assign(Object.assign({},Ke(this,Be)),this.mapEvents(t.eventsDef,e))),Ke(this,qe).debug(`Bus ${t.name} has been initialized with number: ${e}`)}),Ke(this,ze).push(this.initBusInstance("DefaultEventBus","tasked")),Ue(this,je,Ke(this,ze).length-1),Ke(this,qe).debug("Bus initialization finished")}}on(t,e,i){if(!ht(t,e))throw new r("Missing argument");return this.get(t).on(t,e,i)}detach(t,e,i){if(!ht(t,e))throw new r("Missing argument");this.get(t).detach(t,e,i)}detachAll(t){this.get(t).detachAll(t)}emit(t,e,i){return Ve(this,void 0,void 0,(function*(){if(!et(t))throw new r("Event name is incorrect");return this.get(t).emit(t,e,i)}))}isSubscribing(t,e,i){return this.get(t).isSubscribing(t,e,i)}detachByCuid(t,e){ht(t,e)&&this.get(t).detachByCuid(t,e)}initBusInstance(t,e){if(!ht(t,e))throw new r("Bus name or handler name is incorrect");let i=new _e,s=Oe.get(e,i);return new Ye(s,t)}mapEvents(t,e){return t.reduce((t,i)=>t[i]?t:Object.assign(Object.assign({},t),{[i]:e}),{})}get(t){let e=Ke(this,Be)[t];return Ke(this,ze)[null!=e?e:Ke(this,je)]}}Be=new WeakMap,qe=new WeakMap,ze=new WeakMap,je=new WeakMap;new WeakMap,new WeakMap;class Ge{constructor(t){}append(t){if(et(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.appendChild(s),e.appendChild(i)}return!0}}var Ze,Je=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ti{constructor(t,e){Ze.set(this,void 0),this.setup=(new Wt).fromInit(t),this.interactions=class{static get(t,e){switch(t){case"async":const t=new ve;return e&&t.onError(e),t;default:return new fe}}}.get(t.interaction,this.onInteractionError.bind(this)),this.bus=class{static get(t){return et(t)?new Xe(t):new Ye(Oe.get("tasked",new _e))}}.get(t.busSetup),this.styleAppender=new Ge(this.interactions),Je(this,Ze,null!=e?e:[])}setLightMode(t){const e=it(this.setup.prefix,c),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=it(this.setup.prefix,c);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=it(this.setup.prefix,p),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=it(this.setup.prefix,p);return document.body.classList.contains(t)}setProperty(t,e){if(!ht(t,e))throw new l("Property or value was not provided");let i=ft(t,this.setup.prefix);this.interactions.mutate(()=>{document.documentElement.style.setProperty(i,e)},null)}isPlugin(t){return et(t)&&Qe(this,Ze).find(e=>e===t)}onInteractionError(t){console.error("An error has been captured from interactions"),console.error(t)}}Ze=new WeakMap;var ei,ii=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},si=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ni=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ri{constructor(t){ei.set(this,void 0),si(this,ei,t)}performAction(t,e,i,s){return ii(this,void 0,void 0,(function*(){return new Promise(n=>{ni(this,ei).mutate(()=>{e.add(t),t.classList.add(d),setTimeout(()=>{ni(this,ei).mutate(()=>{e.remove(t),t.classList.remove(d),s&&s(),n(!0)},null)},i)},null)})}))}performActions(t,e,i,s){return ii(this,void 0,void 0,(function*(){return new Promise(n=>{ni(this,ei).mutate(()=>{e.forEach(e=>e.add(t)),t.classList.add(d),setTimeout(()=>{ni(this,ei).mutate(()=>{e.forEach(e=>e.remove(t)),t.classList.remove(d),s&&s(),n(!0)},null)},i)},null)})}))}performSwitchAction(t,e,i,s,n,r){return ii(this,void 0,void 0,(function*(){return new Promise(o=>{ni(this,ei).mutate(()=>{i.forEach(e=>e.add(t)),t.classList.add(d),et(e)&&(s.forEach(t=>t.add(e)),e.classList.add(d)),setTimeout(()=>{ni(this,ei).mutate(()=>{i.forEach(e=>e.remove(t)),t.classList.remove(d),et(e)&&(s.forEach(t=>t.remove(e)),e.classList.remove(d)),n(),o(!0)},null)},r)},null)})}))}}ei=new WeakMap;var oi,hi,ai,li,ui,ci,di=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class vi{constructor(t){oi.set(this,void 0),di(this,oi,t)}add(t,e){ht(t,pi(this,oi))&&!t.classList.contains(pi(this,oi))&&t.classList.add(pi(this,oi))}remove(t,e){ht(t,pi(this,oi))&&t.classList.contains(pi(this,oi))&&t.classList.remove(pi(this,oi))}toggle(t,e){ht(t,pi(this,oi))&&(t.classList.contains(pi(this,oi))?t.classList.remove(pi(this,oi)):t.classList.add(pi(this,oi)))}}oi=new WeakMap;class fi{constructor(t){hi.set(this,void 0),di(this,hi,t)}add(t,e){if(e)switch(pi(this,hi)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){if(e)switch(pi(this,hi)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){if(e)switch(pi(this,hi)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}hi=new WeakMap;class gi{constructor(t){var e,i;ai.set(this,void 0),li.set(this,void 0),e=this,i=this,[{set value(t){di(e,ai,t)}}.value,{set value(t){di(i,li,t)}}.value]=bt(t)}add(t,e){ht(t,pi(this,ai),pi(this,li))&&t.setAttribute(pi(this,ai),pi(this,li))}remove(t,e){ht(t,pi(this,ai),pi(this,li))&&t.hasAttribute(pi(this,ai))&&t.removeAttribute(pi(this,ai))}toggle(t,e){ht(t,pi(this,ai),pi(this,li))&&(t.hasAttribute(pi(this,ai))?t.removeAttribute(pi(this,ai)):t.setAttribute(pi(this,ai),pi(this,li)))}}ai=new WeakMap,li=new WeakMap;class wi{constructor(t){var e,i;ui.set(this,void 0),ci.set(this,void 0),e=this,i=this,[{set value(t){di(e,ui,t)}}.value,{set value(t){di(i,ci,t)}}.value]=bt(t)}add(t,e){if(!ht(t,pi(this,ui),pi(this,ci)))return;let i=t;i.style&&!i.style[pi(this,ui)]&&(i.style[pi(this,ui)]=pi(this,ci))}remove(t,e){if(!ht(t,pi(this,ui),pi(this,ci)))return;let i=t;i.style&&i.style[pi(this,ui)]&&(i.style[pi(this,ui)]="")}toggle(t,e){if(!ht(t,pi(this,ui),pi(this,ci)))return;let i=t;i.style&&(i.style[pi(this,ui)]?delete i.style[pi(this,ui)]:i.style[pi(this,ui)]=pi(this,ci))}}ui=new WeakMap,ci=new WeakMap;class mi{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class yi{static get(t){if(!et(t))return new mi;switch(t[0]){case".":return new vi(t.substring(1));case"~":return new fi(t.substring(1));case"&":return new gi(t.substring(1));case"^":return new wi(t.substring(1));default:return new vi(t)}}}class ki{static get(t){if(!et(t))return[];return t.split(",").map(t=>yi.get(t.trim()))}}var bi,Mi,Ci,Ei,Wi,Ai,Ti=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},xi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Li=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Si{constructor(t,e){bi.set(this,void 0),Mi.set(this,void 0),Ci.set(this,void 0),Ei.set(this,void 0),Wi.set(this,void 0),Ai.set(this,void 0),xi(this,bi,t),xi(this,Mi,!1),xi(this,Ci,Nt.get("ElementManager")),xi(this,Wi,e),xi(this,Ei,Date.now()),xi(this,Ai,new ri(e.interactions))}toggleClass(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{let i=e.classList;Li(this,Wi).interactions.fetch(()=>{i.contains(t)?Li(this,Wi).interactions.mutate(i.remove,i,t):Li(this,Wi).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{let i=e.classList;Li(this,Wi).interactions.fetch(()=>{i.contains(t)||Li(this,Wi).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{let i=e.classList;Li(this,Wi).interactions.fetch(()=>{i.contains(t)&&Li(this,Wi).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return et(t)?Li(this,bi).reduce((e,i)=>{let s=i.getAttribute(t);return null!=s&&e.push(s),e},[]):[]}setAttribute(t,e){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(i=>{Li(this,Wi).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{Li(this,Wi).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(i=>{Li(this,Wi).interactions.fetch(()=>{i.hasAttribute(t)?Li(this,Wi).interactions.mutate(i.removeAttribute,i,t):Li(this,Wi).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return Ti(this,void 0,void 0,(function*(){return!!et(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return Ti(this,void 0,void 0,(function*(){return!(!et(t)||!et(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return Ti(this,void 0,void 0,(function*(){return Li(this,Mi)&&Li(this,Ci).error("Element is locked",e),this.lock(),Li(this,bi).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}setAction(t,e,i){return Ti(this,void 0,void 0,(function*(){if(!et(t))return!1;let s=yi.get(t);return this.animate(e,i,t=>{s.add(t)})}))}removeAction(t,e,i){return Ti(this,void 0,void 0,(function*(){if(!et(t))return!1;let s=yi.get(t);return this.animate(e,i,t=>{s.remove(t)})}))}animate(t,e,i){var s;return Ti(this,void 0,void 0,(function*(){if(!et(t))return!1;const n=null!==(s=null!=e?e:Li(this,Wi).setup.animationTime)&&void 0!==s?s:0,r=new vi(t);return this.call(t=>Li(this,Ai).performAction(t,r,n,()=>{i&&i(t)}))}))}emit(t,...e){et(t)?this.call(i=>{let s=i.$cuid;et(s)&&(Li(this,Ci).debug(`Emitting event ${t} to ${s}`),Li(this,Wi).bus.emit(t,s,...e))},"emit"):Li(this,Ci).warning("Not enough data to emit event","emit")}on(t,e){let i=[];return ht(t,e)?(this.call(s=>{let n=s;if(et(n)){let s=Li(this,Wi).bus.on(t,e,n);null!=s&&i.push(s)}},"on"),i):(Li(this,Ci).error("Incorrect arguments","on"),i)}detach(t,e){ht(t,e)||Li(this,Ci).error("Incorrect arguments","detach"),this.call(i=>{let s=i;et(s)&&Li(this,Wi).bus.detach(t,e,s)},"detach")}read(t,...e){Li(this,Wi).interactions.fetch(t,this,...e)}change(t,...e){Li(this,Wi).interactions.mutate(t,this,...e)}elements(){return Li(this,bi)}count(){return Li(this,bi).length}lock(){xi(this,Mi,!0)}unlock(){xi(this,Mi,!1)}isLocked(){return Li(this,Mi)}refresh(){return Date.now()-Li(this,Ei)<36e4}}bi=new WeakMap,Mi=new WeakMap,Ci=new WeakMap,Ei=new WeakMap,Wi=new WeakMap,Ai=new WeakMap;var Pi,Ii,Oi,Ni=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Hi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},_i=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Di{constructor(t){Pi.set(this,void 0),Ii.set(this,void 0),Oi.set(this,void 0),Hi(this,Pi,null!=t?t:[]),Hi(this,Oi,Nt.get("CuiPluginManager")),Hi(this,Ii,[])}init(t){_i(this,Oi).debug("Plugins initialization started: "+_i(this,Pi).length),Hi(this,Ii,_i(this,Pi).filter(t=>et(t.mutation))),_i(this,Pi).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),_i(this,Oi).debug("Plugins have been initialized")}get(t){if(et(t))return _i(this,Pi).find(e=>e.name===t)}has(t){return et(this.get(t))}onMutation(t){return Ni(this,void 0,void 0,(function*(){let e=[];return _i(this,Ii).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}Pi=new WeakMap,Ii=new WeakMap,Oi=new WeakMap;var Ri,$i,Fi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Bi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class zi{constructor(t,e){Ri.set(this,void 0),$i.set(this,void 0),Bi(this,Ri,t),Bi(this,$i,e)}registerComponent(t){return Fi(this,void 0,void 0,(function*(){let e=_t(t,qi(this,Ri));return!(!e||0===e.length)&&Dt(t,e,qi(this,$i))}))}updateComponent(t,e,i){return Fi(this,void 0,void 0,(function*(){return!!t.hasAttribute(e)&&Ft(t,e,i)}))}destroyComponent(t){return Fi(this,void 0,void 0,(function*(){return Rt(t)}))}}Ri=new WeakMap,$i=new WeakMap;var ji,Vi,Ui,Ki,Yi,Xi,Gi,Zi,Ji=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Qi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ts=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class es{constructor(t,e,i){ji.set(this,void 0),Vi.set(this,void 0),Ui.set(this,void 0),Ki.set(this,void 0),Yi.set(this,void 0),Xi.set(this,void 0),Gi.set(this,void 0),Zi.set(this,void 0),y.prefix=t.prefix,y.logLevel=t.logLevel,t.development&&(y.devTool=t.development),Qi(this,Ki,new Di(e)),Qi(this,Yi,null!=i?i:[]),Qi(this,Ui,new ti(t,e.map(t=>t.name))),Qi(this,ji,Nt.get("CuiInstance")),Qi(this,Xi,t.root),Qi(this,Vi,void 0),Qi(this,Gi,[]),Qi(this,Zi,new zi(ts(this,Yi),ts(this,Ui)))}init(){return Ji(this,void 0,void 0,(function*(){if(ts(this,ji).debug("Instance started","init"),!et(window.MutationObserver))throw new o("Mutation observer does not exists");Qi(this,Gi,ts(this,Yi).map(t=>t.attribute));const t=et(ts(this,Gi))?ts(this,Xi).querySelectorAll(ot(ts(this,Gi))):null;if(et(t)){ts(this,ji).debug(`Initiating ${t.length} elements`);let e=[];for(let i of t)try{let t=_t(i,ts(this,Yi));e.push(Dt(i,t,ts(this,Ui)))}catch(t){ts(this,ji).exception(t)}yield Promise.all(e)}return ts(this,ji).debug("Init plugins","init"),ts(this,Ki).init(ts(this,Ui)),ht(ts(this,Yi),ts(this,Gi))&&(ts(this,ji).debug("Init mutation observer","init"),Qi(this,Vi,new ne(ts(this,Xi),ts(this,Ui))),ts(this,Vi).setComponents(ts(this,Yi)).setAttributes(ts(this,Gi)),ts(this,Vi).setPlugins(ts(this,Ki)),ts(this,Vi).start()),ts(this,ji).debug("Setting CSS globals","init"),ts(this,Ui).interactions.mutate(()=>{ts(this,Ui).setProperty(w,ts(this,Ui).setup.animationTimeLong+"ms"),ts(this,Ui).setProperty(g,ts(this,Ui).setup.animationTime+"ms"),ts(this,Ui).setProperty(m,ts(this,Ui).setup.animationTimeShort+"ms")},null),ts(this,Ui).bus.emit(k,null),this}))}finish(){ts(this,Vi)&&ts(this,Vi).stop(),ts(this,Ui).bus.emit(b,null)}get(t){const e=this.all(t);if(!e)return;return new Si(e,ts(this,Ui))}all(t){const e=document.querySelectorAll(t);if(et(e))return[...e]}getUtils(){return ts(this,Ui)}on(t,e,i){return ht(t,e)?ts(this,Ui).bus.on(t,e,i):(ts(this,ji).error("Incorrect arguments","on"),null)}detach(t,e){ht(t,e)||ts(this,ji).error("Incorrect arguments","detach"),ts(this,Ui).bus.detach(t,e)}detachAll(t){et(t)||ts(this,ji).error("Incorrect arguments","detachAll"),ts(this,Ui).bus.detachAll(t)}emit(t,e,...i){if(!ht(t,e))return void ts(this,ji).warning("Not enough data to emit event","emit");let s=null;if("string"==typeof e&&e.startsWith("~"))s=e.substring(1);else{s=("string"==typeof e?document.querySelector(e):e).$cuid}et(s)?ts(this,Ui).bus.emit(t,s,...i):ts(this,ji).warning("Element is not a cUI element","emit")}getPlugin(t){return ts(this,Ki).get(t)}api(){return ts(this,Zi)}createCuiElement(t,e,i){return Ji(this,void 0,void 0,(function*(){if(!et(e)||!ts(this,Gi).includes(e))return ts(this,ji).error("Element cannot be created: Unknown attribute"),!1;let s=ts(this,Yi).find(t=>t.attribute===e);return!!s&&(!!function(t,e,i){if(!ht(e,i,t))return!1;if(t.hasAttribute(e))return!1;let s=[];return yt(i,(t,e)=>{s.push(`${t}: ${e}`)}),t.setAttribute(e,s.join("; ")),!0}(t,e,i)&&Dt(t,[s],ts(this,Ui)))}))}}ji=new WeakMap,Vi=new WeakMap,Ui=new WeakMap,Ki=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Gi=new WeakMap,Zi=new WeakMap;const is={slide:{current:{left:{transform:{translateX:{from:0,to:-100,unit:"%"}}},right:{transform:{translateX:{from:0,to:100,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}},fade:{current:{left:{opacity:{from:1,to:0}},right:{opacity:{from:1,to:0}}},previous:{left:{opacity:{from:0,to:1}},right:{opacity:{from:0,to:1}}}},push:{current:{left:{transform:{translateX:{from:0,to:-10,unit:"%"}}},right:{transform:{translateX:{from:0,to:10,unit:"%"}}}},previous:{left:{transform:{translateX:{from:100,to:0,unit:"%"}}},right:{transform:{translateX:{from:-100,to:0,unit:"%"}}}}}};var ss,ns=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},rs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},os=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class hs{constructor(){ss.set(this,void 0),rs(this,ss,window)}init(t){var e,i;return ns(this,void 0,void 0,(function*(){let s=Object.assign(Object.assign({},new At),t.setup);const n=s.app,r={result:!1};if(et(os(this,ss)[n]))return r.message="Instance is already initialized",r;if(et(t.icons))for(let e in t.icons)f[e]=t.icons[e];if(et(t.swipeAnimations))for(let e in t.swipeAnimations)is[e]=t.swipeAnimations[e];try{os(this,ss)[n]=new es(s,null!==(e=t.plugins)&&void 0!==e?e:[],null!==(i=t.components)&&void 0!==i?i:[]),yield os(this,ss)[n].init()}catch(t){return console.error(t),r.message="An error occured during initialization",r}return r.result=!0,r}))}}ss=new WeakMap;var as,ls,us,cs,ds,ps,vs,fs,gs,ws=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ms=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ys{constructor(t){as.set(this,void 0),ls.set(this,void 0),us.set(this,void 0),cs.set(this,void 0),ds.set(this,void 0),ps.set(this,void 0),vs.set(this,void 0),fs.set(this,void 0),gs.set(this,void 0),ws(this,cs,t),ws(this,ls,[]),ws(this,us,void 0),ws(this,as,void 0),ws(this,ds,void 0),ws(this,ps,[]),ws(this,vs,[]),ws(this,gs,void 0),ws(this,fs,void 0)}setId(t){return ws(this,as,t),this}setClasses(...t){return ws(this,ls,t),this}setAttributes(t){return ws(this,us,t),this}setTextContent(t){return ws(this,ds,t),this}setChildren(...t){return ws(this,ps,[...t]),this}setRawChildren(...t){return ws(this,vs,[...t]),this}onEvent(t,e){return ws(this,gs,t),ws(this,fs,e),this}build(t){let e=document.createElement(ms(this,cs));return et(ms(this,as))&&(e.id=ms(this,as)),et(ms(this,ls))&&e.classList.add(...ms(this,ls)),et(ms(this,us))&&yt(ms(this,us),(t,i)=>{e.setAttribute(t,i)}),et(t)?e.innerHTML=t:et(ms(this,ds))&&(e.textContent=ms(this,ds)),ms(this,vs).forEach(t=>{e.appendChild(t.build())}),ms(this,ps).forEach(t=>e.appendChild(t)),ht(ms(this,gs),ms(this,fs))&&e.addEventListener(ms(this,gs),t=>{ms(this,fs).call(this,t)}),e}}as=new WeakMap,ls=new WeakMap,us=new WeakMap,cs=new WeakMap,ds=new WeakMap,ps=new WeakMap,vs=new WeakMap,fs=new WeakMap,gs=new WeakMap;var ks,bs,Ms,Cs,Es,Ws,As=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ts=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xs{constructor(t,e,i){ks.set(this,void 0),bs.set(this,void 0),Ms.set(this,void 0),Cs.set(this,void 0),Es.set(this,void 0),Ws.set(this,void 0),As(this,Cs,t),As(this,ks,As(this,Ms,As(this,bs,void 0))),As(this,Es,null!=i?i:""),As(this,Ws,e)}createHeader(t,e,i){et(e)||(e=[]),et(i)||(i=[]);let s=new ys("div");s.setClasses(Ts(this,Cs)+"-dialog-header",...e),As(this,ks,s.build());let n=new ys("span").setClasses(this.getPrefixedString("-dialog-title")).build(t);Ts(this,ks).appendChild(n),this.appendChildrens(Ts(this,ks),...i)}createFooter(t,e){et(t)||(t=[]),et(e)||(e=[]),As(this,Ms,new ys("div").setClasses(this.getPrefixedString("-dialog-footer"),...t).build()),this.appendChildrens(Ts(this,Ms),...e)}createBody(t,e){et(t)||(t=[]),et(e)||(e=[]),As(this,bs,new ys("div").setClasses(this.getPrefixedString("-dialog-body"),...t).build()),this.appendChildrens(Ts(this,bs),...e)}build(t){let e=[this.getPrefixedString("-dialog")];Ts(this,Ws)&&e.push(this.getPrefixedString("-reverse-auto"));let i=new ys("div").setId(t).setClasses(...e).setAttributes({[this.getPrefixedString("-dialog")]:Ts(this,Es)}).build(),s=new ys("div").setClasses(this.getPrefixedString("-dialog-container")).build();return Ts(this,ks)&&s.appendChild(Ts(this,ks)),Ts(this,bs)&&s.appendChild(Ts(this,bs)),Ts(this,Ms)&&s.appendChild(Ts(this,Ms)),i.appendChild(s),i}appendChildrens(t,...e){et(e)&&e.forEach(e=>t.appendChild(e))}getPrefixedString(t){return Ts(this,Cs)+t}}ks=new WeakMap,bs=new WeakMap,Ms=new WeakMap,Cs=new WeakMap,Es=new WeakMap,Ws=new WeakMap;var Ls,Ss,Ps,Is,Os,Ns,Hs,_s,Ds=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Rs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class $s{constructor(t,e,i){Ls.set(this,void 0),Ss.set(this,void 0),Ps.set(this,void 0),Is.set(this,void 0),Os.set(this,void 0),Ds(this,Ls,{yes:i.onYes,no:i.onNo,cancel:i.onCancel,ok:i.onOk}),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,Ds(this,Ss,t),Ds(this,Ps,e),this.reverse=!1,Ds(this,Os,null),this.closeStr=Rs(this,Ss).setup.prefix+"-close",this.iconStr=Rs(this,Ss).setup.prefix+"-icon",Ds(this,Is,void 0)}getId(){return Rs(this,Ps)}show(t){if(!Rs(this,Ss))return;let e=document.getElementById(Rs(this,Ps));et(e)?this.updateElement(e):(e=this.createElement(),Rs(this,Ss).interactions.mutate(()=>{t.appendChild(e)},null)),setTimeout(()=>{Ds(this,Is,new Si([e],Rs(this,Ss)));let t=Rs(this,Is).on("closed",this.onClose.bind(this));Ds(this,Os,t.length>0?t[0]:null),Rs(this,Is).emit("open")},50)}updateElement(t){Rs(this,Ss).interactions.fetch(()=>{let e=t.querySelector(`.${this.prefix}-dialog-title`),i=t.querySelector(`.${this.prefix}-dialog-body>p`);Rs(this,Ss).interactions.mutate(()=>{e&&(e.innerHTML=this.title),i&&(i.innerHTML=this.content)},null)},null)}onClose(t){try{if(et(t)&&t.state&&Rs(this,Ls)&&et(Rs(this,Ls)[t.state])){let e=Rs(this,Ls)[t.state];e&&e()}}finally{null!=Rs(this,Os)&&(Rs(this,Is)&&Rs(this,Is).detach("closed",Rs(this,Os)),Ds(this,Os,null)),Ds(this,Is,void 0)}}}Ls=new WeakMap,Ss=new WeakMap,Ps=new WeakMap,Is=new WeakMap,Os=new WeakMap;class Fs extends $s{constructor(t,e,i){var s;super(t,e,i),Ns.set(this,void 0),Ds(this,Ns,e),this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new xs(this.prefix,this.reverse);return t.createHeader(this.title,[],[new ys("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new ys("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new ys("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new ys("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(Rs(this,Ns))}}Ns=new WeakMap;class Bs extends $s{constructor(t,e,i){var s;super(t,e,i),Hs.set(this,void 0),Ds(this,Hs,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new xs(this.prefix,this.reverse);return t.createHeader(this.title,[]),t.createBody([],[new ys("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new ys("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),t.build(Rs(this,Hs))}}Hs=new WeakMap;class qs extends $s{constructor(t,e,i){var s;super(t,e,i),_s.set(this,void 0),Ds(this,_s,e),this.content=i.message,this.title=i.title,this.prefix=t.setup.prefix,this.reverse=null!==(s=i.reverse)&&void 0!==s&&s}createElement(){let t=new xs(this.prefix,this.reverse);return t.createHeader(this.title,[],[new ys("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),t.createBody([],[new ys("p").build(this.content)]),t.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new ys("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new ys("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),t.build(Rs(this,_s))}}_s=new WeakMap;var zs,js,Vs,Us=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ks=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ys{constructor(){zs.set(this,void 0),js.set(this,void 0),Vs.set(this,void 0),this.name="alert-plugin",this.description="CuiAlertsPlugin",Us(this,zs,null),Us(this,js,void 0),Us(this,Vs,null)}init(t){Us(this,Vs,Nt.get("CuiAlertsPlugin")),Us(this,js,t),this.detach(),Us(this,zs,Ks(this,js).bus.on(K,this.onAlert.bind(this),{$cuid:this.name}))}destroy(){this.detach()}detach(){Ks(this,zs)&&Ks(this,js)&&(Ks(this,js).bus.detach(K,Ks(this,zs)),Us(this,zs,null))}onAlert(t){if(!Ks(this,js))return void Ks(this,Vs).error("Utils are not set");if(!this.validateEvent(t))return void Ks(this,Vs).error("Event validation failed");let e=class{static get(t,e,i,s){return"Info"===e?new Bs(s,t,i):"YesNoCancel"===e?new qs(s,t,i):"OkCancel"===e?new Fs(s,t,i):void 0}}.get(t.id,t.type,t.options,Ks(this,js));e?e.show(Ks(this,js).setup.root):Ks(this,Vs).error("Possibly incorrect alert type")}validateEvent(t){return!!(t&&t.id&&t.type&&t.options)}}zs=new WeakMap,js=new WeakMap,Vs=new WeakMap;var Xs,Gs,Zs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Js=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Qs{constructor(){this.name="click-plugin",Xs.set(this,void 0),Gs.set(this,void 0),this.description="CuiWindowClickPlugin",Zs(this,Xs,void 0),Zs(this,Gs,this.onWindowClick.bind(this))}init(t){Zs(this,Xs,t.bus),window.addEventListener("click",Js(this,Gs))}destroy(){window.removeEventListener("click",Js(this,Gs))}onWindowClick(t){Js(this,Xs)&&Js(this,Xs).emit(N,null,{ev:t,source:"CuiWindowClickPlugin",timestamp:Date.now(),name:N})}}Xs=new WeakMap,Gs=new WeakMap;var tn,en,sn,nn,rn,on,hn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},an=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ln{constructor(t){tn.set(this,void 0),en.set(this,void 0),sn.set(this,void 0),nn.set(this,void 0),rn.set(this,void 0),on.set(this,void 0),this.setup=Object.assign({keybordClass:"focus-visible",mouseClass:"focus-precise",touchClass:"focus-precise"},t),this.description="CuiLightFocusPlugin",this.name="focus-plugin",hn(this,tn,void 0),hn(this,rn,this.onKeyDownEvent.bind(this)),hn(this,sn,this.onMouseEvent.bind(this)),hn(this,nn,this.onTouchEvent.bind(this)),hn(this,en,"none"),hn(this,on,void 0)}init(t){hn(this,tn,t.interactions),document.body.addEventListener("touchstart",an(this,nn)),document.body.addEventListener("mousedown",an(this,sn)),window.addEventListener("keydown",an(this,rn))}onMouseEvent(t){"mouse"!==an(this,en)&&this.update("mouse")}onKeyDownEvent(t){"keyboard"!==an(this,en)&&this.update("keyboard")}onTouchEvent(t){"touch"!==an(this,en)&&this.update("touch")}update(t){let e=this.getClass(t);this.setClasses(e,an(this,on),()=>{hn(this,on,e),hn(this,en,t)})}getClass(t){switch(t){case"keyboard":return this.setup.keybordClass;case"mouse":return this.setup.mouseClass;case"touch":return this.setup.touchClass;default:return}}setClasses(t,e,i){an(this,tn)&&t!==e&&an(this,tn).fetch(()=>{let s=t&&document.body.classList.contains(t),n=e&&document.body.classList.contains(e);an(this,tn).mutate(()=>{s||document.body.classList.add(t),n&&document.body.classList.remove(e),i()},null)},null)}destroy(){document.body.removeEventListener("touchstart",an(this,nn)),document.body.removeEventListener("mousedown",an(this,sn)),window.removeEventListener("keydown",an(this,rn))}}tn=new WeakMap,en=new WeakMap,sn=new WeakMap,nn=new WeakMap,rn=new WeakMap,on=new WeakMap;var un,cn,dn,pn,vn,fn,gn,wn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class yn{constructor(t,e){un.set(this,void 0),cn.set(this,void 0),dn.set(this,void 0),pn.set(this,void 0),vn.set(this,void 0),fn.set(this,void 0),gn.set(this,void 0),wn(this,dn,!1),wn(this,pn,!0),wn(this,vn,!1),wn(this,un,void 0),wn(this,cn,null!=e?e:[]),wn(this,fn,this.onKeyDown.bind(this)),wn(this,gn,this.onKeyUp.bind(this))}setCallback(t){wn(this,un,t)}isInProgress(){return mn(this,dn)}attach(){document.addEventListener("keydown",mn(this,fn)),mn(this,pn)&&document.addEventListener("keyup",mn(this,gn)),wn(this,vn,!0)}detach(){document.removeEventListener("keydown",mn(this,fn)),mn(this,pn)&&document.addEventListener("keyup",mn(this,gn)),wn(this,vn,!1)}isAttached(){return mn(this,vn)}onKeyDown(t){if(!mn(this,dn)){wn(this,dn,!0);try{et(mn(this,cn))&&!mn(this,cn).includes(t.code)||!mn(this,un)||mn(this,un).call(this,t)}catch(t){console.error(t)}finally{mn(this,pn)||wn(this,dn,!1)}}}onKeyUp(t){wn(this,dn,!1)}}un=new WeakMap,cn=new WeakMap,dn=new WeakMap,pn=new WeakMap,vn=new WeakMap,fn=new WeakMap,gn=new WeakMap;var kn,bn,Mn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Cn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class En{constructor(t){kn.set(this,void 0),bn.set(this,void 0),Mn(this,bn,t),Mn(this,kn,new yn(!0)),Cn(this,kn).setCallback(this.onKeyDown.bind(this))}connect(){Cn(this,kn).attach()}disconnect(){Cn(this,kn).detach()}onKeyDown(t){Cn(this,bn).emit(O,null,{timestamp:Date.now(),name:O,source:"CuiKeysObserver",event:t})}}kn=new WeakMap,bn=new WeakMap;var Wn,An=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Tn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xn{constructor(t){this.name="keys-plugin",Wn.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t,An(this,Wn,void 0)}init(t){An(this,Wn,new En(t.bus)),Tn(this,Wn).connect()}destroy(){Tn(this,Wn)&&Tn(this,Wn).disconnect()}}Wn=new WeakMap;var Ln,Sn,Pn,In,On,Nn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _n{constructor(t){Ln.set(this,void 0),Sn.set(this,void 0),Pn.set(this,void 0),In.set(this,void 0),On.set(this,void 0),Nn(this,Ln,t),Nn(this,Pn,!1),Nn(this,Sn,void 0),Nn(this,In,!1),Nn(this,On,this.event.bind(this))}setCallback(t){Nn(this,Sn,t)}isInProgress(){return Hn(this,In)}attach(){window.matchMedia&&!Hn(this,Pn)&&Hn(this,Ln)&&(window.matchMedia(Hn(this,Ln)).addEventListener("change",Hn(this,On)),Nn(this,Pn,!0))}detach(){Hn(this,Pn)&&(window.matchMedia(Hn(this,Ln)).removeEventListener("change",Hn(this,On)),Nn(this,Pn,!1))}isAttached(){return Hn(this,Pn)}event(t){if(!Hn(this,In)&&Hn(this,Sn)){Nn(this,In,!0);try{Hn(this,Sn).call(this,t)}catch(t){console.error(t)}finally{Nn(this,In,!1)}}}}Ln=new WeakMap,Sn=new WeakMap,Pn=new WeakMap,In=new WeakMap,On=new WeakMap;var Dn,Rn,$n=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Bn{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",Dn.set(this,void 0),Rn.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t,$n(this,Rn,void 0),$n(this,Dn,void 0)}init(t){$n(this,Rn,t),this.setup.autoLight&&"dark"==(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")&&Fn(this,Rn).setLightMode("dark"),$n(this,Dn,new _n("(prefers-color-scheme: dark)")),Fn(this,Dn).setCallback(this.onChange.bind(this)),Fn(this,Dn).attach()}destroy(){Fn(this,Dn)&&Fn(this,Dn).detach()}onChange(t){var e;if(!Fn(this,Rn))return;let i=Fn(this,Rn).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?Fn(this,Rn).setLightMode("dark"):Fn(this,Rn).setLightMode("light"))}}Dn=new WeakMap,Rn=new WeakMap;var qn,zn,jn,Vn,Un,Kn,Yn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Xn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gn{constructor(t){qn.set(this,void 0),zn.set(this,void 0),jn.set(this,void 0),Vn.set(this,void 0),Un.set(this,void 0),Kn.set(this,void 0),Yn(this,jn,!1),Yn(this,qn,null!=t?t:document.body),Yn(this,Vn,!1),Yn(this,Un,!1),Yn(this,zn,void 0),Yn(this,Kn,void 0),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this)}setCallback(t){Yn(this,zn,t)}setTarget(t){Yn(this,Kn,t)}isInProgress(){return Xn(this,jn)}preventDefault(t){Yn(this,Un,t)}attach(){Xn(this,Vn)||(Xn(this,qn).addEventListener("mousedown",this.onMouseDown,{passive:!1}),Xn(this,qn).addEventListener("mouseup",this.onMouseUp,{passive:!1}),Xn(this,qn).addEventListener("mousemove",this.onMouseMove,{passive:!1}),Xn(this,qn).addEventListener("touchstart",this.onTouchStart,{passive:!1}),Xn(this,qn).addEventListener("touchend",this.onTouchEnd,{passive:!1}),Xn(this,qn).addEventListener("touchmove",this.onTouchMove,{passive:!1}),Yn(this,Vn,!0))}detach(){Xn(this,Vn)&&(Xn(this,qn).removeEventListener("mousedown",this.onMouseDown,{passive:!1}),Xn(this,qn).removeEventListener("mouseup",this.onMouseUp,{passive:!1}),Xn(this,qn).removeEventListener("mousemove",this.onMouseMove,{passive:!1}),Xn(this,qn).removeEventListener("touchstart",this.onTouchStart,{passive:!1}),Xn(this,qn).removeEventListener("touchend",this.onTouchEnd,{passive:!1}),Xn(this,qn).removeEventListener("touchmove",this.onTouchMove,{passive:!1}),Yn(this,Vn,!1))}isAttached(){return Xn(this,Vn)}onMouseDown(t){Xn(this,jn)||Xn(this,Kn)&&!Xn(this,Kn).contains(t.target)||(Yn(this,jn,!0),this.publishMouseEvent("down",t))}onMouseUp(t){Xn(this,jn)&&(Yn(this,jn,!1),this.publishMouseEvent("up",t))}onMouseMove(t){Xn(this,jn)&&this.publishMouseEvent("move",t)}onTouchStart(t){Xn(this,jn)||Xn(this,Kn)&&!Xn(this,Kn).contains(t.target)||(Yn(this,jn,!0),this.publishTouchEvent("down",t))}onTouchEnd(t){Xn(this,jn)&&(Yn(this,jn,!1),this.publishTouchEvent("up",t))}onTouchMove(t){Xn(this,jn)&&this.publishTouchEvent("move",t)}publishMouseEvent(t,e){Xn(this,Un)&&e.cancelable&&e.preventDefault(),et(Xn(this,zn))&&Xn(this,zn).call(this,{type:t,x:e.clientX,y:e.clientY,moveX:e.movementX,moveY:e.movementY,target:e.target,event:e})}publishTouchEvent(t,e){if(Xn(this,Un)&&e.cancelable&&e.preventDefault(),!et(Xn(this,zn)))return;let i=null;e.touches.length>0?i=e.touches[0]:e.changedTouches.length>0&&(i=e.changedTouches[0]),Xn(this,zn).call(this,{event:e,type:t,target:e.target,x:et(i)?i.clientX:-1,y:et(i)?i.clientY:-1,moveX:-1,moveY:-1})}}qn=new WeakMap,zn=new WeakMap,jn=new WeakMap,Vn=new WeakMap,Un=new WeakMap,Kn=new WeakMap;var Zn,Jn,Qn,tr,er,ir,sr,nr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class or{constructor(t,e){Zn.set(this,void 0),Jn.set(this,void 0),Qn.set(this,void 0),tr.set(this,void 0),er.set(this,void 0),ir.set(this,void 0),sr.set(this,void 0),nr(this,Zn,t),nr(this,Jn,new Gn),rr(this,Jn).setCallback(this.onMove.bind(this)),nr(this,er,void 0),nr(this,Qn,!1),nr(this,tr,null),nr(this,ir,!1),nr(this,sr,e)}attach(){rr(this,Jn).isAttached()||(rr(this,Jn).attach(),nr(this,tr,rr(this,Zn).on($,this.onMoveLock.bind(this))))}detach(){rr(this,Jn).isAttached()&&(rr(this,Jn).detach(),null!=rr(this,tr)&&rr(this,Zn).detach($,rr(this,tr)))}isAttached(){return rr(this,Jn).isAttached()}onMove(t){if(!rr(this,Qn))switch(t.type){case"down":nr(this,er,t),nr(this,ir,!1);break;case"move":rr(this,er)&&!rr(this,ir)&&(this.pushMoveEvent(rr(this,er)),nr(this,ir,!0)),this.pushMoveEvent(t);break;case"up":if(this.pushMoveEvent(t),rr(this,er)){if(rr(this,sr)){const{diffX:e,diffY:i}=this.getGestureDiff(rr(this,er),t),s=this.calculateGesture(e,i);this.pushGestureEvent(s,e,i)}nr(this,er,void 0)}}}pushMoveEvent(t){rr(this,Zn).emit(R,null,Object.assign(Object.assign({},t),{source:"CuiMoveObserver",timestamp:Date.now(),name:R}))}onMoveLock(t){nr(this,Qn,t)}getGestureDiff(t,e){return{diffX:e.x-t.x,diffY:e.y-t.y}}calculateGesture(t,e){const i=.3*window.innerWidth,s=Math.abs(t),n=Math.abs(e);if(s>n&&s>i)return t>0?"right":"left";return n>.3*window.innerHeight?e>0?"down":"up":"none"}pushGestureEvent(t,e,i){const s=this.getGestureEventName(t);s&&rr(this,Zn).emit(s,null,{timespstamp:Date.now(),changeX:e,changeY:i,name:s,source:"CuiMoveObserver"})}getGestureEventName(t){switch(t){case"up":return X;case"down":return Y;case"left":return G;case"right":return Z;default:return null}}}Zn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,tr=new WeakMap,er=new WeakMap,ir=new WeakMap,sr=new WeakMap;var hr,ar,lr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ur=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class cr{constructor(t){this.name="move-observer-plugin",hr.set(this,void 0),ar.set(this,void 0),this.description="CuiMoveObserverPlugin",lr(this,hr,void 0),lr(this,ar,!1!==t)}init(t){lr(this,hr,new or(t.bus,ur(this,ar))),ur(this,hr).attach()}destroy(){ur(this,hr)&&ur(this,hr).isAttached()&&ur(this,hr).detach()}}hr=new WeakMap,ar=new WeakMap;var dr,pr,vr,fr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},gr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wr{constructor(t){dr.set(this,void 0),pr.set(this,void 0),vr.set(this,void 0),fr(this,dr,t),fr(this,pr,1),fr(this,vr,new mr)}setScale(t){return fr(this,pr,t),this}build(){let t=function(t){if(!et(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}(gr(this,dr));return et(t)&&gr(this,pr)&&gr(this,vr).append(t,gr(this,pr)),t}}dr=new WeakMap,pr=new WeakMap,vr=new WeakMap;class mr{append(t,e){let i=ut(t.getAttribute("width"),20),s=ut(t.getAttribute("height"),20);t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var yr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};function kr(t,e,i,s){return yr(this,void 0,void 0,(function*(){let n=e.setup.prefix;if(!ht(t.title,t.id))return;const r=[br(t.title,i,s)];return et(t.message)&&r.push(function(t,e){return new ys("div").setClasses(e.NOTIFICATION_BODY_CLS).setRawChildren(new ys("div").setTextContent(t))}(t.message,i)),et(t.actions)&&r.push(function(t,e,i){return new ys("div").setClasses(e.NOTIFICATION_FOOTER_CLS).setRawChildren(function(t,e){return new ys("ul").setRawChildren(...t.map(t=>new ys("li").setRawChildren(new ys("a").onEvent("click",()=>{try{t.callback()}catch(t){Nt.get("Notifications").exception(t,"OnActionClick")}finally{e()}}).setTextContent(t.name))))}(t,i))}(t.actions,i,s)),new ys("div").setClasses(i.NOTIFICATION_CLS,i.MARGIN_SMALL_VERTICAL,function(t,e){return`${t}-${null!=e?e:"default"}`}(n,t.type)).setId(t.id).setRawChildren(...r).build()}))}function br(t,e,i){const s=new ys("span").setClasses(e.NOTIFICATION_TITLE_CLS).setTextContent(t),n=new wr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 3,3 17,17"></path><path d="M 17,3 3,17"></path></svg>').build(),r=new ys("a").setClasses(e.ICON_CLS,e.NOTIFICATION_CLOSE_CLS).onEvent("click",i);n&&r.setChildren(n);return new ys("div").setClasses(e.NOTIFICATION_HEADER_CLS).setRawChildren(s,r)}var Mr,Cr,Er,Wr,Ar,Tr,xr,Lr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Sr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ir{constructor(t){var e;this.name="notification-plugin",Mr.set(this,void 0),Cr.set(this,void 0),Er.set(this,void 0),Wr.set(this,void 0),Ar.set(this,void 0),Tr.set(this,void 0),xr.set(this,void 0),this.description="CuiNotificationPlugin",Sr(this,Cr,null),Sr(this,Mr,void 0),Sr(this,Er,null),Sr(this,Wr,{}),Sr(this,Ar,{}),Sr(this,Tr,void 0),Sr(this,xr,null!==(e=t.timeout)&&void 0!==e?e:5e3)}init(t){this.createCache(t.setup.prefix),this.getOrCreateContainer(t,document.body),Sr(this,Tr,new ri(t.interactions)),Sr(this,Mr,t),Sr(this,Er,Pr(this,Mr).bus.on(J,this.onEvent.bind(this),{$cuid:this.name}))}destroy(){Pr(this,Cr)&&Pr(this,Cr).remove(),Pr(this,Er)&&Pr(this,Mr)&&Pr(this,Mr).bus.detach(J,Pr(this,Er))}onEvent(t){(function(t){return et(t)&&ht(t.id,t.title)})(t)&&Pr(this,Mr)&&Pr(this,Tr)&&Pr(this,Cr)&&(Pr(this,Ar)[t.id]||kr(t,Pr(this,Mr),Pr(this,Wr),()=>{this.onNotificationClose(t,!1,!0)}).then(e=>{if(!e)return;this.addNotificationToTree(e);let i=null;!1!==t.auto&&(i=this.setAutoClose(t)),Pr(this,Ar)[t.id]={element:e,timeoutId:i},this.act(e,Pr(this,Wr).NOTIFICATION_ANIMATION_IN).then(()=>{e.classList.add(Pr(this,Wr).NOTIFICATION_ACTIVE_CLS)})}))}setAutoClose(t){return setTimeout(()=>{this.onNotificationClose(t,!0,!1)},Pr(this,xr))}addNotificationToTree(t){Pr(this,Mr).interactions.mutate(()=>{0===Pr(this,Cr).children.length?Pr(this,Cr).appendChild(t):Pr(this,Cr).insertBefore(t,Pr(this,Cr).firstChild)},null)}onNotificationClose(t,e,i){if(!t||!Pr(this,Tr)||!Pr(this,Mr))return;const s=Pr(this,Ar)[t.id];s&&(e||clearTimeout(s.timeoutId),this.act(s.element,Pr(this,Wr).NOTIFICATION_ANIMATION_OUT).then(()=>{Pr(this,Mr).bus.emit(Q,null,Object.assign(Object.assign({},t),{dissmissed:i})),s.element.remove(),delete Pr(this,Ar)[t.id]}))}getOrCreateContainer(t,e){Sr(this,Cr,document.getElementById("notifications-container")),Pr(this,Cr)||(Sr(this,Cr,new ys("div").setClasses(ft("{prefix}-notification-container",t.setup.prefix)).build()),e.appendChild(Pr(this,Cr)))}createCache(t){Sr(this,Wr,{NOTIFICATION_CLS:ft("{prefix}-notification",t),NOTIFICATION_HEADER_CLS:ft("{prefix}-notification-header",t),NOTIFICATION_TITLE_CLS:ft("{prefix}-notification-title",t),NOTIFICATION_BODY_CLS:ft("{prefix}-notification-body",t),NOTIFICATION_FOOTER_CLS:ft("{prefix}-notification-footer",t),NOTIFICATION_ACTIVE_CLS:ft("{prefix}-active",t),NOTIFICATION_ANIMATION_IN:ft("{prefix}-notification-animation-in",t),NOTIFICATION_ANIMATION_OUT:ft("{prefix}-notification-animation-out",t),NOTIFICATION_ICON_CLS:ft("{prefix}-notification-icon",t),NOTIFICATION_CLOSE_CLS:ft("{prefix}-notification-close",t),ICON_CLS:ft("{prefix}-icon",t),MARGIN_SMALL_VERTICAL:ft("{prefix}-margin-small-vertical",t)})}act(t,e,i){return Lr(this,void 0,void 0,(function*(){const s=null!=i?i:Pr(this,Mr).setup.animationTime,n=new vi(e);return Pr(this,Tr).performAction(t,n,null!=s?s:0)}))}}Mr=new WeakMap,Cr=new WeakMap,Er=new WeakMap,Wr=new WeakMap,Ar=new WeakMap,Tr=new WeakMap,xr=new WeakMap;var Or,Nr,Hr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},_r=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Dr{constructor(t){this.description="Auto print mode",this.name="auto-print",Or.set(this,void 0),Nr.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t,Hr(this,Or,void 0),Hr(this,Nr,void 0)}init(t){Hr(this,Nr,t),this.setup.autoPrint&&window.matchMedia&&window.matchMedia("print").matches&&_r(this,Nr).setPrintMode(!0),Hr(this,Or,new _n("print")),_r(this,Or).setCallback(this.onChange.bind(this)),_r(this,Or).attach()}destroy(){_r(this,Or)&&_r(this,Or).detach()}onChange(t){var e,i;if(!_r(this,Nr))return;this.setup=_r(this,Nr).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(t.matches?_r(this,Nr).setPrintMode(!0):_r(this,Nr).setPrintMode(!1))}}Or=new WeakMap,Nr=new WeakMap;var Rr,$r,Fr,Br,qr,zr,jr,Vr,Ur=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Kr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Yr{constructor(t,e){Rr.set(this,void 0),$r.set(this,void 0),Fr.set(this,void 0),Br.set(this,void 0),qr.set(this,void 0),zr.set(this,void 0),jr.set(this,void 0),Vr.set(this,void 0),Ur(this,Rr,[]),Ur(this,$r,[]),Ur(this,Fr,window.innerWidth),Ur(this,Br,!1),Ur(this,qr,at(window.innerWidth)),Ur(this,zr,null!=e?e:0),Ur(this,jr,t),Ur(this,Vr,this.listener.bind(this))}observe(t){Kr(this,Rr).findIndex(e=>e===t)<0&&Kr(this,Rr).push(t)}unobserve(t){let e=Kr(this,Rr).findIndex(e=>e===t);e>=0&&Kr(this,Rr).splice(e,1)}connect(){window.addEventListener("resize",Kr(this,Vr))}disconnect(){window.removeEventListener("resize",Kr(this,Vr))}pushUpdateToItems(t){Kr(this,Rr).length<1||(Ur(this,$r,[]),Kr(this,Rr).forEach(e=>{Kr(this,$r).push(e.resize(t))}),Promise.all(Kr(this,$r)),Ur(this,$r,[]))}listener(t){if(Kr(this,Br))return;Ur(this,Br,!0);const e=window.innerWidth-Kr(this,Fr);if(Math.abs(e)>=Kr(this,zr)){const t=at(window.innerWidth);if(t!==Kr(this,qr)){const e={current:t,previous:Kr(this,qr),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now(),name:M,source:"CuiResizeObserver"};Kr(this,jr).emit(M,"",e),this.pushUpdateToItems(e),Ur(this,qr,t)}}Ur(this,Br,!1)}}Rr=new WeakMap,$r=new WeakMap,Fr=new WeakMap,Br=new WeakMap,qr=new WeakMap,zr=new WeakMap,jr=new WeakMap,Vr=new WeakMap;var Xr,Gr=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zr=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Jr{constructor(t){this.name="resize-observer-plugin",Xr.set(this,void 0),this.description="CuiResizeObserverPlugin",Gr(this,Xr,void 0),this.setup=t}init(t){var e;Gr(this,Xr,new Yr(t.bus,null!==(e=this.setup.resizeThreshold)&&void 0!==e?e:20)),Zr(this,Xr).connect()}destroy(){Zr(this,Xr)&&Zr(this,Xr).disconnect()}}Xr=new WeakMap;var Qr,to,eo,io,so,no,ro,oo,ho=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ao=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},lo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class uo{constructor(t,e,i){Qr.set(this,void 0),to.set(this,void 0),eo.set(this,void 0),io.set(this,void 0),so.set(this,void 0),no.set(this,void 0),ro.set(this,void 0),oo.set(this,void 0),ao(this,Qr,t),ao(this,to,`.${e}-toast`),ao(this,eo,e+"-toast"),ao(this,io,e+"-active"),ao(this,so,i),ao(this,no,!1),ao(this,ro,e+"-toast-animation-in"),ao(this,oo,e+"-toast-animation-out")}show(t){return ho(this,void 0,void 0,(function*(){if(lo(this,no))return!1;ao(this,no,!0);let e=document.querySelector(lo(this,to));return et(e)||(e=document.createElement("div"),e.classList.add(lo(this,eo)),document.body.appendChild(e),yield st(10)),lo(this,Qr).mutate(()=>{e.textContent=t,e.classList.add(d),e.classList.add(lo(this,ro))},this),yield st(lo(this,so)),lo(this,Qr).mutate(()=>{e.classList.remove(d),e.classList.remove(lo(this,ro)),e.classList.add(lo(this,io))},this),yield st(3e3),lo(this,Qr).mutate(()=>{e.classList.add(d),e.classList.add(lo(this,oo))},this),setTimeout(()=>{lo(this,Qr).mutate(()=>{e.classList.remove(d),e.classList.remove(lo(this,oo)),e.classList.remove(lo(this,io))},this),ao(this,no,!1)},lo(this,so)),!0}))}}Qr=new WeakMap,to=new WeakMap,eo=new WeakMap,io=new WeakMap,so=new WeakMap,no=new WeakMap,ro=new WeakMap,oo=new WeakMap;var co,po,vo,fo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},go=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wo{constructor(t){this.name="toast-plugin",co.set(this,void 0),po.set(this,void 0),vo.set(this,void 0),this.description="CuiToastPlugin",this.setup=t,fo(this,co,void 0),fo(this,po,null),fo(this,vo,void 0)}init(t){var e;fo(this,vo,t),go(this,co)||fo(this,co,new uo(t.interactions,t.setup.prefix,null!==(e=t.setup.animationTime)&&void 0!==e?e:300)),fo(this,po,t.bus.on(j,this.onToastShow.bind(this),{$cuid:this.name}))}destroy(){go(this,vo)&&go(this,po)&&(go(this,vo).bus.detach(j,go(this,po)),fo(this,po,null))}onToastShow(t){go(this,co)&&go(this,vo)&&(go(this,vo).bus.emit(V,null,[]),go(this,co).show(t).then(()=>{go(this,vo)&&go(this,vo).bus.emit(U,null,[])}))}}co=new WeakMap,po=new WeakMap,vo=new WeakMap;class mo{static setLabel(t,e){t.hasAttribute("aria-label")||t.setAttribute("aria-label",e)}static setAria(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}static removeAria(t,e){t.hasAttribute(e)&&t.removeAttribute(e)}}var yo,ko,bo,Mo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Co=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Eo{constructor(t){yo.set(this,void 0),ko.set(this,void 0),bo.set(this,void 0),Mo(this,yo,[]),Mo(this,ko,[]),Mo(this,bo,!1),t&&t.forEach(t=>{if(!et(t.key))throw Mo(this,yo,[]),Mo(this,ko,[]),new r("Key is empty");this.add(t.key,t.value)})}add(t,e){this.throwOnEmptyKey(t),this.lock(()=>{if(this.containsKey(t))throw new Error("Key already exists");Co(this,yo).push(t),Co(this,ko).push(e)})}remove(t){this.throwOnEmptyKey(t),this.lock(()=>{let e=Co(this,yo).indexOf(t);e<0||(Co(this,yo).splice(e,1),Co(this,ko).splice(e,1))})}get(t){this.throwOnEmptyKey(t);let e=void 0;return this.lock(()=>{let i=this.indexOf(t);i>=0&&(e=Co(this,ko)[i])}),e}containsKey(t){return et(t)&&this.indexOf(t)>=0}keys(){return[...Co(this,yo)]}values(){return[...Co(this,ko)]}indexOf(t){return et(t)?Co(this,yo).indexOf(t):-1}update(t,e){this.throwOnEmptyKey(t),this.lock(()=>{let i=this.indexOf(t);if(i<0)throw new n(`Item with key [${t}] not found`);Co(this,ko)[i]=e})}clear(){this.lock(()=>{Mo(this,ko,[]),Mo(this,yo,[])})}forEach(t){this.lock(()=>{let e=Co(this,yo).length;for(let i=0;i<e;i++)t(Co(this,yo)[i],Co(this,ko)[i])})}checkLock(){if(Co(this,bo))throw new Error("You cannot alter dictionary when is locked!")}lock(t){this.checkLock(),Mo(this,bo,!0);try{t()}catch(t){throw t}finally{Mo(this,bo,!1)}}throwOnEmptyKey(t){if(!et(t))throw new r("Key is empty")}}yo=new WeakMap,ko=new WeakMap,bo=new WeakMap;var Wo,Ao=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},To=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},xo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Lo{constructor(){Wo.set(this,void 0),To(this,Wo,new Eo)}add(t){xo(this,Wo).add(t.type,t)}remove(t){xo(this,Wo).remove(t)}init(t){return Ao(this,void 0,void 0,(function*(){let e=[];return xo(this,Wo).forEach((i,s)=>e.push(s.init(t))),yield Promise.all(e),!0}))}update(t){return Ao(this,void 0,void 0,(function*(){let e=[];return xo(this,Wo).forEach((i,s)=>{s.update&&e.push(s.update(t))}),yield Promise.all(e),!0}))}destroy(){return Ao(this,void 0,void 0,(function*(){let t=[];return xo(this,Wo).forEach((e,i)=>t.push(i.destroy())),yield Promise.all(t),!0}))}}Wo=new WeakMap;var So,Po,Io,Oo,No,Ho,_o,Do,Ro,$o,Fo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Bo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class zo{constructor(t){So.set(this,void 0),Bo(this,So,t)}hasClass(t,e){return!(!t||!e.classList.contains(t))}setClass(t,e){this.setClasses([t],e)}setClasses(t,e){e&&e.classList.add(...t)}setClassesAs(t,...e){qo(this,So).mutate(this.setClasses,this,e,t)}removeClass(t,e){this.removeClasses([t],e)}removeClasses(t,e){e&&e.classList.remove(...t)}removeClassesAs(t,...e){qo(this,So).mutate(this.removeClasses,this,e,t)}removeAttribute(t,e){e&&e.hasAttribute(t)&&e.removeAttribute(t)}setStyle(t,e,i){t&&t.style&&et(i)&&(t.style[e]=i)}}So=new WeakMap;Po=new WeakMap;class jo extends class{constructor(t,e,i){var s;Po.set(this,void 0),this._log=Nt.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid,this.isLocked=!1,this.activeClassName=(null!=(s=i.setup.prefix)?s:"")+"-active",this.helper=new zo(i.interactions),Bo(this,Po,[]),this.componentName=t}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,e,i){qo(this,Po).includes(t)||qo(this,Po).push(t),this.utils.bus.emit(t,this.cuid,Object.assign(Object.assign({},e),{name:t,timestamp:Date.now(),source:null!=i?i:this.element}))}onEvent(t,e){return this.utils.bus.on(t,e,this.element)}detachEvent(t,e){null!=e&&(this.utils.bus.detach(t,e),e="")}getId(){return this.cuid}checkLockAndWarn(t){return!!this.isLocked&&(this._log.warning("Component is locked",t),!0)}isActive(){return this.element.classList.contains(this.activeClassName)}detachEmiitedEvents(){qo(this,Po).forEach(t=>{this.utils.bus.detachByCuid(t,this.cuid),this._log.debug("Detaching event: "+t+" on component delete")})}registerInDebug(){this._log.registerElement(this.element,this.cuid,this.componentName)}removeFromDebug(){this._log.unregisterElement(this.cuid,this.componentName)}setDebugProperty(t,e){}logInfo(t,e){this._log.debug(t,e)}logWarning(t,e){this._log.warning(t,e)}logError(t,e,i){this._log.error(t,e),i&&this._log.exception(i,e)}}{constructor(t,e,i,s,n){super(t,e,n),Io.set(this,void 0),Oo.set(this,void 0),this.args=s,this.actionsHelper=new ri(n.interactions),this.prevArgs=void 0,this.isInitialized=!1,Bo(this,Io,i),Bo(this,Oo,new Lo)}handle(t){return Fo(this,void 0,void 0,(function*(){return this.isInitialized?(this.logWarning("Trying to initialize handler again","handle"),!1):!!this.checkLock("handle")&&(this.isLocked=!0,this.registerInDebug(),this.args.parse(t),this.element.classList.contains(qo(this,Io))||this.helper.setClassesAs(this.element,qo(this,Io)),this.logInfo("Init","handle"),yield qo(this,Oo).init(t),this.performLifecycleOp("onHandle",this.onHandle(),()=>{this.isLocked=!1,this.isInitialized=!0}))}))}refresh(t){return Fo(this,void 0,void 0,(function*(){return this.logInfo("Update","refresh"),this.isInitialized?!!this.checkLock("refresh")&&(this.isLocked=!0,this.prevArgs=et(e=this.args)?Object.assign({},e):null,this.args.parse(t),this._log.debug("Component update","refresh"),yield qo(this,Oo).update(t),this.performLifecycleOp("onRefresh",this.onRefresh(),()=>{this.isLocked=!1})):(this.logError("Cannot update not initialized component","refresh"),!1);var e}))}destroy(){return Fo(this,void 0,void 0,(function*(){return this.logInfo("Destroy","destroy"),this.isInitialized?!!this.checkLock("destroy")&&(this.isLocked=!0,yield qo(this,Oo).destroy(),this.performLifecycleOp("onRemove",this.onRemove(),()=>{this.detachEmiitedEvents(),this.removeFromDebug(),this.isInitialized=!1,this.isLocked=!1})):(this.logError("Cannot update not initialized component","destroy"),!1)}))}performAction(t,e,i,s){return Fo(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}addModule(t){qo(this,Oo).add(t)}checkLock(t){return!this.isLocked||(this.logWarning("Handler is locked",t),!1)}performLifecycleOp(t,e,i){return Fo(this,void 0,void 0,(function*(){let s=!1;try{s=yield e}catch(e){this.logError("An exception occured in"+t,t,e)}finally{i()}return s}))}}Io=new WeakMap,Oo=new WeakMap;class Vo extends jo{constructor(t,e,i,s,n){super(t,e,i,s,n),No.set(this,void 0),Ho.set(this,void 0),_o.set(this,void 0),Do.set(this,void 0),Ro.set(this,void 0),Bo(this,No,null),Bo(this,Ho,null),Bo(this,_o,null),Bo(this,Ro,[]),Bo(this,Do,[])}onHandle(){return Fo(this,void 0,void 0,(function*(){return Bo(this,No,this.onEvent(C,this.openFromEvent.bind(this))),Bo(this,Ho,this.onEvent(W,this.closeFromEvent.bind(this))),Bo(this,Do,ki.get(this.args.openAct)),Bo(this,Ro,ki.get(this.args.closeAct)),this.onInit(),!0}))}onRefresh(){return Fo(this,void 0,void 0,(function*(){return this.prevArgs&&this.args.openAct===this.prevArgs.openAct||Bo(this,Do,ki.get(this.args.openAct)),this.prevArgs&&this.args.closeAct===this.prevArgs.closeAct||Bo(this,Ro,ki.get(this.args.closeAct)),this.onUpdate(),!0}))}onRemove(){return Fo(this,void 0,void 0,(function*(){return this.detachEvent(W,qo(this,Ho)),this.detachEvent(C,qo(this,No)),this.onDestroy(),!0}))}open(t){return Fo(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?(this.logWarning("Component is already opened"),!1):((this.args.escClose||et(this.args.keyClose))&&Bo(this,_o,this.onEvent(O,this.onKeyClose.bind(this))),!!this.onBeforeOpen()&&(this.isLocked=!0,this.performAction(qo(this,Do),this.args.timeout,this.onActionFinish.bind(this,this.onAfterOpen.bind(this),E,t),()=>{this.helper.setClass(this.activeClassName,this.element),mo.setAria(this.element,"aria-expanded","true")}))))}))}close(t){return Fo(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("close")&&(this.isActive()?(this.detachEvent(O,qo(this,_o)),!!this.onBeforeClose()&&(this.isLocked=!0,this.performAction(qo(this,Ro),this.args.timeout,this.onActionFinish.bind(this,this.onAfterClose.bind(this),A,t),()=>{this.helper.removeClass(this.activeClassName,this.element),mo.setAria(this.element,"aria-expanded","false")}))):(this.logWarning("Component is already closed"),!1))}))}performAction(t,e,i,s){return Fo(this,void 0,void 0,(function*(){return!!(yield this.actionsHelper.performActions(this.element,t,e,s))&&(i(),!0)}))}openFromEvent(t){this.open(t)}closeFromEvent(t){this.close(t)}onActionFinish(t,e,i){t(),this.emitEvent(e,{timestamp:Date.now(),state:i}),this.isLocked=!1}onKeyClose(t){return Fo(this,void 0,void 0,(function*(){(this.args.escClose&&"Escape"===t.event.key||et(this.args.keyClose)&&t.event.key===this.args.keyClose)&&(yield this.close("Closed by key"))}))}}No=new WeakMap,Ho=new WeakMap,_o=new WeakMap,Do=new WeakMap,Ro=new WeakMap;class Uo extends jo{constructor(t,e,i,s,n){super(t,e,i,s,n),$o.set(this,void 0),Bo(this,$o,new re(e)),qo(this,$o).onMutation(this.mutation.bind(this))}onHandle(){return Fo(this,void 0,void 0,(function*(){return this.onInit(),qo(this,$o).observe(),!0}))}onRefresh(){return Fo(this,void 0,void 0,(function*(){return qo(this,$o).unobserve(),this.onUpdate(),qo(this,$o).observe(),!0}))}onRemove(){return Fo(this,void 0,void 0,(function*(){return qo(this,$o).unobserve(),this.onDestroy(),!0}))}setMutationSelector(t){qo(this,$o).setSelector(t)}setMutationAttributes(t){qo(this,$o).setAttributes(t)}mutation(t){this._log.debug("Element mutation","mutation"),this.onMutation(this.prepareRecords(t))}prepareRecords(t){return t.reduce((t,e)=>"childList"===e.type?(e.addedNodes.length>0&&t.added.push(...e.addedNodes),e.removedNodes.length>0&&t.removed.push(...e.removedNodes),t):("attributes"===e.type&&t.changed.push(e.target),t),{added:[],removed:[],changed:[]})}}$o=new WeakMap;var Ko,Yo,Xo,Go,Zo,Jo=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qo=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};const th={string:t=>t.trim().toLowerCase(),boolean:vt,number:t=>{const e=t.includes(".")?parseFloat(t):parseInt(t);return isNaN(e)?void 0:e}};class eh{constructor(t){Ko.set(this,void 0),Yo.set(this,void 0),Xo.set(this,void 0),Go.set(this,void 0),Jo(this,Go,null!=t?t:{}),Jo(this,Ko,new ih(Qo(this,Go).props)),Jo(this,Yo,{}),Jo(this,Xo,0)}parse(t){if(this.fillDefaultValues(),t)if("string"==typeof t&&Qo(this,Go).main){const e=typeof this[Qo(this,Go).main];this[Qo(this,Go).main]=Qo(this,Ko).parseValue(Qo(this,Go).main,t,e)}else yt(this,(e,i)=>{const s=typeof i;if(!t[e])return void(this[e]=Qo(this,Yo)[e]);const n=Qo(this,Ko).parseValue(e,t[e],s);n&&(this[e]=n)})}fillDefaultValues(){0===Qo(this,Xo)&&(yt(this,(t,e)=>{Qo(this,Yo)[t]=e}),Jo(this,Xo,Object.keys(Qo(this,Yo)).length))}}Ko=new WeakMap,Yo=new WeakMap,Xo=new WeakMap,Go=new WeakMap;class ih{constructor(t){Zo.set(this,void 0),Jo(this,Zo,null!=t?t:{})}parseValue(t,e,i){var s,n,r;let o=Qo(this,Zo)[t],h=th[null!==(s=null==o?void 0:o.type)&&void 0!==s?s:i],a=null==h?void 0:h(e);return a?null!==(r=null===(n=null==o?void 0:o.corrector)||void 0===n?void 0:n.call(o,a))&&void 0!==r?r:a:null==o?void 0:o.default}}Zo=new WeakMap;var sh,nh=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},rh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},oh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class hh{constructor(t,e,i){sh.set(this,void 0),this.type="click",this.description="",rh(this,sh,i),this.element=t,this.onElementClick=this.onElementClick.bind(this),this.args=e}init(t){return nh(this,void 0,void 0,(function*(){return this.args=t,this.element.addEventListener("click",this.onElementClick),!0}))}update(t){return nh(this,void 0,void 0,(function*(){return this.args=t,!0}))}destroy(){return nh(this,void 0,void 0,(function*(){return this.element.removeEventListener("click",this.onElementClick),!0}))}onClick(t){rh(this,sh,t)}onElementClick(t){oh(this,sh)&&(oh(this,sh).call(this,t),this.args.prevent&&t.preventDefault(),this.args.stopPropagation&&t.stopPropagation())}}sh=new WeakMap;var ah,lh,uh,ch,dh=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ph=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},vh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class fh extends eh{constructor(t,e){super({props:{selector:{corrector:Ct},items:{corrector:Ct}}}),this.animation=!1,this.single=!1,this.selector=Ct(ft("> * > .{prefix}-accordion-title",t)),this.items=Ct(ft("> *",t)),this.timeout=null!=e?e:300,this.prevent=!1,this.stopPropagation=!1}}class gh{constructor(t){ah.set(this,void 0),ph(this,ah,null!=t?t:"cui"),this.attribute=vh(this,ah)+"-accordion"}getStyle(){return null}get(t,e){return new wh(t,e,this.attribute,vh(this,ah))}}ah=new WeakMap;class wh extends jo{constructor(t,e,i,s){super("CuiAccordionHandler",t,i,new fh(s,e.setup.animationTime),e),lh.set(this,void 0),uh.set(this,void 0),ch.set(this,void 0),ph(this,uh,null),ph(this,lh,[]),ph(this,uh,null),ph(this,ch,""),this.addModule(new hh(t,this.args,this.onElementClick.bind(this)))}onHandle(){return dh(this,void 0,void 0,(function*(){return ph(this,uh,this.onEvent(L,this.onSwitch.bind(this))),ph(this,ch,Et(this.args.selector)),!0}))}onRefresh(){return dh(this,void 0,void 0,(function*(){return ph(this,ch,Et(this.args.selector)),!0}))}onRemove(){return dh(this,void 0,void 0,(function*(){return this.detachEvent(L,vh(this,uh)),!0}))}switch(t){return dh(this,void 0,void 0,(function*(){if(this._log.debug("Switch to: "+t),t<0||this.isLocked||!this.isInitialized)return!1;if(ph(this,lh,this.queryItems()),vh(this,lh).length<=t)return!1;this.isLocked=!0;const e=vh(this,lh)[t];return this.openCloseTarget(t,e),this.emitEvent(S,{index:t,currentTarget:e,previousTarget:null,previous:-1}),this.isLocked=!1,!0}))}openCloseTarget(t,e){this.helper.hasClass(this.activeClassName,e)?this.helper.removeClassesAs(e,this.activeClassName):this.mutate(()=>{this.args.single&&this.closeAllExcept(t),this.helper.setClass(this.activeClassName,e)})}onSwitch(t){this.switch(ut(t,-1)).then(()=>{this._log.debug("Switch from event to "+t)})}closeAllExcept(t){vh(this,lh).forEach((e,i)=>{t!==i&&this.helper.hasClass(this.activeClassName,e)&&e.classList.remove(this.activeClassName)})}onElementClick(t){let e=t.target;e.matches(vh(this,ch))&&this.fetch(()=>{let t=[...this.element.querySelectorAll(this.args.selector)];if(!et(t))return;let i=t.findIndex(t=>t===e);i>=0&&this.switch(i)})}queryItems(){return[...this.element.querySelectorAll(this.args.items)]}}lh=new WeakMap,uh=new WeakMap,ch=new WeakMap;var mh,yh,kh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},bh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Mh{constructor(){this.prop={from:0,to:0}}setProperty(t){if(!t||!et(t.from)||!et(t.to))throw new a("[OpacityAnimator] Property has incorrect format");this.prop=t}perform(t,e,i){this.prop.to<0||t.style&&(t.style.opacity=Sh(this.prop,e))}}class Ch{constructor(t){if(!et(t))throw new a("[PropertyAnimator] Valid property is required");this.property=t,this.prop={from:0,to:0}}setProperty(t){if(!t||!et(t.from)||!et(t.to))throw new a("[PropertyAnimator] Property has incorrect format");this.prop=t}perform(t,e,i){this.property&&t.style&&(t.style[this.property]=Sh(this.prop,e))}}class Eh{constructor(){this.prop=void 0}setProperty(t){if(!t)throw new a("[TransformAnimator] Property has incorrect format");this.prop=t}build(t){let e=[];for(let i in this.prop){let s=this.prop[i];e.push(this.buildSingle(i,xh(s.from,s.to,t),s.unit))}return e.join(" ")}buildSingle(t,e,i){return`${t}(${Lh(e,i)})`}perform(t,e){this.prop&&t.style&&(t.style.transform=this.build(e))}}class Wh{constructor(t){mh.set(this,void 0),yh.set(this,void 0),kh(this,mh,{red:0,green:0,blue:0,alpha:0}),kh(this,yh,{red:0,green:0,blue:0,alpha:0}),this.id=t}perform(t,e,i){const s=xh(bh(this,mh).red,bh(this,yh).red,e),n=xh(bh(this,mh).blue,bh(this,yh).blue,e),r=xh(bh(this,mh).green,bh(this,yh).green,e),o=xh(bh(this,mh).alpha,bh(this,yh).alpha,e);t.style[this.id]=`rgba(${s},${r},${n},${o})`}setProperty(t){kh(this,mh,Th(t.from)),kh(this,yh,Th(t.to))}}mh=new WeakMap,yh=new WeakMap;class Ah{constructor(){this.property={}}perform(t,e,i){let s=[];yt(this.property,(t,i)=>{s.push(`${t}(${Sh(i,e)})`)}),t.style.filter=s.join(" ")}setProperty(t){this.property=t}}function Th(t){return{red:rt(t.red,0,255,0),green:rt(t.green,0,255,0),blue:rt(t.blue,0,255,0),alpha:rt(t.alpha,0,1,1)}}function xh(t,e,i){return t+(e-t)*i}function Lh(t,e){return t+(null!=e?e:"")}function Sh(t,e){return Lh(xh(t.from,t.to,e),t.unit)}new WeakMap,new WeakMap,new WeakMap;var Ph,Ih,Oh,Nh,Hh,_h,Dh,Rh,$h,Fh,Bh,qh,zh=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jh=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap,new WeakMap;class Vh{static get(t){if(et(t)){if(t.includes("color"))return new Wh(t);switch(t){case"opacity":return new Mh;case"transform":return new Eh;case"filter":return new Ah;default:return new Ch(t)}}}}class Uh{constructor(t){Ph.set(this,void 0),Ih.set(this,void 0),Oh.set(this,void 0),Nh.set(this,void 0),Hh.set(this,void 0),_h.set(this,void 0),Dh.set(this,void 0),Rh.set(this,void 0),zh(this,Ih,[]),zh(this,Hh,void 0),zh(this,Nh,void 0),zh(this,_h,null!=t&&t),zh(this,Oh,!1),zh(this,Ph,void 0),zh(this,Dh,!1),zh(this,Rh,void 0)}onFinish(t){zh(this,Ph,t)}setAnimators(t){zh(this,Ih,t)}setProps(t){if(et(t)){zh(this,Ih,[]);try{for(let e in t){let i=Vh.get(e);if(!i)return;i.setProperty(t[e]),jh(this,Ih).push(i)}}catch(t){this.reportError(t)}}}setElement(t){zh(this,Hh,t)}setOnError(t){zh(this,Rh,t)}animate(t,e,i){if(jh(this,Oh))return;if(!jh(this,Hh)||0===jh(this,Ih).length)return void this.reportError(new Error("Animation cannot be performed: element or animators are not set"));let s=null!=e?e:0,n=i||!1;zh(this,Oh,!0),requestAnimationFrame(this.animateAsync.bind(this,t,s,n))}isLocked(){return jh(this,Oh)}animateAsync(t,e,i,s){jh(this,Nh)||zh(this,Nh,s);let n=s-jh(this,Nh),r=n/t,o=0;o=0===e?r:i?e-r*e:e+r*e,this.callUpdate(i?Math.max(o,0):Math.min(o,1),1),n<t&&!jh(this,Dh)?requestAnimationFrame(this.animateAsync.bind(this,t,e,i)):this.endAnimation(i)}endAnimation(t){jh(this,_h)&&jh(this,Hh)&&jh(this,Hh).removeAttribute("style"),jh(this,Ph)&&jh(this,Ph).call(this,jh(this,Hh),t,jh(this,Dh)),zh(this,Dh,!1),zh(this,Nh,void 0),zh(this,Oh,!1)}callUpdate(t,e){try{jh(this,Ih).forEach(i=>i.perform(jh(this,Hh),t,e))}catch(t){this.reportError(t),zh(this,Dh,!0)}}reportError(t){jh(this,Rh)?jh(this,Rh).call(this,t):(console.error("An error occured in CuiAnimtionEngine"),console.error(t))}}Ph=new WeakMap,Ih=new WeakMap,Oh=new WeakMap,Nh=new WeakMap,Hh=new WeakMap,_h=new WeakMap,Dh=new WeakMap,Rh=new WeakMap;class Kh{constructor(t){$h.set(this,void 0),Fh.set(this,void 0),Bh.set(this,void 0),qh.set(this,void 0),zh(this,$h,void 0),zh(this,Fh,[]),zh(this,Bh,new Uh(t)),zh(this,qh,void 0)}setElement(t){zh(this,$h,t)}setOnFinish(t){jh(this,Bh).onFinish(t)}setOnError(t){zh(this,qh,t),jh(this,Bh).setOnError(t)}setProps(t){if(et(t)){zh(this,Fh,[]);try{for(let e in t){let i=Vh.get(e);if(!i)return;i.setProperty(t[e]),jh(this,Fh).push(i)}}catch(t){this.reportError(t)}}}update(t){jh(this,$h)&&0!==jh(this,Fh).length&&jh(this,Fh).forEach(e=>e.perform(jh(this,$h),Math.min(t,1),1))}updateAsync(t){requestAnimationFrame(this.update.bind(this,t))}finish(t,e,i){jh(this,$h)&&jh(this,Bh).setElement(jh(this,$h)),jh(this,Bh).setAnimators(jh(this,Fh)),jh(this,Bh).animate(e,t,i)}reportError(t){jh(this,qh)?jh(this,qh).call(this,t):console.log(t)}}$h=new WeakMap,Fh=new WeakMap,Bh=new WeakMap,qh=new WeakMap;var Yh,Xh,Gh,Zh,Jh,Qh,ta,ea=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ia=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class sa extends eh{constructor(t,e){super(),this.escClose=!1,this.keyClose="",this.timeout=null!=e?e:300,this.swipe=!1,this.openAct=ft(".{prefix}-animation-fade-in",t),this.closeAct=ft(".{prefix}-animation-fade-out",t)}}class na{constructor(t){Yh.set(this,void 0),ea(this,Yh,null!=t?t:"cui"),this.attribute=ia(this,Yh)+"-banner"}getStyle(){return null}get(t,e){return new ra(t,e,this.attribute,ia(this,Yh))}}Yh=new WeakMap;class ra extends Vo{constructor(t,e,i,s){super("CuiBannerHandler",t,i,new sa(s,e.setup.animationTime),e),Xh.set(this,void 0),Gh.set(this,void 0),Zh.set(this,void 0),Jh.set(this,void 0),Qh.set(this,void 0),ta.set(this,void 0),ea(this,Xh,new Kh(!0)),ia(this,Xh).setOnFinish(this.onSwipeFinish.bind(this)),ia(this,Xh).setElement(this.element),ea(this,Zh,-1),ea(this,Jh,0),ea(this,Qh,is.fade),ea(this,ta,null),ea(this,Gh,!1)}onInit(){}onUpdate(){}onDestroy(){this.detachEvent(R,ia(this,ta))}onBeforeOpen(){return!0}onAfterOpen(){this.args.swipe&&ea(this,ta,this.onEvent(R,this.onMove.bind(this)))}onAfterClose(){this.detachEvent(R,ia(this,ta))}onBeforeClose(){return!0}onMove(t){if(this.isLocked)return;let e=this.element;switch(t.type){case"down":if(ia(this,Gh)||!e.contains(t.target))return;ea(this,Gh,!0),ea(this,Zh,t.x),this.helper.setClassesAs(document.body,v),t.event.preventDefault();break;case"up":if(!ia(this,Gh)&&0==ia(this,Jh))break;let i=Math.abs(ia(this,Jh)),s=i*this.args.timeout,n=i<=.4;this.isLocked=!0,ia(this,Xh).finish(i,s,n),this.helper.removeClassesAs(document.body,v),ea(this,Gh,!1);break;case"move":if(ia(this,Gh)){let i=(t.x-ia(this,Zh))/e.offsetWidth;(ia(this,Jh)>=0&&i<=0||ia(this,Jh)<=0&&i>0)&&ia(this,Xh).setProps(i>0?ia(this,Qh).current.right:ia(this,Qh).current.left),ea(this,Jh,i),this.mutate(()=>{ia(this,Xh).update(Math.abs(ia(this,Jh)))}),t.event.preventDefault()}}}onSwipeFinish(t,e,i){this.isLocked=!1,e||(this.helper.removeClass(this.activeClassName,this.element),mo.setAria(this.element,"aria-expanded","false")),ea(this,Jh,0),ea(this,Zh,0)}}Xh=new WeakMap,Gh=new WeakMap,Zh=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,ta=new WeakMap;var oa,ha,aa,la,ua,ca=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},da=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pa=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class va extends eh{constructor(){super(),this.progress=0}}class fa{constructor(t){this.attribute=(null!=t?t:"cui")+"-circle-progress",f.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new ga(t,e,this.attribute)}}class ga extends jo{constructor(t,e,i){super("CuiCircleHandler",t,i,new va,e),oa.set(this,void 0),ha.set(this,void 0),aa.set(this,void 0),la.set(this,void 0),ua.set(this,void 0),da(this,oa,da(this,ha,0)),da(this,aa,null),da(this,la,i),da(this,ua,null)}onHandle(){return ca(this,void 0,void 0,(function*(){const t=new wr(f.special_circle_progress).build();if(!et(t))return this.logError("SVG circle was not created","onInit"),!1;const e=this.element.querySelector("svg");return et(e)&&e.remove(),this.element.appendChild(t),da(this,aa,this.element.querySelector(".circle-progress-path")),da(this,ha,pa(this,aa).getTotalLength()),da(this,oa,pa(this,ha)/100),this.fetch(this.readStyle),da(this,ua,this.onEvent(_,this.onSetProgress.bind(this))),!0}))}onRefresh(){return ca(this,void 0,void 0,(function*(){return this.fetch(this.readStyle),this.emitEvent(D,{timestamp:Date.now(),progress:this.args.progress}),!0}))}onRemove(){return ca(this,void 0,void 0,(function*(){return this.detachEvent(_,pa(this,ua)),!0}))}onSetProgress(t){et(t)&&this.element.setAttribute(pa(this,la),t)}updateStyle(t){pa(this,aa).style.strokeDashoffset=t}readStyle(){if(this.prevArgs&&this.args.progress===this.prevArgs.progress)return;const t=nt(this.args.progress,0,100);this.mutate(this.updateStyle,pa(this,ha)-pa(this,oa)*t)}}oa=new WeakMap,ha=new WeakMap,aa=new WeakMap,la=new WeakMap,ua=new WeakMap;var wa,ma,ya=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ka=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ba=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ma extends eh{constructor(t){super({main:"target"}),this.target="",this.action="",this.prevent=!1,this.stopPropagation=!1,this.state="",this.timeout=null!=t?t:300}}class Ca{constructor(t){wa.set(this,void 0),ka(this,wa,null!=t?t:"cui"),this.attribute=ba(this,wa)+"-close"}getStyle(){return null}get(t,e){return new Ea(t,e,this.attribute,ba(this,wa))}}wa=new WeakMap;class Ea extends jo{constructor(t,e,i,s){super("CuiCloseHandler",t,i,new Ma(e.setup.animationTime),e),ma.set(this,void 0),ka(this,ma,null),this.addModule(new hh(this.element,this.args,this.onClose.bind(this)))}onHandle(){return ya(this,void 0,void 0,(function*(){return ka(this,ma,this.onEvent(W,this.onClose.bind(this))),!0}))}onRefresh(){return ya(this,void 0,void 0,(function*(){return!0}))}onRemove(){return ya(this,void 0,void 0,(function*(){return this.detachEvent(W,ba(this,ma)),!0}))}onClose(t){if(this.isLocked)return;const e=this.getTarget();et(e)?(this.isLocked=!0,this.run(e).then(e=>{e&&this.emitClose(t)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return ya(this,void 0,void 0,(function*(){let e=t.$cuid;if(et(e))return yield this.utils.bus.emit(W,e,this.args.state),!1;if(ht(this.args.action,this.args.timeout)){let e=ki.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.helper.removeClass(this.activeClassName,t)})}return this.helper.removeClassesAs(t,this.activeClassName),!0}))}getTarget(){var t;return et(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:wt(this.element)}emitClose(t){this.emitEvent(A,{state:this.args.state,event:t})}}ma=new WeakMap;var Wa,Aa,Ta,xa=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},La=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Sa extends eh{constructor(t,e){super(),this.escClose=!1,this.timeout=null!=e?e:300,this.openAct=ft(".{prefix}-dialog-default-in",t),this.closeAct=ft(".{prefix}-dialog-default-out",t),this.keyClose=""}}class Pa{constructor(t){Wa.set(this,void 0),xa(this,Wa,null!=t?t:"cui"),this.attribute=La(this,Wa)+"-cover"}getStyle(){return null}get(t,e){return new Ia(t,e,this.attribute,La(this,Wa))}}Wa=new WeakMap;class Ia extends Vo{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new Sa(s,e.setup.animationTimeLong),e),Aa.set(this,void 0),Ta.set(this,void 0),xa(this,Aa,ft("{prefix}-cover-open",s)),xa(this,Ta,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){mo.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(xa(this,Ta,window.pageYOffset),!0)}onAfterOpen(){this.helper.setClass(La(this,Aa),document.body),document.body.style.top=`-${La(this,Ta)}px`,mo.setAria(this.element,"aria-hidden","false")}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*(La(this,Ta)||0)),xa(this,Ta,0),this.helper.removeClass(La(this,Aa),document.body),mo.setAria(this.element,"aria-hidden","true")}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass(La(this,Aa),document.body)}}Aa=new WeakMap,Ta=new WeakMap;var Oa,Na,Ha,_a,Da,Ra=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$a=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Fa extends eh{constructor(t,e){super(),this.escClose=!1,this.outClose=!1,this.timeout=null!=e?e:300,this.openAct=ft(".{prefix}-dialog-default-in",t),this.closeAct=ft(".{prefix}-dialog-default-out",t),this.keyClose=""}}class Ba{constructor(t){Oa.set(this,void 0),Ra(this,Oa,null!=t?t:"cui"),this.attribute=$a(this,Oa)+"-dialog"}getStyle(){return null}get(t,e){return new qa(t,e,this.attribute,$a(this,Oa))}}Oa=new WeakMap;class qa extends Vo{constructor(t,e,i,s){super("CuiDialogHandler",t,i,new Fa(s,e.setup.animationTimeLong),e),Na.set(this,void 0),Ha.set(this,void 0),_a.set(this,void 0),Da.set(this,void 0),Ra(this,Ha,ft("{prefix}-dialog-open",s)),Ra(this,Na,s),Ra(this,_a,0),Ra(this,Da,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){mo.setAria(this.element,"aria-modal","")}onUpdate(){}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Ra(this,_a,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&Ra(this,Da,this.onEvent(N,this.onWindowClick.bind(this))),this.helper.setClass($a(this,Ha),document.body),document.body.style.top=`-${$a(this,_a)}px`}onAfterClose(){document.body.style.top="",window.scrollTo(0,-1*($a(this,_a)||0)),Ra(this,_a,0),this.helper.removeClass($a(this,Ha),document.body),this.detachEvent(N,$a(this,Da))}onBeforeClose(){return!0}isAnyActive(){return this.helper.hasClass($a(this,Ha),document.body)}onWindowClick(t){let e=this.element.querySelector(ft(".{prefix}-dialog-container",$a(this,Na)));e&&!e.contains(t.ev.target)&&this.close("out").then(()=>{this._log.debug("Closed by click outside")})}}Na=new WeakMap,Ha=new WeakMap,_a=new WeakMap,Da=new WeakMap;var za,ja,Va,Ua,Ka,Ya,Xa,Ga,Za=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ja=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Qa{constructor(t){za.set(this,void 0),ja.set(this,void 0),Va.set(this,void 0),Ua.set(this,void 0),Ka.set(this,void 0),Ya.set(this,void 0),Xa.set(this,void 0),Ga.set(this,void 0),Za(this,za,t),Za(this,Va,!1),Za(this,Ua,!1),Za(this,Ka,!1),Za(this,ja,void 0),Za(this,Xa,this.onMouseMove.bind(this)),Za(this,Ga,this.onMouseOut.bind(this)),Za(this,Ya,this.onMouseOver.bind(this))}setCallback(t){Za(this,ja,t)}isInProgress(){return Ja(this,Va)}attach(){Ja(this,za).addEventListener("mouseover",Ja(this,Ya)),Ja(this,za).addEventListener("mousemove",Ja(this,Xa)),Ja(this,za).addEventListener("mouseout",Ja(this,Ga)),Za(this,Ka,!0)}detach(){Ja(this,za).removeEventListener("mouseover",Ja(this,Ya)),Ja(this,za).removeEventListener("mousemove",Ja(this,Xa)),Ja(this,za).removeEventListener("mouseout",Ja(this,Ga)),Za(this,Ka,!1)}emit(t,e){ht(Ja(this,ja))&&(!e&&Ja(this,Va)||(Za(this,Va,!0),window.requestAnimationFrame(this.invoke.bind(this,{isHovering:Ja(this,Ua),event:t,timestamp:Date.now()}))))}isAttached(){return Ja(this,Ka)}invoke(t){Ja(this,ja)&&Ja(this,ja).call(this,t),Za(this,Va,!1)}onMouseOver(t){Za(this,Ua,!0),this.emit(t,!0)}onMouseOut(t){Za(this,Ua,!1),this.emit(t,!0)}onMouseMove(t){this.emit(t,!1)}}za=new WeakMap,ja=new WeakMap,Va=new WeakMap,Ua=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,Ga=new WeakMap;var tl,el,il,sl,nl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},rl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ol{constructor(){tl.set(this,void 0),el.set(this,void 0),il.set(this,void 0),sl.set(this,void 0),nl(this,il,-1),nl(this,el,-1),nl(this,tl,void 0),nl(this,sl,0)}setElementBox(t){nl(this,tl,t)}setTarget(t){nl(this,el,t.width),nl(this,il,t.height)}setMargin(t){nl(this,sl,t)}getVerticalPosition(t){switch(t){case"top":return this.getTopPosition();case"bottom":return this.getBottomPosition();case"middle":return this.getMiddlePosition();default:return-1}}getHorizontalPosition(t){switch(t){case"left":return this.getLeftPosition();case"right":return this.getRightPosition();case"center":return this.getCenterPosition();default:return-1}}getAutoVerticalPosition(t){let e=window.innerHeight,i=this.getVerticalPosition(t);return("top"===t||"middle"===t)&&i<0?[this.getVerticalPosition("bottom"),"bottom"]:("bottom"===t||"middle"===t)&&i+rl(this,il)>e?[this.getVerticalPosition("top"),"top"]:[i,t]}getAutoHorizontalPosition(t){let e=window.innerWidth,i=this.getHorizontalPosition(t);return("right"===t||"center"===t)&&i<0?[this.getHorizontalPosition("left"),"left"]:("left"===t||"center"===t)&&i+rl(this,el)>e?[this.getHorizontalPosition("right"),"right"]:[i,t]}getTopPosition(){return this.throwIfNotValid("getTopPosition"),rl(this,tl).top-rl(this,sl)-rl(this,il)}getBottomPosition(){return this.throwIfNotValid("getBottomPosition"),rl(this,tl).top+rl(this,tl).height+rl(this,sl)}getMiddlePosition(){return this.throwIfNotValid("getMiddlePosition"),rl(this,tl).top+rl(this,tl).height/2-rl(this,il)/2}getLeftPosition(){return this.throwIfNotValid("getLeftPosition"),rl(this,tl).left}getRightPosition(){return this.throwIfNotValid("getRightPosition"),rl(this,tl).left+rl(this,tl).width-rl(this,el)}getCenterPosition(){return this.throwIfNotValid("getCenterPosition"),rl(this,tl).left+rl(this,tl).width/2-rl(this,el)/2}validate(){return et(rl(this,tl))&&rl(this,il)>0&&rl(this,el)>0}throwIfNotValid(t){if(!this.validate())throw new u(`[${t}] Position cannot be calculated: missing data [width: ${rl(this,el)}][height: ${rl(this,il)}]`)}}tl=new WeakMap,el=new WeakMap,il=new WeakMap,sl=new WeakMap;var hl,al,ll,ul,cl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class pl{constructor(t){hl.set(this,void 0),al.set(this,void 0),ll.set(this,void 0),ul.set(this,void 0),cl(this,al,"top-center"),cl(this,hl,""),cl(this,ll,null!=t?t:new ol),cl(this,ul,Nt.get("CuiBasePositionCalculator"))}setMargin(t){dl(this,ll).setMargin(t)}setPreferred(t){cl(this,al,t)}setStatic(t){cl(this,hl,t)}calculate(t,e){if(dl(this,ll).setElementBox(t),dl(this,ll).setTarget(e),et(dl(this,hl))){dl(this,ul).debug("Evaluating static position");const[t,e]=this.parse(dl(this,hl));return[dl(this,ll).getHorizontalPosition(e),dl(this,ll).getVerticalPosition(t),dl(this,hl)]}let[i,s]=["",""];et(dl(this,al))&&(dl(this,ul).debug("Evaluating auto position"),[i,s]=this.parse(dl(this,al))),i=null!=i?i:"top",s=null!=s?s:"center",dl(this,ul).debug("Calculating position: "+i+"-"+s);const[n,r]=dl(this,ll).getAutoVerticalPosition(i),[o,h]=dl(this,ll).getAutoHorizontalPosition(s);return dl(this,ul).debug("Calculated position: "+r+"-"+h),[o,n,r+"-"+h]}parse(t){return t.split("-")}}hl=new WeakMap,al=new WeakMap,ll=new WeakMap,ul=new WeakMap;var vl,fl,gl,wl,ml=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},yl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class kl{constructor(t,e,i){vl.set(this,void 0),fl.set(this,void 0),gl.set(this,void 0),wl.set(this,void 0),ml(this,fl,e),ml(this,gl,t),ml(this,wl,i)}start(){this.canRun()&&(this.stop(),ml(this,vl,setTimeout(()=>{yl(this,wl).call(this),ml(this,vl,null),yl(this,fl)&&this.start()},yl(this,gl))))}stop(){yl(this,vl)&&(clearTimeout(yl(this,vl)),ml(this,vl,null))}getId(){return yl(this,vl)}canRun(){return et(yl(this,wl))&&yl(this,gl)>0}setCallback(t){ml(this,wl,t)}setTimeout(t){ml(this,gl,t)}}vl=new WeakMap,fl=new WeakMap,gl=new WeakMap,wl=new WeakMap;var bl,Ml,Cl=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},El=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Wl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Al{constructor(t,e){bl.set(this,void 0),Ml.set(this,void 0),this.type="hover",this.description="",El(this,Ml,e),El(this,bl,new Qa(t)),Wl(this,bl).setCallback(this.onHover.bind(this))}init(t){return Cl(this,void 0,void 0,(function*(){return Wl(this,bl).attach(),!0}))}destroy(){return Cl(this,void 0,void 0,(function*(){return Wl(this,bl).detach(),!0}))}onHover(t){Wl(this,Ml).call(this,t)}}bl=new WeakMap,Ml=new WeakMap;var Tl,xl,Ll,Sl,Pl,Il,Ol,Nl,Hl,_l,Dl,Rl,$l,Fl=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Bl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ql=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class zl extends eh{constructor(t){super({props:{trigger:{corrector:Ct}}}),this.mode="click",this.trigger=Ct("> a, button"),this.autoClose=!1,this.outClose=!0,this.prevent=!1,this.pos="",this.action=ft("{prefix}-drop-animation-in",t),this.timeout=3e3,this.margin=8}}class jl{constructor(t){Tl.set(this,void 0),Bl(this,Tl,null!=t?t:"cui"),this.attribute=ql(this,Tl)+"-drop"}getStyle(){return null}get(t,e){return new Vl(t,e,this.attribute,ql(this,Tl))}}Tl=new WeakMap;class Vl extends jo{constructor(t,e,i,s){super("CuidropHandler",t,i,new zl(s),e),xl.set(this,void 0),Ll.set(this,void 0),Sl.set(this,void 0),Pl.set(this,void 0),Il.set(this,void 0),Ol.set(this,void 0),Nl.set(this,void 0),Hl.set(this,void 0),_l.set(this,void 0),Dl.set(this,void 0),Rl.set(this,void 0),$l.set(this,void 0),Bl(this,Sl,i),Bl(this,xl,s),Bl(this,Ll,ft("{prefix}-drop-open",s)),Bl(this,Ol,null),Bl(this,Nl,null),Bl(this,Hl,null),this.onTriggerClick=this.onTriggerClick.bind(this),Bl(this,_l,new pl),ql(this,_l).setMargin(8),ql(this,_l).setPreferred("bottom-left"),Bl(this,Dl,""),Bl(this,Pl,void 0),Bl(this,Il,this.element),Bl(this,$l,[]),Bl(this,Rl,new kl(this.args.timeout,!1,this.close.bind(this))),e.isPlugin("click-plugin")||this.logWarning("Window click plugin is not available: outClose will not work"),this.addModule(new Al(this.element,this.onElementHover.bind(this)))}onHandle(){return Fl(this,void 0,void 0,(function*(){return Bl(this,Il,this.acquireTrigger()),Bl(this,Pl,new Qa(ql(this,Il))),ql(this,Pl).setCallback(this.onHoverEvent.bind(this)),ql(this,Pl).attach(),ql(this,Il).addEventListener("click",this.onTriggerClick),Bl(this,Nl,this.onEvent(C,this.open.bind(this))),Bl(this,Hl,this.onEvent(W,this.close.bind(this))),this.setDataFromArgs(),this.mutate(()=>{mo.setAria(this.element,"aria-dropdown","")}),!0}))}onRefresh(){return Fl(this,void 0,void 0,(function*(){return this.prevArgs&&this.args.trigger!==this.prevArgs.trigger&&(ql(this,Pl)&&ql(this,Pl).isAttached()?ql(this,Pl).detach():this.prevArgs&&"click"===this.prevArgs.mode&&ql(this,Il).removeEventListener("click",this.onTriggerClick),Bl(this,Il,this.acquireTrigger()),Bl(this,Pl,new Qa(ql(this,Il))),ql(this,Pl).setCallback(this.onHoverEvent.bind(this)),ql(this,Pl).attach(),ql(this,Il).addEventListener("click",this.onTriggerClick)),this.setDataFromArgs(),!0}))}onRemove(){return Fl(this,void 0,void 0,(function*(){return this.detachEvent(C,ql(this,Nl)),this.detachEvent(W,ql(this,Hl)),!0}))}setDataFromArgs(){ql(this,_l).setStatic(this.args.pos),ql(this,_l).setMargin(this.args.margin),ql(this,Rl).setTimeout(this.args.timeout),Bl(this,$l,ki.get(this.args.action))}open(){return Fl(this,void 0,void 0,(function*(){return!this.checkLockAndWarn("open")&&(this.isActive()?this.close():(this.isAnyActive()&&(yield this.findAndCloseOpenedDrop()),this._log.debug("Drop "+this.cuid,"open"),this.onOpen(),!0))}))}close(){return Fl(this,void 0,void 0,(function*(){return!(this.checkLockAndWarn("close")||!this.isActive())&&(this.logInfo("Drop "+this.cuid,"close"),this.onClose(),this.emitEvent(A,{timestamp:Date.now()}),!0)}))}onOpen(){this.isLocked=!0,this.helper.setClass(this.activeClassName,this.element),this.mutate(()=>{const t=ql(this,Il).getBoundingClientRect();try{const[e,i,s]=ql(this,_l).calculate(t,this.element.getBoundingClientRect());this.element.style.top=i-t.top+"px",this.element.style.left=e-t.left+"px",Bl(this,Dl,ft("{prefix}-drop-position-"+s,ql(this,xl))),this.toggleActions(),this.helper.setClass(ql(this,Dl),this.element),this.helper.setClass(ql(this,Ll),document.body),this.emitEvent(E,{timestamp:Date.now()}),this.runAutoCloseTask(),mo.setAria(this.element,"aria-expanded","true"),Bl(this,Ol,this.onEvent(N,this.onWindowClick.bind(this)))}catch(t){this._log.exception(t)}finally{this.isLocked=!1}})}onClose(){this.isLocked=!0,this.mutate(()=>{this.helper.removeClass(this.activeClassName,this.element),this.helper.removeClass(ql(this,Ll),document.body),this.toggleActions(),this.helper.removeClass(ql(this,Dl),this.element),mo.setAria(this.element,"aria-expanded","false"),this.detachEvent(N,ql(this,Ol)),this.isLocked=!1})}onWindowClick(t){this.args.outClose&&(this.element.contains(t.ev.target)||this.close())}isAnyActive(){return this.helper.hasClass(ql(this,Ll),document.body)}findAndCloseOpenedDrop(){return Fl(this,void 0,void 0,(function*(){const t=document.querySelector(`[${ql(this,Sl)}].${this.activeClassName}`);if(!et(t))return this._log.warning("Opened drop was not found"),!1;const e=t.$handlers[ql(this,Sl)];return et(e)?e.close():(this._log.warning("Drop handler was not found in the element"),!1)}))}onTriggerClick(t){"click"===this.args.mode&&(this.isActive()?this.close():this.open())}onHoverEvent(t){"hover"===this.args.mode&&t.isHovering&&!this.isActive()&&this.open()}onElementHover(t){t.isHovering?ql(this,Rl).stop():!t.isHovering&&this.args.autoClose&&this.runAutoCloseTask()}runAutoCloseTask(){this.args.autoClose&&ql(this,Rl).start()}toggleActions(){ql(this,$l).forEach(t=>{t.toggle(this.element)})}acquireTrigger(){let t=null;return t=this.element.parentElement?this.element.parentElement.querySelector(this.args.trigger):document.querySelector(this.args.trigger),null!=t?t:this.element}}xl=new WeakMap,Ll=new WeakMap,Sl=new WeakMap,Pl=new WeakMap,Il=new WeakMap,Ol=new WeakMap,Nl=new WeakMap,Hl=new WeakMap,_l=new WeakMap,Dl=new WeakMap,Rl=new WeakMap,$l=new WeakMap;var Ul,Kl=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Yl=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xl{calculate(t,e,i,s){return[t,e]}}new WeakMap;class Gl{constructor(t){Ul.set(this,void 0),Kl(this,Ul,t)}calculate(t,e,i,s){return[t-Yl(this,Ul).offsetLeft,e-Yl(this,Ul).offsetTop]}}Ul=new WeakMap;new WeakMap;var Zl,Jl,Ql,tu,eu,iu,su,nu,ru,ou,hu,au=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},lu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class uu extends eh{constructor(t,e){super(),this.escClose=!1,this.keyClose="",this.openAct=ft(".{prefix}-float-default-in",t),this.closeAct=ft(".{prefix}-float-default-out",t),this.timeout=null!=e?e:300}}class cu{constructor(t){Zl.set(this,void 0),au(this,Zl,null!=t?t:"cui"),this.attribute=lu(this,Zl)+"-float"}getStyle(){return null}get(t,e){return new du(t,e,this.attribute,lu(this,Zl))}}Zl=new WeakMap;class du extends Vo{constructor(t,e,i,s){super("CuiFloatHandler",t,i,new uu(s,e.setup.animationTime),e),Jl.set(this,void 0),Ql.set(this,void 0),tu.set(this,void 0),eu.set(this,void 0),iu.set(this,void 0),su.set(this,void 0),nu.set(this,void 0),ru.set(this,void 0),ou.set(this,void 0),hu.set(this,void 0),au(this,Jl,!1),au(this,Ql,!1),au(this,tu,0),au(this,eu,0),au(this,su,new Gn),lu(this,su).preventDefault(!1),au(this,nu,new Xl),au(this,ru,new Gl(t)),au(this,iu,s),this.move=this.move.bind(this),this.resize=this.resize.bind(this),au(this,hu,null),au(this,ou,null),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){mo.setAria(this.element,"aria-modal",""),au(this,hu,this.element.querySelector(ft(".{prefix}-float-move",lu(this,iu)))),au(this,ou,this.element.querySelector(ft(".{prefix}-float-resize",lu(this,iu)))),lu(this,su).setCallback(this.onMove.bind(this))}onUpdate(){}onDestroy(){}onBeforeOpen(){return!0}onAfterOpen(){lu(this,su).attach()}onAfterClose(){lu(this,su).detach()}onBeforeClose(){return!0}onMove(t){switch(t.type){case"down":this.onMouseDown(t);break;case"up":this.onMouseUp(t);break;case"move":this.onMouseMove(t)}}onMouseDown(t){t.target===lu(this,hu)?(au(this,Jl,!0),t.event.preventDefault()):t.target===lu(this,ou)&&(au(this,Ql,!0),t.event.preventDefault()),au(this,tu,t.x),au(this,eu,t.y),this.helper.setClassesAs(document.body,v),this.utils.bus.emit($,null,!0)}onMouseMove(t){lu(this,Jl)?this.peform(t,this.move):lu(this,Ql)&&this.peform(t,this.resize)}onMouseUp(t){au(this,Jl,!1),au(this,Ql,!1),this.helper.removeClassesAs(document.body,v),this.utils.bus.emit($,null,!1)}peform(t,e){this.mutate(()=>{et(e)&&e(this.element,t.x,t.y,t.x-lu(this,tu),t.y-lu(this,eu)),au(this,tu,t.x),au(this,eu,t.y)}),t.event.preventDefault()}resize(t,e,i,s,n){let[r,o]=lu(this,ru).calculate(e,i,s,n);this.fitsWindow(t.offsetTop,t.offsetLeft,r,o)&&this.mutate(()=>{t.style.width=r+"px",t.style.height=o+"px"})}move(t,e,i,s,n){let[r,o]=lu(this,nu).calculate(e,i,s,n);this.fitsWindow(o,r,t.offsetWidth,t.offsetHeight)&&this.mutate(()=>{t.style.left=r+"px",t.style.top=o+"px"})}fitsWindow(t,e,i,s){return t+s<window.innerHeight-10&&t>10&&e>10&&e+i<window.innerWidth-10}}Jl=new WeakMap,Ql=new WeakMap,tu=new WeakMap,eu=new WeakMap,iu=new WeakMap,su=new WeakMap,nu=new WeakMap,ru=new WeakMap,ou=new WeakMap,hu=new WeakMap;var pu=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class vu extends eh{constructor(){super({main:"icon"}),this.icon="",this.scale=1}}class fu{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new gu(t,e,this.attribute)}}class gu extends jo{constructor(t,e,i){super("CuiIconHandler",t,i,new vu,e)}onHandle(){return pu(this,void 0,void 0,(function*(){return this.addIcon(this.args.icon),!0}))}onRefresh(){return pu(this,void 0,void 0,(function*(){return!(!this.prevArgs||this.args.icon===this.prevArgs.icon)&&(this.addIcon(this.args.icon),!0)}))}onRemove(){return pu(this,void 0,void 0,(function*(){const t=this.element.querySelector("svg");return et(t)&&t.remove(),!0}))}addIcon(t){const e=t?f[t]:null;if(!e)return;const i=new wr(e).setScale(this.args.scale).build(),s=this.element.querySelector("svg");et(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}insertBefore(t){this.element.insertBefore(t,this.element.firstChild)}appendChild(t){this.element.appendChild(t)}}var wu,mu,yu,ku,bu,Mu,Cu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Eu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Wu extends eh{constructor(t,e){super(),wu.set(this,void 0),Cu(this,wu,t),this.escClose=!1,this.position="right",this.openAct=this.getDefaultOpenClass(),this.closeAct=this.getDefaultCloseClass(),this.timeout=null!=e?e:300,this.outClose=!1,this.keyClose=""}getDefaultOpenClass(){return ft("right"===this.position?".{prefix}-offcanvas-default-right-in":".{prefix}-offcanvas-default-left-in",Eu(this,wu))}getDefaultCloseClass(){return ft("right"===this.position?".{prefix}-offcanvas-default-right-out":".{prefix}-offcanvas-default-left-out",Eu(this,wu))}}wu=new WeakMap;class Au{constructor(t){mu.set(this,void 0),Cu(this,mu,null!=t?t:"cui"),this.attribute=Eu(this,mu)+"-off-canvas"}getStyle(){return null}get(t,e){return new Tu(t,e,this.attribute,Eu(this,mu))}}mu=new WeakMap;class Tu extends Vo{constructor(t,e,i,s){super("CuiOffCanvasHandler",t,i,new Wu(s,e.setup.animationTime),e),yu.set(this,void 0),ku.set(this,void 0),bu.set(this,void 0),Mu.set(this,void 0),Cu(this,yu,s),Cu(this,ku,ft("{prefix}-off-canvas-open",s)),Cu(this,Mu,null),Cu(this,bu,0),e.isPlugin("click-plugin")||this.logWarning("WindowClick plugin is not available, outClose will not work"),e.isPlugin("keys-plugin")||this.logWarning("KeyObserver plugin is not available, escClose and keyClose will not work")}onInit(){this.mutate(()=>{this.setPositionLeft(),mo.setAria(this.element,"aria-modal","")})}onUpdate(){this.setPositionLeft()}onDestroy(){}onBeforeOpen(){return!this.isAnyActive()&&(Cu(this,bu,window.pageYOffset),!0)}onAfterOpen(){this.args.outClose&&Cu(this,Mu,this.onEvent(N,this.onWindowClick.bind(this))),this.helper.setClass(Eu(this,ku),document.body),document.body.style.top=`-${scrollY}px`}onAfterClose(){this.detachEvent(N,Eu(this,Mu)),this.helper.removeClass(Eu(this,ku),document.body),document.body.style.top="",window.scrollTo(0,-1*Eu(this,bu))}onBeforeClose(){return!0}onWindowClick(t){const e=this.element.querySelector(ft(".{prefix}-off-canvas-container",Eu(this,yu)));e&&!e.contains(t.ev.target)&&this.close()}isAnyActive(){return this.helper.hasClass(Eu(this,ku),document.body)}setPositionLeft(){let t=it(Eu(this,yu),"left");"left"!==this.args.position||this.helper.hasClass(t,this.element)?"right"==this.args.position&&this.helper.hasClass(t,this.element)&&this.helper.removeClass(t,this.element):this.helper.setClass(t,this.element)}}yu=new WeakMap,ku=new WeakMap,bu=new WeakMap,Mu=new WeakMap;var xu,Lu,Su,Pu=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Iu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ou{static get(t){return t instanceof Window?new _u:t instanceof HTMLElement?new Hu(t):new Nu(t)}}class Nu{constructor(t){xu.set(this,void 0),Lu.set(this,void 0),Pu(this,Lu,t),Pu(this,xu,t.getBoundingClientRect())}getHeight(){return Iu(this,xu).height}getWidth(){return Iu(this,xu).width}getTop(){return Iu(this,xu).top}getLeft(){return Iu(this,xu).left}getScrollHeight(){return Iu(this,Lu).scrollHeight}getScrollWidth(){return Iu(this,Lu).scrollWidth}getScrollTop(){return Iu(this,Lu).scrollTop}getScrollLeft(){return Iu(this,Lu).scrollLeft}queryAll(t){return[...Iu(this,Lu).querySelectorAll(t)]}}xu=new WeakMap,Lu=new WeakMap;class Hu{constructor(t){Su.set(this,void 0),Pu(this,Su,t)}getHeight(){return Iu(this,Su).offsetHeight}getWidth(){return Iu(this,Su).offsetWidth}getTop(){return Iu(this,Su).offsetTop}getLeft(){return Iu(this,Su).offsetLeft}getScrollHeight(){return Iu(this,Su).scrollHeight}getScrollWidth(){return Iu(this,Su).scrollWidth}getScrollTop(){return Iu(this,Su).scrollTop}getScrollLeft(){return Iu(this,Su).scrollLeft}queryAll(t){return[...Iu(this,Su).querySelectorAll(t)]}}Su=new WeakMap;class _u{getHeight(){return window.innerHeight}getWidth(){return window.innerWidth}getTop(){return 0}getLeft(){return 0}getScrollHeight(){return window.innerHeight}getScrollWidth(){return window.innerWidth}getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}queryAll(t){return[...document.querySelectorAll(t)]}}var Du,Ru,$u,Fu,Bu,qu,zu,ju,Vu,Uu,Ku=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Yu=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xu{constructor(t,e){Du.set(this,void 0),Ru.set(this,void 0),$u.set(this,void 0),Fu.set(this,void 0),Bu.set(this,void 0),qu.set(this,void 0),zu.set(this,void 0),ju.set(this,void 0),Vu.set(this,void 0),Uu.set(this,void 0),Ku(this,Du,t),Ku(this,ju,Ou.get(t)),Ku(this,Ru,!1),Ku(this,$u,rt(e,0,100,0)),Ku(this,Fu,Ku(this,Bu,0)),Ku(this,zu,!1),Ku(this,qu,void 0),Ku(this,Vu,new kl(50,!1,this.onScrollFinish.bind(this))),Ku(this,Uu,this.listener.bind(this))}setCallback(t){Ku(this,qu,t)}attach(){Yu(this,Du).addEventListener("scroll",Yu(this,Uu)),Ku(this,zu,!0),this.listener(void 0,!0,"init")}detach(){Yu(this,Du).removeEventListener("scroll",Yu(this,Uu)),Yu(this,Vu).stop(),Ku(this,zu,!1)}setTarget(t){t!==Yu(this,Du)&&(this.detach(),Ku(this,Du,t),this.attach())}setThreshold(t){Ku(this,$u,rt(t,0,100,0))}isInProgress(){return Yu(this,Ru)}isAttached(){return Yu(this,zu)}listener(t,e,i){if(!et(Yu(this,qu)))return;let s=Yu(this,ju).getScrollLeft(),n=Yu(this,ju).getScrollTop();Ku(this,Fu,Yu(this,Fu)+s),Ku(this,Bu,Yu(this,Bu)+n),Yu(this,Ru)||!this.passedThreshold()&&et(t)||(Ku(this,Ru,!0),Yu(this,qu).call(this,{base:t,top:n,left:s,initial:null!=e&&e,scrolling:et(t),source:null!=i?i:"event"}),et(t)&&Yu(this,Vu).start(),Ku(this,Ru,!1),Ku(this,Fu,0),Ku(this,Bu,0))}passedThreshold(){return Yu(this,$u)<=0||Yu(this,Fu)>=Yu(this,$u)||Yu(this,Bu)>=Yu(this,$u)}onScrollFinish(){this.listener(void 0,!1,"task")}}Du=new WeakMap,Ru=new WeakMap,$u=new WeakMap,Fu=new WeakMap,Bu=new WeakMap,qu=new WeakMap,zu=new WeakMap,ju=new WeakMap,Vu=new WeakMap,Uu=new WeakMap;var Gu,Zu,Ju,Qu,tc,ec,ic,sc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},nc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rc{matches(t,e,i,s){return i>0&&e>=i||s>0&&t>=s}}class oc{constructor(){Gu.set(this,void 0),Zu.set(this,void 0),Ju.set(this,void 0),Qu.set(this,void 0),tc.set(this,void 0),ec.set(this,void 0),ic.set(this,void 0),sc(this,Gu,0),sc(this,Zu,0),sc(this,Qu,0),sc(this,Ju,0),sc(this,ic,100),sc(this,tc,!1),sc(this,ec,!1)}matches(t,e,i,s){return this.fitsOffsetY(t,s)||this.fitsOffsetX(e,i)}fitsOffsetX(t,e){if(e<=0)return!1;let i=t-nc(this,Gu);return t>=e&&i>nc(this,ic)?sc(this,tc,!0):nc(this,tc)&&i<-nc(this,ic)&&sc(this,tc,!1),(i<0&&nc(this,Qu)<i||i>=0&&nc(this,Qu)>i)&&sc(this,Gu,t),sc(this,Qu,i),nc(this,tc)}fitsOffsetY(t,e){if(e<=0)return!1;let i=t-nc(this,Zu);return t>=e&&i>nc(this,ic)?sc(this,ec,!0):nc(this,ec)&&i<-nc(this,ic)&&sc(this,ec,!1),(i<0&&nc(this,Ju)<i||i>=0&&nc(this,Ju)>i)&&sc(this,Zu,t),sc(this,Ju,i),nc(this,ec)}}Gu=new WeakMap,Zu=new WeakMap,Ju=new WeakMap,Qu=new WeakMap,tc=new WeakMap,ec=new WeakMap,ic=new WeakMap;var hc,ac,lc,uc,cc,dc,pc,vc,fc,gc,wc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},mc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},yc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class kc extends eh{constructor(){super(),this.offsetX=-1,this.offsetY=-1,this.target="",this.root=!1,this.action="",this.mode="static"}}class bc{constructor(t){this.attribute=(null!=t?t:"cui")+"-offset"}getStyle(){return null}get(t,e){return new Mc(t,e,this.attribute)}}class Mc extends jo{constructor(t,e,i){super("CuiOffsetHandler",t,i,new kc,e),hc.set(this,void 0),ac.set(this,void 0),lc.set(this,void 0),uc.set(this,void 0),cc.set(this,void 0),dc.set(this,void 0),pc.set(this,void 0),vc.set(this,void 0),fc.set(this,void 0),gc.set(this,void 0),this.element=t,mc(this,ac,this.element),mc(this,lc,e),mc(this,uc,!1),mc(this,cc,[]),mc(this,dc,0),mc(this,pc,0),mc(this,vc,20),mc(this,fc,this.element),mc(this,gc,null),mc(this,hc,void 0)}onHandle(){return wc(this,void 0,void 0,(function*(){return this.parseAttribute(),mc(this,hc,new Xu(this.args.root?window:this.element,this.utils.setup.scrollThreshold)),yc(this,hc).setCallback(this.onScroll.bind(this)),yc(this,hc).attach(),!0}))}onRefresh(){return wc(this,void 0,void 0,(function*(){return this.parseAttribute(),!0}))}onRemove(){return wc(this,void 0,void 0,(function*(){return yc(this,hc)&&yc(this,hc).detach(),!0}))}onScroll(t){this.checkAndPerformActions(t)}parseAttribute(){mc(this,fc,this.getRoot()),mc(this,ac,this.getTarget()),mc(this,cc,ki.get(this.args.action)),mc(this,gc,class{static get(t){return"dynamic"===t?new oc:new rc}}.get(this.args.mode))}checkAndPerformActions(t){et(yc(this,gc))||this.logError("Cannot perform - mode handler not initialized","checkAndPerformActions");let e=yc(this,gc).matches(t.top,t.left,this.args.offsetX,this.args.offsetY);if(e!==yc(this,uc))return this.act(e),mc(this,uc,e),void this.callEvent(yc(this,uc),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top));this.exceededThreshold(t.left,t.top)&&(this.callEvent(yc(this,uc),t.left,t.top,t.scrolling,t.source,...this.calcaRatio(t.left,t.top)),mc(this,dc,t.left),mc(this,pc,t.top))}act(t){ht(yc(this,cc),yc(this,ac))&&(this.isLocked=!0,yc(this,cc).forEach(e=>{t?e.add(yc(this,ac),yc(this,lc)):e.remove(yc(this,ac),yc(this,lc))}),this.isLocked=!1)}callEvent(t,e,i,s,n,r,o){this.emitEvent(H,{matches:yc(this,uc),offsetX:e,offsetY:i,ratioX:r,ratioY:o,scrolling:s,source:n,timestamp:Date.now()})}getRoot(){return this.args.root?document.body:this.element}exceededThreshold(t,e){return Math.abs(t-yc(this,dc))>yc(this,vc)||Math.abs(e-yc(this,pc))>yc(this,vc)}calcaRatio(t,e){let i=parseFloat(((yc(this,fc).clientHeight+e)/yc(this,fc).scrollHeight).toFixed(2));return[nt(parseFloat(((yc(this,fc).clientWidth+t)/yc(this,fc).scrollWidth).toFixed(2)),0,1),nt(i,0,1)]}getTarget(){let t=this.args.target?yc(this,fc).querySelector(this.args.target):null;return null!=t?t:this.element}}hc=new WeakMap,ac=new WeakMap,lc=new WeakMap,uc=new WeakMap,cc=new WeakMap,dc=new WeakMap,pc=new WeakMap,vc=new WeakMap,fc=new WeakMap,gc=new WeakMap;var Cc,Ec,Wc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Ac=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Tc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xc extends eh{constructor(t){super({main:"target"}),this.target="",this.action="",this.timeout=null!=t?t:300,this.prevent=!1,this.stopPropagation=!1,this.state=""}}class Lc{constructor(t){Cc.set(this,void 0),Ac(this,Cc,null!=t?t:"cui"),this.attribute=Tc(this,Cc)+"-open"}getStyle(){return null}get(t,e){return new Sc(t,e,this.attribute,Tc(this,Cc))}}Cc=new WeakMap;class Sc extends jo{constructor(t,e,i,s){super("CuiOpenHandler",t,i,new xc(e.setup.animationTime),e),Ec.set(this,void 0),Ac(this,Ec,null),this.addModule(new hh(this.element,this.args,this.onOpen.bind(this)))}onHandle(){return Wc(this,void 0,void 0,(function*(){return Ac(this,Ec,this.onEvent(C,this.onOpen.bind(this))),!0}))}onRefresh(){return Wc(this,void 0,void 0,(function*(){return!0}))}onRemove(){return Wc(this,void 0,void 0,(function*(){return this.detachEvent(C,Tc(this,Ec)),!0}))}onOpen(t){if(this.isLocked)return;const e=this.getTarget();et(e)?(this.isLocked=!0,this.run(e).then(e=>{e&&this.emitOpen(t)}).catch(t=>{this._log.exception(t)}).finally(()=>{this.isLocked=!1})):this._log.warning(`Target ${this.args.target} not found`,"onClick")}run(t){return Wc(this,void 0,void 0,(function*(){let e=t.$cuid;if(et(e))return this.handleClickCui(e),!1;if(this._log.debug("Open html component"),ht(this.args.timeout,this.args.action)){this._log.debug("Perfrom an action");let e=ki.get(this.args.action);return this.actionsHelper.performActions(t,e,this.args.timeout,()=>{this.helper.setClass(this.activeClassName,t)})}return this.helper.setClassesAs(t,this.activeClassName),!0}))}handleClickCui(t){return this._log.debug("Open cUI component"),this.utils.bus.emit(C,t,this.args.state),!1}emitOpen(t){this.emitEvent(E,{event:t,state:this.args.state})}getTarget(){var t;return et(this.args.target)&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:wt(this.element)}}Ec=new WeakMap;var Pc,Ic,Oc,Nc,Hc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},_c=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Dc{constructor(t,e){var i;Pc.set(this,void 0),Ic.set(this,void 0),Oc.set(this,void 0),Nc.set(this,void 0),Hc(this,Nc,Ou.get(t)),Hc(this,Pc,new Xu(t,null!==(i=null==e?void 0:e.threshold)&&void 0!==i?i:0)),_c(this,Pc).setCallback(this.onScroll.bind(this)),Hc(this,Oc,[]),Hc(this,Ic,void 0)}setChildren(t){Hc(this,Oc,t)}setThreshold(t){_c(this,Pc).setThreshold(t)}setCallback(t){Hc(this,Ic,t)}setParent(t){Hc(this,Nc,Ou.get(t)),_c(this,Pc).setTarget(t)}isInProgress(){return _c(this,Pc).isInProgress()}attach(){this.isAttached()||_c(this,Pc).attach()}detach(){this.isAttached()&&_c(this,Pc).detach()}isAttached(){return _c(this,Pc)&&_c(this,Pc).isAttached()}onScroll(t){ht(_c(this,Oc),_c(this,Ic))&&_c(this,Ic)&&_c(this,Ic).call(this,this.prepareCallbackResult(t))}calcChildVerticalRatio(t,e,i){let s=t.offsetTop+t.offsetHeight;return nt(((i<s?i:s)-(e>t.offsetTop?e:t.offsetTop))/t.offsetHeight,0,1)}calcChildHorizontalRatio(t,e,i){let s=t.offsetLeft+t.offsetWidth;return nt(((i<s?i:s)-(e>t.offsetLeft?e:t.offsetLeft))/t.offsetWidth,0,1)}prepareCallbackResult(t){var e,i;let s=t.top+_c(this,Nc).getHeight(),n=t.left+_c(this,Nc).getWidth();return{ev:t.base,top:t.top,left:t.left,scrolling:null!==(e=t.scrolling)&&void 0!==e&&e,initial:null!==(i=t.initial)&&void 0!==i&&i,source:t.source,items:_c(this,Oc).map((e,i)=>({verticalRatio:this.calcChildVerticalRatio(e,t.top,s),horizontalRatio:this.calcChildHorizontalRatio(e,t.left,n),element:e}))}}}Pc=new WeakMap,Ic=new WeakMap,Oc=new WeakMap,Nc=new WeakMap;var Rc,$c=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Bc{constructor(t,e){Rc.set(this,void 0),this.name=t,$c(this,Rc,[]),yt(e,(t,e)=>{let i=Vh.get(t);i&&(i.setProperty(e),Fc(this,Rc).push(i))})}perform(t,e){0!==Fc(this,Rc).length&&Fc(this,Rc).forEach(i=>i.perform(t,e,1))}}Rc=new WeakMap;var qc,zc,jc,Vc=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Uc=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kc extends eh{constructor(){super({props:{targets:{corrector:Ct}}}),this.root=!1,this.targets=Ct("> *"),this.startRatio=0,this.stopRatio=1,this.animation=""}}class Yc{constructor(t){this.attribute=(null!=t?t:"cui")+"-parallax"}getStyle(){return""}get(t,e){return new Xc(t,e,this.attribute)}}class Xc extends Uo{constructor(t,e,i){super("CuiParallaxHandler",t,i,new Kc,e),qc.set(this,void 0),zc.set(this,void 0),jc.set(this,void 0),Vc(this,qc,void 0),Vc(this,zc,void 0),Vc(this,jc,[])}onInit(){Vc(this,zc,new Bc(this.args.animation,this.utils.setup.parallaxAnimations[this.args.animation])),this.setMutationSelector(Et(this.args.targets)),Vc(this,jc,this.getTargets()),Vc(this,qc,new Dc(this.getParent(),{threshold:this.utils.setup.scrollThreshold})),Uc(this,qc).setCallback(this.onIntersection.bind(this)),Uc(this,qc).setChildren(Uc(this,jc).map(t=>t.element)),Uc(this,qc).attach()}onUpdate(){this.prevArgs&&Uc(this,qc)&&(this.prevArgs.targets!==this.args.targets&&(this.clean(),this.setMutationSelector(Et(this.args.targets)),Vc(this,jc,this.getTargets()),Uc(this,qc).setChildren(Uc(this,jc).map(t=>t.element))),this.prevArgs.root!==this.args.root&&Uc(this,qc).setParent(this.getParent()))}onDestroy(){this.clean(),Uc(this,qc)&&Uc(this,qc).detach()}onIntersection(t){this.mutate(()=>{t.items.forEach((t,e)=>{if(e>=Uc(this,jc).length)return;const i=Uc(this,jc)[e];i.animator&&i.animator.perform(t.element,function(t,e,i){let s=i-t;s<0&&(s=0);let n=s/(e-t);return Math.min(n,1)}(i.start,i.stop,t.verticalRatio))})})}onMutation(t){Uc(this,qc)&&(Vc(this,jc,this.getTargets()),Uc(this,qc).setChildren(Uc(this,jc).map(t=>t.element)))}getTargets(){const t=[];return this.element.querySelectorAll(this.args.targets).forEach(e=>{var i;t.push({element:e,animator:null!==(i=this.getTargetAnimator(e))&&void 0!==i?i:Uc(this,zc),start:ut(e.getAttribute("data-parallax-start-ratio"),this.args.startRatio),stop:ut(e.getAttribute("data-parallax-stop-ratio"),this.args.stopRatio)})}),t}getParent(){return this.args.root?window:this.element}getTargetAnimator(t){if(!t.hasAttribute("data-parallax-animation"))return;const e=t.getAttribute("data-parallax-animation");let i=this.utils.setup.parallaxAnimations[e];return i?new Bc(e,i):void 0}clean(){Uc(this,jc).forEach(t=>{this.utils.interactions.mutate(Gc,null,t.element)})}}function Gc(t){t&&t.style&&t.removeAttribute("style")}qc=new WeakMap,zc=new WeakMap,jc=new WeakMap;var Zc,Jc,Qc,td,ed=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},id=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class sd{constructor(t,e){Zc.set(this,void 0),Jc.set(this,void 0),Qc.set(this,void 0),td.set(this,void 0),ed(this,Jc,t),ed(this,Qc,null!=e?e:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]),ed(this,td,void 0),ed(this,Zc,void 0)}setCallback(t){ed(this,td,t)}connect(){id(this,td)&&ed(this,Zc,new IntersectionObserver(id(this,td),{root:id(this,Jc),rootMargin:"0px",threshold:id(this,Qc)}))}observe(t){id(this,Zc)&&id(this,Zc).observe(t)}unobserve(t){id(this,Zc)&&id(this,Zc).unobserve(t)}disconnect(){id(this,Zc)&&id(this,Zc).disconnect()}}Zc=new WeakMap,Jc=new WeakMap,Qc=new WeakMap,td=new WeakMap;var nd,rd,od,hd,ad,ld,ud,cd,dd,pd=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},vd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class gd extends eh{constructor(){super(),this.mode="simple",this.default="",this.small=this.medium=this.large=this.xlarge="",this.delay=0}}class wd{constructor(t){nd.set(this,void 0),vd(this,nd,null!=t?t:"cui"),this.attribute=fd(this,nd)+"-resize"}getStyle(){return null}get(t,e){return new md(t,e,this.attribute)}}nd=new WeakMap;class md extends jo{constructor(t,e,i){super("CuiResizeHandler",t,i,new gd,e),rd.set(this,void 0),od.set(this,void 0),hd.set(this,void 0),ad.set(this,void 0),ld.set(this,void 0),ud.set(this,void 0),cd.set(this,void 0),dd.set(this,void 0),vd(this,rd,null),vd(this,od,new sd(document.documentElement,[0,.1])),fd(this,od).setCallback(this.onIntersection.bind(this)),vd(this,ld,""),vd(this,ad,""),vd(this,hd,"none"),vd(this,cd,!1),vd(this,dd,void 0),vd(this,ud,void 0)}onHandle(){return pd(this,void 0,void 0,(function*(){return vd(this,rd,this.utils.bus.on(M,this.resize.bind(this))),fd(this,od).connect(),fd(this,od).observe(this.element),vd(this,hd,at(window.innerWidth)),vd(this,cd,this.isInViewport(this.element)),this.setNewValue(),this.updateElement(),!0}))}onRefresh(){return pd(this,void 0,void 0,(function*(){return this.setNewValue(),this.updateElement(),!0}))}onRemove(){return pd(this,void 0,void 0,(function*(){return null!==fd(this,rd)&&(this.utils.bus.detach(M,fd(this,rd)),vd(this,rd,null)),fd(this,od).unobserve(this.element),fd(this,od).disconnect(),!0}))}resize(t){vd(this,hd,t.current),this.setNewValue(),this.updateElement()}onIntersection(t){t.length>0&&vd(this,cd,t[0].isIntersecting),this.updateElement()}setNewValue(){let t=this.isSmartMode()?this.getSmartValue(fd(this,hd)):this.getValue(fd(this,hd),!0);t&&t!==fd(this,ad)&&vd(this,ad,t)}getValue(t,e){let i=void 0;switch(t){case"xlarge":i=this.args.xlarge;break;case"large":i=this.args.large;break;case"medium":i=this.args.medium;break;case"small":i=this.args.small;break;default:i=this.args.default}return e&&!i?this.args.default:i}getSmartValue(t){var e,i,s,n;let r=this.args.default;return"none"===t?r:(r=null!==(e=this.args.small)&&void 0!==e?e:r,"small"===t?r:(r=null!==(i=this.args.medium)&&void 0!==i?i:r,"medium"===t?r:(r=null!==(s=this.args.large)&&void 0!==s?s:r,"large"===t?r:null!==(n=this.args.xlarge)&&void 0!==n?n:r)))}updateElement(){fd(this,cd)||!this.isSmartMode()?et(fd(this,ad))?fd(this,ld)!==fd(this,ad)&&this.run(()=>{let t=yi.get(fd(this,ad));this.mutate(()=>{fd(this,ud)&&fd(this,ud).remove(this.element),t.add(this.element),vd(this,ld,fd(this,ad)),vd(this,ud,t)})}):this.logWarning("Not eligible to set value: "+fd(this,ad)):this.logInfo("Not intersecting")}isSmartMode(){return"smart"===this.args.mode}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}run(t){fd(this,dd)&&(clearTimeout(fd(this,dd)),vd(this,dd,void 0)),vd(this,dd,setTimeout(()=>{t(),vd(this,dd,void 0)},this.args.delay))}}rd=new WeakMap,od=new WeakMap,hd=new WeakMap,ad=new WeakMap,ld=new WeakMap,ud=new WeakMap,cd=new WeakMap,dd=new WeakMap;var yd=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class kd extends eh{constructor(){super({props:{behavior:{corrector:t=>Mt(t,"auto","smooth")}}}),this.target="",this.parent="",this.behavior="auto",this.stopPropagation=!1,this.prevent=!1}}class bd{constructor(t){this.attribute=et(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new Md(t,e,this.attribute)}}class Md extends jo{constructor(t,e,i){super("CuiScrollHandler",t,i,new kd,e),this.addModule(new hh(this.element,this.args,this.onClick.bind(this)))}onHandle(){return yd(this,void 0,void 0,(function*(){return!0}))}onRefresh(){return yd(this,void 0,void 0,(function*(){return!0}))}onRemove(){return yd(this,void 0,void 0,(function*(){return!0}))}onClick(t){const e=this.getTarget(),i=this.getTargetsParent(e);if(!e||!i)return;let s=function(t){if(!et(t))return-1;let e=t.offsetTop-parseInt(ct(t,"margin-top"))-parseInt(ct(t,"padding-top"))-parseInt(ct(t,"border-top-width"));return e<0?t.offsetTop:e}(e)-i.offsetTop,n=s-i.scrollTop;i.scrollBy({top:n,behavior:this.args.behavior}),this.emitEvent(P,{to:s,by:n,target:e,parent:i})}getTarget(){return et(this.args.target)?document.querySelector(this.args.target):null}getTargetsParent(t){return et(this.args.parent)?document.querySelector(this.args.parent):t?t.parentElement:null}}class Cd{static get(t){return"multi"===t?new Ad:new Wd}}class Ed{constructor(t){this.previous=t}getMatching(t,e){return e.reduce((e,i,s)=>(i.verticalRatio>t&&e.push(s),e),[])}addActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.add(e)})}removeActions(t,...e){this.forEachAction(t,e,(t,e)=>{t.remove(e)})}forEachAction(t,e,i){ht(t,e,i)&&t.forEach(t=>{e.forEach(e=>{et(e)&&i(t,e)})})}}class Wd extends Ed{constructor(){super(-1)}update(t,e,i,s,n){let r=this.getMatching(e,t),o=r.length,h=o>0?r[o-1]:-1,a={changed:!1};if(!this.matches(h)){if(this.previous>-1&&this.removeActions(i,t[this.previous].element),h>-1){let e=t[h].element;a.intersecting=[e],this.addActions(i,e)}return ht(s,n)&&(this.previous>-1&&this.removeActions(n,s[this.previous]),h>-1&&this.addActions(n,s[h])),this.previous=h,a.changed=!0,a.intersecting=[],a}return a}matches(t){return t===this.previous}}class Ad extends Ed{constructor(){super([])}update(t,e,i,s,n){let r=this.getMatching(e,t),o={changed:!1};if(!this.matches(r)){let e=r.map(e=>t[e].element);return this.removeActions(i,...this.previous.map(e=>t[e].element)),this.addActions(i,...e),o.intersecting=e,ht(s,n)&&(this.removeActions(n,...this.previous.map(t=>s[t])),this.addActions(n,...r.map(t=>s[t]))),this.previous=r,o.changed=!0,o}return o}matches(t){let e=t.length;if(e!==this.previous.length)return!1;let i=0;for(i=0;i<e;i++)if(!this.previous.includes(t[i]))return!1;return!0}}var Td,xd,Ld,Sd,Pd,Id,Od,Nd=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Hd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},_d=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Dd extends eh{constructor(){super({props:{selector:{corrector:Ct},ratio:{corrector:t=>rt(t,0,1,0)},mode:{corrector:t=>Mt(t,"single","multi")}}}),this.ratio=0,this.mode="single",this.threshold=-1,this.selector=Ct("> *"),this.action="",this.isRoot=!1,this.link="",this.linkAction=""}}class Rd{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new $d(t,e,this.attribute)}}class $d extends jo{constructor(t,e,i){super("CuiScrollspyHandler",t,i,new Dd,e),Td.set(this,void 0),xd.set(this,void 0),Ld.set(this,void 0),Sd.set(this,void 0),Pd.set(this,void 0),Id.set(this,void 0),Od.set(this,void 0),this.element=t,Hd(this,Td,new Dc(this.element,{threshold:this.utils.setup.scrollThreshold})),Hd(this,xd,[]),Hd(this,Ld,[]),Hd(this,Sd,[]),Hd(this,Pd,void 0),Hd(this,Id,void 0),Hd(this,Od,void 0)}onHandle(){return Nd(this,void 0,void 0,(function*(){return this.init(),_d(this,Td).setCallback(this.onIntersection.bind(this)),_d(this,Td).attach(),!0}))}onRefresh(){return Nd(this,void 0,void 0,(function*(){return this.update(),!0}))}onRemove(){return Nd(this,void 0,void 0,(function*(){return _d(this,Td).detach(),!0}))}onIntersection(t){if(!_d(this,Od))return void this.logError("Cannot perform - mode handler not initialized","OnIntersection");let e=Date.now();this.mutate(()=>{let i=_d(this,Od).update(t.items,this.args.ratio,_d(this,Ld),_d(this,xd),_d(this,Sd));i.changed&&this.emitEvent(I,{intersecting:i.intersecting,timestamp:e})}),this.emitEvent(P,{top:t.top,left:t.left,scrolling:t.scrolling,initial:t.initial})}init(){Hd(this,Pd,this.args.isRoot?window:this.element),Hd(this,Id,Ou.get(_d(this,Pd)));let t=this.args.selector?_d(this,Id).queryAll(this.args.selector):[];_d(this,Td).setChildren(t),_d(this,Td).setThreshold(this.args.threshold),Hd(this,xd,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),Hd(this,Ld,ki.get(this.args.action)),Hd(this,Sd,ki.get(this.args.linkAction)),Hd(this,Od,Cd.get(this.args.mode))}update(){if(this.prevArgs&&this.args.isRoot!==this.prevArgs.isRoot&&(Hd(this,Pd,this.args.isRoot?window:this.element),Hd(this,Id,Ou.get(_d(this,Pd))),_d(this,Td).setParent(_d(this,Pd))),this.prevArgs&&_d(this,Id)&&this.args.selector!==this.prevArgs.selector){let t=this.args.selector?_d(this,Id).queryAll(this.args.selector):[];_d(this,Td).setChildren(t)}_d(this,Td).setThreshold(this.args.threshold),Hd(this,xd,this.args.link?[...document.querySelectorAll(this.args.link)]:[]),Hd(this,Ld,ki.get(this.args.action)),Hd(this,Sd,ki.get(this.args.linkAction)),Hd(this,Od,Cd.get(this.args.mode))}}Td=new WeakMap,xd=new WeakMap,Ld=new WeakMap,Sd=new WeakMap,Pd=new WeakMap,Id=new WeakMap,Od=new WeakMap;var Fd,Bd,qd,zd=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},jd=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vd{constructor(){Fd.set(this,void 0),Bd.set(this,void 0),qd.set(this,void 0),zd(this,Fd,[]),zd(this,Bd,0),zd(this,qd,5)}setElements(t){zd(this,Fd,t),zd(this,Bd,jd(this,Fd).length)}setThreshold(t){zd(this,qd,t)}detect(t,e){if(!et(jd(this,Fd)))return[-1,void 0];let i=-1,s=void 0;for(let n=0;n<jd(this,Bd);n++)if(this.isInBounds(jd(this,Fd)[n],t,e)){0===n?(i=n,s=jd(this,Fd)[n]):n<jd(this,Bd)-1&&(i=n+1,s=jd(this,Fd)[n+1]);break}return[i,s]}isInBounds(t,e,i){const s=t.getBoundingClientRect();return e>s.left-jd(this,qd)&&e<s.left+s.width+jd(this,qd)&&i>s.top-jd(this,qd)&&i<s.top+s.height+jd(this,qd)}}Fd=new WeakMap,Bd=new WeakMap,qd=new WeakMap;var Ud,Kd,Yd,Xd,Gd,Zd,Jd,Qd,tp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ep=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ip{constructor(t){Ud.set(this,void 0),Kd.set(this,void 0),Yd.set(this,void 0),Xd.set(this,void 0),Gd.set(this,void 0),Zd.set(this,void 0),Jd.set(this,void 0),Qd.set(this,void 0),tp(this,Ud,t),tp(this,Kd,new Gn),tp(this,Zd,150),tp(this,Jd,!1),tp(this,Qd,void 0),ep(this,Kd).setTarget(ep(this,Ud)),ep(this,Kd).preventDefault(!1),ep(this,Kd).setCallback(this.onMove.bind(this)),tp(this,Yd,void 0),tp(this,Xd,void 0),tp(this,Gd,void 0)}setLongPressTimeout(t){tp(this,Zd,t)}onDragStart(t){tp(this,Yd,t)}onDragOver(t){tp(this,Xd,t)}onDragEnd(t){tp(this,Gd,t)}attach(){ep(this,Kd).attach()}detach(){ep(this,Kd).detach()}onMove(t){switch(t.type){case"down":if(ep(this,Jd))return;tp(this,Qd,setTimeout(()=>{ep(this,Yd)&&ep(this,Yd).call(this,t)&&tp(this,Jd,!0)},ep(this,Zd)));break;case"move":if(this.cancelTimeout(),!ep(this,Jd))return;ep(this,Xd)&&ep(this,Xd).call(this,t);break;case"up":if(this.cancelTimeout(),!ep(this,Jd))return;ep(this,Gd)&&ep(this,Gd).call(this,t),tp(this,Jd,!1)}}cancelTimeout(){ep(this,Qd)&&(clearTimeout(ep(this,Qd)),tp(this,Qd,void 0))}}Ud=new WeakMap,Kd=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,Gd=new WeakMap,Zd=new WeakMap,Jd=new WeakMap,Qd=new WeakMap;var sp,np,rp,op,hp,ap,lp,up,cp,dp,pp,vp,fp=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},gp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class mp extends eh{constructor(){super({props:{target:{corrector:Ct},trigger:{corrector:Ct}}}),this.target=Ct(" > *"),this.trigger=Ct(" > *"),this.timeout=150,this.threshold=5}}class yp{constructor(t){sp.set(this,void 0),gp(this,sp,null!=t?t:"cui"),this.attribute=wp(this,sp)+"-sortable"}getStyle(){return null}get(t,e){return new kp(t,this.attribute,e,wp(this,sp))}}sp=new WeakMap;class kp extends jo{constructor(t,e,i,s){super("CuiSortableHandler",t,e,new mp,i),np.set(this,void 0),rp.set(this,void 0),op.set(this,void 0),hp.set(this,void 0),ap.set(this,void 0),lp.set(this,void 0),up.set(this,void 0),cp.set(this,void 0),dp.set(this,void 0),pp.set(this,void 0),vp.set(this,void 0),gp(this,op,[]),gp(this,rp,[]),gp(this,ap,-1),gp(this,hp,null),gp(this,dp,null),gp(this,lp,null),gp(this,np,new ip(t)),wp(this,np).onDragStart(this.onDragStart.bind(this)),wp(this,np).onDragOver(this.onDragOver.bind(this)),wp(this,np).onDragEnd(this.onDragEnd.bind(this)),gp(this,up,ft("{prefix}-moving",s)),gp(this,vp,ft("{prefix}-sortable-preview",s)),gp(this,cp,new Vd),gp(this,pp,new Kh),wp(this,pp).setOnFinish(this.onSortAnimationFinish.bind(this))}onHandle(){return fp(this,void 0,void 0,(function*(){return wp(this,np).attach(),this.getTargetsAndTrggers(),wp(this,cp).setThreshold(this.args.threshold),!0}))}onRefresh(){return fp(this,void 0,void 0,(function*(){return!this.prevArgs||this.args.target===this.prevArgs.target&&this.args.trigger===this.prevArgs.trigger||this.getTargetsAndTrggers(),wp(this,np).setLongPressTimeout(this.args.timeout),!0}))}onRemove(){return fp(this,void 0,void 0,(function*(){return wp(this,np).detach(),!0}))}getTargetsAndTrggers(){try{if(gp(this,op,[...this.element.querySelectorAll(this.args.target)]),gp(this,rp,[...this.element.querySelectorAll(this.args.trigger)]),wp(this,rp).length!==wp(this,op).length)throw new Error(`Triggers (count ${wp(this,rp).length}) and targets (count ${wp(this,op).length}) selector are not correct`);wp(this,cp).setElements(wp(this,op))}catch(t){this._log.error("Incorrect trigger or target selector"),this._log.exception(t,"getTargetsAndTrggers"),gp(this,op,[]),gp(this,rp,[])}}onDragStart(t){return gp(this,ap,this.getPressedElementIdx(t.target)),gp(this,hp,wp(this,ap)>-1?wp(this,op)[wp(this,ap)]:null),!!et(wp(this,hp))&&(this.utils.bus.emit($,null,!0),this.startMovementPrep(t),this.emitEvent(z,{target:wp(this,hp),index:wp(this,ap)}),!0)}onDragOver(t){this.move(t),t.event.preventDefault()}onDragEnd(t){et(wp(this,lp))&&(wp(this,pp).setElement(wp(this,lp)),wp(this,pp).setProps(this.getFinishAnimation()),wp(this,pp).finish(0,100,!1))}getPressedElementIdx(t){return wp(this,rp).findIndex(e=>e.contains(t))}startMovementPrep(t){this.mutate(()=>{this.createPreview(),et(wp(this,hp))&&this.helper.setClass(wp(this,up),wp(this,hp)),this.helper.setClass("cui-locked",this.element),this.helper.setClass(v,document.body),this.setPreviewPosition(t),this.setCurrentPosition(t)})}stopMovementPrep(){this.mutate(()=>{et(wp(this,hp))&&this.helper.removeClass(wp(this,up),wp(this,hp)),this.helper.removeClass(v,document.body),this.helper.removeClass("cui-locked",this.element),this.removePreview(),gp(this,hp,null),gp(this,dp,null),this.getTargetsAndTrggers()})}move(t){this.mutate(()=>{this.setPreviewPosition(t),this.setCurrentPosition(t)})}createPreview(){et(wp(this,hp))?(gp(this,lp,new ys("div").setClasses(wp(this,vp)).build()),wp(this,lp).style.width=wp(this,hp).offsetWidth+"px",wp(this,lp).style.height=wp(this,hp).offsetHeight+"px",document.body.appendChild(wp(this,lp))):this.logError("Cannot create preview - current target does not exist","createPreview")}removePreview(){et(wp(this,lp))&&(wp(this,lp).remove(),gp(this,lp,null))}setPreviewPosition(t){et(wp(this,lp))&&(wp(this,lp).style.top=t.y+"px",wp(this,lp).style.left=t.x+"px")}setCurrentPosition(t){if(!wp(this,hp))return;let[e,i]=wp(this,cp).detect(t.x,t.y);if(e!==wp(this,ap)&&i&&wp(this,dp)!==i){let t=i;this.insertElement(wp(this,hp),t),gp(this,dp,t),this.getTargetsAndTrggers(),gp(this,ap,e)}}insertElement(t,e){et(e)?this.element.insertBefore(t,e):this.element.appendChild(t)}getFinishAnimation(){if(!ht(wp(this,hp),wp(this,lp)))return{opacity:{from:1,to:0}};const t=wp(this,hp).getBoundingClientRect();return{opacity:{from:1,to:0},top:{from:wp(this,lp).offsetTop,to:t.top>0?t.top:wp(this,lp).offsetTop,unit:"px"},left:{from:wp(this,lp).offsetLeft,to:t.left>0?t.left:wp(this,lp).offsetLeft,unit:"px"}}}onSortAnimationFinish(){this.stopMovementPrep(),this.utils.bus.emit($,null,!1),this.emitEvent(q,{target:wp(this,hp),index:wp(this,ap)})}}np=new WeakMap,rp=new WeakMap,op=new WeakMap,hp=new WeakMap,ap=new WeakMap,lp=new WeakMap,up=new WeakMap,cp=new WeakMap,dp=new WeakMap,pp=new WeakMap,vp=new WeakMap;var bp,Mp,Cp,Ep=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Wp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ap=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Tp extends eh{constructor(){super({main:"spinner"}),this.spinner="circle",this.scale=1}}class xp{constructor(t){bp.set(this,void 0),Wp(this,bp,null!=t?t:"cui"),this.attribute=Ap(this,bp)+"-spinner",f.spinner_circle='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z"></path></svg>',f.spinner_circle_double='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z"></path><path d="M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z"></path></svg>'}getStyle(){return null}get(t,e){return new Lp(t,e,this.attribute,Ap(this,bp))}}bp=new WeakMap;class Lp extends jo{constructor(t,e,i,s){super("CuiSpinnerHandler",t,i,new Tp,e),Mp.set(this,void 0),Cp.set(this,void 0),Wp(this,Mp,null),Wp(this,Cp,ft("{prefix}-animation-pause",s))}onHandle(){return Ep(this,void 0,void 0,(function*(){return Wp(this,Mp,this.onEvent(F,this.onPause.bind(this))),this.add(),!0}))}onRefresh(){return Ep(this,void 0,void 0,(function*(){return this.prevArgs&&this.args.spinner!==this.prevArgs.spinner&&this.add(),!0}))}onRemove(){return Ep(this,void 0,void 0,(function*(){return this.removeIfAnyExisists(),this.detachEvent(F,Ap(this,Mp)),!0}))}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}add(){const t=et(this.args.spinner)?f["spinner_"+this.args.spinner]:null;if(!et(t))return void this._log.warning("Incorrect spinner name: "+this.args.spinner);this.removeIfAnyExisists();const e=new wr(t).setScale(this.args.scale).build();this.mutate(this.addSpinner,e,this.args.spinner)}removeIfAnyExisists(){let t=this.element.querySelector("svg");t&&t.remove()}onPause(t){this.fetch(()=>{t&&!this.helper.hasClass(Ap(this,Cp),this.element)?this.helper.setClassesAs(this.element,Ap(this,Cp)):this.helper.removeClassesAs(this.element,Ap(this,Cp))}),this.emitEvent(B,{paused:t})}}Mp=new WeakMap,Cp=new WeakMap;var Sp,Pp,Ip,Op,Np,Hp,_p,Dp,Rp,$p,Fp,Bp,qp,zp,jp,Vp,Up=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Kp=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Yp=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xp extends eh{constructor(t,e){super({props:{targets:{corrector:Ct}}}),this.targets=Ct(" > li"),this.links="",this.autoTimeout=-1,this.height="",this.animation="slide",this.loop=!1,this.timeout=null!=e?e:300}}class Gp{constructor(t){this.attribute=(null!=t?t:"cui")+"-slider"}getStyle(){return null}get(t,e){return new Zp(t,e,this.attribute)}}class Zp extends Uo{constructor(t,e,i){super("CuiSliderHandler",t,i,new Xp(e.setup.prefix,e.setup.animationTime),e),Sp.set(this,void 0),Pp.set(this,void 0),Ip.set(this,void 0),Op.set(this,void 0),Np.set(this,void 0),Hp.set(this,void 0),_p.set(this,void 0),Dp.set(this,void 0),Rp.set(this,void 0),$p.set(this,void 0),Fp.set(this,void 0),Bp.set(this,void 0),qp.set(this,void 0),zp.set(this,void 0),jp.set(this,void 0),Vp.set(this,void 0),Kp(this,Sp,[]),Kp(this,Pp,-1),Kp(this,Rp,-1),Kp(this,Ip,[]),Kp(this,Np,null),Kp(this,Vp,null),Kp(this,Hp,!1),Kp(this,_p,-1),Kp(this,Dp,0),Kp(this,$p,null),Kp(this,Fp,.4),Kp(this,Bp,new Kh),Kp(this,qp,new Kh),Yp(this,Bp).setOnFinish(this.onAnimationFinish.bind(this)),Kp(this,jp,0),Kp(this,Op,new kl(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),Kp(this,zp,is[this.args.animation])}onInit(){Kp(this,Np,this.onEvent(L,this.onPushSwitch.bind(this))),Kp(this,Vp,this.onEvent(R,this.onMove.bind(this))),this.getTargets(),this.getLinks(),this.getActiveIndex(),this.setLinkActive(-1,Yp(this,Pp)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(Yp(this,Sp)[Yp(this,Pp)]))}),Kp(this,Op,new kl(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),Kp(this,zp,is[this.args.animation]),this.startTask()}onUpdate(){this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(Yp(this,Sp)[Yp(this,Pp)]))}),Kp(this,zp,is[this.args.animation]),this.startTask()}onDestroy(){Yp(this,Op).stop(),this.detachEvent(L,Yp(this,Np)),this.detachEvent(R,Yp(this,Vp))}onMutation(t){}onMove(t){if(this.isLocked||!Yp(this,zp))return;let e=Yp(this,Sp)[Yp(this,Pp)];switch(t.type){case"down":if(Yp(this,Hp)||!e.contains(t.target))return;Kp(this,Hp,!0),Kp(this,_p,t.x),Yp(this,Bp).setElement(e),this.helper.setClassesAs(document.body,v),t.event.cancelable&&t.event.preventDefault();break;case"up":if(!Yp(this,Hp))break;this.isLocked=!0;let i=Math.abs(Yp(this,Dp)),s=i*this.args.timeout,n=i<=Yp(this,Fp);Yp(this,Bp).finish(i,s,n),Yp(this,qp).finish(i,s,n),this.helper.removeClassesAs(document.body,v),Kp(this,Hp,!1);break;case"move":if(!Yp(this,Hp))break;let r=(t.x-Yp(this,_p))/e.offsetWidth;if(Math.abs(r-Yp(this,Dp))<.02)break;let o=kt(Yp(this,Dp)>0?"next":"prev",Yp(this,Pp),Yp(this,jp));Kp(this,Dp,this.adjustMoveRatio(r)),o!==Yp(this,Rp)&&(Yp(this,$p)&&this.helper.removeClass(d,Yp(this,$p)),Kp(this,$p,Yp(this,Sp)[o]),Kp(this,Rp,o),Yp(this,qp).setElement(Yp(this,$p)),Yp(this,qp).setProps(Yp(this,Dp)>0?Yp(this,zp).previous.right:Yp(this,zp).previous.left),Yp(this,Bp).setProps(Yp(this,Dp)>0?Yp(this,zp).current.right:Yp(this,zp).current.left),this.mutate(()=>{Yp(this,$p)&&this.helper.setClass(d,Yp(this,$p))})),this.mutate(()=>{Yp(this,Bp).update(Math.abs(Yp(this,Dp))),Yp(this,qp).update(Math.abs(Yp(this,Dp)))}),t.event.cancelable&&t.event.preventDefault()}}adjustMoveRatio(t){return this.args.loop?t:Yp(this,Pp)===Yp(this,jp)-1&&t>0||0===Yp(this,Pp)&&t<0?0:t}switch(t){return Up(this,void 0,void 0,(function*(){return this.isLocked?(console.log("Locked"),!1):(this.onPushSwitch(t),!0)}))}onAnimationFinish(t,e,i){this.isLocked=!1;let s=Yp(this,Sp)[Yp(this,Rp)],n=Yp(this,Sp)[Yp(this,Pp)];e?(et(Yp(this,$p))&&(this.helper.removeClass(d,Yp(this,$p)),this.helper.removeAttribute("style",Yp(this,$p))),this.helper.removeAttribute("style",n),Kp(this,Rp,-1),Kp(this,$p,null),Kp(this,_p,-1),Kp(this,Dp,0)):Yp(this,Rp)>-1&&this.mutate(()=>{this.helper.removeClass(d,s),this.helper.setClass(this.activeClassName,s),this.helper.removeClass(this.activeClassName,n),this.helper.removeAttribute("style",n),this.helper.removeAttribute("style",s),this.setLinkActive(Yp(this,Pp),Yp(this,Rp)),this.emitEvent(S,{timestamp:Date.now(),index:Yp(this,Rp)}),Kp(this,Pp,Yp(this,Rp)),Kp(this,Rp,-1),Kp(this,$p,null),Kp(this,_p,-1),Kp(this,Dp,0)}),this.startTask()}onPushSwitch(t){if(!et(t)||this.isLocked||!Yp(this,zp)||!this.args.loop&&0===Yp(this,Pp)&&"prev"===t||!this.args.loop&&Yp(this,Pp)===Yp(this,jp)-1&&"next"===t)return;this.isLocked=!0;let e=kt(t,Yp(this,Pp),Yp(this,jp));if(e==Yp(this,Pp)||e<0||e>=Yp(this,Sp).length)return this._log.warning(`Index ${t} is not within the suitable range`),!1;Kp(this,Rp,e);let i=Yp(this,Sp)[Yp(this,Pp)],s=Yp(this,Sp)[Yp(this,Rp)];Yp(this,Bp).setElement(i),Yp(this,qp).setElement(s),Yp(this,Bp).setProps("prev"===t?Yp(this,zp).current.left:Yp(this,zp).current.right),Yp(this,qp).setProps("prev"===t?Yp(this,zp).previous.left:Yp(this,zp).previous.right),this.mutate(()=>{Yp(this,Bp).finish(0,this.args.timeout,!1),Yp(this,qp).finish(0,this.args.timeout,!1),this.helper.setClass(d,s)})}getActiveIndex(){Kp(this,Pp,et(Yp(this,Sp))?Yp(this,Sp).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return et(this.args.height)&&"auto"!==this.args.height?this.args.height:mt(t)+"px"}getTargets(){let t=this.element.querySelectorAll(this.args.targets);Kp(this,Sp,t.length>0?[...t]:[]),Kp(this,jp,Yp(this,Sp).length)}getLinks(){Kp(this,Ip,et(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}setLinkActive(t,e){et(Yp(this,Ip))&&this.mutate(()=>{dt(t,0,Yp(this,Ip).length-1)&&this.helper.removeClass(this.activeClassName,Yp(this,Ip)[t]),dt(e,0,Yp(this,Ip).length-1)&&this.helper.setClass(this.activeClassName,Yp(this,Ip)[e])})}startTask(){Yp(this,Op).stop(),this.args.autoTimeout&&Yp(this,Op).start()}}Sp=new WeakMap,Pp=new WeakMap,Ip=new WeakMap,Op=new WeakMap,Np=new WeakMap,Hp=new WeakMap,_p=new WeakMap,Dp=new WeakMap,Rp=new WeakMap,$p=new WeakMap,Fp=new WeakMap,Bp=new WeakMap,qp=new WeakMap,zp=new WeakMap,jp=new WeakMap,Vp=new WeakMap;var Jp,Qp,tv,ev,iv,sv,nv,rv,ov=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},hv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},av=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class lv extends eh{constructor(t,e){super({props:{targets:{corrector:Ct}}}),this.targets=Ct(" > *"),this.in=ft(".{prefix}-switch-animation-default-in",t),this.out=ft(".{prefix}-switch-animation-default-out",t),this.timeout=null!=e?e:300,this.links="",this.switch="",this.autoTimeout=-1,this.height="auto",this.loop=!1}}class uv{constructor(t){this.attribute=(null!=t?t:"cui")+"-switch"}getStyle(){return null}get(t,e){return new cv(t,e,this.attribute)}}class cv extends Uo{constructor(t,e,i){super("CuiSwitchHandler",t,i,new lv(e.setup.prefix,e.setup.animationTime),e),Jp.set(this,void 0),Qp.set(this,void 0),tv.set(this,void 0),ev.set(this,void 0),iv.set(this,void 0),sv.set(this,void 0),nv.set(this,void 0),rv.set(this,void 0),hv(this,Jp,[]),hv(this,Qp,-1),hv(this,tv,[]),hv(this,ev,[]),hv(this,sv,null),hv(this,nv,hv(this,rv,[])),hv(this,iv,new kl(this.args.autoTimeout,!0,this.switch.bind(this,"next")))}onInit(){hv(this,sv,this.onEvent(L,this.onPushSwitch.bind(this))),this.parseArguments(),this.getTargets(),this.getActiveIndex(),this.getSwitches(),this.setSwitchesActive(av(this,Qp)),this.setLinkActive(-1,av(this,Qp)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(av(this,Jp)[av(this,Qp)]))}),hv(this,iv,new kl(this.args.autoTimeout,!0,this.switch.bind(this,"next"))),this.startTask()}onUpdate(){this.parseArguments(),this.getTargets(),this.getSwitches(),this.setSwitchesActive(av(this,Qp)),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(av(this,Jp)[av(this,Qp)]))}),this.startTask()}onDestroy(){av(this,iv).stop(),this.detachEvent(L,av(this,sv))}onMutation(t){this.getTargets(),this.mutate(()=>{this.helper.setStyle(this.element,"height",this.getElementHeight(av(this,Jp)[av(this,Qp)]))})}switch(t){return ov(this,void 0,void 0,(function*(){if(this.isLocked)return!1;this.getSwitches(),this.getActiveIndex();let e=kt(t,av(this,Qp),av(this,Jp).length);if(!this.args.loop&&("next"===t&&0===e||"prev"===t&&0===av(this,Qp)))return this.logInfo("Switch blocked by loop settings","switch"),!1;if(e==av(this,Qp)||e<0||e>=av(this,Jp).length)return this.logWarning(`Index ${t} is not within the suitable range`,"switch"),!1;this.isLocked=!0,this.setSwitchesActive(e);let i=av(this,Jp)[e];return yield this.actionsHelper.performSwitchAction(i,av(this,Qp)>-1?av(this,Jp)[av(this,Qp)]:null,av(this,nv),av(this,rv),()=>{i.classList.add(this.activeClassName),av(this,Qp)>-1&&av(this,Jp)[av(this,Qp)].classList.remove(this.activeClassName),this.setLinkActive(av(this,Qp),e),this.helper.setStyle(this.element,"height",this.getElementHeight(i)),this.startTask(),this.isLocked=!1},this.args.timeout),this.emitEvent(S,{timestamp:Date.now(),index:e}),!0}))}onPushSwitch(t){this.switch(t)}getActiveIndex(){hv(this,Qp,et(av(this,Jp))?av(this,Jp).findIndex(t=>this.helper.hasClass(this.activeClassName,t)):-1)}getElementHeight(t){return et(this.args.height)&&"auto"!==this.args.height?this.args.height:mt(t)+"px"}parseArguments(){hv(this,nv,ki.get(this.args.in)),hv(this,rv,ki.get(this.args.out)),hv(this,tv,et(this.args.links)?[...document.querySelectorAll(this.args.links)]:[])}getTargets(){let t=this.element.querySelectorAll(this.args.targets);hv(this,Jp,t.length>0?[...t]:[])}getSwitches(){let t=et(this.args.switch)?document.querySelectorAll(this.args.switch):null;hv(this,ev,[]),t&&t.forEach(t=>{av(this,ev).push(t)})}setLinkActive(t,e){et(av(this,tv))&&(dt(t,0,av(this,tv).length-1)&&this.helper.removeClass(this.activeClassName,av(this,tv)[t]),dt(e,0,av(this,tv).length-1)&&this.helper.setClass(this.activeClassName,av(this,tv)[e]))}setSwitchesActive(t){av(this,ev).forEach(e=>{this.emitLinkSwitch(e.$cuid,t)})}emitLinkSwitch(t,e){et(t)&&this.utils.bus.emit(L,t,e)}startTask(){av(this,iv).stop(),this.args.autoTimeout&&av(this,iv).start()}}Jp=new WeakMap,Qp=new WeakMap,tv=new WeakMap,ev=new WeakMap,iv=new WeakMap,sv=new WeakMap,nv=new WeakMap,rv=new WeakMap;var dv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))};class pv extends eh{constructor(){super(),this.index="",this.target="",this.prevent=!1,this.stopPropagation=!1,this.targets="li > a",this.isList=!1}}class vv{constructor(t){this.attribute=(null!=t?t:"cui")+"-switcher"}getStyle(){return null}get(t,e){return new fv(t,e,this.attribute)}}class fv extends jo{constructor(t,e,i){super("CuiSwitcherHandler",t,i,new pv,e),this.onClickEvent=this.onClickEvent.bind(this),this.addModule(new hh(this.element,this.args,this.onClickEvent.bind(this)))}onHandle(){return dv(this,void 0,void 0,(function*(){return!0}))}onRefresh(){return dv(this,void 0,void 0,(function*(){return!0}))}onRemove(){return dv(this,void 0,void 0,(function*(){return!0}))}getTargetCuid(){let t=null;et(this.args.target)||(t=null);let e=document.querySelector(this.args.target);return et(e)&&(t=e.$cuid),t}onClickEvent(t){const e=this.getTargetCuid();e&&(this.args.isList||"UL"===this.element.tagName?this.handleListClick(t,e):this.handleItemClick(t,e))}handleItemClick(t,e){this.args.index?this.utils.bus.emit(L,e,this.args.index):this._log.warning("Switch cannot be performed since component doesn't specify index")}handleListClick(t,e){const i=Et(this.args.targets);if(!t.target.matches(i))return;const s=[...this.element.querySelectorAll(this.args.targets)].findIndex(e=>e===t.target);s<0||this.utils.bus.emit(L,e,s)}}var gv,wv,mv,yv,kv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},bv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Mv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Cv extends eh{constructor(){super({main:"action"}),this.action="",this.target="",this.prevent=!1,this.stopPropagation=!1}}class Ev{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new Wv(t,e,this.attribute)}}class Wv extends jo{constructor(t,e,i){super("CuiToggleHandler",t,i,new Cv,e),gv.set(this,void 0),wv.set(this,void 0),mv.set(this,void 0),yv.set(this,void 0),bv(this,gv,this.element),bv(this,wv,e),bv(this,mv,null),bv(this,yv,[]),this.addModule(new hh(t,this.args,this.onClick.bind(this)))}onHandle(){return kv(this,void 0,void 0,(function*(){return bv(this,gv,this.getTarget()),bv(this,yv,ki.get(this.args.action)),bv(this,mv,this.onEvent(T,this.toggle.bind(this))),!0}))}onRefresh(){return kv(this,void 0,void 0,(function*(){return bv(this,gv,this.getTarget()),bv(this,yv,ki.get(this.args.action)),!0}))}onRemove(){return kv(this,void 0,void 0,(function*(){return this.detachEvent(T,Mv(this,mv)),!0}))}toggle(){Mv(this,gv)?(Mv(this,yv).forEach(t=>t.toggle(Mv(this,gv),Mv(this,wv))),this.emitEvent(x,{action:this.args.action,target:Mv(this,gv),timestamp:Date.now()})):this.logError("Target in not provided","toggle")}onClick(t){this.toggle()}getTarget(){var t;return this.args.target&&null!==(t=document.querySelector(this.args.target))&&void 0!==t?t:this.element}}gv=new WeakMap,wv=new WeakMap,mv=new WeakMap,yv=new WeakMap;var Av,Tv,xv,Lv,Sv,Pv,Iv,Ov=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Nv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _v extends eh{constructor(t){super({main:"content"}),this.content="",this.width=150,this.margin=8,this.timeout=2e3,this.pos="",this.action=ft(".{prefix}-animation-tooltip-in",t)}}class Dv{constructor(t){Av.set(this,void 0),Nv(this,Av,null!=t?t:"cui"),this.attribute=Hv(this,Av)+"-tooltip"}getStyle(){return null}get(t,e){return new Rv(t,this.attribute,e,Hv(this,Av))}}Av=new WeakMap;class Rv extends jo{constructor(t,e,i,s){super("CuiTooltipHandler",t,e,new _v(s),i),Tv.set(this,void 0),xv.set(this,void 0),Lv.set(this,void 0),Sv.set(this,void 0),Pv.set(this,void 0),Iv.set(this,void 0),Nv(this,Tv,void 0),Nv(this,Pv,[]),Nv(this,Sv,ft("{prefix}-tooltip-data",s)),Nv(this,xv,8),Nv(this,Lv,new pl),Hv(this,Lv).setPreferred("top-center"),Nv(this,Iv,new kl(this.args.timeout,!1,this.removeTooltip.bind(this))),this.addModule(new Al(this.element,this.onHover.bind(this)))}onHandle(){return Ov(this,void 0,void 0,(function*(){return this.getDataFromArgs(),Hv(this,Iv).setTimeout(this.args.timeout),!0}))}onRefresh(){return Ov(this,void 0,void 0,(function*(){return this.getDataFromArgs(),Hv(this,Iv).setTimeout(this.args.timeout),!0}))}onRemove(){return Ov(this,void 0,void 0,(function*(){return this.removeTooltip(),!0}))}onHover(t){t.isHovering?this.createTooltip():this.removeTooltip()}createTooltip(){if(et(Hv(this,Tv))||!et(this.args.content))return;const t=this.element.getBoundingClientRect();Nv(this,Tv,new ys("div").setClasses(Hv(this,Sv)).build()),Hv(this,Tv).textContent=this.args.content,Hv(this,Tv).style.maxWidth=this.args.width+"px",document.body.appendChild(Hv(this,Tv)),this.mutate(()=>{if(!Hv(this,Tv))return;const e=Hv(this,Tv).getBoundingClientRect();Hv(this,Lv).setMargin(Hv(this,xv));try{let[i,s]=Hv(this,Lv).calculate(t,e);Hv(this,Tv).style.top=s+"px",Hv(this,Tv).style.left=i+"px",this.toggleActions(),Hv(this,Iv).start()}catch(t){this.logError(t.message,"createTooltip",t)}})}removeTooltip(){Hv(this,Iv).stop(),et(Hv(this,Tv))&&this.mutate(()=>{Hv(this,Tv).remove(),Nv(this,Tv,void 0)})}getDataFromArgs(){Hv(this,Lv).setMargin(this.args.margin),Hv(this,Lv).setStatic(this.args.pos),Nv(this,Pv,ki.get(this.args.action))}toggleActions(){Hv(this,Tv)&&Hv(this,Pv).forEach(t=>{t.toggle(Hv(this,Tv))})}}Tv=new WeakMap,xv=new WeakMap,Lv=new WeakMap,Sv=new WeakMap,Pv=new WeakMap,Iv=new WeakMap;var $v,Fv=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Bv=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qv=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};$v=new WeakMap;const zv="0.4.3";window.cuiInit=new class{constructor(){$v.set(this,void 0),Bv(this,$v,!1)}init(t){var e,i;return Fv(this,void 0,void 0,(function*(){if(qv(this,$v))return console.log("Module is already initialized"),!1;const s=new hs;let n=[];try{n=function(t){var e;let i=!t||t.autoLight,s=!t||t.autoPrint;return[new Bn({autoLight:i}),new Dr({autoPrint:s}),new xn({}),new Qs,new cr,new Jr({}),new wo({}),new Ys,new Ir({timeout:t.notifcationTimeout}),new ln(null!==(e=t.focusSetup)&&void 0!==e?e:{})]}({autoLight:!0,autoPrint:!0})}catch(t){return console.error("An error occured during download plugin module"),console.error(t),!1}let r=[];try{r=function(t){let e=null==t?void 0:t.prefix;return[new fu(e),new Dv(e),new fa(e),new xp(e),new bd(e),new Rd(e),new Lc(e),new Ca(e),new Ev(e),new Ba(e),new Au(e),new gh(e),new jl(e),new bc(e),new uv(e),new vv(e),new cu(e),new Gp(e),new na(e),new Pa(e),new yp(e),new wd(e),new Yc(e)]}({prefix:null===(e=t.setup)||void 0===e?void 0:e.prefix})}catch(t){return console.error("An error occured during download components module"),console.error(t),!1}let o=n;t.plugins&&(o=Object.assign(Object.assign({},n),t.plugins));let h=yield s.init(Object.assign(Object.assign({},t),{plugins:o,components:et(t.components)?[...r,...t.components]:r}));return h.result?(Bv(this,$v,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(i=h.message)&&void 0!==i?i:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}}])}));
//# sourceMappingURL=index.min.js.map