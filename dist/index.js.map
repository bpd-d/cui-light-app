{"version":3,"sources":["webpack://cui-light-app/webpack/universalModuleDefinition","webpack://cui-light-app/webpack/bootstrap","webpack://cui-light-app/./src/core/models/errors.ts","webpack://cui-light-app/./src/core/utils/statics.ts","webpack://cui-light-app/./src/core/utils/functions.ts","webpack://cui-light-app/./src/core/models/setup.ts","webpack://cui-light-app/./src/core/utils/logger.ts","webpack://cui-light-app/./src/core/factories/logger.ts","webpack://cui-light-app/./src/core/utils/api.ts","webpack://cui-light-app/./src/core/observers/mutations.ts","webpack://cui-light-app/./src/core/utils/interactions.ts","webpack://cui-light-app/./src/core/factories/interactions.ts","webpack://cui-light-app/./src/core/utils/dictionary.ts","webpack://cui-light-app/./src/core/managers/cache.ts","webpack://cui-light-app/./src/core/bus/handlers.ts","webpack://cui-light-app/./src/core/bus/executors.ts","webpack://cui-light-app/./src/core/bus/bus.ts","webpack://cui-light-app/./src/core/styles/appender.ts","webpack://cui-light-app/./src/core/handlers/colors.ts","webpack://cui-light-app/./src/core/managers/development.ts","webpack://cui-light-app/./src/core/models/utils.ts","webpack://cui-light-app/./src/core/helpers/helpers.ts","webpack://cui-light-app/./src/core/utils/actions.ts","webpack://cui-light-app/./src/app/managers/element.ts","webpack://cui-light-app/./src/app/helpers/collection.ts","webpack://cui-light-app/./src/app/managers/collection.ts","webpack://cui-light-app/./src/app/managers/plugins.ts","webpack://cui-light-app/./src/app/instance.ts","webpack://cui-light-app/./src/core/animation/definitions.ts","webpack://cui-light-app/./src/app/initializer.ts","webpack://cui-light-app/./src/core/utils/aria.ts","webpack://cui-light-app/./src/core/handlers/base.ts","webpack://cui-light-app/./src/components/accordion/accordion.ts","webpack://cui-light-app/./src/core/animation/animators.ts","webpack://cui-light-app/./src/core/animation/engine.ts","webpack://cui-light-app/./src/components/banner/banner.ts","webpack://cui-light-app/./src/core/builders/icon.ts","webpack://cui-light-app/./src/components/circle/circle.ts","webpack://cui-light-app/./src/components/close/close.ts","webpack://cui-light-app/./src/components/cover/cover.ts","webpack://cui-light-app/./src/components/dialog/dialog.ts","webpack://cui-light-app/./src/core/listeners/hover.ts","webpack://cui-light-app/./src/core/position/evaluator.ts","webpack://cui-light-app/./src/core/position/calculator.ts","webpack://cui-light-app/./src/core/utils/task.ts","webpack://cui-light-app/./src/components/drop/drop.ts","webpack://cui-light-app/./src/core/listeners/move.ts","webpack://cui-light-app/./src/components/float/helpers.ts","webpack://cui-light-app/./src/components/float/float.ts","webpack://cui-light-app/./src/components/icon/icon.ts","webpack://cui-light-app/./src/core/observers/intersection.ts","webpack://cui-light-app/./src/components/intersection/intersection.ts","webpack://cui-light-app/./src/components/offcanvas/offcanvas.ts","webpack://cui-light-app/./src/core/models/elements.ts","webpack://cui-light-app/./src/core/listeners/scroll.ts","webpack://cui-light-app/./src/components/offset/modes.ts","webpack://cui-light-app/./src/components/offset/offset.ts","webpack://cui-light-app/./src/components/open/open.ts","webpack://cui-light-app/./src/components/resize/resize.ts","webpack://cui-light-app/./src/components/scroll/scroll.ts","webpack://cui-light-app/./src/core/intersection/intersection.ts","webpack://cui-light-app/./src/components/scrollspy/mode.ts","webpack://cui-light-app/./src/components/scrollspy/scrollspy.ts","webpack://cui-light-app/./src/core/builders/element.ts","webpack://cui-light-app/./src/core/handlers/drag/detectors.ts","webpack://cui-light-app/./src/core/handlers/drag/drag.ts","webpack://cui-light-app/./src/components/sortable/sortable.ts","webpack://cui-light-app/./src/components/spinner/spinner.ts","webpack://cui-light-app/./src/components/switch/slider.ts","webpack://cui-light-app/./src/components/switch/switch.ts","webpack://cui-light-app/./src/components/switch/switcher.ts","webpack://cui-light-app/./src/components/toggle/toggle.ts","webpack://cui-light-app/./src/components/tooltip/tooltip.ts","webpack://cui-light-app/./src/components/module.ts","webpack://cui-light-app/./src/plugins/alert/builder.ts","webpack://cui-light-app/./src/plugins/alert/handler.ts","webpack://cui-light-app/./src/plugins/alert/alert.ts","webpack://cui-light-app/./src/plugins/click/click.ts","webpack://cui-light-app/./src/plugins/focus/focus.ts","webpack://cui-light-app/./src/plugins/keys/listener.ts","webpack://cui-light-app/./src/plugins/keys/observer.ts","webpack://cui-light-app/./src/plugins/keys/keys.ts","webpack://cui-light-app/./src/core/listeners/media.ts","webpack://cui-light-app/./src/plugins/light/light.ts","webpack://cui-light-app/./src/plugins/move/observer.ts","webpack://cui-light-app/./src/plugins/move/move.ts","webpack://cui-light-app/./src/plugins/notification/helpers.ts","webpack://cui-light-app/./src/plugins/notification/builder.ts","webpack://cui-light-app/./src/plugins/notification/notification.ts","webpack://cui-light-app/./src/plugins/print/print.ts","webpack://cui-light-app/./src/core/models/colors.ts","webpack://cui-light-app/./src/plugins/properties/colors.ts","webpack://cui-light-app/./src/plugins/properties/setter.ts","webpack://cui-light-app/./src/plugins/properties/handler.ts","webpack://cui-light-app/./src/plugins/properties/properties.ts","webpack://cui-light-app/./src/plugins/resize/observer.ts","webpack://cui-light-app/./src/plugins/resize/resize.ts","webpack://cui-light-app/./src/plugins/toast/handler.ts","webpack://cui-light-app/./src/plugins/toast/toast.ts","webpack://cui-light-app/./src/plugins/module.ts","webpack://cui-light-app/./src/app/init.ts","webpack://cui-light-app/./src/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cui-light-app\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cui-light-app\"] = factory();\n\telse\n\t\troot[\"cui-light-app\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class ErrorBase extends Error {\r\n    constructor(name: string, message?: string,) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, new.target.prototype);\r\n        this.name = name;\r\n    }\r\n}\r\n\r\nexport class ItemNotFoundError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"ItemNotFoundError\", message);\r\n    }\r\n}\r\n\r\nexport class ArgumentError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\n\r\nexport class CuiBusError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\n\r\nexport class CuiInstanceInitError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"CuiInstanceInitError\", message);\r\n    }\r\n}\r\n\r\nexport class CuiScrollSpyOutOfRangeError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"CuiScrollSpyOutOfRangeError\", message);\r\n    }\r\n}\r\n\r\n\r\nexport class RegisterElementError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"RegisterElementError\", message);\r\n    }\r\n}\r\n\r\nexport class AnimatorError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"AnimatorError\", message);\r\n    }\r\n}\r\n\r\nexport class CSSVariableError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"CSSVariableError\", message);\r\n    }\r\n}\r\n\r\nexport class CuiColorError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"CuiColorError\", message);\r\n    }\r\n}\r\n\r\nexport class CuiPositionError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"CuiPositionError\", message);\r\n    }\r\n}","import { CuiLogLevel } from \"./types\";\r\nimport { CuiColorPair } from \"../models/colors\";\r\nimport { counter } from \"./functions\";\r\nexport const CUID_ATTRIBUTE = \"cuid\";\r\n\r\nexport const CLASSES = {\r\n    dark: 'dark',\r\n    animProgress: 'animation-progress',\r\n    print: 'print',\r\n    active: 'active',\r\n    swipingOn: \"swiping-on\",\r\n    selectionOff: \"selection-off\",\r\n}\r\n\r\nexport const ICONS: any = {\r\n    close: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 1.9999999,1.9999999 18,18\\\"></path><path d=\\\"M 18,1.9999999 1.9999999,18\\\"></path></svg>\",\r\n    accordion: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018\\\"></path></svg>\",\r\n    special_menu: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path class=\\\"menu_handle_2\\\" d=\\\"M 1,10 H 19\\\"></path><path class=\\\"menu_handle_1\\\" d=\\\"M 1,4.8571429 H 19\\\"></path><path  class=\\\"menu_handle_3\\\" d=\\\"M 1,15.142857 H 19\\\"></path></svg>\",\r\n    special_fail: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-fail\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z\\\"></path><path class=\\\"arm_1\\\" d=\\\"M 28.536809,28.536809 71.342023,71.342023\\\"></path><path class=\\\"arm_2\\\" d=\\\"M 71.342023,28.536809 28.536809,71.342023\\\"></path></svg>\",\r\n    special_success: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-success\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z\\\"></path><path class=\\\"arm\\\" d=\\\"M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023\\\"></path></svg>\",\r\n};\r\n\r\nexport const COLORS = ['red', 'green', 'blue', 'alpha']\r\n\r\nexport const CSS_APP_BACKGROUND_COLORS: CuiColorPair = {\r\n    light: '--cui-color-light-app-background',\r\n    dark: '--cui-color-dark-app-background'\r\n}\r\n\r\nexport const CSS_COMPONENT_BACKGROUND_COLORS: CuiColorPair = {\r\n    light: '--cui-color-light-background',\r\n    dark: '--cui-color-dark-background '\r\n}\r\n\r\nexport const CSS_COMPONENT_BORDER_COLORS: CuiColorPair = {\r\n    light: '--cui-color-light-border',\r\n    dark: '--cui-color-dark-border'\r\n}\r\n\r\nexport const CSS_THEMES = {\r\n    light: {\r\n        base: '--cui-color-light-base',\r\n        muted: '--cui-color-light-muted',\r\n        active: '--cui-color-light-active'\r\n    },\r\n    dark: {\r\n        base: '--cui-color-dark-base',\r\n        muted: '--cui-color-dark-muted',\r\n        active: '--cui-color-dark-active'\r\n    },\r\n    accent: {\r\n        base: '--cui-color-primary',\r\n        muted: '--cui-color-primary-muted',\r\n        active: '--cui-color-primary-active'\r\n    },\r\n    secondary: {\r\n        base: '--cui-color-secondary',\r\n        muted: '--cui-color-secondary-muted',\r\n        active: '--cui-color-secondary-active'\r\n    },\r\n    success: {\r\n        base: '--cui-color-success',\r\n        muted: '--cui-color-success-muted',\r\n        active: '--cui-color-success-active'\r\n    },\r\n    warning: {\r\n        base: '--cui-color-warning',\r\n        muted: '--cui-color-warning-muted',\r\n        active: '--cui-color-warning-active'\r\n    },\r\n    error: {\r\n        base: '--cui-color-error',\r\n        muted: '--cui-color-error-muted',\r\n        active: '--cui-color-error-active'\r\n    }\r\n}\r\n\r\nexport const SCOPE_SELECTOR = \":scope \";\r\n\r\nexport const CSS_VARIABLES: any = {\r\n    fontSize: \"--{prefix}-font-size\",\r\n    lineHeight: \"--{prefix}-line-height\",\r\n    animationTime: \"--{prefix}-animation-time\",\r\n    animationTimeLong: \"--{prefix}-animation-time-long\",\r\n    animationTimeShort: \"--{prefix}-animation-time-short\",\r\n    colorLightAppBackground: \"--{prefix}-color-light-app-background\",\r\n    colorLightBackground: \"--{prefix}-color-light-background\",\r\n    colorLightBorder: \"--{prefix}-color-light-border\",\r\n    colorLightBase: \"--{prefix}-color-light-base\",\r\n    colorLightActive: \"--{prefix}-color-light-active\",\r\n    colorLightMuted: \"--{prefix}-color-light-muted\",\r\n    colorDarkAppBackground: \"--{prefix}-color-dark-app-background\",\r\n    colorDarkBackground: \"--{prefix}-color-dark-background\",\r\n    colorDarkBorder: \"--{prefix}-color-dark-border\",\r\n    colorDarkBase: \"--{prefix}-color-dark-base\",\r\n    colorDarkActive: \"--{prefix}-color-dark-active\",\r\n    colorDarkMuted: \"--{prefix}-color-dark-muted\",\r\n    colorAccent: \"--{prefix}-color-primary\",\r\n    colorAccentActive: \"--{prefix}-color-primary-active\",\r\n    colorAccentMuted: \"--{prefix}-color-primary-muted\",\r\n    colorAccentShade: \"--{prefix}-color-primary-shade\",\r\n    colorAccentShadeDark: \"--{prefix}-color-primary-shade-dark\",\r\n    colorSecondary: \"--{prefix}-color-secondary\",\r\n    colorSecondaryActive: \"--{prefix}-color-secondary-active\",\r\n    colorSecondaryMuted: \"--{prefix}-color-secondary-muted\",\r\n    colorSecondaryShade: \"--{prefix}-color-secondary-shade\",\r\n    colorSecondaryShadeDark: \"--{prefix}-color-secondary-shade-dark\",\r\n    colorWarning: \"--{prefix}-color-warning\",\r\n    colorWarningActive: \"--{prefix}-color-warning-active\",\r\n    colorWarningMuted: \"--{prefix}-color-warning-muted\",\r\n    colorWarningShade: \"--{prefix}-color-warning-shade\",\r\n    colorWarningShadeDark: \"--{prefix}-color-warning-shade-dark\",\r\n    colorSuccess: \"--{prefix}-color-success\",\r\n    colorSuccessActive: \"--{prefix}-color-success-active\",\r\n    colorSuccessMuted: \"--{prefix}-color-success-muted\",\r\n    colorSuccessShade: \"--{prefix}-color-success-shade\",\r\n    colorSuccessShadeDark: \"--{prefix}-color-success-shade-dark\",\r\n    colorError: \"--{prefix}-color-error\",\r\n    colorErrorActive: \"--{prefix}-color-error-active\",\r\n    colorErrorMuted: \"--{prefix}-color-error-muted\",\r\n    colorErrorShade: \"--{prefix}-color-error-shade\",\r\n    colorErrorShadeDark: \"--{prefix}-color-error-shade-dark\",\r\n    inputBackground: \"--{prefix}-input-background-color\",\r\n    colorShade: \"--{prefix}-color-shade\",\r\n    colorShadeDarker: \"--{prefix}-color-shade-darker\",\r\n    colorShadeLight: \"--{prefix}-color-shade-light\",\r\n    colorShadeLighter: \"--{prefix}-color-shade-light-lighter\",\r\n    outline: \"--{prefix}-outline\",\r\n    borderRadius: \"--{prefix}-border-radius\",\r\n    padding: \"--{prefix}-padding\",\r\n    margin: \"--{prefix}-margin\",\r\n    scrollbarWidth: \"--{prefix}-scrollbar-width\",\r\n    componentSpace: \"--{prefix}-component-space\",\r\n    accordionIcon: \"--{prefix}-accordion-icon\"\r\n}\r\n\r\n\r\nexport class STATICS {\r\n    static logLevel: CuiLogLevel = 'none';\r\n    static prefix: string = 'cui';\r\n}\r\n\r\nexport const EVENTS = {\r\n    INSTANCE_INITIALIZED: 'instance-initialized',\r\n    INSTANCE_FINISHED: 'instance-finished',\r\n    RESIZE: \"resize\",\r\n    OPEN: \"open\",\r\n    OPENED: \"opened\",\r\n    CLOSE: \"close\",\r\n    CLOSED: \"closed\",\r\n    TOGGLE: \"toggle\",\r\n    TOGGLED: 'toggled',\r\n    SWITCH: \"switch\",\r\n    SWITCHED: \"switched\",\r\n    ON_SCROLL: \"scroll\",\r\n    TARGET_CHANGE: 'targetchange',\r\n    INTERSECTION: 'intersection',\r\n    KEYDOWN: 'keydown',\r\n    SCROLLBY: 'scrollby',\r\n    WINDOW_CLICK: 'windowclick',\r\n    OFFSET: 'offset',\r\n    PROGRESS_CHANGE: \"progresschange\",\r\n    PROGRESS_CHANGED: \"progresschanged\",\r\n    CHANGE: \"change\",\r\n    CHANGED: \"changed\",\r\n    GLOBAL_MOVE: \"globalmove\",\r\n    MOVE_LOCK: \"movelock\",\r\n    PAUSE: \"pause\",\r\n    PAUSED: \"paused\",\r\n    SORTED: \"sorted\",\r\n    SORT_START: \"sortstart\",\r\n    TOAST: \"toast\",\r\n    TOAST_SHOW: \"toastshow\",\r\n    TOAST_HIDDEN: \"toasthidden\",\r\n    ALERT: \"alert\",\r\n    GESTURE_DOWN: \"gesture-down\",\r\n    GESTURE_UP: \"gesture-up\",\r\n    GESTURE_LEFT: \"gesture-left\",\r\n    GESTURE_RIGHT: \"gesture-right\",\r\n    NOTIFY: \"notify\",\r\n    NOTIFIED: \"notified\",\r\n}\r\n\r\n// export const GLOBAL_EVENTS = [EVENTS.ALERT, EVENTS.TOAST, EVENTS.KEYDOWN, EVENTS.MOVE_LOCK, EVENTS.GLOBAL_MOVE, EVENTS.RESIZE]\r\n\r\nexport const OBSERVABLE_SCROLL = \"SCROLL\";\r\nexport const OBSERVABLE_INTERSECTION = \"INTERSECTION\";\r\nexport const COMPONENTS_COUNTER = counter();","import { CuiLightMode, CuiWindowSize } from \"./types\";\r\nimport { ArgumentError } from \"../models/errors\";\r\nimport { CuiElement } from \"../models/interfaces\";\r\nimport { COMPONENTS_COUNTER } from \"./statics\";\r\n\r\n/**\r\n * Checks if value is defined an is not null\r\n * Additionally with type check it can check value if it is not empty string or collection or object\r\n * \r\n * @param val - value\r\n * @param typecheck - default true - additional check whether value is not empty (string, collection, object)\r\n * @returns whether value passed all conditions\r\n */\r\nexport function is(val: any, typecheck: boolean = true): boolean {\r\n    if (typeof val !== 'undefined' && val !== null) {\r\n        if (!typecheck) {\r\n            return true;\r\n        } else {\r\n            return !isEmpty(val)\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Checks if value is empty string, array or object\r\n *\r\n *\r\n * @param val - value\r\n * @returns whether value passed all conditions\r\n */\r\nexport function isEmpty(val: any): boolean {\r\n    if (typeof val === \"string\") {\r\n        return val.length === 0\r\n    }\r\n    if (typeof val === \"boolean\") {\r\n        return val;\r\n    }\r\n    else if (Array.isArray(val)) {\r\n        return val.length === 0\r\n    }\r\n    return false\r\n}\r\n\r\nexport function getName(prefix: string, name: string) {\r\n    if (!is(prefix) || !is(name)) {\r\n        throw new ArgumentError(\"Missing argument value\")\r\n    }\r\n    return `${prefix}-${name}`\r\n}\r\n\r\nexport function sleep(timeout: number): Promise<boolean> {\r\n    return new Promise(resolve => setTimeout(() => {\r\n        resolve(true)\r\n    }, timeout));\r\n}\r\n\r\n/**\r\n * Creates proper html element from given string\r\n * @param htmlString - string containing html\r\n */\r\nexport function createElementFromString(htmlString: string): Element | null {\r\n    if (!is(htmlString)) {\r\n        return null;\r\n    }\r\n    let template = document.createElement('template')\r\n    template.innerHTML = htmlString\r\n    return template.content.children.length > 0 ? template.content.children[0] : null;\r\n}\r\n\r\nexport function getMatchingAttribute(element: any, attributes: string[]): string | null {\r\n    let attr = null;\r\n    let len = attributes.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let attribute = attributes[i];\r\n        if (element.hasAttribute(attribute)) {\r\n            attr = attribute\r\n            break;\r\n        }\r\n    }\r\n    return attr;\r\n}\r\n\r\n// export function getMatchingAttributes(element: any, attributes: string[]): string[] {\r\n//     if (!element || !is(element.hasAttribute)) {\r\n//         return [];\r\n//     }\r\n//     return attributes.filter(a => {\r\n//         return element.hasAttribute(a);\r\n//     });\r\n// }\r\n\r\nexport function getRangeValue(value: number, min: number, max: number) {\r\n    if (value < min) {\r\n        return min;\r\n    } else if (value > max) {\r\n        return max;\r\n    }\r\n    return value;\r\n}\r\n\r\nexport function getRangeValueOrDefault(value: number | undefined, min: number, max: number, def: number) {\r\n    if (value === null || typeof value === 'undefined' || isNaN(value)) {\r\n        return def;\r\n    }\r\n    return getRangeValue(value, min, max)\r\n}\r\n\r\nexport function increaseValue(value: number, amount: number): number {\r\n    return amount < 0 || amount > 1 ? 0 : value + (value * amount);\r\n}\r\n\r\nexport function decreaseValue(value: number, amount: number): number {\r\n    return amount < 0 || amount > 1 ? 0 : value - (value * amount);\r\n}\r\n\r\nexport function clone(object: any): any {\r\n    if (!is(object)) {\r\n        return null;\r\n    }\r\n    return Object.assign({}, object);\r\n}\r\n\r\nexport function getSingleColorRatio(first: number, second: number, max: number): number {\r\n    return Math.abs(((first - second) / max) * 100)\r\n}\r\n\r\n/**\r\n * Creates string containg css selector for array of attributes\r\n * @param attributes - attributes values\r\n */\r\nexport function joinAttributesForQuery(attributes: string[]): string {\r\n    if (!is(attributes)) {\r\n        return \"\"\r\n    }\r\n    return `[${attributes.join('],[')}]`\r\n}\r\n\r\n/**\r\n * Checks light system light mode\r\n * @returns Light Mode - dark/light\r\n */\r\nexport function getSystemLightMode(): CuiLightMode {\r\n    return window.matchMedia &&\r\n        window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n}\r\n\r\n/**\r\n * Check print mode in the browser window\r\n * @returns true if window is displayed in print mode\r\n */\r\nexport function getSystemPrintMode(): boolean {\r\n    return window.matchMedia &&\r\n        window.matchMedia('print').matches;\r\n}\r\n\r\n/**\r\n * Verifies whether attributes exist and have some values\r\n * @param attributes attributes list\r\n */\r\nexport function are(...attributes: any[]): boolean {\r\n    if (!is(attributes)) {\r\n        return false\r\n    }\r\n    let c = attributes.length;\r\n    for (let i = 0; i < c; i++) {\r\n        if (!is(attributes[i])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function calcWindowSize(width: number): CuiWindowSize {\r\n    if (width <= 640) {\r\n        return 'small';\r\n    } else if (width > 640 && width <= 960) {\r\n        return \"medium\"\r\n    } else if (width > 960 && width <= 1200) {\r\n        return \"large\"\r\n    }\r\n    return 'xlarge';\r\n}\r\n\r\nexport function calcWindowSize2(width: number): CuiWindowSize {\r\n    let size: CuiWindowSize = \"none\";\r\n    if (width >= 640) {\r\n        size = 'small';\r\n    }\r\n    if (width >= 960) {\r\n        size = \"medium\";\r\n    }\r\n    if (width >= 1200) {\r\n        size = \"large\"\r\n    }\r\n\r\n    if (width >= 1600) {\r\n        size = 'xlarge';\r\n    }\r\n    return size;\r\n}\r\n\r\n/**\r\n * Creates object from string.\r\n * Supported syntaxes are:\r\n * - JSON\r\n * - single value\r\n * - key:value,value;key=value\r\n * \r\n * @param attribute - attribute value\r\n */\r\nexport function parseAttributeString(attribute: string | null): any {\r\n    let ret: any = {};\r\n    if (!is(attribute)) {\r\n        return ret;\r\n    }\r\n    //@ts-ignore - null already checked\r\n    ret = parseJsonString(attribute.trim())\r\n    if (!is(ret)) {\r\n        //@ts-ignore - null already checked\r\n        if (!attribute.includes(';') && !attribute.includes(':')) {\r\n            ret = attribute;\r\n        } else {\r\n            ret = {}\r\n            //@ts-ignore - null already checked\r\n            attribute.split(';').forEach(val => {\r\n                let sp = splitColon(val);\r\n                let tag = undefined;\r\n                let value = \"\";\r\n                if (sp.length < 2) {\r\n                    return;\r\n                }\r\n                tag = sp[0].trim();\r\n                value = sp[1].trim();\r\n                if (tag)\r\n                    ret[tag] = value.replace('U+0003B', ';');\r\n            })\r\n        }\r\n    }\r\n    return ret\r\n}\r\n\r\n/**\r\n * Creates object from JSON string\r\n* String must start with { and end with }\r\n *\r\n * @param attribute - attribute value\r\n * @returns object if string passes test, null otherwise\r\n */\r\n\r\nexport function parseJsonString(attribute: string): any | null {\r\n    let out = null;\r\n    if (is(attribute) && attribute.startsWith('{') && attribute.endsWith('}')) {\r\n        try {\r\n            out = jsonify(attribute);\r\n        } catch (e) {\r\n            console.error(prepLogString(\"An exception occured\", 'Functions', 'parseJsonString'), e)\r\n        }\r\n        return out;\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Creates object from JSON string\r\n * @param attribute - JSON string\r\n */\r\nexport function jsonify(attribute: string): any {\r\n    return attribute && attribute.length > 0 ? JSON.parse(attribute) : {}\r\n}\r\n\r\nexport function getOffsetTop(element: HTMLElement) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetTop - parseInt(getStyleValue(element, 'margin-top')) - parseInt(getStyleValue(element, 'padding-top')) - parseInt(getStyleValue(element, 'border-top-width'))\r\n    return val < 0 ? element.offsetTop : val;\r\n}\r\n\r\nexport function getOffsetLeft(element: HTMLElement) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetLeft - parseInt(getStyleValue(element, 'margin-left')) - parseInt(getStyleValue(element, 'padding-left')) - parseInt(getStyleValue(element, 'border-left-width'))\r\n    return val < 0 ? element.offsetLeft : val;\r\n}\r\n\r\nexport function getIntOrDefault(value: any, def: number): number {\r\n    let integer = parseInt(value);\r\n    return isNaN(integer) ? def : integer;\r\n}\r\n\r\nexport function getStyleValue(target: any, property: string): any {\r\n    if (!is(target) || !is(property)) {\r\n        return null;\r\n    }\r\n    if (target.currentStyle) {\r\n        return target.currentStyle[property];\r\n    } else if (window.getComputedStyle) {\r\n        return window.getComputedStyle(target, null).getPropertyValue(property)\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function prepLogString(message: string, component: string, functionName?: string) {\r\n    return `[${new Date().toLocaleString()}][${component ?? \"-\"}][${functionName ?? '-'}][${message}]`\r\n}\r\n\r\nexport function isInRange(value: number, min: number, max: number): boolean {\r\n    return is(value) && value >= min && value <= max;\r\n}\r\n\r\nexport function getActiveClass(prefix: string) {\r\n    return `${prefix ?? \"\"}-active`;\r\n}\r\n\r\nexport function parseAttribute(element: Element, attribute: string): any {\r\n    return are(element, attribute) ? parseAttributeString(element.getAttribute(attribute)) : null;\r\n}\r\n\r\n\r\n/**\r\n *  Checks whether string value contains synonym of true\r\n * @param value - string to check\r\n */\r\nexport function isStringTrue(value: string): boolean {\r\n    return is(value) ? ['y', 't', 'true', 'yes'].includes(value.toLowerCase()) : false\r\n}\r\n\r\nexport function boolStringOrDefault(prop: any, def: boolean): boolean {\r\n    return is(prop) ? isStringTrue(prop) : def;\r\n}\r\n\r\nexport function getStringOrDefault(value: any, def: string) {\r\n    return is(value) ? value.toLowerCase() : def;\r\n}\r\n\r\n/**\r\n * Checks whether device supports touch\r\n */\r\nexport function isTouchSupported(): boolean {\r\n    return ('ontouchstart' in window) ||\r\n        (navigator.maxTouchPoints > 0) ||\r\n        (navigator.msMaxTouchPoints > 0);\r\n}\r\n\r\n/**\r\n * Checks whether value is type of string\r\n * @param {any} value - value to be checked\r\n */\r\nexport function isString(value: any): boolean {\r\n    return typeof value === 'string';\r\n}\r\n\r\n\r\n/**\r\n * Replaces mask {prefix} with actual value in the string\r\n * @param {string} value - text containg a mask\r\n * @param {string} prefix - value to be put in place of mask\r\n */\r\nexport function replacePrefix(value: string, prefix: string): string {\r\n    return !is(value) ? value : value.replace(\"{prefix}\", prefix ?? \"\");\r\n}\r\n\r\n/**\r\n * Generates identifier for Cui element\r\n * \r\n * @param element - Cui element selector\r\n * @returns generated identifier\r\n */\r\nexport function generateCUID(element?: string) {\r\n    let starter = is(element) ? element : \"cui-element\"\r\n    return `${starter}-${COMPONENTS_COUNTER.next().value}`;\r\n}\r\n\r\n/**\r\n * Generates random string\r\n */\r\nexport function generateRandomString(): string {\r\n    let rand = getRandomInt(1, 1000)\r\n    let rand2 = getRandomInt(1, 100)\r\n    return `${Math.floor(Math.random() * rand2)}-${Math.floor(rand)}`;\r\n}\r\n/**\r\n * Generates random integer\r\n * @param min - min number\r\n * @param max - max number\r\n * @returns random integer\r\n */\r\nexport function getRandomInt(min: number, max: number): number {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\n\r\n\r\nexport function* counter() {\r\n    let idx = 0;\r\n    while (true) {\r\n        let reset = yield idx++;\r\n        if (reset || idx > 200000) {\r\n            idx = 0\r\n        }\r\n    }\r\n}\r\n\r\nexport function all<T>(array: T[], condition: (t: T) => boolean) {\r\n    return array.find((t: T) => !condition(t)) === null;\r\n}\r\n\r\nexport function getHandlerExtendingOrNull<T>(target: CuiElement, fName: string): T | null {\r\n    if (!is(target.$handlers)) {\r\n        return null;\r\n    }\r\n\r\n    for (let handler in target.$handlers) {\r\n\r\n        if (target.$handlers.hasOwnProperty(handler)) {\r\n            let h: any = target.$handlers[handler];\r\n            if (hasFunction(h, fName))\r\n                return h;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Checks whether property exists on the object and it is a function\r\n * @param obj - object\r\n * @param fName - property name\r\n */\r\nexport function hasFunction(obj: any, fName: string) {\r\n    return is(obj[fName]) && typeof obj[fName] === 'function'\r\n}\r\n\r\n/**\r\n * Gets closest parent element which is a cUI element\r\n * @param element \r\n */\r\nexport function getParentCuiElement(element: Element): Element | undefined {\r\n    if (!is(element)) {\r\n        return undefined;\r\n    }\r\n    let parent = element.parentElement as any;\r\n    return is(parent) && is(parent.$cuid) ? parent : getParentCuiElement(parent);\r\n}\r\n\r\n/**\r\n * Calculates element height by calculating childerns heights\r\n * @param element\r\n */\r\nexport function getChildrenHeight(element: Element): number {\r\n    let height: number = 0;\r\n    if (!element) {\r\n        return -1;\r\n    }\r\n    Array.from(element.children).forEach((child: Element) => {\r\n        height += child.getBoundingClientRect().height;\r\n    })\r\n    return height > 0 ? height + 4 : height;\r\n}\r\n\r\nexport function enumerateObject<T extends object>(object: T, callback: (property: string, value: any) => void) {\r\n    if (!are(object, callback)) {\r\n        return;\r\n    }\r\n    for (let prop in object) {\r\n        if (object.hasOwnProperty(prop)) {\r\n            callback(prop, object[prop]);\r\n        }\r\n    }\r\n}\r\n\r\nexport function round(value: number, decimalPlaces: number): number {\r\n    const multiplier = 10 ** decimalPlaces;\r\n    return Math.floor(value) / multiplier;\r\n}\r\n\r\nexport function calculateNextIndex(val: any, currentIndex: number, totalLength: number): number {\r\n    let idx = -1;\r\n    switch (val) {\r\n        case 'prev':\r\n            idx = currentIndex <= 0 ? totalLength - 1 : currentIndex - 1;\r\n            break;\r\n        case 'next':\r\n            idx = currentIndex < totalLength - 1 ? currentIndex + 1 : 0\r\n            break;\r\n        case 'first':\r\n            idx = 0;\r\n            break;\r\n        case 'last':\r\n            idx = totalLength - 1;\r\n        default:\r\n            idx = getIntOrDefault(val, -1);\r\n            break;\r\n    }\r\n    return idx;\r\n}\r\n\r\nexport function getFirstMatching<T>(array: T[], callback: (t: T, index: number) => boolean): T | undefined {\r\n    let count = array.length;\r\n    if (!array || count === 0) {\r\n        return undefined;\r\n    }\r\n\r\n    for (let idx = 0; idx < count; idx++) {\r\n        if (callback(array[idx], idx)) {\r\n            return array[idx];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function mapObject<T, V>(input: T, callback: (t: T) => V): V {\r\n    return callback(input);\r\n}\r\n\r\nexport function mapObjectArray<T, V>(input: T[], callback: (t: T) => V): V[] {\r\n    return input.map((item: T) => {\r\n        return mapObject(item, callback);\r\n    })\r\n}\r\n\r\n/**\r\n * Delays callback execution by specific time. Callback cannot be called again until previous execution finishes or was cancelled\r\n * @param callback - callback to execute\r\n * @param delayTime - time in ms that execution shall be delayed by\r\n * @returns Cancel callback\r\n */\r\nexport function delay(callback: (...args: any[]) => void, delayTime: number) {\r\n    if (!are(callback, delayTime)) {\r\n        throw new Error(\"[delay]: Input arguments are not correct\")\r\n    }\r\n    let id: any = null;\r\n    return function (...args: any[]) {\r\n        if (id === null) {\r\n            id = setTimeout(() => {\r\n                callback(...args);\r\n                id = null;\r\n            }, delayTime)\r\n        }\r\n        return function () {\r\n            if (id !== null) {\r\n                clearTimeout(id);\r\n                id = null;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function splitColon(text: string): string[] {\r\n    let ret: string[] = [];\r\n    if (!is(text)) {\r\n        return ret;\r\n    }\r\n    let split = text.split(\":\");\r\n    if (split.length === 1) {\r\n        return split;\r\n    }\r\n    let tag = split.shift();\r\n    // @ts-ignore tag is always defined\r\n    return [tag, split.join(\":\")];\r\n}","import { ICuiEventBusQueueSetup } from \"../bus/interfaces\";\r\nimport { CuiLogLevel, CuiInteractionsType } from \"../utils/types\";\r\nimport { ICuiDevelopmentTool } from \"./interfaces\";\r\n\r\ninterface CuiSetupCommon {\r\n    prefix?: string;\r\n    logLevel?: CuiLogLevel;\r\n    cacheSize?: number;\r\n    autoLightMode?: boolean;\r\n    animationTime?: number;\r\n    animationTimeShort?: number;\r\n    animationTimeLong?: number;\r\n    scrollThreshold?: number;\r\n    resizeThreshold?: number;\r\n    root: HTMLElement;\r\n}\r\n\r\nexport class CuiSetup implements CuiSetupCommon {\r\n    prefix: string;\r\n    logLevel?: CuiLogLevel;\r\n    cacheSize?: number;\r\n    autoLightMode?: boolean;\r\n    animationTime?: number;\r\n    animationTimeShort?: number;\r\n    animationTimeLong?: number;\r\n    scrollThreshold: number;\r\n    resizeThreshold: number;\r\n    plugins: any;\r\n    root: HTMLElement;\r\n\r\n    constructor() {\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.prefix = \"cui\";\r\n        this.plugins = {};\r\n        this.root = document.body\r\n    }\r\n\r\n    fromInit(init: CuiSetupInit): CuiSetup {\r\n        this.prefix = init.prefix ?? \"cui\";\r\n        this.logLevel = init.logLevel;\r\n        this.cacheSize = init.cacheSize;\r\n        this.autoLightMode = init.autoLightMode;\r\n        this.animationTime = init.animationTime;\r\n        this.animationTimeShort = init.animationTimeShort;\r\n        this.animationTimeLong = init.animationTimeLong;\r\n        this.scrollThreshold = init.scrollThreshold;\r\n        this.resizeThreshold = init.resizeThreshold;\r\n        this.root = init.root;\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\nexport class CuiSetupInit implements CuiSetupCommon {\r\n    prefix: string;\r\n    app: string;\r\n    interaction: CuiInteractionsType;\r\n    logLevel: CuiLogLevel;\r\n    cacheSize: number;\r\n    autoLightMode?: boolean;\r\n    animationTime: number;\r\n    animationTimeShort: number;\r\n    animationTimeLong: number;\r\n    scrollThreshold: number;\r\n    resizeThreshold: number;\r\n    busSetup?: ICuiEventBusQueueSetup[];\r\n    development: ICuiDevelopmentTool | undefined;\r\n    root: HTMLElement;\r\n    constructor() {\r\n        this.prefix = 'cui';\r\n        this.app = '$cui';\r\n        this.logLevel = 'warning';\r\n        this.interaction = 'async';\r\n        this.animationTime = 300;\r\n        this.animationTimeShort = 150;\r\n        this.animationTimeLong = 500;\r\n        this.cacheSize = 500;\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.root = document.body;\r\n        this.busSetup = undefined;\r\n        this.development = undefined;\r\n    }\r\n}","import { CuiLogLevel } from \"./types\";\r\nimport { ICuiLogger } from \"../models/interfaces\";\r\n\r\nexport class CuiLogger implements ICuiLogger {\r\n    level: CuiLogLevel\r\n    component: string;\r\n    id: string;\r\n    constructor(name: string, level: CuiLogLevel) {\r\n        this.level = level\r\n        this.component = name\r\n        this.id = \"-\";\r\n    }\r\n\r\n    setLevel(level: CuiLogLevel) {\r\n        this.level = level\r\n    }\r\n\r\n    setId(id: string) {\r\n        this.id = id\r\n    }\r\n    debug(message: string, functionName?: string): void {\r\n        if (this.level === 'debug') {\r\n            console.log(this.prepString(message, \"debug\", functionName))\r\n        }\r\n    }\r\n    error(message: string, functionName?: string): void {\r\n        if (this.level === 'error' || this.level === 'debug' || this.level === 'warning')\r\n            console.error(this.prepString(message, \"error\", functionName))\r\n    }\r\n\r\n    warning(message: string, functionName?: string): void {\r\n        if (this.level === 'warning' || this.level === 'debug')\r\n            console.warn(this.prepString(message, \"warning\", functionName))\r\n    }\r\n\r\n    exception(e: Error, functionName?: string): void {\r\n        console.error(this.prepString(`An exception occured: ${e.name}: ${e.message}`, \"exception\", functionName))\r\n        if (this.level === 'debug')\r\n            console.error(e.stack)\r\n    }\r\n\r\n    performance(callback: () => void, functionName?: string): void {\r\n        if (this.level !== 'debug') {\r\n            return;\r\n        }\r\n        let start = Date.now();\r\n        callback();\r\n        console.log(this.prepString(`Performance measure: ${Date.now() - start}ms`, \"performance\", functionName))\r\n    }\r\n\r\n    private prepString(message: string, level: string, functionName?: string) {\r\n        return `[${new Date().toLocaleString()}][${level}][${this.component}][${functionName ?? '-'}][${this.id}][${message}]`\r\n    }\r\n}","import { CuiLogger } from \"../utils/logger\";\r\nimport { CuiLogLevel } from \"../utils/types\";\r\nimport { ICuiLogger } from \"../models/interfaces\";\r\nimport { STATICS } from \"../utils/statics\";\r\n\r\n/**\r\n * \r\n */\r\nexport class CuiLoggerFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param name - component name\r\n     */\r\n    public static get(name: string, logLevel?: CuiLogLevel): ICuiLogger {\r\n        return new CuiLogger(name, logLevel ?? STATICS.logLevel)\r\n    }\r\n}","import { RegisterElementError } from \"../models/errors\";\r\nimport { ICuiComponent, CuiElement, CuiHTMLElement } from \"../models/interfaces\";\r\nimport { CuiUtils } from \"../models/utils\";\r\nimport { is, generateCUID, are, enumerateObject, parseAttribute } from \"./functions\";\r\nimport { CUID_ATTRIBUTE } from \"./statics\";\r\n\r\nexport function getMatchingComponents(node: any, components: ICuiComponent[]): ICuiComponent[] {\r\n    return components.filter(component => {\r\n        return node.hasAttribute && node.hasAttribute(component.attribute);\r\n    })\r\n}\r\n\r\nexport async function createCuiElement(node: any, components: ICuiComponent[], utils: CuiUtils): Promise<boolean> {\r\n    if (!are(node, components, utils)) {\r\n        return false;\r\n    }\r\n    let element = node as CuiHTMLElement;\r\n    if (!element.$cuid) {\r\n        element.$cuid = node.hasAttribute(CUID_ATTRIBUTE) ? node.getAttribute(CUID_ATTRIBUTE) : generateCUID(node.tagName);\r\n        node.setAttribute(CUID_ATTRIBUTE, element.$cuid);\r\n    }\r\n    for (let component of components) {\r\n        await createComponent(element, component, utils, parseAttribute(element, component.attribute))\r\n    }\r\n    return true;\r\n}\r\n\r\nexport async function destroyCuiElement(node: any): Promise<boolean> {\r\n    const element = node as CuiHTMLElement;\r\n    if (!element.$handlers) {\r\n        return false;\r\n    }\r\n    for (let name in element.$handlers) {\r\n        await destroyComponent(element, name);\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport function addCuiArgument<T extends object>(element: HTMLElement, cuiArg: string, args: T): boolean {\r\n    if (!are(cuiArg, args, element)) {\r\n        return false;\r\n    }\r\n    if (element.hasAttribute(cuiArg)) {\r\n        return false;\r\n    }\r\n    let argArr: string[] = [];\r\n    enumerateObject(args, (arg: string, value: string) => {\r\n        argArr.push(`${arg}: ${value}`);\r\n    })\r\n    element.setAttribute(cuiArg, argArr.join(\"; \"));\r\n    return true;\r\n\r\n}\r\n\r\n\r\nexport async function createComponent(node: CuiHTMLElement, component: ICuiComponent, utils: CuiUtils, args?: any): Promise<boolean> {\r\n    if (!node.$handlers) {\r\n        node.$handlers = {};\r\n    }\r\n    try {\r\n        let handler = component.get(node, utils);\r\n        node.$handlers[component.attribute] = handler;\r\n        node.$handlers[component.attribute].handle(args);\r\n    } catch (e) {\r\n        throw new RegisterElementError(`An error occured during [${component.attribute}] initialization: ${e.message}`);\r\n    }\r\n    return true;\r\n}\r\n\r\nexport async function updateComponent(node: CuiHTMLElement, component: string, args?: any): Promise<boolean> {\r\n    if (!node || !node.$handlers) {\r\n        return false;\r\n    }\r\n\r\n    let handler = node.$handlers[component];\r\n    if (!handler) {\r\n        return false;\r\n    }\r\n    try {\r\n        handler.refresh(args);\r\n    } catch (e) {\r\n        throw new RegisterElementError(`An error occured during [${component}] update: ${e.message}`);\r\n    }\r\n    return true;\r\n}\r\n\r\nasync function destroyComponent(node: CuiHTMLElement, component: string): Promise<boolean> {\r\n    if (!node || !node.$handlers) {\r\n        return false;\r\n    }\r\n\r\n    let handler = node.$handlers[component];\r\n    if (!handler) {\r\n        return false;\r\n    }\r\n    try {\r\n        handler.destroy();\r\n    } catch (e) {\r\n        throw new RegisterElementError(`An error occured during [${component}] destroy: ${e.message}`);\r\n    }\r\n    return true;\r\n}","import { ICuiLogger, ICuiComponent, ICuiPluginManager, CuiElement, CuiHTMLElement } from \"../models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { is, are, joinAttributesForQuery, parseAttribute } from \"../utils/functions\";\r\nimport { CuiUtils } from \"../models/utils\";\r\nimport { createCuiElement, destroyCuiElement, getMatchingComponents, updateComponent } from \"../utils/api\";\r\n\r\nexport interface ICuiMutionObserver {\r\n    // setOptions(options: MutationObserverInit): ICuiMutionObserver;\r\n    setPlugins(plugins: ICuiPluginManager): ICuiMutionObserver;\r\n    setComponents(components: ICuiComponent[]): ICuiMutionObserver;\r\n    setAttributes(attributes: string[]): ICuiMutionObserver;\r\n    start(): ICuiMutionObserver;\r\n    stop(): ICuiMutionObserver;\r\n}\r\n\r\nexport interface ICuiComponentMutationObserver {\r\n    observe(): void;\r\n    unobserve(): void;\r\n    isObserving(): boolean;\r\n    onMutation(callback: (record: MutationRecord[]) => void): void;\r\n    disable(flag: boolean): void;\r\n}\r\n\r\n\r\nexport class CuiMutationObserver implements ICuiMutionObserver {\r\n    _log: ICuiLogger;\r\n    #observer: MutationObserver | undefined;\r\n    #options: MutationObserverInit | undefined;\r\n    #element: HTMLElement;\r\n    plugins: ICuiPluginManager | undefined;\r\n    #components: ICuiComponent[];\r\n    #attributes: string[];\r\n    #utils: CuiUtils;\r\n    #queryString: string;\r\n    constructor(element: HTMLElement, utils: CuiUtils) {\r\n        this.#observer = undefined;\r\n        this.plugins = undefined;\r\n        this.#options = undefined;\r\n        this.#element = element\r\n        this._log = CuiLoggerFactory.get('CuiMutationObserver')\r\n        this.#components = [];\r\n        this.#attributes = [];\r\n        this.#utils = utils;\r\n        this.#queryString = \"\";\r\n\r\n    }\r\n\r\n    setPlugins(plugins: ICuiPluginManager): ICuiMutionObserver {\r\n        this.plugins = plugins;\r\n        return this;\r\n    }\r\n\r\n    setComponents(components: ICuiComponent[]): ICuiMutionObserver {\r\n        this.#components = components;\r\n        return this;\r\n    }\r\n\r\n    setAttributes(attributes: string[]): ICuiMutionObserver {\r\n        this.#options = {\r\n            attributes: true,\r\n            subtree: true,\r\n            childList: true,\r\n            attributeFilter: attributes\r\n        }\r\n        this.#attributes = attributes;\r\n        this.#queryString = joinAttributesForQuery(attributes);\r\n        return this;\r\n    }\r\n\r\n    start(): ICuiMutionObserver {\r\n        this._log.debug(\"Starting\")\r\n        if (!this.#options) {\r\n            this._log.error(\"Cannot start - options are not defined\")\r\n            return this;\r\n        }\r\n        this.#observer = new MutationObserver(this.mutationCallback.bind(this));\r\n        this.#observer.observe(this.#element, this.#options)\r\n        this._log.debug(\"Started\")\r\n        return this;\r\n    }\r\n\r\n    stop(): ICuiMutionObserver {\r\n        this._log.debug(\"Stopping\")\r\n        if (!this.#observer) {\r\n            this._log.debug(\"Observer not available\")\r\n            return this;\r\n        }\r\n        this.#observer.disconnect()\r\n        this.#observer = undefined;\r\n        this._log.debug(\"Stopped\")\r\n        return this;\r\n    }\r\n\r\n    private mutationCallback(mutations: MutationRecord[], observer: MutationObserver) {\r\n        mutations.forEach((mutation: MutationRecord) => {\r\n            switch (mutation.type) {\r\n                case 'attributes':\r\n                    const item = mutation.target as CuiHTMLElement;\r\n                    if (!are(mutation.attributeName, item)) {\r\n                        this._log.error(\"Mutation attribute doesn't not exisist\");\r\n                        break;\r\n                    }\r\n                    // @ts-ignore attribute is defined\r\n                    this.handeComponentUpdate(mutation.attributeName, item);\r\n                    break;\r\n\r\n                case 'childList':\r\n                    this.handleChildListMutation(mutation);\r\n                    break;\r\n            }\r\n            if (is(this.plugins)) {\r\n                // @ts-ignore plugins is defined here\r\n                this.plugins.onMutation(mutation).then(() => {\r\n                    //\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    private handeComponentUpdate(attributeName: string, item: CuiHTMLElement) {\r\n        let args = parseAttribute(item, attributeName);\r\n        updateComponent(item, attributeName, args)\r\n            .then((result) => {\r\n                this._log.debug(\"Component: \" + attributeName + \" updated with: \" + result, \"handeComponentUpdate\")\r\n            })\r\n            .catch((e) => {\r\n                this._log.exception(e);\r\n            })\r\n    }\r\n\r\n    private handleChildListMutation(mutation: MutationRecord) {\r\n        const addedLen = mutation.addedNodes.length;\r\n        const removedLen = mutation.removedNodes.length;\r\n        if (addedLen > 0) {\r\n            this._log.debug(\"Registering added nodes: \" + addedLen)\r\n            this.handleAddedNodes(mutation.addedNodes).then((result) => {\r\n                this._log.debug(\"Added nodes: \" + addedLen + \" with status: \" + result)\r\n            }).catch((e) => {\r\n                this._log.exception(e);\r\n            });\r\n        } else if (removedLen > 0) {\r\n            this._log.debug(\"Removing nodes: \" + removedLen);\r\n            this.handleRemovedNodes(mutation.removedNodes).then((result) => {\r\n                this._log.debug(\"Removed nodes: \" + removedLen + \" with status: \" + result)\r\n            }).catch((e) => {\r\n                this._log.exception(e);\r\n            });\r\n        }\r\n    }\r\n\r\n    private async handleAddedNodes(nodes: NodeList): Promise<boolean> {\r\n        for (let node of nodes) {\r\n            await this.handleAddedNode(node);\r\n            let element = node as Element\r\n            let children = element.hasChildNodes() ? element.querySelectorAll(this.#queryString) : null;\r\n            if (is(children)) {\r\n                // @ts-ignore children is defined\r\n                this._log.debug(\"Additional nodes to add: \" + children.length);\r\n                // @ts-ignore children is defined\r\n                await this.handleAddedChildren(children);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    private async handleAddedChildren(nodes: NodeList): Promise<boolean[]> {\r\n        let result: boolean[] = [];\r\n        for (let node of nodes) {\r\n            result.push(await this.handleAddedNode(node));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private async handleAddedNode(node: any): Promise<boolean> {\r\n        let matchingComponents: ICuiComponent[] = [];\r\n        matchingComponents = getMatchingComponents(node, this.#components)\r\n        return createCuiElement(node, matchingComponents, this.#utils);\r\n    }\r\n\r\n    private async handleRemovedNodes(nodes: NodeList): Promise<boolean> {\r\n        for (let node of nodes) {\r\n            await destroyCuiElement(node);\r\n            let element = node as Element;\r\n            let children = node.hasChildNodes() ? element.querySelectorAll(this.#queryString) : null;\r\n            if (is(children)) {\r\n                // @ts-ignore children is defined\r\n                this._log.debug(\"Additional nodes to remove: \" + children.length)\r\n                // @ts-ignore children is defined\r\n                await this.handleDestroyChildren(children);\r\n            }\r\n\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private async handleDestroyChildren(nodes: NodeList): Promise<boolean[]> {\r\n        let result = [];\r\n        for (let child of nodes) {\r\n            result.push(await destroyCuiElement(child));\r\n        }\r\n        return result;\r\n    }\r\n}\r\n\r\n\r\nexport class CuiComponentMutationHandler implements ICuiComponentMutationObserver {\r\n    #isObserving: boolean;\r\n    #observer: MutationObserver | undefined;\r\n    #element: Element;\r\n    #disabled: boolean;\r\n    #options: MutationObserverInit = {\r\n        childList: true,\r\n        subtree: true\r\n    }\r\n    constructor(target: Element) {\r\n        this.#observer = undefined;\r\n        this.#disabled = false;\r\n        this.#isObserving = false;\r\n        this.#element = target;\r\n    }\r\n\r\n    observe(): void {\r\n        if (!this.#isObserving && !this.#disabled && this.#observer) {\r\n            this.#observer.observe(this.#element, this.#options);\r\n            this.#isObserving = true;\r\n        }\r\n    }\r\n    unobserve(): void {\r\n        if (this.#isObserving && this.#observer) {\r\n            this.#observer.disconnect();\r\n            this.#isObserving = false;\r\n        }\r\n    }\r\n\r\n    isObserving(): boolean {\r\n        return this.#isObserving;\r\n    }\r\n\r\n    disable(flag: boolean): void {\r\n        this.#disabled = flag;\r\n        if (this.#disabled) {\r\n            this.unobserve();\r\n        }\r\n    }\r\n\r\n    onMutation(callback: (record: MutationRecord[]) => void): void {\r\n        if (this.#isObserving)\r\n            this.unobserve();\r\n        this.#observer = new MutationObserver(callback)\r\n    }\r\n\r\n}","import { IUIInteractionProvider } from \"../models/interfaces\";\r\n\r\nexport class FastDom implements IUIInteractionProvider {\r\n    #writes: any[];\r\n    #reads: any[];\r\n    #raf: any;\r\n    #isScheduled: boolean = false;\r\n    #limit: number;\r\n    #reportCallback: ((e: Error) => void) | undefined;\r\n\r\n    constructor() {\r\n        this.#raf = window.requestAnimationFrame.bind(window)\r\n        this.#writes = []\r\n        this.#reads = []\r\n        this.#limit = 5;\r\n        this.#reportCallback = undefined;\r\n\r\n    }\r\n\r\n    onError(callback: (e: Error) => void) {\r\n        this.#reportCallback = callback;\r\n    }\r\n\r\n    mutate(callback: any, ctx: any, ...args: any[]): void {\r\n        this.#reads.push(this.createTask(callback, ctx, ...args))\r\n        this.schedule()\r\n    }\r\n\r\n    fetch(callback: any, ctx: any, ...args: any[]): void {\r\n        this.#writes.push(this.createTask(callback, ctx, ...args))\r\n        this.schedule()\r\n    }\r\n\r\n    private createTask(callback: any, ctx: any, ...args: any[]): any {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n\r\n    private run(tasks: any[]) {\r\n        let task = null\r\n        while (task = tasks.shift()) {\r\n            task()\r\n        }\r\n    }\r\n\r\n    private schedule(recursion?: number) {\r\n        if (!this.#isScheduled) {\r\n            this.#isScheduled = true;\r\n            if (recursion && recursion >= this.#limit) {\r\n                throw new Error(\"Fast Dom limit reached\")\r\n            } else {\r\n                this.#raf(this.flush.bind(this, recursion));\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private flush(recursion?: number) {\r\n        let rec: number = recursion ?? 0;\r\n        let error = null;\r\n        let writes = this.#writes;\r\n        let reads = this.#reads;\r\n\r\n        try {\r\n            this.run(reads);\r\n            this.run(writes);\r\n        } catch (e) {\r\n            if (this.#reportCallback) {\r\n                this.#reportCallback(e);\r\n            } else {\r\n                console.error(`An error has been captured in interactions: ${e.message}`);\r\n                //console.error(e)\r\n            }\r\n            error = e\r\n        }\r\n        this.#isScheduled = false;\r\n        if (error || this.#writes.length || this.#reads.length) {\r\n            this.schedule(rec + 1);\r\n        }\r\n    }\r\n}\r\n\r\nexport class SyncInteractions implements IUIInteractionProvider {\r\n    tasks: any[];\r\n    raf: any;\r\n    isRunning: boolean = false;\r\n    constructor() {\r\n        this.tasks = [];\r\n        this.raf = window.requestAnimationFrame.bind(window)\r\n    }\r\n\r\n    mutate(callback: any, ctx: any, ...args: any[]): void {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args))\r\n        this.schedule()\r\n    }\r\n\r\n    fetch(callback: any, ctx: any, ...args: any[]): void {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args))\r\n        this.schedule()\r\n    }\r\n\r\n    private schedule() {\r\n        if (!this.isRunning) {\r\n            this.isRunning = true;\r\n            this.raf(this.flush.bind(this))\r\n        }\r\n    }\r\n\r\n    private flush() {\r\n        let task = null\r\n        while (task = this.tasks.shift()) {\r\n            try {\r\n                task()\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        this.isRunning = false\r\n    }\r\n\r\n    private createTask(callback: any, ctx: any, ...args: any[]): any {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n\r\n}","import { IUIInteractionProvider } from \"../models/interfaces\";\r\nimport { CuiInteractionsType } from \"../utils/types\";\r\nimport { FastDom, SyncInteractions } from \"../utils/interactions\";\r\n\r\nexport class CuiInteractionsFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param type - Interactions type\r\n     */\r\n    public static get(type: CuiInteractionsType, errorReport?: (e: Error) => void): IUIInteractionProvider {\r\n        const interactionType = type;\r\n        switch (interactionType) {\r\n            case 'async':\r\n                const fastDom = new FastDom();\r\n                if (errorReport)\r\n                    fastDom.onError(errorReport);\r\n                return fastDom;\r\n            default:\r\n                return new SyncInteractions();\r\n        }\r\n    }\r\n}","import { ICuiDictionary, ICuiDictionaryItem } from \"../models/interfaces\";\r\nimport { ItemNotFoundError, ArgumentError } from \"../models/errors\";\r\nimport { is } from \"./functions\";\r\n\r\nexport class CuiDictionary<T> implements ICuiDictionary<T> {\r\n\r\n    #keys: string[];\r\n    #values: T[];\r\n\r\n    constructor(init?: ICuiDictionaryItem<T>[]) {\r\n        this.#keys = []\r\n        this.#values = []\r\n\r\n        if (init) {\r\n            init.forEach(x => {\r\n                if (!is(x.key)) {\r\n                    this.#keys = []\r\n                    this.#values = []\r\n                    throw new ArgumentError(\"Key is empty\");\r\n                }\r\n                this.add(x.key, x.value)\r\n            })\r\n        }\r\n    }\r\n\r\n    add(key: string, value: T): void {\r\n        this.throwOnEmptyKey(key)\r\n        if (this.containsKey(key))\r\n            throw new Error(\"Key already exists\");\r\n        this.#keys.push(key)\r\n        this.#values.push(value)\r\n    }\r\n\r\n    remove(key: string): void {\r\n        if (!is(key)) {\r\n            return\r\n        }\r\n        let index = this.#keys.indexOf(key);\r\n        if (index >= 0) {\r\n            this.#keys.splice(index, 1)\r\n            this.#values.splice(index, 1)\r\n        }\r\n    }\r\n    get(key: string): T | undefined {\r\n        this.throwOnEmptyKey(key)\r\n        let index = this.indexOf(key)\r\n        if (index < 0) {\r\n            return undefined;\r\n        }\r\n        return this.#values[index];\r\n    }\r\n    containsKey(key: string): boolean {\r\n        return is(key) && this.indexOf(key) >= 0\r\n    }\r\n    keys(): string[] {\r\n        return this.#keys\r\n    }\r\n    values(): T[] {\r\n        return this.#values;\r\n    }\r\n\r\n    indexOf(key: string): number {\r\n        return is(key) ? this.#keys.indexOf(key) : -1;\r\n    }\r\n\r\n    update(key: string, value: T): void {\r\n        this.throwOnEmptyKey(key)\r\n        let index = this.indexOf(key)\r\n        if (index < 0) {\r\n            throw new ItemNotFoundError(`Item with key [${key}] not found`)\r\n        }\r\n        this.#values[index] = value\r\n    }\r\n\r\n    clear() {\r\n        this.#values = [];\r\n        this.#keys = [];\r\n    }\r\n\r\n    private throwOnEmptyKey(key: string) {\r\n        if (!is(key)) {\r\n            throw new ArgumentError(\"Key is empty\");\r\n        }\r\n    }\r\n}","import { ICuiDictionary, CuiCachable, ICuiManager } from \"../models/interfaces\";\r\nimport { CuiDictionary } from \"../utils/dictionary\";\r\nimport { is } from \"../utils/functions\";\r\n\r\nexport class CuiCacheManager implements ICuiManager<CuiCachable> {\r\n    #cache: ICuiDictionary<CuiCachable>;\r\n    #maxSize: number;\r\n    constructor(maxSize?: number) {\r\n        this.#cache = new CuiDictionary<CuiCachable>();\r\n        this.#maxSize = maxSize ?? 500;\r\n    }\r\n    put(key: string, element: CuiCachable): void {\r\n        if (!is(key)) return;\r\n        if (this.has(key)) {\r\n            this.#cache.update(key, element);\r\n            return;\r\n        }\r\n        this.clean();\r\n        this.#cache.add(key, element);\r\n    }\r\n\r\n    get(key: string): CuiCachable | undefined {\r\n        if (!this.has(key)) return undefined;\r\n        let item = this.#cache.get(key);\r\n        if (item && item.refresh()) {\r\n            return item;\r\n        }\r\n        this.#cache.remove(key);\r\n        return undefined;\r\n    }\r\n\r\n    has(key: string): boolean {\r\n        return is(key) ? this.#cache.containsKey(key) : false;\r\n    }\r\n\r\n    remove(key: string): boolean {\r\n        if (!is(key)) return false;\r\n        if (this.has(key)) {\r\n            this.#cache.remove(key);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    clear(): void {\r\n        this.#cache.clear();\r\n    }\r\n\r\n    private clean() {\r\n        if (this.#cache.keys().length >= this.#maxSize) {\r\n            this.#cache.remove(this.#cache.keys()[0]);\r\n        }\r\n    }\r\n}\r\n\r\n","import { ICuiLogger, CuiEventReceiver } from \"../models/interfaces\";\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { ICuiCallbackExecutor, ICuiEventEmitHandler } from \"./interfaces\";\r\n\r\ninterface EmitHandlerData {\r\n    events: CuiEventReceiver;\r\n    cuid: string | null;\r\n    args: any[];\r\n}\r\n\r\nclass EmitHandlerBase {\r\n    isBusy: boolean;\r\n    queue: EmitHandlerData[];\r\n    constructor() {\r\n        this.queue = [];\r\n        this.isBusy = false;\r\n    }\r\n    idMatches(emitId: string | null | undefined, handleId: string | null | undefined) {\r\n        return !is(emitId) || (is(emitId) && emitId == handleId);\r\n    }\r\n}\r\n\r\nexport class SimpleEventEmitHandler extends EmitHandlerBase implements ICuiEventEmitHandler {\r\n    #log: ICuiLogger;\r\n    #executor: ICuiCallbackExecutor;\r\n    constructor(executor: ICuiCallbackExecutor) {\r\n        super();\r\n        this.#executor = executor;\r\n        this.#log = CuiLoggerFactory.get(\"SimpleEventEmitHandler\");\r\n    }\r\n\r\n    async handle(events: CuiEventReceiver, cuid: string, args: any[]): Promise<boolean> {\r\n        if (!is(events)) {\r\n            this.#log.warning(\"No events provided\")\r\n            return false;\r\n        }\r\n        this.queue.push({\r\n            events: events,\r\n            cuid: cuid,\r\n            args: args\r\n        })\r\n        if (!this.isBusy) {\r\n            if (!this.isBusy) {\r\n                this.isBusy = true;\r\n                if (this.queue.length > 0) {\r\n                    await this.perform();\r\n                }\r\n                this.isBusy = false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private async perform() {\r\n        let task = this.queue.shift();\r\n        if (!task) {\r\n            return;\r\n        }\r\n        for (let id in task.events) {\r\n            let event = task.events[id]\r\n            try {\r\n                if (this.idMatches(task.cuid, event.$cuid))\r\n                    await this.#executor.execute(event.callback, task.args)\r\n            }\r\n            catch (e) {\r\n                this.#log.error(e)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class TaskedEventEmitHandler extends EmitHandlerBase implements ICuiEventEmitHandler {\r\n    #executor: ICuiCallbackExecutor;\r\n    constructor(executor: ICuiCallbackExecutor) {\r\n        super();\r\n        this.#executor = executor;\r\n    }\r\n\r\n    async handle(events: CuiEventReceiver, cuid: string | null, args: any[]): Promise<boolean> {\r\n        if (!is(events)) {\r\n            return false;\r\n        }\r\n        this.queue.push({\r\n            events: events,\r\n            cuid: cuid,\r\n            args: args\r\n        })\r\n        if (!this.isBusy) {\r\n            this.isBusy = true;\r\n            await this.perform();\r\n            if (this.queue.length > 0) {\r\n                await this.perform();\r\n            }\r\n\r\n            this.isBusy = false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private async perform(): Promise<boolean[]> {\r\n        let task = this.queue.shift();\r\n        let promises: Promise<boolean>[] = []\r\n        if (!task) {\r\n            return Promise.all(promises);\r\n        }\r\n        for (let id in task.events) {\r\n            let event = task.events[id]\r\n            if (this.idMatches(task.cuid, event.$cuid))\r\n                promises.push(this.#executor.execute(event.callback, task.args))\r\n        }\r\n        return Promise.all(promises)\r\n    }\r\n}\r\n\r\n\r\nexport class CuiEventEmitHandlerFactory {\r\n    static get(name: string, executor: ICuiCallbackExecutor): ICuiEventEmitHandler {\r\n        switch (name) {\r\n            case \"tasked\":\r\n                return new TaskedEventEmitHandler(executor);\r\n            default:\r\n                return new SimpleEventEmitHandler(executor);\r\n        }\r\n    }\r\n}","import { ICuiCallbackExecutor } from \"./interfaces\";\r\n\r\n\r\nexport class CuiCallbackExecutor implements ICuiCallbackExecutor {\r\n    async execute(callback: any, args: any[]): Promise<boolean> {\r\n        args = args ?? [];\r\n        try {\r\n            callback(...args)\r\n            return true;\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","import { ICuiEventBus, CuiEventReceiver, ICuiLogger, CuiElement, CuiEventObj } from \"../models/interfaces\";\r\nimport { is, are, generateRandomString, enumerateObject } from \"../utils/functions\";\r\nimport { ArgumentError } from \"../models/errors\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { CuiEventEmitHandlerFactory, TaskedEventEmitHandler } from \"./handlers\";\r\nimport { CuiCallbackExecutor } from \"./executors\";\r\nimport { CuiBusExtStatistics, ICuiEventBusQueueSetup, ICuiEventEmitHandler } from \"./interfaces\";\r\n\r\ninterface ICuiBusMapping {\r\n    [name: string]: number;\r\n}\r\n\r\n\r\n\r\n\r\nexport class CuiEventBus implements ICuiEventBus {\r\n    #events: { [event: string]: CuiEventReceiver }\r\n    #log: ICuiLogger;\r\n    #eventHandler: ICuiEventEmitHandler;\r\n    #name: string;\r\n    constructor(emitHandler: ICuiEventEmitHandler, name?: string) {\r\n        this.#events = {};\r\n        this.#eventHandler = emitHandler;\r\n        this.#name = name ?? \"CuiEventBus\"\r\n        this.#log = CuiLoggerFactory.get(this.#name);\r\n    }\r\n\r\n    /**\r\n     * Attaches event to event bus\r\n     * \r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to \r\n     */\r\n    on(name: string, callback: any, cui?: CuiElement): string | null {\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\")\r\n        }\r\n        // When context is not provided (e.g. anonymous function) then generate random\r\n        let id = this.#name + \"-\" + generateRandomString();\r\n\r\n\r\n        if (!this.#events[name]) {\r\n            this.#events[name] = {}\r\n        }\r\n        if (this.isAttached(this.#events[name], id, cui)) {\r\n            return null;\r\n        }\r\n        this.#log.debug(`Attaching new event: [${name}] for: [${id}]`)\r\n\r\n        this.#events[name][id] = { callback: callback, $cuid: this.getCuid(cui) }\r\n        return id;\r\n    }\r\n\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name: string, id: string): void {\r\n        if (!are(name, id)) {\r\n            throw new ArgumentError(\"Missing argument\")\r\n        }\r\n        let ev = this.#events[name]\r\n        this.#log.debug(`Detaching item: [${id}] from [${name}]`)\r\n        if (this.isAttached(ev, id)) {\r\n            delete ev[id];\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name: string): void {\r\n        if (is(name) && this.#events[name]) {\r\n            delete this.#events[name]\r\n        } else {\r\n            this.#log.error(`Event name is missing or incorrect`, \"detachAll\")\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    async emit(event: string, cuid: string | null, ...args: any[]): Promise<boolean> {\r\n        if (!is(event)) {\r\n            throw new ArgumentError(\"Event name is incorrect\");\r\n        }\r\n\r\n        let callbacks = this.#events[event];\r\n        if (is(callbacks)) {\r\n            this.#log.debug(`Emit: [${event}]`)\r\n            await this.#eventHandler.handle(callbacks, cuid, args)\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name: string, id: string, cui?: CuiElement) {\r\n        let ev = this.#events[name]\r\n        return this.isAttached(ev, id, cui)\r\n    }\r\n\r\n    /**\r\n     * Detaches callbacks by component cuid - this is used to clean up attachments on component deletion\r\n     * @param {string} event - event name\r\n     * @param {string} cuid - cuid of the component\r\n     */\r\n    detachByCuid(event: string, cuid: string): void {\r\n        if (!are(event, cuid)) {\r\n            return;\r\n        }\r\n        let ev = this.#events[event];\r\n        if (!is(ev)) {\r\n            return;\r\n        }\r\n        enumerateObject({ ...ev }, (evId: string, evValue: CuiEventObj) => {\r\n            if (evValue.$cuid === cuid) {\r\n                delete ev[evId]\r\n            }\r\n        })\r\n    }\r\n\r\n    private isAttached(ev: CuiEventReceiver, id: string, cui?: CuiElement): boolean {\r\n        if (is(cui)) {\r\n            // @ts-ignore\r\n            return is(ev) && is(id) && is(ev[id]) && ev[id].$cuid == cui.$cuid;\r\n        }\r\n        return is(ev) && is(id) && is(ev[id]);\r\n    }\r\n\r\n    private getCuid(cui?: CuiElement) {\r\n        // @ts-ignore\r\n        return is(cui) ? cui.$cuid : null;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport class CuiEventExtBus implements ICuiEventBus {\r\n    #events: { [event: string]: number };\r\n    #log: ICuiLogger;\r\n    #buses: ICuiEventBus[];\r\n    #last: number;\r\n    constructor(setup: ICuiEventBusQueueSetup[]) {\r\n        this.#log = CuiLoggerFactory.get(\"CuiEventBus\");\r\n        this.#buses = [];\r\n        this.#events = {};\r\n        this.#last = 0;\r\n        if (is(setup)) {\r\n            this.#log.debug(\"Initiating buses\")\r\n            let sorted = setup.length === 1 ? setup : setup.sort((first, second) => {\r\n                return first.priority - second.priority\r\n            })\r\n            sorted.forEach((item, index) => {\r\n                this.#buses.push(this.initBusInstance(item.name, item.handler))\r\n                this.#events = {\r\n                    ...this.#events,\r\n                    ...this.mapEvents(item.eventsDef, index),\r\n                }\r\n                this.#log.debug(`Bus ${item.name} has been initialized with number: ${index}`)\r\n            })\r\n\r\n            this.#buses.push(this.initBusInstance(\"DefaultEventBus\", 'tasked'))\r\n            this.#last = this.#buses.length - 1;\r\n            this.#log.debug(`Bus initialization finished`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attaches event to event bus\r\n     * \r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to \r\n     */\r\n    on(name: string, callback: any, cui?: CuiElement): string | null {\r\n\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\")\r\n        }\r\n        return this.get(name).on(name, callback, cui);\r\n    }\r\n\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name: string, id: string, cui?: CuiElement): void {\r\n        if (!are(name, id)) {\r\n            throw new ArgumentError(\"Missing argument\")\r\n        }\r\n        this.get(name).detach(name, id, cui);\r\n    }\r\n\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name: string): void {\r\n        this.get(name).detachAll(name);\r\n    }\r\n\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    async emit(event: string, cuid: string | null, ...args: any[]): Promise<boolean> {\r\n        if (!is(event)) {\r\n            throw new ArgumentError(\"Event name is incorrect\");\r\n        }\r\n        return this.get(event).emit(event, cuid, ...args);\r\n    }\r\n\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name: string, id: string, cui?: CuiElement) {\r\n        return this.get(name).isSubscribing(name, id, cui);\r\n    }\r\n\r\n    /**\r\n    * Detaches callbacks by component cuid - this is used to clean up attachments on component deletion\r\n    * @param {string} event - event name\r\n    * @param {string} cuid - cuid of the component\r\n    */\r\n    detachByCuid(event: string, cuid: string): void {\r\n        if (!are(event, cuid)) {\r\n            return\r\n        }\r\n        this.get(event).detachByCuid(event, cuid);\r\n    }\r\n\r\n\r\n    /**\r\n     * Creates and initializes event bus instance\r\n     * @param busName Event bus name for logger\r\n     * @param handlerName handler name to create proper handler instance\r\n     */\r\n    private initBusInstance(busName: string, handlerName: string): ICuiEventBus {\r\n        if (!are(busName, handlerName)) {\r\n            throw new ArgumentError(\"Bus name or handler name is incorrect\");\r\n        }\r\n        let executor = new CuiCallbackExecutor();\r\n        let handler = CuiEventEmitHandlerFactory.get(handlerName, executor);\r\n        return new CuiEventBus(handler, busName);\r\n    }\r\n\r\n    /**\r\n     * Creates mapping object from events array\r\n     * @param events events array\r\n     * @param index queue number\r\n     */\r\n    private mapEvents(events: string[], index: number): ICuiBusMapping {\r\n        return events.reduce((result: ICuiBusMapping, current: string) => {\r\n            if (!result[current]) {\r\n                return {\r\n                    ...result,\r\n                    [current]: index\r\n                }\r\n            }\r\n            return result;\r\n        }, {})\r\n    }\r\n\r\n    /**\r\n     * Retrives porper event bus based on event name\r\n     * @param event \r\n     */\r\n    private get(event: string): ICuiEventBus {\r\n        let idx = this.#events[event];\r\n        return this.#buses[idx ?? this.#last];\r\n    }\r\n}\r\n\r\nexport class CuiEventBusFactory {\r\n    static get(setup?: ICuiEventBusQueueSetup[]): ICuiEventBus {\r\n        //@ts-ignore - setup is underfined check is perfromed\r\n        return is(setup) ? new CuiEventExtBus(setup) : new CuiEventBus(new TaskedEventEmitHandler(new CuiCallbackExecutor));\r\n    }\r\n}\r\n\r\nexport class CuiBusExtStatisticsHandler {\r\n    #isOn: boolean;\r\n    #statistics: CuiBusExtStatistics;\r\n    constructor(gather: boolean, queueCount: number) {\r\n        this.#isOn = gather;\r\n        this.#statistics = {\r\n            queueCount: queueCount,\r\n            events: {}\r\n        }\r\n    }\r\n\r\n    addEvent(event: string, queueNumber: number, emitCount?: number) {\r\n        this.#statistics.events[event] = {\r\n            name: event,\r\n            queueNumber: queueNumber,\r\n            emits: emitCount ?? 0\r\n        }\r\n    }\r\n\r\n    addQueue() {\r\n        this.#statistics.queueCount += 1;\r\n    }\r\n\r\n    addEmit(event: string, queueNumber?: number) {\r\n        if (!this.#isOn) {\r\n            return;\r\n        }\r\n\r\n        if (this.#statistics.events[event]) {\r\n            this.#statistics.events[event].emits += 1;\r\n        } else {\r\n            this.addEvent(event, queueNumber ?? -1, 1);\r\n        }\r\n\r\n    }\r\n\r\n    getStatistics(): CuiBusExtStatistics {\r\n        return this.#statistics;\r\n    }\r\n\r\n}","import { is } from \"../utils/functions\";\r\nimport { IUIInteractionProvider } from \"../models/interfaces\";\r\n\r\nexport interface ICuiDocumentStyleAppender {\r\n    append(style: string): boolean;\r\n}\r\n\r\nexport class CuiDocumentStyleAppender implements ICuiDocumentStyleAppender {\r\n    constructor(interactions: IUIInteractionProvider) {\r\n    }\r\n\r\n    append(style: string): boolean {\r\n        if (is(style)) {\r\n            const head = document.head || document.getElementsByTagName('head')[0]\r\n            const node = document.createElement('style');\r\n            const text = document.createTextNode(style);\r\n            // node.type = 'text/css';\r\n            node.appendChild(text);\r\n            head.appendChild(node);\r\n        }\r\n        return true;\r\n    }\r\n\r\n}","import { CuiColorSetType } from \"../utils/types\";\r\nimport { is, getRangeValue, are } from \"../utils/functions\";\r\nimport { IUIInteractionProvider } from \"../models/interfaces\";\r\nimport { CuiColor, CuiColorSet } from \"../models/colors\";\r\nimport { CSS_APP_BACKGROUND_COLORS, CSS_COMPONENT_BACKGROUND_COLORS, CSS_COMPONENT_BORDER_COLORS, CSS_THEMES } from \"../utils/statics\";\r\n\r\nexport class CuiInstanceColorHandler {\r\n    #root: HTMLElement;\r\n    #interactions: IUIInteractionProvider;\r\n    #LIGHTEN_FACTOR: number = 15;\r\n    #DARKEN_FACTOR: number = 15;\r\n\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#root = document.documentElement;\r\n        this.#interactions = interactions;\r\n    }\r\n\r\n    setAppBackground(light: CuiColor, dark: CuiColor) {\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n\r\n    setComponentBackground(light: CuiColor, dark: CuiColor) {\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n\r\n    setBordersColors(light: CuiColor, dark: CuiColor) {\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.dark, dark.toCssString());\r\n    }\r\n\r\n    setColor(type: CuiColorSetType, set: CuiColorSet) {\r\n        const colors = CSS_THEMES[type];\r\n        const baseColor = set.base;\r\n        if (!is(colors) || !is(baseColor)) {\r\n            return\r\n        }\r\n        const mutedColor = set.muted ?? baseColor.clone().lighten(this.#LIGHTEN_FACTOR);\r\n        const activeColor = set.active ?? baseColor.clone().darken(this.#DARKEN_FACTOR);\r\n\r\n        this.#interactions.mutate(() => {\r\n            this.setProperty(colors.base, baseColor.toCssString());\r\n            this.setProperty(colors.active, activeColor.toCssString());\r\n            this.setProperty(colors.muted, mutedColor.toCssString());\r\n        }, this)\r\n\r\n    }\r\n\r\n    setLightenFactor(factor: number) {\r\n        this.#LIGHTEN_FACTOR = getRangeValue(factor, 0, 100);\r\n    }\r\n\r\n    setDarkenFactor(factor: number) {\r\n        this.#DARKEN_FACTOR = getRangeValue(factor, 0, 100);\r\n    }\r\n\r\n    setProperty(propertyName: string, value: string) {\r\n        this.#root.style.setProperty(propertyName, value);\r\n    }\r\n\r\n    setPropertyIn(propertyName: string, value: string) {\r\n        if (!are(value, propertyName)) {\r\n            return;\r\n        }\r\n        this.#interactions.mutate(this.setProperty, this, propertyName, value)\r\n    }\r\n}","\r\nimport { CuiDevelopmentStateType, ICuiDevelopmentTool } from \"../models/interfaces\";\r\nimport { is } from \"../utils/functions\";\r\n\r\nexport class CuiDevelopmentToolManager implements ICuiDevelopmentTool {\r\n\r\n    #tool: ICuiDevelopmentTool | undefined;\r\n    constructor(tool?: ICuiDevelopmentTool) {\r\n        this.#tool = tool;\r\n    }\r\n\r\n    pushState(cuid: string, component: string, type: CuiDevelopmentStateType, message: string, functionName?: string): void {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            this.#tool.pushState(cuid, component, type, message, functionName);\r\n        })\r\n\r\n    }\r\n\r\n    registerElement(element: HTMLElement, cuid: string, component: string): void {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            this.#tool.registerElement(element, cuid, component);\r\n        })\r\n    }\r\n\r\n    unregisterElement(cuid: string, component: string): void {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            this.#tool.unregisterElement(cuid, component);\r\n        })\r\n    }\r\n\r\n    setProperty<T>(cuid: string, component: string, name: string, t: T): void {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            this.#tool.setProperty(cuid, component, name, t);\r\n        })\r\n    }\r\n\r\n    log(type: CuiDevelopmentStateType, message: string, functionName?: string): void {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            this.#tool.log(type, message, functionName);\r\n        })\r\n    }\r\n\r\n    private checkAndCall(callback: any) {\r\n        if (!is(this.#tool)) {\r\n            return;\r\n        }\r\n\r\n        callback();\r\n    }\r\n}","import { IUIInteractionProvider, ICuiEventBus, ICuiManager, CuiCachable } from \"./interfaces\";\r\nimport { CuiSetup, CuiSetupInit } from \"./setup\";\r\nimport { CuiLightMode } from \"../utils/types\";\r\nimport { CuiInteractionsFactory } from \"../factories/interactions\";\r\nimport { CuiCacheManager } from \"../managers/cache\";\r\nimport { CuiEventBusFactory } from \"../bus/bus\";\r\nimport { are, getName, is, replacePrefix } from \"../utils/functions\";\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { ICuiDocumentStyleAppender, CuiDocumentStyleAppender } from \"../styles/appender\";\r\nimport { CuiInstanceColorHandler } from \"../handlers/colors\";\r\nimport { CSSVariableError } from \"./errors\";\r\nimport { CuiDevelopmentToolManager } from \"../managers/development\";\r\n\r\nexport class CuiUtils {\r\n    interactions: IUIInteractionProvider;\r\n    bus: ICuiEventBus;\r\n    setup: CuiSetup;\r\n    cache: ICuiManager<CuiCachable>;\r\n    colors: CuiInstanceColorHandler;\r\n    styleAppender: ICuiDocumentStyleAppender;\r\n    development: CuiDevelopmentToolManager;\r\n    #plugins: string[];\r\n    constructor(initialSetup: CuiSetupInit, plugins?: string[]) {\r\n        this.setup = new CuiSetup().fromInit(initialSetup);\r\n        this.interactions = CuiInteractionsFactory.get(initialSetup.interaction, this.onInteractionError.bind(this));\r\n        this.cache = new CuiCacheManager(this.setup.cacheSize);\r\n        this.bus = CuiEventBusFactory.get(initialSetup.busSetup);\r\n        this.colors = new CuiInstanceColorHandler(this.interactions);\r\n        this.development = new CuiDevelopmentToolManager(initialSetup.development);\r\n        this.styleAppender = new CuiDocumentStyleAppender(this.interactions);\r\n        this.#plugins = plugins ?? [];\r\n    }\r\n\r\n    setLightMode(mode: CuiLightMode) {\r\n        const name: string = getName(this.setup.prefix, CLASSES.dark);\r\n        const classes = document.body.classList;\r\n        if (mode === 'dark' && !classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.add(name);\r\n            }, this)\r\n\r\n        } else if (mode === 'light' && classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.remove(name);\r\n            }, this)\r\n        }\r\n    }\r\n\r\n    getLightMode(): CuiLightMode {\r\n        const name: string = getName(this.setup.prefix, CLASSES.dark);\r\n        return document.body.classList.contains(name) ? 'dark' : 'light';\r\n    }\r\n\r\n    setPrintMode(flag: boolean) {\r\n        const name: string = getName(this.setup.prefix, CLASSES.print);\r\n        const classes = document.body.classList;\r\n        if (flag && !classes.contains(name)) {\r\n            classes.add(name);\r\n\r\n        } else if (!flag && classes.contains(name)) {\r\n            classes.remove(name);\r\n        }\r\n    }\r\n\r\n    isPrintMode(): boolean {\r\n        const name: string = getName(this.setup.prefix, CLASSES.print);\r\n        return document.body.classList.contains(name);\r\n    }\r\n\r\n    setProperty(name: string, value: string) {\r\n        if (!are(name, value)) {\r\n            throw new CSSVariableError(\"Property or value was not provided\");\r\n        }\r\n        let prop = replacePrefix(name, this.setup.prefix);\r\n        document.documentElement.style.setProperty(prop, value);\r\n    }\r\n\r\n    isPlugin(name: string) {\r\n        return is(name) && this.#plugins.find(plugin => plugin === name);\r\n    }\r\n\r\n    private onInteractionError(e: Error) {\r\n        console.error(\"An error has been captured from interactions\");\r\n        console.error(e);\r\n    }\r\n}","import { IUIInteractionProvider } from \"../models/interfaces\";\r\nimport { ICuiComponentAction } from \"../utils/actions\";\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { is } from \"../utils/functions\";\r\n\r\nexport class CuiActionsHelper {\r\n    #interactions: IUIInteractionProvider;\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#interactions = interactions;\r\n    }\r\n\r\n    async performAction(target: Element, action: ICuiComponentAction, timeout: number, callback?: () => void): Promise<boolean> {\r\n        return new Promise((resolve) => {\r\n            this.#interactions.mutate(() => {\r\n                action.add(target);\r\n                target.classList.add(CLASSES.animProgress);\r\n                setTimeout(() => {\r\n                    this.#interactions.mutate(() => {\r\n                        action.remove(target);\r\n                        target.classList.remove(CLASSES.animProgress);\r\n                        if (callback)\r\n                            callback();\r\n                        resolve(true)\r\n                    }, null)\r\n                }, timeout)\r\n            }, null)\r\n        })\r\n    }\r\n\r\n    async performActions(target: Element, actions: ICuiComponentAction[], timeout: number, callback?: () => void): Promise<boolean> {\r\n        return new Promise((resolve) => {\r\n            this.#interactions.mutate(() => {\r\n                actions.forEach(x => x.add(target));\r\n                target.classList.add(CLASSES.animProgress);\r\n                setTimeout(() => {\r\n                    this.#interactions.mutate(() => {\r\n                        actions.forEach(x => x.remove(target));\r\n                        target.classList.remove(CLASSES.animProgress);\r\n                        if (callback)\r\n                            callback();\r\n                        resolve(true)\r\n                    }, null)\r\n                }, timeout)\r\n            }, null)\r\n        })\r\n    }\r\n\r\n    async performSwitchAction(inTarget: Element, outTarget: Element | null, inAction: ICuiComponentAction[], outAction: ICuiComponentAction[], onFinish: () => void, timeout: number): Promise<boolean> {\r\n        return new Promise((resolve) => {\r\n            this.#interactions.mutate(() => {\r\n                inAction.forEach(x => x.add(inTarget));\r\n                inTarget.classList.add(CLASSES.animProgress);\r\n                if (is(outTarget)) {\r\n                    //@ts-ignore\r\n                    outAction.forEach(x => x.add(outTarget));\r\n                    //@ts-ignore\r\n                    outTarget.classList.add(CLASSES.animProgress);\r\n                }\r\n                setTimeout(() => {\r\n                    this.#interactions.mutate(() => {\r\n                        inAction.forEach(x => x.remove(inTarget));\r\n                        inTarget.classList.remove(CLASSES.animProgress);\r\n                        if (is(outTarget)) {\r\n                            //@ts-ignore\r\n                            outAction.forEach(x => x.remove(outTarget));\r\n                            //@ts-ignore\r\n                            outTarget.classList.remove(CLASSES.animProgress);\r\n                        }\r\n                        onFinish();\r\n                        resolve(true)\r\n                    }, null)\r\n                }, timeout)\r\n            }, null)\r\n        })\r\n    }\r\n}","import { is, are, splitColon } from \"./functions\";\r\nimport { CuiUtils } from \"../models/utils\";\r\n\r\nexport interface ICuiComponentAction {\r\n    add(element: Element, utils?: CuiUtils): void;\r\n    remove(element: Element, utils?: CuiUtils): void;\r\n    toggle(element: Element, utils?: CuiUtils): void;\r\n}\r\n\r\nexport class CuiClassAction implements ICuiComponentAction {\r\n    #class: string;\r\n\r\n    constructor(className: string) {\r\n        this.#class = className;\r\n    }\r\n\r\n    add(element: Element, utils?: CuiUtils): void {\r\n        if (are(element, this.#class) && !element.classList.contains(this.#class)) {\r\n            element.classList.add(this.#class);\r\n        }\r\n    }\r\n\r\n    remove(element: Element, utils?: CuiUtils): void {\r\n        if (are(element, this.#class) && element.classList.contains(this.#class)) {\r\n            element.classList.remove(this.#class);\r\n        }\r\n    }\r\n\r\n    toggle(element: Element, utils?: CuiUtils): void {\r\n        if (are(element, this.#class)) {\r\n            if (element.classList.contains(this.#class)) {\r\n                element.classList.remove(this.#class);\r\n            } else {\r\n                element.classList.add(this.#class);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class CuiInboundAction implements ICuiComponentAction {\r\n    #name: string;\r\n\r\n    constructor(name: string) {\r\n        this.#name = name;\r\n    }\r\n    add(element: Element, utils?: CuiUtils): void {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (this.#name) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('dark')\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('light')\r\n                break;\r\n        }\r\n    }\r\n\r\n    remove(element: Element, utils?: CuiUtils): void {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (this.#name) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('light')\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('dark')\r\n                break;\r\n        }\r\n    }\r\n\r\n    toggle(element: Element, utils?: CuiUtils): void {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (this.#name) {\r\n            case 'dark-mode':\r\n                this.setDarkMode(utils)\r\n                break;\r\n            case 'light-mode':\r\n                this.setDarkMode(utils)\r\n                break;\r\n        }\r\n    }\r\n\r\n    private setDarkMode(utils: CuiUtils) {\r\n        if (utils.getLightMode() === 'dark') {\r\n            utils.setLightMode('light')\r\n        } else {\r\n            utils.setLightMode('dark')\r\n        }\r\n    }\r\n}\r\n\r\nexport class AttributeAction implements ICuiComponentAction {\r\n    #attributeName: string;\r\n    #attributeValue: string;\r\n    constructor(attribute: string) {\r\n        [this.#attributeName, this.#attributeValue] = splitColon(attribute);// attribute.split(',')\r\n    }\r\n\r\n    add(element: Element, utils?: CuiUtils): void {\r\n        if (!are(element, this.#attributeName, this.#attributeValue)) {\r\n            return;\r\n        }\r\n        element.setAttribute(this.#attributeName, this.#attributeValue)\r\n    }\r\n\r\n    remove(element: Element, utils?: CuiUtils): void {\r\n        if (!are(element, this.#attributeName, this.#attributeValue)) {\r\n            return;\r\n        }\r\n        if (element.hasAttribute(this.#attributeName)) {\r\n            element.removeAttribute(this.#attributeName)\r\n        }\r\n\r\n    }\r\n\r\n    toggle(element: Element, utils?: CuiUtils): void {\r\n        if (!are(element, this.#attributeName, this.#attributeValue)) {\r\n            return;\r\n        }\r\n        if (element.hasAttribute(this.#attributeName)) {\r\n            element.removeAttribute(this.#attributeName)\r\n        } else {\r\n            element.setAttribute(this.#attributeName, this.#attributeValue)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class StyleAction implements ICuiComponentAction {\r\n    #attributeName: string;\r\n    #attributeValue: string;\r\n    constructor(attribute: string) {\r\n        [this.#attributeName, this.#attributeValue] = splitColon(attribute);\r\n    }\r\n\r\n    add(element: Element, utils?: CuiUtils): void {\r\n        if (!are(element, this.#attributeName, this.#attributeValue)) {\r\n            return;\r\n        }\r\n        let el = element as any;\r\n        if (el.style && !el.style[this.#attributeName]) {\r\n            el.style[this.#attributeName] = this.#attributeValue;\r\n        }\r\n\r\n    }\r\n\r\n    remove(element: Element, utils?: CuiUtils): void {\r\n        if (!are(element, this.#attributeName, this.#attributeValue)) {\r\n            return;\r\n        }\r\n        let el = element as any;\r\n        if (el.style && el.style[this.#attributeName]) {\r\n            el.style[this.#attributeName] = \"\";\r\n        }\r\n\r\n    }\r\n\r\n    toggle(element: Element, utils?: CuiUtils): void {\r\n        if (!are(element, this.#attributeName, this.#attributeValue)) {\r\n            return;\r\n        }\r\n        let el = element as any;\r\n        if (!el.style) {\r\n            return;\r\n        }\r\n        if (!el.style[this.#attributeName]) {\r\n            el.style[this.#attributeName] = this.#attributeValue;\r\n        } else {\r\n            delete el.style[this.#attributeName];\r\n        }\r\n    }\r\n}\r\n\r\nexport class DummyAction implements ICuiComponentAction {\r\n    constructor() {\r\n    }\r\n\r\n    add(element: Element, utils?: CuiUtils): void {\r\n\r\n    }\r\n\r\n    remove(element: Element, utils?: CuiUtils): void {\r\n    }\r\n\r\n    toggle(element: Element, utils?: CuiUtils): void {\r\n    }\r\n}\r\n\r\nexport class CuiActionsFatory {\r\n    public static get(value: string): ICuiComponentAction {\r\n        if (!is(value)) {\r\n            return new DummyAction();\r\n        }\r\n        let indicator = value[0];\r\n        switch (indicator) {\r\n            case '.':\r\n                return new CuiClassAction(value.substring(1));\r\n            case '~':\r\n                return new CuiInboundAction(value.substring(1));\r\n            case \"&\":\r\n                return new AttributeAction(value.substring(1));\r\n            case \"^\":\r\n                return new StyleAction(value.substring(1));\r\n            default:\r\n                return new CuiClassAction(value);\r\n        }\r\n    }\r\n}\r\n\r\nexport class CuiActionsListFactory {\r\n    public static get(value: string): ICuiComponentAction[] {\r\n        if (!is(value)) {\r\n            return [];\r\n        }\r\n        const split = value.split(',');\r\n        return split.map(single => {\r\n            return CuiActionsFatory.get(single.trim());\r\n        })\r\n    }\r\n}","import { is, are } from \"../../core/utils/functions\";\r\nimport { ICuiLogger, CuiCachable, CuiElement } from \"../../core/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { CLASSES } from \"../../core/utils/statics\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiActionsHelper } from \"../../core/helpers/helpers\";\r\nimport { CuiClassAction } from \"../../core/utils/actions\";\r\n\r\nexport class ElementManager implements CuiCachable {\r\n    #elements: Element[];\r\n    #isLocked: boolean;\r\n    #logger: ICuiLogger;\r\n    #cDt: number;\r\n    #utils: CuiUtils;\r\n    #actionsHelper: CuiActionsHelper;\r\n    constructor(elements: Element[], utils: CuiUtils) {\r\n        this.#elements = elements;\r\n        this.#isLocked = false;\r\n        this.#logger = CuiLoggerFactory.get(\"ElementManager\");\r\n        this.#utils = utils;\r\n        this.#cDt = Date.now();\r\n        this.#actionsHelper = new CuiActionsHelper(utils.interactions);\r\n    }\r\n\r\n    async toggleClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (!element.classList.contains(className)) {\r\n                element.classList.add(className);\r\n            } else {\r\n                element.classList.remove(className);\r\n            }\r\n        }, 'toggleClass');\r\n    }\r\n\r\n    async toggleClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (!classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.add, classes, className);\r\n                } else {\r\n                    this.#utils.interactions.mutate(classes.remove, classes, className);\r\n                }\r\n            }, this)\r\n\r\n        }, 'toggleClassAs');\r\n    }\r\n\r\n    async setClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (!element.classList.contains(className)) {\r\n                element.classList.add(className)\r\n            }\r\n        }, 'setClass');\r\n    }\r\n\r\n    async setClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (!classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.add, classes, className);\r\n                }\r\n            }, this)\r\n\r\n        }, 'setClassAs');\r\n    }\r\n\r\n    async removeClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (element.classList.contains(className)) {\r\n                element.classList.remove(className)\r\n            }\r\n        }, 'removeClass');\r\n    }\r\n\r\n    async removeClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.remove, classes, className);\r\n                }\r\n            }, this)\r\n        }, 'removeClass');\r\n    }\r\n\r\n    getAttribute(attributeName: string): string[] {\r\n        if (!is(attributeName)) {\r\n            return [];\r\n        }\r\n        return this.#elements.reduce<string[]>((val: string[], current: Element) => {\r\n            let attr = current.getAttribute(attributeName);\r\n            if (attr != null) {\r\n                val.push(attr)\r\n            }\r\n            return val;\r\n        }, []);\r\n    }\r\n\r\n    async setAttribute(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.setAttribute(attributeName, attributeValue ?? \"\")\r\n        }, 'setAttribute');\r\n    }\r\n\r\n    async setAttributeAs(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.mutate(element.setAttribute, element, attributeName, attributeValue ?? \"\")\r\n        }, 'setAttributeAs');\r\n    }\r\n\r\n    async removeAttribute(attributeName: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.removeAttribute(attributeName)\r\n        }, 'removeAttribute');\r\n    }\r\n\r\n    async removeAttributeAs(attributeName: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.mutate(element.removeAttribute, element, attributeName);\r\n        }, 'removeAttributeAs');\r\n    }\r\n\r\n    async toggleAttribute(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (element.hasAttribute(attributeName)) {\r\n                element.removeAttribute(attributeName)\r\n            } else {\r\n                element.setAttribute(attributeName, attributeValue ?? \"\")\r\n            }\r\n        }, 'toggleAttribute');\r\n    }\r\n\r\n    async toggleAttributeAs(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.fetch(() => {\r\n                if (element.hasAttribute(attributeName)) {\r\n                    this.#utils.interactions.mutate(element.removeAttribute, element, attributeName);\r\n                } else {\r\n                    this.#utils.interactions.mutate(element.setAttribute, element, attributeName, attributeValue ?? \"\")\r\n                }\r\n            }, this)\r\n\r\n        }, 'toggleAttributeAs');\r\n    }\r\n\r\n    async click(onClick: (ev: MouseEvent) => void): Promise<boolean> {\r\n        if (!is(onClick)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            //@ts-ignore\r\n            element.addEventListener('click', onClick);\r\n        }, 'click');\r\n    }\r\n\r\n    async event(eventName: string, callback: any): Promise<boolean> {\r\n        if (!is(eventName) || !is(callback)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.addEventListener(eventName, callback);\r\n        }, 'event');\r\n    }\r\n\r\n    async call(callback: (element: Element, index: Number) => void, functionName?: string): Promise<boolean> {\r\n        if (this.#isLocked) {\r\n            this.#logger.error(\"Element is locked\", functionName)\r\n        }\r\n        this.lock();\r\n        this.#elements.forEach((element, index) => {\r\n            callback(element, index)\r\n        })\r\n        this.unlock();\r\n        return true;\r\n    }\r\n\r\n    async animate(className: string, timeout?: number): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        return this.call((element) => {\r\n            this.change(() => {\r\n                element.classList.add(className);\r\n                element.classList.add(CLASSES.animProgress);\r\n                setTimeout(() => {\r\n                    this.change(() => {\r\n                        element.classList.remove(className);\r\n                        element.classList.remove(CLASSES.animProgress);\r\n                    })\r\n                }, delay)\r\n            })\r\n        });\r\n    }\r\n\r\n    async open(openClass: string, animationClass: string, timeout?: number): Promise<boolean> {\r\n        if (!are(openClass, animationClass)) {\r\n            return false\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        const action = new CuiClassAction(animationClass);\r\n        return this.call((element) => {\r\n            this.#actionsHelper.performAction(element, action, delay ?? 0).then(() => {\r\n                element.classList.add(openClass);\r\n            })\r\n        });\r\n    }\r\n\r\n    async close(closeClass: string, animationClass: string, timeout?: number): Promise<boolean> {\r\n        if (!are(closeClass, animationClass)) {\r\n            return false\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        const action = new CuiClassAction(animationClass);\r\n        return this.call((element) => {\r\n            this.#actionsHelper.performAction(element, action, delay ?? 0).then(() => {\r\n                element.classList.remove(closeClass);\r\n            })\r\n        });\r\n    }\r\n\r\n    emit(event: string, ...args: any[]): void {\r\n        if (!is(event)) {\r\n            this.#logger.warning(\"Not enough data to emit event\", \"emit\")\r\n            return;\r\n        }\r\n        this.call((element: Element) => {\r\n            let cuid = (<CuiElement>(element as any)).$cuid;\r\n            if (is(cuid)) {\r\n                this.#logger.debug(`Emitting event ${event} to ${cuid}`)\r\n                this.#utils.bus.emit(event, cuid, ...args);\r\n            }\r\n        }, \"emit\")\r\n    }\r\n\r\n    on(event: string, callback: any): string[] {\r\n        let ids: string[] = []\r\n        if (!are(event, callback)) {\r\n            this.#logger.error(\"Incorrect arguments\", \"on\")\r\n            return ids;\r\n        }\r\n\r\n        this.call((element: Element) => {\r\n            let cuiElement = (<CuiElement>(element as any));\r\n            if (is(cuiElement)) {\r\n                let disposeId = this.#utils.bus.on(event, callback, cuiElement);\r\n                if (disposeId != null)\r\n                    ids.push(disposeId);\r\n            }\r\n        }, \"on\")\r\n        return ids;\r\n    }\r\n\r\n    detach(event: string, id: string): void {\r\n        if (!are(event, id)) {\r\n            this.#logger.error(\"Incorrect arguments\", \"detach\")\r\n        }\r\n        this.call((element: Element) => {\r\n            let cuiElement = (<CuiElement>(element as any));\r\n            if (is(cuiElement)) {\r\n                this.#utils.bus.detach(event, id, cuiElement);\r\n            }\r\n        }, \"detach\")\r\n    }\r\n\r\n    read(callback: any, ...args: any[]): void {\r\n        this.#utils.interactions.fetch(callback, this, ...args)\r\n    }\r\n\r\n    change(callback: any, ...args: any[]): void {\r\n        this.#utils.interactions.mutate(callback, this, ...args)\r\n    }\r\n\r\n    elements(): Element[] {\r\n        return this.#elements;\r\n    }\r\n\r\n    count() {\r\n        return this.#elements.length;\r\n    }\r\n\r\n    lock() {\r\n        this.#isLocked = true;\r\n    }\r\n\r\n    unlock() {\r\n        this.#isLocked = false;\r\n    }\r\n\r\n    isLocked(): boolean {\r\n        return this.#isLocked;\r\n    }\r\n\r\n    refresh(): boolean {\r\n        return (Date.now() - this.#cDt) < 360000;\r\n    }\r\n}","import { CLASSES } from \"../../core/utils/statics\";\r\nimport { ICuiLogger, IUIInteractionProvider } from \"../../core/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { is } from \"../../core/utils/functions\";\r\n\r\nexport class CollectionManagerHelper {\r\n    #elements: Element[];\r\n    #log: ICuiLogger;\r\n    #isLocked: boolean;\r\n    #toggleClass: string;\r\n    #interactions: IUIInteractionProvider;\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#interactions = interactions;\r\n        this.#log = CuiLoggerFactory.get('CollectionManager');\r\n        this.#elements = [];\r\n        this.#isLocked = false;\r\n        this.#toggleClass = \"\";\r\n    }\r\n\r\n    setElements(elements: Element[]) {\r\n        this.#elements = elements;\r\n    }\r\n\r\n    setToggle(className: string) {\r\n        this.#toggleClass = className;\r\n    }\r\n\r\n    addAnimationClass(currentElement: Element, nextElement: Element, animIn: string, animOut: string,): void {\r\n        nextElement.classList.add(CLASSES.animProgress);\r\n        currentElement.classList.add(animOut);\r\n        nextElement.classList.add(animIn);\r\n    }\r\n\r\n    setFinalClasses(currentElement: Element, nextElement: Element, animIn: string, animOut: string): void {\r\n        nextElement.classList.remove(CLASSES.animProgress);\r\n        currentElement.classList.remove(animOut);\r\n        nextElement.classList.remove(animIn);\r\n        currentElement.classList.remove(this.#toggleClass);\r\n        nextElement.classList.add(this.#toggleClass);\r\n    }\r\n\r\n    verifyIndex(index: number, current: number, count: number): boolean {\r\n        return index >= 0 && index !== current && index < count\r\n    }\r\n\r\n    async setCurrent(newIndex: number, current: number): Promise<boolean> {\r\n        this.lock();\r\n        this.#log.debug(`Switching index from: ${current} to ${newIndex}`)\r\n        if (current > -1)\r\n            this.#elements[current].classList.remove(this.#toggleClass);\r\n        this.#elements[newIndex].classList.add(this.#toggleClass);\r\n        this.unlock();\r\n        return true;\r\n    }\r\n\r\n    async setCurrentWithAnimation(newIndex: number, animClassIn: string, animClassOut: string, duration: number, current: number): Promise<boolean> {\r\n        this.lock()\r\n        this.#log.debug(`Switching index from: ${current} to ${newIndex}`)\r\n\r\n        const currentElement = this.#elements[current];\r\n        const nextElement = this.#elements[newIndex];\r\n        this.#interactions.mutate(this.addAnimationClass, this, currentElement, nextElement, animClassIn, animClassOut);\r\n        setTimeout(() => {\r\n            this.#interactions.mutate(this.setFinalClasses, this, currentElement, nextElement, animClassIn, animClassOut)\r\n            this.unlock();\r\n        }, duration)\r\n        return true;\r\n    }\r\n\r\n    getCurrentIndex(): number {\r\n        if (!is(this.#toggleClass)) {\r\n            return -1;\r\n        }\r\n        let len = this.count();\r\n        for (let i = 0; i < len; i++) {\r\n            if (this.#elements[i].classList.contains(this.#toggleClass)) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    elements(): Element[] {\r\n        return this.#elements;\r\n    }\r\n\r\n    check(): boolean {\r\n        if (this.#isLocked) {\r\n            this.#log.warning(\"Object locked. Operation in progress\", \"Check\");\r\n            return false;\r\n        } else if (!is(this.#toggleClass)) {\r\n            this.#log.warning(\"Toggle is not set. Call setToggleClass\", \"Check\");\r\n            return false;\r\n        } else if (this.count() <= 0) {\r\n            this.#log.warning(\"Elements list is empty\", \"Check\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    count(): number {\r\n        return this.#elements ? this.#elements.length : -1;\r\n    }\r\n\r\n    lock() {\r\n        this.#isLocked = true;\r\n    }\r\n\r\n    unlock() {\r\n        this.#isLocked = false\r\n    }\r\n\r\n\r\n}","import { IUIInteractionProvider, ICuiLogger, CuiCachable } from \"../../core/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { CollectionManagerHelper } from \"../helpers/collection\";\r\n\r\nexport class CollectionManager implements CuiCachable {\r\n    #log: ICuiLogger;\r\n    #cDt: number;\r\n    #helper: CollectionManagerHelper;\r\n\r\n    constructor(elements: Element[], interactions: IUIInteractionProvider) {\r\n        this.#log = CuiLoggerFactory.get('CollectionManager');\r\n        this.#helper = new CollectionManagerHelper(interactions);\r\n        this.#helper.setElements(elements);\r\n        this.#cDt = Date.now();\r\n    }\r\n\r\n    setToggle(className: string) {\r\n        this.#helper.setToggle(className)\r\n    }\r\n\r\n    setElements(elements: Element[]) {\r\n        this.#helper.setElements(elements);\r\n    }\r\n\r\n    click(callback: (element: Element, index: number) => void): void {\r\n        this.#helper.elements().forEach((element, index) => {\r\n            element.addEventListener('click', () => {\r\n                this.set(index).then(() => {\r\n                    if (callback) {\r\n                        callback(element, index)\r\n                    }\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    async next(): Promise<boolean> {\r\n        if (!this.#helper.check()) {\r\n            return false;\r\n        }\r\n        let newIdx = this.#helper.getCurrentIndex() + 1;\r\n        return this.set(newIdx >= this.length() ? 0 : newIdx);\r\n    }\r\n\r\n    async previous(): Promise<boolean> {\r\n        if (!this.#helper.check()) {\r\n            return false;\r\n        }\r\n        let newIdx = this.#helper.getCurrentIndex() - 1;\r\n        return this.set(newIdx < 0 ? this.length() - 1 : newIdx)\r\n    }\r\n\r\n    async set(index: number): Promise<boolean> {\r\n        let current = this.#helper.getCurrentIndex();\r\n        if (!this.#helper.check() || !this.#helper.verifyIndex(index, current, this.length())) {\r\n            return false;\r\n        }\r\n        return this.#helper.setCurrent(index, current)\r\n    }\r\n\r\n    async setWithAnimation(index: number, animClassIn: string, animClassOut: string, duration: number): Promise<boolean> {\r\n        let current = this.#helper.getCurrentIndex();\r\n        if (!this.#helper.check() || !this.#helper.verifyIndex(index, current, this.length())) {\r\n            return false;\r\n        }\r\n        return this.#helper.setCurrentWithAnimation(index, animClassIn, animClassOut, duration, current)\r\n    }\r\n\r\n    getCurrentIndex(): number {\r\n        return this.#helper.getCurrentIndex();\r\n    }\r\n\r\n    length() {\r\n        return this.#helper.count();\r\n    }\r\n\r\n    refresh(): boolean {\r\n        return this.length() > 0 && Date.now() - this.#cDt > 360000;\r\n    }\r\n}","import { ICuiPlugin, ICuiLogger, ICuiMutiationPlugin, ICuiPluginManager } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { is } from \"../../core/utils/functions\";\r\n\r\n\r\n\r\nexport class CuiPluginManager implements ICuiPluginManager {\r\n    #plugins: ICuiPlugin[];\r\n    #mutated: ICuiMutiationPlugin[];\r\n    #log: ICuiLogger;\r\n    constructor(plugins: ICuiPlugin[]) {\r\n        this.#plugins = plugins ?? [];\r\n        this.#log = CuiLoggerFactory.get(\"CuiPluginManager\")\r\n        this.#mutated = [];\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#log.debug(\"Plugins initialization started: \" + this.#plugins.length)\r\n        this.#mutated = this.#plugins.filter((plugin: any) => {\r\n            return is(plugin.mutation);\r\n        }) as any;\r\n        this.#plugins.forEach(plugin => {\r\n            plugin.init(utils);\r\n            utils.setup.plugins[plugin.description] = plugin.setup;\r\n        })\r\n        this.#log.debug(\"Plugins have been initialized\");\r\n    }\r\n\r\n    get(name: string): ICuiPlugin | undefined {\r\n        if (!is(name)) {\r\n            return undefined;\r\n        }\r\n        return this.#plugins.find(p => p.name === name);\r\n    }\r\n\r\n    has(name: string): boolean {\r\n        return is(this.get(name))\r\n    }\r\n\r\n    async onMutation(mutation: MutationRecord): Promise<boolean> {\r\n        let tasks: Promise<boolean>[] = [];\r\n        this.#mutated.forEach((plugin: any) => {\r\n            tasks.push(plugin.mutation(mutation))\r\n        })\r\n        let result: boolean[] = await Promise.all(tasks);\r\n        return result.find(val => {\r\n            val === false\r\n        }) ? false : true;\r\n    }\r\n\r\n}","import { CuiSetupInit } from \"../core/models/setup\";\r\nimport { is, joinAttributesForQuery, are } from \"../core/utils/functions\";\r\nimport { STATICS, EVENTS, CSS_VARIABLES } from \"../core/utils/statics\";\r\nimport { ICuiLogger, ICuiPlugin, ICuiComponent, ICuiPluginManager, CuiElement } from \"../core/models/interfaces\";\r\nimport { ICuiMutionObserver, CuiMutationObserver } from \"../core/observers/mutations\";\r\nimport { CuiLoggerFactory } from \"../core/factories/logger\";\r\nimport { CuiUtils } from \"../core/models/utils\";\r\nimport { CuiInstanceInitError } from \"../core/models/errors\";\r\nimport { ElementManager } from \"./managers/element\";\r\nimport { CollectionManager } from \"./managers/collection\";\r\nimport { CuiPluginManager } from \"./managers/plugins\";\r\nimport { addCuiArgument, createCuiElement, getMatchingComponents } from \"../core/utils/api\";\r\n\r\n\r\nexport class CuiInstance {\r\n    #log: ICuiLogger;\r\n    #mutationObserver: ICuiMutionObserver | undefined;\r\n    #utils: CuiUtils;\r\n    #plugins: ICuiPluginManager;\r\n    #components: ICuiComponent[];\r\n    #rootElement: HTMLElement;\r\n    #mutatedAttributes: string[];\r\n    constructor(setup: CuiSetupInit, plugins: ICuiPlugin[], components: ICuiComponent[]) {\r\n        STATICS.prefix = setup.prefix;\r\n        STATICS.logLevel = setup.logLevel;\r\n        this.#log = CuiLoggerFactory.get('CuiInstance')\r\n        this.#plugins = new CuiPluginManager(plugins);\r\n        this.#components = components ?? [];\r\n        this.#utils = new CuiUtils(setup, plugins.map(plugin => { return plugin.name; }));\r\n        this.#rootElement = setup.root;\r\n        this.#mutationObserver = undefined;\r\n        this.#mutatedAttributes = [];\r\n    }\r\n\r\n    async init(): Promise<CuiInstance> {\r\n        this.#log.debug(\"Instance started\", \"init\")\r\n        // Init elements\r\n        if (!is(window.MutationObserver)) {\r\n            throw new CuiInstanceInitError(\"Mutation observer does not exists\");\r\n        }\r\n        this.#mutatedAttributes = this.#components.map(x => { return x.attribute }); // MUTATED_ATTRIBUTES; \r\n        const initElements = is(this.#mutatedAttributes) ? this.#rootElement.querySelectorAll(joinAttributesForQuery(this.#mutatedAttributes)) : null;\r\n        if (is(initElements)) {\r\n            //@ts-ignore initElements already checked\r\n            this.#log.debug(`Initiating ${initElements.length} elements`)\r\n            let promises = [];\r\n            //@ts-ignore initElements already checked\r\n            for (let element of initElements) {\r\n                try {\r\n                    let matchingComponents = getMatchingComponents(element, this.#components)\r\n                    promises.push(createCuiElement(element, matchingComponents, this.#utils));\r\n                } catch (e) {\r\n                    this.#log.exception(e);\r\n                }\r\n            }\r\n            await Promise.all(promises);\r\n        }\r\n        this.#log.debug(\"Init plugins\", \"init\")\r\n        // Init plugins\r\n        this.#plugins.init(this.#utils);\r\n\r\n        if (are(this.#components, this.#mutatedAttributes)) {\r\n            this.#log.debug(\"Init mutation observer\", \"init\")\r\n            this.#mutationObserver = new CuiMutationObserver(this.#rootElement, this.#utils)\r\n            this.#mutationObserver.setComponents(this.#components).setAttributes(this.#mutatedAttributes)\r\n            this.#mutationObserver.setPlugins(this.#plugins);\r\n            this.#mutationObserver.start();\r\n        }\r\n\r\n        this.#log.debug(\"Setting CSS globals\", 'init')\r\n        this.#utils.interactions.mutate(() => {\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTimeLong, `${this.#utils.setup.animationTimeLong}ms`)\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTime, `${this.#utils.setup.animationTime}ms`);\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTimeShort, `${this.#utils.setup.animationTimeShort}ms`);\r\n        }, null)\r\n\r\n        this.#utils.bus.emit(EVENTS.INSTANCE_INITIALIZED, null)\r\n        return this;\r\n    }\r\n\r\n    finish(): void {\r\n        if (this.#mutationObserver)\r\n            this.#mutationObserver.stop();\r\n        this.#utils.bus.emit(EVENTS.INSTANCE_FINISHED, null)\r\n    }\r\n\r\n    get(selector: string): ElementManager | undefined {\r\n        const elements = this.all(selector);\r\n        if (!elements) {\r\n            return undefined;\r\n        }\r\n        const newElement = new ElementManager(elements, this.#utils);\r\n        return newElement\r\n    }\r\n\r\n    collection(selector: string): CollectionManager | undefined {\r\n        const elements = this.all(selector);\r\n        if (!is(elements)) {\r\n            return undefined;\r\n        }\r\n        // @ts-ignore already checked\r\n        let manager = new CollectionManager(elements, this.#utils.interactions);\r\n        return manager;\r\n    }\r\n\r\n    select(selector: string): Element | null {\r\n        return document.querySelector(selector)\r\n    }\r\n\r\n    all(selector: string): Element[] | undefined {\r\n        const nodes: NodeListOf<Element> = document.querySelectorAll(selector);\r\n        if (!is(nodes)) {\r\n            return undefined;\r\n        }\r\n        return [...nodes];\r\n    }\r\n\r\n    getUtils(): CuiUtils {\r\n        return this.#utils;\r\n    }\r\n\r\n    on(event: string, callback: any, element?: CuiElement): void {\r\n        if (!are(event, callback)) {\r\n            this.#log.error(\"Incorrect arguments\", \"on\")\r\n        }\r\n        this.#utils.bus.on(event, callback, element);\r\n    }\r\n\r\n    detach(event: string, id: string): void {\r\n        if (!are(event, id)) {\r\n            this.#log.error(\"Incorrect arguments\", \"detach\")\r\n        }\r\n        this.#utils.bus.detach(event, id);\r\n    }\r\n\r\n    detachAll(event: string): void {\r\n        if (!is(event)) {\r\n            this.#log.error(\"Incorrect arguments\", \"detachAll\")\r\n        }\r\n        this.#utils.bus.detachAll(event);\r\n    }\r\n\r\n    emit(event: string, element: Element | string, ...args: any[]): void {\r\n        if (!are(event, element)) {\r\n            this.#log.warning(\"Not enough data to emit event\", \"emit\")\r\n            return;\r\n        }\r\n        let cuid = null\r\n        if (typeof element === 'string' && element.startsWith('~')) {\r\n            cuid = element.substring(1);\r\n        } else {\r\n            let el = typeof element === 'string' ? document.querySelector(element) : element;\r\n            cuid = (<CuiElement>(el as any)).$cuid;\r\n        }\r\n        if (!is(cuid)) {\r\n            this.#log.warning(\"Element is not a cUI element\", \"emit\")\r\n            return\r\n        }\r\n        this.#utils.bus.emit(event, cuid, ...args);\r\n    }\r\n\r\n    getPlugin(name: string): ICuiPlugin | undefined {\r\n        return this.#plugins.get(name);\r\n    }\r\n\r\n\r\n    /**\r\n     * Creates cUI element outside of cUI root scope\r\n     * @param element \r\n     * @param arg \r\n     * @param data \r\n     */\r\n    async createCuiElement<T extends object>(element: HTMLElement, arg: string, data: T): Promise<boolean> {\r\n        if (!is(arg) || !this.#mutatedAttributes.includes(arg)) {\r\n            this.#log.error(\"Element cannot be created: Unknown attribute\")\r\n            return false;\r\n        }\r\n        let component = this.#components.find(component => component.attribute === arg);\r\n\r\n        if (!component)\r\n            return false;\r\n\r\n        if (addCuiArgument(element, arg, data)) {\r\n            return createCuiElement(element, [component], this.#utils);\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","import { PropsTypes } from \"./engine\";\r\nimport { AnimationProperty } from \"./interfaces\";\r\n\r\nexport interface AnimationDefinition {\r\n    previous: DefinitionItem;\r\n    current: DefinitionItem;\r\n}\r\n\r\nexport interface DefinitionItem {\r\n    left: AnimationProperty<PropsTypes>;\r\n    right: AnimationProperty<PropsTypes>\r\n}\r\n\r\nexport interface CuiAnimationsDefinition {\r\n    [id: string]: AnimationDefinition;\r\n}\r\n\r\nexport const SWIPE_ANIMATIONS_DEFINITIONS: CuiAnimationsDefinition = {\r\n    \"slide\": {\r\n        current: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: -100,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: 100,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: -100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    fade: {\r\n        current: {\r\n            left: {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            right: {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                opacity: {\r\n                    from: 0,\r\n                    to: 1\r\n                }\r\n            },\r\n            right: {\r\n                opacity: {\r\n                    from: 0,\r\n                    to: 1\r\n                }\r\n            }\r\n        }\r\n    },\r\n    push: {\r\n        current: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: -10,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: 10,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: -100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { CuiSetupInit } from \"../core/models/setup\";\r\nimport { is } from \"../core/utils/functions\";\r\nimport { CuiInstance } from \"./instance\";\r\nimport { ICONS } from \"../core/utils/statics\";\r\nimport { ICuiComponent, ICuiPlugin } from \"../core/models/interfaces\";\r\nimport { CuiAnimationsDefinition, SWIPE_ANIMATIONS_DEFINITIONS } from \"../core/animation/definitions\";\r\n\r\nexport interface CuiInitData {\r\n    plugins?: ICuiPlugin[];\r\n    components?: ICuiComponent[];\r\n    setup?: CuiSetupInit;\r\n    icons?: any;\r\n    swipeAnimations?: CuiAnimationsDefinition;\r\n}\r\n\r\nexport interface CuiInitResult {\r\n    result: boolean;\r\n    message?: string;\r\n}\r\n\r\nexport class CuiInitializer {\r\n    #window: any;\r\n    constructor() {\r\n        this.#window = window;\r\n    }\r\n\r\n    async init(setup: CuiInitData): Promise<CuiInitResult> {\r\n        let settings: CuiSetupInit = { ... new CuiSetupInit(), ...setup.setup }\r\n        const appPrefix: string = settings.app;\r\n        const result: CuiInitResult = {\r\n            result: false\r\n        }\r\n        if (is(this.#window[appPrefix])) {\r\n            result.message = \"Instance is already initialized\";\r\n            return result;\r\n        }\r\n        if (is(setup.icons)) {\r\n            for (let icon in setup.icons) {\r\n                ICONS[icon] = setup.icons[icon];\r\n            }\r\n        }\r\n        if (is(setup.swipeAnimations)) {\r\n            for (let animation in setup.swipeAnimations) {\r\n                SWIPE_ANIMATIONS_DEFINITIONS[animation] = setup.swipeAnimations[animation];\r\n            }\r\n\r\n        }\r\n        try {\r\n            this.#window[appPrefix] = new CuiInstance(settings, setup.plugins ?? [], setup.components ?? [])\r\n            await this.#window[appPrefix].init();\r\n        } catch (e) {\r\n            console.error(e);\r\n            result.message = \"An error occured during initialization\";\r\n            return result;\r\n        }\r\n        result.result = true;\r\n        return result;\r\n    }\r\n}","export class AriaAttributes {\r\n    public static setLabel(element: Element, label: string): void {\r\n        if (!element.hasAttribute('aria-label')) {\r\n            element.setAttribute('aria-label', label);\r\n        }\r\n    }\r\n\r\n    public static setAria(element: Element, attr: string, value: string) {\r\n        if (!element.hasAttribute(attr)) {\r\n            element.setAttribute(attr, value);\r\n        }\r\n    }\r\n\r\n    public static removeAria(element: Element, attr: string) {\r\n        if (element.hasAttribute(attr)) {\r\n            element.removeAttribute(attr);\r\n        }\r\n    }\r\n}","import { ICuiLogger, IUIInteractionProvider, CuiContext, ICuiComponentHandler, ICuiParsable, ICuiOpenable, ICuiClosable, CuiDevelopmentStateType, KeyDownEvent } from \"../models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { CuiUtils } from \"../models/utils\";\r\nimport { ICuiComponentMutationObserver, CuiComponentMutationHandler } from \"../observers/mutations\";\r\nimport { AriaAttributes } from \"../utils/aria\";\r\nimport { CuiActionsHelper } from \"../helpers/helpers\";\r\nimport { ICuiComponentAction, CuiActionsListFactory } from \"../utils/actions\";\r\nimport { is, getActiveClass, clone } from \"../utils/functions\";\r\nimport { EVENTS } from \"../utils/statics\";\r\n\r\nexport interface CuiChildMutation {\r\n    removed: Node[];\r\n    added: Node[];\r\n}\r\n\r\nexport class ComponentHelper {\r\n    #interactions: IUIInteractionProvider;\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#interactions = interactions;\r\n    }\r\n\r\n    hasClass(cls: string, element: Element): boolean {\r\n        return cls && element.classList.contains(cls) ? true : false;\r\n    }\r\n\r\n    setClass(cls: string, element: Element): void {\r\n        this.setClasses([cls], element);\r\n    }\r\n\r\n    setClasses(classes: string[], element?: Element) {\r\n        if (element) {\r\n            element.classList.add(...classes)\r\n        }\r\n    }\r\n\r\n    setClassesAs(element: Element, ...classes: string[]) {\r\n        this.#interactions.mutate(this.setClasses, this, classes, element);\r\n    }\r\n\r\n    removeClass(cls: string, element: Element) {\r\n        this.removeClasses([cls], element);\r\n    }\r\n\r\n    removeClasses(classes: string[], element?: Element) {\r\n        if (element) {\r\n            element.classList.remove(...classes)\r\n        }\r\n    }\r\n\r\n    removeClassesAs(element: Element, ...classes: string[]) {\r\n        this.#interactions.mutate(this.removeClasses, this, classes, element);\r\n    }\r\n\r\n    removeAttribute(attributeName: string, element: Element) {\r\n        if (element && element.hasAttribute(attributeName))\r\n            element.removeAttribute(attributeName);\r\n    }\r\n\r\n    setStyle(element: any, property: string, value: string) {\r\n        if (element && element[\"style\"] && is(value)) {\r\n            element.style[property] = value\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CuiComponentBase implements CuiContext {\r\n    _log: ICuiLogger;\r\n    utils: CuiUtils;\r\n    element: HTMLElement;\r\n    cuid: string;\r\n    isLocked: boolean;\r\n    activeClassName: string;\r\n    helper: ComponentHelper;\r\n    #emittedEvents: string[];\r\n    componentName: string;\r\n    constructor(componentName: string, element: HTMLElement, utils: CuiUtils) {\r\n        this._log = CuiLoggerFactory.get(componentName);\r\n        this.utils = utils;\r\n        this.element = element;\r\n        this.cuid = (<any>element).$cuid;\r\n        this.isLocked = false;\r\n        this._log.setId(this.cuid);\r\n        this.activeClassName = getActiveClass(utils.setup.prefix);\r\n        this.helper = new ComponentHelper(utils.interactions);\r\n        this.#emittedEvents = [];\r\n        this.componentName = componentName;\r\n    }\r\n\r\n\r\n    mutate(callback: any, ...args: any[]): void {\r\n        this.utils.interactions.mutate(callback, this, ...args)\r\n    }\r\n\r\n    fetch(callback: any, ...args: any[]): void {\r\n        this.utils.interactions.fetch(callback, this, ...args)\r\n    }\r\n\r\n    getEventName(name: string) {\r\n        return [name, this.cuid].join('-');\r\n    }\r\n\r\n    /**\r\n     * Emits event using passed data and cuid of the element\r\n     * NOTE: Don't use it to emit global events\r\n     * @param event Event name\r\n     * @param data Data to emit\r\n     */\r\n    emitEvent(event: string, ...data: any[]) {\r\n        if (!this.#emittedEvents.includes(event))\r\n            this.#emittedEvents.push(event);\r\n        this.utils.bus.emit(event, this.cuid, ...data)\r\n    }\r\n\r\n    onEvent(event: string, callback: any): string | null {\r\n        return this.utils.bus.on(event, callback, this.element as any)\r\n    }\r\n\r\n    detachEvent(event: string, id: string | null) {\r\n        if (id != null) {\r\n            this.utils.bus.detach(event, id);\r\n            id = \"\";\r\n        }\r\n    }\r\n\r\n    getId(): string {\r\n        return this.cuid;\r\n    }\r\n\r\n    checkLockAndWarn(fName?: string): boolean {\r\n        if (this.isLocked) {\r\n            this._log.warning(\"Component is locked\", fName)\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Helper which checks whether element has an active flag set\r\n     */\r\n    isActive(): boolean {\r\n        return this.element.classList.contains(this.activeClassName);\r\n    }\r\n\r\n    detachEmiitedEvents() {\r\n        this.#emittedEvents.forEach(event => {\r\n            this.utils.bus.detachByCuid(event, this.cuid);\r\n            this._log.debug(\"Detaching event: \" + event + \" on component delete\");\r\n        })\r\n    }\r\n\r\n    registerInDebug(): void {\r\n        this.utils.development.registerElement(this.element, this.cuid, this.componentName);\r\n    }\r\n\r\n    removeFromDebug(): void {\r\n        this.utils.development.unregisterElement(this.cuid, this.componentName);\r\n    }\r\n\r\n    setDebugProperty<T>(name: string, value: T): void {\r\n        this.utils.development.setProperty(this.cuid, this.componentName, name, value);\r\n    }\r\n\r\n    logInfo(message: string, functionName?: string) {\r\n        this._log.debug(message, functionName);\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"info\", message, functionName);\r\n    }\r\n\r\n    logWarning(message: string, functionName?: string) {\r\n        this._log.warning(message, functionName);\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"warning\", message, functionName);\r\n    }\r\n\r\n    pushDebugState(type: CuiDevelopmentStateType, message: string, functionName?: string) {\r\n        this.utils.development.pushState(this.cuid, this.componentName, type, message, functionName);\r\n    }\r\n\r\n\r\n    logError(message: string, functionName?: string, error?: Error) {\r\n        this._log.error(message, functionName);\r\n        if (error) {\r\n            this._log.exception(error, functionName)\r\n        }\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"error\", message, functionName);\r\n    }\r\n\r\n}\r\n\r\nexport abstract class CuiHandlerBase<T extends ICuiParsable> extends CuiComponentBase implements ICuiComponentHandler {\r\n    args: T;\r\n    prevArgs: T | undefined;\r\n    isInitialized: boolean;\r\n    actionsHelper: CuiActionsHelper;\r\n    #attribute: string;\r\n    constructor(componentName: string, element: HTMLElement, attribute: string, args: T, utils: CuiUtils) {\r\n        super(componentName, element, utils);\r\n        this.args = args;\r\n        this.actionsHelper = new CuiActionsHelper(utils.interactions)\r\n        this.prevArgs = undefined;\r\n        this.isInitialized = false;\r\n        this.#attribute = attribute;\r\n    }\r\n\r\n    handle(args: any): void {\r\n        this.logInfo(\"Init\", 'handle');\r\n        if (this.isInitialized) {\r\n            this.logWarning(\"Trying to initialize component again\", 'handle');\r\n            return;\r\n        }\r\n        this.args.parse(args);\r\n        if (!this.element.classList.contains(this.#attribute)) {\r\n            this.element.classList.add(this.#attribute);\r\n        }\r\n        this.registerInDebug();\r\n        this.onHandle();\r\n        this.isInitialized = true;\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this.logInfo(\"Update\", 'refresh')\r\n        if (!this.isInitialized) {\r\n            this.logError(\"Cannot update not initialized component\", 'refresh');\r\n            return;\r\n        }\r\n        this.prevArgs = clone(this.args);\r\n        this.args.parse(args);\r\n        this.pushDebugState(\"info\", \"Component update\", 'refresh');\r\n        this.onRefresh();\r\n    }\r\n\r\n    destroy(): void {\r\n        this.logInfo(\"Destroy\", \"destroy\");\r\n        this.onRemove();\r\n        this.detachEmiitedEvents();\r\n        this.removeFromDebug();\r\n        this.isInitialized = false;\r\n    }\r\n\r\n    // Abstract\r\n    abstract onHandle(): void;\r\n    abstract onRefresh(): void;\r\n    abstract onRemove(): void;\r\n}\r\n\r\n\r\nexport abstract class CuiHandler<T extends ICuiParsable> extends CuiHandlerBase<T> {\r\n    constructor(componentName: string, element: HTMLElement, attribute: string, args: T, utils: CuiUtils) {\r\n        super(componentName, element, attribute, args, utils);\r\n    }\r\n\r\n    onHandle() {\r\n        this.onInit();\r\n    }\r\n\r\n\r\n    onRefresh() {\r\n        this.onUpdate();\r\n    }\r\n\r\n    onRemove() {\r\n        this.onDestroy();\r\n    }\r\n\r\n    /**\r\n     * Helper created for elements that animate - perfroms an action *add*, after timeout it performs *remove*.\r\n     * \r\n     * @param action - action to perfrom\r\n     * @param timeout - timeout specified for action removal\r\n     * @param onFinish - callback to be performed after action is finished after removal\r\n     * @param callback - optional - callback to be executed in mutation on action removal, e.g. additional DOM changes on element\r\n     */\r\n    async performAction(actions: ICuiComponentAction[], timeout: number, onFinish: () => void, callback?: () => void): Promise<boolean> {\r\n        if (await this.actionsHelper.performActions(this.element, actions, timeout, callback)) {\r\n            onFinish();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Abstract\r\n    abstract onInit(): void;\r\n    abstract onUpdate(): void;\r\n    abstract onDestroy(): void;\r\n\r\n}\r\nexport interface CuiInteractableArgs {\r\n    timeout: number;\r\n    openAct: string;\r\n    closeAct: string;\r\n    escClose: boolean;\r\n    keyClose: string;\r\n}\r\n\r\nexport abstract class CuiInteractableHandler<T extends ICuiParsable & CuiInteractableArgs> extends CuiHandlerBase<T> implements ICuiOpenable, ICuiClosable {\r\n    #openEventId: string | null;\r\n    #closeEventId: string | null;\r\n    #keyCloseEventId: string | null;\r\n    #openAct: ICuiComponentAction[];\r\n    #closeAct: ICuiComponentAction[];\r\n    constructor(componentName: string, element: HTMLElement, attribute: string, args: T, utils: CuiUtils) {\r\n        super(componentName, element, attribute, args, utils);\r\n        this.#openEventId = null;\r\n        this.#closeEventId = null;\r\n        this.#keyCloseEventId = null;\r\n        this.#closeAct = [];\r\n        this.#openAct = [];\r\n\r\n    }\r\n\r\n\r\n    onHandle() {\r\n        this.#openEventId = this.onEvent(EVENTS.OPEN, this.openFromEvent.bind(this))\r\n        this.#closeEventId = this.onEvent(EVENTS.CLOSE, this.closeFromEvent.bind(this))\r\n        this.#openAct = CuiActionsListFactory.get(this.args.openAct)\r\n        this.#closeAct = CuiActionsListFactory.get(this.args.closeAct)\r\n        this.onInit();\r\n    }\r\n\r\n\r\n    onRefresh() {\r\n        if (!this.prevArgs || this.args.openAct !== this.prevArgs.openAct) {\r\n            this.#openAct = CuiActionsListFactory.get(this.args.openAct)\r\n        }\r\n        if (!this.prevArgs || this.args.closeAct !== this.prevArgs.closeAct) {\r\n            this.#closeAct = CuiActionsListFactory.get(this.args.closeAct)\r\n        }\r\n        this.onUpdate();\r\n    }\r\n\r\n    onRemove() {\r\n        this.detachEvent(EVENTS.CLOSE, this.#closeEventId);\r\n        this.detachEvent(EVENTS.OPEN, this.#openEventId)\r\n        this.onDestroy();\r\n    }\r\n\r\n    async open(args?: any): Promise<boolean> {\r\n        if (this.checkLockAndWarn(\"open\")) {\r\n            return false;\r\n        }\r\n        if (this.isActive()) {\r\n            this.logWarning(\"Component is already opened\");\r\n            return false;\r\n        }\r\n        if (this.args.escClose || is(this.args.keyClose)) {\r\n            this.#keyCloseEventId = this.onEvent(EVENTS.KEYDOWN, this.onKeyClose.bind(this))\r\n        }\r\n\r\n        if (!this.onBeforeOpen()) {\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        return this.performAction(this.#openAct, this.args.timeout, this.onActionFinish.bind(this, this.onAfterOpen.bind(this), EVENTS.OPENED, args), () => {\r\n            this.helper.setClass(this.activeClassName, this.element)\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'true');\r\n        });;\r\n    }\r\n\r\n    async close(args?: any): Promise<boolean> {\r\n        if (this.checkLockAndWarn(\"close\")) {\r\n            return false;\r\n        }\r\n        if (!this.isActive()) {\r\n            this.logWarning(\"Component is already closed\");\r\n            return false;\r\n        }\r\n\r\n        this.detachEvent(EVENTS.KEYDOWN, this.#keyCloseEventId);\r\n        if (!this.onBeforeClose()) {\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        return this.performAction(this.#closeAct, this.args.timeout, this.onActionFinish.bind(this, this.onAfterClose.bind(this), EVENTS.CLOSED, args), () => {\r\n            this.helper.removeClass(this.activeClassName, this.element)\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n        });;\r\n    }\r\n\r\n\r\n    /**\r\n     * Helper created for elements that animate - perfroms an action *add*, after timeout it performs *remove*.\r\n     * \r\n     * @param action - action to perfrom\r\n     * @param timeout - timeout specified for action removal\r\n     * @param onFinish - callback to be performed after action is finished after removal\r\n     * @param callback - optional - callback to be executed in mutation on action removal, e.g. additional DOM changes on element\r\n     */\r\n    async performAction(actions: ICuiComponentAction[], timeout: number, onFinish: () => void, callback?: () => void): Promise<boolean> {\r\n        if (await this.actionsHelper.performActions(this.element, actions, timeout, callback)) {\r\n            onFinish();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private openFromEvent(args: any) {\r\n        this.open(args);\r\n    }\r\n\r\n    private closeFromEvent(args: any) {\r\n        this.close(args);\r\n    }\r\n\r\n    private onActionFinish(callback: () => void, event: string, args: any) {\r\n        callback();\r\n        this.emitEvent(event, {\r\n            timestamp: Date.now(),\r\n            state: args\r\n        })\r\n        this.isLocked = false;\r\n    }\r\n\r\n    private async onKeyClose(ev: KeyDownEvent) {\r\n        if (this.args.escClose && ev.event.key === \"Escape\" || is(this.args.keyClose) && ev.event.key === this.args.keyClose) {\r\n            await this.close('Closed by key');\r\n        }\r\n    }\r\n    // Abstract\r\n    abstract onInit(): void;\r\n    abstract onUpdate(): void;\r\n    abstract onDestroy(): void;\r\n    abstract onBeforeOpen(): boolean;\r\n    abstract onAfterOpen(): void;\r\n    abstract onAfterClose(): void;\r\n    abstract onBeforeClose(): boolean;\r\n\r\n}\r\n\r\nexport abstract class CuiMutableHandler<T extends ICuiParsable> extends CuiHandlerBase<T> {\r\n    #mutionHandler: ICuiComponentMutationObserver;\r\n    constructor(componentName: string, element: HTMLElement, attribute: string, args: T, utils: CuiUtils) {\r\n        super(componentName, element, attribute, args, utils);\r\n        this.#mutionHandler = new CuiComponentMutationHandler(element);\r\n        this.#mutionHandler.onMutation(this.mutation.bind(this))\r\n    }\r\n\r\n    onHandle() {\r\n        this.onInit();\r\n        this.#mutionHandler.observe();\r\n    }\r\n\r\n\r\n    onRefresh() {\r\n        this.#mutionHandler.unobserve();\r\n        this.onUpdate();\r\n        this.#mutionHandler.observe();\r\n    }\r\n\r\n    onRemove() {\r\n        this.#mutionHandler.unobserve();\r\n        this.onDestroy();\r\n    }\r\n\r\n    /**\r\n     * Callback attached to mutation observer set on root element\r\n     * \r\n     * @param record - mutation records\r\n     */\r\n    mutation(records: MutationRecord[]): void {\r\n        this._log.debug(\"Element mutation\", \"mutation\")\r\n        this.onMutation(records.reduce<CuiChildMutation>((result: CuiChildMutation, item: MutationRecord) => {\r\n            if (item.type !== \"childList\") {\r\n                return result;\r\n            }\r\n            if (item.addedNodes.length > 0) {\r\n                result.added.push(...item.addedNodes)\r\n            }\r\n            if (item.removedNodes.length > 0) {\r\n                result.removed.push(...item.removedNodes)\r\n            }\r\n            return result;\r\n        }, {\r\n            added: [],\r\n            removed: []\r\n        }));\r\n    }\r\n\r\n    abstract onMutation(record: CuiChildMutation): void;\r\n    abstract onInit(): void;\r\n    abstract onUpdate(): void;\r\n    abstract onDestroy(): void;\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiSwitchable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiChildMutation, CuiMutableHandler } from \"../../core/handlers/base\";\r\nimport { getIntOrDefault, is, isStringTrue, replacePrefix, getStringOrDefault } from \"../../core/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"../../core/utils/statics\";\r\n\r\n\r\n/**\r\n * \r\n */\r\n\r\nexport interface CuiAccordionEvent {\r\n    index: number;\r\n    previous: number;\r\n    currentTarget: Element;\r\n    previousTarget: Element;\r\n    timestamp: number;\r\n}\r\n\r\ninterface CuiAccordionTarget {\r\n    element: Element,\r\n    listener?: any\r\n}\r\n\r\nconst ACCORDION_TITLE_CLS = '> * > .{prefix}-accordion-title';\r\nconst ACCORDION_ITEMS_CLS = '> *';\r\n\r\nexport class CuiAccordionArgs {\r\n    single: boolean;\r\n    selector: string;\r\n    items: string;\r\n    timeout: number;\r\n    animation: boolean;\r\n\r\n    #defTitleSelector: string;\r\n    #defItemsSelector: string;\r\n    #defTimeout: number;\r\n    constructor(prefix: string, timeout: number | undefined) {\r\n        this.#defTitleSelector = replacePrefix(ACCORDION_TITLE_CLS, prefix);\r\n        this.#defItemsSelector = replacePrefix(ACCORDION_ITEMS_CLS, prefix);\r\n        this.animation = false;\r\n        this.#defTimeout = timeout ?? 300;\r\n        this.single = false;\r\n        this.selector = SCOPE_SELECTOR + this.#defTitleSelector;\r\n        this.items = SCOPE_SELECTOR + this.#defItemsSelector;\r\n        this.timeout = this.#defTimeout;\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args)) {\r\n            this.single = isStringTrue(args.single);\r\n            this.selector = SCOPE_SELECTOR + getStringOrDefault(args.selector, this.#defTitleSelector);\r\n            this.items = SCOPE_SELECTOR + getStringOrDefault(args.content, this.#defItemsSelector);\r\n            this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n            this.animation = isStringTrue(args.animation);\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class CuiAccordionComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-accordion`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiAccordionHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiAccordionHandler extends CuiMutableHandler<CuiAccordionArgs> implements ICuiSwitchable {\r\n    #items: Element[];\r\n    #targets: CuiAccordionTarget[];\r\n    #switchEventId: string | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiAccordionHandler\", element, attribute, new CuiAccordionArgs(prefix, utils.setup.animationTime), utils);\r\n        this.#switchEventId = null;\r\n        this.#items = [];\r\n        this.#targets = [];\r\n        this.#switchEventId = null;\r\n    }\r\n\r\n    onInit(): void {\r\n        if (this.args.isValid()) {\r\n            try {\r\n                this.initTargets();\r\n                this.#switchEventId = this.onEvent(EVENTS.SWITCH, this.onSwitch.bind(this))\r\n            } catch (e) {\r\n                this._log.exception(e, 'handle')\r\n            }\r\n            this._log.debug(\"Initialized\", \"handle\")\r\n        }\r\n    }\r\n\r\n    onUpdate(): void {\r\n        try {\r\n            this.initTargets();\r\n        } catch (e) {\r\n            this._log.exception(e, 'handle')\r\n        }\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.detachEvent(EVENTS.SWITCH, this.#switchEventId)\r\n    }\r\n\r\n    onMutation(mutations: CuiChildMutation) {\r\n        if (mutations.added.length > 0 || mutations.removed.length > 0)\r\n            this.initTargets();\r\n    }\r\n\r\n    async switch(index: number): Promise<boolean> {\r\n        this._log.debug(\"Switch to: \" + index);\r\n        if (index < 0 || this.isLocked || !this.isInitialized) {\r\n            return false;\r\n        }\r\n\r\n        this.#items = this.queryItems();\r\n        if (this.#items.length <= index) {\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        const current = this.#items[index]\r\n        if (this.helper.hasClass(this.activeClassName, current)) {\r\n            this.helper.removeClassesAs(current, this.activeClassName)\r\n        } else {\r\n            if (this.args.single) {\r\n                this.closeAllExcept(index)\r\n            }\r\n            this.helper.setClassesAs(current, this.activeClassName)\r\n\r\n        }\r\n        this.emitEvent(EVENTS.SWITCHED, {\r\n            index: index,\r\n            currentTarget: current,\r\n            timestamp: Date.now()\r\n        })\r\n        this.isLocked = false;\r\n        return true;\r\n    }\r\n\r\n    onSwitch(index: any): void {\r\n        this.switch(getIntOrDefault(index, -1)).then(() => {\r\n            this._log.debug(\"Switch from event to \" + index);\r\n        });\r\n    }\r\n\r\n    initTargets() {\r\n        this.#items = this.queryItems();\r\n        const t = this.element.querySelectorAll(this.args.selector);\r\n        this.#targets = [];\r\n        t.forEach((item: Element, index: number) => {\r\n            let target: CuiAccordionTarget = { element: item };\r\n            this.setListener(target, index)\r\n            this.#targets.push(target);\r\n        })\r\n    }\r\n\r\n    closeAllExcept(current: number) {\r\n        this.mutate(() => {\r\n            this.#items.forEach((item: Element, index: number) => {\r\n                if (current !== index && this.helper.hasClass(this.activeClassName, item)) {\r\n                    item.classList.remove(this.activeClassName)\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    setListener(target: CuiAccordionTarget, index: number) {\r\n        target.listener = () => {\r\n            this.switch(index);\r\n        }\r\n        target.element.addEventListener('click', target.listener)\r\n    }\r\n\r\n    removeListener(target: CuiAccordionTarget) {\r\n        if (target.listener) {\r\n            target.element.removeEventListener('click', target.listener);\r\n        }\r\n    }\r\n\r\n    queryItems(): Element[] {\r\n        return [...this.element.querySelectorAll(this.args.items)]\r\n    }\r\n}","import { AnimatorError } from \"../models/errors\";\r\nimport { is } from \"../utils/functions\";\r\nimport { ICuiPropertyAnimator, AnimatorPropertyValue, TransformAnimatorProperty } from \"./interfaces\";\r\n\r\n/**\r\n * Changes the opacity of the element from 0 to 1\r\n */\r\nexport class OpacityAnimator implements ICuiPropertyAnimator<AnimatorPropertyValue> {\r\n    length: number;\r\n    from: number;\r\n    to: number;\r\n    rtl: boolean;\r\n    constructor() {\r\n        this.length = this.to = this.from = -1;\r\n        this.rtl = false;\r\n    }\r\n\r\n    setProperty(prop: AnimatorPropertyValue): void {\r\n        if (!prop || !is(prop.from) || !is(prop.to)) {\r\n            throw new AnimatorError(\"[OpacityAnimator] Property has incorrect format\");\r\n        }\r\n        this.from = prop.from;\r\n        this.to = prop.to;\r\n        this.length = Math.abs(this.to - this.from);\r\n        this.rtl = this.from > this.to;\r\n    }\r\n\r\n    perform(element: any, progress: number, factor: number) {\r\n        if (this.to < 0) {\r\n            return;\r\n        }\r\n        let current = this.length * progress\r\n        if (element[\"style\"]) {\r\n            element.style.opacity = this.rtl ? Math.max(this.from - current, 0) : Math.min(this.from + current, 1);\r\n        }\r\n\r\n    }\r\n}\r\n\r\n/**\r\n * Changes any style property of the element\r\n */\r\nexport class PropertyAnimator implements ICuiPropertyAnimator<AnimatorPropertyValue> {\r\n    length: number;\r\n    from: number;\r\n    to: number;\r\n    rtl: boolean;\r\n    property: string;\r\n    #unit: string | undefined;\r\n    constructor(property: string) {\r\n        if (!is(property)) {\r\n            throw new AnimatorError(\"[PropertyAnimator] Valid property is required\");\r\n        }\r\n        this.property = property;\r\n        this.length = this.to = this.from = -1;\r\n        this.rtl = false;\r\n        this.#unit = \"\";\r\n    }\r\n\r\n    setProperty(prop: AnimatorPropertyValue) {\r\n        if (!prop || !is(prop.from) || !is(prop.to)) {\r\n            throw new AnimatorError(\"[PropertyAnimator] Property has incorrect format\");\r\n        }\r\n        this.from = prop.from;\r\n        this.to = prop.to;\r\n        this.length = Math.abs(this.to - this.from);\r\n        this.rtl = this.from > this.to;\r\n        this.#unit = prop.unit;\r\n    }\r\n\r\n    perform(element: any, progress: number, factor: number) {\r\n        if (!this.property) {\r\n            return;\r\n        }\r\n        let current = this.length * progress\r\n        if (element[\"style\"]) {\r\n            element.style[this.property] = this.createValue(this.rtl ? this.from - current : this.from + current, this.#unit);\r\n        }\r\n    }\r\n\r\n    private createValue(value: number, unit?: string) {\r\n        return `${value}${unit ?? \"\"}`;\r\n    }\r\n}\r\n\r\n/**\r\n * Changes transform property of the element. Supports mulitple properties at the time\r\n */\r\nexport class TransformAnimator implements ICuiPropertyAnimator<TransformAnimatorProperty> {\r\n    prop: TransformAnimatorProperty | undefined;\r\n    constructor() {\r\n        this.prop = undefined;\r\n    }\r\n\r\n    setProperty(prop: TransformAnimatorProperty) {\r\n        if (!prop) {\r\n            throw new AnimatorError(\"[TransformAnimator] Property has incorrect format\");\r\n        }\r\n        this.prop = prop;\r\n    }\r\n\r\n    build(progress: number) {\r\n        let props: string[] = [];\r\n        for (let name in this.prop) {\r\n            let cur = this.prop[name];\r\n            let diff = Math.abs(cur.to - cur.from);\r\n            let rtl = cur.from > cur.to;\r\n            let val = rtl ? cur.from - (diff * progress) : cur.from + (diff * progress)\r\n            props.push(this.buildSingle(name, val, cur.unit))\r\n        }\r\n\r\n        return props.join(\" \");\r\n    }\r\n\r\n    buildSingle(name: string, value: number, unit?: string) {\r\n        return `${name}(${value}${unit})`;\r\n    }\r\n\r\n    perform(element: any, progress: number) {\r\n        if (!this.prop) {\r\n            return;\r\n        }\r\n        if (element[\"style\"]) {\r\n            element.style.transform = this.build(progress);\r\n        }\r\n\r\n    }\r\n}\r\n","import { is } from \"../utils/functions\";\r\nimport { OpacityAnimator, TransformAnimator, PropertyAnimator } from \"./animators\";\r\nimport { ICuiPropertyAnimator, AnimationProperty, AnimatorPropertyValue, TransformAnimatorProperty, OnAnimationFinishCallback } from \"./interfaces\";\r\n\r\nexport type PropsTypes = AnimatorPropertyValue | TransformAnimatorProperty;\r\n\r\nexport class CuiAnimation {\r\n    #engine: CuiAnimationEngine;\r\n    #timeout: number;\r\n    #factory: AnimatorFactory;\r\n    #onError: ((e: Error) => void) | undefined;\r\n    constructor(element?: Element) {\r\n        this.#engine = new CuiAnimationEngine(true);\r\n        this.#onError = undefined;\r\n        this.#timeout = 0;\r\n        this.#factory = new AnimatorFactory();\r\n        if (element) {\r\n            this.#engine.setElement(element);\r\n        }\r\n    }\r\n\r\n    setElement(element: Element) {\r\n        this.#engine.setElement(element);\r\n    }\r\n\r\n    setTimeout(timeout: number) {\r\n        this.#timeout = timeout;\r\n    }\r\n\r\n    onError(callback: (e: Error) => void) {\r\n        this.#onError = callback;\r\n        this.#engine.setOnError(callback)\r\n    }\r\n    onFinish(callback: OnAnimationFinishCallback) {\r\n        this.#engine.onFinish(callback);\r\n    }\r\n\r\n    perform(props: AnimationProperty<PropsTypes>, timeout?: number, factor?: number) {\r\n        if (!is(props)) {\r\n            this.reportError(new Error(\"Animation property cannot be empty\"))\r\n            return;\r\n        }\r\n        let animators = [];\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = this.#factory.get(prop);\r\n                if (!animator) return;\r\n                animator.setProperty(props[prop]);\r\n                animators.push(animator);\r\n                this.#engine.setAnimators(animators);\r\n                this.#engine.animate(timeout ?? this.#timeout)\r\n            }\r\n        } catch (e) {\r\n            this.reportError(e);\r\n            return;\r\n        }\r\n    }\r\n\r\n    private reportError(e: Error) {\r\n        if (this.#onError) {\r\n            this.#onError(e)\r\n        } else {\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nclass AnimatorFactory {\r\n    get(id: string): ICuiPropertyAnimator<AnimatorPropertyValue | TransformAnimatorProperty> | undefined {\r\n        if (!is(id)) {\r\n            return undefined;\r\n        }\r\n        switch (id) {\r\n            case \"opacity\":\r\n                return new OpacityAnimator();\r\n            case \"transform\":\r\n                return new TransformAnimator();\r\n            default:\r\n                return new PropertyAnimator(id);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport class CuiAnimationEngine {\r\n    #onFinishCallback: OnAnimationFinishCallback | undefined;\r\n    #animators: ICuiPropertyAnimator<PropsTypes>[];\r\n    #lock: boolean;\r\n    // Needed in animation perform - set on first animation exec, cleaned on end\r\n    #animStartStamp: number | undefined;\r\n    #element: Element | undefined;\r\n    #cleanOnFinish: boolean;\r\n    #errorOccured: boolean;\r\n    #factory: AnimatorFactory;\r\n    #onError: ((e: Error) => void) | undefined;\r\n    constructor(cleanOnFinish?: boolean) {\r\n        this.#animators = [];\r\n        this.#element = undefined;\r\n        this.#animStartStamp = undefined;\r\n        this.#cleanOnFinish = cleanOnFinish ?? false;\r\n        this.#factory = new AnimatorFactory();\r\n        this.#lock = false;\r\n        this.#onFinishCallback = undefined;\r\n        this.#errorOccured = false;\r\n        this.#onError = undefined;\r\n    }\r\n\r\n    onFinish(callback: OnAnimationFinishCallback) {\r\n        this.#onFinishCallback = callback;\r\n    }\r\n\r\n    setAnimators(animators: ICuiPropertyAnimator<PropsTypes>[]) {\r\n        this.#animators = animators;\r\n    }\r\n\r\n    setProps(props: AnimationProperty<PropsTypes>) {\r\n        if (!is(props)) {\r\n            return;\r\n        }\r\n        this.#animators = [];\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = this.#factory.get(prop);\r\n                if (!animator) return;\r\n                animator.setProperty(props[prop]);\r\n                this.#animators.push(animator);\r\n            }\r\n        } catch (e) {\r\n            this.reportError(e);\r\n        }\r\n    }\r\n\r\n    setElement(element: Element) {\r\n        this.#element = element;\r\n    }\r\n\r\n    setOnError(callback: (e: Error) => void) {\r\n        this.#onError = callback;\r\n    }\r\n\r\n    animate(timeout: number, progress?: number, revert?: boolean): void {\r\n        if (this.#lock) {\r\n            return;\r\n        }\r\n        if (!this.#element || this.#animators.length === 0) {\r\n            this.reportError(new Error(\"Animation cannot be performed: element or animators are not set\"));\r\n            return;\r\n        }\r\n        let animationProgress = progress ?? 0;\r\n        let shouldCalcRevert = revert ? revert : false;\r\n        this.#lock = true;\r\n        requestAnimationFrame(this.animateAsync.bind(this, timeout, animationProgress, shouldCalcRevert))\r\n    }\r\n\r\n    isLocked(): boolean {\r\n        return this.#lock;\r\n    }\r\n\r\n    private animateAsync(timeout: number, initialProgress: number, revert: boolean, timestamp: number) {\r\n        if (!this.#animStartStamp) {\r\n            this.#animStartStamp = timestamp;\r\n        }\r\n\r\n        let pr = timestamp - this.#animStartStamp;\r\n        let animationProgress = pr / timeout;\r\n        let currProgress = 0;\r\n        if (initialProgress === 0) {\r\n            currProgress = animationProgress;\r\n        } else {\r\n            currProgress = revert ? initialProgress - (animationProgress * initialProgress) : initialProgress + (animationProgress * initialProgress)\r\n        }\r\n        this.callUpdate(revert ? Math.max(currProgress, 0) : Math.min(currProgress, 1), 1);\r\n        if (pr < timeout && !this.#errorOccured) {\r\n            requestAnimationFrame(this.animateAsync.bind(this, timeout, initialProgress, revert))\r\n        } else {\r\n            this.endAnimation(revert);\r\n        }\r\n    }\r\n\r\n    private endAnimation(reverted: boolean) {\r\n        if (this.#cleanOnFinish && this.#element) {\r\n            this.#element.removeAttribute(\"style\");\r\n        }\r\n        if (this.#onFinishCallback) {\r\n            this.#onFinishCallback(this.#element, reverted, this.#errorOccured);\r\n        }\r\n        this.#errorOccured = false;\r\n        this.#animStartStamp = undefined;\r\n        this.#lock = false;\r\n    }\r\n\r\n    private callUpdate(progress: number, factor: number) {\r\n        try {\r\n            this.#animators.forEach(animator => animator.perform(this.#element, progress, factor));\r\n        } catch (e) {\r\n            this.reportError(e);\r\n            this.#errorOccured = true;\r\n        }\r\n\r\n    }\r\n\r\n    private reportError(e: Error) {\r\n        if (this.#onError) {\r\n            this.#onError(e);\r\n        } else {\r\n            console.error(\"An error occured in CuiAnimtionEngine\");\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class CuiSwipeAnimationEngine {\r\n    #element: Element | undefined;\r\n    #animators: ICuiPropertyAnimator<PropsTypes>[];\r\n    #animationEngine: CuiAnimationEngine;\r\n    #factory: AnimatorFactory;\r\n    #onError: ((e: Error) => void) | undefined;\r\n    constructor(shouldCleanOnFinish?: boolean) {\r\n        this.#element = undefined;\r\n        this.#animators = [];\r\n        this.#animationEngine = new CuiAnimationEngine(shouldCleanOnFinish);\r\n        this.#factory = new AnimatorFactory();\r\n        this.#onError = undefined;\r\n    }\r\n\r\n    setElement(element: Element) {\r\n        this.#element = element;\r\n    }\r\n\r\n    setOnFinish(callback: OnAnimationFinishCallback) {\r\n        this.#animationEngine.onFinish(callback);\r\n    }\r\n\r\n    setOnError(callback: (e: Error) => void) {\r\n        this.#onError = callback;\r\n        this.#animationEngine.setOnError(callback);\r\n    }\r\n\r\n    setProps(props: AnimationProperty<PropsTypes>) {\r\n        if (!is(props)) {\r\n            return;\r\n        }\r\n        this.#animators = [];\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = this.#factory.get(prop);\r\n                if (!animator) return;\r\n                animator.setProperty(props[prop]);\r\n                this.#animators.push(animator);\r\n            }\r\n        } catch (e) {\r\n            this.reportError(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Perform single update on animators\r\n     * @param progress - progress value to be set to animators 0..1\r\n     */\r\n    update(progress: number) {\r\n        if (!this.#element || this.#animators.length === 0) {\r\n            return;\r\n        }\r\n        this.#animators.forEach(animator => animator.perform(this.#element, Math.min(progress, 1), 1))\r\n    }\r\n\r\n    /**\r\n     * Perform single update on animators in RAF\r\n     * @param progress - progress value to be set to animators 0..1\r\n     */\r\n    updateAsync(progress: number) {\r\n        requestAnimationFrame(this.update.bind(this, progress));\r\n    }\r\n\r\n    /**\r\n     * Finish swipe animation using animation engine\r\n     * @param progress - initial progress value 0..1\r\n     * @param timeout - time for animation to perform\r\n     * @param revert - whether animation should return back to 0 or progress to the end\r\n     */\r\n    finish(progress: number, timeout: number, revert: boolean) {\r\n        if (this.#element)\r\n            this.#animationEngine.setElement(this.#element);\r\n        this.#animationEngine.setAnimators(this.#animators);\r\n        this.#animationEngine.animate(timeout, progress, revert);\r\n    }\r\n\r\n    private reportError(e: Error) {\r\n        if (this.#onError) {\r\n            this.#onError(e);\r\n        } else {\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n}","import { AnimationDefinition, SWIPE_ANIMATIONS_DEFINITIONS } from \"../../core/animation/definitions\";\r\nimport { CuiInteractableArgs, CuiInteractableHandler } from \"../../core/handlers/base\";\r\nimport { CuiSwipeAnimationEngine } from \"../../core/animation/engine\";\r\nimport { ICuiMoveEvent } from \"../../core/listeners/move\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\nimport { boolStringOrDefault, getIntOrDefault, getStringOrDefault, replacePrefix } from \"../../core/utils/functions\";\r\nimport { ICuiParsable, ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { EVENTS, CLASSES } from \"../../core/utils/statics\";\r\n\r\nconst BANNER_OPEN_ANIMATION: string = \".{prefix}-animation-fade-in\";\r\nconst BANNER_CLOSE_ANIMATION: string = \".{prefix}-animation-fade-out\";\r\n\r\nexport class CuiBannerArgs implements ICuiParsable, CuiInteractableArgs {\r\n    timeout: number;\r\n    swipe: boolean;\r\n\r\n    openAct: string;\r\n    closeAct: string;\r\n    // Not in use\r\n    escClose: boolean;\r\n    keyClose: string;\r\n\r\n    #defTimeout: number;\r\n    #prefix: string;\r\n    constructor(prefix: string, timeout: number | undefined) {\r\n        this.#defTimeout = timeout ?? 300;\r\n        this.#prefix = prefix;\r\n\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.timeout = this.#defTimeout;\r\n        this.swipe = false;\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n    }\r\n\r\n\r\n    parse(args: any) {\r\n        this.swipe = boolStringOrDefault(args.swipe, false);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(BANNER_OPEN_ANIMATION, this.#prefix))\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(BANNER_CLOSE_ANIMATION, this.#prefix))\r\n    }\r\n}\r\n\r\nexport class CuiBanerComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-banner`;\r\n\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiBannerHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiBannerHandler extends CuiInteractableHandler<CuiBannerArgs> {\r\n    #swipeEngine: CuiSwipeAnimationEngine;\r\n    #isTracking: boolean;\r\n    #startX: number;\r\n    #ratio: number;\r\n    #swipeAnimation: AnimationDefinition;\r\n    #moveEventId: string | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiBannerHandler\", element, attribute, new CuiBannerArgs(prefix, utils.setup.animationTime), utils);\r\n        this.#swipeEngine = new CuiSwipeAnimationEngine(true);\r\n        this.#swipeEngine.setOnFinish(this.onSwipeFinish.bind(this));\r\n        this.#swipeEngine.setElement(this.element)\r\n        this.#startX = -1;\r\n        this.#ratio = 0;\r\n        this.#swipeAnimation = SWIPE_ANIMATIONS_DEFINITIONS[\"fade\"];\r\n        this.#moveEventId = null;\r\n        this.#isTracking = false;\r\n    }\r\n\r\n    onInit(): void {\r\n        //   this.#moveEventId = this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this));\r\n        if (!this.isActive()) {\r\n            this.open();\r\n        }\r\n    }\r\n    onUpdate(): void {\r\n\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, this.#moveEventId);\r\n    }\r\n\r\n    onBeforeOpen(): boolean {\r\n        return true;\r\n    }\r\n\r\n    onAfterOpen(): void {\r\n        if (this.args.swipe) {\r\n            this.#moveEventId = this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this));\r\n        }\r\n    }\r\n    onAfterClose(): void {\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, this.#moveEventId);\r\n    }\r\n\r\n    onBeforeClose(): boolean {\r\n        return true;\r\n    }\r\n\r\n    onMove(data: ICuiMoveEvent) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        let current = this.element as HTMLElement;\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (this.#isTracking || !current.contains((data.target as Node))) {\r\n                    return;\r\n                }\r\n                this.#isTracking = true;\r\n                this.#startX = data.x;\r\n                this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n                data.event.preventDefault();\r\n                break;\r\n            case \"up\":\r\n                if (!this.#isTracking && this.#ratio == 0) {\r\n                    break;\r\n                }\r\n\r\n                let absRatio = Math.abs(this.#ratio);\r\n                let timeout = absRatio * this.args.timeout;\r\n                let back = absRatio <= 0.4;\r\n                // Lock component until animation is finished\r\n                this.isLocked = true;\r\n                this.#swipeEngine.finish(absRatio, timeout, back);\r\n                this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n                this.#isTracking = false;\r\n                break;\r\n            case \"move\":\r\n                if (this.#isTracking) {\r\n                    let newRatio = (data.x - this.#startX) / current.offsetWidth;\r\n                    if (this.#ratio >= 0 && newRatio <= 0 || this.#ratio <= 0 && newRatio > 0) {\r\n                        this.#swipeEngine.setProps(newRatio > 0 ? this.#swipeAnimation.current.right : this.#swipeAnimation.current.left);\r\n                    }\r\n                    this.#ratio = newRatio;\r\n                    this.mutate(() => {\r\n                        this.#swipeEngine.update(Math.abs(this.#ratio));\r\n                    })\r\n                    data.event.preventDefault();\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onSwipeFinish(element: Element | undefined, reverted: boolean, error: boolean) {\r\n        this.isLocked = false;\r\n        if (!reverted) {\r\n            this.helper.removeClass(this.activeClassName, this.element)\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n        }\r\n        this.#ratio = 0;\r\n        this.#startX = 0;\r\n\r\n    }\r\n}","import { createElementFromString, getIntOrDefault, is } from \"../utils/functions\";\r\n\r\nexport class IconBuilder {\r\n    #element: string;\r\n    #scale: number;\r\n    #appender: IconScaleAppender;\r\n\r\n    constructor(svgString: string) {\r\n        this.#element = svgString;\r\n        this.#scale = 1;\r\n        this.#appender = new IconScaleAppender();\r\n    }\r\n\r\n    setScale(scale: number): IconBuilder {\r\n        this.#scale = scale\r\n        return this\r\n    }\r\n\r\n    build(): Element | null {\r\n        let created = createElementFromString(this.#element)\r\n        if (is(created) && this.#scale) {\r\n            // @ts-ignore created is checked already\r\n            this.#appender.append(created, this.#scale)\r\n        }\r\n        return created\r\n    }\r\n}\r\n\r\nexport class IconScaleAppender {\r\n    append(element: Element, value: number): void {\r\n        let width = getIntOrDefault(element.getAttribute(\"width\"), 20)\r\n        let height = getIntOrDefault(element.getAttribute(\"height\"), 20);\r\n        element.setAttribute(\"width\", (width * value).toString())\r\n        element.setAttribute(\"height\", (height * value).toString())\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { is, getRangeValue, isString, getIntOrDefault } from \"../../core/utils/functions\";\r\nimport { ICONS, EVENTS } from \"../../core/utils/statics\";\r\nimport { IconBuilder } from \"../../core/builders/icon\";\r\n\r\nexport interface CuiCircleProgressChnaged {\r\n    timestamp: number;\r\n    progress: number;\r\n}\r\n\r\nexport class CuiCircleArgs implements ICuiParsable {\r\n    progress: number;\r\n    constructor() {\r\n        this.progress = 0;\r\n    }\r\n\r\n    parse(val: any): void {\r\n        if (!is(val)) {\r\n            this.progress = 0;\r\n        }\r\n        else if (isString(val)) {\r\n            this.progress = getIntOrDefault(val, 0);\r\n        } else {\r\n            this.progress = getIntOrDefault(val.progress, 0);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class CuiCircleComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = (prefix ?? 'cui') + '-circle-progress';\r\n        ICONS['special_circle_progress'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"  class=\\\"circle-progress\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle-progress-path\\\" d=\\\"M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047\\\"></path></svg>\";\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiCircleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiCircleHandler extends CuiHandler<CuiCircleArgs> {\r\n    #factor: number;\r\n    #full: number;\r\n    #path: any;\r\n    #attr: string;\r\n    #progressEventId: string | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiCircleHandler\", element, attribute, new CuiCircleArgs(), utils);\r\n        this.#factor = this.#full = 0;\r\n        this.#path = null\r\n        this.#attr = attribute;\r\n        this.#progressEventId = null;\r\n    }\r\n\r\n    onInit(): void {\r\n        const iconSvg = new IconBuilder(ICONS['special_circle_progress']).build();\r\n        if (!is(iconSvg)) {\r\n            this.logError(\"SVG circle was not created\", \"onInit\")\r\n            return;\r\n        }\r\n        const svg = this.element.querySelector('svg')\r\n        if (is(svg)) {\r\n            //@ts-ignore svg checked\r\n            svg.remove();\r\n        }\r\n        //@ts-ignore iconSvg checked\r\n        this.element.appendChild(iconSvg);\r\n        this.#path = this.element.querySelector('.circle-progress-path');\r\n        this.#full = this.#path.getTotalLength();\r\n        this.#factor = this.#full / 100;\r\n        this.fetch(this.readStyle)\r\n        this.#progressEventId = this.onEvent(EVENTS.PROGRESS_CHANGE, this.onSetProgress.bind(this))\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.fetch(this.readStyle)\r\n        this.emitEvent(EVENTS.PROGRESS_CHANGED, {\r\n            timestamp: Date.now(),\r\n            progress: this.args.progress\r\n        })\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.detachEvent(EVENTS.PROGRESS_CHANGE, this.#progressEventId);\r\n    }\r\n\r\n    onSetProgress(val: any) {\r\n        if (is(val)) {\r\n            this.element.setAttribute(this.#attr, val);\r\n        }\r\n    }\r\n\r\n    private updateStyle(value: number) {\r\n        this.#path.style.strokeDashoffset = value;\r\n    }\r\n\r\n    private readStyle(): void {\r\n        if (this.prevArgs && this.args.progress === this.prevArgs.progress) {\r\n            return;\r\n        }\r\n        const progress = getRangeValue(this.args.progress, 0, 100);\r\n\r\n        this.mutate(this.updateStyle, this.#full - this.#factor * progress);\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, is, isString, isStringTrue, getParentCuiElement, are } from \"../../core/utils/functions\";\r\nimport { CuiActionsListFactory } from \"../../core/utils/actions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiCloseArgs {\r\n    target: string;\r\n    action: string;\r\n    timeout: number;\r\n    prevent: boolean;\r\n    state: string;\r\n    #defTimeout: number;\r\n\r\n    constructor(timeout?: number) {\r\n        this.target = \"\";\r\n        this.action = \"\";\r\n        this.prevent = false;\r\n        this.state = \"\";\r\n        this.#defTimeout = timeout ?? 300;\r\n        this.timeout = this.#defTimeout;\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args\r\n            this.action = \"\"\r\n            this.timeout = this.#defTimeout;\r\n            this.prevent = false\r\n            this.state = \"\";\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, \"\");\r\n        this.action = args.action;\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.prevent = args.prevent && isStringTrue(args.prevent)\r\n        this.state = args.state;\r\n    }\r\n}\r\n\r\nexport class CuiCloseComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-close`;\r\n\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiCloseHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiCloseHandler extends CuiHandler<CuiCloseArgs> {\r\n    #eventId: string | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiCloseHandler\", element, attribute, new CuiCloseArgs(utils.setup.animationTime), utils);\r\n        this.#eventId = null;\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    onInit(): void {\r\n        this.element.addEventListener('click', this.onClick)\r\n        this.#eventId = this.onEvent(EVENTS.CLOSE, this.onClose.bind(this));\r\n    }\r\n\r\n    onUpdate(): void {\r\n        //\r\n    }\r\n    onDestroy(): void {\r\n        this.element.removeEventListener('click', this.onClick)\r\n        this.detachEvent(EVENTS.CLOSE, this.#eventId);\r\n    }\r\n\r\n    onClick(ev: MouseEvent) {\r\n        this.onClose(ev);\r\n        if (this.args.prevent)\r\n            ev.preventDefault();\r\n    }\r\n\r\n    onClose(ev: MouseEvent) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        const target = this.getTarget();\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.args.target} not found`, 'onClick')\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        //@ts-ignore target is checked\r\n        this.run(target).then((result) => {\r\n            this.onActionFinish(ev, result);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.isLocked = false;\r\n        })\r\n    }\r\n\r\n    private async run(target: Element): Promise<boolean> {\r\n        let cuiId = (target as any).$cuid;\r\n        if (is(cuiId)) {\r\n            await this.utils.bus.emit(EVENTS.CLOSE, cuiId, this.args.state);\r\n            return false;\r\n        } else if (are(this.args.action, this.args.timeout)) {\r\n            let actions = CuiActionsListFactory.get(this.args.action);\r\n            return this.actionsHelper.performActions(target, actions, this.args.timeout, () => {\r\n                this.removeActiveClass(target);\r\n            });\r\n        } else {\r\n            this.removeActiveClassAsync(target);\r\n            return true;\r\n        }\r\n    }\r\n    private removeActiveClass(target: Element) {\r\n        if (is(target) && this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.removeClass(this.activeClassName, target);\r\n        }\r\n    }\r\n\r\n    private removeActiveClassAsync(target: Element) {\r\n        this.fetch(() => {\r\n            if (is(target) && this.helper.hasClass(this.activeClassName, target)) {\r\n                this.helper.removeClassesAs(target, this.activeClassName);\r\n            }\r\n        })\r\n\r\n    }\r\n    private onActionFinish(ev: MouseEvent, shouldEmit: boolean) {\r\n\r\n        if (shouldEmit)\r\n            this.emitClose(ev);\r\n    }\r\n\r\n    private getTarget(): Element | undefined {\r\n        if (!is(this.args.target)) {\r\n            return getParentCuiElement(this.element);\r\n        }\r\n        return document.querySelector(this.args.target) ?? getParentCuiElement(this.element);\r\n    }\r\n\r\n    private emitClose(ev: MouseEvent) {\r\n        this.emitEvent(EVENTS.CLOSED, {\r\n            timestamp: Date.now(),\r\n            state: this.args.state,\r\n            event: ev\r\n        })\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"../../core/utils/functions\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\nimport { CuiInteractableArgs, CuiInteractableHandler } from \"../../core/handlers/base\";\r\n\r\nconst COVER_OPEN_ANIMATION_CLASS = '.{prefix}-dialog-default-in';\r\nconst COVER_CLOSE_ANIMATION_CLASS = '.{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-cover-open';\r\n\r\nexport interface CuiDialogEvent {\r\n    timestamp: number;\r\n}\r\n\r\nexport class CuiCoverArgs implements ICuiParsable, CuiInteractableArgs {\r\n    escClose: boolean;\r\n    timeout: number;\r\n    openAct: string;\r\n    closeAct: string;\r\n    keyClose: string;\r\n\r\n    #defTimeout: number;\r\n    #prefix: string;\r\n    constructor(prefix: string, defTimeout?: number) {\r\n        this.#defTimeout = defTimeout ?? 300;\r\n        this.#prefix = prefix;\r\n\r\n        this.escClose = false;\r\n        this.timeout = this.#defTimeout;\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.keyClose = \"\";\r\n\r\n\r\n    }\r\n\r\n\r\n    parse(args: any) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(COVER_OPEN_ANIMATION_CLASS, this.#prefix))\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(COVER_CLOSE_ANIMATION_CLASS, this.#prefix))\r\n    }\r\n}\r\n\r\nexport class CuiCoverComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-cover`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiCoverHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiCoverHandler extends CuiInteractableHandler<CuiCoverArgs> {\r\n\r\n    #bodyClass: string;\r\n    #scrollY: number;\r\n\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiDialogHandler\", element, attribute, new CuiCoverArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        this.#bodyClass = replacePrefix(bodyClass, prefix);\r\n        this.#scrollY = 0;\r\n\r\n        if (!utils.isPlugin(\"click-plugin\")) {\r\n            this.logWarning(\"WindowClick plugin is not available, outClose will not work\")\r\n        }\r\n        if (!utils.isPlugin(\"keys-plugin\")) {\r\n            this.logWarning(\"KeyObserver plugin is not available, escClose and keyClose will not work\")\r\n        }\r\n    }\r\n\r\n    onInit(): void {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n    }\r\n    onUpdate(): void {\r\n\r\n    }\r\n\r\n    onDestroy(): void {\r\n\r\n    }\r\n\r\n    onBeforeOpen(): boolean {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        this.#scrollY = window.pageYOffset;\r\n        return true;\r\n    }\r\n\r\n    onAfterOpen(): void {\r\n        this.helper.setClass(this.#bodyClass, document.body)\r\n        document.body.style.top = `-${this.#scrollY}px`;\r\n        AriaAttributes.setAria(this.element, 'aria-hidden', \"false\");\r\n    }\r\n\r\n    onAfterClose(): void {\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, (this.#scrollY || 0) * -1);\r\n        this.#scrollY = 0;\r\n        this.helper.removeClass(this.#bodyClass, document.body);\r\n        AriaAttributes.setAria(this.element, 'aria-hidden', \"true\");\r\n    }\r\n\r\n    onBeforeClose(): boolean {\r\n        return true;\r\n    }\r\n\r\n    private isAnyActive(): boolean {\r\n        return this.helper.hasClass(this.#bodyClass, document.body);\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\nimport { CuiInteractableArgs, CuiInteractableHandler } from \"../../core/handlers/base\";\r\n\r\nconst DIALOG_OPEN_ANIMATION_CLASS = '.{prefix}-dialog-default-in';\r\nconst DIALOG_CLOSE_ANIMATION_CLASS = '.{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-dialog-open';\r\nconst CONTAINER = '.{prefix}-dialog-container';\r\n\r\nexport interface CuiDialogEvent {\r\n    timestamp: number;\r\n}\r\n\r\nexport class CuiDialogArgs implements ICuiParsable, CuiInteractableArgs {\r\n    escClose: boolean;\r\n    outClose: boolean;\r\n    timeout: number;\r\n    openAct: string;\r\n    closeAct: string;\r\n    keyClose: string;\r\n\r\n    #defTimeout: number;\r\n    #prefix: string;\r\n    constructor(prefix: string, defTimeout?: number) {\r\n        this.#defTimeout = defTimeout ?? 300;\r\n        this.#prefix = prefix;\r\n\r\n        this.escClose = false;\r\n        this.outClose = false;\r\n        this.timeout = this.#defTimeout;\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.keyClose = \"\";\r\n    }\r\n\r\n\r\n    parse(args: any) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.outClose = isStringTrue(args.outClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(DIALOG_OPEN_ANIMATION_CLASS, this.#prefix))\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(DIALOG_CLOSE_ANIMATION_CLASS, this.#prefix))\r\n    }\r\n}\r\n\r\nexport class CuiDialogComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-dialog`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiDialogHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiDialogHandler extends CuiInteractableHandler<CuiDialogArgs> {\r\n    #prefix: string;\r\n    #bodyClass: string;\r\n    #scrollY: number;\r\n    #windowClickEventId: string | null;\r\n\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiDialogHandler\", element, attribute, new CuiDialogArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        this.#bodyClass = replacePrefix(bodyClass, prefix);\r\n        this.#prefix = prefix;\r\n        this.#scrollY = 0;\r\n        this.#windowClickEventId = null;\r\n\r\n        if (!utils.isPlugin(\"click-plugin\")) {\r\n            this.logWarning(\"WindowClick plugin is not available, outClose will not work\")\r\n        }\r\n        if (!utils.isPlugin(\"keys-plugin\")) {\r\n            this.logWarning(\"KeyObserver plugin is not available, escClose and keyClose will not work\")\r\n        }\r\n    }\r\n\r\n    onInit(): void {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n    }\r\n    onUpdate(): void {\r\n\r\n    }\r\n\r\n    onDestroy(): void {\r\n\r\n    }\r\n\r\n    onBeforeOpen(): boolean {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        this.#scrollY = window.pageYOffset;\r\n        return true;\r\n    }\r\n\r\n    onAfterOpen(): void {\r\n        if (this.args.outClose) {\r\n            this.#windowClickEventId = this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this));\r\n        }\r\n        this.helper.setClass(this.#bodyClass, document.body)\r\n        document.body.style.top = `-${this.#scrollY}px`;\r\n    }\r\n\r\n    onAfterClose(): void {\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, (this.#scrollY || 0) * -1);\r\n        this.#scrollY = 0;\r\n        this.helper.removeClass(this.#bodyClass, document.body);\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, this.#windowClickEventId);\r\n    }\r\n\r\n    onBeforeClose(): boolean {\r\n        return true;\r\n    }\r\n\r\n    private isAnyActive(): boolean {\r\n        return this.helper.hasClass(this.#bodyClass, document.body);\r\n    }\r\n\r\n    onWindowClick(ev: MouseEvent) {\r\n        let container = this.element.querySelector(replacePrefix(CONTAINER, this.#prefix));\r\n        if (container && !container.contains((ev.target as Node))) {\r\n            this.close('out').then(() => {\r\n                this._log.debug(\"Closed by click outside\")\r\n            });\r\n        }\r\n    }\r\n}","import { ICuiEventListener } from \"../models/interfaces\";\r\nimport { are } from \"../utils/functions\";\r\n\r\nexport interface CuiHoverEvent {\r\n    isHovering: boolean;\r\n    event: MouseEvent;\r\n    timestamp: number;\r\n}\r\nexport class CuiHoverListener implements ICuiEventListener<CuiHoverEvent> {\r\n    #target: Element;\r\n    #callback: ((t: CuiHoverEvent) => void) | undefined;\r\n    #inProgress: boolean;\r\n    #isHovering: boolean;\r\n    #isAttached: boolean;\r\n    #onOverBound: (ev: MouseEvent) => void;\r\n    #onMoveBound: (ev: MouseEvent) => void;\r\n    #onOutBound: (ev: MouseEvent) => void;\r\n\r\n    constructor(target: Element) {\r\n        this.#target = target;\r\n        this.#inProgress = false;\r\n        this.#isHovering = false;\r\n        this.#isAttached = false;\r\n        this.#callback = undefined;\r\n\r\n        this.#onMoveBound = this.onMouseMove.bind(this);\r\n        this.#onOutBound = this.onMouseOut.bind(this);\r\n        this.#onOverBound = this.onMouseOver.bind(this);\r\n\r\n    }\r\n\r\n    setCallback(callback: (t: CuiHoverEvent) => void): void {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#inProgress;\r\n    }\r\n    attach(): void {\r\n        // @ts-ignore\r\n        this.#target.addEventListener(\"mouseover\", this.#onOverBound);\r\n        // @ts-ignore\r\n        this.#target.addEventListener(\"mousemove\", this.#onMoveBound);\r\n        // @ts-ignore\r\n        this.#target.addEventListener(\"mouseout\", this.#onOutBound);\r\n        this.#isAttached = true;\r\n    }\r\n\r\n    detach(): void {\r\n        // @ts-ignore\r\n        this.#target.removeEventListener(\"mouseover\", this.#onOverBound);\r\n        // @ts-ignore\r\n        this.#target.removeEventListener(\"mousemove\", this.#onMoveBound);\r\n        // @ts-ignore\r\n        this.#target.removeEventListener(\"mouseout\", this.#onOutBound);\r\n        this.#isAttached = false;\r\n    }\r\n\r\n    private emit(mouseEvent: MouseEvent, force: boolean) {\r\n        if (!are(this.#callback)) {\r\n            return;\r\n        }\r\n        if (!force && this.#inProgress) {\r\n            return;\r\n        }\r\n        this.#inProgress = true;\r\n        window.requestAnimationFrame(this.invoke.bind(this, {\r\n            isHovering: this.#isHovering,\r\n            event: mouseEvent,\r\n            timestamp: Date.now()\r\n        }))\r\n    }\r\n\r\n    isAttached() {\r\n        return this.#isAttached;\r\n    }\r\n    private invoke(ev: CuiHoverEvent) {\r\n        if (this.#callback)\r\n            this.#callback(ev);\r\n        this.#inProgress = false;\r\n    }\r\n\r\n    private onMouseOver(ev: MouseEvent) {\r\n        this.#isHovering = true;\r\n        this.emit(ev, true);\r\n    }\r\n\r\n    private onMouseOut(ev: MouseEvent) {\r\n        this.#isHovering = false;\r\n        this.emit(ev, true);\r\n    }\r\n\r\n    private onMouseMove(ev: MouseEvent) {\r\n        this.emit(ev, false);\r\n    }\r\n}","import { CuiPositionError } from \"../models/errors\";\r\nimport { is } from \"../utils/functions\";\r\nimport { ElementBox, ICuiPositionEvaluator } from \"./interfaces\";\r\n\r\nexport class CuiBasePositionEvaluator implements ICuiPositionEvaluator {\r\n    #box: ElementBox | undefined;\r\n    #targetWidth: number;\r\n    #targetHeight: number;\r\n    #margin: number;\r\n    constructor() {\r\n        this.#targetHeight = -1;\r\n        this.#targetWidth = -1;\r\n        this.#box = undefined;\r\n        this.#margin = 0;\r\n    }\r\n\r\n\r\n    setElementBox(box: ElementBox): void {\r\n        this.#box = box;\r\n    }\r\n\r\n    setTarget(targetBox: ElementBox): void {\r\n        this.#targetWidth = targetBox.width;\r\n        this.#targetHeight = targetBox.height;\r\n    }\r\n\r\n    setMargin(value: number) {\r\n        this.#margin = value;\r\n    }\r\n\r\n    getVerticalPosition(value: string): number {\r\n        switch (value) {\r\n            case 'top':\r\n                return this.getTopPosition();\r\n            case \"bottom\":\r\n                return this.getBottomPosition();\r\n            case \"middle\":\r\n                return this.getMiddlePosition();\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n\r\n    getHorizontalPosition(value: string): number {\r\n        switch (value) {\r\n            case 'left':\r\n                return this.getLeftPosition();\r\n            case \"right\":\r\n                return this.getRightPosition();\r\n            case \"center\":\r\n                return this.getCenterPosition();\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n\r\n    getAutoVerticalPosition(initial: string): [number, string] {\r\n        let innerHeight = window.innerHeight;\r\n        let number = this.getVerticalPosition(initial);\r\n\r\n        if ((initial === 'top' || initial === \"middle\") && number < 0) {\r\n            return [this.getVerticalPosition(\"bottom\"), \"bottom\"]\r\n        } else if ((initial === \"bottom\" || initial === \"middle\") && number + this.#targetHeight > innerHeight) {\r\n            return [this.getVerticalPosition(\"top\"), \"top\"]\r\n        }\r\n        return [number, initial];\r\n    }\r\n\r\n    getAutoHorizontalPosition(initial: string): [number, string] {\r\n        let innerWidth = window.innerWidth;\r\n        let number = this.getHorizontalPosition(initial);\r\n\r\n        if ((initial === 'right' || initial === \"center\") && number < 0) {\r\n            return [this.getHorizontalPosition(\"left\"), \"left\"]\r\n        } else if ((initial === 'left' || initial === \"center\") && number + this.#targetWidth > innerWidth) {\r\n            return [this.getHorizontalPosition(\"right\"), \"right\"]\r\n        }\r\n        return [number, initial];\r\n    }\r\n\r\n    private getTopPosition(): number {\r\n        this.throwIfNotValid(\"getTopPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return this.#box.top - this.#margin - this.#targetHeight;\r\n    }\r\n\r\n    private getBottomPosition(): number {\r\n        this.throwIfNotValid(\"getBottomPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return this.#box.top + this.#box.height + this.#margin;\r\n    }\r\n\r\n    private getMiddlePosition(): number {\r\n        this.throwIfNotValid(\"getMiddlePosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return (this.#box.top + this.#box.height / 2) - this.#targetHeight / 2;\r\n    }\r\n\r\n    private getLeftPosition(): number {\r\n        this.throwIfNotValid(\"getLeftPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return this.#box.left;\r\n    }\r\n\r\n    private getRightPosition(): number {\r\n        this.throwIfNotValid(\"getRightPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return this.#box.left + this.#box.width - this.#targetWidth;\r\n    }\r\n\r\n    private getCenterPosition(): number {\r\n        this.throwIfNotValid(\"getCenterPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return (this.#box.left + this.#box.width / 2) - this.#targetWidth / 2;\r\n    }\r\n\r\n    private validate(): boolean {\r\n        return is(this.#box) && this.#targetHeight > 0 && this.#targetWidth > 0;\r\n    }\r\n\r\n\r\n\r\n    private throwIfNotValid(method: string): void {\r\n        if (!this.validate()) {\r\n            throw new CuiPositionError(`[${method}] Position cannot be calculated: missing data [width: ${this.#targetWidth}][height: ${this.#targetHeight}]`)\r\n        }\r\n    }\r\n}","import { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { ICuiLogger } from \"../models/interfaces\";\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiBasePositionEvaluator } from \"./evaluator\";\r\nimport { ElementBox, ICuiPositionCalculator, ICuiPositionEvaluator } from \"./interfaces\";\r\n\r\nexport class CuiBasePositionCalculator implements ICuiPositionCalculator {\r\n    #static: string;\r\n    #preferred: string;\r\n    #evaluator: ICuiPositionEvaluator;\r\n    #log: ICuiLogger;\r\n    constructor(evaluator?: ICuiPositionEvaluator) {\r\n        this.#preferred = \"top-center\";\r\n        this.#static = \"\";\r\n        this.#evaluator = evaluator ?? new CuiBasePositionEvaluator();\r\n        this.#log = CuiLoggerFactory.get(\"CuiBasePositionCalculator\");\r\n    }\r\n\r\n    setMargin(value: number): void {\r\n        this.#evaluator.setMargin(value);\r\n    }\r\n\r\n    setPreferred(position: string): void {\r\n        this.#preferred = position\r\n    }\r\n\r\n    setStatic(position: string): void {\r\n        this.#static = position;\r\n    }\r\n\r\n    //targetWidth: number, targetHeight: number\r\n    calculate(elementBox: ElementBox, targetBox: ElementBox): [number, number, string] {\r\n        this.#evaluator.setElementBox(elementBox)\r\n        this.#evaluator.setTarget(targetBox);\r\n\r\n        if (is(this.#static)) {\r\n            this.#log.debug(\"Evaluating static position\")\r\n            const [vertical, horizontal] = this.parse(this.#static);\r\n            return [this.#evaluator.getHorizontalPosition(horizontal), this.#evaluator.getVerticalPosition(vertical), this.#static];\r\n        }\r\n\r\n        let [vertical, horizontal]: string[] = [\"\", \"\"];\r\n        if (is(this.#preferred)) {\r\n            this.#log.debug(\"Evaluating auto position\");\r\n            [vertical, horizontal] = this.parse(this.#preferred);\r\n        }\r\n        vertical = vertical ?? \"top\";\r\n        horizontal = horizontal ?? \"center\";\r\n        this.#log.debug(\"Calculating position: \" + vertical + \"-\" + horizontal)\r\n        const [outVNum, outVPos] = this.#evaluator.getAutoVerticalPosition(vertical);\r\n        const [outHNum, outHPos] = this.#evaluator.getAutoHorizontalPosition(horizontal);\r\n        this.#log.debug(\"Calculated position: \" + outVPos + \"-\" + outHPos)\r\n        return [outHNum, outVNum, outVPos + \"-\" + outHPos];\r\n    }\r\n\r\n    private parse(position: string): string[] {\r\n        return position.split(\"-\");\r\n    }\r\n}","import { are, is } from \"./functions\";\r\n\r\nexport interface ICuiTask {\r\n    start(): void;\r\n    stop(): void;\r\n    getId(): any;\r\n    setCallback(callback: () => void): void;\r\n    setTimeout(timeout: number): void;\r\n}\r\n\r\nexport class CuiTaskRunner implements ICuiTask {\r\n    #taskId: any;\r\n    #autoRenew: boolean;\r\n    #timeout: number;\r\n    #callback: (() => void) | undefined;\r\n\r\n    constructor(timeout: number, autoRenew: boolean, callback?: () => void) {\r\n        this.#autoRenew = autoRenew;\r\n        this.#timeout = timeout;\r\n        this.#callback = callback;\r\n    }\r\n    start(): void {\r\n        if (!this.canRun()) {\r\n            return;\r\n        }\r\n        this.stop();\r\n        this.#taskId = setTimeout(() => {\r\n            //@ts-ignore - already checked in canRun\r\n            this.#callback();\r\n            this.#taskId = null;\r\n            if (this.#autoRenew) {\r\n                this.start();\r\n            }\r\n        }, this.#timeout);\r\n    }\r\n\r\n    stop(): void {\r\n        if (this.#taskId) {\r\n            clearTimeout(this.#taskId);\r\n            this.#taskId = null\r\n        }\r\n    }\r\n\r\n    getId() {\r\n        return this.#taskId;\r\n    }\r\n\r\n    private canRun(): boolean {\r\n        return is(this.#callback) && this.#timeout > 0;\r\n    }\r\n\r\n    setCallback(callback: () => void) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    setTimeout(timeout: number) {\r\n        this.#timeout = timeout;\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiOpenable, ICuiClosable, CuiElement, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { is, replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"../../core/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"../../core/utils/statics\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\nimport { CuiHoverListener, CuiHoverEvent } from \"../../core/listeners/hover\";\r\nimport { ICuiPositionCalculator } from \"../../core/position/interfaces\";\r\nimport { CuiBasePositionCalculator } from \"../../core/position/calculator\";\r\nimport { CuiTaskRunner, ICuiTask } from \"../../core/utils/task\";\r\nimport { ICuiComponentAction, CuiActionsListFactory } from \"../../core/utils/actions\";\r\n\r\nconst bodyClass = '{prefix}-drop-open';\r\nconst DROP_POSITION = \"{prefix}-drop-position-\";\r\nconst DROP_TRIGGER = \"{prefix}-drop-trigger\";\r\nconst DROP_DEFAULT_TRIGGER = \"> a, button\";\r\nconst DROP_DEFAULT_ANIMATION_CLS = '{prefix}-drop-animation-in';\r\n\r\n\r\nexport interface CuiDropEvent {\r\n    timestamp: number;\r\n}\r\n\r\nexport class CuiDropArgs implements ICuiParsable {\r\n    mode: \"click\" | \"hover\";\r\n    trigger: string;\r\n    prevent: boolean;\r\n    autoClose: boolean;\r\n    outClose: boolean;\r\n    pos: string;\r\n    action: string;\r\n    timeout: number;\r\n    margin: number;\r\n\r\n    #defOpenAct: string\r\n    constructor(prefix: string) {\r\n        this.#defOpenAct = replacePrefix(DROP_DEFAULT_ANIMATION_CLS, prefix);\r\n        this.mode = \"click\";\r\n        this.trigger = DROP_DEFAULT_TRIGGER;\r\n        this.autoClose = false;\r\n        this.outClose = false;\r\n        this.prevent = false;\r\n        this.pos = \"\";\r\n        this.action = this.#defOpenAct;\r\n        this.timeout = 3000;\r\n        this.margin = 8;\r\n    }\r\n\r\n\r\n    parse(args: any) {\r\n        this.mode = getStringOrDefault(args.mode, 'click').toLowerCase();\r\n        this.trigger = SCOPE_SELECTOR + getStringOrDefault(args.trigger, DROP_DEFAULT_TRIGGER);\r\n        this.prevent = isStringTrue(args.prevent);\r\n        this.autoClose = isStringTrue(args.autoClose);\r\n        this.outClose = args.outClose ? isStringTrue(args.outClose) : true;\r\n        this.pos = getStringOrDefault(args.pos, \"\");\r\n        this.action = getStringOrDefault(args.action, this.#defOpenAct);\r\n        this.timeout = getIntOrDefault(args.timeout, 3000);\r\n        this.margin = getIntOrDefault(args.margin, 8);\r\n    }\r\n}\r\n\r\nexport class CuiDropComponenet implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-drop`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiDropHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiDropHandler extends CuiHandler<CuiDropArgs> implements ICuiOpenable, ICuiClosable {\r\n    #prefix: string;\r\n    #bodyClass: string;\r\n    #attribute: string;\r\n    #triggerHoverListener: CuiHoverListener | undefined;\r\n    #hoverListener: CuiHoverListener;\r\n    #trigger: Element;\r\n    #windowClickEventId: string | null;\r\n    #openEventId: string | null;\r\n    #closeEventId: string | null;\r\n    #positionCalculator: ICuiPositionCalculator;\r\n    #posClass: string;\r\n    #autoTask: ICuiTask;\r\n    #actions: ICuiComponentAction[];\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuidropHandler\", element, attribute, new CuiDropArgs(prefix), utils);\r\n        this.#attribute = attribute;\r\n        this.#prefix = prefix;\r\n        this.#bodyClass = replacePrefix(bodyClass, prefix);\r\n        this.#hoverListener = new CuiHoverListener(this.element);\r\n        this.#hoverListener.setCallback(this.onElementHover.bind(this))\r\n        this.#windowClickEventId = null;\r\n        this.#openEventId = null;\r\n        this.#closeEventId = null;\r\n        this.onTriggerClick = this.onTriggerClick.bind(this)\r\n        this.#positionCalculator = new CuiBasePositionCalculator();\r\n        this.#positionCalculator.setMargin(8);\r\n        this.#positionCalculator.setPreferred(\"bottom-left\");\r\n        this.#posClass = \"\"\r\n        this.#triggerHoverListener = undefined;\r\n        this.#trigger = this.element;\r\n        this.#actions = [];\r\n        this.#autoTask = new CuiTaskRunner(this.args.timeout, false, this.close.bind(this));\r\n\r\n        if (!utils.isPlugin(\"click-plugin\")) {\r\n            this.logWarning(\"Window click plugin is not available: outClose will not work\")\r\n        }\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#trigger = this.acquireTrigger();\r\n        this.#triggerHoverListener = new CuiHoverListener(this.#trigger);\r\n        this.setTriggerEvent();\r\n        this.#openEventId = this.onEvent(EVENTS.OPEN, this.open.bind(this));\r\n        this.#closeEventId = this.onEvent(EVENTS.CLOSE, this.close.bind(this));\r\n        this.#positionCalculator.setStatic(this.args.pos);\r\n        this.#positionCalculator.setMargin(this.args.margin);\r\n        this.#autoTask = new CuiTaskRunner(this.args.timeout, false, this.close.bind(this));\r\n        this.#actions = CuiActionsListFactory.get(this.args.action);\r\n        this.mutate(() => {\r\n            AriaAttributes.setAria(this.element, 'aria-dropdown', \"\");\r\n        })\r\n\r\n        this._log.debug(\"Initialized\", \"handle\")\r\n    }\r\n\r\n    onUpdate(): void {\r\n        if (this.#triggerHoverListener && this.#triggerHoverListener.isAttached()) {\r\n            this.#triggerHoverListener.detach();\r\n        } else if (this.prevArgs && this.prevArgs.mode === 'click') {\r\n            //@ts-ignore \r\n            this.#trigger.removeEventListener('click', this.onTriggerClick)\r\n        }\r\n\r\n        this.#trigger = this.acquireTrigger();\r\n        this.#triggerHoverListener = new CuiHoverListener(this.#trigger);\r\n        this.setTriggerEvent();\r\n        this.#positionCalculator.setStatic(this.args.pos);\r\n        this.#positionCalculator.setMargin(this.args.margin);\r\n        this.#actions = CuiActionsListFactory.get(this.args.action);\r\n        this.#autoTask.setTimeout(this.args.timeout);\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.detachEvent(EVENTS.OPEN, this.#openEventId);\r\n        this.detachEvent(EVENTS.CLOSE, this.#closeEventId);\r\n    }\r\n\r\n    /**\r\n    * Api Method open\r\n    */\r\n    async open(): Promise<boolean> {\r\n        if (this.checkLockAndWarn('open')) {\r\n            return false;\r\n        }\r\n        if (this.isActive()) {\r\n            return this.close();\r\n        }\r\n        if (this.isAnyActive()) {\r\n            await this.findAndCloseOpenedDrop();\r\n        }\r\n        this.isLocked = true;\r\n        this._log.debug(`Drop ${this.cuid}`, 'open');\r\n        this.onOpen();\r\n        this.isLocked = false;\r\n        return true\r\n    }\r\n\r\n    /**\r\n     * Api Method close\r\n     */\r\n    async close(): Promise<boolean> {\r\n        if (this.checkLockAndWarn(\"close\") || !this.isActive()) {\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        this.logInfo(`Drop ${this.cuid}`, 'close');\r\n        this.onClose();\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, this.#windowClickEventId);\r\n        this.emitEvent(EVENTS.CLOSED, {\r\n            timestamp: Date.now()\r\n        })\r\n        this.#hoverListener.detach();\r\n        this.isLocked = false;\r\n        return true;\r\n    }\r\n\r\n\r\n    onClose() {\r\n        this.mutate(() => {\r\n            this.helper.removeClass(this.activeClassName, this.element)\r\n            this.helper.removeClass(this.#bodyClass, document.body)\r\n            this.toggleActions();\r\n            this.helper.removeClass(this.#posClass, this.element);\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false')\r\n        })\r\n    }\r\n\r\n    onOpen() {\r\n        this.helper.setClass(this.activeClassName, this.element);\r\n        this.mutate(() => {\r\n            const box = this.#trigger.getBoundingClientRect();\r\n            try {\r\n                const [x, y, pos] = this.#positionCalculator.calculate(box, this.element.getBoundingClientRect());\r\n                this.element.style.top = `${y - box.top}px`;\r\n                this.element.style.left = `${x - box.left}px`;\r\n                this.#posClass = replacePrefix(DROP_POSITION + pos, this.#prefix);\r\n                this.toggleActions();\r\n                this.helper.setClass(this.#posClass, this.element);\r\n                this.helper.setClass(this.#bodyClass, document.body)\r\n\r\n                this.emitEvent(EVENTS.OPENED, {\r\n                    timestamp: Date.now()\r\n                })\r\n                this.#hoverListener.attach();\r\n                this.runAutoCloseTask();\r\n\r\n                if (this.args.outClose) {\r\n                    this.#windowClickEventId = this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this));\r\n                }\r\n\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'true')\r\n            } catch (e) {\r\n                this._log.exception(e)\r\n            }\r\n\r\n\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Event invoked when window is clicked\r\n     * @param ev \r\n     */\r\n    private onWindowClick(ev: MouseEvent) {\r\n        if (!this.element.contains((ev.target as Node))) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    private isAnyActive(): boolean {\r\n        return this.helper.hasClass(this.#bodyClass, document.body);\r\n    }\r\n\r\n    /**\r\n     * Finds and opens other active drop element\r\n     */\r\n    async findAndCloseOpenedDrop(): Promise<boolean> {\r\n        const opened = document.querySelector(`[${this.#attribute}].${this.activeClassName}`);\r\n        if (!is(opened)) {\r\n            this._log.warning(\"Opened drop was not found\");\r\n            return false;\r\n        }\r\n        //@ts-ignore opened checked\r\n        const handler = (<CuiElement>(opened as any)).$handlers[this.#attribute] as any;\r\n        if (!is(handler)) {\r\n            this._log.warning(\"Drop handler was not found in the element\");\r\n            return false;\r\n        }\r\n        return handler.close();\r\n    }\r\n\r\n    /**\r\n     * Invoked when trigger button is clicked\r\n     * @param ev \r\n     */\r\n    private onTriggerClick(ev: MouseEvent) {\r\n        if (this.isActive()) {\r\n            this.close();\r\n        } else {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Invoked when trigger button is hovered on\r\n    * @param ev\r\n    */\r\n    private onHoverEvent(ev: CuiHoverEvent) {\r\n        if (ev.isHovering && !this.isActive()) {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.event.preventDefault();\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Method triggered when opened element is hovered on\r\n     * @param ev \r\n     */\r\n    private onElementHover(ev: CuiHoverEvent) {\r\n        if (ev.isHovering) {\r\n            this.#autoTask.stop();\r\n        } else if (!ev.isHovering && this.args.autoClose) {\r\n            this.runAutoCloseTask();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets event on trigger button\r\n     */\r\n    private setTriggerEvent() {\r\n        if (this.args.mode === 'hover' && this.#triggerHoverListener) {\r\n            this.#triggerHoverListener.setCallback(this.onHoverEvent.bind(this));\r\n            this.#triggerHoverListener.attach();\r\n        } else {\r\n            //@ts-ignore\r\n            this.#trigger.addEventListener('click', this.onTriggerClick)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Runs auto-close task on opened element\r\n     */\r\n    private runAutoCloseTask() {\r\n        if (!this.args.autoClose) {\r\n            return\r\n        }\r\n        this.#autoTask.start();\r\n    }\r\n\r\n    private toggleActions() {\r\n        this.#actions.forEach(action => {\r\n            action.toggle(this.element);\r\n        })\r\n    }\r\n\r\n    private acquireTrigger(): Element {\r\n        let ret = null;\r\n        if (!this.element.parentElement) {\r\n            ret = document.querySelector(this.args.trigger)\r\n        } else\r\n            ret = this.element.parentElement.querySelector(this.args.trigger);\r\n        return ret ?? this.element;\r\n    }\r\n}","import { TaskedEventEmitHandler } from \"../bus/handlers\";\r\nimport { ICuiEventListener } from \"../models/interfaces\";\r\nimport { is, round } from \"../utils/functions\";\r\n\r\ninterface OnMoveCallback {\r\n    (ev: ICuiMoveEvent): void;\r\n}\r\n\r\ninterface IMoveListener {\r\n    onMove(data: OnMoveCallback): void\r\n    start(): void;\r\n    stop(): void;\r\n}\r\n\r\nexport type CuiMoveEventState = \"down\" | \"up\" | \"move\";\r\nexport interface ICuiMoveEvent {\r\n    x: number;\r\n    y: number;\r\n    moveX: number;\r\n    moveY: number;\r\n    type: CuiMoveEventState;\r\n    target: EventTarget | null;\r\n    event: MouseEvent | TouchEvent;\r\n}\r\n\r\nexport class CuiMoveEventListener implements ICuiEventListener<ICuiMoveEvent> {\r\n    #element: HTMLElement | Document;\r\n    #onEvent: ((t: ICuiMoveEvent) => void) | undefined;\r\n    #isLocked: boolean;\r\n    #isAttached: boolean;\r\n    #preventDefault: boolean;\r\n    #target: Element | undefined;\r\n    constructor(element?: HTMLElement) {\r\n        this.#isLocked = false;\r\n        this.#element = element ?? document.body;\r\n        this.#isAttached = false;\r\n        this.#preventDefault = false;\r\n        this.#onEvent = undefined;\r\n        this.#target = undefined;\r\n\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this)\r\n        this.onMouseMove = this.onMouseMove.bind(this)\r\n        this.onTouchStart = this.onTouchStart.bind(this)\r\n        this.onTouchEnd = this.onTouchEnd.bind(this)\r\n        this.onTouchMove = this.onTouchMove.bind(this)\r\n    }\r\n\r\n    setCallback(callback: (t: ICuiMoveEvent) => void): void {\r\n        this.#onEvent = callback;\r\n    }\r\n\r\n    setTarget(element: Element) {\r\n        this.#target = element;\r\n    }\r\n    isInProgress(): boolean {\r\n        return this.#isLocked;\r\n    }\r\n    preventDefault(flag: boolean) {\r\n        this.#preventDefault = flag;\r\n    }\r\n    attach(): void {\r\n        if (this.#isAttached) {\r\n            return;\r\n        }\r\n\r\n        //@ts-ignore\r\n        this.#element.addEventListener('mousedown', this.onMouseDown, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.addEventListener('mouseup', this.onMouseUp, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.addEventListener('mousemove', this.onMouseMove, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.addEventListener('touchstart', this.onTouchStart, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.addEventListener('touchend', this.onTouchEnd, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.addEventListener('touchmove', this.onTouchMove, { passive: false } as any);\r\n        this.#isAttached = true;\r\n    }\r\n    detach(): void {\r\n        if (!this.#isAttached) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        this.#element.removeEventListener('mousedown', this.onMouseDown, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.removeEventListener('mouseup', this.onMouseUp, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.removeEventListener('mousemove', this.onMouseMove, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.removeEventListener('touchstart', this.onTouchStart, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.removeEventListener('touchend', this.onTouchEnd, { passive: false } as any);\r\n        //@ts-ignore\r\n        this.#element.removeEventListener('touchmove', this.onTouchMove, { passive: false } as any);\r\n        this.#isAttached = false;\r\n    }\r\n\r\n    isAttached(): boolean {\r\n        return this.#isAttached\r\n    }\r\n\r\n    onMouseDown(ev: MouseEvent) {\r\n        if (this.#isLocked) {\r\n            return;\r\n        }\r\n        if (this.#target && !this.#target.contains(ev.target as Node)) {\r\n            return;\r\n        }\r\n\r\n        this.#isLocked = true;\r\n        this.publishMouseEvent(\"down\", ev)\r\n\r\n    }\r\n\r\n    onMouseUp(ev: MouseEvent) {\r\n        if (!this.#isLocked) {\r\n            return;\r\n        }\r\n        this.#isLocked = false;\r\n        this.publishMouseEvent(\"up\", ev)\r\n\r\n    }\r\n\r\n    onMouseMove(ev: MouseEvent) {\r\n        if (this.#isLocked) {\r\n            this.publishMouseEvent(\"move\", ev)\r\n        }\r\n    }\r\n\r\n    onTouchStart(ev: TouchEvent) {\r\n        if (this.#isLocked) {\r\n            return;\r\n        }\r\n        if (this.#target && !this.#target.contains(ev.target as Node)) {\r\n            return;\r\n        }\r\n        this.#isLocked = true;\r\n        this.publishTouchEvent('down', ev);\r\n    }\r\n\r\n    onTouchEnd(ev: TouchEvent) {\r\n        if (!this.#isLocked) {\r\n            return;\r\n        }\r\n        this.#isLocked = false;\r\n        this.publishTouchEvent('up', ev);\r\n    }\r\n\r\n    onTouchMove(ev: TouchEvent) {\r\n        if (this.#isLocked) {\r\n            this.publishTouchEvent('move', ev);\r\n        }\r\n    }\r\n\r\n    private publishMouseEvent(type: CuiMoveEventState, ev: MouseEvent) {\r\n        if (this.#preventDefault && ev.cancelable) {\r\n            ev.preventDefault();\r\n        }\r\n        if (!is(this.#onEvent)) { return }\r\n        // @ts-ignore\r\n        this.#onEvent({\r\n            type: type,\r\n            x: ev.clientX,\r\n            y: ev.clientY,\r\n            moveX: ev.movementX,\r\n            moveY: ev.movementY,\r\n            target: ev.target,\r\n            event: ev\r\n        })\r\n\r\n    }\r\n\r\n    private publishTouchEvent(type: CuiMoveEventState, ev: TouchEvent) {\r\n        if (this.#preventDefault && ev.cancelable)\r\n            ev.preventDefault();\r\n        if (!is(this.#onEvent)) {\r\n            return;\r\n        }\r\n        let touch = null;\r\n        if (ev.touches.length > 0) {\r\n            touch = ev.touches[0]\r\n        } else if (ev.changedTouches.length > 0) {\r\n            touch = ev.changedTouches[0]\r\n        }\r\n        // @ts-ignore - already checked\r\n        this.#onEvent({\r\n            event: ev,\r\n            type: type,\r\n            target: ev.target,\r\n            //@ts-ignore\r\n            x: is(touch) ? touch.clientX : -1,\r\n            //@ts-ignore\r\n            y: is(touch) ? touch.clientY : -1,\r\n            moveX: -1,\r\n            moveY: -1\r\n        })\r\n\r\n    }\r\n\r\n}\r\n","export interface ICuiFloatPositionCalculator {\r\n    calculate(x: number, y: number, diffX: number, diffY: number): [number, number];\r\n}\r\n\r\nexport interface ICuiFloatResizeCalculator {\r\n    calculate(x: number, y: number, diffX: number, diffY: number): [number, number];\r\n}\r\n\r\nexport class BasePositionCalculator implements ICuiFloatPositionCalculator {\r\n\r\n    calculate(x: number, y: number, diffX: number, diffY: number): [number, number] {\r\n        return [x, y];\r\n    }\r\n\r\n}\r\n\r\nexport class OptionalPositionCalculator implements ICuiFloatPositionCalculator {\r\n    #element: HTMLElement;\r\n    constructor(element: HTMLElement) {\r\n        this.#element = element;\r\n    }\r\n    calculate(x: number, y: number, diffX: number, diffY: number): [number, number] {\r\n        let newX = this.#element.offsetLeft + diffX;\r\n        let newY = this.#element.offsetTop + diffY;\r\n        return [newX, newY];\r\n    }\r\n\r\n}\r\n\r\nexport class BaseResizeCalculator implements ICuiFloatResizeCalculator {\r\n    #element: HTMLElement;\r\n    constructor(element: HTMLElement) {\r\n        this.#element = element;\r\n    }\r\n    calculate(x: number, y: number, diffX: number, diffY: number): [number, number] {\r\n        let width = x - this.#element.offsetLeft;\r\n        let height = y - this.#element.offsetTop;\r\n        return [width, height];\r\n    }\r\n}\r\n\r\nexport class OptionalResizeCalculator implements ICuiFloatResizeCalculator {\r\n    #element: HTMLElement;\r\n    constructor(element: HTMLElement) {\r\n        this.#element = element;\r\n    }\r\n    calculate(x: number, y: number, diffX: number, diffY: number): [number, number] {\r\n        let width = this.#element.offsetWidth + diffX;\r\n        let height = this.#element.offsetHeight + diffY;\r\n        return [width, height];\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { replacePrefix, isStringTrue, is, getIntOrDefault, getStringOrDefault } from \"../../core/utils/functions\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\nimport { CuiInteractableArgs, CuiInteractableHandler } from \"../../core/handlers/base\";\r\nimport { CuiMoveEventListener, ICuiMoveEvent } from \"../../core/listeners/move\";\r\nimport { BasePositionCalculator, BaseResizeCalculator, ICuiFloatPositionCalculator, ICuiFloatResizeCalculator } from \"./helpers\";\r\nimport { CLASSES, EVENTS } from \"../../core/utils/statics\";\r\n\r\nconst FLOAT_OPEN_ANIMATION_CLASS = '.{prefix}-float-default-in';\r\nconst FLOAT_CLOSE_ANIMATION_CLASS = '.{prefix}-float-default-out';\r\nconst MOVE = '.{prefix}-float-move';\r\nconst RESIZE = '.{prefix}-float-resize';\r\n\r\n\r\nexport class CuiFloatArgs implements CuiInteractableArgs, ICuiParsable {\r\n    escClose: boolean;\r\n    timeout: number;\r\n    openAct: string;\r\n    closeAct: string;\r\n    keyClose: string;\r\n\r\n    #defTimeout: number;\r\n    #prefix: string;\r\n    constructor(prefix: string, defTimeout?: number) {\r\n        this.#defTimeout = defTimeout ?? 300;\r\n        this.#prefix = prefix;\r\n\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.timeout = this.#defTimeout;\r\n    }\r\n\r\n\r\n    parse(args: any) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(FLOAT_OPEN_ANIMATION_CLASS, this.#prefix))\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(FLOAT_CLOSE_ANIMATION_CLASS, this.#prefix))\r\n    }\r\n}\r\n\r\nexport class CuiFloatComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-float`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiFloatHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiFloatHandler extends CuiInteractableHandler<CuiFloatArgs> {\r\n    #isMoving: boolean;\r\n    #isResizing: boolean;\r\n    #prevX: number;\r\n    #prevY: number;\r\n    #prefix: string;\r\n    #moveListener: CuiMoveEventListener;\r\n    #positionCalculator: ICuiFloatPositionCalculator;\r\n    #resizeCalculator: ICuiFloatResizeCalculator;\r\n    #resizeBtn: HTMLElement | null;\r\n    #moveBtn: HTMLElement | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiFloatHandler\", element, attribute, new CuiFloatArgs(prefix, utils.setup.animationTime), utils);\r\n        this.#isMoving = false;\r\n        this.#isResizing = false;\r\n        this.#prevX = 0;\r\n        this.#prevY = 0;\r\n        this.#moveListener = new CuiMoveEventListener();\r\n        this.#moveListener.preventDefault(false);\r\n        this.#positionCalculator = new BasePositionCalculator();\r\n        this.#resizeCalculator = new BaseResizeCalculator(element as HTMLElement)\r\n        this.#prefix = prefix;\r\n        this.move = this.move.bind(this);\r\n        this.resize = this.resize.bind(this);\r\n        this.#moveBtn = null;\r\n        this.#resizeBtn = null;\r\n\r\n        if (!utils.isPlugin(\"click-plugin\")) {\r\n            this.logWarning(\"WindowClick plugin is not available, outClose will not work\")\r\n        }\r\n        if (!utils.isPlugin(\"keys-plugin\")) {\r\n            this.logWarning(\"KeyObserver plugin is not available, escClose and keyClose will not work\")\r\n        }\r\n    }\r\n\r\n    onInit(): void {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        this.#moveBtn = this.element.querySelector(replacePrefix(MOVE, this.#prefix))\r\n        this.#resizeBtn = this.element.querySelector(replacePrefix(RESIZE, this.#prefix))\r\n        this.#moveListener.setCallback(this.onMove.bind(this));\r\n\r\n    }\r\n\r\n    onUpdate(): void {\r\n\r\n    }\r\n\r\n    onDestroy(): void {\r\n    }\r\n\r\n    onBeforeOpen(): boolean {\r\n        return true\r\n    }\r\n\r\n    onAfterOpen(): void {\r\n        this.#moveListener.attach();\r\n    }\r\n\r\n    onAfterClose(): void {\r\n        this.#moveListener.detach();\r\n    }\r\n    onBeforeClose(): boolean {\r\n        return true;\r\n    }\r\n\r\n    onMove(ev: ICuiMoveEvent) {\r\n        switch (ev.type) {\r\n            case 'down':\r\n                this.onMouseDown(ev);\r\n                break;\r\n            case 'up':\r\n                this.onMouseUp(ev)\r\n                break;\r\n            case 'move':\r\n                this.onMouseMove(ev);\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    onMouseDown(ev: ICuiMoveEvent) {\r\n        if (ev.target === this.#moveBtn) {\r\n            this.#isMoving = true;\r\n            ev.event.preventDefault();\r\n        } else if (ev.target === this.#resizeBtn) {\r\n            this.#isResizing = true;\r\n            ev.event.preventDefault();\r\n            //this.helper.setClass(\"cui-float-resize-shadow\")\r\n        }\r\n        this.#prevX = ev.x;\r\n        this.#prevY = ev.y;\r\n        this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n        // Lock global move handler\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, true);\r\n    }\r\n\r\n    onMouseMove(ev: ICuiMoveEvent) {\r\n        if (this.#isMoving) {\r\n            this.peform(ev, this.move)\r\n        } else if (this.#isResizing) {\r\n            this.peform(ev, this.resize)\r\n        }\r\n    }\r\n\r\n\r\n    onMouseUp(ev: ICuiMoveEvent) {\r\n        this.#isMoving = false;\r\n        this.#isResizing = false;\r\n        this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n        // Unlock global handler\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, false);\r\n\r\n    }\r\n\r\n    peform(ev: ICuiMoveEvent, callback: (element: HTMLElement, x: number, y: number, diffX: number, diffY: number) => void) {\r\n        this.mutate(() => {\r\n            if (is(callback))\r\n                callback(this.element as HTMLElement, ev.x, ev.y, (ev.x - this.#prevX), (ev.y - this.#prevY));\r\n            this.#prevX = ev.x;\r\n            this.#prevY = ev.y;\r\n        })\r\n        ev.event.preventDefault();\r\n    }\r\n\r\n    resize(element: HTMLElement, x: number, y: number, diffX: number, diffY: number): void {\r\n        let [newWidth, newHeight] = this.#resizeCalculator.calculate(x, y, diffX, diffY);\r\n        if (this.fitsWindow(element.offsetTop, element.offsetLeft, newWidth, newHeight)) {\r\n            this.mutate(() => {\r\n                element.style.width = newWidth + \"px\";\r\n                element.style.height = newHeight + \"px\";\r\n            })\r\n        }\r\n    }\r\n\r\n    move(element: HTMLElement, x: number, y: number, diffX: number, diffY: number): void {\r\n        let [newX, newY] = this.#positionCalculator.calculate(x, y, diffX, diffY)\r\n        if (this.fitsWindow(newY, newX, element.offsetWidth, element.offsetHeight)) {\r\n            this.mutate(() => {\r\n                element.style.left = newX + \"px\";\r\n                element.style.top = newY + \"px\";\r\n            })\r\n        }\r\n    }\r\n\r\n    fitsWindow(top: number, left: number, width: number, height: number) {\r\n        return (top + height < window.innerHeight - 10) &&\r\n            (top > 10) && (left > 10) &&\r\n            (left + width < window.innerWidth - 10);\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { ICONS } from \"../../core/utils/statics\";\r\nimport { is, isString, getStringOrDefault, getIntOrDefault } from \"../../core/utils/functions\";\r\nimport { IconBuilder } from \"../../core/builders/icon\";\r\n\r\nexport class CuiIconArgs implements ICuiParsable {\r\n    icon: string;\r\n    scale: number;\r\n\r\n    constructor() {\r\n        this.icon = \"\";\r\n        this.scale = 1;\r\n    }\r\n    parse(val: any) {\r\n        if (isString(val)) {\r\n            this.icon = getStringOrDefault(val, \"\");\r\n        } else {\r\n            this.icon = getStringOrDefault(val.icon, \"\");\r\n            this.scale = getIntOrDefault(val.scale, 1);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport class CuiIconComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-icon`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiIconHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class CuiIconHandler extends CuiHandler<CuiIconArgs> {\r\n\r\n    #currentIcon: string | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiIconHandler\", element, attribute, new CuiIconArgs(), utils);\r\n        this.#currentIcon = null;\r\n\r\n    }\r\n\r\n    onInit(): void {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        if (this.#currentIcon !== null) {\r\n            this._log.debug(\"Icon already initialized\")\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        this.#currentIcon = this.args.icon;\r\n        this.addIcon(this.args.icon)\r\n\r\n    }\r\n\r\n    onUpdate(): void {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        if (this.args.icon === this.#currentIcon) {\r\n            return;\r\n        }\r\n        this.#currentIcon = this.args.icon;\r\n        this.addIcon(this.args.icon);\r\n\r\n    }\r\n\r\n    onDestroy(): void {\r\n        const svg = this.element.querySelector('svg')\r\n        if (is(svg)) {\r\n            //@ts-ignore checked\r\n            svg.remove();\r\n        }\r\n        this.#currentIcon = null;\r\n    }\r\n\r\n    private addIcon(icon: string) {\r\n        const iconStr = icon ? ICONS[icon] : null;\r\n        if (!iconStr) {\r\n            this.isLocked = false;\r\n            return;\r\n        }\r\n        const iconSvg = new IconBuilder(iconStr).setScale(this.args.scale).build();\r\n        const svg = this.element.querySelector('svg')\r\n        if (is(svg)) {\r\n            //@ts-ignore checked\r\n            svg.remove();\r\n        }\r\n\r\n        if (this.element.childNodes.length > 0) {\r\n            this.mutate(this.insertBefore, iconSvg)\r\n        } else {\r\n            this.mutate(this.appendChild, iconSvg)\r\n        }\r\n\r\n    }\r\n\r\n    private insertBefore(iconElement: Element) {\r\n        this.element.insertBefore(iconElement, this.element.firstChild);\r\n        this.isLocked = false;\r\n    }\r\n\r\n    private appendChild(iconElement: Element) {\r\n        this.element.appendChild(iconElement);\r\n        this.isLocked = false;\r\n    }\r\n}\r\n","import { ICuiObserver } from \"../models/interfaces\";\r\n\r\nexport interface ICuiIntersectionObserver {\r\n    observe(target: Element): void;\r\n    unobserve(target: Element): void;\r\n    disconnect(): void;\r\n}\r\n\r\nexport class CuiIntersectionEntry {\r\n    isInView: boolean;\r\n    ratio: number;\r\n\r\n    constructor() {\r\n        this.isInView = false;\r\n        this.ratio = 0;\r\n    }\r\n}\r\n\r\nexport interface ICuiIntersectionHandler {\r\n    onIntersection(entry: CuiIntersectionEntry): Promise<boolean>;\r\n}\r\n\r\n/**\r\n * Creates a wrapper for intersection observer\r\n * Constructor gets a root element for observer and optional array of threshold values [0...1]\r\n */\r\nexport class CuiIntersectionObserver implements ICuiObserver {\r\n    #observer: IntersectionObserver | undefined;\r\n    #root: Element;\r\n    #threshold: number[];\r\n    #callback: IntersectionObserverCallback | undefined;\r\n    constructor(root: Element, threshold?: number[]) {\r\n        this.#root = root;\r\n        this.#threshold = threshold ?? [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];\r\n        this.#callback = undefined;\r\n        this.#observer = undefined;\r\n    }\r\n\r\n    setCallback(callback: IntersectionObserverCallback) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    connect(): void {\r\n        if (!this.#callback) {\r\n            return;\r\n        }\r\n        this.#observer = new IntersectionObserver(this.#callback, {\r\n            root: this.#root,\r\n            rootMargin: '0px',\r\n            threshold: this.#threshold\r\n        })\r\n    }\r\n\r\n    observe(target: Element): void {\r\n        if (this.#observer)\r\n            this.#observer.observe(target)\r\n    }\r\n\r\n    unobserve(target: Element): void {\r\n        if (this.#observer)\r\n            this.#observer.unobserve(target)\r\n    }\r\n\r\n    disconnect() {\r\n        if (this.#observer)\r\n            this.#observer.disconnect()\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { CuiIntersectionObserver } from \"../../core/observers/intersection\";\r\nimport { CuiActionsListFactory, ICuiComponentAction } from \"../../core/utils/actions\";\r\nimport { is, getRangeValueOrDefault, getStringOrDefault, isStringTrue } from \"../../core/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"../../core/utils/statics\";\r\n\r\nconst DEFAULT_SELCTOR = \"> *\";\r\n\r\n/**\r\n * Intersection\r\n * Toggles action in/out when target is intersecting with the screen\r\n * \r\n * Set this on scrollable element\r\n * target - children selector\r\n * offset - 0...1 - tells how much target must intersecting with the screen\r\n * action - action to trigger\r\n */\r\n\r\nexport class CuiIntersectionAttributes {\r\n    target: string;\r\n    action: string;\r\n    offset: number;\r\n    isRoot: boolean;\r\n    constructor() {\r\n        this.target = \"div\";\r\n        this.action = \"\";\r\n        this.offset = 0;\r\n        this.isRoot = false;\r\n    }\r\n\r\n    parse(args: any) {\r\n        this.target = is(args.target) ? SCOPE_SELECTOR + args.target : SCOPE_SELECTOR + DEFAULT_SELCTOR;\r\n        this.action = getStringOrDefault(args.action, \"\");\r\n        this.offset = getRangeValueOrDefault(parseFloat(args.offset), 0, 1, 0);\r\n        this.isRoot = isStringTrue(args.isRoot);\r\n    }\r\n}\r\n\r\nexport class CuiIntersectionComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-intersection`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiIntersectionHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiIntersectionHandler extends CuiHandler<CuiIntersectionAttributes> {\r\n\r\n    #observer: CuiIntersectionObserver;\r\n    #targets: Element[];\r\n    #actions: ICuiComponentAction[];\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiIntersectionHandler\", element, attribute, new CuiIntersectionAttributes(), utils);\r\n        this.#observer = new CuiIntersectionObserver(this.element);\r\n        this.#targets = [];\r\n        this.#actions = [];\r\n    }\r\n\r\n    onInit(): void {\r\n        this.parseArguments();\r\n        this.#observer.setCallback(this.onIntersection.bind(this))\r\n        this.#observer.connect();\r\n        this.#targets.forEach(target => {\r\n            this.#observer.observe(target);\r\n        })\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.parseArguments();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.#observer.disconnect();\r\n    }\r\n\r\n    parseArguments() {\r\n        // @ts-ignore prevArgs is correct\r\n        if (!is(this.prevArgs) || (this.prevArgs.target !== this.args.target)) {\r\n            let el = this.args.isRoot ? document.body : this.element;\r\n            this.#targets = [...el.querySelectorAll(this.args.target)];\r\n        }\r\n        this.#actions = CuiActionsListFactory.get(this.args.action);\r\n    }\r\n\r\n    onIntersection(entries: IntersectionObserverEntry[], observer: IntersectionObserver): void {\r\n        if (!is(this.#targets)) {\r\n            return;\r\n        }\r\n        entries.forEach(entry => {\r\n            if (entry.isIntersecting && entry.intersectionRatio >= this.args.offset) {\r\n                this.addActions(entry.target);\r\n            } else {\r\n                this.removeActions(entry.target);\r\n            }\r\n            this.emitIntersection(entry)\r\n        })\r\n    }\r\n\r\n    emitIntersection(entry: IntersectionObserverEntry) {\r\n        this.emitEvent(EVENTS.INTERSECTION, {\r\n            entry: entry,\r\n            offset: this.args.offset,\r\n            timestamp: Date.now()\r\n        })\r\n    }\r\n\r\n    private addActions(element: Element) {\r\n        this.#actions.forEach(action => action.add(element));\r\n    }\r\n\r\n    private removeActions(element: Element) {\r\n        this.#actions.forEach(action => action.remove(element));\r\n    }\r\n}","\r\nimport { CuiInteractableArgs, CuiInteractableHandler } from \"../../core/handlers/base\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\nimport { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { is, isStringTrue, getStringOrDefault, getIntOrDefault, replacePrefix, getName } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-right-in\";\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-right-out\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-left-in\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-left-out\";\r\n\r\nconst OFFCANVAS_BODY = \"{prefix}-off-canvas-open\";\r\nconst OFFCANVAS_CONTAINER_CLS = '.{prefix}-off-canvas-container';\r\n\r\nexport class CuiOffCanvasArgs implements ICuiParsable, CuiInteractableArgs {\r\n    escClose: boolean;\r\n    outClose: boolean;\r\n    openAct: string;\r\n    closeAct: string;\r\n    keyClose: string;\r\n    position: 'left' | 'right';\r\n    timeout: number;\r\n\r\n    #prefix: string;\r\n    #defTimeout: number;\r\n    constructor(prefix: string, timeout?: number) {\r\n        this.#defTimeout = timeout ?? 300;\r\n        this.#prefix = prefix;\r\n        this.escClose = false;\r\n        this.position = 'right';\r\n        this.openAct = this.getDefaultOpenClass();\r\n        this.closeAct = this.getDefaultCloseClass();\r\n        this.timeout = this.#defTimeout;\r\n        this.outClose = false;\r\n        this.keyClose = \"\";\r\n    }\r\n\r\n\r\n    parse(args: any) {\r\n        if (is(args)) {\r\n            this.escClose = isStringTrue(args.escClose);\r\n            this.outClose = isStringTrue(args.outClose);\r\n            this.position = getStringOrDefault(args.position, 'right');\r\n            this.openAct = getStringOrDefault(args.openAct, this.getDefaultOpenClass())\r\n            this.closeAct = getStringOrDefault(args.closeAct, this.getDefaultCloseClass());\r\n            this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n            this.keyClose = args.keyClose;\r\n        }\r\n    }\r\n\r\n    getDefaultOpenClass(): string {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_IN : OFFCANVAS_LEFT_ANIM_DEFAULT_IN, this.#prefix);\r\n    }\r\n\r\n    getDefaultCloseClass(): string {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT : OFFCANVAS_LEFT_ANIM_DEFAULT_OUT, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiOffCanvasComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-off-canvas`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiOffCanvasHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiOffCanvasHandler extends CuiInteractableHandler<CuiOffCanvasArgs>  {\r\n\r\n    #prefix: string;\r\n    #bodyClass: string;\r\n    #scrollY: number;\r\n    #windowClickEventId: string | null;\r\n\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiOffCanvasHandler\", element, attribute, new CuiOffCanvasArgs(prefix, utils.setup.animationTime), utils);\r\n        this.#prefix = prefix;\r\n        this.#bodyClass = replacePrefix(OFFCANVAS_BODY, prefix);\r\n        this.#windowClickEventId = null;\r\n        this.#scrollY = 0;\r\n\r\n        if (!utils.isPlugin(\"click-plugin\")) {\r\n            this.logWarning(\"WindowClick plugin is not available, outClose will not work\")\r\n        }\r\n        if (!utils.isPlugin(\"keys-plugin\")) {\r\n            this.logWarning(\"KeyObserver plugin is not available, escClose and keyClose will not work\")\r\n        }\r\n    }\r\n\r\n    onInit(): void {\r\n        this.mutate(() => {\r\n            this.setPositionLeft();\r\n            AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        })\r\n    }\r\n    onUpdate(): void {\r\n        this.setPositionLeft();\r\n    }\r\n    onDestroy(): void {\r\n\r\n    }\r\n    onBeforeOpen(): boolean {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        this.#scrollY = window.pageYOffset;\r\n        return true;\r\n    }\r\n\r\n    onAfterOpen(): void {\r\n        if (this.args.outClose) {\r\n            this.#windowClickEventId = this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this));\r\n        }\r\n        this.helper.setClass(this.#bodyClass, document.body);\r\n        document.body.style.top = `-${scrollY}px`;\r\n    }\r\n    onAfterClose(): void {\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, this.#windowClickEventId);\r\n        this.helper.removeClass(this.#bodyClass, document.body);\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, this.#scrollY * -1);\r\n    }\r\n    onBeforeClose(): boolean {\r\n        return true;\r\n    }\r\n\r\n    onWindowClick(ev: MouseEvent) {\r\n        const container = this.element.querySelector(replacePrefix(OFFCANVAS_CONTAINER_CLS, this.#prefix));\r\n        if (container && !container.contains((ev.target as Node))) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    isAnyActive(): boolean {\r\n        return this.helper.hasClass(this.#bodyClass, document.body);\r\n    }\r\n\r\n    setPositionLeft() {\r\n        let cls = getName(this.#prefix, 'left');\r\n        if (this.args.position === 'left' && !this.helper.hasClass(cls, this.element)) {\r\n            this.helper.setClass(cls, this.element)\r\n        } else if (this.args.position == 'right' && this.helper.hasClass(cls, this.element)) {\r\n            this.helper.removeClass(cls, this.element)\r\n        }\r\n    }\r\n\r\n\r\n}","\r\nexport type CuiElementBoxType = Element | HTMLElement | Window;\r\n\r\nexport interface ICuiElementBox {\r\n    getHeight(): number;\r\n    getWidth(): number;\r\n    getTop(): number;\r\n    getLeft(): number;\r\n    getScrollHeight(): number;\r\n    getScrollWidth(): number;\r\n    getScrollTop(): number;\r\n    getScrollLeft(): number;\r\n    queryAll(selector: string): HTMLElement[];\r\n}\r\n\r\nexport class CuiElementBoxFactory {\r\n    static get(element: CuiElementBoxType): ICuiElementBox {\r\n        if (element instanceof Window) {\r\n            return new WindowElementBox();\r\n        } else if (element instanceof HTMLElement) {\r\n            return new HTMLElementBox(element);\r\n        }\r\n        return new ElementBox(element);\r\n    }\r\n}\r\n\r\nexport class ElementBox implements ICuiElementBox {\r\n    #box: DOMRect;\r\n    #element: Element;\r\n    constructor(element: Element) {\r\n        this.#element = element;\r\n        this.#box = element.getBoundingClientRect();\r\n    }\r\n\r\n    getHeight(): number {\r\n        return this.#box.height;\r\n    }\r\n    getWidth(): number {\r\n        return this.#box.width;\r\n    }\r\n    getTop(): number {\r\n        return this.#box.top;\r\n    }\r\n    getLeft(): number {\r\n        return this.#box.left;\r\n    }\r\n    getScrollHeight(): number {\r\n        return this.#element.scrollHeight;\r\n    }\r\n\r\n    getScrollWidth(): number {\r\n        return this.#element.scrollWidth;\r\n    }\r\n\r\n    getScrollTop(): number {\r\n        return this.#element.scrollTop;\r\n    }\r\n\r\n    getScrollLeft(): number {\r\n        return this.#element.scrollLeft;\r\n    }\r\n\r\n    queryAll(selector: string): HTMLElement[] {\r\n        return [...this.#element.querySelectorAll<HTMLElement>(selector)];\r\n    }\r\n}\r\n\r\nexport class HTMLElementBox implements ICuiElementBox {\r\n    #element: HTMLElement;\r\n    constructor(element: HTMLElement) {\r\n        this.#element = element;\r\n    }\r\n\r\n    getHeight(): number {\r\n        return this.#element.offsetHeight;\r\n    }\r\n    getWidth(): number {\r\n        return this.#element.offsetWidth;\r\n    }\r\n    getTop(): number {\r\n        return this.#element.offsetTop;\r\n    }\r\n    getLeft(): number {\r\n        return this.#element.offsetLeft;\r\n    }\r\n\r\n    getScrollHeight(): number {\r\n        return this.#element.scrollHeight;\r\n    }\r\n\r\n    getScrollWidth(): number {\r\n        return this.#element.scrollWidth;\r\n    }\r\n\r\n    getScrollTop(): number {\r\n        return this.#element.scrollTop;\r\n    }\r\n\r\n    getScrollLeft(): number {\r\n        return this.#element.scrollLeft;\r\n    }\r\n\r\n    queryAll(selector: string): HTMLElement[] {\r\n        return [...this.#element.querySelectorAll<HTMLElement>(selector)];\r\n    }\r\n}\r\n\r\nexport class WindowElementBox implements ICuiElementBox {\r\n    getHeight(): number {\r\n        return window.innerHeight;\r\n    }\r\n    getWidth(): number {\r\n        return window.innerWidth;\r\n    }\r\n    getTop(): number {\r\n        return 0;\r\n    }\r\n    getLeft(): number {\r\n        return 0;\r\n    }\r\n\r\n    getScrollHeight(): number {\r\n        return window.innerHeight;\r\n    }\r\n\r\n    getScrollWidth(): number {\r\n        return window.innerWidth;\r\n    }\r\n\r\n    getScrollTop(): number {\r\n        return window.pageYOffset;\r\n    }\r\n    getScrollLeft(): number {\r\n        return window.pageXOffset;\r\n    }\r\n    queryAll(selector: string): HTMLElement[] {\r\n        return [...document.querySelectorAll(selector)] as any[];\r\n    }\r\n\r\n}","import { CuiElementBoxFactory, CuiElementBoxType, ICuiElementBox } from \"../models/elements\";\r\nimport { ICuiEventListener } from \"../models/interfaces\";\r\nimport { getRangeValueOrDefault, is } from \"../utils/functions\";\r\nimport { CuiTaskRunner, ICuiTask } from \"../utils/task\";\r\n\r\nconst DEFAULT_SCROLL_END_TIMEOUT: number = 50;\r\n\r\nexport interface CuiScrollEvent {\r\n    base: Event | undefined;\r\n    top: number;\r\n    left: number;\r\n    initial: boolean;\r\n    scrolling: boolean;\r\n    source: string;\r\n}\r\n\r\nexport class CuiScrollListener implements ICuiEventListener<CuiScrollEvent> {\r\n    #target: CuiElementBoxType;\r\n    #inProgress: boolean;\r\n    #threshold: number;\r\n    #prevX: number;\r\n    #prevY: number;\r\n    #callback: ((ev: CuiScrollEvent) => void) | undefined;\r\n    #isAttached: boolean;\r\n    #box: ICuiElementBox;\r\n    #task: ICuiTask;\r\n    #listener: (ev: Event) => void;\r\n    constructor(target: CuiElementBoxType, threshold?: number) {\r\n        this.#target = target;\r\n        this.#box = CuiElementBoxFactory.get(target);\r\n        this.#inProgress = false;\r\n        this.#threshold = getRangeValueOrDefault(threshold, 0, 100, 0);\r\n        this.#prevX = this.#prevY = 0;\r\n        this.#isAttached = false;\r\n        this.#callback = undefined;\r\n        this.#task = new CuiTaskRunner(DEFAULT_SCROLL_END_TIMEOUT, false, this.onScrollFinish.bind(this));\r\n\r\n        this.#listener = this.listener.bind(this);\r\n    }\r\n\r\n    setCallback(callback: (ev: CuiScrollEvent) => void) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    attach() {\r\n        this.#target.addEventListener('scroll', this.#listener)\r\n        this.#isAttached = true;\r\n        this.listener(undefined, true, \"init\");\r\n    }\r\n\r\n    detach() {\r\n        this.#target.removeEventListener('scroll', this.#listener)\r\n        this.#task.stop();\r\n        this.#isAttached = false;\r\n    }\r\n\r\n    setTarget(target: CuiElementBoxType) {\r\n        if (target !== this.#target) {\r\n            this.detach();\r\n            this.#target = target;\r\n            this.attach();\r\n        }\r\n    }\r\n\r\n    setThreshold(threshold: number) {\r\n        this.#threshold = getRangeValueOrDefault(threshold, 0, 100, 0);\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#inProgress;\r\n    }\r\n\r\n    isAttached(): boolean {\r\n        return this.#isAttached;\r\n    }\r\n\r\n    private listener(ev?: Event, initial?: boolean, source?: string) {\r\n        if (!is(this.#callback)) {\r\n            return;\r\n        }\r\n        let left = this.#box.getScrollLeft();\r\n        let top = this.#box.getScrollTop();\r\n        this.#prevX += left;\r\n        this.#prevY += top;\r\n        if (this.#inProgress || (!this.passedThreshold() && is(ev))) {\r\n            return;\r\n        }\r\n        this.#inProgress = true;\r\n        // @ts-ignore - callback already checked\r\n        this.#callback({\r\n            base: ev,\r\n            top: top,\r\n            left: left,\r\n            initial: initial ?? false,\r\n            scrolling: is(ev),\r\n            source: source ?? \"event\"\r\n        })\r\n        if (is(ev))\r\n            this.#task.start();\r\n        this.#inProgress = false\r\n        this.#prevX = 0;\r\n        this.#prevY = 0;\r\n    }\r\n\r\n    private passedThreshold() {\r\n        return this.#threshold <= 0 || (this.#prevX >= this.#threshold || this.#prevY >= this.#threshold);\r\n    }\r\n\r\n    private onScrollFinish() {\r\n        this.listener(undefined, false, \"task\");\r\n    }\r\n}","export interface ICuiOffsetMode {\r\n    matches(top: number, left: number, offsetX: number, offsetY: number): boolean;\r\n}\r\n\r\nexport class CuiOffsetStaticMode implements ICuiOffsetMode {\r\n\r\n    matches(top: number, left: number, offsetX: number, offsetY: number): boolean {\r\n        return (offsetX > 0 && left >= offsetX) ||\r\n            (offsetY > 0 && top >= offsetY)\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Dynamically calculates whether to trigger or untrigger an action.\r\n * If current value exceedes offset and threshold action is triggered.\r\n * If action was triggered and current move is lower than threshold action is untriggered\r\n * \r\n * Example: If offsetY is 100, then first after 100 action is set on. It is kept when scrolling down.\r\n * If user decides to scroll up and difference between turning point and current is bigger than threshold then action is set off.\r\n *  \r\n * Example usage is with navbar - it shall disappear after offset and return back when user scrolls up. \r\n */\r\nexport class CuiOffsetDynamicMode implements ICuiOffsetMode {\r\n    #pointLeft: number;\r\n    #pointTop: number;\r\n    #prevDiffY: number;\r\n    #prevDiffX: number;\r\n    #wasTriggeredX: boolean;\r\n    #wasTriggeredY: boolean;\r\n    #threshold: number;\r\n    constructor() {\r\n        this.#pointLeft = 0;\r\n        this.#pointTop = 0;\r\n        this.#prevDiffX = 0;\r\n        this.#prevDiffY = 0;\r\n        this.#threshold = 100;\r\n        this.#wasTriggeredX = false;\r\n        this.#wasTriggeredY = false;\r\n    }\r\n    matches(top: number, left: number, offsetX: number, offsetY: number): boolean {\r\n        return this.fitsOffsetY(top, offsetY) || this.fitsOffsetX(left, offsetX);\r\n    }\r\n\r\n\r\n    private fitsOffsetX(left: number, offsetX: number) {\r\n        if (offsetX <= 0)\r\n            return false;\r\n        let diffX = left - this.#pointLeft;\r\n        if (left >= offsetX && diffX > this.#threshold) {\r\n            this.#wasTriggeredX = true;\r\n        } else if (this.#wasTriggeredX && diffX < -this.#threshold) {\r\n            this.#wasTriggeredX = false;\r\n        }\r\n        if (diffX < 0 && this.#prevDiffX < diffX || diffX >= 0 && this.#prevDiffX > diffX) {\r\n            this.#pointLeft = left;\r\n        }\r\n        this.#prevDiffX = diffX;\r\n        return this.#wasTriggeredX;\r\n    }\r\n\r\n    private fitsOffsetY(top: number, offsetY: number) {\r\n        if (offsetY <= 0) {\r\n            return false;\r\n        }\r\n        let diffY = top - this.#pointTop;\r\n        if (top >= offsetY && diffY > this.#threshold) {\r\n            this.#wasTriggeredY = true;\r\n        } else if (this.#wasTriggeredY && diffY < -this.#threshold) {\r\n            this.#wasTriggeredY = false;\r\n        }\r\n        if (diffY < 0 && this.#prevDiffY < diffY || diffY >= 0 && this.#prevDiffY > diffY) {\r\n            this.#pointTop = top;\r\n        }\r\n        this.#prevDiffY = diffY;\r\n        return this.#wasTriggeredY;\r\n    }\r\n}\r\n\r\n\r\nexport class CuiOffsetModeFactory {\r\n    static get(mode: string) {\r\n        if (mode === 'dynamic') {\r\n            return new CuiOffsetDynamicMode();\r\n        }\r\n        return new CuiOffsetStaticMode();\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { CuiScrollListener, CuiScrollEvent } from \"../../core/listeners/scroll\";\r\nimport { ICuiComponentAction, CuiActionsListFactory } from \"../../core/utils/actions\";\r\nimport { are, getIntOrDefault, getRangeValue, getStringOrDefault, is, isStringTrue } from \"../../core/utils/functions\";\r\nimport { CuiOffsetModeFactory, ICuiOffsetMode } from \"./modes\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\n/**\r\n * Toggles an action after specified offset is reached in relation to the element or document\r\n * \r\n * target?: string - target which action shall be triggered on\r\n * action?: string - action to trigger\r\n * offsetY?: number - vertical offset\r\n * offsetX?: number - horizontal offset\r\n * root?: boolean - set true if scroll listener shall be set on document element\r\n * mode?: string - static/dynamic \r\n */\r\n\r\nexport interface CuiOffsetEvent {\r\n    matches: boolean;\r\n    offsetX: number;\r\n    offsetY: number;\r\n    ratioY: number;\r\n    ratioX: number;\r\n    scrolling: boolean;\r\n\r\n    timestamp: number;\r\n}\r\n\r\nexport interface CuiOffsetAttribute {\r\n    target?: string;\r\n    action?: string;\r\n    offsetY?: number;\r\n    offsetX?: number;\r\n    root?: boolean;\r\n}\r\n\r\nexport class CuiOffsetArgs {\r\n    target: string;\r\n    action: string;\r\n    offsetY: number;\r\n    offsetX: number\r\n    root: boolean;\r\n    mode: \"static\" | \"dynamic\";\r\n    constructor() {\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.target = \"\";\r\n        this.root = false;\r\n        this.action = \"\";\r\n        this.mode = 'static';\r\n    }\r\n\r\n    parse(args: any) {\r\n        this.target = args.target;\r\n        this.action = args.action;\r\n        this.offsetX = getIntOrDefault(args.offsetX, -1);\r\n        this.offsetY = getIntOrDefault(args.offsetY, -1);\r\n        this.root = isStringTrue(args.root);\r\n        this.mode = getStringOrDefault(args.mode, 'static');\r\n    }\r\n}\r\nexport class CuiOffsetComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-offset`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiOffsetHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiOffsetHandler extends CuiHandler<CuiOffsetArgs> {\r\n    #listener: CuiScrollListener | undefined;\r\n    #target: Element;\r\n    #utils: CuiUtils;\r\n    #matched: boolean;\r\n    #action: ICuiComponentAction[];\r\n    #prevX: number;\r\n    #prevY: number;\r\n    #threshold: number;\r\n    #root: Element;\r\n    #modeHandler: ICuiOffsetMode | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiOffsetHandler\", element, attribute, new CuiOffsetArgs(), utils);\r\n        this.element = element as HTMLElement;\r\n\r\n        this.#target = this.element;\r\n        this.#utils = utils;\r\n        this.#matched = false;\r\n        this.#action = [];\r\n        this.#prevX = 0;\r\n        this.#prevY = 0;\r\n        this.#threshold = 20;\r\n        this.#root = this.element;\r\n        this.#modeHandler = null;\r\n        this.#listener = undefined;\r\n\r\n    }\r\n\r\n    onInit(): void {\r\n        this.parseAttribute();\r\n        this.#listener = new CuiScrollListener(this.args.root ? (window as any) : this.element, this.utils.setup.scrollThreshold);\r\n        this.#listener.setCallback(this.onScroll.bind(this));\r\n        this.#listener.attach();\r\n    }\r\n    onUpdate(): void {\r\n        this.parseAttribute();\r\n    }\r\n    onDestroy(): void {\r\n        if (this.#listener)\r\n            this.#listener.detach();\r\n    }\r\n\r\n    private onScroll(ev: CuiScrollEvent): void {\r\n        this.checkAndPerformActions(ev);\r\n    }\r\n\r\n    private parseAttribute() {\r\n        this.#root = this.getRoot();\r\n        this.#target = this.getTarget();\r\n        this.#action = CuiActionsListFactory.get(this.args.action);\r\n        this.#modeHandler = CuiOffsetModeFactory.get(this.args.mode);\r\n\r\n    }\r\n\r\n    private checkAndPerformActions(ev: CuiScrollEvent) {\r\n        if (!is(this.#modeHandler)) {\r\n            this.logError(\"Cannot perform - mode handler not initialized\", \"checkAndPerformActions\")\r\n        }\r\n        // @ts-ignore modehandler\r\n        let matchesOffset = this.#modeHandler.matches(ev.top, ev.left, this.args.offsetX, this.args.offsetY);\r\n        /**\r\n         * Act and emit event when offset has been reached\r\n         */\r\n        if (matchesOffset !== this.#matched) {\r\n            this.act(matchesOffset);\r\n            this.#matched = matchesOffset;\r\n            this.callEvent(this.#matched, ev.left, ev.top, ev.scrolling, ev.source, ...this.calcaRatio(ev.left, ev.top));\r\n            return;\r\n        }\r\n        /**\r\n         * Emit event periodically\r\n         */\r\n        if (this.exceededThreshold(ev.left, ev.top)) {\r\n            this.callEvent(this.#matched, ev.left, ev.top, ev.scrolling, ev.source, ...this.calcaRatio(ev.left, ev.top));\r\n            this.#prevX = ev.left;\r\n            this.#prevY = ev.top;\r\n        }\r\n    }\r\n\r\n\r\n    private act(matching: boolean) {\r\n        if (!are(this.#action, this.#target)) {\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        this.#action.forEach(action => {\r\n            if (matching) {\r\n                action.add(this.#target, this.#utils)\r\n            } else {\r\n                action.remove(this.#target, this.#utils)\r\n            }\r\n        });\r\n        this.isLocked = false;\r\n    }\r\n\r\n    private callEvent(matches: boolean, x: number, y: number, scrolling: boolean, source: string, ratioX: number, ratioY: number) {\r\n        this.emitEvent(EVENTS.OFFSET, {\r\n            matches: this.#matched,\r\n            offsetX: x,\r\n            offsetY: y,\r\n            ratioX: ratioX,\r\n            ratioY: ratioY,\r\n            scrolling: scrolling,\r\n            source: source,\r\n            timestamp: Date.now()\r\n        })\r\n    }\r\n\r\n    private getRoot(): Element {\r\n        return this.args.root ? document.body : this.element;\r\n    }\r\n\r\n    private exceededThreshold(x: number, y: number): boolean {\r\n        return Math.abs(x - this.#prevX) > this.#threshold || Math.abs(y - this.#prevY) > this.#threshold;\r\n    }\r\n\r\n    private calcaRatio(x: number, y: number): [number, number] {\r\n        let ratY = parseFloat(((this.#root.clientHeight + y) / this.#root.scrollHeight).toFixed(2))\r\n        let ratX = parseFloat(((this.#root.clientWidth + x) / this.#root.scrollWidth).toFixed(2))\r\n        return [getRangeValue(ratX, 0, 1), getRangeValue(ratY, 0, 1)];\r\n    }\r\n\r\n    private getTarget(): Element {\r\n        let target = this.args.target ? this.#root.querySelector(this.args.target) : null;\r\n        return target ?? this.element;\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiOpenable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, is, isString, isStringTrue, are, getFirstMatching } from \"../../core/utils/functions\";\r\nimport { CuiActionsListFactory } from \"../../core/utils/actions\";\r\nimport { CUID_ATTRIBUTE, EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiOpenArgs {\r\n    target: string;\r\n    action: string;\r\n    timeout: number;\r\n    prevent: boolean;\r\n    state: string;\r\n\r\n    #defTimeout: number;\r\n    constructor(timeout?: number) {\r\n        this.#defTimeout = timeout ?? 300;\r\n        this.target = \"\";\r\n        this.action = \"\";\r\n        this.timeout = 0;\r\n        this.prevent = false;\r\n        this.state = \"\";\r\n\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args;\r\n            this.action = \"\";\r\n            this.timeout = this.#defTimeout;\r\n            this.prevent = false;\r\n            this.state = \"\";\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, \"\");\r\n        this.action = args.action;\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.prevent = isStringTrue(args.prevent)\r\n        this.state = args.state;\r\n    }\r\n}\r\n\r\nexport class CuiOpenComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-open`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiOpenHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiOpenHandler extends CuiHandler<CuiOpenArgs> {\r\n    #eventId: string | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiOpenHandler\", element, attribute, new CuiOpenArgs(utils.setup.animationTime), utils);\r\n        this.#eventId = null;\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    onInit(): void {\r\n        this.element.addEventListener('click', this.onClick)\r\n        this.#eventId = this.onEvent(EVENTS.OPEN, this.onOpen.bind(this));\r\n    }\r\n\r\n    onUpdate(): void {\r\n        //\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.element.removeEventListener('click', this.onClick)\r\n        this.detachEvent(EVENTS.OPEN, this.#eventId);\r\n    }\r\n\r\n    onClick(ev: MouseEvent) {\r\n        this.onOpen(ev);\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n\r\n    onOpen(ev: MouseEvent) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        const target = this.getTarget(this.args.target);\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.args.target} not found`, 'onClick')\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        //@ts-ignore - target checked\r\n        this.run(target).then((result) => {\r\n            //@ts-ignore - target checked\r\n            this.activateTarget(ev, target, result);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.isLocked = false;\r\n        })\r\n    }\r\n    /**\r\n     * Emits open event or performs an opening action\r\n     * @param target target element\r\n     * @returns whether event opened shall be emitted\r\n     */\r\n    private async run(target: Element): Promise<boolean> {\r\n        let cuiId = (target as any).$cuid;\r\n        if (is(cuiId)) {\r\n            this._log.debug(\"Open cUI component\")\r\n            await this.utils.bus.emit(EVENTS.OPEN, cuiId, this.args.state);\r\n            return false;\r\n        } else {\r\n            this._log.debug(\"Open html component\")\r\n            if (are(this.args.timeout, this.args.action)) {\r\n                this._log.debug(\"Perfrom an action\")\r\n                let actions = CuiActionsListFactory.get(this.args.action)\r\n                await this.actionsHelper.performActions(target, actions, this.args.timeout, () => {\r\n                    this.setActiveClass(target)\r\n                });\r\n                return true;\r\n            }\r\n            this.setActiveClassAsync(target);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private setActiveClass(target: Element) {\r\n        if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.setClass(this.activeClassName, target);\r\n        }\r\n    }\r\n\r\n    private setActiveClassAsync(target: Element) {\r\n        this.fetch(() => {\r\n            if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n                this.helper.setClassesAs(target, this.activeClassName);\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    private activateTarget(ev: MouseEvent, target: Element, shouldEmit: boolean): void {\r\n        if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.setClassesAs(target, this.activeClassName);\r\n        }\r\n        if (shouldEmit)\r\n            this.emitOpen(ev);\r\n    }\r\n\r\n    private emitOpen(ev: MouseEvent) {\r\n        this.emitEvent(EVENTS.OPENED, {\r\n            event: ev,\r\n            state: this.args.state,\r\n            timestamp: Date.now()\r\n        })\r\n    }\r\n\r\n    private getTarget(target: string) {\r\n        if (is(target)) {\r\n            //@ts-ignore - target checked\r\n            return document.querySelector(target);\r\n        }\r\n        let parent = this.element.parentElement;\r\n        //@ts-ignore - parent checked\r\n        let result = is(parent) ? parent.querySelectorAll(`[${CUID_ATTRIBUTE}]`) : undefined;\r\n        if (!result || result.length < 2) {\r\n            return undefined;\r\n        }\r\n\r\n        return getFirstMatching([...result], (el: Element) => {\r\n            return el !== this.element;\r\n        })\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\nimport { calcWindowSize2, getIntOrDefault, getStringOrDefault, is } from \"../../core/utils/functions\";\r\nimport { CuiIntersectionObserver } from \"../../core/observers/intersection\";\r\nimport { CuiWindowSize } from \"../../core/utils/types\";\r\nimport { CuiActionsFatory, ICuiComponentAction } from \"../../core/utils/actions\";\r\nimport { CuiResizeData } from \"src/plugins/resize/observer\";\r\n\r\ntype CuiResizeComponentMode = \"smart\" | \"simple\";\r\nexport class CuiResizeArgs implements ICuiParsable {\r\n    mode: CuiResizeComponentMode;\r\n    default: string;\r\n    small?: string;\r\n    medium?: string;\r\n    large?: string;\r\n    xlarge?: string;\r\n    delay: number;\r\n    constructor() {\r\n        this.mode = \"simple\";\r\n        this.default = \"\";\r\n        this.small = this.medium = this.large = this.xlarge = undefined;\r\n        this.delay = 0;\r\n    }\r\n\r\n    parse(args: any) {\r\n        this.default = getStringOrDefault(args.default, \"\");\r\n        this.small = args.small ?? args.s;\r\n        this.medium = args.medium ?? args.m;\r\n        this.large = args.large ?? args.l;\r\n        this.xlarge = args.xlarge ?? args.xl;\r\n        this.mode = args.mode === 'smart' ? \"smart\" : \"simple\";\r\n        this.delay = getIntOrDefault(args.delay, 0);\r\n    }\r\n}\r\n\r\nexport class CuiResizeComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-resize`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiResizeHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiResizeHandler extends CuiHandler<CuiResizeArgs> {\r\n    #eventId: string | null;\r\n    #intersectionObserver: CuiIntersectionObserver;\r\n    #currentSize: CuiWindowSize;\r\n    #currentValue: string | undefined;\r\n    #lastValue: string;\r\n    #currentAction: ICuiComponentAction | undefined;\r\n    #isIntersecting: boolean;\r\n    #timeoutToken: any | undefined;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiResizeHandler\", element, attribute, new CuiResizeArgs(), utils);\r\n        this.#eventId = null;\r\n        this.#intersectionObserver = new CuiIntersectionObserver(document.documentElement, [0, 0.1])\r\n        this.#intersectionObserver.setCallback(this.onIntersection.bind(this));\r\n        this.#lastValue = \"\";\r\n        this.#currentValue = \"\";\r\n        this.#currentSize = \"none\";\r\n        this.#isIntersecting = false;\r\n        this.#timeoutToken = undefined;\r\n        this.#currentAction = undefined;\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#eventId = this.utils.bus.on(EVENTS.RESIZE, this.resize.bind(this));\r\n        this.#intersectionObserver.connect();\r\n        this.#intersectionObserver.observe(this.element);\r\n        this.#currentSize = calcWindowSize2(window.innerWidth);\r\n        this.#isIntersecting = this.isInViewport(this.element);\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        if (this.#eventId !== null) {\r\n            this.utils.bus.detach(EVENTS.RESIZE, this.#eventId);\r\n            this.#eventId = null\r\n        }\r\n        this.#intersectionObserver.unobserve(this.element);\r\n        this.#intersectionObserver.disconnect();\r\n    }\r\n\r\n    private resize(data: CuiResizeData) {\r\n        this.#currentSize = data.current;\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n\r\n    private onIntersection(entries: IntersectionObserverEntry[]) {\r\n        if (entries.length > 0) {\r\n            this.#isIntersecting = entries[0].isIntersecting;\r\n        }\r\n        this.updateElement();\r\n    }\r\n\r\n    private setNewValue() {\r\n        let newValue = this.isSmartMode() ? this.getSmartValue(this.#currentSize) : this.getValue(this.#currentSize, true);\r\n        if (newValue && newValue !== this.#currentValue) {\r\n            this.#currentValue = newValue;\r\n        }\r\n    }\r\n\r\n    private getValue(size: CuiWindowSize, replace?: boolean): string | undefined {\r\n        let value = undefined;\r\n        switch (size) {\r\n            case \"xlarge\":\r\n                value = this.args.xlarge;\r\n                break;\r\n            case \"large\":\r\n                value = this.args.large;\r\n                break;\r\n            case \"medium\":\r\n                value = this.args.medium;\r\n                break;\r\n            case \"small\":\r\n                value = this.args.small;\r\n                break;\r\n            default:\r\n                value = this.args.default;\r\n        }\r\n        return (replace && !value) ? this.args.default : value;\r\n    }\r\n\r\n    private getSmartValue(size: CuiWindowSize) {\r\n        let value = this.args.default;\r\n        if (size === 'none') {\r\n            return value;\r\n        }\r\n        value = this.args.small ?? value;\r\n        if (size === 'small') {\r\n            return value;\r\n        }\r\n        value = this.args.medium ?? value;\r\n        if (size === 'medium') {\r\n            return value;\r\n        }\r\n        value = this.args.large ?? value;\r\n        if (size === 'large') {\r\n            return value;\r\n        }\r\n        return this.args.xlarge ?? value;\r\n    }\r\n\r\n    private updateElement() {\r\n        if (!this.#isIntersecting && this.isSmartMode()) {\r\n            this.logInfo(\"Not intersecting\")\r\n            return;\r\n        }\r\n        if (!is(this.#currentValue)) {\r\n            this.logWarning(\"Not eligible to set value: \" + this.#currentValue)\r\n            return;\r\n        }\r\n        if (this.#lastValue !== this.#currentValue) {\r\n            this.run(() => {\r\n                //@ts-ignore already checked\r\n                let newAction = CuiActionsFatory.get(this.#currentValue);\r\n                this.mutate(() => {\r\n                    if (this.#currentAction) {\r\n                        this.#currentAction.remove(this.element);\r\n                    }\r\n                    newAction.add(this.element);\r\n                    //@ts-ignore already checked\r\n                    this.#lastValue = this.#currentValue;\r\n                    this.#currentAction = newAction;\r\n\r\n                })\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    private isSmartMode() {\r\n        return this.args.mode === 'smart';\r\n    }\r\n\r\n    private isInViewport(element: Element): boolean {\r\n        const rect = element.getBoundingClientRect();\r\n        return (\r\n            rect.top >= 0 &&\r\n            rect.left >= 0 &&\r\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth)\r\n        );\r\n    }\r\n\r\n    private run(callback: () => void) {\r\n        if (this.#timeoutToken) {\r\n            clearTimeout(this.#timeoutToken);\r\n            this.#timeoutToken = undefined;\r\n        }\r\n        this.#timeoutToken = setTimeout(() => {\r\n            callback();\r\n            this.#timeoutToken = undefined;\r\n        }, this.args.delay);\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\nimport { is, getOffsetTop, getStringOrDefault, are } from \"../../core/utils/functions\";\r\n\r\n/**\r\n * Component scrolls to specified target in the document\r\n * Arguments: \r\n * target - selector to target element where page should be scrolled to.\r\n * parent - set parent selector if parent should be different than html parent\r\n * behavior - auto/smooth - choose between step and smooth scrolling\r\n * \r\n */\r\n\r\nexport class CuiScrollComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = is(prefix) ? prefix + 'scroll' : 'cui-scroll';\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiScrollHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport interface CuiScrollAttribute {\r\n    target?: string;\r\n    parent?: string;\r\n    behavior?: 'auto' | 'smooth';\r\n}\r\n\r\nexport class CuiScrollArgs implements ICuiParsable {\r\n    target: string;\r\n    parent: string;\r\n    behavior: 'auto' | 'smooth';\r\n\r\n    constructor() {\r\n        this.target = \"\";\r\n        this.parent = \"\";\r\n        this.behavior = 'auto';\r\n    }\r\n\r\n    parse(val: any): void {\r\n        this.target = getStringOrDefault(val.target, \"\");\r\n        this.parent = getStringOrDefault(val.parent, \"\");\r\n        this.behavior = is(val.behavior) && val.behavior.toLowerCase() === 'smooth' ? 'smooth' : 'auto';\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CuiScrollHandler extends CuiHandler<CuiScrollArgs> {\r\n    #parent: HTMLElement | null;\r\n    #target: HTMLElement | null;\r\n\r\n    #onClickBound: (ev: MouseEvent) => void;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiScrollHandler\", element, attribute, new CuiScrollArgs(), utils);\r\n        this.element = element;\r\n        this.#parent = null;\r\n        this.#target = null;\r\n\r\n        this.#onClickBound = this.onClick.bind(this);\r\n    }\r\n\r\n    onInit(): void {\r\n        this.element.addEventListener('click', this.#onClickBound);\r\n        this.setTargets();\r\n    }\r\n    onUpdate(): void {\r\n        this.setTargets();\r\n    }\r\n    onDestroy(): void {\r\n        this.element.removeEventListener('click', this.#onClickBound);\r\n    }\r\n\r\n    onClick(ev: MouseEvent) {\r\n        if (!are(this.#target, this.#parent)) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        let to = getOffsetTop(this.#target) - this.#parent.offsetTop;\r\n        //@ts-ignore\r\n        let from = this.#parent.scrollTop;\r\n        let by = to - from;\r\n        //@ts-ignore\r\n        this.#parent.scrollBy({\r\n            top: by,\r\n            behavior: this.args.behavior\r\n        });\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            to: to,\r\n            by: by,\r\n            //@ts-ignore\r\n            target: this.#target,\r\n            //@ts-ignore\r\n            parent: this.#parent,\r\n            timestamp: Date.now(),\r\n        })\r\n        ev.preventDefault();\r\n    }\r\n\r\n    private setTargets(): void {\r\n        this.#target = is(this.args.target) ? document.querySelector(this.args.target) as HTMLElement : null;\r\n        if (is(this.#target)) {\r\n            // @ts-ignore target is set\r\n            this.#parent = is(this.args.parent) ? document.querySelector(this.args.parent) : this.#target.parentElement;\r\n        }\r\n    }\r\n}\r\n\r\n","import { CuiScrollEvent, CuiScrollListener } from \"../listeners/scroll\";\r\nimport { CuiElementBoxFactory, CuiElementBoxType, ICuiElementBox } from \"../models/elements\";\r\nimport { ICuiEventListener } from \"../models/interfaces\";\r\nimport { are, getRangeValue, is } from \"../utils/functions\";\r\nimport { CuiIntersectionCallback, CuiIntersectionListenerOptions, CuiIntersectionResult } from \"./interfaces\";\r\n\r\nconst DEFAULT_OPTION_THRESHOLD: number = 0;\r\n\r\nexport class CuiIntersectionListener implements ICuiEventListener<CuiIntersectionResult> {\r\n    #scrollListener: CuiScrollListener;\r\n    #callback: CuiIntersectionCallback | undefined;\r\n    #children: HTMLElement[];\r\n    #box: ICuiElementBox;\r\n    constructor(element: CuiElementBoxType, options?: CuiIntersectionListenerOptions) {\r\n        this.#box = CuiElementBoxFactory.get(element);\r\n        this.#scrollListener = new CuiScrollListener(element as Element, options?.threshold ?? DEFAULT_OPTION_THRESHOLD);\r\n        this.#scrollListener.setCallback(this.onScroll.bind(this));\r\n        this.#children = [];\r\n        this.#callback = undefined;\r\n    }\r\n\r\n    /**\r\n     * Sets child elements - ratio is calcutalated based on them\r\n     * @param children \r\n     */\r\n    setChildren(children: HTMLElement[]) {\r\n        this.#children = children;\r\n    }\r\n\r\n    setThreshold(threshold: number) {\r\n        this.#scrollListener.setThreshold(threshold)\r\n    }\r\n\r\n    setCallback(callback: (t: CuiIntersectionResult) => void): void {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    setParent(target: CuiElementBoxType) {\r\n        this.#box = CuiElementBoxFactory.get(target);\r\n        this.#scrollListener.setTarget(target);\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#scrollListener.isInProgress();\r\n    }\r\n\r\n    attach(): void {\r\n        if (this.isAttached()) {\r\n            return;\r\n        }\r\n        this.#scrollListener.attach();\r\n    }\r\n\r\n    detach(): void {\r\n        if (!this.isAttached()) {\r\n            return;\r\n        }\r\n        this.#scrollListener.detach();\r\n    }\r\n\r\n    isAttached(): boolean {\r\n        return this.#scrollListener && this.#scrollListener.isAttached();\r\n    }\r\n\r\n    private onScroll(ev: CuiScrollEvent): void {\r\n        if (!are(this.#children, this.#callback)) {\r\n            return;\r\n        }\r\n        if (this.#callback)\r\n            this.#callback(this.prepareCallbackResult(ev))\r\n    }\r\n\r\n    private calcChildVerticalRatio(child: HTMLElement, currentTop: number, currentBottom: number): number {\r\n        let childBottom = child.offsetTop + child.offsetHeight;\r\n        // Simulated top if view top is outside of parent then takes parent top\r\n        let symTop = currentTop > child.offsetTop ? currentTop : child.offsetTop;\r\n        // Simulated bottom if view bottom is outside of parent then takes parent bottom\r\n        let symBottom = currentBottom < childBottom ? currentBottom : childBottom;\r\n        // Calculates amount of pixels that are in view\r\n        let diff = symBottom - symTop;\r\n        // Calculates ratio - how much of a child is in parent view\r\n        let ratio = diff / child.offsetHeight;\r\n        return getRangeValue(ratio, 0, 1);\r\n    }\r\n\r\n    private calcChildHorizontalRatio(child: HTMLElement, currentLeft: number, currentRight: number): number {\r\n        let childRight = child.offsetLeft + child.offsetWidth;\r\n        // Simulated top if view left is outside of parent then takes parent left\r\n        let symLeft = currentLeft > child.offsetLeft ? currentLeft : child.offsetLeft;\r\n        // Simulated bottom if view right is outside of parent then takes parent right\r\n        let symRight = currentRight < childRight ? currentRight : childRight;\r\n        // Calculates amount of pixels that are in view\r\n        let diff = symRight - symLeft;\r\n        // Calculates ratio - how much of a child is in parent view\r\n        let ratio = diff / child.offsetWidth;\r\n        return getRangeValue(ratio, 0, 1);\r\n    }\r\n\r\n    private prepareCallbackResult(ev: CuiScrollEvent): CuiIntersectionResult {\r\n        let parentBottom = ev.top + this.#box.getHeight();\r\n        let parentRight = ev.left + this.#box.getWidth();\r\n        let result: CuiIntersectionResult = {\r\n            ev: ev.base,\r\n            top: ev.top,\r\n            left: ev.left,\r\n            scrolling: ev.scrolling ?? false,\r\n            initial: ev.initial ?? false,\r\n            source: ev.source,\r\n            items: this.#children.map((child: HTMLElement, index: number) => {\r\n                let verticalRatio = this.calcChildVerticalRatio(child, ev.top, parentBottom)\r\n                let horizontalRatio = this.calcChildHorizontalRatio(child, ev.left, parentRight);\r\n                return {\r\n                    verticalRatio: verticalRatio,\r\n                    horizontalRatio: horizontalRatio,\r\n                    element: child\r\n                }\r\n            })\r\n        };\r\n\r\n        return result;\r\n    }\r\n}","\r\nimport { CuiIntersectionResultItem } from \"../../core/intersection/interfaces\";\r\nimport { ICuiComponentAction } from \"../../core/utils/actions\";\r\nimport { are, is } from \"../../core/utils/functions\";\r\n\r\nexport interface CuiScrollspyUpdateResult {\r\n    intersecting?: HTMLElement[];\r\n    changed: boolean;\r\n}\r\n\r\nexport interface ICuiScrollspyModeHandler {\r\n    update(items: CuiIntersectionResultItem[], ratio: number, actions: ICuiComponentAction[], links: HTMLElement[], linksActions: ICuiComponentAction[]): CuiScrollspyUpdateResult;\r\n}\r\n\r\nexport class CuiScrollSpyModeHandlerFactory {\r\n    static get(mode: string) {\r\n        if (mode === \"multi\") {\r\n            return new CuiMultiModeHandler();\r\n        }\r\n        return new CuiSingleModeHandler();\r\n    }\r\n}\r\n\r\nabstract class CuiModeHandlerBase<T> {\r\n    previous: T;\r\n    constructor(init: T) {\r\n        this.previous = init;\r\n    }\r\n\r\n\r\n    getMatching(ratio: number, items: CuiIntersectionResultItem[]): number[] {\r\n        return items.reduce((result: number[], item: CuiIntersectionResultItem, index: number) => {\r\n            if (item.verticalRatio > ratio) {\r\n                result.push(index);\r\n            }\r\n            return result;\r\n        }, [])\r\n    }\r\n\r\n    addActions(actions: ICuiComponentAction[], ...elements: HTMLElement[]) {\r\n        this.forEachAction(actions, elements, (action, element) => {\r\n            action.add(element);\r\n        })\r\n    }\r\n\r\n    removeActions(actions: ICuiComponentAction[], ...elements: HTMLElement[]) {\r\n        this.forEachAction(actions, elements, (action, element) => {\r\n            action.remove(element);\r\n        })\r\n    }\r\n\r\n    private forEachAction(actions: ICuiComponentAction[], elements: HTMLElement[], callback: (action: ICuiComponentAction, element: HTMLElement) => void): void {\r\n        if (!are(actions, elements, callback)) {\r\n            return;\r\n        }\r\n        actions.forEach(action => {\r\n            elements.forEach(element => {\r\n                if (is(element))\r\n                    callback(action, element);\r\n            })\r\n        })\r\n    }\r\n\r\n    abstract matches(item: T): boolean;\r\n\r\n}\r\n\r\nexport class CuiSingleModeHandler extends CuiModeHandlerBase<number> implements ICuiScrollspyModeHandler {\r\n\r\n    constructor() {\r\n        super(-1);\r\n    }\r\n\r\n    update(items: CuiIntersectionResultItem[], ratio: number, actions: ICuiComponentAction[], links: HTMLElement[], linksActions: ICuiComponentAction[]): CuiScrollspyUpdateResult {\r\n        let matching = this.getMatching(ratio, items);\r\n        let len = matching.length;\r\n        let last = len > 0 ? matching[len - 1] : -1;\r\n        let result: CuiScrollspyUpdateResult = {\r\n            changed: false\r\n        }\r\n        if (!this.matches(last)) {\r\n            if (this.previous > -1)\r\n                this.removeActions(actions, items[this.previous].element);\r\n            if (last > -1) {\r\n                let lastElement = items[last].element;\r\n                result.intersecting = [lastElement]\r\n                this.addActions(actions, lastElement)\r\n            }\r\n            if (are(links, linksActions)) {\r\n                if (this.previous > -1)\r\n                    this.removeActions(linksActions, links[this.previous]);\r\n                if (last > -1)\r\n                    this.addActions(linksActions, links[last])\r\n            }\r\n            this.previous = last;\r\n            result.changed = true;\r\n            result.intersecting = []\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    matches(item: number): boolean {\r\n        return item === this.previous;\r\n    }\r\n}\r\n\r\nexport class CuiMultiModeHandler extends CuiModeHandlerBase<number[]> implements ICuiScrollspyModeHandler {\r\n    constructor() {\r\n        super([]);\r\n    }\r\n    update(items: CuiIntersectionResultItem[], ratio: number, actions: ICuiComponentAction[], links: HTMLElement[], linksActions: ICuiComponentAction[]): CuiScrollspyUpdateResult {\r\n        let matching = this.getMatching(ratio, items);\r\n        let result: CuiScrollspyUpdateResult = {\r\n            changed: false\r\n        }\r\n        if (!this.matches(matching)) {\r\n            let intersecting = matching.map(idx => { return items[idx].element })\r\n            this.removeActions(actions, ...this.previous.map(idx => { return items[idx].element }));\r\n            this.addActions(actions, ...intersecting)\r\n            result.intersecting = intersecting;\r\n            if (are(links, linksActions)) {\r\n                this.removeActions(linksActions, ...this.previous.map(idx => { return links[idx] }));\r\n                this.addActions(linksActions, ...matching.map(idx => { return links[idx] }))\r\n            }\r\n            this.previous = matching;\r\n            result.changed = true;\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    matches(item: number[]): boolean {\r\n        let len = item.length;\r\n        if (len !== this.previous.length) {\r\n            return false;\r\n        }\r\n        let i = 0;\r\n        for (i = 0; i < len; i++) {\r\n            if (!this.previous.includes(item[i])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { ICuiComponentAction, CuiActionsListFactory } from \"../../core/utils/actions\";\r\nimport { getRangeValueOrDefault, getStringOrDefault, isStringTrue, getIntOrDefault } from \"../../core/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"../../core/utils/statics\";\r\nimport { CuiIntersectionListener } from \"../../core/intersection/intersection\";\r\nimport { CuiIntersectionResult } from \"../../core/intersection/interfaces\";\r\nimport { CuiElementBoxFactory, CuiElementBoxType, ICuiElementBox } from \"../../core/models/elements\";\r\nimport { CuiScrollSpyModeHandlerFactory, CuiScrollspyUpdateResult, ICuiScrollspyModeHandler } from \"./mode\";\r\n\r\nconst DEFAULT_SELECTOR = \"> *\";\r\n\r\nexport interface CuiScrollspyScrollEvent {\r\n    top: number;\r\n    left: number;\r\n    scrolling: boolean;\r\n    initial: boolean;\r\n    source: string;\r\n    timestamp: number;\r\n}\r\n\r\nexport interface CuiScrollspyTargetChangeEvent {\r\n    intersecting: HTMLElement[];\r\n    timestamp: number;\r\n}\r\n\r\nexport interface CuiScrollSpyAttribute {\r\n    selector?: string;\r\n    action?: string;\r\n    link?: string;\r\n    linkAction?: string;\r\n    ratio: number;\r\n    threshold: number;\r\n}\r\n\r\n\r\nexport class CuiScrollSpyArgs {\r\n    selector: string; // Child selector\r\n    action: string; // Action to be performed on intersecting elements\r\n    link: string; // Link selector\r\n    linkAction: string; //Actions to be triggered on link\r\n    ratio: number; // Value 0..1 telling how much of a child view must be in view to be added to intersecting items\r\n    isRoot: boolean; // Attach to window or element\r\n    mode: \"single\" | \"multi\"; // Action is triggered on single (last) intersecting item or all intersecting items\r\n    threshold: number; // Threshold value (in px) for scroll listener\r\n\r\n    constructor() {\r\n        this.ratio = 0;\r\n        this.mode = \"single\";\r\n        this.threshold = -1;\r\n        this.selector = \"\";\r\n        this.action = \"\";\r\n        this.isRoot = false;\r\n        this.link = \"\";\r\n        this.linkAction = \"\";\r\n    }\r\n    parse(args: any) {\r\n        this.selector = `${SCOPE_SELECTOR}${args.selector ?? DEFAULT_SELECTOR}`;\r\n        this.action = getStringOrDefault(args.action, \"\");\r\n        this.link = getStringOrDefault(args.link, \"\");\r\n        this.linkAction = getStringOrDefault(args.linkAction, \"\");\r\n        this.ratio = getRangeValueOrDefault(parseFloat(args.ratio), 0, 1, 0);\r\n        this.isRoot = isStringTrue(args.isRoot);\r\n        this.mode = args?.mode === 'multi' ? \"multi\" : \"single\";\r\n        this.threshold = getIntOrDefault(args.threshold, -1);\r\n    }\r\n}\r\nexport class CuiScrollspyComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-scrollspy`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiScrollspyHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiScrollspyHandler extends CuiHandler<CuiScrollSpyArgs> {\r\n    #listener: CuiIntersectionListener;\r\n    #links: HTMLElement[];\r\n    #actions: ICuiComponentAction[];\r\n    #linkActions: ICuiComponentAction[];\r\n    #root: CuiElementBoxType | undefined;\r\n    #rootBox: ICuiElementBox | undefined;\r\n    #modeHandler: ICuiScrollspyModeHandler | undefined;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiScrollspyHandler\", element, attribute, new CuiScrollSpyArgs(), utils);\r\n        this.element = element as HTMLElement;\r\n        this.#listener = new CuiIntersectionListener(this.element, { threshold: this.utils.setup.scrollThreshold });\r\n        this.#links = [];\r\n        this.#actions = [];\r\n        this.#linkActions = [];\r\n        this.#root = undefined;\r\n        this.#rootBox = undefined;\r\n        this.#modeHandler = undefined;\r\n    }\r\n\r\n    onInit(): void {\r\n        this.parseAttribute();\r\n        this.#listener.setCallback(this.onIntersection.bind(this));\r\n        this.#listener.attach();\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.updateAttributes();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.#listener.detach();\r\n    }\r\n\r\n    private onIntersection(ev: CuiIntersectionResult): void {\r\n        if (!this.#modeHandler) {\r\n            this.logError(\"Cannot perform - mode handler not initialized\", \"OnIntersection\")\r\n            return;\r\n        }\r\n        let timestamp = Date.now();\r\n        this.mutate(() => {\r\n            //@ts-ignore - modeHandler checked\r\n            let updateResult: CuiScrollspyUpdateResult = this.#modeHandler.update(ev.items, this.args.ratio, this.#actions, this.#links, this.#linkActions)\r\n            if (updateResult.changed) {\r\n                this.emitEvent(EVENTS.TARGET_CHANGE, {\r\n                    intersecting: updateResult.intersecting,\r\n                    timestamp: timestamp\r\n                })\r\n            }\r\n        })\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            top: ev.top,\r\n            left: ev.left,\r\n            scrolling: ev.scrolling,\r\n            initial: ev.initial,\r\n            source: ev.source,\r\n            timestamp: timestamp,\r\n        })\r\n    }\r\n\r\n    private parseAttribute() {\r\n        this.#root = this.args.isRoot ? window : this.element;\r\n        this.#rootBox = CuiElementBoxFactory.get(this.#root);\r\n        let targets = this.args.selector ? this.#rootBox.queryAll(this.args.selector) : [];\r\n        this.#listener.setChildren(targets);\r\n        this.#listener.setThreshold(this.args.threshold);\r\n        this.#links = this.args.link ? [...document.querySelectorAll<HTMLElement>(this.args.link)] : [];\r\n        this.#actions = CuiActionsListFactory.get(this.args.action);\r\n        this.#linkActions = CuiActionsListFactory.get(this.args.linkAction);\r\n        this.#modeHandler = CuiScrollSpyModeHandlerFactory.get(this.args.mode);\r\n\r\n    }\r\n\r\n    private updateAttributes() {\r\n        if (this.prevArgs && this.args.isRoot !== this.prevArgs.isRoot) {\r\n            this.#root = this.args.isRoot ? window : this.element;\r\n            this.#rootBox = CuiElementBoxFactory.get(this.#root);\r\n            this.#listener.setParent(this.#root);\r\n        }\r\n        if (this.prevArgs && this.#rootBox && this.args.selector !== this.prevArgs.selector) {\r\n            let targets = this.args.selector ? this.#rootBox.queryAll(this.args.selector) : [];\r\n            this.#listener.setChildren(targets);\r\n        }\r\n        this.#listener.setThreshold(this.args.threshold);\r\n        this.#links = this.args.link ? [...document.querySelectorAll<HTMLElement>(this.args.link)] : [];\r\n        this.#actions = CuiActionsListFactory.get(this.args.action);\r\n        this.#linkActions = CuiActionsListFactory.get(this.args.linkAction);\r\n        this.#modeHandler = CuiScrollSpyModeHandlerFactory.get(this.args.mode);\r\n\r\n    }\r\n}","import { is, enumerateObject, are } from \"../utils/functions\";\r\n\r\nexport interface ElementBuilderAttribute {\r\n    [name: string]: string;\r\n}\r\nexport class ElementBuilder {\r\n    #id: string | undefined;\r\n    #classes: string[];\r\n    #attributes: ElementBuilderAttribute | undefined;\r\n    #tag: string;\r\n    #text: string | undefined;\r\n    #children: Element[];\r\n    #rawChildren: ElementBuilder[];\r\n    #callback: ((ev: any) => void) | undefined;\r\n    #evName: string | undefined;\r\n    constructor(tag: string) {\r\n        this.#tag = tag;\r\n        this.#classes = [];\r\n        this.#attributes = undefined;\r\n        this.#id = undefined;\r\n        this.#text = undefined;\r\n        this.#children = [];\r\n        this.#rawChildren = [];\r\n        this.#evName = undefined;\r\n        this.#callback = undefined;\r\n    }\r\n\r\n    setId(id: string): ElementBuilder {\r\n        this.#id = id;\r\n        return this;\r\n    }\r\n\r\n    setClasses(...classList: string[]): ElementBuilder {\r\n        this.#classes = classList;\r\n        return this;\r\n    }\r\n\r\n    setAttributes(attributes: ElementBuilderAttribute): ElementBuilder {\r\n        this.#attributes = attributes;\r\n        return this;\r\n    }\r\n\r\n    setTextContent(text: string) {\r\n        this.#text = text;\r\n        return this;\r\n    }\r\n\r\n    setChildren(...elements: Element[]) {\r\n        this.#children = [...elements];\r\n        return this;\r\n    }\r\n\r\n    setRawChildren(...elements: ElementBuilder[]) {\r\n        this.#rawChildren = [...elements];\r\n        return this;\r\n    }\r\n\r\n    onEvent(name: string, callback: (ev: any) => void) {\r\n        this.#evName = name;\r\n        this.#callback = callback;\r\n        return this;\r\n    }\r\n\r\n    build(innerHTML?: string): HTMLElement {\r\n        let element = document.createElement(this.#tag);\r\n        if (is(this.#id)) {\r\n            // @ts-ignore id is checked\r\n            element.id = this.#id;\r\n        }\r\n        if (is(this.#classes)) {\r\n            element.classList.add(...this.#classes);\r\n        }\r\n        if (is(this.#attributes)) {\r\n            // @ts-ignore attributes are checked\r\n            enumerateObject(this.#attributes, (attr: string, value: string) => {\r\n                element.setAttribute(attr, value);\r\n            })\r\n        }\r\n        if (is(innerHTML)) {\r\n            // @ts-ignore innerHTML checked already\r\n            element.innerHTML = innerHTML;\r\n        } else if (is(this.#text)) {\r\n            // @ts-ignore text checked already\r\n            element.textContent = this.#text;\r\n        }\r\n        this.#rawChildren.forEach(raw => { element.appendChild(raw.build()) });\r\n        this.#children.forEach(child => element.appendChild(child));\r\n\r\n        if (are(this.#evName, this.#callback)) {\r\n            // @ts-ignore\r\n            element.addEventListener(this.#evName, (ev) => {\r\n                // @ts-ignore\r\n                this.#callback(ev);\r\n            })\r\n        }\r\n        return element;\r\n    }\r\n}","import { is } from \"../../utils/functions\";\r\nimport { ICuiElementDetector } from \"./interfaces\";\r\n\r\nexport class CuiSimpleDragOverDetector implements ICuiElementDetector {\r\n    #elements: Element[];\r\n    #count: number;\r\n    #threshold: number;\r\n    constructor() {\r\n        this.#elements = [];\r\n        this.#count = 0;\r\n        this.#threshold = 5;\r\n    }\r\n\r\n    setElements(elements: Element[]): void {\r\n        this.#elements = elements;\r\n        this.#count = this.#elements.length;\r\n    }\r\n\r\n    setThreshold(value: number) {\r\n        this.#threshold = value\r\n    }\r\n\r\n    detect(x: Number, y: Number): [number, Element | undefined] {\r\n        if (!is(this.#elements)) {\r\n            return [-1, undefined];\r\n        }\r\n\r\n        let idx: number = -1;\r\n        let found: Element | undefined = undefined;\r\n\r\n        for (let i = 0; i < this.#count; i++) {\r\n            if (this.isInBounds(this.#elements[i], x, y)) {\r\n                if (i === 0) {\r\n                    idx = i;\r\n                    found = this.#elements[i];\r\n                    //break;\r\n                } else if (i < this.#count - 1) {\r\n                    idx = i + 1;\r\n                    found = this.#elements[i + 1];\r\n                    //break;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n\r\n        return [idx, found];\r\n    }\r\n\r\n    private isInBounds(element: Element, x: Number, y: Number): boolean {\r\n        const box = element.getBoundingClientRect();\r\n        return x > box.left - this.#threshold && x < box.left + box.width + this.#threshold &&\r\n            y > box.top - this.#threshold && y < box.top + box.height + this.#threshold;\r\n    }\r\n\r\n}","import { CuiMoveEventListener, ICuiMoveEvent } from \"../../listeners/move\";\r\n\r\nexport class CuiDragHandler {\r\n    #root: Element;\r\n    #moveHandler: CuiMoveEventListener;\r\n    #onDragStart: ((data: ICuiMoveEvent) => boolean) | undefined;\r\n    #onDragOver: ((data: ICuiMoveEvent) => void) | undefined;\r\n    #onDragEnd: ((data: ICuiMoveEvent) => void) | undefined;\r\n    #timeout: number;\r\n    #isTracking: boolean;\r\n    #timeoutId: any;\r\n    constructor(root: HTMLElement) {\r\n        this.#root = root;\r\n        this.#moveHandler = new CuiMoveEventListener();\r\n        this.#timeout = 150;\r\n        this.#isTracking = false;\r\n        this.#timeoutId = undefined;\r\n        this.#moveHandler.setTarget(this.#root);\r\n        this.#moveHandler.preventDefault(false);\r\n        this.#moveHandler.setCallback(this.onMove.bind(this));\r\n\r\n        this.#onDragStart = undefined;\r\n        this.#onDragOver = undefined;\r\n        this.#onDragEnd = undefined;\r\n    }\r\n\r\n    setLongPressTimeout(timeout: number) {\r\n        this.#timeout = timeout;\r\n    }\r\n\r\n    onDragStart(callback: (data: ICuiMoveEvent) => boolean) {\r\n        this.#onDragStart = callback;\r\n    }\r\n\r\n    onDragOver(callback: (data: ICuiMoveEvent) => void) {\r\n        this.#onDragOver = callback;\r\n    }\r\n\r\n    onDragEnd(callback: (data: ICuiMoveEvent) => void) {\r\n        this.#onDragEnd = callback;\r\n    }\r\n\r\n    attach() {\r\n        this.#moveHandler.attach();\r\n    }\r\n\r\n    detach() {\r\n        this.#moveHandler.detach();\r\n    }\r\n\r\n    private onMove(data: ICuiMoveEvent) {\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (this.#isTracking) {\r\n                    return;\r\n                }\r\n\r\n                this.#timeoutId = setTimeout(() => {\r\n                    if (this.#onDragStart && this.#onDragStart(data)) {\r\n                        this.#isTracking = true;\r\n                    }\r\n                }, this.#timeout);\r\n\r\n                break;\r\n            case \"move\":\r\n                this.cancelTimeout();\r\n                if (!this.#isTracking) {\r\n                    return;\r\n                }\r\n                if (this.#onDragOver) {\r\n                    this.#onDragOver(data);\r\n                }\r\n                break;\r\n            case \"up\":\r\n                this.cancelTimeout();\r\n                if (!this.#isTracking) {\r\n                    return;\r\n                }\r\n                if (this.#onDragEnd) {\r\n                    this.#onDragEnd(data);\r\n                }\r\n                this.#isTracking = false;\r\n                break;\r\n        }\r\n    }\r\n\r\n    private cancelTimeout() {\r\n        if (this.#timeoutId) {\r\n            clearTimeout(this.#timeoutId);\r\n            this.#timeoutId = undefined;\r\n        }\r\n    }\r\n}","import { ElementBuilder } from \"../../core/builders/element\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { CuiSimpleDragOverDetector } from \"../../core/handlers/drag/detectors\";\r\nimport { CuiDragHandler } from \"../../core/handlers/drag/drag\";\r\nimport { ICuiElementDetector } from \"../../core/handlers/drag/interfaces\";\r\nimport { CuiSwipeAnimationEngine, PropsTypes } from \"../../core/animation/engine\";\r\nimport { AnimationProperty } from \"../../core/animation/interfaces\";\r\nimport { ICuiMoveEvent } from \"../../core/listeners/move\";\r\nimport { ICuiParsable, ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { getIntOrDefault, replacePrefix, is, are } from \"../../core/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS, CLASSES } from \"../../core/utils/statics\";\r\n\r\nconst SORTABLE_IS_MOVING = \"{prefix}-moving\";\r\nconst DEFAULT_SELECTOR = \" > *\";\r\nconst SORTABLE_PREVIEW_CLS = \"{prefix}-sortable-preview\";\r\n\r\nexport class CuiSortableArgs implements ICuiParsable {\r\n    target: string;\r\n    trigger: string;\r\n    timeout: number;\r\n    threshold: number;\r\n    constructor() {\r\n        this.target = SCOPE_SELECTOR + DEFAULT_SELECTOR;;\r\n        this.trigger = SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.timeout = 150;\r\n        this.threshold = 5;\r\n    }\r\n    parse(val: any): void {\r\n        this.target = val.target ? SCOPE_SELECTOR + \" \" + val.target : SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.trigger = val.trigger ? SCOPE_SELECTOR + \" \" + val.trigger : SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.timeout = getIntOrDefault(val.timeout, 150);\r\n        this.threshold = getIntOrDefault(val.threshold, 5);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CuiSortableComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? \"cui\";\r\n        this.attribute = this.#prefix + \"-sortable\";\r\n    }\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n    get(element: HTMLElement, sutils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiSortableHandler(element, this.attribute, sutils, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiSortableHandler extends CuiHandler<CuiSortableArgs> {\r\n    #dragHandler: CuiDragHandler;\r\n    #triggers: Element[];\r\n    #targets: Element[];\r\n    #currentTarget: HTMLElement | null;\r\n    #currentIdx: number;\r\n    #preview: HTMLElement | null;\r\n    #movingCls: string;\r\n    #detector: ICuiElementDetector;\r\n    #currentBefore: HTMLElement | null;\r\n    #animation: CuiSwipeAnimationEngine;\r\n\r\n    #previewCls: string;\r\n    constructor(element: HTMLElement, attribute: string, utils: CuiUtils, prefix: string) {\r\n        super(\"CuiSortableHandler\", element, attribute, new CuiSortableArgs(), utils);\r\n        this.#targets = [];\r\n        this.#triggers = [];\r\n        this.#currentIdx = -1;\r\n        this.#currentTarget = null;\r\n        this.#currentBefore = null;\r\n        this.#preview = null;\r\n\r\n        this.#dragHandler = new CuiDragHandler(element);\r\n        this.#dragHandler.onDragStart(this.onDragStart.bind(this));\r\n        this.#dragHandler.onDragOver(this.onDragOver.bind(this));\r\n        this.#dragHandler.onDragEnd(this.onDragEnd.bind(this));\r\n        this.#movingCls = replacePrefix(SORTABLE_IS_MOVING, prefix);\r\n        this.#previewCls = replacePrefix(SORTABLE_PREVIEW_CLS, prefix);\r\n        this.#detector = new CuiSimpleDragOverDetector();\r\n        this.#animation = new CuiSwipeAnimationEngine();\r\n        this.#animation.setOnFinish(() => {\r\n            let item = this.#currentTarget;\r\n            let idx = this.#currentIdx;\r\n            this.stopMovementPrep();\r\n\r\n            this.utils.bus.emit(EVENTS.MOVE_LOCK, null, false);\r\n            this.emitEvent(EVENTS.SORTED, {\r\n                item: item,\r\n                index: idx,\r\n                timestamp: new Date()\r\n            })\r\n        })\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#dragHandler.attach();\r\n        this.getTargetsAndTrggers();\r\n        this.#detector.setThreshold(this.args.threshold)\r\n    }\r\n\r\n    onUpdate(): void {\r\n        if (this.prevArgs && (this.args.target !== this.prevArgs.target ||\r\n            this.args.trigger !== this.prevArgs.trigger)) {\r\n            this.getTargetsAndTrggers();\r\n        }\r\n        this.#dragHandler.setLongPressTimeout(this.args.timeout);\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.#dragHandler.detach();\r\n    }\r\n\r\n    /**\r\n     * queries targets and triggers from the element\r\n     * If exception - lists are cleared\r\n     */\r\n    private getTargetsAndTrggers() {\r\n        try {\r\n            this.#targets = [...this.element.querySelectorAll(this.args.target)];\r\n            this.#triggers = [...this.element.querySelectorAll(this.args.trigger)];\r\n            if (this.#triggers.length !== this.#targets.length) {\r\n                throw new Error(`Triggers (count ${this.#triggers.length}) and targets (count ${this.#targets.length}) selector are not correct`)\r\n            }\r\n            this.#detector.setElements(this.#targets);\r\n        } catch (e) {\r\n            this._log.error(\"Incorrect trigger or target selector\")\r\n            this._log.exception(e, \"getTargetsAndTrggers\");\r\n            this.#targets = [];\r\n            this.#triggers = [];\r\n        }\r\n    }\r\n\r\n    private onDragStart(data: ICuiMoveEvent): boolean {\r\n        this.#currentIdx = this.getPressedElementIdx(data.target as Node);\r\n        this.#currentTarget = this.#currentIdx > -1 ? this.#targets[this.#currentIdx] as HTMLElement : null;\r\n        if (!is(this.#currentTarget)) {\r\n            return false;\r\n        }\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, true);\r\n        this.startMovementPrep(data);\r\n        this.emitEvent(EVENTS.SORT_START, {\r\n            item: this.#currentTarget,\r\n            index: this.#currentIdx,\r\n            timestamp: new Date()\r\n        })\r\n        return true;\r\n    }\r\n\r\n    private onDragOver(data: ICuiMoveEvent): void {\r\n        this.move(data);\r\n        data.event.preventDefault();\r\n    }\r\n\r\n    private onDragEnd(data: ICuiMoveEvent): void {\r\n        if (!is(this.#preview)) {\r\n            return;\r\n        }\r\n        //@ts-ignore preview\r\n        this.#animation.setElement(this.#preview);\r\n        this.#animation.setProps(this.getFinishAnimation());\r\n        this.#animation.finish(0, 100, false);\r\n    }\r\n\r\n    private getPressedElementIdx(target: Node) {\r\n        return this.#triggers.findIndex((trigger: Element) => {\r\n            return trigger.contains(target)\r\n        });\r\n    }\r\n\r\n    private startMovementPrep(data: ICuiMoveEvent) {\r\n        this.mutate(() => {\r\n            this.createPreview();\r\n            if (is(this.#currentTarget))\r\n                //@ts-ignore currentTarget\r\n                this.helper.setClass(this.#movingCls, this.#currentTarget);\r\n            this.helper.setClass(\"cui-locked\", this.element);\r\n            this.helper.setClass(CLASSES.swipingOn, document.body);\r\n            this.setPreviewPosition(data);\r\n            this.setCurrentPosition(data);\r\n        })\r\n    }\r\n\r\n    private stopMovementPrep() {\r\n        this.mutate(() => {\r\n            if (is(this.#currentTarget))\r\n                //@ts-ignore currentTarget\r\n                this.helper.removeClass(this.#movingCls, this.#currentTarget);\r\n            this.helper.removeClass(CLASSES.swipingOn, document.body);\r\n            this.helper.removeClass(\"cui-locked\", this.element);\r\n            this.removePreview();\r\n            this.#currentTarget = null;\r\n            this.#currentBefore = null;\r\n            this.getTargetsAndTrggers();\r\n        })\r\n    }\r\n\r\n    private move(data: ICuiMoveEvent) {\r\n        this.mutate(() => {\r\n            this.setPreviewPosition(data);\r\n            this.setCurrentPosition(data);\r\n        })\r\n    }\r\n\r\n    private createPreview() {\r\n        if (!is(this.#currentTarget)) {\r\n            this.logError(\"Cannot create preview - current target does not exist\", \"createPreview\")\r\n            return;\r\n        }\r\n\r\n        this.#preview = new ElementBuilder(\"div\").setClasses(this.#previewCls).build();\r\n        //@ts-ignore currentTarget\r\n        this.#preview.style.width = `${this.#currentTarget.offsetWidth}px`;\r\n        //@ts-ignore currentTarget\r\n        this.#preview.style.height = `${this.#currentTarget.offsetHeight}px`;\r\n        document.body.appendChild(this.#preview);\r\n    }\r\n\r\n    private removePreview() {\r\n        if (is(this.#preview)) {\r\n            //@ts-ignore currentTarget\r\n            this.#preview.remove();\r\n            this.#preview = null;\r\n        }\r\n    }\r\n\r\n    private setPreviewPosition(data: ICuiMoveEvent) {\r\n        if (!is(this.#preview)) {\r\n            return;\r\n        }\r\n        //@ts-ignore preview\r\n        this.#preview.style.top = `${data.y}px`;\r\n        //@ts-ignore preview\r\n        this.#preview.style.left = `${data.x}px`;\r\n    }\r\n\r\n    private setCurrentPosition(data: ICuiMoveEvent) {\r\n        if (!this.#currentTarget) {\r\n            return;\r\n        }\r\n        let [idx, detected] = this.#detector.detect(data.x, data.y);\r\n        if ((idx !== this.#currentIdx) && detected && this.#currentBefore !== detected) {\r\n            let el = detected;\r\n            this.insertElement(this.#currentTarget, el);\r\n            this.#currentBefore = el as HTMLElement;\r\n            this.getTargetsAndTrggers();\r\n            this.#currentIdx = idx;\r\n        }\r\n    }\r\n\r\n    private insertElement(source: Element, destination: Element) {\r\n        if (is(destination)) {\r\n            this.element.insertBefore(source, destination);\r\n        } else {\r\n            this.element.appendChild(source);\r\n        }\r\n    }\r\n\r\n    private getFinishAnimation(): AnimationProperty<PropsTypes> {\r\n        if (!are(this.#currentTarget, this.#preview)) {\r\n            return {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0,\r\n                }\r\n            }\r\n        }\r\n        //@ts-ignore currentTarget\r\n        const box = this.#currentTarget.getBoundingClientRect();\r\n        return {\r\n            opacity: {\r\n                from: 1,\r\n                to: 0,\r\n            },\r\n            top: {\r\n                //@ts-ignore preview\r\n                from: this.#preview.offsetTop,\r\n                //@ts-ignore preview\r\n                to: box.top > 0 ? box.top : this.#preview.offsetTop,\r\n                unit: \"px\"\r\n            },\r\n            left: {\r\n                //@ts-ignore preview\r\n                from: this.#preview.offsetLeft,\r\n                //@ts-ignore preview\r\n                to: box.left > 0 ? box.left : this.#preview.offsetLeft,\r\n                unit: \"px\"\r\n            }\r\n        }\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { EVENTS, ICONS } from \"../../core/utils/statics\";\r\nimport { is, isString, getStringOrDefault, getIntOrDefault, replacePrefix } from \"../../core/utils/functions\";\r\nimport { IconBuilder } from \"../../core/builders/icon\";\r\n\r\nexport class CuiSpinnerArgs implements ICuiParsable {\r\n    spinner: string;\r\n    scale: number;\r\n    constructor() {\r\n        this.spinner = \"circle\";\r\n        this.scale = 1;\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (isString(args)) {\r\n            this.spinner = getStringOrDefault(args, \"circle\");\r\n        } else {\r\n            this.spinner = getStringOrDefault(args.spinner, \"circle\");\r\n            this.scale = getIntOrDefault(args.scale, 1);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport class CuiSpinnerComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-spinner`;\r\n        ICONS['spinner_circle'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z\\\"></path></svg>\";\r\n        ICONS['spinner_circle_double'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z\\\"></path><path d=\\\"M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z\\\"></path></svg>\";\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiSpinnerHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiSpinnerHandler extends CuiHandler<CuiSpinnerArgs> {\r\n    #pauseEventId: string | null;\r\n    #animationPauseClass: string;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiSpinnerHandler\", element, attribute, new CuiSpinnerArgs(), utils);\r\n        this.#pauseEventId = null;\r\n        this.#animationPauseClass = replacePrefix(\"{prefix}-animation-pause\", prefix);\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#pauseEventId = this.onEvent(EVENTS.PAUSE, this.onPause.bind(this));\r\n        this.add()\r\n    }\r\n\r\n    onUpdate(): void {\r\n        if (this.prevArgs && this.args.spinner !== this.prevArgs.spinner) {\r\n            this.add();\r\n        }\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.removeIfAnyExisists();\r\n        this.detachEvent(EVENTS.PAUSE, this.#pauseEventId);\r\n    }\r\n\r\n    private addSpinner(iconElement: Element, name: string) {\r\n        this.element.appendChild(iconElement);\r\n        this.element.classList.add(`animation-spinner-${name}`);\r\n    }\r\n\r\n    private add() {\r\n        const svgIcon = is(this.args.spinner) ? ICONS[`spinner_${this.args.spinner}`] : null;\r\n        if (!is(svgIcon)) {\r\n            this._log.warning(\"Incorrect spinner name: \" + this.args.spinner);\r\n            return;\r\n        }\r\n        this.removeIfAnyExisists();\r\n        const iconElement = new IconBuilder(svgIcon).setScale(this.args.scale).build();\r\n        this.mutate(this.addSpinner, iconElement, this.args.spinner);\r\n    }\r\n\r\n    private removeIfAnyExisists() {\r\n        let existing = this.element.querySelector(\"svg\");\r\n        if (existing) {\r\n            existing.remove();\r\n        }\r\n    }\r\n\r\n\r\n    private onPause(flag: boolean) {\r\n        this.fetch(() => {\r\n            if (flag && !this.helper.hasClass(this.#animationPauseClass, this.element)) {\r\n                this.helper.setClassesAs(this.element, this.#animationPauseClass);\r\n            } else {\r\n                this.helper.removeClassesAs(this.element, this.#animationPauseClass);\r\n            }\r\n        })\r\n        this.emitEvent(EVENTS.PAUSED, flag);\r\n    }\r\n\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable, ICuiSwitchable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiChildMutation, CuiMutableHandler } from \"../../core/handlers/base\";\r\nimport { ICuiTask, CuiTaskRunner } from \"../../core/utils/task\";\r\nimport { ICuiMoveEvent } from \"../../core/listeners/move\";\r\nimport { CuiSwipeAnimationEngine } from \"../../core/animation/engine\";\r\nimport { AnimationDefinition, SWIPE_ANIMATIONS_DEFINITIONS } from \"../../core/animation/definitions\";\r\nimport { getStringOrDefault, getIntOrDefault, boolStringOrDefault, calculateNextIndex, is, getChildrenHeight, isInRange } from \"../../core/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS, CLASSES } from \"../../core/utils/statics\";\r\n\r\n/**\r\n * \r\n *   targets: string - slider elements\r\n *   timeout: number - animation timeout\r\n *   links: string; - link to switcher (indicator, tab, etc)\r\n *   autoTimeout: number - if defined, slider will switch item automatically\r\n *   height: 'auto' | string - element height\r\n *   animation: string - animation name\r\n *   loop: boolean - allows to slide elements in loop\r\n */\r\nconst SWITCH_DEFAULT_TARGETS = \"> li\";\r\n\r\nexport class CuiSliderArgs implements ICuiParsable {\r\n    targets: string;\r\n    timeout: number;\r\n    links: string;\r\n    autoTimeout: number;\r\n    height: 'auto' | string;\r\n    animation: string;\r\n    loop: boolean;\r\n\r\n    #prefix: string;\r\n    #defTimeout: number;\r\n    constructor(prefix: string, timeout?: number) {\r\n        this.#prefix = prefix;\r\n        this.#defTimeout = timeout ?? 300;\r\n\r\n        this.targets = SWITCH_DEFAULT_TARGETS;\r\n        this.timeout = this.#defTimeout;\r\n        this.links = \"\";\r\n        this.autoTimeout = -1;\r\n        this.height = \"\";\r\n        this.animation = \"\";\r\n        this.loop = false;\r\n    }\r\n\r\n    parse(args: any): void {\r\n        this.targets = SCOPE_SELECTOR + getStringOrDefault(args.targets, SWITCH_DEFAULT_TARGETS)\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.links = args.links;\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, -1);\r\n        this.height = getStringOrDefault(args.height, 'auto')\r\n        this.animation = getStringOrDefault(args.animation, 'slide');\r\n        this.loop = boolStringOrDefault(args.loop, false);\r\n    }\r\n\r\n}\r\n\r\nexport class CuiSliderComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-slider`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiSliderHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiSliderHandler extends CuiMutableHandler<CuiSliderArgs> implements ICuiSwitchable {\r\n    #targets: Element[];\r\n    #currentIdx: number;\r\n    #links: Element[];\r\n    #task: ICuiTask;\r\n    #switchEventId: string | null;\r\n    //  #moveListener: CuiMoveEventListener;\r\n    #isTracking: boolean;\r\n    #startX: number;\r\n    #swipeRatio: number;\r\n    #nextIdx: number;\r\n    #nextElement: HTMLElement | null;\r\n    #ratioThreshold: number;\r\n    #currSlider: CuiSwipeAnimationEngine;\r\n    #nextSlider: CuiSwipeAnimationEngine;\r\n    #animationDef: AnimationDefinition;\r\n    #targetsCount: number;\r\n    #moveEventId: string | null;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiSliderHandler\", element, attribute, new CuiSliderArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        this.#targets = [];\r\n        this.#currentIdx = -1;\r\n        this.#nextIdx = -1;\r\n        this.#links = [];\r\n        this.#switchEventId = null;\r\n        this.#moveEventId = null;\r\n        this.#isTracking = false;\r\n        this.#startX = -1;\r\n        this.#swipeRatio = 0;\r\n        this.#nextElement = null;\r\n        this.#ratioThreshold = 0.4;\r\n        this.#currSlider = new CuiSwipeAnimationEngine();\r\n        this.#nextSlider = new CuiSwipeAnimationEngine();\r\n        this.#currSlider.setOnFinish(this.onAnimationFinish.bind(this));\r\n        this.#targetsCount = 0;\r\n        this.#task = new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next'));\r\n        this.#animationDef = SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation];\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#switchEventId = this.onEvent(EVENTS.SWITCH, this.onPushSwitch.bind(this))\r\n        this.#moveEventId = this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this))\r\n        this.getTargets();\r\n        this.getLinks();\r\n        this.getActiveIndex();\r\n        this.setLinkActive(-1, this.#currentIdx);\r\n\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(this.#targets[this.#currentIdx]))\r\n        })\r\n        this.#task = new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next'));\r\n        this.#animationDef = SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation];\r\n        this.startTask();\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(this.#targets[this.#currentIdx]))\r\n        })\r\n        this.#animationDef = SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation];\r\n\r\n        this.startTask();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.#task.stop();\r\n        this.detachEvent(EVENTS.SWITCH, this.#switchEventId)\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, this.#moveEventId)\r\n    }\r\n\r\n    onMutation(record: CuiChildMutation): void {\r\n\r\n    }\r\n    /**\r\n     * Move listener callback\r\n     * @param data move listener data\r\n     */\r\n    onMove(data: ICuiMoveEvent) {\r\n        if (this.isLocked || !this.#animationDef) {\r\n            return;\r\n        }\r\n        let current = this.#targets[this.#currentIdx] as HTMLElement;\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (this.#isTracking || !current.contains((data.target as Node))) {\r\n                    return;\r\n                }\r\n                this.#isTracking = true;\r\n                this.#startX = data.x;\r\n                this.#currSlider.setElement(current);\r\n                this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n                if (data.event.cancelable)\r\n                    data.event.preventDefault();\r\n                break;\r\n            case \"up\":\r\n                if (!this.#isTracking) {\r\n                    break;\r\n                }\r\n                // Lock component until animation is finished\r\n                this.isLocked = true;\r\n                let absRatio = Math.abs(this.#swipeRatio);\r\n                let timeout = absRatio * this.args.timeout;\r\n                let back = absRatio <= this.#ratioThreshold;\r\n                this.#currSlider.finish(absRatio, timeout, back);\r\n                this.#nextSlider.finish(absRatio, timeout, back);\r\n                this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n                this.#isTracking = false;\r\n                break;\r\n            case \"move\":\r\n                if (!this.#isTracking) {\r\n                    break;\r\n                }\r\n                let newRatio = (data.x - this.#startX) / current.offsetWidth;\r\n                if (Math.abs(newRatio - this.#swipeRatio) < 0.02) {\r\n                    break;\r\n                }\r\n                let nextIdx = calculateNextIndex(this.#swipeRatio > 0 ? \"next\" : \"prev\", this.#currentIdx, this.#targetsCount);\r\n                this.#swipeRatio = this.adjustMoveRatio(newRatio);\r\n\r\n                if (nextIdx !== this.#nextIdx) {\r\n                    this.#nextElement && this.helper.removeClass(CLASSES.animProgress, this.#nextElement);\r\n                    this.#nextElement = this.#targets[nextIdx] as HTMLElement;\r\n                    this.#nextIdx = nextIdx;\r\n\r\n                    this.#nextSlider.setElement(this.#nextElement)\r\n                    this.#nextSlider.setProps(this.#swipeRatio > 0 ? this.#animationDef.previous.right : this.#animationDef.previous.left);\r\n                    this.#currSlider.setProps(this.#swipeRatio > 0 ? this.#animationDef.current.right : this.#animationDef.current.left);\r\n                    this.mutate(() => {\r\n                        this.#nextElement && this.helper.setClass(CLASSES.animProgress, this.#nextElement);\r\n                    })\r\n                }\r\n                this.mutate(() => {\r\n                    this.#currSlider.update(Math.abs(this.#swipeRatio));\r\n                    this.#nextSlider.update(Math.abs(this.#swipeRatio));\r\n                })\r\n                if (data.event.cancelable)\r\n                    data.event.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    adjustMoveRatio(ratio: number): number {\r\n        if (this.args.loop) {\r\n            return ratio;\r\n        }\r\n        if (this.#currentIdx === this.#targetsCount - 1 && ratio > 0) {\r\n            return 0;\r\n        }\r\n        if (this.#currentIdx === 0 && ratio < 0) {\r\n            return 0;\r\n        }\r\n        return ratio;\r\n    }\r\n\r\n    /**\r\n     * Api method to switch childrens\r\n     * @param index - index to switch to\r\n     */\r\n    async switch(index: any): Promise<boolean> {\r\n        if (this.isLocked) {\r\n            return false;\r\n        }\r\n        this.onPushSwitch(index);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param element element this animation was perfromed on\r\n     * @param reverted - flag inidicating whether animation was performed to the end or reverted back to start\r\n     * @param errorOccured - tells whether animation was finished with error\r\n     */\r\n    onAnimationFinish(element: Element | undefined, reverted: boolean, errorOccured: boolean) {\r\n        this.isLocked = false;\r\n        // If not go back or from push then switch, else was go back\r\n        let next = this.#targets[this.#nextIdx];\r\n        let current = this.#targets[this.#currentIdx];\r\n        if (!reverted) {\r\n            if (this.#nextIdx > -1) {\r\n                this.mutate(() => {\r\n                    this.helper.removeClass(CLASSES.animProgress, next);\r\n                    this.helper.setClass(this.activeClassName, next);\r\n                    this.helper.removeClass(this.activeClassName, current);\r\n                    this.helper.removeAttribute(\"style\", current);\r\n                    this.helper.removeAttribute(\"style\", next);\r\n                    this.setLinkActive(this.#currentIdx, this.#nextIdx);\r\n                    this.emitEvent(EVENTS.SWITCHED, {\r\n                        timestamp: Date.now(),\r\n                        index: this.#nextIdx\r\n                    })\r\n                    this.#currentIdx = this.#nextIdx;\r\n                    this.#nextIdx = -1;\r\n                    this.#nextElement = null;\r\n                    this.#startX = -1;\r\n                    this.#swipeRatio = 0;\r\n                })\r\n            }\r\n        } else {\r\n            if (is(this.#nextElement)) {\r\n                //@ts-ignore\r\n                this.helper.removeClass(CLASSES.animProgress, this.#nextElement);\r\n                //@ts-ignore\r\n                this.helper.removeAttribute(\"style\", this.#nextElement);\r\n            }\r\n\r\n            this.helper.removeAttribute(\"style\", current);\r\n            this.#nextIdx = -1;\r\n            this.#nextElement = null;\r\n            this.#startX = -1;\r\n            this.#swipeRatio = 0;\r\n        }\r\n        this.startTask();\r\n    }\r\n\r\n    onPushSwitch(index: string) {\r\n        if (!is(index) ||\r\n            this.isLocked ||\r\n            !this.#animationDef ||\r\n            (!this.args.loop && this.#currentIdx === 0 && index === 'prev') ||\r\n            (!this.args.loop && this.#currentIdx === this.#targetsCount - 1 && index === 'next')) {\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        let nextIdx = calculateNextIndex(index, this.#currentIdx, this.#targetsCount);\r\n        if (nextIdx == this.#currentIdx || nextIdx < 0 || nextIdx >= this.#targets.length) {\r\n            this._log.warning(`Index ${index} is not within the suitable range`);\r\n            return false;\r\n        }\r\n        this.#nextIdx = nextIdx;\r\n        let current = this.#targets[this.#currentIdx];\r\n        let next = this.#targets[this.#nextIdx];\r\n        this.#currSlider.setElement(current);\r\n        this.#nextSlider.setElement(next);\r\n        this.#currSlider.setProps(index === 'prev' ? this.#animationDef.current.left : this.#animationDef.current.right);\r\n        this.#nextSlider.setProps(index === 'prev' ? this.#animationDef.previous.left : this.#animationDef.previous.right);\r\n        this.mutate(() => {\r\n            this.#currSlider.finish(0, this.args.timeout, false);\r\n            this.#nextSlider.finish(0, this.args.timeout, false);\r\n            this.helper.setClass(CLASSES.animProgress, next);\r\n        })\r\n\r\n    }\r\n\r\n    getActiveIndex(): void {\r\n        this.#currentIdx = is(this.#targets) ? this.#targets.findIndex(target => this.helper.hasClass(this.activeClassName, target)) : -1;\r\n    }\r\n\r\n    getElementHeight(current: Element): string {\r\n        if (!is(this.args.height) || this.args.height === 'auto') {\r\n            return getChildrenHeight(current) + \"px\";\r\n        } else {\r\n            return this.args.height;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Queries targets\r\n     */\r\n    getTargets() {\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        this.#targets = t.length > 0 ? [...t] : [];\r\n        this.#targetsCount = this.#targets.length;\r\n    }\r\n\r\n    /**\r\n     * Get linked switcher elements\r\n     */\r\n    getLinks() {\r\n        this.#links = is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []\r\n    }\r\n\r\n    /**\r\n     * Set active class on linked switcher if set\r\n     * @param current - current index (to remove active from)\r\n     * @param next - next index (to set action on)\r\n     */\r\n    setLinkActive(current: number, next: number) {\r\n        if (!is(this.#links)) {\r\n            return\r\n        }\r\n        this.mutate(() => {\r\n            if (isInRange(current, 0, this.#links.length - 1)) {\r\n                this.helper.removeClass(this.activeClassName, this.#links[current])\r\n            }\r\n            if (isInRange(next, 0, this.#links.length - 1)) {\r\n                this.helper.setClass(this.activeClassName, this.#links[next])\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true \r\n     */\r\n    startTask() {\r\n        this.#task.stop();\r\n        if (this.args.autoTimeout) {\r\n            this.#task.start();\r\n        }\r\n    }\r\n}\r\n","import { ICuiComponent, ICuiComponentHandler, ICuiParsable, ICuiSwitchable, CuiElement } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiChildMutation, CuiMutableHandler } from \"../../core/handlers/base\";\r\nimport { ICuiTask, CuiTaskRunner } from \"../../core/utils/task\";\r\nimport { ICuiComponentAction, CuiActionsListFactory } from \"../../core/utils/actions\";\r\nimport { is, getStringOrDefault, replacePrefix, getIntOrDefault, isStringTrue, calculateNextIndex, getChildrenHeight, isInRange } from \"../../core/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS } from \"../../core/utils/statics\";\r\n\r\nconst SWITCH_DEFAULT_ACTION_IN = \".{prefix}-switch-animation-default-in\";\r\nconst SWITCH_DEFAULT_ACTION_OUT = \".{prefix}-switch-animation-default-out\";\r\nconst SWITCH_DEFAULT_TARGETS = \" > *\";\r\n\r\nexport class CuiSwitchArgs implements ICuiParsable {\r\n    targets: string;\r\n    in: string;\r\n    out: string;\r\n    timeout: number;\r\n    links: string;\r\n    switch: string;\r\n    autoTimeout: number;\r\n    height: 'auto' | string;\r\n    loop: boolean;\r\n\r\n    #prefix: string;\r\n    #defTimeout: number;\r\n    constructor(prefix: string, timeout?: number) {\r\n        this.#prefix = prefix;\r\n        this.#defTimeout = timeout ?? 300;\r\n\r\n        this.targets = \"\";\r\n        this.in = \"\";\r\n        this.out = \"\";\r\n        this.timeout = this.#defTimeout;\r\n        this.links = \"\";\r\n        this.switch = \"\";\r\n        this.autoTimeout = -1;\r\n        this.height = \"\";\r\n        this.loop = false;\r\n    }\r\n\r\n    parse(args: any): void {\r\n        this.targets = is(args.targets) ? SCOPE_SELECTOR + args.targets : SCOPE_SELECTOR + SWITCH_DEFAULT_TARGETS\r\n        this.in = getStringOrDefault(args.in, replacePrefix(SWITCH_DEFAULT_ACTION_IN, this.#prefix));\r\n        this.out = getStringOrDefault(args.out, replacePrefix(SWITCH_DEFAULT_ACTION_OUT, this.#prefix));\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.links = getStringOrDefault(args.links, \"\");\r\n        this.switch = getStringOrDefault(args.switch, \"\");\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, -1);\r\n        this.height = getStringOrDefault(args.height, 'auto');\r\n        this.loop = isStringTrue(args.loop);\r\n    }\r\n\r\n}\r\n\r\nexport class CuiSwitchComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-switch`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiSwitchHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiSwitchHandler extends CuiMutableHandler<CuiSwitchArgs> implements ICuiSwitchable {\r\n    #targets: Element[];\r\n    #currentIdx: number;\r\n    #links: Element[];\r\n    #switches: CuiElement[];\r\n    #task: ICuiTask;\r\n    #switchEventId: string | null;\r\n    #actionsIn: ICuiComponentAction[];\r\n    #actionsOut: ICuiComponentAction[];\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiSwitchHandler\", element, attribute, new CuiSwitchArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        this.#targets = [];\r\n        this.#currentIdx = -1;\r\n        this.#links = [];\r\n        this.#switches = [];\r\n        this.#switchEventId = null;\r\n        this.#actionsIn = this.#actionsOut = [];\r\n        this.#task = new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next'));\r\n\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#switchEventId = this.onEvent(EVENTS.SWITCH, this.onPushSwitch.bind(this))\r\n        this.parseArguments();\r\n        this.getTargets();\r\n        this.getActiveIndex();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(this.#currentIdx);\r\n        this.setLinkActive(-1, this.#currentIdx);\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(this.#targets[this.#currentIdx]))\r\n        })\r\n        this.#task = new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next'));\r\n        this.startTask();\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.parseArguments();\r\n        this.getTargets();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(this.#currentIdx);\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(this.#targets[this.#currentIdx]))\r\n        })\r\n        this.startTask();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.#task.stop();\r\n        this.detachEvent(EVENTS.SWITCH, this.#switchEventId)\r\n    }\r\n\r\n    onMutation(record: CuiChildMutation): void {\r\n        this.getTargets();\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(this.#targets[this.#currentIdx]))\r\n        })\r\n\r\n    }\r\n\r\n    async switch(index: any): Promise<boolean> {\r\n        if (this.isLocked) {\r\n            return false;\r\n        }\r\n        this.getSwitches();\r\n        this.getActiveIndex();\r\n        let nextIdx = calculateNextIndex(index, this.#currentIdx, this.#targets.length);\r\n        if (!this.args.loop && ((index === \"next\" && nextIdx === 0) || (index === 'prev' && this.#currentIdx === 0))) {\r\n            this.logInfo(\"Switch blocked by loop settings\", \"switch\");\r\n            return false;\r\n        }\r\n        if (nextIdx == this.#currentIdx || nextIdx < 0 || nextIdx >= this.#targets.length) {\r\n            this.logWarning(`Index ${index} is not within the suitable range`, \"switch\");\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        this.setSwitchesActive(nextIdx);\r\n        let nextItem = this.#targets[nextIdx];\r\n        await this.actionsHelper.performSwitchAction(nextItem,\r\n            this.#currentIdx > -1 ? this.#targets[this.#currentIdx] : null,\r\n            this.#actionsIn,\r\n            this.#actionsOut,\r\n            () => {\r\n                // Set next element active\r\n                nextItem.classList.add(this.activeClassName);\r\n                // Remove active from current element (if current exists)\r\n                if (this.#currentIdx > -1)\r\n                    this.#targets[this.#currentIdx].classList.remove(this.activeClassName);\r\n                // Update linked items\r\n                this.setLinkActive(this.#currentIdx, nextIdx);\r\n                // Update element height - it must be done a parent get height based on current child\r\n                this.helper.setStyle(this.element, 'height', this.getElementHeight(nextItem))\r\n                this.startTask();\r\n                this.isLocked = false;\r\n            },\r\n            this.args.timeout,\r\n        )\r\n        this.emitEvent(EVENTS.SWITCHED, {\r\n            timestamp: Date.now(),\r\n            index: nextIdx\r\n        })\r\n        return true;\r\n    }\r\n\r\n\r\n    private onPushSwitch(index: string) {\r\n        this.switch(index);\r\n    }\r\n\r\n    private getActiveIndex(): void {\r\n        this.#currentIdx = is(this.#targets) ? this.#targets.findIndex(target => this.helper.hasClass(this.activeClassName, target)) : -1;\r\n    }\r\n\r\n    private getElementHeight(current: Element): string {\r\n        if (!is(this.args.height) || this.args.height === 'auto') {\r\n            return getChildrenHeight(current) + \"px\";\r\n        } else {\r\n            return this.args.height;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets attributes value and prepares properties\r\n     */\r\n    private parseArguments() {\r\n        this.#actionsIn = CuiActionsListFactory.get(this.args.in);\r\n        this.#actionsOut = CuiActionsListFactory.get(this.args.out);\r\n        this.#links = is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []\r\n    }\r\n\r\n    /**\r\n     * Query target elements\r\n     */\r\n    private getTargets() {\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        this.#targets = t.length > 0 ? [...t] : [];\r\n    }\r\n\r\n    private getSwitches() {\r\n        let switches = is(this.args.switch) ? document.querySelectorAll(this.args.switch) : null;\r\n        this.#switches = [];\r\n        if (switches) {\r\n            switches.forEach(sw => {\r\n                this.#switches.push(<CuiElement>(sw as any))\r\n            })\r\n        }\r\n    }\r\n\r\n    private setLinkActive(current: number, next: number) {\r\n        if (!is(this.#links)) {\r\n            return\r\n        }\r\n        if (isInRange(current, 0, this.#links.length - 1)) {\r\n            this.helper.removeClass(this.activeClassName, this.#links[current])\r\n        }\r\n        if (isInRange(next, 0, this.#links.length - 1)) {\r\n            this.helper.setClass(this.activeClassName, this.#links[next])\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets propers active state on attached switches\r\n     * @param index \r\n     */\r\n\r\n    private setSwitchesActive(index: number) {\r\n        this.#switches.forEach(sw => {\r\n            this.emitLinkSwitch(sw.$cuid, index)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Emits push event to attached switch to set proper index\r\n     * @param id - cuid of element\r\n     * @param index - index to be set on element\r\n     */\r\n    private emitLinkSwitch(id: string | null, index: number) {\r\n        if (is(id))\r\n            this.utils.bus.emit(EVENTS.SWITCH, id, index);\r\n    }\r\n\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true \r\n     */\r\n    private startTask() {\r\n        this.#task.stop();\r\n        if (this.args.autoTimeout) {\r\n            this.#task.start();\r\n        }\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable, CuiElement } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { is } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nconst SWITCHER_LIST_ITEM_SELECTOR = \"li > a\";\r\n\r\nexport class CuiSwitcherArgs implements ICuiParsable {\r\n\r\n    target: string;\r\n    index: string;\r\n\r\n    constructor() {\r\n        this.index = \"\";\r\n        this.target = \"\"\r\n    }\r\n\r\n    parse(args: any): void {\r\n        if (!is(args)) {\r\n            return;\r\n        }\r\n        this.target = args.target;\r\n        this.index = args.index;\r\n    }\r\n\r\n}\r\n\r\nexport class CuiSwitcherComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-switcher`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiSwitcherHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiSwitcherHandler extends CuiHandler<CuiSwitcherArgs>  {\r\n    #targetId: string | null;\r\n    #isList: boolean;\r\n    #listeners: ((ev: MouseEvent) => void)[];\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiSwitcherHandler\", element, attribute, new CuiSwitcherArgs(), utils);\r\n        this.#targetId = null;\r\n        this.#isList = element.tagName === 'UL';\r\n        this.onClickEvent = this.onClickEvent.bind(this);\r\n        this.#listeners = [];\r\n    }\r\n\r\n    onInit(): void {\r\n        this.setEvents();\r\n        this.getTarget();\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.getTarget();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.removeEvents();\r\n    }\r\n\r\n    getTarget() {\r\n        if (!is(this.args.target)) {\r\n            this.#targetId = null;\r\n        }\r\n\r\n        let target = <CuiElement>(document.querySelector(this.args.target) as any);\r\n        if (is(target)) {\r\n            this.#targetId = target.$cuid;\r\n        }\r\n    }\r\n\r\n    setEvents() {\r\n        if (this.#isList) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el: Element, index: number) => {\r\n                let list = this.onListItemClick.bind(this, index)\r\n                this.#listeners.push(list)\r\n                //@ts-ignore\r\n                el.addEventListener('click', list)\r\n            })\r\n        } else {\r\n            this.element.addEventListener('click', this.onClickEvent)\r\n        }\r\n    }\r\n\r\n    removeEvents() {\r\n        if (this.#isList) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el: Element, index: number) => {\r\n                if (this.#listeners.length > index)\r\n                    //@ts-ignore\r\n                    el.removeEventListener('click', this.#listeners[index])\r\n            })\r\n            this.#listeners = [];\r\n        } else {\r\n            this.element.removeEventListener('click', this.onClickEvent);\r\n        }\r\n    }\r\n\r\n    onClickEvent(ev: MouseEvent) {\r\n        this.getTarget();\r\n        if (!is(this.args.index)) {\r\n            return;\r\n        }\r\n        this.onClick(this.args.index.trim());\r\n    }\r\n\r\n    onListItemClick(index: number, ev: MouseEvent) {\r\n        this.getTarget();\r\n        this.onClick(index);\r\n    }\r\n\r\n    onClick(index: any) {\r\n        if (!is(this.#targetId)) {\r\n            return;\r\n        }\r\n        //@ts-ignore  targetId checked already\r\n        this.utils.bus.emit(EVENTS.SWITCH, this.#targetId, index);\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { ICuiComponentAction, CuiActionsListFactory } from \"../../core/utils/actions\";\r\nimport { is, isString, getStringOrDefault } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiToggleArgs {\r\n    target: string;\r\n    action: string;\r\n    constructor() {\r\n        this.action = \"\";\r\n        this.target = \"\";\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args) && isString(args)) {\r\n            this.action = args;\r\n        } else {\r\n            this.target = getStringOrDefault(args.target, \"\");\r\n            this.action = args.action;\r\n        }\r\n    }\r\n}\r\nexport class CuiToggleComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? \"cui\"}-toggle`;\r\n    }\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiToggleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiToggleHandler extends CuiHandler<CuiToggleArgs> {\r\n    #target: Element;\r\n    #utils: CuiUtils;\r\n    #toggleEventId: string | null;\r\n    #actions: ICuiComponentAction[];\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiToggleHandler\", element, attribute, new CuiToggleArgs(), utils);\r\n        this.#target = this.element;\r\n        this.#utils = utils;\r\n        this.#toggleEventId = null;\r\n        this.#actions = [];\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#target = this.getTarget();\r\n        this.#actions = CuiActionsListFactory.get(this.args.action);\r\n        this.element.addEventListener('click', this.onClick);\r\n        this.#toggleEventId = this.onEvent(EVENTS.TOGGLE, this.toggle.bind(this));\r\n\r\n    }\r\n    onUpdate(): void {\r\n        this.#target = this.getTarget();\r\n        this.#actions = CuiActionsListFactory.get(this.args.action);\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.TOGGLE, this.#toggleEventId);\r\n    }\r\n\r\n    toggle() {\r\n        if (!this.#target) {\r\n            this.logError(\"Target in not provided\", \"toggle\");\r\n            return;\r\n        }\r\n        this.#actions.forEach(action => action.toggle(this.#target, this.#utils));\r\n        this.emitEvent(EVENTS.TOGGLED, {\r\n            action: this.args.action,\r\n            target: this.#target,\r\n            timestamp: Date.now()\r\n        })\r\n    }\r\n\r\n    onClick(ev: MouseEvent) {\r\n        this.toggle();\r\n        ev.preventDefault();\r\n    }\r\n\r\n    getTarget(): Element {\r\n        if (!this.args.target) {\r\n            return this.element;\r\n        }\r\n        return document.querySelector(this.args.target) ?? this.element;\r\n    }\r\n}","import { ElementBuilder } from \"../../core/builders/element\";\r\nimport { CuiHandler } from \"../../core/handlers/base\";\r\nimport { CuiHoverEvent, CuiHoverListener } from \"../../core/listeners/hover\";\r\nimport { CuiBasePositionCalculator } from \"../../core/position/calculator\";\r\nimport { ICuiPositionCalculator } from \"../../core/position/interfaces\";\r\nimport { CuiTaskRunner, ICuiTask } from \"../../core/utils/task\";\r\nimport { ICuiParsable, ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { ICuiComponentAction, CuiActionsListFactory } from \"../../core/utils/actions\";\r\nimport { replacePrefix, isString, getStringOrDefault, getIntOrDefault, is } from \"../../core/utils/functions\";\r\n\r\nconst TOOLTIP_ACTION = \".{prefix}-animation-tooltip-in\";\r\nconst TOOLTIP_DATA = \"{prefix}-tooltip-data\";\r\n\r\nexport class CuiTooltipArgs implements ICuiParsable {\r\n    content: string;\r\n    width: number;\r\n    pos: string;\r\n    margin: number;\r\n    action: string;\r\n    timeout: number;\r\n    #defAct: string;\r\n    constructor(prefix: string) {\r\n        this.#defAct = replacePrefix(TOOLTIP_ACTION, prefix)\r\n        this.content = \"\";\r\n        this.width = 150;\r\n        this.margin = 8;\r\n        this.timeout = 2000;\r\n        this.pos = \"\";\r\n        this.action = this.#defAct;\r\n    }\r\n\r\n    parse(val: any): void {\r\n        if (isString(val)) {\r\n            this.content = getStringOrDefault(val, \"\");\r\n            return;\r\n        }\r\n        this.content = getStringOrDefault(val.content, \"\");\r\n        this.width = getIntOrDefault(val.width, 150);\r\n        this.margin = getIntOrDefault(val.margin, 8);\r\n        this.pos = getStringOrDefault(val.pos, \"\");\r\n        this.action = getStringOrDefault(val.action, this.#defAct);\r\n        this.timeout = getIntOrDefault(val.timeout, 2000);\r\n    }\r\n}\r\n\r\nexport class CuiTooltipComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-tooltip`;\r\n    }\r\n\r\n\r\n    getStyle(): string | null {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, sutils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiTooltipHandler(element, this.attribute, sutils, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiTooltipHandler extends CuiHandler<CuiTooltipArgs> {\r\n    #hoverListener: CuiHoverListener;\r\n    #tooltip: HTMLElement | undefined;\r\n    #margin: number;\r\n    #positionCalculator: ICuiPositionCalculator;\r\n    #tooltipDataCls: string;\r\n    #actions: ICuiComponentAction[];\r\n    #task: ICuiTask | undefined;\r\n    constructor(element: HTMLElement, attribute: string, utils: CuiUtils, prefix: string) {\r\n        super(\"CuiTooltipHandler\", element, attribute, new CuiTooltipArgs(prefix), utils);\r\n        this.#tooltip = undefined;\r\n        this.#actions = [];\r\n        this.#task = undefined;\r\n        this.#tooltipDataCls = replacePrefix(TOOLTIP_DATA, prefix);\r\n        this.#hoverListener = new CuiHoverListener(element);\r\n        this.#hoverListener.setCallback(this.onHover.bind(this));\r\n        this.#margin = 8;\r\n        this.#positionCalculator = new CuiBasePositionCalculator();\r\n        this.#positionCalculator.setPreferred(\"top-center\");\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#hoverListener.attach();\r\n        this.getDataFromArgs();\r\n        this.#task = new CuiTaskRunner(this.args.timeout, false, this.removeTooltip.bind(this));\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.getDataFromArgs();\r\n        if (this.#task)\r\n            this.#task.setTimeout(this.args.timeout);\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.removeTooltip();\r\n        this.#hoverListener.detach();\r\n    }\r\n\r\n    onHover(ev: CuiHoverEvent) {\r\n        if (ev.isHovering) {\r\n            this.createTooltip();\r\n        } else {\r\n            this.removeTooltip();\r\n        }\r\n    }\r\n\r\n    private createTooltip() {\r\n        if (is(this.#tooltip) || !is(this.args.content)) {\r\n            return;\r\n        }\r\n        const box = this.element.getBoundingClientRect();\r\n        this.#tooltip = new ElementBuilder(\"div\").setClasses(this.#tooltipDataCls).build();\r\n        this.#tooltip.textContent = this.args.content;\r\n        this.#tooltip.style.maxWidth = `${this.args.width}px`;\r\n        document.body.appendChild(this.#tooltip);\r\n        this.mutate(() => {\r\n            if (!this.#tooltip) {\r\n                return;\r\n            }\r\n            const toolbox = this.#tooltip.getBoundingClientRect();\r\n            this.#positionCalculator.setMargin(this.#margin);\r\n            try {\r\n                let [x, y] = this.#positionCalculator.calculate(box, toolbox);\r\n                this.#tooltip.style.top = `${y}px`;\r\n                this.#tooltip.style.left = `${x}px`;\r\n                this.toggleActions();\r\n                if (this.#task)\r\n                    this.#task.start();\r\n            } catch (e) {\r\n                this.logError(e.message, \"createTooltip\", e);\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    private removeTooltip() {\r\n        if (this.#task)\r\n            this.#task.stop();\r\n        this.mutate(() => {\r\n            if (is(this.#tooltip)) {\r\n                //@ts-ignore already checked\r\n                this.#tooltip.remove();\r\n                this.#tooltip = undefined;\r\n            }\r\n        })\r\n    }\r\n\r\n    private getDataFromArgs() {\r\n        this.#positionCalculator.setMargin(this.args.margin);\r\n        this.#positionCalculator.setStatic(this.args.pos);\r\n        this.#actions = CuiActionsListFactory.get(this.args.action);\r\n    }\r\n\r\n    private toggleActions() {\r\n        if (!this.#tooltip) {\r\n            return;\r\n        }\r\n        this.#actions.forEach(action => {\r\n            // @ts-ignore\r\n            action.toggle(this.#tooltip);\r\n        })\r\n    }\r\n}","import { ICuiComponent } from \"../core/models/interfaces\";\r\nimport { CuiAccordionComponent } from \"./accordion/accordion\";\r\nimport { CuiBanerComponent } from \"./banner/banner\";\r\nimport { CuiCircleComponent } from \"./circle/circle\";\r\nimport { CuiCloseComponent } from \"./close/close\";\r\nimport { CuiCoverComponent } from \"./cover/cover\";\r\nimport { CuiDialogComponent } from \"./dialog/dialog\";\r\nimport { CuiDropComponenet } from \"./drop/drop\";\r\nimport { CuiFloatComponent } from \"./float/float\";\r\nimport { CuiIconComponent } from \"./icon/icon\";\r\nimport { CuiIntersectionComponent } from \"./intersection/intersection\";\r\nimport { CuiOffCanvasComponent } from \"./offcanvas/offcanvas\";\r\nimport { CuiOffsetComponent } from \"./offset/offset\";\r\nimport { CuiOpenComponent } from \"./open/open\";\r\nimport { CuiResizeComponent } from \"./resize/resize\";\r\nimport { CuiScrollComponent } from \"./scroll/scroll\";\r\nimport { CuiScrollspyComponent } from \"./scrollspy/scrollspy\";\r\nimport { CuiSortableComponent } from \"./sortable/sortable\";\r\nimport { CuiSpinnerComponent } from \"./spinner/spinner\";\r\nimport { CuiSliderComponent } from \"./switch/slider\";\r\nimport { CuiSwitchComponent } from \"./switch/switch\";\r\nimport { CuiSwitcherComponent } from \"./switch/switcher\";\r\nimport { CuiToggleComponent } from \"./toggle/toggle\";\r\nimport { CuiTooltipComponent } from \"./tooltip/tooltip\";\r\n\r\nexport interface ComponentsModuleAttributes {\r\n    prefix?: string;\r\n}\r\n\r\n\r\n/**\r\n * Function that initializes and returns all components available in package\r\n * @param attributes - object holding data needed for components initialization\r\n */\r\nexport function GetComponents(attributes: ComponentsModuleAttributes): ICuiComponent[] {\r\n    let prefix = attributes?.prefix;\r\n    return [\r\n        new CuiIconComponent(prefix),\r\n        new CuiTooltipComponent(prefix),\r\n        new CuiCircleComponent(prefix),\r\n        new CuiSpinnerComponent(prefix),\r\n        new CuiScrollComponent(prefix),\r\n        new CuiScrollspyComponent(prefix),\r\n        new CuiIntersectionComponent(prefix),\r\n        new CuiOpenComponent(prefix),\r\n        new CuiCloseComponent(prefix),\r\n        new CuiToggleComponent(prefix),\r\n        new CuiDialogComponent(prefix),\r\n        new CuiOffCanvasComponent(prefix),\r\n        new CuiAccordionComponent(prefix),\r\n        new CuiDropComponenet(prefix),\r\n        new CuiOffsetComponent(prefix),\r\n        new CuiSwitchComponent(prefix),\r\n        new CuiSwitcherComponent(prefix),\r\n        new CuiFloatComponent(prefix),\r\n        new CuiSliderComponent(prefix),\r\n        new CuiBanerComponent(prefix),\r\n        new CuiCoverComponent(prefix),\r\n        new CuiSortableComponent(prefix),\r\n        new CuiResizeComponent(prefix),\r\n    ]\r\n}","import { ElementBuilder } from \"../../core/builders/element\";\r\nimport { is } from \"../../core/utils/functions\";\r\n\r\nexport class DialogBuilder {\r\n    #header: Element | undefined;\r\n    #body: Element | undefined;\r\n    #footer: Element | undefined;\r\n    #prefix: string;\r\n    #switches: string;\r\n    #reverse: boolean;\r\n    constructor(prefix: string, reverse: boolean, switches?: string) {\r\n        this.#prefix = prefix;\r\n        this.#header = this.#footer = this.#body = undefined;\r\n        this.#switches = switches ?? \"\";\r\n        this.#reverse = reverse;\r\n    }\r\n\r\n    createHeader(title: string, classes: string[], elements?: Element[]) {\r\n        if (!is(classes)) {\r\n            classes = []\r\n        }\r\n        if (!is(elements)) {\r\n            elements = []\r\n        }\r\n        let headerBuilder = new ElementBuilder('div');\r\n        headerBuilder.setClasses(`${this.#prefix}-dialog-header`, ...classes)\r\n        this.#header = headerBuilder.build();\r\n\r\n        let titleElement = new ElementBuilder('span').setClasses(this.getPrefixedString(\"-dialog-title\")).build(title)\r\n\r\n        this.#header.appendChild(titleElement);\r\n        // @ts-ignore\r\n        this.appendChildrens(this.#header, ...elements);\r\n\r\n    }\r\n\r\n    createFooter(classes: string[], elements: Element[]) {\r\n        if (!is(classes)) {\r\n            classes = []\r\n        }\r\n        if (!is(elements)) {\r\n            elements = []\r\n        }\r\n        this.#footer = new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-footer\"), ...classes).build();\r\n        // @ts-ignore\r\n        this.appendChildrens(this.#footer, ...elements);\r\n    }\r\n\r\n    createBody(classes: string[], elements: Element[]) {\r\n        if (!is(classes)) {\r\n            classes = []\r\n        }\r\n        if (!is(elements)) {\r\n            elements = []\r\n        }\r\n        this.#body = new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-body\"), ...classes).build();\r\n        // @ts-ignore\r\n        this.appendChildrens(this.#body, ...elements);\r\n    }\r\n\r\n    build(id: string): HTMLElement {\r\n        let classes = [this.getPrefixedString(\"-dialog\")]\r\n        if (this.#reverse) {\r\n            classes.push(this.getPrefixedString('-reverse-auto'));\r\n        }\r\n        let dialog = new ElementBuilder('div').setId(id).setClasses(...classes).setAttributes({\r\n            [this.getPrefixedString('-dialog')]: this.#switches\r\n        }).build();\r\n        let container = new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-container\")).build();\r\n        if (this.#header)\r\n            container.appendChild(this.#header);\r\n        if (this.#body)\r\n            container.appendChild(this.#body);\r\n        if (this.#footer)\r\n            container.appendChild(this.#footer);\r\n        dialog.appendChild(container);\r\n        return dialog;\r\n    }\r\n\r\n    private appendChildrens(parent: Element, ...elements: Element[]) {\r\n        if (is(elements)) {\r\n            elements.forEach((element) => parent.appendChild(element));\r\n        }\r\n    }\r\n    private getPrefixedString(str: string) {\r\n        return this.#prefix + str\r\n    }\r\n}","import { ElementManager } from \"../../app/managers/element\";\r\nimport { ElementBuilder } from \"../../core/builders/element\";\r\nimport { CuiContext } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { is } from \"../../core/utils/functions\";\r\nimport { DialogBuilder } from \"./builder\";\r\nimport { CuiAlertOptions, CuiAlertType } from \"./models\";\r\n\r\nexport interface ICuiAlertHandler {\r\n    show(root: Element): void;\r\n}\r\n\r\ninterface AlertCallbacks {\r\n    [name: string]: (() => void) | undefined;\r\n}\r\n\r\nabstract class CuiAlertHandlerBase implements ICuiAlertHandler, CuiContext {\r\n    #callbacks: AlertCallbacks;\r\n    #utils: CuiUtils;\r\n    #id: string;\r\n    #manager: ElementManager | undefined;\r\n    closeStr: string;\r\n    iconStr: string;\r\n    content: string;\r\n    title: string;\r\n    prefix: string;\r\n    reverse: boolean;\r\n    #attid: string | null;\r\n    constructor(setup: CuiUtils, id: string, data: CuiAlertOptions) {\r\n        this.#callbacks = {\r\n            \"yes\": data.onYes,\r\n            \"no\": data.onNo,\r\n            \"cancel\": data.onCancel,\r\n            \"ok\": data.onOk\r\n        }\r\n        this.content = data.message;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        this.#utils = setup;\r\n        this.#id = id;\r\n        this.reverse = false;\r\n        this.#attid = null;\r\n        this.closeStr = `${this.#utils.setup.prefix}-close`;\r\n        this.iconStr = `${this.#utils.setup.prefix}-icon`;\r\n        this.#manager = undefined;\r\n    }\r\n\r\n    getId(): string {\r\n        return this.#id;\r\n    }\r\n\r\n    show(root: Element): void {\r\n        if (!this.#utils) {\r\n            return;\r\n        }\r\n\r\n        let element = document.getElementById(this.#id);\r\n        if (!is(element)) {\r\n            element = this.createElement();\r\n            this.#utils.interactions.mutate(() => {\r\n                // @ts-ignore - already checked\r\n                root.appendChild(element);\r\n            }, null)\r\n\r\n        } else {\r\n            // @ts-ignore - already checked\r\n            this.updateElement(element);\r\n        }\r\n        setTimeout(() => {\r\n            // @ts-ignore - already checked\r\n            this.#manager = new ElementManager([element], this.#utils);\r\n            let ids = this.#manager.on('closed', this.onClose.bind(this));\r\n            this.#attid = ids.length > 0 ? ids[0] : null;\r\n            this.#manager.emit(\"open\");\r\n        }, 50);\r\n    }\r\n\r\n    updateElement(element: HTMLElement) {\r\n        this.#utils.interactions.fetch(() => {\r\n            let title = element.querySelector(`.${this.prefix}-dialog-title`);\r\n            let content = element.querySelector(`.${this.prefix}-dialog-body>p`);\r\n            this.#utils.interactions.mutate(() => {\r\n                if (title) {\r\n                    title.innerHTML = this.title;\r\n                }\r\n                if (content) {\r\n                    content.innerHTML = this.content;\r\n                }\r\n            }, null)\r\n        }, null)\r\n    }\r\n\r\n    onClose(arg: any) {\r\n        try {\r\n            if (is(arg) && arg.state && this.#callbacks) {\r\n                if (is(this.#callbacks[arg.state])) {\r\n                    let callback = this.#callbacks[arg.state];\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                }\r\n            }\r\n        } finally {\r\n            if (this.#attid != null) {\r\n                if (this.#manager)\r\n                    this.#manager.detach('closed', this.#attid);\r\n                this.#attid = null;\r\n            }\r\n\r\n            this.#manager = undefined;\r\n        }\r\n    }\r\n\r\n    abstract createElement(): HTMLElement;\r\n\r\n\r\n}\r\n\r\nexport class CuiAlertHandler extends CuiAlertHandlerBase {\r\n    #id: string;\r\n    constructor(setup: CuiUtils, id: string, data: CuiAlertOptions) {\r\n        super(setup, id, data);\r\n        this.#id = id;\r\n        this.reverse = data.reverse ?? false;\r\n    }\r\n\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n\r\n        dialogBuilder.createHeader(this.title, [], [\r\n            new ElementBuilder('a').setClasses(`${this.prefix}-icon`).setAttributes({\r\n                [this.closeStr]: \"state: cancel\",\r\n                [this.iconStr]: \"close\"\r\n            }).build()\r\n        ]);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-margin-small-right`).setAttributes({ [this.closeStr]: \"state: cancel\" }).build(\"Cancel\"),\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: ok\" }).build(\"Ok\")\r\n        ])\r\n        return dialogBuilder.build(this.#id);\r\n    }\r\n}\r\n\r\nexport class CuiInfoAlertUpHandler extends CuiAlertHandlerBase {\r\n    #id: string;\r\n    constructor(setup: CuiUtils, id: string, data: CuiAlertOptions) {\r\n        super(setup, id, data);\r\n        this.#id = id;\r\n        this.content = data.message;;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        this.reverse = data.reverse ?? false;\r\n\r\n    }\r\n\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n        dialogBuilder.createHeader(this.title, []);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: ok\" }).build(\"Ok\")\r\n        ])\r\n\r\n        return dialogBuilder.build(this.#id);\r\n    }\r\n}\r\n\r\nexport class CuiYesNoPopUpHandler extends CuiAlertHandlerBase {\r\n    #id: string;\r\n    constructor(setup: CuiUtils, id: string, data: CuiAlertOptions) {\r\n        super(setup, id, data);\r\n        this.#id = id;\r\n        this.content = data.message;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        this.reverse = data.reverse ?? false;\r\n    }\r\n\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n\r\n        dialogBuilder.createHeader(this.title, [], [\r\n            new ElementBuilder('a').setClasses(`${this.prefix}-icon`).setAttributes({\r\n                [this.closeStr]: \"state: cancel\",\r\n                [this.iconStr]: \"close\"\r\n            }).build()\r\n        ]);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-margin-small-right`).setAttributes({ [this.closeStr]: \"state: no\" }).build(\"No\"),\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: yes\" }).build(\"Yes\")\r\n        ])\r\n        return dialogBuilder.build(this.#id);\r\n    }\r\n}\r\n\r\nexport class CuiAlertFactory {\r\n    static get(id: string, type: CuiAlertType, data: CuiAlertOptions, utils: CuiUtils): ICuiAlertHandler | undefined {\r\n        if (type === \"Info\") {\r\n            return new CuiInfoAlertUpHandler(utils, id, data);\r\n        } else if (type === 'YesNoCancel') {\r\n            return new CuiYesNoPopUpHandler(utils, id, data);\r\n        } else if (type === 'OkCancel') {\r\n            return new CuiAlertHandler(utils, id, data);\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n\r\n\r\n","import { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { ICuiLogger, ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\nimport { CuiAlertFactory } from \"./handler\";\r\nimport { CuiAlertEvent } from \"./models\";\r\n\r\n\r\n\r\nexport class CuiAlertsPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string;\r\n    setup: any;\r\n\r\n    #handleId: string | null;\r\n    #utils: CuiUtils | undefined;\r\n    #log: ICuiLogger;\r\n    constructor() {\r\n        this.name = \"alert-plugin\";\r\n        this.description = \"CuiAlertsPlugin\";\r\n\r\n        this.#handleId = null;\r\n        this.#utils = undefined;\r\n        this.#log = CuiLoggerFactory.get(\"CuiAlertsPlugin\")\r\n    }\r\n    init(utils: CuiUtils): void {\r\n        this.#utils = utils;\r\n        this.detach();\r\n        this.#handleId = this.#utils.bus.on(EVENTS.ALERT, this.onAlert.bind(this), { $cuid: this.name });\r\n    }\r\n\r\n    destroy(): void {\r\n        this.detach();\r\n    }\r\n\r\n    private detach() {\r\n        if (this.#handleId && this.#utils) {\r\n            this.#utils.bus.detach(EVENTS.ALERT, this.#handleId);\r\n            this.#handleId = null\r\n        }\r\n    }\r\n\r\n    private onAlert(event: CuiAlertEvent) {\r\n        if (!this.#utils) {\r\n            this.#log.error(\"Utils are not set\");\r\n            return;\r\n        }\r\n        if (!this.validateEvent(event)) {\r\n            this.#log.error(\"Event validation failed\");\r\n            return;\r\n        }\r\n        let popup = CuiAlertFactory.get(event.id, event.type, event.options, this.#utils);\r\n        if (!popup) {\r\n            this.#log.error(\"Possibly incorrect alert type\");\r\n            return;\r\n        }\r\n        popup.show(this.#utils.setup.root);\r\n    }\r\n\r\n    private validateEvent(event: CuiAlertEvent): boolean {\r\n        if (!event || !event.id || !event.type || !event.options) {\r\n            return false;\r\n        }\r\n        return true\r\n    }\r\n}\r\n","import { ICuiPlugin, ICuiEventBus } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiWindowClickPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'click-plugin';\r\n    setup: any;\r\n    #bus: ICuiEventBus | undefined;\r\n    #boundClick: (ev: MouseEvent) => void;\r\n\r\n    constructor() {\r\n        this.description = \"CuiWindowClickPlugin\";\r\n        this.#bus = undefined;\r\n        this.#boundClick = this.onWindowClick.bind(this);\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#bus = utils.bus;\r\n        window.addEventListener('click', this.#boundClick)\r\n    }\r\n\r\n    destroy(): void {\r\n        window.removeEventListener('click', this.#boundClick);\r\n    }\r\n\r\n    onWindowClick(ev: MouseEvent) {\r\n        if (this.#bus)\r\n            this.#bus.emit(EVENTS.WINDOW_CLICK, null, ev)\r\n    }\r\n}","import { ICuiPlugin, IUIInteractionProvider } from \"src/core/models/interfaces\";\r\nimport { CuiUtils } from \"src/core/models/utils\";\r\n\r\nconst DEFAULT_FOCUS_VISIBLE = \"focus-visible\";\r\nconst DEFAULT_FOCUS_PRECISE = \"focus-precise\";\r\n\r\ntype FocusInputType = \"keyboard\" | \"mouse\" | \"touch\" | \"none\";\r\n\r\nexport interface ICuiLightFocusPluginSetup {\r\n    keybordClass?: string;\r\n    mouseClass?: string;\r\n    touchClass?: string;\r\n}\r\n\r\nexport class CuiLightFocusPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string;\r\n    setup: ICuiLightFocusPluginSetup;\r\n    #interactions: IUIInteractionProvider | undefined;\r\n    #inputType: FocusInputType;\r\n    #onMouseListener: any;\r\n    #onTouchListener: any;\r\n    #onKeyDownListener: any;\r\n    #currentCls: string | undefined;\r\n    constructor(setup: ICuiLightFocusPluginSetup) {\r\n        this.setup = {\r\n            keybordClass: DEFAULT_FOCUS_VISIBLE,\r\n            mouseClass: DEFAULT_FOCUS_PRECISE,\r\n            touchClass: DEFAULT_FOCUS_PRECISE,\r\n            ...setup\r\n        }\r\n\r\n        this.description = \"CuiLightFocusPlugin\";\r\n        this.name = \"focus-plugin\";\r\n        this.#interactions = undefined;\r\n\r\n        this.#onKeyDownListener = this.onKeyDownEvent.bind(this);\r\n        this.#onMouseListener = this.onMouseEvent.bind(this);\r\n        this.#onTouchListener = this.onTouchEvent.bind(this);\r\n\r\n        this.#inputType = 'none';\r\n        this.#currentCls = undefined;\r\n\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#interactions = utils.interactions;\r\n        document.body.addEventListener('touchstart', this.#onTouchListener);\r\n        document.body.addEventListener('mousedown', this.#onMouseListener);\r\n        window.addEventListener('keydown', this.#onKeyDownListener);\r\n\r\n    }\r\n\r\n    private onMouseEvent(ev: MouseEvent) {\r\n        if (this.#inputType === 'mouse') {\r\n            return;\r\n        }\r\n        this.update('mouse');\r\n    }\r\n\r\n    private onKeyDownEvent(ev: KeyboardEvent) {\r\n        if (this.#inputType === 'keyboard') {\r\n            return;\r\n        }\r\n        this.update('keyboard');\r\n    }\r\n\r\n    private onTouchEvent(ev: TouchEvent) {\r\n        if (this.#inputType === 'touch') {\r\n            return;\r\n        }\r\n        this.update('touch');\r\n    }\r\n\r\n    private update(type: FocusInputType) {\r\n        let cls = this.getClass(type);\r\n        this.setClasses(cls, this.#currentCls, () => {\r\n            this.#currentCls = cls\r\n            this.#inputType = type;\r\n        })\r\n    }\r\n\r\n    private getClass(type: FocusInputType): string | undefined {\r\n        switch (type) {\r\n            case \"keyboard\":\r\n                return this.setup.keybordClass;\r\n            case \"mouse\":\r\n                return this.setup.mouseClass;\r\n            case \"touch\":\r\n                return this.setup.touchClass;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    private setClasses(cls: string | undefined, prevCls: string | undefined, callback: () => void) {\r\n        if (!this.#interactions || cls === prevCls) {\r\n            return;\r\n        }\r\n\r\n        this.#interactions.fetch(() => {\r\n            let hasCls = cls && document.body.classList.contains(cls);\r\n            let hasPrevCls = prevCls && document.body.classList.contains(prevCls);\r\n            // @ts-ignore interactions is set\r\n            this.#interactions.mutate(() => {\r\n                if (!hasCls)\r\n                    // @ts-ignore cls is set\r\n                    document.body.classList.add(cls);\r\n                if (hasPrevCls) {\r\n                    // @ts-ignore prevCls is set\r\n                    document.body.classList.remove(prevCls);\r\n                }\r\n                callback();\r\n            }, null)\r\n\r\n        }, null)\r\n    }\r\n\r\n    destroy(): void {\r\n        document.body.removeEventListener('touchstart', this.#onTouchListener);\r\n        document.body.removeEventListener('mousedown', this.#onMouseListener);\r\n        window.removeEventListener('keydown', this.#onKeyDownListener);\r\n    }\r\n\r\n}","import { ICuiEventListener } from \"../../core/models/interfaces\";\r\nimport { is } from \"../../core/utils/functions\";\r\n\r\nexport class CuiKeyPressListener implements ICuiEventListener<KeyboardEvent> {\r\n    #callback: ((t: KeyboardEvent) => void) | undefined;\r\n    #keys: string[];\r\n    #inProgress: boolean;\r\n    #singleEmit: boolean;\r\n    #isAttached: boolean;\r\n\r\n    #onKeyDownBound: (ev: KeyboardEvent) => void;\r\n    #onKeyUpBound: (ev: KeyboardEvent) => void;\r\n\r\n    constructor(singleEmit: boolean, keys?: string[]) {\r\n        this.#inProgress = false;\r\n        this.#singleEmit = true;\r\n        this.#isAttached = false;\r\n        this.#callback = undefined;\r\n        this.#keys = keys ?? [];\r\n\r\n        this.#onKeyDownBound = this.onKeyDown.bind(this);\r\n        this.#onKeyUpBound = this.onKeyUp.bind(this);\r\n    }\r\n\r\n    setCallback(callback: (t: KeyboardEvent) => void): void {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#inProgress;\r\n    }\r\n\r\n    attach(): void {\r\n        document.addEventListener('keydown', this.#onKeyDownBound)\r\n        if (this.#singleEmit) {\r\n            document.addEventListener('keyup', this.#onKeyUpBound)\r\n        }\r\n        this.#isAttached = true;\r\n    }\r\n\r\n    detach(): void {\r\n        document.removeEventListener('keydown', this.#onKeyDownBound)\r\n        if (this.#singleEmit) {\r\n            document.addEventListener('keyup', this.#onKeyUpBound)\r\n        }\r\n        this.#isAttached = false;\r\n    }\r\n\r\n    isAttached(): boolean {\r\n        return this.#isAttached;\r\n    }\r\n\r\n    onKeyDown(ev: KeyboardEvent) {\r\n        if (this.#inProgress) {\r\n            return;\r\n        }\r\n        this.#inProgress = true;\r\n        try {\r\n            if ((!is(this.#keys) || this.#keys.includes(ev.code)) && this.#callback) {\r\n                this.#callback(ev);\r\n            }\r\n\r\n        } catch (e) {\r\n            console.error(e)\r\n        } finally {\r\n            if (!this.#singleEmit)\r\n                this.#inProgress = false;\r\n        }\r\n    }\r\n\r\n    onKeyUp(ev: KeyboardEvent) {\r\n        this.#inProgress = false;\r\n    }\r\n}","import { ICuiEventBus } from \"../../core/models/interfaces\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\nimport { CuiKeyPressListener } from \"./listener\";\r\n\r\nexport interface KeyDownEvent {\r\n    timestamp: number;\r\n    event: KeyboardEvent;\r\n}\r\nexport interface ICuiKeysObserver {\r\n    connect(): void;\r\n    disconnect(): void;\r\n}\r\nexport class CuiKeysObserver {\r\n    #listener: CuiKeyPressListener;\r\n    #bus: ICuiEventBus\r\n    constructor(bus: ICuiEventBus) {\r\n        this.#bus = bus;\r\n        this.#listener = new CuiKeyPressListener(true);\r\n        this.#listener.setCallback(this.onKeyDown.bind(this))\r\n    }\r\n    connect(): void {\r\n        this.#listener.attach();\r\n    }\r\n    disconnect(): void {\r\n        this.#listener.detach();\r\n    }\r\n\r\n    onKeyDown(ev: KeyboardEvent) {\r\n        this.#bus.emit(EVENTS.KEYDOWN, null, {\r\n            timestamp: Date.now(),\r\n            event: ev\r\n        })\r\n    }\r\n\r\n}","import { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { ICuiKeysObserver, CuiKeysObserver } from \"./observer\";\r\n\r\n\r\nexport interface CuiKeysObserverPluginSetup {\r\n    dummy?: boolean;\r\n}\r\n\r\nexport class CuiKeysObserverPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'keys-plugin';\r\n    setup: CuiKeysObserverPluginSetup;\r\n    #keysObserver: ICuiKeysObserver | undefined;\r\n    constructor(keySetup: CuiKeysObserverPluginSetup) {\r\n        this.description = \"CuiKeysObserverPlugin\";\r\n        this.setup = keySetup;\r\n        this.#keysObserver = undefined;\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#keysObserver = new CuiKeysObserver(utils.bus);\r\n        this.#keysObserver.connect();\r\n    }\r\n\r\n    destroy(): void {\r\n        if (this.#keysObserver)\r\n            this.#keysObserver.disconnect();\r\n    }\r\n}","import { ICuiEventListener } from \"../models/interfaces\";\r\n\r\nexport class CuiMediaQueryListener implements ICuiEventListener<MediaQueryListEvent> {\r\n\r\n    #mediaQuery: string;\r\n    #callback: ((t: MediaQueryListEvent) => void) | undefined;\r\n    #isInitialized: boolean;\r\n    #inProgress: boolean;\r\n\r\n    #onEventBound: (ev: MediaQueryListEvent) => void;\r\n    constructor(mediaQuery: string) {\r\n        this.#mediaQuery = mediaQuery;\r\n        this.#isInitialized = false;\r\n        this.#callback = undefined;\r\n        this.#inProgress = false;\r\n\r\n        this.#onEventBound = this.event.bind(this);\r\n    }\r\n    setCallback(callback: (t: MediaQueryListEvent) => void): void {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#inProgress;\r\n    }\r\n    attach(): void {\r\n        if (!window.matchMedia || this.#isInitialized || !this.#mediaQuery) {\r\n            return;\r\n        }\r\n        window.matchMedia(this.#mediaQuery)\r\n            .addEventListener('change', this.#onEventBound)\r\n        this.#isInitialized = true\r\n    }\r\n\r\n    detach(): void {\r\n        if (this.#isInitialized) {\r\n            window.matchMedia(this.#mediaQuery).removeEventListener('change', this.#onEventBound);\r\n            this.#isInitialized = false\r\n        }\r\n    }\r\n\r\n    isAttached(): boolean {\r\n        return this.#isInitialized;\r\n    }\r\n\r\n    private event(ev: MediaQueryListEvent): void {\r\n        if (this.#inProgress || !this.#callback) {\r\n            return\r\n        }\r\n        this.#inProgress = true;\r\n        try {\r\n            this.#callback(ev);\r\n        } catch (e) {\r\n            console.error(e)\r\n        } finally {\r\n            this.#inProgress = false;\r\n        }\r\n    }\r\n}","import { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { getSystemLightMode } from \"../../core/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"../../core/listeners/media\";\r\n\r\nexport interface AutoLightPluginSetup {\r\n    autoLight: boolean;\r\n}\r\n\r\nexport class CuiAutoLightModePlugin implements ICuiPlugin {\r\n    description: string = 'Dark vs Light mode auto switcher';\r\n    name: string = 'auto-light';\r\n    setup: AutoLightPluginSetup;\r\n    #listener: CuiMediaQueryListener | undefined;\r\n    #utils: CuiUtils | undefined;\r\n    constructor(autoLightInit: AutoLightPluginSetup) {\r\n        this.description = \"CuiAutoLightModePlugin\";\r\n        this.setup = autoLightInit;\r\n        this.#utils = undefined;\r\n        this.#listener = undefined\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#utils = utils\r\n        if (this.setup.autoLight && getSystemLightMode() === 'dark') {\r\n            this.#utils.setLightMode('dark')\r\n        }\r\n        this.#listener = new CuiMediaQueryListener('(prefers-color-scheme: dark)')\r\n        this.#listener.setCallback(this.onChange.bind(this))\r\n        this.#listener.attach();\r\n    }\r\n\r\n    destroy(): void {\r\n        if (this.#listener)\r\n            this.#listener.detach();\r\n    }\r\n\r\n    onChange(ev: MediaQueryListEvent) {\r\n        if (!this.#utils) {\r\n            return;\r\n        }\r\n        let autoLightSetup = this.#utils.setup.plugins[this.description] as AutoLightPluginSetup;\r\n        let autoLight = autoLightSetup?.autoLight ?? false;\r\n        if (autoLight) {\r\n            if (ev.matches) {\r\n                this.#utils.setLightMode('dark')\r\n            } else {\r\n                this.#utils.setLightMode('light')\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { CuiMoveEventListener, ICuiMoveEvent } from \"../../core/listeners/move\";\r\nimport { ICuiEventBus } from \"../../core/models/interfaces\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nconst DEFAULT_GESTURE_TRESHOLD = 0.3;\r\ntype GlobalMoveGesture = 'up' | 'down' | 'left' | 'right' | 'none'\r\n\r\nexport class CuiMoveObserver {\r\n    #bus: ICuiEventBus;\r\n    #moveListener: CuiMoveEventListener;\r\n    #isLocked: boolean;\r\n    #eventId: string | null;\r\n    #firstEvent: ICuiMoveEvent | undefined;\r\n    #wasFirstEventSend: boolean;\r\n    #gesturesEnabled: boolean;\r\n    constructor(bus: ICuiEventBus, gestures: boolean) {\r\n        this.#bus = bus;\r\n        this.#moveListener = new CuiMoveEventListener();\r\n        this.#moveListener.setCallback(this.onMove.bind(this));\r\n        this.#firstEvent = undefined;\r\n        this.#isLocked = false;\r\n        this.#eventId = null;\r\n        this.#wasFirstEventSend = false;\r\n        this.#gesturesEnabled = gestures;\r\n    }\r\n\r\n    attach() {\r\n        if (!this.#moveListener.isAttached()) {\r\n            this.#moveListener.attach();\r\n            this.#eventId = this.#bus.on(EVENTS.MOVE_LOCK, this.onMoveLock.bind(this))\r\n        }\r\n    }\r\n\r\n    detach() {\r\n        if (this.#moveListener.isAttached()) {\r\n            this.#moveListener.detach();\r\n            this.#eventId != null && this.#bus.detach(EVENTS.MOVE_LOCK, this.#eventId);\r\n        }\r\n\r\n    }\r\n\r\n    isAttached() {\r\n        return this.#moveListener.isAttached();\r\n    }\r\n\r\n    private onMove(data: ICuiMoveEvent) {\r\n        if (this.#isLocked) {\r\n            return;\r\n        }\r\n        switch (data.type) {\r\n            case \"down\":\r\n                this.#firstEvent = data;\r\n                this.#wasFirstEventSend = false\r\n                break;\r\n            case \"move\":\r\n                if (this.#firstEvent && !this.#wasFirstEventSend) {\r\n                    this.#bus.emit(EVENTS.GLOBAL_MOVE, null, this.#firstEvent);\r\n                    this.#wasFirstEventSend = true;\r\n                }\r\n                this.#bus.emit(EVENTS.GLOBAL_MOVE, null, data);\r\n                break;\r\n            case \"up\":\r\n                this.#bus.emit(EVENTS.GLOBAL_MOVE, null, data);\r\n                if (this.#firstEvent) {\r\n                    if (this.#gesturesEnabled) {\r\n                        const { diffX, diffY } = this.getGestureDiff(this.#firstEvent, data);\r\n                        const gesture = this.calculateGesture(diffX, diffY);\r\n                        this.pushGestureEvent(gesture, diffX, diffY);\r\n                    }\r\n                    this.#firstEvent = undefined;\r\n                }\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    private onMoveLock(flag: boolean) {\r\n        this.#isLocked = flag;\r\n    }\r\n\r\n    private getGestureDiff(firstEvent: ICuiMoveEvent, lastEvent: ICuiMoveEvent) {\r\n        return {\r\n            diffX: lastEvent.x - firstEvent.x,\r\n            diffY: lastEvent.y - firstEvent.y\r\n        }\r\n    }\r\n\r\n    private calculateGesture(diffX: number, diffY: number): GlobalMoveGesture {\r\n        const tresholdX = window.innerWidth * DEFAULT_GESTURE_TRESHOLD;\r\n        const absDiffX = Math.abs(diffX);\r\n        const absDiffY = Math.abs(diffY);\r\n        if (absDiffX > absDiffY && absDiffX > tresholdX) {\r\n            return diffX > 0 ? \"right\" : \"left\";\r\n        }\r\n        const tresholdY = window.innerHeight * DEFAULT_GESTURE_TRESHOLD;\r\n        if (absDiffY > tresholdY) {\r\n            return diffY > 0 ? \"down\" : 'up';\r\n        }\r\n        return 'none';\r\n    }\r\n\r\n    private pushGestureEvent(type: GlobalMoveGesture, diffX: number, diffY: number) {\r\n        const eventName = this.getGestureEventName(type);\r\n        if (!eventName) {\r\n            return;\r\n        }\r\n        this.#bus.emit(eventName, null, {\r\n            timespstamp: Date.now(),\r\n            changeX: diffX,\r\n            changeY: diffY\r\n        })\r\n\r\n    }\r\n\r\n    private getGestureEventName(type: GlobalMoveGesture): string | null {\r\n        switch (type) {\r\n            case \"up\":\r\n                return EVENTS.GESTURE_UP;\r\n            case 'down':\r\n                return EVENTS.GESTURE_DOWN;\r\n            case \"left\":\r\n                return EVENTS.GESTURE_LEFT;\r\n            case \"right\":\r\n                return EVENTS.GESTURE_RIGHT;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n}","import { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiMoveObserver } from \"./observer\";\r\n\r\n\r\nexport class CuiMoveObserverPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'move-observer-plugin';\r\n    setup: any;\r\n    #moveObserver: CuiMoveObserver | undefined;\r\n    #gesturesEnabled: boolean;\r\n    constructor(gestures?: boolean) {\r\n        this.description = \"CuiMoveObserverPlugin\";\r\n        this.#moveObserver = undefined;\r\n        this.#gesturesEnabled = gestures === false ? false : true;\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#moveObserver = new CuiMoveObserver(utils.bus, this.#gesturesEnabled);\r\n        this.#moveObserver.attach();\r\n    }\r\n\r\n    destroy(): void {\r\n        if (this.#moveObserver && this.#moveObserver.isAttached())\r\n            this.#moveObserver.detach();\r\n    }\r\n}","import { are, is } from \"../../core/utils/functions\";\r\nimport { ICuiNotification } from \"./interfaces\";\r\n\r\nexport function validateNotificationData(data: ICuiNotification): boolean {\r\n    return is(data) && are(data.id, data.title);\r\n}","import { IconBuilder } from \"../../core/builders/icon\";\r\nimport { ElementBuilder } from \"../../core/builders/element\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { are, is } from \"../../core/utils/functions\";\r\nimport { CuiNotificationType, ICuiNotification, ICuiNotificationAction } from \"./interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\n\r\n\r\n\r\nconst closeIcon = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 3,3 17,17\\\"></path><path d=\\\"M 17,3 3,17\\\"></path></svg>\";\r\n\r\n\r\nexport default async function getNotification(data: ICuiNotification, utils: CuiUtils, cache: any, onClose: () => void): Promise<HTMLElement | undefined> {\r\n    let prefix = utils.setup.prefix;\r\n\r\n    if (!are(data.title, data.id)) {\r\n        return undefined;\r\n    }\r\n    const parts: ElementBuilder[] = [getHeader(data.title, cache, onClose)];\r\n    if (is(data.message)) {\r\n        //@ts-ignore message is defined\r\n        parts.push(getBody(data.message, cache))\r\n    }\r\n    if (is(data.actions)) {\r\n        //@ts-ignore actions is defined\r\n        parts.push(getFooter(data.actions, cache, onClose));\r\n    }\r\n\r\n    return new ElementBuilder('div').setClasses(cache.NOTIFICATION_CLS, cache.MARGIN_SMALL_VERTICAL, getClassByType(prefix, data.type)).setId(data.id).setRawChildren(...parts).build();\r\n\r\n}\r\n\r\nfunction getHeader(title: string, cache: any, onClose: () => void): ElementBuilder {\r\n    const titleElement = new ElementBuilder('span').setClasses(cache.NOTIFICATION_TITLE_CLS).setTextContent(title);\r\n    const iconCloseElement = new IconBuilder(closeIcon).build();\r\n    const closeElement = new ElementBuilder('a').setClasses(cache.ICON_CLS, cache.NOTIFICATION_CLOSE_CLS).onEvent('click', onClose);\r\n    if (iconCloseElement) {\r\n        closeElement.setChildren(iconCloseElement)\r\n    }\r\n    const header = new ElementBuilder('div').setClasses(cache.NOTIFICATION_HEADER_CLS).setRawChildren(titleElement, closeElement);\r\n    return header;\r\n}\r\n\r\nfunction getBody(message: string, cache: any): ElementBuilder {\r\n    return new ElementBuilder('div').setClasses(cache.NOTIFICATION_BODY_CLS).setRawChildren(new ElementBuilder('div').setTextContent(message));\r\n}\r\n\r\nfunction getFooter(actions: ICuiNotificationAction[], cache: any, onClose: () => void): ElementBuilder {\r\n    return new ElementBuilder('div').setClasses(cache.NOTIFICATION_FOOTER_CLS).setRawChildren(getActionsList(actions, onClose));\r\n}\r\n\r\nfunction getActionsList(actions: ICuiNotificationAction[], onClose: () => void): ElementBuilder {\r\n    return new ElementBuilder('ul').setRawChildren(...actions.map(action => {\r\n        return new ElementBuilder('li').setRawChildren(new ElementBuilder('a').onEvent('click', () => {\r\n            try {\r\n                action.callback();\r\n            } catch (e) {\r\n                const log = CuiLoggerFactory.get(\"Notifications\");\r\n                log.exception(e, \"OnActionClick\");\r\n            } finally {\r\n                onClose();\r\n            }\r\n        }).setTextContent(action.name))\r\n    }));\r\n}\r\n\r\nfunction getClassByType(prefix: string, type?: CuiNotificationType) {\r\n    return `${prefix}-${type ?? 'default'}`;\r\n}","import { ElementBuilder } from \"../../core/builders/element\";\r\nimport { are, replacePrefix } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\nimport { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiActionsHelper } from \"../../core/helpers/helpers\";\r\nimport { CuiClassAction } from \"../../core/utils/actions\";\r\nimport { ElementsHolder, ICuiNotification, ICuiNotificationPluginSetup } from \"./interfaces\";\r\nimport { validateNotificationData } from \"./helpers\";\r\nimport getNotification from \"./builder\";\r\n\r\n\r\nconst CONTAINER_ID = \"notifications-container\";\r\nconst CONTAINER_CLS = \"{prefix}-notification-container\";\r\n\r\nconst NOTIFICATION_CLS = '{prefix}-notification';\r\nconst NOTIFICATION_HEADER_CLS = '{prefix}-notification-header';\r\nconst NOTIFICATION_TITLE_CLS = '{prefix}-notification-title';\r\nconst NOTIFICATION_BODY_CLS = '{prefix}-notification-body';\r\nconst NOTIFICATION_FOOTER_CLS = '{prefix}-notification-footer';\r\nconst NOTIFICATION_ACTIVE_CLS = '{prefix}-active';\r\nconst NOTIFICATION_ICON_CLS = \"{prefix}-notification-icon\";\r\nconst NOTIFICATION_CLOSE_CLS = \"{prefix}-notification-close\";\r\nconst ICON_CLS = \"{prefix}-icon\";\r\n\r\nconst NOTIFICATION_ANIMATION_IN = \"{prefix}-notification-animation-in\";\r\nconst NOTIFICATION_ANIMATION_OUT = \"{prefix}-notification-animation-out\";\r\nconst MARGIN_SMALL_VERTICAL = \"{prefix}-margin-small-vertical\";\r\n\r\n\r\n\r\n\r\n\r\nexport class CuiNotificationPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'notification-plugin';\r\n    setup: any;\r\n    #utils: CuiUtils | undefined;\r\n    #container: HTMLElement | null;\r\n    #handleId: string | null;\r\n    #cache: any;\r\n    #holder: ElementsHolder;\r\n    #actionsHelper: CuiActionsHelper | undefined;\r\n    #timeout: number;\r\n\r\n    constructor(setup: ICuiNotificationPluginSetup) {\r\n        this.description = \"CuiNotificationPlugin\";\r\n        this.#container = null;\r\n        this.#utils = undefined;\r\n        this.#handleId = null;\r\n        this.#cache = {};\r\n        this.#holder = {};\r\n        this.#actionsHelper = undefined;\r\n        this.#timeout = setup.timeout ?? 5000;\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.createCache(utils.setup.prefix);\r\n        this.getOrCreateContainer(utils, document.body);\r\n        this.#actionsHelper = new CuiActionsHelper(utils.interactions);\r\n        this.#utils = utils\r\n        this.#handleId = this.#utils.bus.on(EVENTS.NOTIFY, this.onEvent.bind(this), { $cuid: this.name });\r\n    }\r\n\r\n    destroy(): void {\r\n        if (this.#container)\r\n            this.#container.remove();\r\n        if (this.#handleId && this.#utils) {\r\n            this.#utils.bus.detach(EVENTS.NOTIFY, this.#handleId);\r\n        }\r\n    }\r\n\r\n    private onEvent(data: ICuiNotification) {\r\n        if (!validateNotificationData(data) || !this.#utils || !this.#actionsHelper || !this.#container) {\r\n            return;\r\n        }\r\n\r\n        if (this.#holder[data.id]) {\r\n            return;\r\n        }\r\n        // Create element\r\n        getNotification(data, this.#utils, this.#cache, () => {\r\n            this.onNotificationClose(data, false, true);\r\n        }).then(notificationEl => {\r\n            if (!notificationEl) {\r\n                return;\r\n            }\r\n            this.addNotificationToTree(notificationEl)\r\n            // Set timeout function\r\n            let timeoutId = null;\r\n            //  If auto option is not specifically set to false\r\n            if (!(data.auto === false)) {\r\n                timeoutId = this.setAutoClose(data);\r\n            }\r\n            // Setup holder\r\n            this.#holder[data.id] = {\r\n                element: notificationEl,\r\n                timeoutId: timeoutId\r\n            }\r\n            // Call open\r\n            this.act(notificationEl, this.#cache.NOTIFICATION_ANIMATION_IN).then(() => {\r\n                notificationEl.classList.add(this.#cache.NOTIFICATION_ACTIVE_CLS);\r\n            });\r\n        });\r\n    }\r\n\r\n    private setAutoClose(data: ICuiNotification): any {\r\n        return setTimeout(() => {\r\n            this.onNotificationClose(data, true, false);\r\n        }, this.#timeout);\r\n    }\r\n\r\n    private addNotificationToTree(notifiactionElement: HTMLElement) {\r\n        //@ts-ignore utils is defined\r\n        this.#utils.interactions.mutate(() => {\r\n            // Add to DOM treee\r\n            //@ts-ignore container is defined\r\n            if (this.#container.children.length === 0) {\r\n                //@ts-ignore container is defined\r\n                this.#container.appendChild(notifiactionElement)\r\n            } else {\r\n                //@ts-ignore container is defined\r\n                this.#container.insertBefore(notifiactionElement, this.#container.firstChild);\r\n            }\r\n        }, null)\r\n    }\r\n\r\n    private onNotificationClose(notification: ICuiNotification, fromTimeout: boolean, dissmissed: boolean) {\r\n        if (!notification || !this.#actionsHelper || !this.#utils) {\r\n            return;\r\n        }\r\n        const holder = this.#holder[notification.id];\r\n        if (!holder) {\r\n            return;\r\n        }\r\n\r\n        if (!fromTimeout) {\r\n            clearTimeout(holder.timeoutId);\r\n        }\r\n\r\n        this.act(holder.element, this.#cache.NOTIFICATION_ANIMATION_OUT).then(() => {\r\n            // @ts-ignore utils is defined\r\n            this.#utils.bus.emit(EVENTS.NOTIFIED, null, { ...notification, dissmissed: dissmissed })\r\n            holder.element.remove();\r\n            delete this.#holder[notification.id];\r\n        })\r\n    }\r\n\r\n    private getOrCreateContainer(utils: CuiUtils, root: HTMLElement) {\r\n        this.#container = document.getElementById(CONTAINER_ID);\r\n        if (!this.#container) {\r\n            this.#container = new ElementBuilder('div').setClasses(replacePrefix(CONTAINER_CLS, utils.setup.prefix)).build();\r\n            root.appendChild(this.#container);\r\n        }\r\n    }\r\n\r\n    private createCache(prefix: string) {\r\n        this.#cache = {\r\n            \"NOTIFICATION_CLS\": replacePrefix(NOTIFICATION_CLS, prefix),\r\n            \"NOTIFICATION_HEADER_CLS\": replacePrefix(NOTIFICATION_HEADER_CLS, prefix),\r\n            \"NOTIFICATION_TITLE_CLS\": replacePrefix(NOTIFICATION_TITLE_CLS, prefix),\r\n            \"NOTIFICATION_BODY_CLS\": replacePrefix(NOTIFICATION_BODY_CLS, prefix),\r\n            \"NOTIFICATION_FOOTER_CLS\": replacePrefix(NOTIFICATION_FOOTER_CLS, prefix),\r\n            \"NOTIFICATION_ACTIVE_CLS\": replacePrefix(NOTIFICATION_ACTIVE_CLS, prefix),\r\n            \"NOTIFICATION_ANIMATION_IN\": replacePrefix(NOTIFICATION_ANIMATION_IN, prefix),\r\n            \"NOTIFICATION_ANIMATION_OUT\": replacePrefix(NOTIFICATION_ANIMATION_OUT, prefix),\r\n            \"NOTIFICATION_ICON_CLS\": replacePrefix(NOTIFICATION_ICON_CLS, prefix),\r\n            \"NOTIFICATION_CLOSE_CLS\": replacePrefix(NOTIFICATION_CLOSE_CLS, prefix),\r\n            \"ICON_CLS\": replacePrefix(ICON_CLS, prefix),\r\n            \"MARGIN_SMALL_VERTICAL\": replacePrefix(MARGIN_SMALL_VERTICAL, prefix),\r\n        }\r\n    }\r\n\r\n    async act(element: HTMLElement, animationClass: string, timeout?: number): Promise<boolean> {\r\n        //@ts-ignore utils is ignored\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        const action = new CuiClassAction(animationClass);\r\n        //@ts-ignore actionsHelper is defined\r\n        return this.#actionsHelper.performAction(element, action, delay ?? 0);\r\n    }\r\n\r\n}","import { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { getSystemPrintMode } from \"../../core/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"../../core/listeners/media\";\r\n\r\nexport interface AutoPrintPluginSetup {\r\n    autoPrint: boolean;\r\n}\r\n\r\nexport class CuiAutoPrintModePlugin implements ICuiPlugin {\r\n    description: string = 'Auto print mode';\r\n    name: string = 'auto-print';\r\n    setup: AutoPrintPluginSetup;\r\n    #listener: CuiMediaQueryListener | undefined;\r\n    #utils: CuiUtils | undefined;\r\n    constructor(autoPrintInit: AutoPrintPluginSetup) {\r\n        this.description = \"CuiAutoPrintModePlugin\";\r\n        this.setup = autoPrintInit;\r\n        this.#listener = undefined;\r\n        this.#utils = undefined;\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#utils = utils;\r\n        if (this.setup.autoPrint && getSystemPrintMode()) {\r\n            this.#utils.setPrintMode(true)\r\n        }\r\n        this.#listener = new CuiMediaQueryListener('print')\r\n        this.#listener.setCallback(this.onChange.bind(this))\r\n        this.#listener.attach();\r\n    }\r\n\r\n    destroy(): void {\r\n        if (this.#listener)\r\n            this.#listener.detach();\r\n    }\r\n\r\n    onChange(ev: MediaQueryListEvent) {\r\n        if (!this.#utils) {\r\n            return;\r\n        }\r\n        this.setup = this.#utils.setup.plugins[this.description] as AutoPrintPluginSetup;\r\n        let autoPrint = this.setup?.autoPrint ?? false;\r\n        if (autoPrint) {\r\n            if (ev.matches) {\r\n                this.#utils.setPrintMode(true)\r\n            } else {\r\n                this.#utils.setPrintMode(false)\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { getRangeValue, is, isInRange, } from \"../utils/functions\";\r\nimport { CuiColorError } from \"./errors\";\r\n\r\nexport class CuiColor {\r\n    #red: number;\r\n    #green: number;\r\n    #blue: number;\r\n    #alpha: number;\r\n    constructor(red: number, green: number, blue: number, alpha?: number) {\r\n        this.#red = 0;\r\n        this.#blue = 0;\r\n        this.#green = 0;\r\n        this.#alpha = 0\r\n        this.set(red, green, blue, alpha);\r\n    }\r\n\r\n    static create(colorStr: string): CuiColor {\r\n        if (!is(colorStr)) {\r\n            throw new CuiColorError(`Given color value is not in a valid format`)\r\n        }\r\n        let parser: ColorParser;\r\n        if (colorStr.startsWith(\"#\")) {\r\n            parser = new HexColorParser(colorStr);\r\n        } else if (colorStr.startsWith(\"rgb\")) {\r\n            parser = new RgbColorParser(colorStr);\r\n        } else {\r\n            throw new CuiColorError(\"Unknown color string format\");\r\n        }\r\n        let res = parser.parse();\r\n        if (!res) {\r\n            throw new CuiColorError(\"Color was not parsed\");\r\n        }\r\n        return res;\r\n    }\r\n\r\n    set(red: number, green: number, blue: number, alpha?: number) {\r\n        this.#alpha = getRangeValue(alpha ?? 1, 0, 1);\r\n        this.#blue = getRangeValue(blue, 0, 255);\r\n        this.#red = getRangeValue(red, 0, 255);\r\n        this.#green = getRangeValue(green, 0, 255);\r\n    }\r\n\r\n    setRed(red: number) {\r\n        this.#red = getRangeValue(red, 0, 255);\r\n    }\r\n\r\n    setGreen(green: number) {\r\n        this.#green = getRangeValue(green, 0, 255);\r\n    }\r\n\r\n    setBlue(blue: number) {\r\n        this.#blue = getRangeValue(blue, 0, 255);\r\n    }\r\n\r\n    opacity(val: number): CuiColor {\r\n        this.#alpha = getRangeValue(val, 0, 1);\r\n        return this;\r\n    }\r\n\r\n    lighten(amount: number): CuiColor {\r\n        this.shade(amount)\r\n        return this;\r\n    }\r\n\r\n    darken(amount: number): CuiColor {\r\n        this.shade(-amount);\r\n        return this;\r\n    }\r\n\r\n    invert(): CuiColor {\r\n        this.#blue = 255 - this.#blue;\r\n        this.#red = 255 - this.#red;\r\n        this.#green = 255 - this.#green;\r\n        return this;\r\n    }\r\n\r\n    getColorValue(type: string): number {\r\n        const t = type ? type.toLowerCase() : '#'\r\n        switch (type) {\r\n            case 'red':\r\n                return this.#red;\r\n            case 'green':\r\n                return this.#green;\r\n            case 'blue':\r\n                return this.#blue;\r\n            case 'alpha':\r\n                return this.#alpha;\r\n        }\r\n        return -1\r\n    }\r\n\r\n    toCssString(): string {\r\n        return `rgba(${this.#red}, ${this.#green}, ${this.#blue}, ${this.#alpha})`;\r\n    }\r\n\r\n    private shade(percent: number, self: boolean = true) {\r\n        this.#red = this.shadeSingle(this.#red, percent, self);\r\n        this.#green = this.shadeSingle(this.#green, percent, self);\r\n        this.#blue = this.shadeSingle(this.#blue, percent, self);\r\n    }\r\n\r\n    private shadeSingle(val: number, percent: number, self: boolean = true) {\r\n        let rel = self ? val : 255;\r\n        let prop = (rel * percent) / 100\r\n        let newVal = val + Math.round(prop);\r\n        return getRangeValue(newVal, 0, 255);\r\n    }\r\n\r\n    clone() {\r\n        return new CuiColor(this.#red, this.#green, this.#blue, this.#alpha)\r\n    }\r\n}\r\n\r\nexport interface CuiColorSet {\r\n    base: CuiColor,\r\n    muted?: CuiColor,\r\n    active?: CuiColor\r\n}\r\n\r\nexport interface CuiColorTheme {\r\n    base: string,\r\n    muted: string,\r\n    active: string\r\n}\r\n\r\nexport interface CuiColorPair {\r\n    light: string,\r\n    dark: string\r\n}\r\n\r\n\r\ninterface ColorParser {\r\n    trim(): void;\r\n    isValid(): boolean;\r\n    parse(): CuiColor | undefined;\r\n}\r\n\r\nexport class HexColorParser implements ColorParser {\r\n    #colorStr: string;\r\n    constructor(colorStr: string) {\r\n        this.#colorStr = colorStr;\r\n    }\r\n\r\n    trim(): void {\r\n        this.#colorStr = this.#colorStr ? this.#colorStr.trim() : \"\";\r\n        return\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return is(this.#colorStr) && this.#colorStr.startsWith(\"#\")\r\n    }\r\n    parse(): CuiColor | undefined {\r\n        let red: number = 0;\r\n        let blue: number = 0;\r\n        let green: number = 0;\r\n        let alpha: number = 1;\r\n        let length = this.#colorStr.length;\r\n        if (this.#colorStr.length === 4) {\r\n            red = parseInt(this.#colorStr[1] + this.#colorStr[1], 16);\r\n            green = parseInt(this.#colorStr[2] + this.#colorStr[2], 16);\r\n            blue = parseInt(this.#colorStr[3] + this.#colorStr[3], 16);\r\n        } else {\r\n            red = parseInt(this.#colorStr[1] + this.#colorStr[2], 16);\r\n            green = parseInt(this.#colorStr[3] + this.#colorStr[4], 16);\r\n            blue = parseInt(this.#colorStr[5] + this.#colorStr[6], 16);\r\n\r\n            if (length > 7) {\r\n                let alphaHex = parseInt(this.#colorStr[7] + this.#colorStr[8], 16);\r\n                alpha = parseFloat((alphaHex / 255).toFixed(2));\r\n            }\r\n        }\r\n        return new CuiColor(red, green, blue, alpha);\r\n    }\r\n}\r\n\r\nexport class RgbColorParser implements ColorParser {\r\n    #colorStr: string;\r\n\r\n    constructor(colorStr: string) {\r\n        this.#colorStr = colorStr;\r\n    }\r\n\r\n    trim(): void {\r\n        this.#colorStr = is(this.#colorStr) ? this.#colorStr.trim() : \"\";\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return is(this.#colorStr) && this.#colorStr.startsWith(\"rgb\");\r\n    }\r\n\r\n    parse(): CuiColor | undefined {\r\n        let len = this.#colorStr.length;\r\n        let str = this.#colorStr.startsWith(\"rgba\") ? this.#colorStr.substring(5, len - 1) : this.#colorStr.substring(4, len - 1);\r\n        let split = str.split(\",\");\r\n        if (!isInRange(split.length, 3, 4)) {\r\n            return undefined;\r\n        }\r\n        let red: number = parseInt(split[0]);\r\n        let green: number = parseInt(split[1]);\r\n        let blue: number = parseInt(split[2]);\r\n        let alpha: number = split.length === 4 ? parseFloat(split[3]) : 1\r\n        return new CuiColor(red, green, blue, alpha);\r\n    }\r\n}","\r\nimport { CuiColor } from \"../../core/models/colors\";\r\nimport { CSS_VARIABLES } from \"../../core/utils/statics\";\r\nimport { PropertySet, PropertySetter } from \"./setter\";\r\n\r\ninterface BaseColorSet {\r\n    background: string;\r\n    base: string;\r\n    active: string;\r\n    muted: string;\r\n    // border: string;\r\n}\r\n\r\nexport interface BaseColors {\r\n    background: CuiColor;\r\n    base: CuiColor;\r\n    active: CuiColor;\r\n    muted: CuiColor;\r\n    // border: string;\r\n}\r\n\r\ninterface ThemeColorSet {\r\n    base: string;\r\n    muted: string;\r\n    active: string;\r\n    shade: string;\r\n    shadeDark: string;\r\n}\r\n\r\ninterface ThemeColors {\r\n    base: CuiColor;\r\n    muted: CuiColor;\r\n    active: CuiColor;\r\n    shade: CuiColor;\r\n    shadeDark: CuiColor;\r\n}\r\n\r\ninterface BaseColorSets {\r\n    [id: string]: BaseColorSet;\r\n}\r\n\r\ninterface ThemeColorSets {\r\n    [id: string]: ThemeColorSet;\r\n}\r\n\r\nconst baseColorSets: BaseColorSets = {\r\n    \"light\": {\r\n        background: CSS_VARIABLES.colorLightBackground,\r\n        base: CSS_VARIABLES.colorLightBase,\r\n        active: CSS_VARIABLES.colorLightActive,\r\n        muted: CSS_VARIABLES.colorLightMuted,\r\n        //  border: CSS_VARIABLES.colorLightBorder,\r\n    },\r\n    \"dark\": {\r\n        background: CSS_VARIABLES.colorDarkBackground,\r\n        base: CSS_VARIABLES.colorDarkBase,\r\n        active: CSS_VARIABLES.colorDarkActive,\r\n        muted: CSS_VARIABLES.colorDarkMuted,\r\n        // border: CSS_VARIABLES.colorLightBorder,\r\n    }\r\n}\r\n\r\nconst themeColors: ThemeColorSets = {\r\n    'accent': {\r\n        base: CSS_VARIABLES.colorAccent,\r\n        muted: CSS_VARIABLES.colorAccentMuted,\r\n        active: CSS_VARIABLES.colorAccentActive,\r\n        shade: CSS_VARIABLES.colorAccentShade,\r\n        shadeDark: CSS_VARIABLES.colorAccentShadeDark\r\n    },\r\n    'secondary': {\r\n        base: CSS_VARIABLES.colorSecondary,\r\n        muted: CSS_VARIABLES.colorSecondaryMuted,\r\n        active: CSS_VARIABLES.colorSecondaryActive,\r\n        shade: CSS_VARIABLES.colorSecondaryShade,\r\n        shadeDark: CSS_VARIABLES.colorSecondaryShadeDark\r\n    },\r\n    'error': {\r\n        base: CSS_VARIABLES.colorError,\r\n        muted: CSS_VARIABLES.colorErrorMuted,\r\n        active: CSS_VARIABLES.colorErrorActive,\r\n        shade: CSS_VARIABLES.colorErrorShade,\r\n        shadeDark: CSS_VARIABLES.colorErrorShadeDark\r\n    },\r\n    'warning': {\r\n        base: CSS_VARIABLES.colorWarning,\r\n        muted: CSS_VARIABLES.colorWarningMuted,\r\n        active: CSS_VARIABLES.colorWarningActive,\r\n        shade: CSS_VARIABLES.colorWarningShade,\r\n        shadeDark: CSS_VARIABLES.colorWarningShadeDark\r\n    },\r\n    'success': {\r\n        base: CSS_VARIABLES.colorSuccess,\r\n        muted: CSS_VARIABLES.colorSuccessMuted,\r\n        active: CSS_VARIABLES.colorSuccessActive,\r\n        shade: CSS_VARIABLES.colorSuccessShade,\r\n        shadeDark: CSS_VARIABLES.colorSuccessShadeDark\r\n    }\r\n}\r\n\r\n\r\nexport class CuiBaseColorsSetter {\r\n    #set: BaseColorSet;\r\n    #setter: PropertySetter;\r\n    constructor(colorSet: string, setter: PropertySetter) {\r\n        this.#set = baseColorSets[colorSet];\r\n        this.#setter = setter;\r\n    }\r\n\r\n    setBackgroundColor(color: CuiColor) {\r\n        this.setColor(this.#set.background, color);\r\n    }\r\n\r\n    setBaseColor(color: CuiColor) {\r\n        this.setColor(this.#set.base, color);\r\n    }\r\n\r\n    setActiveColor(color: CuiColor) {\r\n        this.setColor(this.#set.active, color);\r\n    }\r\n\r\n    setMutedColor(color: CuiColor) {\r\n        this.setColor(this.#set.muted, color);\r\n    }\r\n\r\n    setBaseColors(colors: BaseColors) {\r\n        if (!this.#set) {\r\n            return;\r\n        }\r\n        let set: PropertySet = {}\r\n        set[this.#set.background] = colors.background ? colors.background.toCssString() : \"\";\r\n        set[this.#set.active] = colors.active ? colors.active.toCssString() : \"\";\r\n        set[this.#set.muted] = colors.muted ? colors.muted.toCssString() : \"\";\r\n        set[this.#set.base] = colors.base ? colors.base.toCssString() : \"\";\r\n\r\n        this.#setter.setProperties(set);\r\n    }\r\n\r\n    private setColor(color: string, value: CuiColor) {\r\n        this.#setter.setProperty(color, value.toCssString());\r\n    }\r\n}\r\n\r\n\r\nexport class CuiThemeColorsSetter {\r\n    #setter: PropertySetter;\r\n    #set: ThemeColorSet;\r\n    constructor(set: string, setter: PropertySetter) {\r\n        this.#setter = setter;\r\n        this.#set = themeColors[set];\r\n    }\r\n\r\n    setBaseColor(color: CuiColor) {\r\n        this.setColor(this.#set.base, color);\r\n    }\r\n\r\n    setMutedColor(color: CuiColor) {\r\n        this.setColor(this.#set.muted, color);\r\n    }\r\n\r\n    setActiveColor(color: CuiColor) {\r\n        this.setColor(this.#set.active, color);\r\n    }\r\n\r\n    setShadeColor(color: CuiColor) {\r\n        this.setColor(this.#set.shade, color);\r\n    }\r\n\r\n    setShadeDarkColor(color: CuiColor) {\r\n        this.setColor(this.#set.shadeDark, color);\r\n    }\r\n\r\n    setColors(colors: ThemeColors) {\r\n        if (!this.#set) {\r\n            return;\r\n        }\r\n        let set: PropertySet = {}\r\n        set[this.#set.shade] = colors.shade ? colors.shade.toCssString() : \"\";\r\n        set[this.#set.shadeDark] = colors.shadeDark ? colors.shadeDark.toCssString() : \"\";\r\n        set[this.#set.active] = colors.active ? colors.active.toCssString() : \"\";\r\n        set[this.#set.muted] = colors.muted ? colors.muted.toCssString() : \"\";\r\n        set[this.#set.base] = colors.base ? colors.base.toCssString() : \"\";\r\n\r\n        this.#setter.setProperties(set);\r\n    }\r\n\r\n    setAutoColors(base: CuiColor) {\r\n        let set: PropertySet = {}\r\n        set[this.#set.base] = base.toCssString();\r\n        set[this.#set.shade] = base.lighten(30).toCssString();\r\n        set[this.#set.shadeDark] = base.darken(30).toCssString();\r\n        set[this.#set.active] = base.darken(10).toCssString();\r\n        set[this.#set.muted] = base.lighten(10).toCssString();\r\n        this.#setter.setProperties(set);\r\n    }\r\n\r\n    private setColor(color: string, value: CuiColor) {\r\n        this.#setter.setProperty(color, value.toCssString());\r\n    }\r\n\r\n}","import { CuiUtils } from \"../../core/models/utils\";\r\nimport { are, is } from \"../../core/utils/functions\";\r\n\r\nexport interface PropertySet {\r\n    [property: string]: string;\r\n}\r\nexport class PropertySetter {\r\n    #utils: CuiUtils;\r\n    constructor(utils: CuiUtils) {\r\n        this.#utils = utils;\r\n    }\r\n\r\n    setProperty(property: string, value: string) {\r\n        if (!are(property, value)) {\r\n            return;\r\n        }\r\n        this.#utils.interactions.mutate(() => {\r\n            this.#utils.setProperty(property, value)\r\n        }, null)\r\n    }\r\n\r\n    setProperties(set: PropertySet) {\r\n        if (!is(set)) {\r\n            return;\r\n        }\r\n        this.#utils.interactions.mutate(() => {\r\n            for (let property in set) {\r\n                if (is(set[property]))\r\n                    this.#utils.setProperty(property, set[property])\r\n            }\r\n        }, null)\r\n    }\r\n}","import { CuiColor } from \"../../core/models/colors\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { is } from \"../../core/utils/functions\";\r\nimport { CSS_VARIABLES } from \"../../core/utils/statics\";\r\nimport { CuiBaseColorsSetter, CuiThemeColorsSetter } from \"./colors\";\r\nimport { PropertySetter } from \"./setter\";\r\n\r\nexport class CuiPropertiesHandler {\r\n    #setter: PropertySetter;\r\n    constructor(utils: CuiUtils) {\r\n        this.#setter = new PropertySetter(utils);\r\n    }\r\n\r\n    /**\r\n     * Sets main font size\r\n     * @param {number} value numeric value\r\n     * @param {string} unit optional - size unit, px if not provided\r\n     */\r\n    setBaseFontSize(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.fontSize, value, unit);\r\n    }\r\n\r\n    /**\r\n     * Sets base animation time\r\n     * @param {number} value - time value\r\n     * @param {string} unit  - optional - ms is passed when no provided\r\n     */\r\n    setAnimationTime(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.animationTime, value, unit ?? 'ms');\r\n    }\r\n\r\n    /**\r\n    * Sets long animation time\r\n    * @param {number} value - time value\r\n    * @param {string} unit  - optional - ms is passed when no provided\r\n    */\r\n    setAnimationTimeLong(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.setAnimationTimeLong, value, unit ?? 'ms');\r\n    }\r\n\r\n    /**\r\n    * Sets short animation time\r\n    * @param {number} value - time value\r\n    * @param {string} unit  - optional - ms is passed when no provided\r\n    */\r\n    setAnimationTimeShort(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.setAnimationTimeShort, value, unit ?? 'ms');\r\n    }\r\n\r\n    /**\r\n    * Sets main line size\r\n    * @param {number} value numeric value\r\n    * @param {string} unit optional - size unit, px if not provided\r\n    */\r\n    setBaseLineHeight(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.lineHeight, value, unit);\r\n    }\r\n\r\n    /**\r\n     * Sets base margin value\r\n     * @param {number} value - margin value\r\n     * @param {string} unit - optional - margin unit (px default)\r\n     */\r\n    setBaseMargin(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.margin, value, unit)\r\n    }\r\n\r\n    /**\r\n    * Sets base padding value\r\n    * @param {number} value - padding value\r\n    * @param {string} unit - optional - padding unit (px default)\r\n    */\r\n    setBasePadding(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.padding, value, unit)\r\n    }\r\n\r\n    /**\r\n    * Sets base border radius\r\n    * @param {number} value - border value\r\n    * @param {string} unit - optional - border unit (px default)\r\n    */\r\n    setBaseBorderRadius(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.borderRadius, value, unit)\r\n    }\r\n\r\n    /**\r\n   * Sets component space\r\n   * @param {number} value - space value\r\n   * @param {string} unit - optional - space unit (px default)\r\n   */\r\n    setComponentSpace(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.componentSpace, value, unit)\r\n    }\r\n\r\n    /**\r\n     * Sets new accordion chevron icon\r\n     * @param value A SVG formatted to be replaced default value\r\n     */\r\n    setAccordionIcon(value: string) {\r\n        if (!is(value)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.accordionIcon, value);\r\n    }\r\n\r\n    /**\r\n    * Sets a scrollbar width\r\n    * @param value A SVG formatted to be replaced default value\r\n    */\r\n    setScrollbarWidth(value: number, unit?: string) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.scrollbarWidth, value, unit);\r\n    }\r\n\r\n    /**\r\n     * Sets app viewport light background color\r\n     * @param color color to be set\r\n     */\r\n    setAppBackgroundColor(color: CuiColor) {\r\n        if (!is(color)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.colorLightAppBackground, color.toCssString());\r\n    }\r\n\r\n    /**\r\n    * Sets app viewport dark background color\r\n    * @param color color to be set\r\n    */\r\n    setDarkAppBackgroundColor(color: CuiColor) {\r\n        if (!is(color)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.colorDarkAppBackground, color.toCssString());\r\n    }\r\n\r\n    getBaseColorsSetter(): CuiBaseColorsSetter {\r\n        return new CuiBaseColorsSetter(\"light\", this.#setter)\r\n    }\r\n\r\n    getDarkBaseColorsSetter(): CuiBaseColorsSetter {\r\n        return new CuiBaseColorsSetter(\"dark\", this.#setter)\r\n    }\r\n\r\n    getAccentThemeColorsSetter(): CuiThemeColorsSetter {\r\n        return new CuiThemeColorsSetter(\"accent\", this.#setter);\r\n    }\r\n\r\n    getSecondaryThemeColorsSetter(): CuiThemeColorsSetter {\r\n        return new CuiThemeColorsSetter(\"secondary\", this.#setter);\r\n    }\r\n\r\n    getErrorThemeColorsSetter(): CuiThemeColorsSetter {\r\n        return new CuiThemeColorsSetter(\"error\", this.#setter);\r\n    }\r\n\r\n    getWarningThemeColorsSetter(): CuiThemeColorsSetter {\r\n        return new CuiThemeColorsSetter(\"warning\", this.#setter);\r\n    }\r\n\r\n    getSuccessThemeColorsSetter(): CuiThemeColorsSetter {\r\n        return new CuiThemeColorsSetter(\"success\", this.#setter);\r\n    }\r\n\r\n    /**\r\n     * Sets property in interactive way\r\n     * @param {string} name property name - value of {prefix} is replaced by current prefix\r\n     * @param {string} value - property value\r\n     */\r\n    setCSSVariable(name: string, value: string) {\r\n        this.#setter.setProperty(name, value);\r\n    }\r\n\r\n    /**\r\n     * Sets unit type CSS variable property\r\n     * @param name Variable name\r\n     * @param value numeric value\r\n     * @param unit unit - optional - px is default value\r\n     */\r\n    private setBaseUnitValue(name: string, value: number, unit?: string) {\r\n        if (!is(value)) {\r\n            return;\r\n        }\r\n        let strVal = `${value}${unit ?? \"px\"}`;\r\n        this.setCSSVariable(name, strVal);\r\n    }\r\n}","import { ICuiLogger, ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiColor } from \"../../core/models/colors\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { is } from \"../../core/utils/functions\";\r\nimport { CuiPropertiesHandler } from \"./handler\";\r\nexport interface CssChangeEvent {\r\n    method: string,\r\n    arg: any\r\n}\r\nexport interface CuiCSSVariablesPluginSetup {\r\n\r\n}\r\n\r\nexport class CuiCSSVariablesPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'css-variables-plugin';\r\n    setup: CuiCSSVariablesPluginSetup;\r\n    handler: CuiPropertiesHandler | undefined;\r\n    #log: ICuiLogger;\r\n    constructor(keySetup: CuiCSSVariablesPluginSetup) {\r\n        this.description = \"CuiCSSVariablesPlugin\";\r\n        this.setup = keySetup;\r\n        this.#log = CuiLoggerFactory.get(\"CuiCSSVariablesPlugin\");\r\n        this.handler = undefined;\r\n\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.handler = new CuiPropertiesHandler(utils);\r\n        utils.bus.on(\"csschange\", this.onCssChange.bind(this))\r\n    }\r\n\r\n    destroy(): void {\r\n\r\n    }\r\n\r\n    onCssChange(event: CssChangeEvent) {\r\n        if (!this.handler) {\r\n            return;\r\n        }\r\n        let setter = null;\r\n        let accentSetter = null;\r\n\r\n        switch (event.method) {\r\n            case \"baseFontSize\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setBaseFontSize(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"baseLineHeight\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setBaseLineHeight(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTime\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setAnimationTime(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTimeLong\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setAnimationTimeLong(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTimeShort\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setAnimationTimeShort(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"margin\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setBaseMargin(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"padding\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setBasePadding(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"borderRadius\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setBaseBorderRadius(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"componentSpace\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setComponentSpace(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"scrollbarWidth\":\r\n                if (!this.isArgNumber(event.arg)) return;\r\n                this.handler.setScrollbarWidth(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"accordionIcon\":\r\n                if (!is(event.arg)) return;\r\n                this.handler.setAccordionIcon(event.arg);\r\n                break;\r\n            case \"appLightBackground\":\r\n                if (!is(event.arg)) return;\r\n                this.handler.setAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"appDarkBackground\":\r\n                if (!is(event.arg)) return;\r\n                this.handler.setDarkAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"appDarkBackground\":\r\n                if (!is(event.arg)) return;\r\n                this.handler.setDarkAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"mainColorBackground\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setBackgroundColor(CuiColor.create(event.arg.color))\r\n                break;\r\n            case \"mainColor\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setBaseColor(CuiColor.create(event.arg.color))\r\n                break;\r\n            case \"mainColorMuted\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setMutedColor(CuiColor.create(event.arg.color))\r\n                break;\r\n            case \"mainColorActive\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setActiveColor(CuiColor.create(event.arg.color))\r\n                break;\r\n            case \"themeAutoColor\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setAutoColors(CuiColor.create(event.arg.color))\r\n            case \"themeBaseColor\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setAutoColors(CuiColor.create(event.arg.color))\r\n            case \"themeMutedColor\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setMutedColor(CuiColor.create(event.arg.color))\r\n            case \"themeActiveColor\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setActiveColor(CuiColor.create(event.arg.color))\r\n\r\n            case \"themeShadeColor\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setShadeColor(CuiColor.create(event.arg.color))\r\n            case \"themeShadeDarkColor\":\r\n                if (!this.isArgColor(event.arg)) return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setShadeDarkColor(CuiColor.create(event.arg.color))\r\n            default:\r\n                this.#log.warning(\"Unknown event method\", \"onCssChange\");\r\n        }\r\n    }\r\n\r\n    private isArgNumber(arg: any): boolean {\r\n        return is(arg) && is(arg.value);\r\n    }\r\n\r\n    private isArgColor(arg: any) {\r\n        return is(arg) && is(arg.palette) && is(arg.color);\r\n    }\r\n\r\n    private getBaseColorSetter(pallete: string) {\r\n        if (!this.handler) {\r\n            return undefined;\r\n        }\r\n        let prerp = pallete.trim().toLowerCase();\r\n        switch (prerp) {\r\n            case \"light\":\r\n                return this.handler.getBaseColorsSetter();\r\n            case \"dark\":\r\n                return this.handler.getDarkBaseColorsSetter();\r\n        }\r\n    }\r\n\r\n    private getAccentColorSetter(pallete: string) {\r\n        if (!this.handler) {\r\n            return undefined;\r\n        }\r\n        let prerp = pallete.trim().toLowerCase();\r\n        switch (prerp) {\r\n            case \"accent\":\r\n                return this.handler.getAccentThemeColorsSetter();\r\n            case \"secondary\":\r\n                return this.handler.getSecondaryThemeColorsSetter();\r\n            case \"error\":\r\n                return this.handler.getErrorThemeColorsSetter();\r\n            case \"warning\":\r\n                return this.handler.getWarningThemeColorsSetter();\r\n            case \"success\":\r\n                return this.handler.getSuccessThemeColorsSetter();\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n}\r\n","import { CuiWindowSize } from \"../../core/utils/types\";\r\nimport { calcWindowSize, calcWindowSize2 } from \"../../core/utils/functions\";\r\nimport { ICuiEventBus } from \"../../core/models/interfaces\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport interface ICuiResizable {\r\n    resize(data: CuiResizeData): Promise<boolean>;\r\n}\r\n\r\nexport interface ICuiResizableObserver {\r\n    observe(target: ICuiResizable): void;\r\n    unobserve(target: ICuiResizable): void;\r\n    connect(): void;\r\n    disconnect(): void;\r\n}\r\n\r\nexport interface CuiResizeData {\r\n    current: CuiWindowSize;\r\n    previous: CuiWindowSize;\r\n    width: number;\r\n    height: number;\r\n    timestamp: number;\r\n}\r\n\r\nexport class CuiResizeObserver implements ICuiResizableObserver {\r\n\r\n    #items: ICuiResizable[];\r\n    #promises: Promise<boolean>[];\r\n    #prevYValue: number;\r\n    #inProgress: boolean;\r\n    #previousSize: CuiWindowSize;\r\n    #threshold: number;\r\n    #bus: ICuiEventBus;\r\n    #listenerBoundCall: (ev: UIEvent) => void;\r\n    constructor(bus: ICuiEventBus, threshold?: number) {\r\n        this.#items = [];\r\n        this.#promises = [];\r\n        this.#prevYValue = window.innerWidth;\r\n        this.#inProgress = false;\r\n        this.#previousSize = calcWindowSize(window.innerWidth)\r\n        this.#threshold = threshold ?? 0;\r\n        this.#bus = bus;\r\n        this.#listenerBoundCall = this.listener.bind(this);\r\n    }\r\n\r\n    observe(target: ICuiResizable): void {\r\n        let idx = this.#items.findIndex(x => x === target)\r\n        if (idx < 0) {\r\n            this.#items.push(target);\r\n        }\r\n    }\r\n\r\n    unobserve(target: ICuiResizable): void {\r\n        let idx = this.#items.findIndex(x => x === target)\r\n        if (idx >= 0) {\r\n            this.#items.splice(idx, 1)\r\n        }\r\n    }\r\n    connect(): void {\r\n        window.addEventListener('resize', this.#listenerBoundCall)\r\n    }\r\n\r\n    disconnect(): void {\r\n        window.removeEventListener('resize', this.#listenerBoundCall)\r\n    }\r\n\r\n    private pushUpdateToItems(resizeData: CuiResizeData) {\r\n        if (this.#items.length < 1) {\r\n            return;\r\n        }\r\n        this.#promises = [];\r\n        this.#items.forEach(x => {\r\n            this.#promises.push(x.resize(resizeData))\r\n        })\r\n        Promise.all(this.#promises)\r\n        this.#promises = [];\r\n    }\r\n\r\n    private listener(ev: UIEvent) {\r\n        if (this.#inProgress) {\r\n            return;\r\n        }\r\n        this.#inProgress = true\r\n        const diff = window.innerWidth - this.#prevYValue;\r\n\r\n        if (Math.abs(diff) >= this.#threshold) {\r\n            const currentSize = calcWindowSize2(window.innerWidth);\r\n            if (currentSize !== this.#previousSize) {\r\n                const resizeData: CuiResizeData = {\r\n                    current: currentSize,\r\n                    previous: this.#previousSize,\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight,\r\n                    timestamp: Date.now()\r\n                };\r\n                this.#bus.emit(EVENTS.RESIZE, \"\", resizeData)\r\n                this.pushUpdateToItems(resizeData);\r\n\r\n                this.#previousSize = currentSize;\r\n            }\r\n        }\r\n        this.#inProgress = false\r\n    }\r\n\r\n\r\n}","import { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { ICuiResizableObserver, CuiResizeObserver } from \"./observer\";\r\n\r\nexport interface CuiResizeObserverPluginSetup {\r\n    resizeThreshold?: number;\r\n}\r\n\r\nexport class CuiResizeObserverPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'resize-observer-plugin';\r\n    setup: any;\r\n    #resizeObserver: ICuiResizableObserver | undefined;\r\n\r\n    constructor(setup: CuiResizeObserverPluginSetup) {\r\n        this.description = \"CuiResizeObserverPlugin\";\r\n        this.#resizeObserver = undefined;\r\n        this.setup = setup\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#resizeObserver = new CuiResizeObserver(utils.bus, this.setup.resizeThreshold ?? 20);\r\n        this.#resizeObserver.connect();\r\n    }\r\n\r\n    destroy(): void {\r\n        if (this.#resizeObserver)\r\n            this.#resizeObserver.disconnect();\r\n    }\r\n}","import { IUIInteractionProvider } from \"../../core/models/interfaces\";\r\nimport { is, sleep } from \"../../core/utils/functions\";\r\nimport { CLASSES } from \"../../core/utils/statics\";\r\n\r\nexport class CuiToastHandler {\r\n    #interactions: IUIInteractionProvider;\r\n    #selector: string;\r\n    #className: string;\r\n    #activeCls: string;\r\n    #animationTime: number;\r\n    #lock: boolean;\r\n    #animClsIn: string;\r\n    #animClsOut: string;\r\n    constructor(interaction: IUIInteractionProvider, prefix: string, animationTime: number) {\r\n        this.#interactions = interaction;\r\n        this.#selector = `.${prefix}-toast`;\r\n        this.#className = `${prefix}-toast`;\r\n        this.#activeCls = `${prefix}-active`;\r\n        this.#animationTime = animationTime;\r\n        this.#lock = false;\r\n        this.#animClsIn = `${prefix}-toast-animation-in`;\r\n        this.#animClsOut = `${prefix}-toast-animation-out`\r\n    }\r\n\r\n    async show(message: string): Promise<boolean> {\r\n        if (this.#lock) {\r\n            return false;\r\n        }\r\n        this.#lock = true;\r\n        let toastElement = document.querySelector(this.#selector);\r\n        if (!is(toastElement)) {\r\n            toastElement = document.createElement('div');\r\n            toastElement.classList.add(this.#className);\r\n            document.body.appendChild(toastElement);\r\n            await sleep(10);\r\n        }\r\n\r\n        this.#interactions.mutate(() => {\r\n            //@ts-ignore\r\n            toastElement.textContent = message;\r\n            //@ts-ignore\r\n            toastElement.classList.add(CLASSES.animProgress);\r\n            //@ts-ignore\r\n            toastElement.classList.add(this.#animClsIn);\r\n        }, this);\r\n\r\n        await sleep(this.#animationTime);\r\n        this.#interactions.mutate(() => {\r\n            //@ts-ignore\r\n            toastElement.classList.remove(CLASSES.animProgress);\r\n            //@ts-ignore\r\n            toastElement.classList.remove(this.#animClsIn);\r\n            //@ts-ignore\r\n            toastElement.classList.add(this.#activeCls);\r\n        }, this)\r\n        await sleep(3000);\r\n        this.#interactions.mutate(() => {\r\n            //@ts-ignore\r\n            toastElement.classList.add(CLASSES.animProgress);\r\n            //@ts-ignore\r\n            toastElement.classList.add(this.#animClsOut);\r\n        }, this)\r\n\r\n        setTimeout(() => {\r\n            this.#interactions.mutate(() => {\r\n                //@ts-ignore\r\n                toastElement.classList.remove(CLASSES.animProgress);\r\n                //@ts-ignore\r\n                toastElement.classList.remove(this.#animClsOut);\r\n                //@ts-ignore\r\n                toastElement.classList.remove(this.#activeCls);\r\n            }, this)\r\n            this.#lock = false;\r\n        }, this.#animationTime);\r\n        return true;\r\n    }\r\n}","import { EVENTS } from \"../../core/utils/statics\";\r\nimport { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiToastHandler } from \"./handler\";\r\n\r\nexport interface CuiToastPluginSetup {\r\n\r\n}\r\n\r\nexport class CuiToastPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'toast-plugin';\r\n    setup: any;\r\n    #toastHandler: CuiToastHandler | undefined;\r\n    #eventId: string | null;\r\n    #utils: CuiUtils | undefined;\r\n    constructor(setup: CuiToastPluginSetup) {\r\n        this.description = \"CuiToastPlugin\";\r\n        this.setup = setup;\r\n        this.#toastHandler = undefined;\r\n        this.#eventId = null;\r\n        this.#utils = undefined;\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#utils = utils;\r\n        if (!this.#toastHandler) {\r\n            this.#toastHandler = new CuiToastHandler(utils.interactions, utils.setup.prefix, utils.setup.animationTime ?? 300);\r\n        }\r\n\r\n        this.#eventId = utils.bus.on(EVENTS.TOAST, this.onToastShow.bind(this), { $cuid: this.name });\r\n    }\r\n\r\n    destroy(): void {\r\n        if (this.#utils && this.#eventId) {\r\n            this.#utils.bus.detach(EVENTS.TOAST, this.#eventId);\r\n            this.#eventId = null;\r\n        }\r\n    }\r\n\r\n    private onToastShow(message: string) {\r\n        if (!this.#toastHandler || !this.#utils) {\r\n            return;\r\n        }\r\n        this.#utils.bus.emit(EVENTS.TOAST_SHOW, null, []);\r\n        this.#toastHandler.show(message).then(() => {\r\n            if (this.#utils)\r\n                this.#utils.bus.emit(EVENTS.TOAST_HIDDEN, null, []);\r\n        })\r\n    }\r\n}","import { ICuiPlugin } from \"../core/models/interfaces\";\r\nimport { CuiAlertsPlugin } from \"./alert/alert\";\r\nimport { CuiWindowClickPlugin } from \"./click/click\";\r\nimport { CuiLightFocusPlugin, ICuiLightFocusPluginSetup } from \"./focus/focus\";\r\nimport { CuiKeysObserverPlugin } from \"./keys/keys\";\r\nimport { CuiAutoLightModePlugin } from \"./light/light\";\r\nimport { CuiMoveObserverPlugin } from \"./move/move\";\r\nimport { CuiNotificationPlugin } from \"./notification/notification\";\r\nimport { CuiAutoPrintModePlugin } from \"./print/print\";\r\nimport { CuiCSSVariablesPlugin } from \"./properties/properties\";\r\nimport { CuiResizeObserverPlugin } from \"./resize/resize\";\r\nimport { CuiToastPlugin } from \"./toast/toast\";\r\n\r\nexport interface CuiPluginsInit {\r\n    autoLight: boolean;\r\n    autoPrint: boolean;\r\n    notifcationTimeout?: number;\r\n    focusSetup?: ICuiLightFocusPluginSetup;\r\n}\r\n\r\nexport function GetPlugins(init: CuiPluginsInit): ICuiPlugin[] {\r\n    let light: boolean = init ? init.autoLight : true;\r\n    let print: boolean = init ? init.autoPrint : true;\r\n    return [\r\n        new CuiAutoLightModePlugin({ autoLight: light }),\r\n        new CuiAutoPrintModePlugin({ autoPrint: print }),\r\n        new CuiKeysObserverPlugin({}),\r\n        new CuiWindowClickPlugin(),\r\n        new CuiCSSVariablesPlugin({}),\r\n        new CuiMoveObserverPlugin(),\r\n        new CuiResizeObserverPlugin({}),\r\n        new CuiToastPlugin({}),\r\n        new CuiAlertsPlugin(),\r\n        new CuiNotificationPlugin({ timeout: init.notifcationTimeout }),\r\n        new CuiLightFocusPlugin(init.focusSetup ?? {})\r\n\r\n    ]\r\n}","import { ICuiPlugin, ICuiComponent } from \"../core/models/interfaces\";\r\nimport { is } from \"../core/utils/functions\";\r\nimport { CuiInitData, CuiInitializer } from \"./initializer\";\r\nimport { GetComponents } from \"../components/module\";\r\nimport { GetPlugins } from \"../plugins/module\"\r\n\r\n\r\nexport class CuiInit {\r\n    #isInitialized: boolean;\r\n    constructor() {\r\n        this.#isInitialized = false;\r\n    }\r\n\r\n    async init(data: CuiInitData): Promise<boolean> {\r\n        if (this.#isInitialized) {\r\n            console.log(\"Module is already initialized\")\r\n            return false;\r\n        }\r\n        const initializer = new CuiInitializer();\r\n        const pluginList: ICuiPlugin[] = GetPlugins({\r\n            autoLight: true,\r\n            autoPrint: true\r\n        });\r\n\r\n        const componentList: ICuiComponent[] = GetComponents({\r\n            prefix: data.setup?.prefix\r\n        })\r\n        let appPlugins = pluginList;\r\n        if (data.plugins) {\r\n            appPlugins = { ...pluginList, ...data.plugins }\r\n        }\r\n\r\n        let result = await initializer.init({\r\n            ...data,\r\n            plugins: appPlugins,\r\n            // @ts-ignore already checked\r\n            components: is(data.components) ? [...componentList, ...data.components] : componentList,\r\n        })\r\n        if (result.result) {\r\n            this.#isInitialized = true;\r\n            return true;\r\n        } else {\r\n            console.error(`A cUI instance failed to initialize: [${result.message ?? \"#\"}]`);\r\n        }\r\n        console.log(\"Cui Light failed to init\")\r\n        return false;\r\n\r\n    }\r\n}","import { CuiInit } from './app/init';\r\n\r\nexport const CUI_LIGHT_VERSION = \"0.3.8\";\r\n\r\ndeclare global {\r\n    interface Window {\r\n        cuiInit: CuiInit;\r\n    }\r\n}\r\n\r\nexport { CuiInstance } from './app/instance';\r\nwindow.cuiInit = new CuiInit();"],"sourceRoot":""}